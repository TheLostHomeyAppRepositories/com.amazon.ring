(()=>{var __webpack_modules__={42587:(e,t,r)=>{e.exports=r(47359)},81132:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.PushReceiver=void 0;const a=o(r(74719));const c=o(r(92051));const u=o(r(24404));const d=s(r(32630));const p=o(r(84141));const m=o(r(95406));const y=o(r(43985));const g=o(r(86159));const b=o(r(32549));const v=o(r(15268));const w=o(r(59797));const _=r(28420);c.default.util.Long=a.default;c.default.configure();const C="mtalk.google.com";const P=5228;const O=15;class PushReceiver extends w.default{#e;#t;#r=0;#n;#i;#s;#o;#a=0;#c=-1;persistentIds;get fcmToken(){return this.#e.credentials?.fcm?.token}constructor(e){super();this.setDebug(e.debug);b.default.debug("constructor",e);this.#e={bundleId:"receiver.push.com",chromeId:"org.chromium.linux",chromeVersion:"94.0.4606.51",vapidKey:"",persistentIds:[],heartbeatIntervalMs:5*60*1e3,...e};this.persistentIds=this.#e.persistentIds}setDebug(e){b.default.setDebug(e)}onNotification(e){return this.on("ON_MESSAGE_RECEIVED",e)}onCredentialsChanged(e){return this.on("ON_CREDENTIALS_CHANGE",e)}onReady(e){return this.on("ON_READY",e)}connect=async()=>{if(this.#t)return;await this.registerIfNeeded();b.default.debug("connect");this.#c=-1;this.#t=new u.default.TLSSocket(null);this.#t.setKeepAlive(true);this.#t.on("connect",(()=>this.#u()));this.#t.on("close",(()=>this.#l()));this.#t.on("error",(e=>this.#f(e)));this.#t.connect({host:C,port:P});this.#i=new y.default(this.#t);this.#i.on("message",(e=>this.#d(e)));this.#i.on("error",(e=>this.#p(e)));this.#h();return new Promise((e=>{const t=this.onReady((()=>{t();e()}))}))};destroy=()=>{clearTimeout(this.#n);this.#m();if(this.#t){this.#t.removeAllListeners();this.#t.destroy();this.#t=null}if(this.#i){this.#i.destroy();this.#i=null}};get#y(){return{bundleId:this.#e.bundleId,projectId:this.#e.firebase.projectId,vapidKey:this.#e.vapidKey}}checkCredentials(e){if(!e)return false;if(!e.fcm||!e.gcm||!e.keys)return false;if(!e.fcm.installation)return false;if(!e.config)return false;if(JSON.stringify(e.config)!==JSON.stringify(this.#y))return false;return true}async registerIfNeeded(){if(this.checkCredentials(this.#e.credentials)){await(0,d.checkIn)(this.#e);return this.#e.credentials}const e=await(0,m.default)();const t=await(0,d.default)(this.#e);const r=await(0,p.default)(t,e,this.#e);const n={keys:e,gcm:t,fcm:r,config:this.#y};this.emit("ON_CREDENTIALS_CHANGE",{oldCredentials:this.#e.credentials,newCredentials:n});this.#e.credentials=n;b.default.debug("got credentials",n);return this.#e.credentials}#m(){clearTimeout(this.#s);this.#s=undefined;clearTimeout(this.#o);this.#o=undefined}#g(){this.#m();if(!this.#e.heartbeatIntervalMs)return;this.#s=setTimeout((()=>this.#b()),this.#e.heartbeatIntervalMs);this.#o=setTimeout((()=>this.#v()),this.#e.heartbeatIntervalMs*2)}#u=()=>{this.#r=0;this.emit("ON_CONNECT");this.#g()};#l=()=>{this.emit("ON_DISCONNECT");this.#m();this.#v()};#f=e=>{b.default.error(e)};#v(){this.destroy();const e=Math.min(++this.#r,O)*1e3;this.#n=setTimeout((()=>this.connect()),e)}#S(){this.#c=this.#a;return this.#a}#w(){return this.#c!=this.#a}#b(){const e={};if(this.#w()){e.last_stream_id_received=this.#S()}b.default.debug("Heartbeat send pong",e);const t=v.default.mcs_proto.HeartbeatPing;const r=t.verify(e);if(r){throw new Error(r)}const n=t.encodeDelimited(e).finish();b.default.debug("HEARTBEAT sending PING",e);this.#t.write(Buffer.concat([Buffer.from([_.MCSProtoTag.kHeartbeatPingTag]),n]))}#_(e){const t={};if(this.#w()){t.last_stream_id_received=this.#S()}if(e?.status){t.status=e.status}b.default.debug("Heartbeat send pong",t);const r=v.default.mcs_proto.HeartbeatAck;const n=r.verify(t);if(n){throw new Error(n)}const i=r.encodeDelimited(t).finish();b.default.debug("HEARTBEAT sending PONG",t);this.#t.write(Buffer.concat([Buffer.from([_.MCSProtoTag.kHeartbeatAckTag]),i]))}#h(){const e=this.#e.credentials.gcm;const t=v.default.mcs_proto.LoginRequest;const r=a.default.fromString(e.androidId).toString(16);const n={adaptiveHeartbeat:false,authService:2,authToken:e.securityToken,id:`chrome-${this.#e.chromeVersion}`,domain:"mcs.android.com",deviceId:`android-${r}`,networkType:1,resource:e.androidId,user:e.androidId,useRmq2:true,setting:[{name:"new_vc",value:"1"}],clientEvent:[],receivedPersistentId:this.#e.persistentIds};if(this.#e.heartbeatIntervalMs){n.heartbeatStat={ip:"",timeout:true,intervalMs:this.#e.heartbeatIntervalMs}}const i=t.verify(n);if(i){throw new Error(i)}const s=t.encodeDelimited(n).finish();this.#t.write(Buffer.concat([Buffer.from([_.Variables.kMCSVersion,_.MCSProtoTag.kLoginRequestTag]),s]))}#d=({tag:e,object:t})=>{this.#g();switch(e){case _.MCSProtoTag.kLoginResponseTag:this.#e.persistentIds=[];this.emit("ON_READY");this.#g();break;case _.MCSProtoTag.kDataMessageStanzaTag:this.#C(t);break;case _.MCSProtoTag.kHeartbeatPingTag:this.emit("ON_HEARTBEAT");b.default.debug("HEARTBEAT PING",t);this.#_(t);break;case _.MCSProtoTag.kHeartbeatAckTag:this.emit("ON_HEARTBEAT");b.default.debug("HEARTBEAT PONG",t);break;case _.MCSProtoTag.kCloseTag:b.default.debug("Close: Server requested close! message: ",JSON.stringify(t));this.#l();break;case _.MCSProtoTag.kLoginRequestTag:b.default.debug("Login request: message: ",JSON.stringify(t));break;case _.MCSProtoTag.kIqStanzaTag:b.default.debug("IqStanza: ",JSON.stringify(t));break;default:b.default.error("Unknown message: ",JSON.stringify(t));return}this.#a++};#C=e=>{if(this.persistentIds.includes(e.persistentId)){return}let t;try{t=(0,g.default)(e,this.#e.credentials.keys)}catch(e){switch(true){case e.message.includes("Unsupported state or unable to authenticate data"):case e.message.includes("crypto-key is missing"):case e.message.includes("salt is missing"):b.default.warn("Message dropped as it could not be decrypted: "+e.message);return;default:throw e}}this.persistentIds.push(e.persistentId);this.emit("ON_MESSAGE_RECEIVED",{message:t,persistentId:e.persistentId})};#p=e=>{b.default.error(e);this.#v()}}t["default"]=PushReceiver;t.PushReceiver=PushReceiver},28420:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChromeBuildProtoChannel=t.ChromeBuildProtoPlatform=t.DeviceType=t.GcmRequestStatus=t.GcmRequestConstants=t.MCSProtoTag=t.Variables=t.ProcessingState=void 0;var r;(function(e){e[e["MCS_VERSION_TAG_AND_SIZE"]=0]="MCS_VERSION_TAG_AND_SIZE";e[e["MCS_TAG_AND_SIZE"]=1]="MCS_TAG_AND_SIZE";e[e["MCS_SIZE"]=2]="MCS_SIZE";e[e["MCS_PROTO_BYTES"]=3]="MCS_PROTO_BYTES"})(r||(t.ProcessingState=r={}));var n;(function(e){e[e["kVersionPacketLen"]=1]="kVersionPacketLen";e[e["kTagPacketLen"]=1]="kTagPacketLen";e[e["kSizePacketLenMin"]=1]="kSizePacketLenMin";e[e["kSizePacketLenMax"]=5]="kSizePacketLenMax";e[e["kMCSVersion"]=41]="kMCSVersion"})(n||(t.Variables=n={}));var i;(function(e){e[e["kHeartbeatPingTag"]=0]="kHeartbeatPingTag";e[e["kHeartbeatAckTag"]=1]="kHeartbeatAckTag";e[e["kLoginRequestTag"]=2]="kLoginRequestTag";e[e["kLoginResponseTag"]=3]="kLoginResponseTag";e[e["kCloseTag"]=4]="kCloseTag";e[e["kMessageStanzaTag"]=5]="kMessageStanzaTag";e[e["kPresenceStanzaTag"]=6]="kPresenceStanzaTag";e[e["kIqStanzaTag"]=7]="kIqStanzaTag";e[e["kDataMessageStanzaTag"]=8]="kDataMessageStanzaTag";e[e["kBatchPresenceStanzaTag"]=9]="kBatchPresenceStanzaTag";e[e["kStreamErrorStanzaTag"]=10]="kStreamErrorStanzaTag";e[e["kHttpRequestTag"]=11]="kHttpRequestTag";e[e["kHttpResponseTag"]=12]="kHttpResponseTag";e[e["kBindAccountRequestTag"]=13]="kBindAccountRequestTag";e[e["kBindAccountResponseTag"]=14]="kBindAccountResponseTag";e[e["kTalkMetadataTag"]=15]="kTalkMetadataTag";e[e["kNumProtoTypes"]=16]="kNumProtoTypes"})(i||(t.MCSProtoTag=i={}));var s;(function(e){e["kErrorPrefix"]="Error=";e["kTokenPrefix"]="token=";e["kDeviceRegistrationError"]="PHONE_REGISTRATION_ERROR";e["kAuthenticationFailed"]="AUTHENTICATION_FAILED";e["kInvalidSender"]="INVALID_SENDER";e["kInvalidParameters"]="INVALID_PARAMETERS";e["kInternalServerError"]="InternalServerError";e["kQuotaExceeded"]="QUOTA_EXCEEDED";e["kTooManyRegistrations"]="TOO_MANY_REGISTRATIONS"})(s||(t.GcmRequestConstants=s={}));var o;(function(e){e[e["SUCCESS"]=0]="SUCCESS";e[e["INVALID_PARAMETERS"]=1]="INVALID_PARAMETERS";e[e["INVALID_SENDER"]=2]="INVALID_SENDER";e[e["AUTHENTICATION_FAILED"]=3]="AUTHENTICATION_FAILED";e[e["DEVICE_REGISTRATION_ERROR"]=4]="DEVICE_REGISTRATION_ERROR";e[e["UNKNOWN_ERROR"]=5]="UNKNOWN_ERROR";e[e["URL_FETCHING_FAILED"]=6]="URL_FETCHING_FAILED";e[e["HTTP_NOT_OK"]=7]="HTTP_NOT_OK";e[e["NO_RESPONSE_BODY"]=8]="NO_RESPONSE_BODY";e[e["REACHED_MAX_RETRIES"]=9]="REACHED_MAX_RETRIES";e[e["RESPONSE_PARSING_FAILED"]=10]="RESPONSE_PARSING_FAILED";e[e["INTERNAL_SERVER_ERROR"]=11]="INTERNAL_SERVER_ERROR";e[e["QUOTA_EXCEEDED"]=12]="QUOTA_EXCEEDED";e[e["TOO_MANY_REGISTRATIONS"]=13]="TOO_MANY_REGISTRATIONS";e[e["STATUS_COUNT"]=14]="STATUS_COUNT"})(o||(t.GcmRequestStatus=o={}));var a;(function(e){e[e["DEVICE_ANDROID_OS"]=1]="DEVICE_ANDROID_OS";e[e["DEVICE_IOS_OS"]=2]="DEVICE_IOS_OS";e[e["DEVICE_CHROME_BROWSER"]=3]="DEVICE_CHROME_BROWSER";e[e["DEVICE_CHROME_OS"]=4]="DEVICE_CHROME_OS";e[e["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(a||(t.DeviceType=a={}));var c;(function(e){e[e["PLATFORM_WIN"]=1]="PLATFORM_WIN";e[e["PLATFORM_MAC"]=2]="PLATFORM_MAC";e[e["PLATFORM_LINUX"]=3]="PLATFORM_LINUX";e[e["PLATFORM_CROS"]=4]="PLATFORM_CROS";e[e["PLATFORM_IOS"]=5]="PLATFORM_IOS";e[e["PLATFORM_ANDROID"]=6]="PLATFORM_ANDROID";e[e["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(c||(t.ChromeBuildProtoPlatform=c={}));var u;(function(e){e[e["CHANNEL_STABLE"]=1]="CHANNEL_STABLE";e[e["CHANNEL_BETA"]=2]="CHANNEL_BETA";e[e["CHANNEL_DEV"]=3]="CHANNEL_DEV";e[e["CHANNEL_CANARY"]=4]="CHANNEL_CANARY";e[e["CHANNEL_UNKNOWN"]=5]="CHANNEL_UNKNOWN";e[e["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(u||(t.ChromeBuildProtoChannel=u={}))},59797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(15673);class ClassWithEmitter{#P=new n.EventEmitter;on(e,t){const handler=(...e)=>{try{return t(...e)}catch(e){console.error(e)}};this.#P.on(e,handler);return()=>this.#P.off(e,handler)}emit(e,...t){this.#P.emit(e,...t)}}t["default"]=ClassWithEmitter},84141:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.installFCM=installFCM;t.registerFCM=registerFCM;t["default"]=register;const a=o(r(6113));const c=s(r(10801));const u="https://fcm.googleapis.com/";const d="https://fcmregistrations.googleapis.com/v1/";const p="https://firebaseinstallations.googleapis.com/v1/";const m="FIS_v2";const y="w:0.6.6";const getEmptyHeatbeat=()=>btoa(JSON.stringify({heartbeats:[],version:2})).toString();function generateFirebaseFID(){const e=a.default.randomBytes(17);e[0]=112+e[0]%16;return e.toString("base64")}function encodeBase64URL(e){return String(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}async function installFCM(e){const t=await(0,c.default)((0,c.getEndpoint)(e,p,"installations"),{method:"POST",headers:{"x-firebase-client":getEmptyHeatbeat(),"x-goog-api-key":e.firebase.apiKey},body:JSON.stringify({appId:e.firebase.appId,authVersion:m,fid:generateFirebaseFID(),sdkVersion:y})});const r=await t.json();return{token:r.authToken.token,createdAt:(new Date).getTime(),expiresIn:Number.parseInt(r.authToken.expiresIn)*1e3,refreshToken:r.refreshToken,fid:r.fid}}async function registerFCM(e,t,r,n){const i={method:"POST",headers:{"x-goog-api-key":n.firebase.apiKey,"x-goog-firebase-installations-auth":t.token},body:JSON.stringify({web:{applicationPubKey:n.vapidKey||undefined,auth:encodeBase64URL(r.authSecret),endpoint:`${u}fcm/send/${e.token}`,p256dh:encodeBase64URL(r.publicKey)}})};const s=await(0,c.default)((0,c.getEndpoint)(n,d,"registrations"),i);const o=await s.json();if(o.error){throw new Error("FCM registration failed... "+o.error.message)}return o}async function register(e,t,r){const n=await installFCM(r);const i=await registerFCM(e,n,t,r);return{token:i.token,installation:n}}},32630:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.checkIn=checkIn;const i=n(r(74719));const s=r(6113);const o=n(r(10801));const a=n(r(47462));const c=n(r(15268));const u=n(r(32549));const d="https://android.clients.google.com/c2dm/register3";const p="https://android.clients.google.com/checkin";function parseLong(e,t,r){return i.default.fromString(e.toString(),t,r)}t["default"]=async e=>{const t=await checkIn(e);const r=await doRegister(t,e);return r};async function checkIn(e){const t=await(await(0,o.default)(p,{method:"POST",headers:{"Content-Type":"application/x-protobuf"},body:prepareCheckinBuffer(e)})).arrayBuffer();const r=c.default.checkin_proto.AndroidCheckinResponse;const n=r.decode(new Uint8Array(t));const i=r.toObject(n,{longs:String,enums:String,bytes:String});return{androidId:i.androidId,securityToken:i.securityToken}}async function doRegister({androidId:e,securityToken:t},r){const n=`wp:${r.bundleId}#${(0,s.randomUUID)()}`;const i=new URLSearchParams({app:"org.chromium.linux","X-subtype":n,device:e,sender:r.vapidKey||"BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4"}).toString();const o=await postRegister({androidId:e,securityToken:t,body:i});const a=o.split("=")[1];return{token:a,androidId:e,securityToken:t,appId:n}}async function postRegister({androidId:e,securityToken:t,body:r,retry:n=0}){const i=await(await(0,o.default)(d,{method:"POST",headers:{Authorization:`AidLogin ${e}:${t}`,"Content-Type":"application/x-www-form-urlencoded"},body:r})).text();if(i.includes("Error")){u.default.warn(`Register request has failed with ${i}`);if(n>=5){throw new Error("GCM register has failed")}u.default.warn(`Retry... ${n+1}`);await(0,a.default)(1e3);return postRegister({androidId:e,securityToken:t,body:r,retry:n+1})}return i}function prepareCheckinBuffer(e){const t=e.credentials?.gcm;const r=c.default.checkin_proto.AndroidCheckinRequest;const n={accountCookie:[],checkin:{cellOperator:"",chromeBuild:{platform:e.chromePlatform||c.default.checkin_proto.ChromeBuildProto.Platform.PLATFORM_MAC,chromeVersion:e.chromeVersion||"63.0.3234.0",channel:e.chromeChannel||c.default.checkin_proto.ChromeBuildProto.Channel.CHANNEL_STABLE},type:c.default.checkin_proto.DeviceType.DEVICE_CHROME_BROWSER,lastCheckinMsec:parseLong(0n),roaming:"",simOperator:"",userNumber:0},desiredBuild:"",digest:"",fragment:0,id:t?.androidId?i.default.fromString(t.androidId):undefined,locale:"",loggingId:parseLong(0n),macAddr:[],macAddrType:[],marketCheckin:"",otaCert:[],securityToken:t?.securityToken?i.default.fromString(t?.securityToken,true):undefined,timeZone:e.timeZone||"Europe/Prague",userName:"",userSerialNumber:0,version:3};const s=r.verify(n);if(s)throw Error(s);const o=r.create(n);return r.encode(o).finish()}},55061:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.PushSender=t.PushReceiver=void 0;const i=n(r(81132));t.PushReceiver=i.default;const s=n(r(99057));t.PushSender=s.default;t["default"]=i.default},95406:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t["default"]=createKeys;const i=n(r(6113));const s=r(81153);function createKeys(){return new Promise(((e,t)=>{const r=i.default.createECDH("prime256v1");r.generateKeys();i.default.randomBytes(16,((n,i)=>{if(n){return t(n)}return e({privateKey:(0,s.escape)(r.getPrivateKey("base64")),publicKey:(0,s.escape)(r.getPublicKey("base64")),authSecret:(0,s.escape)(i.toString("base64"))})}))}))}},43985:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const i=n(r(92051));const s=n(r(32549));const o=n(r(15268));const a=r(28420);const c=n(r(59797));class Parser extends c.default{#t;#O=a.ProcessingState.MCS_VERSION_TAG_AND_SIZE;#E=Buffer.alloc(0);#A=0;#I=0;#k=false;#T=true;constructor(e){super();this.#t=e;this.#t.on("data",this.#x)}destroy(){this.#T=false;this.#t.removeListener("data",this.#x)}#R(e){this.destroy();this.emit("error",e)}#x=e=>{s.default.debug(`Got data: ${e.length}`);this.#E=Buffer.concat([this.#E,e]);if(this.#T){this.#T=false;this.#B()}};#B(){s.default.debug(`waitForData state: ${this.#O}`);let e=0;switch(this.#O){case a.ProcessingState.MCS_VERSION_TAG_AND_SIZE:e+=a.Variables.kVersionPacketLen;case a.ProcessingState.MCS_TAG_AND_SIZE:e+=a.Variables.kTagPacketLen;case a.ProcessingState.MCS_SIZE:e+=a.Variables.kSizePacketLenMin;break;case a.ProcessingState.MCS_PROTO_BYTES:e=this.#I;break;default:this.#R(new Error(`Unexpected state: ${this.#O}`));return}if(this.#E.length<e){s.default.debug(`Waiting for ${e-this.#E.length} more bytes. Got ${this.#E.length}`);this.#T=true;return}s.default.debug(`Processing MCS data: state == ${this.#O}`);switch(this.#O){case a.ProcessingState.MCS_VERSION_TAG_AND_SIZE:this.#N();this.#j();this.#L();break;case a.ProcessingState.MCS_TAG_AND_SIZE:this.#j();this.#L();break;case a.ProcessingState.MCS_SIZE:this.#L();break;case a.ProcessingState.MCS_PROTO_BYTES:this.#D();break;default:this.#R(new Error(`Unexpected state: ${this.#O}`));return}}#N(){const e=this.#E.readInt8(0);this.#E=this.#E.slice(1);s.default.debug(`VERSION IS ${e}`);if(e<a.Variables.kMCSVersion&&e!==38){this.#R(new Error(`Got wrong version: ${e}`));return}}#j(){this.#A=this.#E.readInt8(0);this.#E=this.#E.slice(1);s.default.debug(`RECEIVED PROTO OF TYPE ${this.#A}`)}#L(){let e=false;const t=new i.default.BufferReader(this.#E);try{this.#I=t.int32()}catch(t){if(t.message.startsWith("index out of range:")){e=true}else{this.#R(t);return}}if(e){this.#O=a.ProcessingState.MCS_SIZE;this.#B();return}this.#E=this.#E.slice(t.pos);s.default.debug(`Proto size: ${this.#I}`);if(this.#I>0){this.#O=a.ProcessingState.MCS_PROTO_BYTES;this.#B()}else{this.#D()}}#D(){const e=this.#M(this.#A);if(!e){this.#R(new Error("Unknown tag"));return}if(this.#I===0){this.emit("message",{tag:this.#A,object:{}});this.#U();return}if(this.#E.length<this.#I){s.default.debug(`Continuing data read. Buffer size is ${this.#E.length}, expecting ${this.#I}`);this.#O=a.ProcessingState.MCS_PROTO_BYTES;this.#B();return}const t=this.#E.slice(0,this.#I);const r=e.decode(t);this.#E=this.#E.slice(this.#I);const n=e.toObject(r,{longs:String,enums:String,bytes:Buffer});this.emit("message",{tag:this.#A,object:n});if(this.#A===a.MCSProtoTag.kLoginResponseTag){if(this.#k){s.default.error("Unexpected login response")}else{this.#k=true;s.default.debug("GCM Handshake complete.")}}this.#U()}#U(){this.#A=0;this.#I=0;this.#O=a.ProcessingState.MCS_TAG_AND_SIZE;this.#B()}#M(e){switch(e){case a.MCSProtoTag.kHeartbeatPingTag:return o.default.mcs_proto.HeartbeatPing;case a.MCSProtoTag.kHeartbeatAckTag:return o.default.mcs_proto.HeartbeatAck;case a.MCSProtoTag.kLoginRequestTag:return o.default.mcs_proto.LoginRequest;case a.MCSProtoTag.kLoginResponseTag:return o.default.mcs_proto.LoginResponse;case a.MCSProtoTag.kCloseTag:return o.default.mcs_proto.Close;case a.MCSProtoTag.kIqStanzaTag:return o.default.mcs_proto.IqStanza;case a.MCSProtoTag.kDataMessageStanzaTag:return o.default.mcs_proto.DataMessageStanza;case a.MCSProtoTag.kStreamErrorStanzaTag:return o.default.mcs_proto.StreamErrorStanza;default:return null}}}t["default"]=Parser},15268:(e,t,r)=>{"use strict";var n=r(42079);var i=n.Reader,s=n.Writer,o=n.util;var a=n.roots["default"]||(n.roots["default"]={});a.checkin_proto=function(){var e={};e.ChromeBuildProto=function(){function ChromeBuildProto(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}ChromeBuildProto.prototype.platform=1;ChromeBuildProto.prototype.chromeVersion="";ChromeBuildProto.prototype.channel=1;ChromeBuildProto.create=function create(e){return new ChromeBuildProto(e)};ChromeBuildProto.encode=function encode(e,t){if(!t)t=s.create();if(e.platform!=null&&Object.hasOwnProperty.call(e,"platform"))t.uint32(8).int32(e.platform);if(e.chromeVersion!=null&&Object.hasOwnProperty.call(e,"chromeVersion"))t.uint32(18).string(e.chromeVersion);if(e.channel!=null&&Object.hasOwnProperty.call(e,"channel"))t.uint32(24).int32(e.channel);return t};ChromeBuildProto.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};ChromeBuildProto.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.checkin_proto.ChromeBuildProto;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.platform=e.int32();break}case 2:{n.chromeVersion=e.string();break}case 3:{n.channel=e.int32();break}default:e.skipType(s&7);break}}return n};ChromeBuildProto.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};ChromeBuildProto.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.platform!=null&&e.hasOwnProperty("platform"))switch(e.platform){default:return"platform: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:break}if(e.chromeVersion!=null&&e.hasOwnProperty("chromeVersion"))if(!o.isString(e.chromeVersion))return"chromeVersion: string expected";if(e.channel!=null&&e.hasOwnProperty("channel"))switch(e.channel){default:return"channel: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return null};ChromeBuildProto.fromObject=function fromObject(e){if(e instanceof a.checkin_proto.ChromeBuildProto)return e;var t=new a.checkin_proto.ChromeBuildProto;switch(e.platform){default:if(typeof e.platform==="number"){t.platform=e.platform;break}break;case"PLATFORM_WIN":case 1:t.platform=1;break;case"PLATFORM_MAC":case 2:t.platform=2;break;case"PLATFORM_LINUX":case 3:t.platform=3;break;case"PLATFORM_CROS":case 4:t.platform=4;break;case"PLATFORM_IOS":case 5:t.platform=5;break;case"PLATFORM_ANDROID":case 6:t.platform=6;break}if(e.chromeVersion!=null)t.chromeVersion=String(e.chromeVersion);switch(e.channel){default:if(typeof e.channel==="number"){t.channel=e.channel;break}break;case"CHANNEL_STABLE":case 1:t.channel=1;break;case"CHANNEL_BETA":case 2:t.channel=2;break;case"CHANNEL_DEV":case 3:t.channel=3;break;case"CHANNEL_CANARY":case 4:t.channel=4;break;case"CHANNEL_UNKNOWN":case 5:t.channel=5;break}return t};ChromeBuildProto.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.platform=t.enums===String?"PLATFORM_WIN":1;r.chromeVersion="";r.channel=t.enums===String?"CHANNEL_STABLE":1}if(e.platform!=null&&e.hasOwnProperty("platform"))r.platform=t.enums===String?a.checkin_proto.ChromeBuildProto.Platform[e.platform]===undefined?e.platform:a.checkin_proto.ChromeBuildProto.Platform[e.platform]:e.platform;if(e.chromeVersion!=null&&e.hasOwnProperty("chromeVersion"))r.chromeVersion=e.chromeVersion;if(e.channel!=null&&e.hasOwnProperty("channel"))r.channel=t.enums===String?a.checkin_proto.ChromeBuildProto.Channel[e.channel]===undefined?e.channel:a.checkin_proto.ChromeBuildProto.Channel[e.channel]:e.channel;return r};ChromeBuildProto.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};ChromeBuildProto.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/checkin_proto.ChromeBuildProto"};ChromeBuildProto.Platform=function(){var e={},t=Object.create(e);t[e[1]="PLATFORM_WIN"]=1;t[e[2]="PLATFORM_MAC"]=2;t[e[3]="PLATFORM_LINUX"]=3;t[e[4]="PLATFORM_CROS"]=4;t[e[5]="PLATFORM_IOS"]=5;t[e[6]="PLATFORM_ANDROID"]=6;return t}();ChromeBuildProto.Channel=function(){var e={},t=Object.create(e);t[e[1]="CHANNEL_STABLE"]=1;t[e[2]="CHANNEL_BETA"]=2;t[e[3]="CHANNEL_DEV"]=3;t[e[4]="CHANNEL_CANARY"]=4;t[e[5]="CHANNEL_UNKNOWN"]=5;return t}();return ChromeBuildProto}();e.AndroidCheckinProto=function(){function AndroidCheckinProto(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}AndroidCheckinProto.prototype.lastCheckinMsec=o.Long?o.Long.fromBits(0,0,false):0;AndroidCheckinProto.prototype.cellOperator="";AndroidCheckinProto.prototype.simOperator="";AndroidCheckinProto.prototype.roaming="";AndroidCheckinProto.prototype.userNumber=0;AndroidCheckinProto.prototype.type=1;AndroidCheckinProto.prototype.chromeBuild=null;AndroidCheckinProto.create=function create(e){return new AndroidCheckinProto(e)};AndroidCheckinProto.encode=function encode(e,t){if(!t)t=s.create();if(e.lastCheckinMsec!=null&&Object.hasOwnProperty.call(e,"lastCheckinMsec"))t.uint32(16).int64(e.lastCheckinMsec);if(e.cellOperator!=null&&Object.hasOwnProperty.call(e,"cellOperator"))t.uint32(50).string(e.cellOperator);if(e.simOperator!=null&&Object.hasOwnProperty.call(e,"simOperator"))t.uint32(58).string(e.simOperator);if(e.roaming!=null&&Object.hasOwnProperty.call(e,"roaming"))t.uint32(66).string(e.roaming);if(e.userNumber!=null&&Object.hasOwnProperty.call(e,"userNumber"))t.uint32(72).int32(e.userNumber);if(e.type!=null&&Object.hasOwnProperty.call(e,"type"))t.uint32(96).int32(e.type);if(e.chromeBuild!=null&&Object.hasOwnProperty.call(e,"chromeBuild"))a.checkin_proto.ChromeBuildProto.encode(e.chromeBuild,t.uint32(106).fork()).ldelim();return t};AndroidCheckinProto.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};AndroidCheckinProto.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.checkin_proto.AndroidCheckinProto;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 2:{n.lastCheckinMsec=e.int64();break}case 6:{n.cellOperator=e.string();break}case 7:{n.simOperator=e.string();break}case 8:{n.roaming=e.string();break}case 9:{n.userNumber=e.int32();break}case 12:{n.type=e.int32();break}case 13:{n.chromeBuild=a.checkin_proto.ChromeBuildProto.decode(e,e.uint32());break}default:e.skipType(s&7);break}}return n};AndroidCheckinProto.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};AndroidCheckinProto.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.lastCheckinMsec!=null&&e.hasOwnProperty("lastCheckinMsec"))if(!o.isInteger(e.lastCheckinMsec)&&!(e.lastCheckinMsec&&o.isInteger(e.lastCheckinMsec.low)&&o.isInteger(e.lastCheckinMsec.high)))return"lastCheckinMsec: integer|Long expected";if(e.cellOperator!=null&&e.hasOwnProperty("cellOperator"))if(!o.isString(e.cellOperator))return"cellOperator: string expected";if(e.simOperator!=null&&e.hasOwnProperty("simOperator"))if(!o.isString(e.simOperator))return"simOperator: string expected";if(e.roaming!=null&&e.hasOwnProperty("roaming"))if(!o.isString(e.roaming))return"roaming: string expected";if(e.userNumber!=null&&e.hasOwnProperty("userNumber"))if(!o.isInteger(e.userNumber))return"userNumber: integer expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:break}if(e.chromeBuild!=null&&e.hasOwnProperty("chromeBuild")){var t=a.checkin_proto.ChromeBuildProto.verify(e.chromeBuild);if(t)return"chromeBuild."+t}return null};AndroidCheckinProto.fromObject=function fromObject(e){if(e instanceof a.checkin_proto.AndroidCheckinProto)return e;var t=new a.checkin_proto.AndroidCheckinProto;if(e.lastCheckinMsec!=null)if(o.Long)(t.lastCheckinMsec=o.Long.fromValue(e.lastCheckinMsec)).unsigned=false;else if(typeof e.lastCheckinMsec==="string")t.lastCheckinMsec=parseInt(e.lastCheckinMsec,10);else if(typeof e.lastCheckinMsec==="number")t.lastCheckinMsec=e.lastCheckinMsec;else if(typeof e.lastCheckinMsec==="object")t.lastCheckinMsec=new o.LongBits(e.lastCheckinMsec.low>>>0,e.lastCheckinMsec.high>>>0).toNumber();if(e.cellOperator!=null)t.cellOperator=String(e.cellOperator);if(e.simOperator!=null)t.simOperator=String(e.simOperator);if(e.roaming!=null)t.roaming=String(e.roaming);if(e.userNumber!=null)t.userNumber=e.userNumber|0;switch(e.type){default:if(typeof e.type==="number"){t.type=e.type;break}break;case"DEVICE_ANDROID_OS":case 1:t.type=1;break;case"DEVICE_IOS_OS":case 2:t.type=2;break;case"DEVICE_CHROME_BROWSER":case 3:t.type=3;break;case"DEVICE_CHROME_OS":case 4:t.type=4;break}if(e.chromeBuild!=null){if(typeof e.chromeBuild!=="object")throw TypeError(".checkin_proto.AndroidCheckinProto.chromeBuild: object expected");t.chromeBuild=a.checkin_proto.ChromeBuildProto.fromObject(e.chromeBuild)}return t};AndroidCheckinProto.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){if(o.Long){var n=new o.Long(0,0,false);r.lastCheckinMsec=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.lastCheckinMsec=t.longs===String?"0":0;r.cellOperator="";r.simOperator="";r.roaming="";r.userNumber=0;r.type=t.enums===String?"DEVICE_ANDROID_OS":1;r.chromeBuild=null}if(e.lastCheckinMsec!=null&&e.hasOwnProperty("lastCheckinMsec"))if(typeof e.lastCheckinMsec==="number")r.lastCheckinMsec=t.longs===String?String(e.lastCheckinMsec):e.lastCheckinMsec;else r.lastCheckinMsec=t.longs===String?o.Long.prototype.toString.call(e.lastCheckinMsec):t.longs===Number?new o.LongBits(e.lastCheckinMsec.low>>>0,e.lastCheckinMsec.high>>>0).toNumber():e.lastCheckinMsec;if(e.cellOperator!=null&&e.hasOwnProperty("cellOperator"))r.cellOperator=e.cellOperator;if(e.simOperator!=null&&e.hasOwnProperty("simOperator"))r.simOperator=e.simOperator;if(e.roaming!=null&&e.hasOwnProperty("roaming"))r.roaming=e.roaming;if(e.userNumber!=null&&e.hasOwnProperty("userNumber"))r.userNumber=e.userNumber;if(e.type!=null&&e.hasOwnProperty("type"))r.type=t.enums===String?a.checkin_proto.DeviceType[e.type]===undefined?e.type:a.checkin_proto.DeviceType[e.type]:e.type;if(e.chromeBuild!=null&&e.hasOwnProperty("chromeBuild"))r.chromeBuild=a.checkin_proto.ChromeBuildProto.toObject(e.chromeBuild,t);return r};AndroidCheckinProto.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};AndroidCheckinProto.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/checkin_proto.AndroidCheckinProto"};return AndroidCheckinProto}();e.DeviceType=function(){var e={},t=Object.create(e);t[e[1]="DEVICE_ANDROID_OS"]=1;t[e[2]="DEVICE_IOS_OS"]=2;t[e[3]="DEVICE_CHROME_BROWSER"]=3;t[e[4]="DEVICE_CHROME_OS"]=4;return t}();e.GservicesSetting=function(){function GservicesSetting(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}GservicesSetting.prototype.name=o.newBuffer([]);GservicesSetting.prototype.value=o.newBuffer([]);GservicesSetting.create=function create(e){return new GservicesSetting(e)};GservicesSetting.encode=function encode(e,t){if(!t)t=s.create();t.uint32(10).bytes(e.name);t.uint32(18).bytes(e.value);return t};GservicesSetting.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};GservicesSetting.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.checkin_proto.GservicesSetting;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.name=e.bytes();break}case 2:{n.value=e.bytes();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("name"))throw o.ProtocolError("missing required 'name'",{instance:n});if(!n.hasOwnProperty("value"))throw o.ProtocolError("missing required 'value'",{instance:n});return n};GservicesSetting.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};GservicesSetting.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(!(e.name&&typeof e.name.length==="number"||o.isString(e.name)))return"name: buffer expected";if(!(e.value&&typeof e.value.length==="number"||o.isString(e.value)))return"value: buffer expected";return null};GservicesSetting.fromObject=function fromObject(e){if(e instanceof a.checkin_proto.GservicesSetting)return e;var t=new a.checkin_proto.GservicesSetting;if(e.name!=null)if(typeof e.name==="string")o.base64.decode(e.name,t.name=o.newBuffer(o.base64.length(e.name)),0);else if(e.name.length>=0)t.name=e.name;if(e.value!=null)if(typeof e.value==="string")o.base64.decode(e.value,t.value=o.newBuffer(o.base64.length(e.value)),0);else if(e.value.length>=0)t.value=e.value;return t};GservicesSetting.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){if(t.bytes===String)r.name="";else{r.name=[];if(t.bytes!==Array)r.name=o.newBuffer(r.name)}if(t.bytes===String)r.value="";else{r.value=[];if(t.bytes!==Array)r.value=o.newBuffer(r.value)}}if(e.name!=null&&e.hasOwnProperty("name"))r.name=t.bytes===String?o.base64.encode(e.name,0,e.name.length):t.bytes===Array?Array.prototype.slice.call(e.name):e.name;if(e.value!=null&&e.hasOwnProperty("value"))r.value=t.bytes===String?o.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value;return r};GservicesSetting.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};GservicesSetting.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/checkin_proto.GservicesSetting"};return GservicesSetting}();e.AndroidCheckinRequest=function(){function AndroidCheckinRequest(e){this.macAddr=[];this.macAddrType=[];this.accountCookie=[];this.otaCert=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}AndroidCheckinRequest.prototype.imei="";AndroidCheckinRequest.prototype.meid="";AndroidCheckinRequest.prototype.macAddr=o.emptyArray;AndroidCheckinRequest.prototype.macAddrType=o.emptyArray;AndroidCheckinRequest.prototype.serialNumber="";AndroidCheckinRequest.prototype.esn="";AndroidCheckinRequest.prototype.id=o.Long?o.Long.fromBits(0,0,false):0;AndroidCheckinRequest.prototype.loggingId=o.Long?o.Long.fromBits(0,0,false):0;AndroidCheckinRequest.prototype.digest="";AndroidCheckinRequest.prototype.locale="";AndroidCheckinRequest.prototype.checkin=null;AndroidCheckinRequest.prototype.desiredBuild="";AndroidCheckinRequest.prototype.marketCheckin="";AndroidCheckinRequest.prototype.accountCookie=o.emptyArray;AndroidCheckinRequest.prototype.timeZone="";AndroidCheckinRequest.prototype.securityToken=o.Long?o.Long.fromBits(0,0,false):0;AndroidCheckinRequest.prototype.version=0;AndroidCheckinRequest.prototype.otaCert=o.emptyArray;AndroidCheckinRequest.prototype.fragment=0;AndroidCheckinRequest.prototype.userName="";AndroidCheckinRequest.prototype.userSerialNumber=0;AndroidCheckinRequest.create=function create(e){return new AndroidCheckinRequest(e)};AndroidCheckinRequest.encode=function encode(e,t){if(!t)t=s.create();if(e.imei!=null&&Object.hasOwnProperty.call(e,"imei"))t.uint32(10).string(e.imei);if(e.id!=null&&Object.hasOwnProperty.call(e,"id"))t.uint32(16).int64(e.id);if(e.digest!=null&&Object.hasOwnProperty.call(e,"digest"))t.uint32(26).string(e.digest);a.checkin_proto.AndroidCheckinProto.encode(e.checkin,t.uint32(34).fork()).ldelim();if(e.desiredBuild!=null&&Object.hasOwnProperty.call(e,"desiredBuild"))t.uint32(42).string(e.desiredBuild);if(e.locale!=null&&Object.hasOwnProperty.call(e,"locale"))t.uint32(50).string(e.locale);if(e.loggingId!=null&&Object.hasOwnProperty.call(e,"loggingId"))t.uint32(56).int64(e.loggingId);if(e.marketCheckin!=null&&Object.hasOwnProperty.call(e,"marketCheckin"))t.uint32(66).string(e.marketCheckin);if(e.macAddr!=null&&e.macAddr.length)for(var r=0;r<e.macAddr.length;++r)t.uint32(74).string(e.macAddr[r]);if(e.meid!=null&&Object.hasOwnProperty.call(e,"meid"))t.uint32(82).string(e.meid);if(e.accountCookie!=null&&e.accountCookie.length)for(var r=0;r<e.accountCookie.length;++r)t.uint32(90).string(e.accountCookie[r]);if(e.timeZone!=null&&Object.hasOwnProperty.call(e,"timeZone"))t.uint32(98).string(e.timeZone);if(e.securityToken!=null&&Object.hasOwnProperty.call(e,"securityToken"))t.uint32(105).fixed64(e.securityToken);if(e.version!=null&&Object.hasOwnProperty.call(e,"version"))t.uint32(112).int32(e.version);if(e.otaCert!=null&&e.otaCert.length)for(var r=0;r<e.otaCert.length;++r)t.uint32(122).string(e.otaCert[r]);if(e.serialNumber!=null&&Object.hasOwnProperty.call(e,"serialNumber"))t.uint32(130).string(e.serialNumber);if(e.esn!=null&&Object.hasOwnProperty.call(e,"esn"))t.uint32(138).string(e.esn);if(e.macAddrType!=null&&e.macAddrType.length)for(var r=0;r<e.macAddrType.length;++r)t.uint32(154).string(e.macAddrType[r]);if(e.fragment!=null&&Object.hasOwnProperty.call(e,"fragment"))t.uint32(160).int32(e.fragment);if(e.userName!=null&&Object.hasOwnProperty.call(e,"userName"))t.uint32(170).string(e.userName);if(e.userSerialNumber!=null&&Object.hasOwnProperty.call(e,"userSerialNumber"))t.uint32(176).int32(e.userSerialNumber);return t};AndroidCheckinRequest.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};AndroidCheckinRequest.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.checkin_proto.AndroidCheckinRequest;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.imei=e.string();break}case 10:{n.meid=e.string();break}case 9:{if(!(n.macAddr&&n.macAddr.length))n.macAddr=[];n.macAddr.push(e.string());break}case 19:{if(!(n.macAddrType&&n.macAddrType.length))n.macAddrType=[];n.macAddrType.push(e.string());break}case 16:{n.serialNumber=e.string();break}case 17:{n.esn=e.string();break}case 2:{n.id=e.int64();break}case 7:{n.loggingId=e.int64();break}case 3:{n.digest=e.string();break}case 6:{n.locale=e.string();break}case 4:{n.checkin=a.checkin_proto.AndroidCheckinProto.decode(e,e.uint32());break}case 5:{n.desiredBuild=e.string();break}case 8:{n.marketCheckin=e.string();break}case 11:{if(!(n.accountCookie&&n.accountCookie.length))n.accountCookie=[];n.accountCookie.push(e.string());break}case 12:{n.timeZone=e.string();break}case 13:{n.securityToken=e.fixed64();break}case 14:{n.version=e.int32();break}case 15:{if(!(n.otaCert&&n.otaCert.length))n.otaCert=[];n.otaCert.push(e.string());break}case 20:{n.fragment=e.int32();break}case 21:{n.userName=e.string();break}case 22:{n.userSerialNumber=e.int32();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("checkin"))throw o.ProtocolError("missing required 'checkin'",{instance:n});return n};AndroidCheckinRequest.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};AndroidCheckinRequest.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.imei!=null&&e.hasOwnProperty("imei"))if(!o.isString(e.imei))return"imei: string expected";if(e.meid!=null&&e.hasOwnProperty("meid"))if(!o.isString(e.meid))return"meid: string expected";if(e.macAddr!=null&&e.hasOwnProperty("macAddr")){if(!Array.isArray(e.macAddr))return"macAddr: array expected";for(var t=0;t<e.macAddr.length;++t)if(!o.isString(e.macAddr[t]))return"macAddr: string[] expected"}if(e.macAddrType!=null&&e.hasOwnProperty("macAddrType")){if(!Array.isArray(e.macAddrType))return"macAddrType: array expected";for(var t=0;t<e.macAddrType.length;++t)if(!o.isString(e.macAddrType[t]))return"macAddrType: string[] expected"}if(e.serialNumber!=null&&e.hasOwnProperty("serialNumber"))if(!o.isString(e.serialNumber))return"serialNumber: string expected";if(e.esn!=null&&e.hasOwnProperty("esn"))if(!o.isString(e.esn))return"esn: string expected";if(e.id!=null&&e.hasOwnProperty("id"))if(!o.isInteger(e.id)&&!(e.id&&o.isInteger(e.id.low)&&o.isInteger(e.id.high)))return"id: integer|Long expected";if(e.loggingId!=null&&e.hasOwnProperty("loggingId"))if(!o.isInteger(e.loggingId)&&!(e.loggingId&&o.isInteger(e.loggingId.low)&&o.isInteger(e.loggingId.high)))return"loggingId: integer|Long expected";if(e.digest!=null&&e.hasOwnProperty("digest"))if(!o.isString(e.digest))return"digest: string expected";if(e.locale!=null&&e.hasOwnProperty("locale"))if(!o.isString(e.locale))return"locale: string expected";{var r=a.checkin_proto.AndroidCheckinProto.verify(e.checkin);if(r)return"checkin."+r}if(e.desiredBuild!=null&&e.hasOwnProperty("desiredBuild"))if(!o.isString(e.desiredBuild))return"desiredBuild: string expected";if(e.marketCheckin!=null&&e.hasOwnProperty("marketCheckin"))if(!o.isString(e.marketCheckin))return"marketCheckin: string expected";if(e.accountCookie!=null&&e.hasOwnProperty("accountCookie")){if(!Array.isArray(e.accountCookie))return"accountCookie: array expected";for(var t=0;t<e.accountCookie.length;++t)if(!o.isString(e.accountCookie[t]))return"accountCookie: string[] expected"}if(e.timeZone!=null&&e.hasOwnProperty("timeZone"))if(!o.isString(e.timeZone))return"timeZone: string expected";if(e.securityToken!=null&&e.hasOwnProperty("securityToken"))if(!o.isInteger(e.securityToken)&&!(e.securityToken&&o.isInteger(e.securityToken.low)&&o.isInteger(e.securityToken.high)))return"securityToken: integer|Long expected";if(e.version!=null&&e.hasOwnProperty("version"))if(!o.isInteger(e.version))return"version: integer expected";if(e.otaCert!=null&&e.hasOwnProperty("otaCert")){if(!Array.isArray(e.otaCert))return"otaCert: array expected";for(var t=0;t<e.otaCert.length;++t)if(!o.isString(e.otaCert[t]))return"otaCert: string[] expected"}if(e.fragment!=null&&e.hasOwnProperty("fragment"))if(!o.isInteger(e.fragment))return"fragment: integer expected";if(e.userName!=null&&e.hasOwnProperty("userName"))if(!o.isString(e.userName))return"userName: string expected";if(e.userSerialNumber!=null&&e.hasOwnProperty("userSerialNumber"))if(!o.isInteger(e.userSerialNumber))return"userSerialNumber: integer expected";return null};AndroidCheckinRequest.fromObject=function fromObject(e){if(e instanceof a.checkin_proto.AndroidCheckinRequest)return e;var t=new a.checkin_proto.AndroidCheckinRequest;if(e.imei!=null)t.imei=String(e.imei);if(e.meid!=null)t.meid=String(e.meid);if(e.macAddr){if(!Array.isArray(e.macAddr))throw TypeError(".checkin_proto.AndroidCheckinRequest.macAddr: array expected");t.macAddr=[];for(var r=0;r<e.macAddr.length;++r)t.macAddr[r]=String(e.macAddr[r])}if(e.macAddrType){if(!Array.isArray(e.macAddrType))throw TypeError(".checkin_proto.AndroidCheckinRequest.macAddrType: array expected");t.macAddrType=[];for(var r=0;r<e.macAddrType.length;++r)t.macAddrType[r]=String(e.macAddrType[r])}if(e.serialNumber!=null)t.serialNumber=String(e.serialNumber);if(e.esn!=null)t.esn=String(e.esn);if(e.id!=null)if(o.Long)(t.id=o.Long.fromValue(e.id)).unsigned=false;else if(typeof e.id==="string")t.id=parseInt(e.id,10);else if(typeof e.id==="number")t.id=e.id;else if(typeof e.id==="object")t.id=new o.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber();if(e.loggingId!=null)if(o.Long)(t.loggingId=o.Long.fromValue(e.loggingId)).unsigned=false;else if(typeof e.loggingId==="string")t.loggingId=parseInt(e.loggingId,10);else if(typeof e.loggingId==="number")t.loggingId=e.loggingId;else if(typeof e.loggingId==="object")t.loggingId=new o.LongBits(e.loggingId.low>>>0,e.loggingId.high>>>0).toNumber();if(e.digest!=null)t.digest=String(e.digest);if(e.locale!=null)t.locale=String(e.locale);if(e.checkin!=null){if(typeof e.checkin!=="object")throw TypeError(".checkin_proto.AndroidCheckinRequest.checkin: object expected");t.checkin=a.checkin_proto.AndroidCheckinProto.fromObject(e.checkin)}if(e.desiredBuild!=null)t.desiredBuild=String(e.desiredBuild);if(e.marketCheckin!=null)t.marketCheckin=String(e.marketCheckin);if(e.accountCookie){if(!Array.isArray(e.accountCookie))throw TypeError(".checkin_proto.AndroidCheckinRequest.accountCookie: array expected");t.accountCookie=[];for(var r=0;r<e.accountCookie.length;++r)t.accountCookie[r]=String(e.accountCookie[r])}if(e.timeZone!=null)t.timeZone=String(e.timeZone);if(e.securityToken!=null)if(o.Long)(t.securityToken=o.Long.fromValue(e.securityToken)).unsigned=false;else if(typeof e.securityToken==="string")t.securityToken=parseInt(e.securityToken,10);else if(typeof e.securityToken==="number")t.securityToken=e.securityToken;else if(typeof e.securityToken==="object")t.securityToken=new o.LongBits(e.securityToken.low>>>0,e.securityToken.high>>>0).toNumber();if(e.version!=null)t.version=e.version|0;if(e.otaCert){if(!Array.isArray(e.otaCert))throw TypeError(".checkin_proto.AndroidCheckinRequest.otaCert: array expected");t.otaCert=[];for(var r=0;r<e.otaCert.length;++r)t.otaCert[r]=String(e.otaCert[r])}if(e.fragment!=null)t.fragment=e.fragment|0;if(e.userName!=null)t.userName=String(e.userName);if(e.userSerialNumber!=null)t.userSerialNumber=e.userSerialNumber|0;return t};AndroidCheckinRequest.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.arrays||t.defaults){r.macAddr=[];r.accountCookie=[];r.otaCert=[];r.macAddrType=[]}if(t.defaults){r.imei="";if(o.Long){var n=new o.Long(0,0,false);r.id=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.id=t.longs===String?"0":0;r.digest="";r.checkin=null;r.desiredBuild="";r.locale="";if(o.Long){var n=new o.Long(0,0,false);r.loggingId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.loggingId=t.longs===String?"0":0;r.marketCheckin="";r.meid="";r.timeZone="";if(o.Long){var n=new o.Long(0,0,false);r.securityToken=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.securityToken=t.longs===String?"0":0;r.version=0;r.serialNumber="";r.esn="";r.fragment=0;r.userName="";r.userSerialNumber=0}if(e.imei!=null&&e.hasOwnProperty("imei"))r.imei=e.imei;if(e.id!=null&&e.hasOwnProperty("id"))if(typeof e.id==="number")r.id=t.longs===String?String(e.id):e.id;else r.id=t.longs===String?o.Long.prototype.toString.call(e.id):t.longs===Number?new o.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber():e.id;if(e.digest!=null&&e.hasOwnProperty("digest"))r.digest=e.digest;if(e.checkin!=null&&e.hasOwnProperty("checkin"))r.checkin=a.checkin_proto.AndroidCheckinProto.toObject(e.checkin,t);if(e.desiredBuild!=null&&e.hasOwnProperty("desiredBuild"))r.desiredBuild=e.desiredBuild;if(e.locale!=null&&e.hasOwnProperty("locale"))r.locale=e.locale;if(e.loggingId!=null&&e.hasOwnProperty("loggingId"))if(typeof e.loggingId==="number")r.loggingId=t.longs===String?String(e.loggingId):e.loggingId;else r.loggingId=t.longs===String?o.Long.prototype.toString.call(e.loggingId):t.longs===Number?new o.LongBits(e.loggingId.low>>>0,e.loggingId.high>>>0).toNumber():e.loggingId;if(e.marketCheckin!=null&&e.hasOwnProperty("marketCheckin"))r.marketCheckin=e.marketCheckin;if(e.macAddr&&e.macAddr.length){r.macAddr=[];for(var i=0;i<e.macAddr.length;++i)r.macAddr[i]=e.macAddr[i]}if(e.meid!=null&&e.hasOwnProperty("meid"))r.meid=e.meid;if(e.accountCookie&&e.accountCookie.length){r.accountCookie=[];for(var i=0;i<e.accountCookie.length;++i)r.accountCookie[i]=e.accountCookie[i]}if(e.timeZone!=null&&e.hasOwnProperty("timeZone"))r.timeZone=e.timeZone;if(e.securityToken!=null&&e.hasOwnProperty("securityToken"))if(typeof e.securityToken==="number")r.securityToken=t.longs===String?String(e.securityToken):e.securityToken;else r.securityToken=t.longs===String?o.Long.prototype.toString.call(e.securityToken):t.longs===Number?new o.LongBits(e.securityToken.low>>>0,e.securityToken.high>>>0).toNumber():e.securityToken;if(e.version!=null&&e.hasOwnProperty("version"))r.version=e.version;if(e.otaCert&&e.otaCert.length){r.otaCert=[];for(var i=0;i<e.otaCert.length;++i)r.otaCert[i]=e.otaCert[i]}if(e.serialNumber!=null&&e.hasOwnProperty("serialNumber"))r.serialNumber=e.serialNumber;if(e.esn!=null&&e.hasOwnProperty("esn"))r.esn=e.esn;if(e.macAddrType&&e.macAddrType.length){r.macAddrType=[];for(var i=0;i<e.macAddrType.length;++i)r.macAddrType[i]=e.macAddrType[i]}if(e.fragment!=null&&e.hasOwnProperty("fragment"))r.fragment=e.fragment;if(e.userName!=null&&e.hasOwnProperty("userName"))r.userName=e.userName;if(e.userSerialNumber!=null&&e.hasOwnProperty("userSerialNumber"))r.userSerialNumber=e.userSerialNumber;return r};AndroidCheckinRequest.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};AndroidCheckinRequest.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/checkin_proto.AndroidCheckinRequest"};return AndroidCheckinRequest}();e.AndroidCheckinResponse=function(){function AndroidCheckinResponse(e){this.deleteSetting=[];this.setting=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}AndroidCheckinResponse.prototype.statsOk=false;AndroidCheckinResponse.prototype.timeMsec=o.Long?o.Long.fromBits(0,0,false):0;AndroidCheckinResponse.prototype.digest="";AndroidCheckinResponse.prototype.settingsDiff=false;AndroidCheckinResponse.prototype.deleteSetting=o.emptyArray;AndroidCheckinResponse.prototype.setting=o.emptyArray;AndroidCheckinResponse.prototype.marketOk=false;AndroidCheckinResponse.prototype.androidId=o.Long?o.Long.fromBits(0,0,false):0;AndroidCheckinResponse.prototype.securityToken=o.Long?o.Long.fromBits(0,0,false):0;AndroidCheckinResponse.prototype.versionInfo="";AndroidCheckinResponse.create=function create(e){return new AndroidCheckinResponse(e)};AndroidCheckinResponse.encode=function encode(e,t){if(!t)t=s.create();t.uint32(8).bool(e.statsOk);if(e.timeMsec!=null&&Object.hasOwnProperty.call(e,"timeMsec"))t.uint32(24).int64(e.timeMsec);if(e.digest!=null&&Object.hasOwnProperty.call(e,"digest"))t.uint32(34).string(e.digest);if(e.setting!=null&&e.setting.length)for(var r=0;r<e.setting.length;++r)a.checkin_proto.GservicesSetting.encode(e.setting[r],t.uint32(42).fork()).ldelim();if(e.marketOk!=null&&Object.hasOwnProperty.call(e,"marketOk"))t.uint32(48).bool(e.marketOk);if(e.androidId!=null&&Object.hasOwnProperty.call(e,"androidId"))t.uint32(57).fixed64(e.androidId);if(e.securityToken!=null&&Object.hasOwnProperty.call(e,"securityToken"))t.uint32(65).fixed64(e.securityToken);if(e.settingsDiff!=null&&Object.hasOwnProperty.call(e,"settingsDiff"))t.uint32(72).bool(e.settingsDiff);if(e.deleteSetting!=null&&e.deleteSetting.length)for(var r=0;r<e.deleteSetting.length;++r)t.uint32(82).string(e.deleteSetting[r]);if(e.versionInfo!=null&&Object.hasOwnProperty.call(e,"versionInfo"))t.uint32(90).string(e.versionInfo);return t};AndroidCheckinResponse.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};AndroidCheckinResponse.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.checkin_proto.AndroidCheckinResponse;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.statsOk=e.bool();break}case 3:{n.timeMsec=e.int64();break}case 4:{n.digest=e.string();break}case 9:{n.settingsDiff=e.bool();break}case 10:{if(!(n.deleteSetting&&n.deleteSetting.length))n.deleteSetting=[];n.deleteSetting.push(e.string());break}case 5:{if(!(n.setting&&n.setting.length))n.setting=[];n.setting.push(a.checkin_proto.GservicesSetting.decode(e,e.uint32()));break}case 6:{n.marketOk=e.bool();break}case 7:{n.androidId=e.fixed64();break}case 8:{n.securityToken=e.fixed64();break}case 11:{n.versionInfo=e.string();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("statsOk"))throw o.ProtocolError("missing required 'statsOk'",{instance:n});return n};AndroidCheckinResponse.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};AndroidCheckinResponse.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(typeof e.statsOk!=="boolean")return"statsOk: boolean expected";if(e.timeMsec!=null&&e.hasOwnProperty("timeMsec"))if(!o.isInteger(e.timeMsec)&&!(e.timeMsec&&o.isInteger(e.timeMsec.low)&&o.isInteger(e.timeMsec.high)))return"timeMsec: integer|Long expected";if(e.digest!=null&&e.hasOwnProperty("digest"))if(!o.isString(e.digest))return"digest: string expected";if(e.settingsDiff!=null&&e.hasOwnProperty("settingsDiff"))if(typeof e.settingsDiff!=="boolean")return"settingsDiff: boolean expected";if(e.deleteSetting!=null&&e.hasOwnProperty("deleteSetting")){if(!Array.isArray(e.deleteSetting))return"deleteSetting: array expected";for(var t=0;t<e.deleteSetting.length;++t)if(!o.isString(e.deleteSetting[t]))return"deleteSetting: string[] expected"}if(e.setting!=null&&e.hasOwnProperty("setting")){if(!Array.isArray(e.setting))return"setting: array expected";for(var t=0;t<e.setting.length;++t){var r=a.checkin_proto.GservicesSetting.verify(e.setting[t]);if(r)return"setting."+r}}if(e.marketOk!=null&&e.hasOwnProperty("marketOk"))if(typeof e.marketOk!=="boolean")return"marketOk: boolean expected";if(e.androidId!=null&&e.hasOwnProperty("androidId"))if(!o.isInteger(e.androidId)&&!(e.androidId&&o.isInteger(e.androidId.low)&&o.isInteger(e.androidId.high)))return"androidId: integer|Long expected";if(e.securityToken!=null&&e.hasOwnProperty("securityToken"))if(!o.isInteger(e.securityToken)&&!(e.securityToken&&o.isInteger(e.securityToken.low)&&o.isInteger(e.securityToken.high)))return"securityToken: integer|Long expected";if(e.versionInfo!=null&&e.hasOwnProperty("versionInfo"))if(!o.isString(e.versionInfo))return"versionInfo: string expected";return null};AndroidCheckinResponse.fromObject=function fromObject(e){if(e instanceof a.checkin_proto.AndroidCheckinResponse)return e;var t=new a.checkin_proto.AndroidCheckinResponse;if(e.statsOk!=null)t.statsOk=Boolean(e.statsOk);if(e.timeMsec!=null)if(o.Long)(t.timeMsec=o.Long.fromValue(e.timeMsec)).unsigned=false;else if(typeof e.timeMsec==="string")t.timeMsec=parseInt(e.timeMsec,10);else if(typeof e.timeMsec==="number")t.timeMsec=e.timeMsec;else if(typeof e.timeMsec==="object")t.timeMsec=new o.LongBits(e.timeMsec.low>>>0,e.timeMsec.high>>>0).toNumber();if(e.digest!=null)t.digest=String(e.digest);if(e.settingsDiff!=null)t.settingsDiff=Boolean(e.settingsDiff);if(e.deleteSetting){if(!Array.isArray(e.deleteSetting))throw TypeError(".checkin_proto.AndroidCheckinResponse.deleteSetting: array expected");t.deleteSetting=[];for(var r=0;r<e.deleteSetting.length;++r)t.deleteSetting[r]=String(e.deleteSetting[r])}if(e.setting){if(!Array.isArray(e.setting))throw TypeError(".checkin_proto.AndroidCheckinResponse.setting: array expected");t.setting=[];for(var r=0;r<e.setting.length;++r){if(typeof e.setting[r]!=="object")throw TypeError(".checkin_proto.AndroidCheckinResponse.setting: object expected");t.setting[r]=a.checkin_proto.GservicesSetting.fromObject(e.setting[r])}}if(e.marketOk!=null)t.marketOk=Boolean(e.marketOk);if(e.androidId!=null)if(o.Long)(t.androidId=o.Long.fromValue(e.androidId)).unsigned=false;else if(typeof e.androidId==="string")t.androidId=parseInt(e.androidId,10);else if(typeof e.androidId==="number")t.androidId=e.androidId;else if(typeof e.androidId==="object")t.androidId=new o.LongBits(e.androidId.low>>>0,e.androidId.high>>>0).toNumber();if(e.securityToken!=null)if(o.Long)(t.securityToken=o.Long.fromValue(e.securityToken)).unsigned=false;else if(typeof e.securityToken==="string")t.securityToken=parseInt(e.securityToken,10);else if(typeof e.securityToken==="number")t.securityToken=e.securityToken;else if(typeof e.securityToken==="object")t.securityToken=new o.LongBits(e.securityToken.low>>>0,e.securityToken.high>>>0).toNumber();if(e.versionInfo!=null)t.versionInfo=String(e.versionInfo);return t};AndroidCheckinResponse.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.arrays||t.defaults){r.setting=[];r.deleteSetting=[]}if(t.defaults){r.statsOk=false;if(o.Long){var n=new o.Long(0,0,false);r.timeMsec=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeMsec=t.longs===String?"0":0;r.digest="";r.marketOk=false;if(o.Long){var n=new o.Long(0,0,false);r.androidId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.androidId=t.longs===String?"0":0;if(o.Long){var n=new o.Long(0,0,false);r.securityToken=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.securityToken=t.longs===String?"0":0;r.settingsDiff=false;r.versionInfo=""}if(e.statsOk!=null&&e.hasOwnProperty("statsOk"))r.statsOk=e.statsOk;if(e.timeMsec!=null&&e.hasOwnProperty("timeMsec"))if(typeof e.timeMsec==="number")r.timeMsec=t.longs===String?String(e.timeMsec):e.timeMsec;else r.timeMsec=t.longs===String?o.Long.prototype.toString.call(e.timeMsec):t.longs===Number?new o.LongBits(e.timeMsec.low>>>0,e.timeMsec.high>>>0).toNumber():e.timeMsec;if(e.digest!=null&&e.hasOwnProperty("digest"))r.digest=e.digest;if(e.setting&&e.setting.length){r.setting=[];for(var i=0;i<e.setting.length;++i)r.setting[i]=a.checkin_proto.GservicesSetting.toObject(e.setting[i],t)}if(e.marketOk!=null&&e.hasOwnProperty("marketOk"))r.marketOk=e.marketOk;if(e.androidId!=null&&e.hasOwnProperty("androidId"))if(typeof e.androidId==="number")r.androidId=t.longs===String?String(e.androidId):e.androidId;else r.androidId=t.longs===String?o.Long.prototype.toString.call(e.androidId):t.longs===Number?new o.LongBits(e.androidId.low>>>0,e.androidId.high>>>0).toNumber():e.androidId;if(e.securityToken!=null&&e.hasOwnProperty("securityToken"))if(typeof e.securityToken==="number")r.securityToken=t.longs===String?String(e.securityToken):e.securityToken;else r.securityToken=t.longs===String?o.Long.prototype.toString.call(e.securityToken):t.longs===Number?new o.LongBits(e.securityToken.low>>>0,e.securityToken.high>>>0).toNumber():e.securityToken;if(e.settingsDiff!=null&&e.hasOwnProperty("settingsDiff"))r.settingsDiff=e.settingsDiff;if(e.deleteSetting&&e.deleteSetting.length){r.deleteSetting=[];for(var i=0;i<e.deleteSetting.length;++i)r.deleteSetting[i]=e.deleteSetting[i]}if(e.versionInfo!=null&&e.hasOwnProperty("versionInfo"))r.versionInfo=e.versionInfo;return r};AndroidCheckinResponse.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};AndroidCheckinResponse.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/checkin_proto.AndroidCheckinResponse"};return AndroidCheckinResponse}();return e}();a.mcs_proto=function(){var e={};e.HeartbeatPing=function(){function HeartbeatPing(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}HeartbeatPing.prototype.streamId=0;HeartbeatPing.prototype.lastStreamIdReceived=0;HeartbeatPing.prototype.status=o.Long?o.Long.fromBits(0,0,false):0;HeartbeatPing.create=function create(e){return new HeartbeatPing(e)};HeartbeatPing.encode=function encode(e,t){if(!t)t=s.create();if(e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId"))t.uint32(8).int32(e.streamId);if(e.lastStreamIdReceived!=null&&Object.hasOwnProperty.call(e,"lastStreamIdReceived"))t.uint32(16).int32(e.lastStreamIdReceived);if(e.status!=null&&Object.hasOwnProperty.call(e,"status"))t.uint32(24).int64(e.status);return t};HeartbeatPing.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};HeartbeatPing.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.HeartbeatPing;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.streamId=e.int32();break}case 2:{n.lastStreamIdReceived=e.int32();break}case 3:{n.status=e.int64();break}default:e.skipType(s&7);break}}return n};HeartbeatPing.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};HeartbeatPing.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId"))if(!o.isInteger(e.streamId))return"streamId: integer expected";if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))if(!o.isInteger(e.lastStreamIdReceived))return"lastStreamIdReceived: integer expected";if(e.status!=null&&e.hasOwnProperty("status"))if(!o.isInteger(e.status)&&!(e.status&&o.isInteger(e.status.low)&&o.isInteger(e.status.high)))return"status: integer|Long expected";return null};HeartbeatPing.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.HeartbeatPing)return e;var t=new a.mcs_proto.HeartbeatPing;if(e.streamId!=null)t.streamId=e.streamId|0;if(e.lastStreamIdReceived!=null)t.lastStreamIdReceived=e.lastStreamIdReceived|0;if(e.status!=null)if(o.Long)(t.status=o.Long.fromValue(e.status)).unsigned=false;else if(typeof e.status==="string")t.status=parseInt(e.status,10);else if(typeof e.status==="number")t.status=e.status;else if(typeof e.status==="object")t.status=new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber();return t};HeartbeatPing.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.streamId=0;r.lastStreamIdReceived=0;if(o.Long){var n=new o.Long(0,0,false);r.status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.status=t.longs===String?"0":0}if(e.streamId!=null&&e.hasOwnProperty("streamId"))r.streamId=e.streamId;if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))r.lastStreamIdReceived=e.lastStreamIdReceived;if(e.status!=null&&e.hasOwnProperty("status"))if(typeof e.status==="number")r.status=t.longs===String?String(e.status):e.status;else r.status=t.longs===String?o.Long.prototype.toString.call(e.status):t.longs===Number?new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber():e.status;return r};HeartbeatPing.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};HeartbeatPing.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.HeartbeatPing"};return HeartbeatPing}();e.HeartbeatAck=function(){function HeartbeatAck(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}HeartbeatAck.prototype.streamId=0;HeartbeatAck.prototype.lastStreamIdReceived=0;HeartbeatAck.prototype.status=o.Long?o.Long.fromBits(0,0,false):0;HeartbeatAck.create=function create(e){return new HeartbeatAck(e)};HeartbeatAck.encode=function encode(e,t){if(!t)t=s.create();if(e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId"))t.uint32(8).int32(e.streamId);if(e.lastStreamIdReceived!=null&&Object.hasOwnProperty.call(e,"lastStreamIdReceived"))t.uint32(16).int32(e.lastStreamIdReceived);if(e.status!=null&&Object.hasOwnProperty.call(e,"status"))t.uint32(24).int64(e.status);return t};HeartbeatAck.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};HeartbeatAck.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.HeartbeatAck;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.streamId=e.int32();break}case 2:{n.lastStreamIdReceived=e.int32();break}case 3:{n.status=e.int64();break}default:e.skipType(s&7);break}}return n};HeartbeatAck.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};HeartbeatAck.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId"))if(!o.isInteger(e.streamId))return"streamId: integer expected";if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))if(!o.isInteger(e.lastStreamIdReceived))return"lastStreamIdReceived: integer expected";if(e.status!=null&&e.hasOwnProperty("status"))if(!o.isInteger(e.status)&&!(e.status&&o.isInteger(e.status.low)&&o.isInteger(e.status.high)))return"status: integer|Long expected";return null};HeartbeatAck.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.HeartbeatAck)return e;var t=new a.mcs_proto.HeartbeatAck;if(e.streamId!=null)t.streamId=e.streamId|0;if(e.lastStreamIdReceived!=null)t.lastStreamIdReceived=e.lastStreamIdReceived|0;if(e.status!=null)if(o.Long)(t.status=o.Long.fromValue(e.status)).unsigned=false;else if(typeof e.status==="string")t.status=parseInt(e.status,10);else if(typeof e.status==="number")t.status=e.status;else if(typeof e.status==="object")t.status=new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber();return t};HeartbeatAck.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.streamId=0;r.lastStreamIdReceived=0;if(o.Long){var n=new o.Long(0,0,false);r.status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.status=t.longs===String?"0":0}if(e.streamId!=null&&e.hasOwnProperty("streamId"))r.streamId=e.streamId;if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))r.lastStreamIdReceived=e.lastStreamIdReceived;if(e.status!=null&&e.hasOwnProperty("status"))if(typeof e.status==="number")r.status=t.longs===String?String(e.status):e.status;else r.status=t.longs===String?o.Long.prototype.toString.call(e.status):t.longs===Number?new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber():e.status;return r};HeartbeatAck.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};HeartbeatAck.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.HeartbeatAck"};return HeartbeatAck}();e.ErrorInfo=function(){function ErrorInfo(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}ErrorInfo.prototype.code=0;ErrorInfo.prototype.message="";ErrorInfo.prototype.type="";ErrorInfo.prototype.extension=null;ErrorInfo.create=function create(e){return new ErrorInfo(e)};ErrorInfo.encode=function encode(e,t){if(!t)t=s.create();t.uint32(8).int32(e.code);if(e.message!=null&&Object.hasOwnProperty.call(e,"message"))t.uint32(18).string(e.message);if(e.type!=null&&Object.hasOwnProperty.call(e,"type"))t.uint32(26).string(e.type);if(e.extension!=null&&Object.hasOwnProperty.call(e,"extension"))a.mcs_proto.Extension.encode(e.extension,t.uint32(34).fork()).ldelim();return t};ErrorInfo.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};ErrorInfo.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.ErrorInfo;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.code=e.int32();break}case 2:{n.message=e.string();break}case 3:{n.type=e.string();break}case 4:{n.extension=a.mcs_proto.Extension.decode(e,e.uint32());break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("code"))throw o.ProtocolError("missing required 'code'",{instance:n});return n};ErrorInfo.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};ErrorInfo.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(!o.isInteger(e.code))return"code: integer expected";if(e.message!=null&&e.hasOwnProperty("message"))if(!o.isString(e.message))return"message: string expected";if(e.type!=null&&e.hasOwnProperty("type"))if(!o.isString(e.type))return"type: string expected";if(e.extension!=null&&e.hasOwnProperty("extension")){var t=a.mcs_proto.Extension.verify(e.extension);if(t)return"extension."+t}return null};ErrorInfo.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.ErrorInfo)return e;var t=new a.mcs_proto.ErrorInfo;if(e.code!=null)t.code=e.code|0;if(e.message!=null)t.message=String(e.message);if(e.type!=null)t.type=String(e.type);if(e.extension!=null){if(typeof e.extension!=="object")throw TypeError(".mcs_proto.ErrorInfo.extension: object expected");t.extension=a.mcs_proto.Extension.fromObject(e.extension)}return t};ErrorInfo.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.code=0;r.message="";r.type="";r.extension=null}if(e.code!=null&&e.hasOwnProperty("code"))r.code=e.code;if(e.message!=null&&e.hasOwnProperty("message"))r.message=e.message;if(e.type!=null&&e.hasOwnProperty("type"))r.type=e.type;if(e.extension!=null&&e.hasOwnProperty("extension"))r.extension=a.mcs_proto.Extension.toObject(e.extension,t);return r};ErrorInfo.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};ErrorInfo.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.ErrorInfo"};return ErrorInfo}();e.Setting=function(){function Setting(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}Setting.prototype.name="";Setting.prototype.value="";Setting.create=function create(e){return new Setting(e)};Setting.encode=function encode(e,t){if(!t)t=s.create();t.uint32(10).string(e.name);t.uint32(18).string(e.value);return t};Setting.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};Setting.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.Setting;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.name=e.string();break}case 2:{n.value=e.string();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("name"))throw o.ProtocolError("missing required 'name'",{instance:n});if(!n.hasOwnProperty("value"))throw o.ProtocolError("missing required 'value'",{instance:n});return n};Setting.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};Setting.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(!o.isString(e.name))return"name: string expected";if(!o.isString(e.value))return"value: string expected";return null};Setting.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.Setting)return e;var t=new a.mcs_proto.Setting;if(e.name!=null)t.name=String(e.name);if(e.value!=null)t.value=String(e.value);return t};Setting.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.name="";r.value=""}if(e.name!=null&&e.hasOwnProperty("name"))r.name=e.name;if(e.value!=null&&e.hasOwnProperty("value"))r.value=e.value;return r};Setting.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};Setting.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.Setting"};return Setting}();e.HeartbeatStat=function(){function HeartbeatStat(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}HeartbeatStat.prototype.ip="";HeartbeatStat.prototype.timeout=false;HeartbeatStat.prototype.intervalMs=0;HeartbeatStat.create=function create(e){return new HeartbeatStat(e)};HeartbeatStat.encode=function encode(e,t){if(!t)t=s.create();t.uint32(10).string(e.ip);t.uint32(16).bool(e.timeout);t.uint32(24).int32(e.intervalMs);return t};HeartbeatStat.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};HeartbeatStat.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.HeartbeatStat;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.ip=e.string();break}case 2:{n.timeout=e.bool();break}case 3:{n.intervalMs=e.int32();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("ip"))throw o.ProtocolError("missing required 'ip'",{instance:n});if(!n.hasOwnProperty("timeout"))throw o.ProtocolError("missing required 'timeout'",{instance:n});if(!n.hasOwnProperty("intervalMs"))throw o.ProtocolError("missing required 'intervalMs'",{instance:n});return n};HeartbeatStat.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};HeartbeatStat.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(!o.isString(e.ip))return"ip: string expected";if(typeof e.timeout!=="boolean")return"timeout: boolean expected";if(!o.isInteger(e.intervalMs))return"intervalMs: integer expected";return null};HeartbeatStat.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.HeartbeatStat)return e;var t=new a.mcs_proto.HeartbeatStat;if(e.ip!=null)t.ip=String(e.ip);if(e.timeout!=null)t.timeout=Boolean(e.timeout);if(e.intervalMs!=null)t.intervalMs=e.intervalMs|0;return t};HeartbeatStat.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.ip="";r.timeout=false;r.intervalMs=0}if(e.ip!=null&&e.hasOwnProperty("ip"))r.ip=e.ip;if(e.timeout!=null&&e.hasOwnProperty("timeout"))r.timeout=e.timeout;if(e.intervalMs!=null&&e.hasOwnProperty("intervalMs"))r.intervalMs=e.intervalMs;return r};HeartbeatStat.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};HeartbeatStat.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.HeartbeatStat"};return HeartbeatStat}();e.HeartbeatConfig=function(){function HeartbeatConfig(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}HeartbeatConfig.prototype.uploadStat=false;HeartbeatConfig.prototype.ip="";HeartbeatConfig.prototype.intervalMs=0;HeartbeatConfig.create=function create(e){return new HeartbeatConfig(e)};HeartbeatConfig.encode=function encode(e,t){if(!t)t=s.create();if(e.uploadStat!=null&&Object.hasOwnProperty.call(e,"uploadStat"))t.uint32(8).bool(e.uploadStat);if(e.ip!=null&&Object.hasOwnProperty.call(e,"ip"))t.uint32(18).string(e.ip);if(e.intervalMs!=null&&Object.hasOwnProperty.call(e,"intervalMs"))t.uint32(24).int32(e.intervalMs);return t};HeartbeatConfig.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};HeartbeatConfig.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.HeartbeatConfig;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.uploadStat=e.bool();break}case 2:{n.ip=e.string();break}case 3:{n.intervalMs=e.int32();break}default:e.skipType(s&7);break}}return n};HeartbeatConfig.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};HeartbeatConfig.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.uploadStat!=null&&e.hasOwnProperty("uploadStat"))if(typeof e.uploadStat!=="boolean")return"uploadStat: boolean expected";if(e.ip!=null&&e.hasOwnProperty("ip"))if(!o.isString(e.ip))return"ip: string expected";if(e.intervalMs!=null&&e.hasOwnProperty("intervalMs"))if(!o.isInteger(e.intervalMs))return"intervalMs: integer expected";return null};HeartbeatConfig.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.HeartbeatConfig)return e;var t=new a.mcs_proto.HeartbeatConfig;if(e.uploadStat!=null)t.uploadStat=Boolean(e.uploadStat);if(e.ip!=null)t.ip=String(e.ip);if(e.intervalMs!=null)t.intervalMs=e.intervalMs|0;return t};HeartbeatConfig.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.uploadStat=false;r.ip="";r.intervalMs=0}if(e.uploadStat!=null&&e.hasOwnProperty("uploadStat"))r.uploadStat=e.uploadStat;if(e.ip!=null&&e.hasOwnProperty("ip"))r.ip=e.ip;if(e.intervalMs!=null&&e.hasOwnProperty("intervalMs"))r.intervalMs=e.intervalMs;return r};HeartbeatConfig.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};HeartbeatConfig.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.HeartbeatConfig"};return HeartbeatConfig}();e.ClientEvent=function(){function ClientEvent(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}ClientEvent.prototype.type=0;ClientEvent.prototype.numberDiscardedEvents=0;ClientEvent.prototype.networkType=0;ClientEvent.prototype.timeConnectionStartedMs=o.Long?o.Long.fromBits(0,0,true):0;ClientEvent.prototype.timeConnectionEndedMs=o.Long?o.Long.fromBits(0,0,true):0;ClientEvent.prototype.errorCode=0;ClientEvent.prototype.timeConnectionEstablishedMs=o.Long?o.Long.fromBits(0,0,true):0;ClientEvent.create=function create(e){return new ClientEvent(e)};ClientEvent.encode=function encode(e,t){if(!t)t=s.create();if(e.type!=null&&Object.hasOwnProperty.call(e,"type"))t.uint32(8).int32(e.type);if(e.numberDiscardedEvents!=null&&Object.hasOwnProperty.call(e,"numberDiscardedEvents"))t.uint32(800).uint32(e.numberDiscardedEvents);if(e.networkType!=null&&Object.hasOwnProperty.call(e,"networkType"))t.uint32(1600).int32(e.networkType);if(e.timeConnectionStartedMs!=null&&Object.hasOwnProperty.call(e,"timeConnectionStartedMs"))t.uint32(1616).uint64(e.timeConnectionStartedMs);if(e.timeConnectionEndedMs!=null&&Object.hasOwnProperty.call(e,"timeConnectionEndedMs"))t.uint32(1624).uint64(e.timeConnectionEndedMs);if(e.errorCode!=null&&Object.hasOwnProperty.call(e,"errorCode"))t.uint32(1632).int32(e.errorCode);if(e.timeConnectionEstablishedMs!=null&&Object.hasOwnProperty.call(e,"timeConnectionEstablishedMs"))t.uint32(2400).uint64(e.timeConnectionEstablishedMs);return t};ClientEvent.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};ClientEvent.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.ClientEvent;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.type=e.int32();break}case 100:{n.numberDiscardedEvents=e.uint32();break}case 200:{n.networkType=e.int32();break}case 202:{n.timeConnectionStartedMs=e.uint64();break}case 203:{n.timeConnectionEndedMs=e.uint64();break}case 204:{n.errorCode=e.int32();break}case 300:{n.timeConnectionEstablishedMs=e.uint64();break}default:e.skipType(s&7);break}}return n};ClientEvent.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};ClientEvent.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:break}if(e.numberDiscardedEvents!=null&&e.hasOwnProperty("numberDiscardedEvents"))if(!o.isInteger(e.numberDiscardedEvents))return"numberDiscardedEvents: integer expected";if(e.networkType!=null&&e.hasOwnProperty("networkType"))if(!o.isInteger(e.networkType))return"networkType: integer expected";if(e.timeConnectionStartedMs!=null&&e.hasOwnProperty("timeConnectionStartedMs"))if(!o.isInteger(e.timeConnectionStartedMs)&&!(e.timeConnectionStartedMs&&o.isInteger(e.timeConnectionStartedMs.low)&&o.isInteger(e.timeConnectionStartedMs.high)))return"timeConnectionStartedMs: integer|Long expected";if(e.timeConnectionEndedMs!=null&&e.hasOwnProperty("timeConnectionEndedMs"))if(!o.isInteger(e.timeConnectionEndedMs)&&!(e.timeConnectionEndedMs&&o.isInteger(e.timeConnectionEndedMs.low)&&o.isInteger(e.timeConnectionEndedMs.high)))return"timeConnectionEndedMs: integer|Long expected";if(e.errorCode!=null&&e.hasOwnProperty("errorCode"))if(!o.isInteger(e.errorCode))return"errorCode: integer expected";if(e.timeConnectionEstablishedMs!=null&&e.hasOwnProperty("timeConnectionEstablishedMs"))if(!o.isInteger(e.timeConnectionEstablishedMs)&&!(e.timeConnectionEstablishedMs&&o.isInteger(e.timeConnectionEstablishedMs.low)&&o.isInteger(e.timeConnectionEstablishedMs.high)))return"timeConnectionEstablishedMs: integer|Long expected";return null};ClientEvent.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.ClientEvent)return e;var t=new a.mcs_proto.ClientEvent;switch(e.type){default:if(typeof e.type==="number"){t.type=e.type;break}break;case"UNKNOWN":case 0:t.type=0;break;case"DISCARDED_EVENTS":case 1:t.type=1;break;case"FAILED_CONNECTION":case 2:t.type=2;break;case"SUCCESSFUL_CONNECTION":case 3:t.type=3;break}if(e.numberDiscardedEvents!=null)t.numberDiscardedEvents=e.numberDiscardedEvents>>>0;if(e.networkType!=null)t.networkType=e.networkType|0;if(e.timeConnectionStartedMs!=null)if(o.Long)(t.timeConnectionStartedMs=o.Long.fromValue(e.timeConnectionStartedMs)).unsigned=true;else if(typeof e.timeConnectionStartedMs==="string")t.timeConnectionStartedMs=parseInt(e.timeConnectionStartedMs,10);else if(typeof e.timeConnectionStartedMs==="number")t.timeConnectionStartedMs=e.timeConnectionStartedMs;else if(typeof e.timeConnectionStartedMs==="object")t.timeConnectionStartedMs=new o.LongBits(e.timeConnectionStartedMs.low>>>0,e.timeConnectionStartedMs.high>>>0).toNumber(true);if(e.timeConnectionEndedMs!=null)if(o.Long)(t.timeConnectionEndedMs=o.Long.fromValue(e.timeConnectionEndedMs)).unsigned=true;else if(typeof e.timeConnectionEndedMs==="string")t.timeConnectionEndedMs=parseInt(e.timeConnectionEndedMs,10);else if(typeof e.timeConnectionEndedMs==="number")t.timeConnectionEndedMs=e.timeConnectionEndedMs;else if(typeof e.timeConnectionEndedMs==="object")t.timeConnectionEndedMs=new o.LongBits(e.timeConnectionEndedMs.low>>>0,e.timeConnectionEndedMs.high>>>0).toNumber(true);if(e.errorCode!=null)t.errorCode=e.errorCode|0;if(e.timeConnectionEstablishedMs!=null)if(o.Long)(t.timeConnectionEstablishedMs=o.Long.fromValue(e.timeConnectionEstablishedMs)).unsigned=true;else if(typeof e.timeConnectionEstablishedMs==="string")t.timeConnectionEstablishedMs=parseInt(e.timeConnectionEstablishedMs,10);else if(typeof e.timeConnectionEstablishedMs==="number")t.timeConnectionEstablishedMs=e.timeConnectionEstablishedMs;else if(typeof e.timeConnectionEstablishedMs==="object")t.timeConnectionEstablishedMs=new o.LongBits(e.timeConnectionEstablishedMs.low>>>0,e.timeConnectionEstablishedMs.high>>>0).toNumber(true);return t};ClientEvent.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.type=t.enums===String?"UNKNOWN":0;r.numberDiscardedEvents=0;r.networkType=0;if(o.Long){var n=new o.Long(0,0,true);r.timeConnectionStartedMs=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeConnectionStartedMs=t.longs===String?"0":0;if(o.Long){var n=new o.Long(0,0,true);r.timeConnectionEndedMs=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeConnectionEndedMs=t.longs===String?"0":0;r.errorCode=0;if(o.Long){var n=new o.Long(0,0,true);r.timeConnectionEstablishedMs=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeConnectionEstablishedMs=t.longs===String?"0":0}if(e.type!=null&&e.hasOwnProperty("type"))r.type=t.enums===String?a.mcs_proto.ClientEvent.Type[e.type]===undefined?e.type:a.mcs_proto.ClientEvent.Type[e.type]:e.type;if(e.numberDiscardedEvents!=null&&e.hasOwnProperty("numberDiscardedEvents"))r.numberDiscardedEvents=e.numberDiscardedEvents;if(e.networkType!=null&&e.hasOwnProperty("networkType"))r.networkType=e.networkType;if(e.timeConnectionStartedMs!=null&&e.hasOwnProperty("timeConnectionStartedMs"))if(typeof e.timeConnectionStartedMs==="number")r.timeConnectionStartedMs=t.longs===String?String(e.timeConnectionStartedMs):e.timeConnectionStartedMs;else r.timeConnectionStartedMs=t.longs===String?o.Long.prototype.toString.call(e.timeConnectionStartedMs):t.longs===Number?new o.LongBits(e.timeConnectionStartedMs.low>>>0,e.timeConnectionStartedMs.high>>>0).toNumber(true):e.timeConnectionStartedMs;if(e.timeConnectionEndedMs!=null&&e.hasOwnProperty("timeConnectionEndedMs"))if(typeof e.timeConnectionEndedMs==="number")r.timeConnectionEndedMs=t.longs===String?String(e.timeConnectionEndedMs):e.timeConnectionEndedMs;else r.timeConnectionEndedMs=t.longs===String?o.Long.prototype.toString.call(e.timeConnectionEndedMs):t.longs===Number?new o.LongBits(e.timeConnectionEndedMs.low>>>0,e.timeConnectionEndedMs.high>>>0).toNumber(true):e.timeConnectionEndedMs;if(e.errorCode!=null&&e.hasOwnProperty("errorCode"))r.errorCode=e.errorCode;if(e.timeConnectionEstablishedMs!=null&&e.hasOwnProperty("timeConnectionEstablishedMs"))if(typeof e.timeConnectionEstablishedMs==="number")r.timeConnectionEstablishedMs=t.longs===String?String(e.timeConnectionEstablishedMs):e.timeConnectionEstablishedMs;else r.timeConnectionEstablishedMs=t.longs===String?o.Long.prototype.toString.call(e.timeConnectionEstablishedMs):t.longs===Number?new o.LongBits(e.timeConnectionEstablishedMs.low>>>0,e.timeConnectionEstablishedMs.high>>>0).toNumber(true):e.timeConnectionEstablishedMs;return r};ClientEvent.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};ClientEvent.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.ClientEvent"};ClientEvent.Type=function(){var e={},t=Object.create(e);t[e[0]="UNKNOWN"]=0;t[e[1]="DISCARDED_EVENTS"]=1;t[e[2]="FAILED_CONNECTION"]=2;t[e[3]="SUCCESSFUL_CONNECTION"]=3;return t}();return ClientEvent}();e.LoginRequest=function(){function LoginRequest(e){this.setting=[];this.receivedPersistentId=[];this.clientEvent=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}LoginRequest.prototype.id="";LoginRequest.prototype.domain="";LoginRequest.prototype.user="";LoginRequest.prototype.resource="";LoginRequest.prototype.authToken="";LoginRequest.prototype.deviceId="";LoginRequest.prototype.lastRmqId=o.Long?o.Long.fromBits(0,0,false):0;LoginRequest.prototype.setting=o.emptyArray;LoginRequest.prototype.receivedPersistentId=o.emptyArray;LoginRequest.prototype.adaptiveHeartbeat=false;LoginRequest.prototype.heartbeatStat=null;LoginRequest.prototype.useRmq2=false;LoginRequest.prototype.accountId=o.Long?o.Long.fromBits(0,0,false):0;LoginRequest.prototype.authService=2;LoginRequest.prototype.networkType=0;LoginRequest.prototype.status=o.Long?o.Long.fromBits(0,0,false):0;LoginRequest.prototype.clientEvent=o.emptyArray;LoginRequest.create=function create(e){return new LoginRequest(e)};LoginRequest.encode=function encode(e,t){if(!t)t=s.create();t.uint32(10).string(e.id);t.uint32(18).string(e.domain);t.uint32(26).string(e.user);t.uint32(34).string(e.resource);t.uint32(42).string(e.authToken);if(e.deviceId!=null&&Object.hasOwnProperty.call(e,"deviceId"))t.uint32(50).string(e.deviceId);if(e.lastRmqId!=null&&Object.hasOwnProperty.call(e,"lastRmqId"))t.uint32(56).int64(e.lastRmqId);if(e.setting!=null&&e.setting.length)for(var r=0;r<e.setting.length;++r)a.mcs_proto.Setting.encode(e.setting[r],t.uint32(66).fork()).ldelim();if(e.receivedPersistentId!=null&&e.receivedPersistentId.length)for(var r=0;r<e.receivedPersistentId.length;++r)t.uint32(82).string(e.receivedPersistentId[r]);if(e.adaptiveHeartbeat!=null&&Object.hasOwnProperty.call(e,"adaptiveHeartbeat"))t.uint32(96).bool(e.adaptiveHeartbeat);if(e.heartbeatStat!=null&&Object.hasOwnProperty.call(e,"heartbeatStat"))a.mcs_proto.HeartbeatStat.encode(e.heartbeatStat,t.uint32(106).fork()).ldelim();if(e.useRmq2!=null&&Object.hasOwnProperty.call(e,"useRmq2"))t.uint32(112).bool(e.useRmq2);if(e.accountId!=null&&Object.hasOwnProperty.call(e,"accountId"))t.uint32(120).int64(e.accountId);if(e.authService!=null&&Object.hasOwnProperty.call(e,"authService"))t.uint32(128).int32(e.authService);if(e.networkType!=null&&Object.hasOwnProperty.call(e,"networkType"))t.uint32(136).int32(e.networkType);if(e.status!=null&&Object.hasOwnProperty.call(e,"status"))t.uint32(144).int64(e.status);if(e.clientEvent!=null&&e.clientEvent.length)for(var r=0;r<e.clientEvent.length;++r)a.mcs_proto.ClientEvent.encode(e.clientEvent[r],t.uint32(178).fork()).ldelim();return t};LoginRequest.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};LoginRequest.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.LoginRequest;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.id=e.string();break}case 2:{n.domain=e.string();break}case 3:{n.user=e.string();break}case 4:{n.resource=e.string();break}case 5:{n.authToken=e.string();break}case 6:{n.deviceId=e.string();break}case 7:{n.lastRmqId=e.int64();break}case 8:{if(!(n.setting&&n.setting.length))n.setting=[];n.setting.push(a.mcs_proto.Setting.decode(e,e.uint32()));break}case 10:{if(!(n.receivedPersistentId&&n.receivedPersistentId.length))n.receivedPersistentId=[];n.receivedPersistentId.push(e.string());break}case 12:{n.adaptiveHeartbeat=e.bool();break}case 13:{n.heartbeatStat=a.mcs_proto.HeartbeatStat.decode(e,e.uint32());break}case 14:{n.useRmq2=e.bool();break}case 15:{n.accountId=e.int64();break}case 16:{n.authService=e.int32();break}case 17:{n.networkType=e.int32();break}case 18:{n.status=e.int64();break}case 22:{if(!(n.clientEvent&&n.clientEvent.length))n.clientEvent=[];n.clientEvent.push(a.mcs_proto.ClientEvent.decode(e,e.uint32()));break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("id"))throw o.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("domain"))throw o.ProtocolError("missing required 'domain'",{instance:n});if(!n.hasOwnProperty("user"))throw o.ProtocolError("missing required 'user'",{instance:n});if(!n.hasOwnProperty("resource"))throw o.ProtocolError("missing required 'resource'",{instance:n});if(!n.hasOwnProperty("authToken"))throw o.ProtocolError("missing required 'authToken'",{instance:n});return n};LoginRequest.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};LoginRequest.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(!o.isString(e.id))return"id: string expected";if(!o.isString(e.domain))return"domain: string expected";if(!o.isString(e.user))return"user: string expected";if(!o.isString(e.resource))return"resource: string expected";if(!o.isString(e.authToken))return"authToken: string expected";if(e.deviceId!=null&&e.hasOwnProperty("deviceId"))if(!o.isString(e.deviceId))return"deviceId: string expected";if(e.lastRmqId!=null&&e.hasOwnProperty("lastRmqId"))if(!o.isInteger(e.lastRmqId)&&!(e.lastRmqId&&o.isInteger(e.lastRmqId.low)&&o.isInteger(e.lastRmqId.high)))return"lastRmqId: integer|Long expected";if(e.setting!=null&&e.hasOwnProperty("setting")){if(!Array.isArray(e.setting))return"setting: array expected";for(var t=0;t<e.setting.length;++t){var r=a.mcs_proto.Setting.verify(e.setting[t]);if(r)return"setting."+r}}if(e.receivedPersistentId!=null&&e.hasOwnProperty("receivedPersistentId")){if(!Array.isArray(e.receivedPersistentId))return"receivedPersistentId: array expected";for(var t=0;t<e.receivedPersistentId.length;++t)if(!o.isString(e.receivedPersistentId[t]))return"receivedPersistentId: string[] expected"}if(e.adaptiveHeartbeat!=null&&e.hasOwnProperty("adaptiveHeartbeat"))if(typeof e.adaptiveHeartbeat!=="boolean")return"adaptiveHeartbeat: boolean expected";if(e.heartbeatStat!=null&&e.hasOwnProperty("heartbeatStat")){var r=a.mcs_proto.HeartbeatStat.verify(e.heartbeatStat);if(r)return"heartbeatStat."+r}if(e.useRmq2!=null&&e.hasOwnProperty("useRmq2"))if(typeof e.useRmq2!=="boolean")return"useRmq2: boolean expected";if(e.accountId!=null&&e.hasOwnProperty("accountId"))if(!o.isInteger(e.accountId)&&!(e.accountId&&o.isInteger(e.accountId.low)&&o.isInteger(e.accountId.high)))return"accountId: integer|Long expected";if(e.authService!=null&&e.hasOwnProperty("authService"))switch(e.authService){default:return"authService: enum value expected";case 2:break}if(e.networkType!=null&&e.hasOwnProperty("networkType"))if(!o.isInteger(e.networkType))return"networkType: integer expected";if(e.status!=null&&e.hasOwnProperty("status"))if(!o.isInteger(e.status)&&!(e.status&&o.isInteger(e.status.low)&&o.isInteger(e.status.high)))return"status: integer|Long expected";if(e.clientEvent!=null&&e.hasOwnProperty("clientEvent")){if(!Array.isArray(e.clientEvent))return"clientEvent: array expected";for(var t=0;t<e.clientEvent.length;++t){var r=a.mcs_proto.ClientEvent.verify(e.clientEvent[t]);if(r)return"clientEvent."+r}}return null};LoginRequest.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.LoginRequest)return e;var t=new a.mcs_proto.LoginRequest;if(e.id!=null)t.id=String(e.id);if(e.domain!=null)t.domain=String(e.domain);if(e.user!=null)t.user=String(e.user);if(e.resource!=null)t.resource=String(e.resource);if(e.authToken!=null)t.authToken=String(e.authToken);if(e.deviceId!=null)t.deviceId=String(e.deviceId);if(e.lastRmqId!=null)if(o.Long)(t.lastRmqId=o.Long.fromValue(e.lastRmqId)).unsigned=false;else if(typeof e.lastRmqId==="string")t.lastRmqId=parseInt(e.lastRmqId,10);else if(typeof e.lastRmqId==="number")t.lastRmqId=e.lastRmqId;else if(typeof e.lastRmqId==="object")t.lastRmqId=new o.LongBits(e.lastRmqId.low>>>0,e.lastRmqId.high>>>0).toNumber();if(e.setting){if(!Array.isArray(e.setting))throw TypeError(".mcs_proto.LoginRequest.setting: array expected");t.setting=[];for(var r=0;r<e.setting.length;++r){if(typeof e.setting[r]!=="object")throw TypeError(".mcs_proto.LoginRequest.setting: object expected");t.setting[r]=a.mcs_proto.Setting.fromObject(e.setting[r])}}if(e.receivedPersistentId){if(!Array.isArray(e.receivedPersistentId))throw TypeError(".mcs_proto.LoginRequest.receivedPersistentId: array expected");t.receivedPersistentId=[];for(var r=0;r<e.receivedPersistentId.length;++r)t.receivedPersistentId[r]=String(e.receivedPersistentId[r])}if(e.adaptiveHeartbeat!=null)t.adaptiveHeartbeat=Boolean(e.adaptiveHeartbeat);if(e.heartbeatStat!=null){if(typeof e.heartbeatStat!=="object")throw TypeError(".mcs_proto.LoginRequest.heartbeatStat: object expected");t.heartbeatStat=a.mcs_proto.HeartbeatStat.fromObject(e.heartbeatStat)}if(e.useRmq2!=null)t.useRmq2=Boolean(e.useRmq2);if(e.accountId!=null)if(o.Long)(t.accountId=o.Long.fromValue(e.accountId)).unsigned=false;else if(typeof e.accountId==="string")t.accountId=parseInt(e.accountId,10);else if(typeof e.accountId==="number")t.accountId=e.accountId;else if(typeof e.accountId==="object")t.accountId=new o.LongBits(e.accountId.low>>>0,e.accountId.high>>>0).toNumber();switch(e.authService){default:if(typeof e.authService==="number"){t.authService=e.authService;break}break;case"ANDROID_ID":case 2:t.authService=2;break}if(e.networkType!=null)t.networkType=e.networkType|0;if(e.status!=null)if(o.Long)(t.status=o.Long.fromValue(e.status)).unsigned=false;else if(typeof e.status==="string")t.status=parseInt(e.status,10);else if(typeof e.status==="number")t.status=e.status;else if(typeof e.status==="object")t.status=new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber();if(e.clientEvent){if(!Array.isArray(e.clientEvent))throw TypeError(".mcs_proto.LoginRequest.clientEvent: array expected");t.clientEvent=[];for(var r=0;r<e.clientEvent.length;++r){if(typeof e.clientEvent[r]!=="object")throw TypeError(".mcs_proto.LoginRequest.clientEvent: object expected");t.clientEvent[r]=a.mcs_proto.ClientEvent.fromObject(e.clientEvent[r])}}return t};LoginRequest.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.arrays||t.defaults){r.setting=[];r.receivedPersistentId=[];r.clientEvent=[]}if(t.defaults){r.id="";r.domain="";r.user="";r.resource="";r.authToken="";r.deviceId="";if(o.Long){var n=new o.Long(0,0,false);r.lastRmqId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.lastRmqId=t.longs===String?"0":0;r.adaptiveHeartbeat=false;r.heartbeatStat=null;r.useRmq2=false;if(o.Long){var n=new o.Long(0,0,false);r.accountId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.accountId=t.longs===String?"0":0;r.authService=t.enums===String?"ANDROID_ID":2;r.networkType=0;if(o.Long){var n=new o.Long(0,0,false);r.status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.status=t.longs===String?"0":0}if(e.id!=null&&e.hasOwnProperty("id"))r.id=e.id;if(e.domain!=null&&e.hasOwnProperty("domain"))r.domain=e.domain;if(e.user!=null&&e.hasOwnProperty("user"))r.user=e.user;if(e.resource!=null&&e.hasOwnProperty("resource"))r.resource=e.resource;if(e.authToken!=null&&e.hasOwnProperty("authToken"))r.authToken=e.authToken;if(e.deviceId!=null&&e.hasOwnProperty("deviceId"))r.deviceId=e.deviceId;if(e.lastRmqId!=null&&e.hasOwnProperty("lastRmqId"))if(typeof e.lastRmqId==="number")r.lastRmqId=t.longs===String?String(e.lastRmqId):e.lastRmqId;else r.lastRmqId=t.longs===String?o.Long.prototype.toString.call(e.lastRmqId):t.longs===Number?new o.LongBits(e.lastRmqId.low>>>0,e.lastRmqId.high>>>0).toNumber():e.lastRmqId;if(e.setting&&e.setting.length){r.setting=[];for(var i=0;i<e.setting.length;++i)r.setting[i]=a.mcs_proto.Setting.toObject(e.setting[i],t)}if(e.receivedPersistentId&&e.receivedPersistentId.length){r.receivedPersistentId=[];for(var i=0;i<e.receivedPersistentId.length;++i)r.receivedPersistentId[i]=e.receivedPersistentId[i]}if(e.adaptiveHeartbeat!=null&&e.hasOwnProperty("adaptiveHeartbeat"))r.adaptiveHeartbeat=e.adaptiveHeartbeat;if(e.heartbeatStat!=null&&e.hasOwnProperty("heartbeatStat"))r.heartbeatStat=a.mcs_proto.HeartbeatStat.toObject(e.heartbeatStat,t);if(e.useRmq2!=null&&e.hasOwnProperty("useRmq2"))r.useRmq2=e.useRmq2;if(e.accountId!=null&&e.hasOwnProperty("accountId"))if(typeof e.accountId==="number")r.accountId=t.longs===String?String(e.accountId):e.accountId;else r.accountId=t.longs===String?o.Long.prototype.toString.call(e.accountId):t.longs===Number?new o.LongBits(e.accountId.low>>>0,e.accountId.high>>>0).toNumber():e.accountId;if(e.authService!=null&&e.hasOwnProperty("authService"))r.authService=t.enums===String?a.mcs_proto.LoginRequest.AuthService[e.authService]===undefined?e.authService:a.mcs_proto.LoginRequest.AuthService[e.authService]:e.authService;if(e.networkType!=null&&e.hasOwnProperty("networkType"))r.networkType=e.networkType;if(e.status!=null&&e.hasOwnProperty("status"))if(typeof e.status==="number")r.status=t.longs===String?String(e.status):e.status;else r.status=t.longs===String?o.Long.prototype.toString.call(e.status):t.longs===Number?new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber():e.status;if(e.clientEvent&&e.clientEvent.length){r.clientEvent=[];for(var i=0;i<e.clientEvent.length;++i)r.clientEvent[i]=a.mcs_proto.ClientEvent.toObject(e.clientEvent[i],t)}return r};LoginRequest.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};LoginRequest.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.LoginRequest"};LoginRequest.AuthService=function(){var e={},t=Object.create(e);t[e[2]="ANDROID_ID"]=2;return t}();return LoginRequest}();e.LoginResponse=function(){function LoginResponse(e){this.setting=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}LoginResponse.prototype.id="";LoginResponse.prototype.jid="";LoginResponse.prototype.error=null;LoginResponse.prototype.setting=o.emptyArray;LoginResponse.prototype.streamId=0;LoginResponse.prototype.lastStreamIdReceived=0;LoginResponse.prototype.heartbeatConfig=null;LoginResponse.prototype.serverTimestamp=o.Long?o.Long.fromBits(0,0,false):0;LoginResponse.create=function create(e){return new LoginResponse(e)};LoginResponse.encode=function encode(e,t){if(!t)t=s.create();t.uint32(10).string(e.id);if(e.jid!=null&&Object.hasOwnProperty.call(e,"jid"))t.uint32(18).string(e.jid);if(e.error!=null&&Object.hasOwnProperty.call(e,"error"))a.mcs_proto.ErrorInfo.encode(e.error,t.uint32(26).fork()).ldelim();if(e.setting!=null&&e.setting.length)for(var r=0;r<e.setting.length;++r)a.mcs_proto.Setting.encode(e.setting[r],t.uint32(34).fork()).ldelim();if(e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId"))t.uint32(40).int32(e.streamId);if(e.lastStreamIdReceived!=null&&Object.hasOwnProperty.call(e,"lastStreamIdReceived"))t.uint32(48).int32(e.lastStreamIdReceived);if(e.heartbeatConfig!=null&&Object.hasOwnProperty.call(e,"heartbeatConfig"))a.mcs_proto.HeartbeatConfig.encode(e.heartbeatConfig,t.uint32(58).fork()).ldelim();if(e.serverTimestamp!=null&&Object.hasOwnProperty.call(e,"serverTimestamp"))t.uint32(64).int64(e.serverTimestamp);return t};LoginResponse.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};LoginResponse.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.LoginResponse;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.id=e.string();break}case 2:{n.jid=e.string();break}case 3:{n.error=a.mcs_proto.ErrorInfo.decode(e,e.uint32());break}case 4:{if(!(n.setting&&n.setting.length))n.setting=[];n.setting.push(a.mcs_proto.Setting.decode(e,e.uint32()));break}case 5:{n.streamId=e.int32();break}case 6:{n.lastStreamIdReceived=e.int32();break}case 7:{n.heartbeatConfig=a.mcs_proto.HeartbeatConfig.decode(e,e.uint32());break}case 8:{n.serverTimestamp=e.int64();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("id"))throw o.ProtocolError("missing required 'id'",{instance:n});return n};LoginResponse.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};LoginResponse.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(!o.isString(e.id))return"id: string expected";if(e.jid!=null&&e.hasOwnProperty("jid"))if(!o.isString(e.jid))return"jid: string expected";if(e.error!=null&&e.hasOwnProperty("error")){var t=a.mcs_proto.ErrorInfo.verify(e.error);if(t)return"error."+t}if(e.setting!=null&&e.hasOwnProperty("setting")){if(!Array.isArray(e.setting))return"setting: array expected";for(var r=0;r<e.setting.length;++r){var t=a.mcs_proto.Setting.verify(e.setting[r]);if(t)return"setting."+t}}if(e.streamId!=null&&e.hasOwnProperty("streamId"))if(!o.isInteger(e.streamId))return"streamId: integer expected";if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))if(!o.isInteger(e.lastStreamIdReceived))return"lastStreamIdReceived: integer expected";if(e.heartbeatConfig!=null&&e.hasOwnProperty("heartbeatConfig")){var t=a.mcs_proto.HeartbeatConfig.verify(e.heartbeatConfig);if(t)return"heartbeatConfig."+t}if(e.serverTimestamp!=null&&e.hasOwnProperty("serverTimestamp"))if(!o.isInteger(e.serverTimestamp)&&!(e.serverTimestamp&&o.isInteger(e.serverTimestamp.low)&&o.isInteger(e.serverTimestamp.high)))return"serverTimestamp: integer|Long expected";return null};LoginResponse.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.LoginResponse)return e;var t=new a.mcs_proto.LoginResponse;if(e.id!=null)t.id=String(e.id);if(e.jid!=null)t.jid=String(e.jid);if(e.error!=null){if(typeof e.error!=="object")throw TypeError(".mcs_proto.LoginResponse.error: object expected");t.error=a.mcs_proto.ErrorInfo.fromObject(e.error)}if(e.setting){if(!Array.isArray(e.setting))throw TypeError(".mcs_proto.LoginResponse.setting: array expected");t.setting=[];for(var r=0;r<e.setting.length;++r){if(typeof e.setting[r]!=="object")throw TypeError(".mcs_proto.LoginResponse.setting: object expected");t.setting[r]=a.mcs_proto.Setting.fromObject(e.setting[r])}}if(e.streamId!=null)t.streamId=e.streamId|0;if(e.lastStreamIdReceived!=null)t.lastStreamIdReceived=e.lastStreamIdReceived|0;if(e.heartbeatConfig!=null){if(typeof e.heartbeatConfig!=="object")throw TypeError(".mcs_proto.LoginResponse.heartbeatConfig: object expected");t.heartbeatConfig=a.mcs_proto.HeartbeatConfig.fromObject(e.heartbeatConfig)}if(e.serverTimestamp!=null)if(o.Long)(t.serverTimestamp=o.Long.fromValue(e.serverTimestamp)).unsigned=false;else if(typeof e.serverTimestamp==="string")t.serverTimestamp=parseInt(e.serverTimestamp,10);else if(typeof e.serverTimestamp==="number")t.serverTimestamp=e.serverTimestamp;else if(typeof e.serverTimestamp==="object")t.serverTimestamp=new o.LongBits(e.serverTimestamp.low>>>0,e.serverTimestamp.high>>>0).toNumber();return t};LoginResponse.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.arrays||t.defaults)r.setting=[];if(t.defaults){r.id="";r.jid="";r.error=null;r.streamId=0;r.lastStreamIdReceived=0;r.heartbeatConfig=null;if(o.Long){var n=new o.Long(0,0,false);r.serverTimestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.serverTimestamp=t.longs===String?"0":0}if(e.id!=null&&e.hasOwnProperty("id"))r.id=e.id;if(e.jid!=null&&e.hasOwnProperty("jid"))r.jid=e.jid;if(e.error!=null&&e.hasOwnProperty("error"))r.error=a.mcs_proto.ErrorInfo.toObject(e.error,t);if(e.setting&&e.setting.length){r.setting=[];for(var i=0;i<e.setting.length;++i)r.setting[i]=a.mcs_proto.Setting.toObject(e.setting[i],t)}if(e.streamId!=null&&e.hasOwnProperty("streamId"))r.streamId=e.streamId;if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))r.lastStreamIdReceived=e.lastStreamIdReceived;if(e.heartbeatConfig!=null&&e.hasOwnProperty("heartbeatConfig"))r.heartbeatConfig=a.mcs_proto.HeartbeatConfig.toObject(e.heartbeatConfig,t);if(e.serverTimestamp!=null&&e.hasOwnProperty("serverTimestamp"))if(typeof e.serverTimestamp==="number")r.serverTimestamp=t.longs===String?String(e.serverTimestamp):e.serverTimestamp;else r.serverTimestamp=t.longs===String?o.Long.prototype.toString.call(e.serverTimestamp):t.longs===Number?new o.LongBits(e.serverTimestamp.low>>>0,e.serverTimestamp.high>>>0).toNumber():e.serverTimestamp;return r};LoginResponse.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};LoginResponse.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.LoginResponse"};return LoginResponse}();e.StreamErrorStanza=function(){function StreamErrorStanza(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}StreamErrorStanza.prototype.type="";StreamErrorStanza.prototype.text="";StreamErrorStanza.create=function create(e){return new StreamErrorStanza(e)};StreamErrorStanza.encode=function encode(e,t){if(!t)t=s.create();t.uint32(10).string(e.type);if(e.text!=null&&Object.hasOwnProperty.call(e,"text"))t.uint32(18).string(e.text);return t};StreamErrorStanza.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};StreamErrorStanza.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.StreamErrorStanza;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.type=e.string();break}case 2:{n.text=e.string();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("type"))throw o.ProtocolError("missing required 'type'",{instance:n});return n};StreamErrorStanza.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};StreamErrorStanza.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(!o.isString(e.type))return"type: string expected";if(e.text!=null&&e.hasOwnProperty("text"))if(!o.isString(e.text))return"text: string expected";return null};StreamErrorStanza.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.StreamErrorStanza)return e;var t=new a.mcs_proto.StreamErrorStanza;if(e.type!=null)t.type=String(e.type);if(e.text!=null)t.text=String(e.text);return t};StreamErrorStanza.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.type="";r.text=""}if(e.type!=null&&e.hasOwnProperty("type"))r.type=e.type;if(e.text!=null&&e.hasOwnProperty("text"))r.text=e.text;return r};StreamErrorStanza.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};StreamErrorStanza.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.StreamErrorStanza"};return StreamErrorStanza}();e.Close=function(){function Close(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}Close.create=function create(e){return new Close(e)};Close.encode=function encode(e,t){if(!t)t=s.create();return t};Close.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};Close.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.Close;while(e.pos<r){var s=e.uint32();switch(s>>>3){default:e.skipType(s&7);break}}return n};Close.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};Close.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";return null};Close.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.Close)return e;return new a.mcs_proto.Close};Close.toObject=function toObject(){return{}};Close.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};Close.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.Close"};return Close}();e.Extension=function(){function Extension(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}Extension.prototype.id=0;Extension.prototype.data=o.newBuffer([]);Extension.create=function create(e){return new Extension(e)};Extension.encode=function encode(e,t){if(!t)t=s.create();t.uint32(8).int32(e.id);t.uint32(18).bytes(e.data);return t};Extension.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};Extension.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.Extension;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.id=e.int32();break}case 2:{n.data=e.bytes();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("id"))throw o.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("data"))throw o.ProtocolError("missing required 'data'",{instance:n});return n};Extension.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};Extension.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(!o.isInteger(e.id))return"id: integer expected";if(!(e.data&&typeof e.data.length==="number"||o.isString(e.data)))return"data: buffer expected";return null};Extension.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.Extension)return e;var t=new a.mcs_proto.Extension;if(e.id!=null)t.id=e.id|0;if(e.data!=null)if(typeof e.data==="string")o.base64.decode(e.data,t.data=o.newBuffer(o.base64.length(e.data)),0);else if(e.data.length>=0)t.data=e.data;return t};Extension.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.id=0;if(t.bytes===String)r.data="";else{r.data=[];if(t.bytes!==Array)r.data=o.newBuffer(r.data)}}if(e.id!=null&&e.hasOwnProperty("id"))r.id=e.id;if(e.data!=null&&e.hasOwnProperty("data"))r.data=t.bytes===String?o.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data;return r};Extension.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};Extension.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.Extension"};return Extension}();e.IqStanza=function(){function IqStanza(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}IqStanza.prototype.rmqId=o.Long?o.Long.fromBits(0,0,false):0;IqStanza.prototype.type=0;IqStanza.prototype.id="";IqStanza.prototype.from="";IqStanza.prototype.to="";IqStanza.prototype.error=null;IqStanza.prototype.extension=null;IqStanza.prototype.persistentId="";IqStanza.prototype.streamId=0;IqStanza.prototype.lastStreamIdReceived=0;IqStanza.prototype.accountId=o.Long?o.Long.fromBits(0,0,false):0;IqStanza.prototype.status=o.Long?o.Long.fromBits(0,0,false):0;IqStanza.create=function create(e){return new IqStanza(e)};IqStanza.encode=function encode(e,t){if(!t)t=s.create();if(e.rmqId!=null&&Object.hasOwnProperty.call(e,"rmqId"))t.uint32(8).int64(e.rmqId);t.uint32(16).int32(e.type);t.uint32(26).string(e.id);if(e.from!=null&&Object.hasOwnProperty.call(e,"from"))t.uint32(34).string(e.from);if(e.to!=null&&Object.hasOwnProperty.call(e,"to"))t.uint32(42).string(e.to);if(e.error!=null&&Object.hasOwnProperty.call(e,"error"))a.mcs_proto.ErrorInfo.encode(e.error,t.uint32(50).fork()).ldelim();if(e.extension!=null&&Object.hasOwnProperty.call(e,"extension"))a.mcs_proto.Extension.encode(e.extension,t.uint32(58).fork()).ldelim();if(e.persistentId!=null&&Object.hasOwnProperty.call(e,"persistentId"))t.uint32(66).string(e.persistentId);if(e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId"))t.uint32(72).int32(e.streamId);if(e.lastStreamIdReceived!=null&&Object.hasOwnProperty.call(e,"lastStreamIdReceived"))t.uint32(80).int32(e.lastStreamIdReceived);if(e.accountId!=null&&Object.hasOwnProperty.call(e,"accountId"))t.uint32(88).int64(e.accountId);if(e.status!=null&&Object.hasOwnProperty.call(e,"status"))t.uint32(96).int64(e.status);return t};IqStanza.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};IqStanza.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.IqStanza;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.rmqId=e.int64();break}case 2:{n.type=e.int32();break}case 3:{n.id=e.string();break}case 4:{n.from=e.string();break}case 5:{n.to=e.string();break}case 6:{n.error=a.mcs_proto.ErrorInfo.decode(e,e.uint32());break}case 7:{n.extension=a.mcs_proto.Extension.decode(e,e.uint32());break}case 8:{n.persistentId=e.string();break}case 9:{n.streamId=e.int32();break}case 10:{n.lastStreamIdReceived=e.int32();break}case 11:{n.accountId=e.int64();break}case 12:{n.status=e.int64();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("type"))throw o.ProtocolError("missing required 'type'",{instance:n});if(!n.hasOwnProperty("id"))throw o.ProtocolError("missing required 'id'",{instance:n});return n};IqStanza.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};IqStanza.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.rmqId!=null&&e.hasOwnProperty("rmqId"))if(!o.isInteger(e.rmqId)&&!(e.rmqId&&o.isInteger(e.rmqId.low)&&o.isInteger(e.rmqId.high)))return"rmqId: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:break}if(!o.isString(e.id))return"id: string expected";if(e.from!=null&&e.hasOwnProperty("from"))if(!o.isString(e.from))return"from: string expected";if(e.to!=null&&e.hasOwnProperty("to"))if(!o.isString(e.to))return"to: string expected";if(e.error!=null&&e.hasOwnProperty("error")){var t=a.mcs_proto.ErrorInfo.verify(e.error);if(t)return"error."+t}if(e.extension!=null&&e.hasOwnProperty("extension")){var t=a.mcs_proto.Extension.verify(e.extension);if(t)return"extension."+t}if(e.persistentId!=null&&e.hasOwnProperty("persistentId"))if(!o.isString(e.persistentId))return"persistentId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId"))if(!o.isInteger(e.streamId))return"streamId: integer expected";if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))if(!o.isInteger(e.lastStreamIdReceived))return"lastStreamIdReceived: integer expected";if(e.accountId!=null&&e.hasOwnProperty("accountId"))if(!o.isInteger(e.accountId)&&!(e.accountId&&o.isInteger(e.accountId.low)&&o.isInteger(e.accountId.high)))return"accountId: integer|Long expected";if(e.status!=null&&e.hasOwnProperty("status"))if(!o.isInteger(e.status)&&!(e.status&&o.isInteger(e.status.low)&&o.isInteger(e.status.high)))return"status: integer|Long expected";return null};IqStanza.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.IqStanza)return e;var t=new a.mcs_proto.IqStanza;if(e.rmqId!=null)if(o.Long)(t.rmqId=o.Long.fromValue(e.rmqId)).unsigned=false;else if(typeof e.rmqId==="string")t.rmqId=parseInt(e.rmqId,10);else if(typeof e.rmqId==="number")t.rmqId=e.rmqId;else if(typeof e.rmqId==="object")t.rmqId=new o.LongBits(e.rmqId.low>>>0,e.rmqId.high>>>0).toNumber();switch(e.type){default:if(typeof e.type==="number"){t.type=e.type;break}break;case"GET":case 0:t.type=0;break;case"SET":case 1:t.type=1;break;case"RESULT":case 2:t.type=2;break;case"IQ_ERROR":case 3:t.type=3;break}if(e.id!=null)t.id=String(e.id);if(e.from!=null)t.from=String(e.from);if(e.to!=null)t.to=String(e.to);if(e.error!=null){if(typeof e.error!=="object")throw TypeError(".mcs_proto.IqStanza.error: object expected");t.error=a.mcs_proto.ErrorInfo.fromObject(e.error)}if(e.extension!=null){if(typeof e.extension!=="object")throw TypeError(".mcs_proto.IqStanza.extension: object expected");t.extension=a.mcs_proto.Extension.fromObject(e.extension)}if(e.persistentId!=null)t.persistentId=String(e.persistentId);if(e.streamId!=null)t.streamId=e.streamId|0;if(e.lastStreamIdReceived!=null)t.lastStreamIdReceived=e.lastStreamIdReceived|0;if(e.accountId!=null)if(o.Long)(t.accountId=o.Long.fromValue(e.accountId)).unsigned=false;else if(typeof e.accountId==="string")t.accountId=parseInt(e.accountId,10);else if(typeof e.accountId==="number")t.accountId=e.accountId;else if(typeof e.accountId==="object")t.accountId=new o.LongBits(e.accountId.low>>>0,e.accountId.high>>>0).toNumber();if(e.status!=null)if(o.Long)(t.status=o.Long.fromValue(e.status)).unsigned=false;else if(typeof e.status==="string")t.status=parseInt(e.status,10);else if(typeof e.status==="number")t.status=e.status;else if(typeof e.status==="object")t.status=new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber();return t};IqStanza.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){if(o.Long){var n=new o.Long(0,0,false);r.rmqId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.rmqId=t.longs===String?"0":0;r.type=t.enums===String?"GET":0;r.id="";r.from="";r.to="";r.error=null;r.extension=null;r.persistentId="";r.streamId=0;r.lastStreamIdReceived=0;if(o.Long){var n=new o.Long(0,0,false);r.accountId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.accountId=t.longs===String?"0":0;if(o.Long){var n=new o.Long(0,0,false);r.status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.status=t.longs===String?"0":0}if(e.rmqId!=null&&e.hasOwnProperty("rmqId"))if(typeof e.rmqId==="number")r.rmqId=t.longs===String?String(e.rmqId):e.rmqId;else r.rmqId=t.longs===String?o.Long.prototype.toString.call(e.rmqId):t.longs===Number?new o.LongBits(e.rmqId.low>>>0,e.rmqId.high>>>0).toNumber():e.rmqId;if(e.type!=null&&e.hasOwnProperty("type"))r.type=t.enums===String?a.mcs_proto.IqStanza.IqType[e.type]===undefined?e.type:a.mcs_proto.IqStanza.IqType[e.type]:e.type;if(e.id!=null&&e.hasOwnProperty("id"))r.id=e.id;if(e.from!=null&&e.hasOwnProperty("from"))r.from=e.from;if(e.to!=null&&e.hasOwnProperty("to"))r.to=e.to;if(e.error!=null&&e.hasOwnProperty("error"))r.error=a.mcs_proto.ErrorInfo.toObject(e.error,t);if(e.extension!=null&&e.hasOwnProperty("extension"))r.extension=a.mcs_proto.Extension.toObject(e.extension,t);if(e.persistentId!=null&&e.hasOwnProperty("persistentId"))r.persistentId=e.persistentId;if(e.streamId!=null&&e.hasOwnProperty("streamId"))r.streamId=e.streamId;if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))r.lastStreamIdReceived=e.lastStreamIdReceived;if(e.accountId!=null&&e.hasOwnProperty("accountId"))if(typeof e.accountId==="number")r.accountId=t.longs===String?String(e.accountId):e.accountId;else r.accountId=t.longs===String?o.Long.prototype.toString.call(e.accountId):t.longs===Number?new o.LongBits(e.accountId.low>>>0,e.accountId.high>>>0).toNumber():e.accountId;if(e.status!=null&&e.hasOwnProperty("status"))if(typeof e.status==="number")r.status=t.longs===String?String(e.status):e.status;else r.status=t.longs===String?o.Long.prototype.toString.call(e.status):t.longs===Number?new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber():e.status;return r};IqStanza.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};IqStanza.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.IqStanza"};IqStanza.IqType=function(){var e={},t=Object.create(e);t[e[0]="GET"]=0;t[e[1]="SET"]=1;t[e[2]="RESULT"]=2;t[e[3]="IQ_ERROR"]=3;return t}();return IqStanza}();e.AppData=function(){function AppData(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}AppData.prototype.key="";AppData.prototype.value="";AppData.create=function create(e){return new AppData(e)};AppData.encode=function encode(e,t){if(!t)t=s.create();t.uint32(10).string(e.key);t.uint32(18).string(e.value);return t};AppData.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};AppData.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.AppData;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{n.key=e.string();break}case 2:{n.value=e.string();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("key"))throw o.ProtocolError("missing required 'key'",{instance:n});if(!n.hasOwnProperty("value"))throw o.ProtocolError("missing required 'value'",{instance:n});return n};AppData.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};AppData.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(!o.isString(e.key))return"key: string expected";if(!o.isString(e.value))return"value: string expected";return null};AppData.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.AppData)return e;var t=new a.mcs_proto.AppData;if(e.key!=null)t.key=String(e.key);if(e.value!=null)t.value=String(e.value);return t};AppData.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.key="";r.value=""}if(e.key!=null&&e.hasOwnProperty("key"))r.key=e.key;if(e.value!=null&&e.hasOwnProperty("value"))r.value=e.value;return r};AppData.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};AppData.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.AppData"};return AppData}();e.DataMessageStanza=function(){function DataMessageStanza(e){this.appData=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}DataMessageStanza.prototype.id="";DataMessageStanza.prototype.from="";DataMessageStanza.prototype.to="";DataMessageStanza.prototype.category="";DataMessageStanza.prototype.token="";DataMessageStanza.prototype.appData=o.emptyArray;DataMessageStanza.prototype.fromTrustedServer=false;DataMessageStanza.prototype.persistentId="";DataMessageStanza.prototype.streamId=0;DataMessageStanza.prototype.lastStreamIdReceived=0;DataMessageStanza.prototype.regId="";DataMessageStanza.prototype.deviceUserId=o.Long?o.Long.fromBits(0,0,false):0;DataMessageStanza.prototype.ttl=0;DataMessageStanza.prototype.sent=o.Long?o.Long.fromBits(0,0,false):0;DataMessageStanza.prototype.queued=0;DataMessageStanza.prototype.status=o.Long?o.Long.fromBits(0,0,false):0;DataMessageStanza.prototype.rawData=o.newBuffer([]);DataMessageStanza.prototype.immediateAck=false;DataMessageStanza.create=function create(e){return new DataMessageStanza(e)};DataMessageStanza.encode=function encode(e,t){if(!t)t=s.create();if(e.id!=null&&Object.hasOwnProperty.call(e,"id"))t.uint32(18).string(e.id);t.uint32(26).string(e.from);if(e.to!=null&&Object.hasOwnProperty.call(e,"to"))t.uint32(34).string(e.to);t.uint32(42).string(e.category);if(e.token!=null&&Object.hasOwnProperty.call(e,"token"))t.uint32(50).string(e.token);if(e.appData!=null&&e.appData.length)for(var r=0;r<e.appData.length;++r)a.mcs_proto.AppData.encode(e.appData[r],t.uint32(58).fork()).ldelim();if(e.fromTrustedServer!=null&&Object.hasOwnProperty.call(e,"fromTrustedServer"))t.uint32(64).bool(e.fromTrustedServer);if(e.persistentId!=null&&Object.hasOwnProperty.call(e,"persistentId"))t.uint32(74).string(e.persistentId);if(e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId"))t.uint32(80).int32(e.streamId);if(e.lastStreamIdReceived!=null&&Object.hasOwnProperty.call(e,"lastStreamIdReceived"))t.uint32(88).int32(e.lastStreamIdReceived);if(e.regId!=null&&Object.hasOwnProperty.call(e,"regId"))t.uint32(106).string(e.regId);if(e.deviceUserId!=null&&Object.hasOwnProperty.call(e,"deviceUserId"))t.uint32(128).int64(e.deviceUserId);if(e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl"))t.uint32(136).int32(e.ttl);if(e.sent!=null&&Object.hasOwnProperty.call(e,"sent"))t.uint32(144).int64(e.sent);if(e.queued!=null&&Object.hasOwnProperty.call(e,"queued"))t.uint32(152).int32(e.queued);if(e.status!=null&&Object.hasOwnProperty.call(e,"status"))t.uint32(160).int64(e.status);if(e.rawData!=null&&Object.hasOwnProperty.call(e,"rawData"))t.uint32(170).bytes(e.rawData);if(e.immediateAck!=null&&Object.hasOwnProperty.call(e,"immediateAck"))t.uint32(192).bool(e.immediateAck);return t};DataMessageStanza.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};DataMessageStanza.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.DataMessageStanza;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 2:{n.id=e.string();break}case 3:{n.from=e.string();break}case 4:{n.to=e.string();break}case 5:{n.category=e.string();break}case 6:{n.token=e.string();break}case 7:{if(!(n.appData&&n.appData.length))n.appData=[];n.appData.push(a.mcs_proto.AppData.decode(e,e.uint32()));break}case 8:{n.fromTrustedServer=e.bool();break}case 9:{n.persistentId=e.string();break}case 10:{n.streamId=e.int32();break}case 11:{n.lastStreamIdReceived=e.int32();break}case 13:{n.regId=e.string();break}case 16:{n.deviceUserId=e.int64();break}case 17:{n.ttl=e.int32();break}case 18:{n.sent=e.int64();break}case 19:{n.queued=e.int32();break}case 20:{n.status=e.int64();break}case 21:{n.rawData=e.bytes();break}case 24:{n.immediateAck=e.bool();break}default:e.skipType(s&7);break}}if(!n.hasOwnProperty("from"))throw o.ProtocolError("missing required 'from'",{instance:n});if(!n.hasOwnProperty("category"))throw o.ProtocolError("missing required 'category'",{instance:n});return n};DataMessageStanza.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};DataMessageStanza.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.id!=null&&e.hasOwnProperty("id"))if(!o.isString(e.id))return"id: string expected";if(!o.isString(e.from))return"from: string expected";if(e.to!=null&&e.hasOwnProperty("to"))if(!o.isString(e.to))return"to: string expected";if(!o.isString(e.category))return"category: string expected";if(e.token!=null&&e.hasOwnProperty("token"))if(!o.isString(e.token))return"token: string expected";if(e.appData!=null&&e.hasOwnProperty("appData")){if(!Array.isArray(e.appData))return"appData: array expected";for(var t=0;t<e.appData.length;++t){var r=a.mcs_proto.AppData.verify(e.appData[t]);if(r)return"appData."+r}}if(e.fromTrustedServer!=null&&e.hasOwnProperty("fromTrustedServer"))if(typeof e.fromTrustedServer!=="boolean")return"fromTrustedServer: boolean expected";if(e.persistentId!=null&&e.hasOwnProperty("persistentId"))if(!o.isString(e.persistentId))return"persistentId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId"))if(!o.isInteger(e.streamId))return"streamId: integer expected";if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))if(!o.isInteger(e.lastStreamIdReceived))return"lastStreamIdReceived: integer expected";if(e.regId!=null&&e.hasOwnProperty("regId"))if(!o.isString(e.regId))return"regId: string expected";if(e.deviceUserId!=null&&e.hasOwnProperty("deviceUserId"))if(!o.isInteger(e.deviceUserId)&&!(e.deviceUserId&&o.isInteger(e.deviceUserId.low)&&o.isInteger(e.deviceUserId.high)))return"deviceUserId: integer|Long expected";if(e.ttl!=null&&e.hasOwnProperty("ttl"))if(!o.isInteger(e.ttl))return"ttl: integer expected";if(e.sent!=null&&e.hasOwnProperty("sent"))if(!o.isInteger(e.sent)&&!(e.sent&&o.isInteger(e.sent.low)&&o.isInteger(e.sent.high)))return"sent: integer|Long expected";if(e.queued!=null&&e.hasOwnProperty("queued"))if(!o.isInteger(e.queued))return"queued: integer expected";if(e.status!=null&&e.hasOwnProperty("status"))if(!o.isInteger(e.status)&&!(e.status&&o.isInteger(e.status.low)&&o.isInteger(e.status.high)))return"status: integer|Long expected";if(e.rawData!=null&&e.hasOwnProperty("rawData"))if(!(e.rawData&&typeof e.rawData.length==="number"||o.isString(e.rawData)))return"rawData: buffer expected";if(e.immediateAck!=null&&e.hasOwnProperty("immediateAck"))if(typeof e.immediateAck!=="boolean")return"immediateAck: boolean expected";return null};DataMessageStanza.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.DataMessageStanza)return e;var t=new a.mcs_proto.DataMessageStanza;if(e.id!=null)t.id=String(e.id);if(e.from!=null)t.from=String(e.from);if(e.to!=null)t.to=String(e.to);if(e.category!=null)t.category=String(e.category);if(e.token!=null)t.token=String(e.token);if(e.appData){if(!Array.isArray(e.appData))throw TypeError(".mcs_proto.DataMessageStanza.appData: array expected");t.appData=[];for(var r=0;r<e.appData.length;++r){if(typeof e.appData[r]!=="object")throw TypeError(".mcs_proto.DataMessageStanza.appData: object expected");t.appData[r]=a.mcs_proto.AppData.fromObject(e.appData[r])}}if(e.fromTrustedServer!=null)t.fromTrustedServer=Boolean(e.fromTrustedServer);if(e.persistentId!=null)t.persistentId=String(e.persistentId);if(e.streamId!=null)t.streamId=e.streamId|0;if(e.lastStreamIdReceived!=null)t.lastStreamIdReceived=e.lastStreamIdReceived|0;if(e.regId!=null)t.regId=String(e.regId);if(e.deviceUserId!=null)if(o.Long)(t.deviceUserId=o.Long.fromValue(e.deviceUserId)).unsigned=false;else if(typeof e.deviceUserId==="string")t.deviceUserId=parseInt(e.deviceUserId,10);else if(typeof e.deviceUserId==="number")t.deviceUserId=e.deviceUserId;else if(typeof e.deviceUserId==="object")t.deviceUserId=new o.LongBits(e.deviceUserId.low>>>0,e.deviceUserId.high>>>0).toNumber();if(e.ttl!=null)t.ttl=e.ttl|0;if(e.sent!=null)if(o.Long)(t.sent=o.Long.fromValue(e.sent)).unsigned=false;else if(typeof e.sent==="string")t.sent=parseInt(e.sent,10);else if(typeof e.sent==="number")t.sent=e.sent;else if(typeof e.sent==="object")t.sent=new o.LongBits(e.sent.low>>>0,e.sent.high>>>0).toNumber();if(e.queued!=null)t.queued=e.queued|0;if(e.status!=null)if(o.Long)(t.status=o.Long.fromValue(e.status)).unsigned=false;else if(typeof e.status==="string")t.status=parseInt(e.status,10);else if(typeof e.status==="number")t.status=e.status;else if(typeof e.status==="object")t.status=new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber();if(e.rawData!=null)if(typeof e.rawData==="string")o.base64.decode(e.rawData,t.rawData=o.newBuffer(o.base64.length(e.rawData)),0);else if(e.rawData.length>=0)t.rawData=e.rawData;if(e.immediateAck!=null)t.immediateAck=Boolean(e.immediateAck);return t};DataMessageStanza.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.arrays||t.defaults)r.appData=[];if(t.defaults){r.id="";r.from="";r.to="";r.category="";r.token="";r.fromTrustedServer=false;r.persistentId="";r.streamId=0;r.lastStreamIdReceived=0;r.regId="";if(o.Long){var n=new o.Long(0,0,false);r.deviceUserId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.deviceUserId=t.longs===String?"0":0;r.ttl=0;if(o.Long){var n=new o.Long(0,0,false);r.sent=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.sent=t.longs===String?"0":0;r.queued=0;if(o.Long){var n=new o.Long(0,0,false);r.status=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.status=t.longs===String?"0":0;if(t.bytes===String)r.rawData="";else{r.rawData=[];if(t.bytes!==Array)r.rawData=o.newBuffer(r.rawData)}r.immediateAck=false}if(e.id!=null&&e.hasOwnProperty("id"))r.id=e.id;if(e.from!=null&&e.hasOwnProperty("from"))r.from=e.from;if(e.to!=null&&e.hasOwnProperty("to"))r.to=e.to;if(e.category!=null&&e.hasOwnProperty("category"))r.category=e.category;if(e.token!=null&&e.hasOwnProperty("token"))r.token=e.token;if(e.appData&&e.appData.length){r.appData=[];for(var i=0;i<e.appData.length;++i)r.appData[i]=a.mcs_proto.AppData.toObject(e.appData[i],t)}if(e.fromTrustedServer!=null&&e.hasOwnProperty("fromTrustedServer"))r.fromTrustedServer=e.fromTrustedServer;if(e.persistentId!=null&&e.hasOwnProperty("persistentId"))r.persistentId=e.persistentId;if(e.streamId!=null&&e.hasOwnProperty("streamId"))r.streamId=e.streamId;if(e.lastStreamIdReceived!=null&&e.hasOwnProperty("lastStreamIdReceived"))r.lastStreamIdReceived=e.lastStreamIdReceived;if(e.regId!=null&&e.hasOwnProperty("regId"))r.regId=e.regId;if(e.deviceUserId!=null&&e.hasOwnProperty("deviceUserId"))if(typeof e.deviceUserId==="number")r.deviceUserId=t.longs===String?String(e.deviceUserId):e.deviceUserId;else r.deviceUserId=t.longs===String?o.Long.prototype.toString.call(e.deviceUserId):t.longs===Number?new o.LongBits(e.deviceUserId.low>>>0,e.deviceUserId.high>>>0).toNumber():e.deviceUserId;if(e.ttl!=null&&e.hasOwnProperty("ttl"))r.ttl=e.ttl;if(e.sent!=null&&e.hasOwnProperty("sent"))if(typeof e.sent==="number")r.sent=t.longs===String?String(e.sent):e.sent;else r.sent=t.longs===String?o.Long.prototype.toString.call(e.sent):t.longs===Number?new o.LongBits(e.sent.low>>>0,e.sent.high>>>0).toNumber():e.sent;if(e.queued!=null&&e.hasOwnProperty("queued"))r.queued=e.queued;if(e.status!=null&&e.hasOwnProperty("status"))if(typeof e.status==="number")r.status=t.longs===String?String(e.status):e.status;else r.status=t.longs===String?o.Long.prototype.toString.call(e.status):t.longs===Number?new o.LongBits(e.status.low>>>0,e.status.high>>>0).toNumber():e.status;if(e.rawData!=null&&e.hasOwnProperty("rawData"))r.rawData=t.bytes===String?o.base64.encode(e.rawData,0,e.rawData.length):t.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData;if(e.immediateAck!=null&&e.hasOwnProperty("immediateAck"))r.immediateAck=e.immediateAck;return r};DataMessageStanza.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};DataMessageStanza.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.DataMessageStanza"};return DataMessageStanza}();e.StreamAck=function(){function StreamAck(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}StreamAck.create=function create(e){return new StreamAck(e)};StreamAck.encode=function encode(e,t){if(!t)t=s.create();return t};StreamAck.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};StreamAck.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.StreamAck;while(e.pos<r){var s=e.uint32();switch(s>>>3){default:e.skipType(s&7);break}}return n};StreamAck.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};StreamAck.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";return null};StreamAck.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.StreamAck)return e;return new a.mcs_proto.StreamAck};StreamAck.toObject=function toObject(){return{}};StreamAck.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};StreamAck.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.StreamAck"};return StreamAck}();e.SelectiveAck=function(){function SelectiveAck(e){this.id=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}SelectiveAck.prototype.id=o.emptyArray;SelectiveAck.create=function create(e){return new SelectiveAck(e)};SelectiveAck.encode=function encode(e,t){if(!t)t=s.create();if(e.id!=null&&e.id.length)for(var r=0;r<e.id.length;++r)t.uint32(10).string(e.id[r]);return t};SelectiveAck.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t).ldelim()};SelectiveAck.decode=function decode(e,t){if(!(e instanceof i))e=i.create(e);var r=t===undefined?e.len:e.pos+t,n=new a.mcs_proto.SelectiveAck;while(e.pos<r){var s=e.uint32();switch(s>>>3){case 1:{if(!(n.id&&n.id.length))n.id=[];n.id.push(e.string());break}default:e.skipType(s&7);break}}return n};SelectiveAck.decodeDelimited=function decodeDelimited(e){if(!(e instanceof i))e=new i(e);return this.decode(e,e.uint32())};SelectiveAck.verify=function verify(e){if(typeof e!=="object"||e===null)return"object expected";if(e.id!=null&&e.hasOwnProperty("id")){if(!Array.isArray(e.id))return"id: array expected";for(var t=0;t<e.id.length;++t)if(!o.isString(e.id[t]))return"id: string[] expected"}return null};SelectiveAck.fromObject=function fromObject(e){if(e instanceof a.mcs_proto.SelectiveAck)return e;var t=new a.mcs_proto.SelectiveAck;if(e.id){if(!Array.isArray(e.id))throw TypeError(".mcs_proto.SelectiveAck.id: array expected");t.id=[];for(var r=0;r<e.id.length;++r)t.id[r]=String(e.id[r])}return t};SelectiveAck.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.arrays||t.defaults)r.id=[];if(e.id&&e.id.length){r.id=[];for(var n=0;n<e.id.length;++n)r.id[n]=e.id[n]}return r};SelectiveAck.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,n.util.toJSONOptions)};SelectiveAck.getTypeUrl=function getTypeUrl(e){if(e===undefined){e="type.googleapis.com"}return e+"/mcs_proto.SelectiveAck"};return SelectiveAck}();return e}();e.exports=a},99057:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const i=n(r(10801));const s="https://fcm.googleapis.com/v1/projects/";const o="https://accounts.google.com/o/oauth2/token";const a="accounts.google.com";const c="/o/oauth2/token";const u=60*60;const d="RS256";class PushSender{#F;#K;#V;#H;constructor(e){this.#F=e.project_id;this.#K=e.private_key;this.#V=e.client_email}#q(){const e={scope:["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/firebase.database","https://www.googleapis.com/auth/firebase.messaging","https://www.googleapis.com/auth/identitytoolkit","https://www.googleapis.com/auth/userinfo.email"].join(" ")};const t=r(98574);return t.sign(e,this.#K,{audience:o,expiresIn:u,issuer:this.#V,algorithm:d})}async#W(){if(this.#H&&this.#H.generated_at+this.#H.expires_in>(new Date).getTime())return this.#H;const e=this.#q();const t=await(0,i.default)(`https://${a}${c}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion="+e});const{access_token:r,expires_in:n}=await t.json();this.#H={access_token:r,expires_in:n,generated_at:(new Date).getTime()};return this.#H}async send(e,t){const r=await this.#W();return(0,i.default)(`${s}${this.#F}/messages:send`,{method:"POST",body:JSON.stringify({message:{notification:e,token:t}}),headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`})}).then((async e=>{const t=await e.json();if(t.failure){throw new Error(JSON.stringify(t))}})).catch(console.error)}testMessage(e){return this.send({body:"PushReceiver test message",title:"testMessage"},e)}}t["default"]=PushSender},81153:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.escape=escape;t.toBase64=toBase64;function escape(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBase64(e){return escape(e.toString("base64"))}},86159:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t["default"]=decrypt;const i=n(r(6113));const s=n(r(53075));function decrypt(e,t){const r=e.appData.find((e=>e.key==="crypto-key"));if(!r)throw new Error("crypto-key is missing");const n=e.appData.find((e=>e.key==="encryption"));if(!n)throw new Error("salt is missing");const o=i.default.createECDH("prime256v1");o.setPrivateKey(t.privateKey,"base64");const a={version:"aesgcm",authSecret:t.authSecret,dh:r.value.slice(3),privateKey:o,salt:n.value.slice(5)};const c=s.default.decrypt(e.rawData,a);return JSON.parse(c)}},32549:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});let r=false;t["default"]={setDebug:e=>{r=Boolean(e)},log:(...e)=>{console.log(...e)},debug:(...e)=>{if(r){console.debug(...e)}},warn:(...e)=>{console.warn(...e)},error:console.error}},10801:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.getEndpoint=void 0;t["default"]=requestWithRety;const i=n(r(47462));const s=n(r(32549));const o=15;const a=5;function requestWithRety(e,t,r=3){return retry(0,e,t,r)}async function retry(e=0,t,r,n=3){try{return await fetch(t,r)}catch(c){const u=Math.min(e*a,o);s.default.debug(`Request failed : ${c.message}`);s.default.debug(`Retrying in ${u} seconds`);if(e>=n)throw c;await(0,i.default)(u*1e3);return retry(e+1,t,r)}}const getEndpoint=(e,t,r="")=>`${t.endsWith("/")?t:`${t}/`}projects/${e.firebase.projectId}/${r}`;t.getEndpoint=getEndpoint},47462:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=e=>new Promise((t=>setTimeout(t,e)))},99963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(73837);const i=r(122);var s;(function(e){e[e["UNIVERSAL"]=0]="UNIVERSAL";e[e["APPLICATION"]=64]="APPLICATION";e[e["CONTEXT_SPECIFIC"]=128]="CONTEXT_SPECIFIC";e[e["PRIVATE"]=192]="PRIVATE"})(s=t.Class||(t.Class={}));var o;(function(e){e[e["NONE"]=0]="NONE";e[e["BOOLEAN"]=1]="BOOLEAN";e[e["INTEGER"]=2]="INTEGER";e[e["BITSTRING"]=3]="BITSTRING";e[e["OCTETSTRING"]=4]="OCTETSTRING";e[e["NULL"]=5]="NULL";e[e["OID"]=6]="OID";e[e["ENUMERATED"]=10]="ENUMERATED";e[e["UTF8"]=12]="UTF8";e[e["SEQUENCE"]=16]="SEQUENCE";e[e["SET"]=17]="SET";e[e["NUMERICSTRING"]=18]="NUMERICSTRING";e[e["PRINTABLESTRING"]=19]="PRINTABLESTRING";e[e["T61STRING"]=20]="T61STRING";e[e["IA5STRING"]=22]="IA5STRING";e[e["UTCTIME"]=23]="UTCTIME";e[e["GENERALIZEDTIME"]=24]="GENERALIZEDTIME";e[e["GENERALSTRING"]=27]="GENERALSTRING"})(o=t.Tag||(t.Tag={}));class BitString{constructor(e,t){this.buf=e;this.bitLen=t}at(e){if(e<0||e>=this.bitLen||!Number.isInteger(e)){return 0}const t=Math.floor(e/8);const r=7-e%8;return this.buf[t]>>r&1}rightAlign(){const e=8-this.bitLen%8;if(e===8||this.buf.length===0){return this.buf}const t=Buffer.alloc(this.buf.length);t[0]=this.buf[0]>>e;for(let r=1;r<this.buf.length;r++){t[r]=this.buf[r-1]<<8-e;t[r]|=this.buf[r]>>e}return t}}t.BitString=BitString;class ASN1{static Bool(e){const t=new ASN1(s.UNIVERSAL,o.BOOLEAN,Buffer.from([e?255:0]));t._value=e;return t}static parseBool(e){if(!(e instanceof Buffer)||e.length!==1){throw new Error("ASN1 syntax error: invalid boolean")}switch(e[0]){case 0:return false;case 255:return true;default:throw new Error("ASN1 syntax error: invalid boolean")}}static Integer(e){if(e instanceof Buffer){const t=new ASN1(s.UNIVERSAL,o.INTEGER,e);t._value=e.toString("hex");return t}if(!Number.isSafeInteger(e)){throw new Error("ASN1 syntax error: invalid integer")}let t;if(e>=-128&&e<128){t=Buffer.alloc(1);t.writeInt8(e,0)}else if(e>=-32768&&e<32768){t=Buffer.alloc(2);t.writeIntBE(e,0,2)}else if(e>=-8388608&&e<8388608){t=Buffer.alloc(3);t.writeIntBE(e,0,3)}else if(e>=-2147483648&&e<2147483648){t=Buffer.alloc(4);t.writeIntBE(e,0,4)}else if(e>=-549755813888&&e<549755813888){t=Buffer.alloc(5);t.writeIntBE(e,0,5)}else if(e>=-0x800000000000&&e<0x800000000000){t=Buffer.alloc(6);t.writeIntBE(e,0,6)}else{throw new Error("ASN1 syntax error: invalid Integer")}const r=new ASN1(s.UNIVERSAL,o.INTEGER,t);r._value=e;return r}static parseInteger(e){if(!(e instanceof Buffer)||e.length===0){throw new Error("ASN1 syntax error: invalid Integer")}if(e.length>6){return e.toString("hex")}return e.readIntBE(0,e.length)}static parseIntegerNum(e){const t=ASN1.parseInteger(e);if(typeof t!=="number"){throw new Error("ASN1 syntax error: invalid Integer number")}return t}static parseIntegerStr(e){const t=ASN1.parseInteger(e);if(typeof t==="number"){return t.toString(16)}return t}static BitString(e){if(e instanceof Buffer){e=new BitString(e,e.length*8)}const t=e.buf.length*8-e.bitLen;const r=Buffer.alloc(e.buf.length+1);r.writeInt8(t,0);e.buf.copy(r,1);return new ASN1(s.UNIVERSAL,o.BITSTRING,r)}static parseBitString(e){if(!(e instanceof Buffer)||e.length===0){throw new Error("ASN1 syntax error: invalid BitString")}const t=e[0];if(t>7||e.length===1&&t>0||(e[e.length-1]&(1<<e[0])-1)!==0){throw new Error("ASN1 syntax error: invalid padding bits in BIT STRING")}return new BitString(e.slice(1),(e.length-1)*8-t)}static Null(){const e=new ASN1(s.UNIVERSAL,o.NULL,Buffer.alloc(0));e._value=null;return e}static parseNull(e){if(!(e instanceof Buffer)||e.length!==0){throw new Error("ASN1 syntax error: invalid null")}return null}static OID(e){const t=e.split(".");if(t.length===0){throw new Error("ASN1 syntax error: invalid Object Identifier")}const r=[];r.push(40*mustParseInt(t[0])+mustParseInt(t[1]));const n=[];for(let e=2;e<t.length;++e){let i=mustParseInt(t[e]);n.length=0;n.push(i&127);while(i>127){i=i>>>7;n.unshift(i&127|128)}r.push(...n)}const i=new ASN1(s.UNIVERSAL,o.OID,Buffer.from(r));i._value=e;return i}static parseOID(e){if(!(e instanceof Buffer)||e.length===0){throw new Error("ASN1 syntax error: invalid OID")}let t=Math.floor(e[0]/40)+"."+e[0]%40;let r=0;for(let n=1;n<e.length;n++){if(e[n]>=128){r+=e[n]&127;r=r<<7}else{t+="."+(r+e[n]);r=0}}return t}static UTF8(e){const t=new ASN1(s.UNIVERSAL,o.UTF8,Buffer.from(e,"utf8"));t._value=e;return t}static parseUTF8(e){if(!(e instanceof Buffer)){throw new Error("parse ASN1 error: invalid Buffer")}return e.toString("utf8")}static NumericString(e){if(!isNumericString(e)){throw new Error("ASN1 syntax error: invalid NumericString")}const t=new ASN1(s.UNIVERSAL,o.NUMERICSTRING,Buffer.from(e,"utf8"));t._value=e;return t}static parseNumericString(e){if(!(e instanceof Buffer)){throw new Error("parse ASN1 error: invalid Buffer")}const t=e.toString("utf8");if(!isNumericString(t)){throw new Error("ASN1 syntax error: invalid NumericString")}return t}static PrintableString(e){const t=new ASN1(s.UNIVERSAL,o.PRINTABLESTRING,Buffer.from(e,"utf8"));t._value=e;return t}static parsePrintableString(e){if(!(e instanceof Buffer)){throw new Error("parse ASN1 error: invalid Buffer")}return e.toString("utf8")}static IA5String(e){if(!isIA5String(e)){throw new Error("ASN1 syntax error: invalid IA5String")}const t=new ASN1(s.UNIVERSAL,o.IA5STRING,Buffer.from(e,"utf8"));t._value=e;return t}static parseIA5String(e){if(!(e instanceof Buffer)){throw new Error("parse ASN1 error: invalid Buffer")}const t=e.toString("utf8");if(!isIA5String(t)){throw new Error("ASN1 syntax error: invalid IA5String")}return t}static T61String(e){const t=new ASN1(s.UNIVERSAL,o.T61STRING,Buffer.from(e,"utf8"));t._value=e;return t}static parseT61String(e){if(!(e instanceof Buffer)){throw new Error("parse ASN1 error: invalid Buffer")}return e.toString("utf8")}static GeneralString(e){const t=new ASN1(s.UNIVERSAL,o.GENERALSTRING,Buffer.from(e,"utf8"));t._value=e;return t}static parseGeneralString(e){if(!(e instanceof Buffer)){throw new Error("parse ASN1 error: invalid Buffer")}return e.toString("utf8")}static UTCTime(e){let t="";const r=[];r.push((""+e.getUTCFullYear()).substr(2));r.push(""+(e.getUTCMonth()+1));r.push(""+e.getUTCDate());r.push(""+e.getUTCHours());r.push(""+e.getUTCMinutes());r.push(""+e.getUTCSeconds());for(const e of r){if(e.length<2){t+="0"}t+=e}t+="Z";const n=new ASN1(s.UNIVERSAL,o.UTCTIME,Buffer.from(t,"utf8"));n._value=e;return n}static parseUTCTime(e){if(!(e instanceof Buffer)||e.length===0){throw new Error("ASN1 syntax error: invalid UTC Time")}const t=e.toString("utf8");const r=new Date;let n=mustParseInt(t.substr(0,2));n=n>=50?1900+n:2e3+n;const i=mustParseInt(t.substr(2,2))-1;const s=mustParseInt(t.substr(4,2));const o=mustParseInt(t.substr(6,2));const a=mustParseInt(t.substr(8,2));let c=0;let u=0;let d="";if(t.length>11){u=10;d=t.charAt(u);if(d!=="+"&&d!=="-"){c=mustParseInt(t.substr(10,2));u+=2}}r.setUTCFullYear(n,i,s);r.setUTCHours(o,a,c,0);if(u>0){d=t.charAt(u);if(d==="+"||d==="-"){const e=mustParseInt(t.substr(u+1,2));const n=mustParseInt(t.substr(u+4,2));let i=e*60+n;i*=6e4;if(d==="+"){r.setTime(+r-i)}else{r.setTime(+r+i)}}}return r}static GeneralizedTime(e){let t="";const r=[];r.push(""+e.getUTCFullYear());r.push(""+(e.getUTCMonth()+1));r.push(""+e.getUTCDate());r.push(""+e.getUTCHours());r.push(""+e.getUTCMinutes());r.push(""+e.getUTCSeconds());for(const e of r){if(e.length<2){t+="0"}t+=e}t+="Z";const n=new ASN1(s.UNIVERSAL,o.GENERALIZEDTIME,Buffer.from(t,"utf8"));n._value=e;return n}static parseGeneralizedTime(e){if(!(e instanceof Buffer)||e.length===0){throw new Error("ASN1 syntax error: invalid Generalized Time")}const t=e.toString("utf8");const r=new Date;const n=mustParseInt(t.substr(0,4));const i=mustParseInt(t.substr(4,2))-1;const s=mustParseInt(t.substr(6,2));const o=mustParseInt(t.substr(8,2));const a=mustParseInt(t.substr(10,2));const c=mustParseInt(t.substr(12,2));let u=0;let d=0;let p=false;if(t.charAt(t.length-1)==="Z"){p=true}const m=t.length-5;const y=t.charAt(m);if(y==="+"||y==="-"){const e=mustParseInt(t.substr(m+1,2));const r=mustParseInt(t.substr(m+4,2));d=e*60+r;d*=6e4;if(y==="+"){d*=-1}p=true}if(t.charAt(14)==="."){u=parseFloat(t.substr(14))*1e3}if(p){r.setUTCFullYear(n,i,s);r.setUTCHours(o,a,c,u);r.setTime(+r+d)}else{r.setFullYear(n,i,s);r.setHours(o,a,c,u)}return r}static parseTime(e,t){switch(e){case o.UTCTIME:return ASN1.parseUTCTime(t);case o.GENERALIZEDTIME:return ASN1.parseGeneralizedTime(t);default:throw new Error("Invalid ASN1 time tag")}}static Set(e){const t=new ASN1(s.UNIVERSAL,o.SET,Buffer.concat(e.map((e=>e.toDER()))));t._value=e;return t}static Seq(e){const t=new ASN1(s.UNIVERSAL,o.SEQUENCE,Buffer.concat(e.map((e=>e.toDER()))));t._value=e;return t}static Spec(e,t,r=true){const n=Array.isArray(t)?Buffer.concat(t.map((e=>e.toDER()))):t.toDER();if(Array.isArray(t)){r=true}const i=new ASN1(s.CONTEXT_SPECIFIC,e,n,r);i._value=t;return i}static fromDER(e,t=false){return ASN1._fromDER(new i.BufferVisitor(e),t)}static parseDER(e,t,r){const n=ASN1._fromDER(new i.BufferVisitor(e),false);if(n.class!==t&&n.tag!==r){throw new Error(`invalid ASN.1 DER for class ${t} and tag ${r}`)}return n}static parseDERWithTemplate(e,t){const r=ASN1._fromDER(new i.BufferVisitor(e),true);const n={};const s=r.validate(t,n);if(s!=null){s.data=r;throw s}return n}static _parseCompound(e,t){const r=[];const n=e.length;const s=new i.BufferVisitor(e);let o=0;while(o<n){const e=s.end;r.push(ASN1._fromDER(s,t));o+=s.end-e}return r}static _fromDER(e,t){if(!(e.buf instanceof Buffer)||e.length===0){throw new Error("ASN1 syntax error: invalid Generalized Time")}e.mustWalk(1,"Too few bytes to read ASN.1 tag.");const r=e.start;const n=e.buf[r];const i=n&192;const s=n&31;const a=getValueLength(e);e.mustHas(a);if(a!==0&&s===o.NULL){throw new Error("invalid value length or NULL tag.")}e.mustWalk(a);const c=(n&32)===32;const u=new ASN1(i,s,e.buf.slice(e.start,e.end),c);if(c&&t){u._value=ASN1._parseCompound(u.bytes,t)}u._der=e.buf.slice(r,e.end);return u}constructor(e,t,r,n=false){this.class=e;this.tag=t;this.bytes=r;this.isCompound=n||t===o.SEQUENCE||t===o.SET;this._value=undefined;this._der=null}get value(){if(this._value===undefined){this._value=this.valueOf()}return this._value}get DER(){if(this._der==null){this._der=this.toDER()}return this._der}mustCompound(e="asn1 object value is not compound"){if(!this.isCompound||!Array.isArray(this.value)){const t=new Error(e);t.data=this.toJSON();throw t}return this.value}equals(e){if(!(e instanceof ASN1)){return false}if(this.class!==e.class||this.tag!==e.tag||this.isCompound!==e.isCompound){return false}if(!this.bytes.equals(e.bytes)){return false}return true}toDER(){let e=this.class|this.tag;if(this.isCompound){e|=32}const t=getValueLengthByte(this.bytes.length);const r=Buffer.allocUnsafe(2+t+this.bytes.length);r.writeInt8(e,0);if(t===0){r.writeUInt8(this.bytes.length,1);this.bytes.copy(r,2)}else{r.writeUInt8(t|128,1);r.writeUIntBE(this.bytes.length,2,t);this.bytes.copy(r,2+t)}return r}valueOf(){if(this.isCompound){return ASN1._parseCompound(this.bytes,false)}if(this.class!==s.UNIVERSAL){return this.bytes}switch(this.tag){case o.BOOLEAN:return ASN1.parseBool(this.bytes);case o.INTEGER:return ASN1.parseInteger(this.bytes);case o.BITSTRING:return ASN1.parseBitString(this.bytes);case o.NULL:return ASN1.parseNull(this.bytes);case o.OID:return ASN1.parseOID(this.bytes);case o.UTF8:return ASN1.parseUTF8(this.bytes);case o.NUMERICSTRING:return ASN1.parseNumericString(this.bytes);case o.PRINTABLESTRING:return ASN1.parsePrintableString(this.bytes);case o.T61STRING:return ASN1.parseT61String(this.bytes);case o.IA5STRING:return ASN1.parseIA5String(this.bytes);case o.GENERALSTRING:return ASN1.parseGeneralString(this.bytes);case o.UTCTIME:return ASN1.parseUTCTime(this.bytes);case o.GENERALIZEDTIME:return ASN1.parseGeneralizedTime(this.bytes);default:return this.bytes}}validate(e,t={}){if(this.class!==e.class){return new Error(`ASN.1 object validate failure for ${e.name} : error class ${s[this.class]}`)}const r=Array.isArray(e.tag)?e.tag:[e.tag];if(!r.includes(this.tag)){return new Error(`ASN.1 object validate failure for ${e.name}: error tag ${o[this.tag]}`)}if(e.capture!=null){t[e.capture]=this}if(Array.isArray(e.value)){const r=this.mustCompound(`${e.name} need compound ASN1 value`);for(let n=0,i=0;n<e.value.length;n++){if(r[i]!=null){const s=r[i].validate(e.value[n],t);if(s==null){i++}else if(e.value[n].optional!==true){return s}}else if(e.value[n].optional!==true){return new Error(`ASN.1 object validate failure for ${e.value[n].name}: not exists`)}}}else if(e.value!=null){const r=this.tag===o.BITSTRING?this.bytes.slice(1):this.bytes;return ASN1.fromDER(r).validate(e.value,t)}return null}toJSON(){let e=this.value;if(Array.isArray(e)){e=e.map((e=>e.toJSON()))}return{class:s[this.class],tag:this.class===s.UNIVERSAL?o[this.tag]:this.tag,value:e}}[n.inspect.custom](e,t){if(t.depth<=2){t.depth=10}return`<${this.constructor.name} ${n.inspect(this.toJSON(),t)}>`}}t.ASN1=ASN1;function getValueLength(e){e.mustWalk(1,"Too few bytes to read ASN.1 value length.");const t=e.buf[e.start];if((t&128)===0){return t}const r=t&127;e.mustWalk(r,"Too few bytes to read ASN.1 value length.");return e.buf.readUIntBE(e.start,r)}function getValueLengthByte(e){if(e<=127){return 0}else if(e<=255){return 1}else if(e<=65535){return 2}else if(e<=16777215){return 3}else if(e<=4294967295){return 4}else if(e<=0xffffffffff){return 5}else if(e<=0xffffffffffff){return 6}else{throw new Error("invalid value length")}}function isNumericString(e){for(const t of e){const e=t.charCodeAt(0);if(e!==32&&(e<48||e>57)){return false}}return true}function isIA5String(e){for(const t of e){if(t.charCodeAt(0)>=128){return false}}return true}function mustParseInt(e,t=10){const r=parseInt(e,t);if(Number.isNaN(r)){throw new Error(`Invalid numeric string "${e}" in radix ${t}.`)}return r}},122:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});class BufferVisitor{constructor(e,t=0,r=0){this.start=t;this.end=r>t?r:t;this.buf=e}get length(){return this.buf.length}reset(e=0,t=0){this.start=e;if(t>=this.start){this.end=t}else if(this.end<this.start){this.end=this.start}return this}walk(e){this.start=this.end;this.end+=e;return this}mustHas(e,t="Too few bytes to parse."){const r=this.end+e;if(r>this.buf.length){const e=new Error(t);e.available=this.buf.length;e.requested=r;throw e}this.walk(0);return this}mustWalk(e,t){this.mustHas(e,t);this.walk(e);return this}}t.BufferVisitor=BufferVisitor},7235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(122);t.BufferVisitor=n.BufferVisitor;var i=r(52040);t.PEM=i.PEM;var s=r(99963);t.ASN1=s.ASN1;t.Class=s.Class;t.Tag=s.Tag;t.BitString=s.BitString},52040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(73837);const i=64;const s="-----BEGIN ";const o="-----END ";const a="-----";const c="Proc-Type";class PEM{static parse(e){const t=[];const r=e.toString("utf8").split("\n").map((e=>e.trim())).filter((e=>e!==""&&!e.startsWith("#")));while(r.length>0){t.push(parse(r))}if(t.length===0){throw new Error("PEM: no block")}return t}constructor(e,t){this.type=e;this.body=t;this.headers=Object.create(null)}get procType(){return this.getHeader(c)}getHeader(e){const t=this.headers[e];return t==null?"":t}setHeader(e,t){if(e.includes(":")){throw new Error("pem: cannot encode a header key that contains a colon")}if(e===""||t===""){throw new Error("pem: invalid header key or value")}this.headers[e]=t}toString(){let e=s+this.type+a+"\n";const t=Object.keys(this.headers);if(t.length>0){const r=this.procType;if(r!==""){e+=`${c}: ${r}\n`}t.sort();for(const r of t){if(r!==c){e+=`${r}: ${this.headers[r]}\n`}}e+="\n"}const r=this.body.toString("base64");let n=0;while(n<r.length){e+=r.slice(n,n+i)+"\n";n+=i}e+=o+this.type+a+"\n";return e}toBuffer(){return Buffer.from(this.toString(),"utf8")}valueOf(){return this.body}toJSON(){return{type:this.type,body:this.body,headers:this.headers}}[n.inspect.custom](e,t){return`<${this.constructor.name} ${n.inspect(this.toJSON(),t)}>`}}t.PEM=PEM;function parse(e){let t=e.shift();if(t==null||!t.startsWith(s)||!t.endsWith(a)){throw new Error("pem: invalid BEGIN line")}const r=t.slice(s.length,t.length-a.length);if(r===""){throw new Error("pem: invalid type")}const n=[];t=e.shift();while(t!=null&&t.includes(": ")){const r=t.split(": ");if(r.length!==2||r[0]===""||r[1]===""){throw new Error("pem: invalid Header line")}n.push(r);t=e.shift()}let i="";while(t!=null&&!t.startsWith(o)){i+=t;t=e.shift()}if(t==null||t!==`${o}${r}${a}`){throw new Error("pem: invalid END line")}const c=new PEM(r,Buffer.from(i,"base64"));if(i===""||c.body.toString("base64")!==i){throw new Error("pem: invalid base64 body")}for(const e of n){c.setHeader(e[0],e[1])}return c}},35229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(41808);function bytesFromIP(e){switch(n.isIP(e)){case 4:return Buffer.from(e.split(".").map((e=>parseInt(e,10))));case 6:const t=e.split(":");const r=Buffer.alloc(16);let n=0;if(t[t.length-1]===""){t[t.length-1]="0"}for(let e=0;e<t.length;e++){if(t[e]===""){if(e+1<t.length&&t[e+1]!==""){n=16-(t.length-e-1)*2}continue}r.writeUInt16BE(parseInt(t[e],16),n);n+=2}return r;default:return null}}t.bytesFromIP=bytesFromIP;function bytesToIP(e){switch(e.length){case 4:return[e[0],e[1],e[2],e[3]].join(".");case 16:const t=[];let r=-1;let n=0;let i=-1;let s=0;for(let o=0;o<e.length;o+=2){const a=e[o]<<8|e[o+1];if(a===0){n++;if(r===-1){r=t.length}if(n>s){s=n;i=r}}else{r=-1;n=0}t.push(a.toString(16))}if(s>0){let e="";const r=t.slice(i+s);t.length=i;if(t.length===0){e+=":"}if(r.length===0){e+=":"}t.push(e,...r)}return t.join(":");default:return""}}t.bytesToIP=bytesToIP;const i=Object.create(null);const s=/^[0-9.]+$/;function getOID(e){if(s.test(e)&&i[e]!==""){return e}return i[e]==null?"":i[e]}t.getOID=getOID;function getOIDName(e){if(!s.test(e)&&i[e]!==""){return e}return i[e]==null?e:i[e]}t.getOIDName=getOIDName;function initOID(e,t){i[e]=t;i[t]=e}initOID("1.2.840.113549.1.1.1","rsaEncryption");initOID("1.2.840.113549.1.1.4","md5WithRsaEncryption");initOID("1.2.840.113549.1.1.5","sha1WithRsaEncryption");initOID("1.2.840.113549.1.1.8","mgf1");initOID("1.2.840.113549.1.1.10","RSASSA-PSS");initOID("1.2.840.113549.1.1.11","sha256WithRsaEncryption");initOID("1.2.840.113549.1.1.12","sha384WithRsaEncryption");initOID("1.2.840.113549.1.1.13","sha512WithRsaEncryption");initOID("1.2.840.10045.2.1","ecEncryption");initOID("1.2.840.10045.4.1","ecdsaWithSha1");initOID("1.2.840.10045.4.3.2","ecdsaWithSha256");initOID("1.2.840.10045.4.3.3","ecdsaWithSha384");initOID("1.2.840.10045.4.3.4","ecdsaWithSha512");initOID("1.2.840.10040.4.3","dsaWithSha1");initOID("2.16.840.1.101.3.4.3.2","dsaWithSha256");initOID("1.3.14.3.2.7","desCBC");initOID("1.3.14.3.2.26","sha1");initOID("2.16.840.1.101.3.4.2.1","sha256");initOID("2.16.840.1.101.3.4.2.2","sha384");initOID("2.16.840.1.101.3.4.2.3","sha512");initOID("1.2.840.113549.2.5","md5");initOID("1.3.101.110","X25519");initOID("1.3.101.111","X448");initOID("1.3.101.112","Ed25519");initOID("1.3.101.113","Ed448");initOID("1.2.840.113549.1.7.1","data");initOID("1.2.840.113549.1.7.2","signedData");initOID("1.2.840.113549.1.7.3","envelopedData");initOID("1.2.840.113549.1.7.4","signedAndEnvelopedData");initOID("1.2.840.113549.1.7.5","digestedData");initOID("1.2.840.113549.1.7.6","encryptedData");initOID("1.2.840.113549.1.9.1","emailAddress");initOID("1.2.840.113549.1.9.2","unstructuredName");initOID("1.2.840.113549.1.9.3","contentType");initOID("1.2.840.113549.1.9.4","messageDigest");initOID("1.2.840.113549.1.9.5","signingTime");initOID("1.2.840.113549.1.9.6","counterSignature");initOID("1.2.840.113549.1.9.7","challengePassword");initOID("1.2.840.113549.1.9.8","unstructuredAddress");initOID("1.2.840.113549.1.9.14","extensionRequest");initOID("1.2.840.113549.1.9.20","friendlyName");initOID("1.2.840.113549.1.9.21","localKeyId");initOID("1.2.840.113549.1.9.22.1","x509Certificate");initOID("1.2.840.113549.1.12.10.1.1","keyBag");initOID("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");initOID("1.2.840.113549.1.12.10.1.3","certBag");initOID("1.2.840.113549.1.12.10.1.4","crlBag");initOID("1.2.840.113549.1.12.10.1.5","secretBag");initOID("1.2.840.113549.1.12.10.1.6","safeContentsBag");initOID("1.2.840.113549.1.5.13","pkcs5PBES2");initOID("1.2.840.113549.1.5.12","pkcs5PBKDF2");initOID("1.2.840.113549.2.7","hmacWithSha1");initOID("1.2.840.113549.2.9","hmacWithSha256");initOID("1.2.840.113549.2.10","hmacWithSha384");initOID("1.2.840.113549.2.11","hmacWithSha512");initOID("1.2.840.113549.3.7","3desCBC");initOID("2.16.840.1.101.3.4.1.2","aesCBC128");initOID("2.16.840.1.101.3.4.1.42","aesCBC256");initOID("2.5.4.3","commonName");initOID("2.5.4.5","serialName");initOID("2.5.4.6","countryName");initOID("2.5.4.7","localityName");initOID("2.5.4.8","stateOrProvinceName");initOID("2.5.4.10","organizationName");initOID("2.5.4.11","organizationalUnitName");initOID("2.5.4.15","businessCategory");initOID("2.16.840.1.113730.1.1","nsCertType");initOID("2.5.29.2","keyAttributes");initOID("2.5.29.4","keyUsageRestriction");initOID("2.5.29.6","subtreesConstraint");initOID("2.5.29.9","subjectDirectoryAttributes");initOID("2.5.29.14","subjectKeyIdentifier");initOID("2.5.29.15","keyUsage");initOID("2.5.29.16","privateKeyUsagePeriod");initOID("2.5.29.17","subjectAltName");initOID("2.5.29.18","issuerAltName");initOID("2.5.29.19","basicConstraints");initOID("2.5.29.20","cRLNumber");initOID("2.5.29.21","cRLReason");initOID("2.5.29.22","expirationDate");initOID("2.5.29.23","instructionCode");initOID("2.5.29.24","invalidityDate");initOID("2.5.29.27","deltaCRLIndicator");initOID("2.5.29.28","issuingDistributionPoint");initOID("2.5.29.29","certificateIssuer");initOID("2.5.29.30","nameConstraints");initOID("2.5.29.31","cRLDistributionPoints");initOID("2.5.29.32","certificatePolicies");initOID("2.5.29.33","policyMappings");initOID("2.5.29.35","authorityKeyIdentifier");initOID("2.5.29.36","policyConstraints");initOID("2.5.29.37","extKeyUsage");initOID("2.5.29.46","freshestCRL");initOID("2.5.29.54","inhibitAnyPolicy");initOID("1.3.6.1.4.1.311.60.2.1.2","jurisdictionST");initOID("1.3.6.1.4.1.311.60.2.1.3","jurisdictionC");initOID("1.3.6.1.4.1.11129.2.4.2","timestampList");initOID("1.3.6.1.5.5.7.1.1","authorityInfoAccess");initOID("1.3.6.1.5.5.7.3.1","serverAuth");initOID("1.3.6.1.5.5.7.3.2","clientAuth");initOID("1.3.6.1.5.5.7.3.3","codeSigning");initOID("1.3.6.1.5.5.7.3.4","emailProtection");initOID("1.3.6.1.5.5.7.3.8","timeStamping");initOID("1.3.6.1.5.5.7.48.1","authorityInfoAccessOcsp");initOID("1.3.6.1.5.5.7.48.2","authorityInfoAccessIssuers")},93208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(35229);t.bytesFromIP=n.bytesFromIP;t.bytesToIP=n.bytesToIP;t.getOID=n.getOID;t.getOIDName=n.getOIDName;var i=r(30843);t.PublicKey=i.PublicKey;t.PrivateKey=i.PrivateKey;t.RSAPublicKey=i.RSAPublicKey;t.RSAPrivateKey=i.RSAPrivateKey;var s=r(83517);t.Certificate=s.Certificate;t.DistinguishedName=s.DistinguishedName},30843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(73837);const i=r(6113);const s=r(77492);const o=r(7235);const a=r(35229);t.publicKeyValidator={name:"PublicKeyInfo",class:o.Class.UNIVERSAL,tag:o.Tag.SEQUENCE,capture:"publicKeyInfo",value:[{name:"PublicKeyInfo.AlgorithmIdentifier",class:o.Class.UNIVERSAL,tag:o.Tag.SEQUENCE,value:[{name:"PublicKeyAlgorithmIdentifier.algorithm",class:o.Class.UNIVERSAL,tag:o.Tag.OID,capture:"publicKeyOID"}]},{name:"PublicKeyInfo.PublicKey",class:o.Class.UNIVERSAL,tag:o.Tag.BITSTRING,capture:"publicKey"}]};t.privateKeyValidator={name:"PrivateKeyInfo",class:o.Class.UNIVERSAL,tag:o.Tag.SEQUENCE,capture:"privateKeyInfo",value:[{name:"PrivateKeyInfo.Version",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.AlgorithmIdentifier",class:o.Class.UNIVERSAL,tag:o.Tag.SEQUENCE,value:[{name:"PrivateKeyAlgorithmIdentifier.algorithm",class:o.Class.UNIVERSAL,tag:o.Tag.OID,capture:"privateKeyOID"}]},{name:"PrivateKeyInfo.PrivateKey",class:o.Class.UNIVERSAL,tag:o.Tag.OCTETSTRING,capture:"privateKey"}]};const c={name:"RSAPublicKey",class:o.Class.UNIVERSAL,tag:o.Tag.SEQUENCE,value:[{name:"RSAPublicKey.modulus",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"publicKeyExponent"}]};const u={name:"RSAPrivateKey",class:o.Class.UNIVERSAL,tag:o.Tag.SEQUENCE,value:[{name:"RSAPrivateKey.version",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",class:o.Class.UNIVERSAL,tag:o.Tag.INTEGER,capture:"privateKeyCoefficient"}]};const d=[a.getOID("X25519"),a.getOID("X448"),a.getOID("Ed25519"),a.getOID("Ed448")];class PublicKey{constructor(e){const r={};const n=e.validate(t.publicKeyValidator,r);if(n!=null){throw new Error("Cannot read X.509 public key: "+n.message)}this.oid=o.ASN1.parseOID(r.publicKeyOID.bytes);this.algo=a.getOIDName(this.oid);this._pkcs8=e;this._keyRaw=o.ASN1.parseBitString(r.publicKey.bytes).buf;this._finalKey=this._keyRaw;this._finalPEM=""}static fromPEM(e){const t=o.PEM.parse(e)[0];if(t.procType.includes("ENCRYPTED")){throw new Error("Could not convert public key from PEM, PEM is encrypted.")}const r=o.ASN1.fromDER(t.body,true);switch(t.type){case"PUBLIC KEY":return new PublicKey(r);case"RSA PUBLIC KEY":const e=o.ASN1.Seq([o.ASN1.Seq([o.ASN1.OID(a.getOID("rsaEncryption")),o.ASN1.Null()]),o.ASN1.BitString(r.DER)]);return new PublicKey(e);default:throw new Error("Could not convert public key from PEM, recommend PKCS#8 PEM")}}static addVerifier(e,t){e=a.getOID(e);if(e===""){throw new Error(`Invalid object identifier: ${e}`)}if(PublicKey._verifiers[e]!=null){throw new Error(`Verifier ${e} exists`)}PublicKey._verifiers[e]=t}get keyRaw(){return this._finalKey}verify(e,t,r){const n=PublicKey._verifiers[this.oid];if(n!=null){const s=i.createHash(r).update(e).digest();return n.call(this,s,t)}const s=i.createVerify(r);s.update(e);return s.verify(this.toPEM(),t)}getFingerprint(e,t="PublicKey"){let r;switch(t){case"PublicKeyInfo":r=this._pkcs8.DER;break;case"PublicKey":r=this._keyRaw;break;default:throw new Error(`Unknown fingerprint type "${t}".`)}const n=i.createHash(e);n.update(r);return n.digest()}toASN1(){return this._pkcs8}toDER(){return this._pkcs8.DER}toPEM(){if(this._finalPEM===""){this._finalPEM=new o.PEM("PUBLIC KEY",this._pkcs8.DER).toString()}return this._finalPEM}toJSON(){return{oid:this.oid,algo:this.algo,publicKey:this._keyRaw}}[n.inspect.custom](e,t){return`<${this.constructor.name} ${n.inspect(this.toJSON(),t)}>`}}PublicKey._verifiers=Object.create(null);t.PublicKey=PublicKey;class PrivateKey{constructor(e){const r=Object.create(null);const n=e.validate(t.privateKeyValidator,r);if(n!=null){throw new Error("Cannot read X.509 private key: "+n.message)}this.version=o.ASN1.parseIntegerNum(r.privateKeyVersion.bytes)+1;this.oid=o.ASN1.parseOID(r.privateKeyOID.bytes);this.algo=a.getOIDName(this.oid);this._pkcs8=e;this._keyRaw=r.privateKey.bytes;this._publicKeyRaw=null;this._finalKey=this._keyRaw;this._finalPEM="";if(d.includes(this.oid)){this._finalKey=this._keyRaw=o.ASN1.parseDER(this._keyRaw,o.Class.UNIVERSAL,o.Tag.OCTETSTRING).bytes;if(this.oid==="1.3.101.112"){const e=s.sign.keyPair.fromSeed(this._keyRaw);this._publicKeyRaw=Buffer.from(e.publicKey);this._finalKey=Buffer.from(e.secretKey)}else if(this.version===2){for(const t of e.mustCompound()){if(t.class===o.Class.CONTEXT_SPECIFIC&&t.tag===1){this._publicKeyRaw=o.ASN1.parseBitString(t.bytes).buf;this._finalKey=Buffer.concat([this._keyRaw,this._publicKeyRaw])}}}}}static fromPEM(e){const t=o.PEM.parse(e)[0];if(t.procType.includes("ENCRYPTED")){throw new Error("Could not convert private key from PEM, PEM is encrypted.")}let r=o.ASN1.fromDER(t.body,true);switch(t.type){case"PRIVATE KEY":return new PrivateKey(r);case"RSA PRIVATE KEY":r=o.ASN1.Seq([r.value[0],o.ASN1.Seq([o.ASN1.OID(a.getOID("rsaEncryption")),o.ASN1.Null()]),new o.ASN1(o.Class.UNIVERSAL,o.Tag.OCTETSTRING,r.DER)]);return new PrivateKey(r);default:throw new Error("Could not convert private key from PEM, recommend PKCS#8 PEM")}}static addSigner(e,t){e=a.getOID(e);if(e===""){throw new Error(`Invalid object identifier: ${e}`)}if(PrivateKey._signers[e]!=null){throw new Error(`Signer ${e} exists`)}PrivateKey._signers[e]=t}get keyRaw(){return this._finalKey}get publicKeyRaw(){return this._publicKeyRaw}sign(e,t){const r=PrivateKey._signers[this.oid];if(r!=null){const n=i.createHash(t).update(e).digest();return r.call(this,n)}const n=i.createSign(t);n.update(e);return n.sign(this.toPEM())}toASN1(){return this._pkcs8}toDER(){return this._pkcs8.DER}toPEM(){if(this._finalPEM===""){this._finalPEM=new o.PEM("PRIVATE KEY",this._pkcs8.DER).toString()}return this._finalPEM}toJSON(){return{version:this.version,oid:this.oid,algo:this.algo,privateKey:this._keyRaw,publicKey:this._publicKeyRaw}}[n.inspect.custom](e,t){return`<${this.constructor.name} ${n.inspect(this.toJSON(),t)}>`}}PrivateKey._signers=Object.create(null);t.PrivateKey=PrivateKey;class RSAPublicKey extends PublicKey{static fromPublicKey(e){return new RSAPublicKey(e.toASN1())}constructor(e){super(e);if(a.getOID(this.oid)!==a.getOID("rsaEncryption")){throw new Error(`Invalid RSA public key, unknown OID: ${this.oid}`)}const t=Object.create(null);this._pkcs1=o.ASN1.fromDER(this._keyRaw,true);const r=this._pkcs1.validate(c,t);if(r!=null){throw new Error("Cannot read RSA public key: "+r.message)}this.modulus=o.ASN1.parseIntegerStr(t.publicKeyModulus.bytes);this.exponent=o.ASN1.parseIntegerNum(t.publicKeyExponent.bytes)}toASN1(){return this._pkcs1}toDER(){return this._keyRaw}toPEM(){if(this._finalPEM===""){this._finalPEM=new o.PEM("RSA PUBLIC KEY",this._keyRaw).toString()}return this._finalPEM}toPublicKeyPEM(){return new o.PEM("PUBLIC KEY",this._pkcs8.DER).toString()}toJSON(){return{oid:this.oid,algo:this.algo,modulus:trimLeadingZeroByte(this.modulus),exponent:this.exponent}}[n.inspect.custom](e,t){return`<${this.constructor.name} ${n.inspect(this.toJSON(),t)}>`}}t.RSAPublicKey=RSAPublicKey;class RSAPrivateKey extends PrivateKey{static fromPrivateKey(e){return new RSAPrivateKey(e.toASN1())}constructor(e){super(e);if(a.getOID(this.oid)!==a.getOID("rsaEncryption")){throw new Error(`Invalid RSA private key, unknown OID: ${this.oid}`)}const t=Object.create(null);this._pkcs1=o.ASN1.fromDER(this._keyRaw,true);const r=this._pkcs1.validate(u,t);if(r!=null){throw new Error("Cannot read RSA private key: "+r.message)}this.publicExponent=o.ASN1.parseIntegerNum(t.privateKeyPublicExponent.bytes);this.privateExponent=o.ASN1.parseIntegerStr(t.privateKeyPrivateExponent.bytes);this.modulus=o.ASN1.parseIntegerStr(t.privateKeyModulus.bytes);this.prime1=o.ASN1.parseIntegerStr(t.privateKeyPrime1.bytes);this.prime2=o.ASN1.parseIntegerStr(t.privateKeyPrime2.bytes);this.exponent1=o.ASN1.parseIntegerStr(t.privateKeyExponent1.bytes);this.exponent2=o.ASN1.parseIntegerStr(t.privateKeyExponent2.bytes);this.coefficient=o.ASN1.parseIntegerStr(t.privateKeyCoefficient.bytes)}toASN1(){return this._pkcs1}toDER(){return this._keyRaw}toPEM(){if(this._finalPEM===""){this._finalPEM=new o.PEM("RSA PRIVATE KEY",this._keyRaw).toString()}return this._finalPEM}toPrivateKeyPEM(){return new o.PEM("PRIVATE KEY",this._pkcs8.DER).toString()}toJSON(){return{version:this.version,oid:this.oid,algo:this.algo,publicExponent:this.publicExponent,privateExponent:trimLeadingZeroByte(this.privateExponent),modulus:trimLeadingZeroByte(this.modulus),prime1:trimLeadingZeroByte(this.prime1),prime2:trimLeadingZeroByte(this.prime2),exponent1:trimLeadingZeroByte(this.exponent1),exponent2:trimLeadingZeroByte(this.exponent2),coefficient:trimLeadingZeroByte(this.coefficient)}}[n.inspect.custom](e,t){return`<${this.constructor.name} ${n.inspect(this.toJSON(),t)}>`}}t.RSAPrivateKey=RSAPrivateKey;function trimLeadingZeroByte(e){return e.length%8!==0&&e.startsWith("00")?e.slice(2):e}PublicKey.addVerifier(a.getOID("Ed25519"),(function(e,t){return s.sign.detached.verify(e,t,this.keyRaw)}));PrivateKey.addSigner(a.getOID("Ed25519"),(function(e){const t=this.keyRaw;if(t.length!==64){throw new Error("Invalid signing key.")}return Buffer.from(s.sign.detached(e,t))}))},83517:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(73837);const i=r(6113);const s=r(7235);const o=r(35229);const a=r(30843);const c=Object.create(null);c.CN=o.getOID("commonName");c.commonName="CN";c.C=o.getOID("countryName");c.countryName="C";c.L=o.getOID("localityName");c.localityName="L";c.ST=o.getOID("stateOrProvinceName");c.stateOrProvinceName="ST";c.O=o.getOID("organizationName");c.organizationName="O";c.OU=o.getOID("organizationalUnitName");c.organizationalUnitName="OU";c.E=o.getOID("emailAddress");c.emailAddress="E";function getShortName(e){return c[e]==null?"":c[e]}const u={name:"Certificate",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,value:[{name:"Certificate.TBSCertificate",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,capture:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",class:s.Class.CONTEXT_SPECIFIC,tag:s.Tag.NONE,optional:true,value:[{name:"Certificate.TBSCertificate.version.integer",class:s.Class.UNIVERSAL,tag:s.Tag.INTEGER,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",class:s.Class.UNIVERSAL,tag:s.Tag.INTEGER,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,value:[{name:"Certificate.TBSCertificate.signature.algorithm",class:s.Class.UNIVERSAL,tag:s.Tag.OID,capture:"certinfoSignatureOID"},{name:"Certificate.TBSCertificate.signature.parameters",class:s.Class.UNIVERSAL,tag:s.Tag.OCTETSTRING,optional:true,capture:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,capture:"certIssuer"},{name:"Certificate.TBSCertificate.validity",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,value:[{name:"Certificate.TBSCertificate.validity.notBefore",class:s.Class.UNIVERSAL,tag:[s.Tag.UTCTIME,s.Tag.GENERALIZEDTIME],capture:"certValidityNotBefore"},{name:"Certificate.TBSCertificate.validity.notAfter",class:s.Class.UNIVERSAL,tag:[s.Tag.UTCTIME,s.Tag.GENERALIZEDTIME],capture:"certValidityNotAfter"}]},{name:"Certificate.TBSCertificate.subject",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,capture:"certSubject"},a.publicKeyValidator,{name:"Certificate.TBSCertificate.issuerUniqueID",class:s.Class.CONTEXT_SPECIFIC,tag:s.Tag.BOOLEAN,optional:true,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",class:s.Class.UNIVERSAL,tag:s.Tag.BITSTRING,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",class:s.Class.CONTEXT_SPECIFIC,tag:s.Tag.INTEGER,optional:true,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",class:s.Class.UNIVERSAL,tag:s.Tag.BITSTRING,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",class:s.Class.CONTEXT_SPECIFIC,tag:s.Tag.BITSTRING,capture:"certExtensions",optional:true}]},{name:"Certificate.signatureAlgorithm",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,value:[{name:"Certificate.signatureAlgorithm.algorithm",class:s.Class.UNIVERSAL,tag:s.Tag.OID,capture:"certSignatureOID"},{name:"Certificate.TBSCertificate.signature.parameters",class:s.Class.UNIVERSAL,tag:s.Tag.OCTETSTRING,optional:true,capture:"certSignatureParams"}]},{name:"Certificate.signatureValue",class:s.Class.UNIVERSAL,tag:s.Tag.BITSTRING,capture:"certSignature"}]};class DistinguishedName{constructor(){this.attributes=[];this.uniqueId=null}get commonName(){return this.getFieldValue("commonName")}get organizationName(){return this.getFieldValue("organizationName")}get organizationalUnitName(){return this.getFieldValue("organizationalUnitName")}get countryName(){return this.getFieldValue("countryName")}get localityName(){return this.getFieldValue("localityName")}get serialName(){return this.getFieldValue("serialName")}getHash(){const e=i.createHash("sha1");for(const t of this.attributes){e.update(t.oid);e.update(t.value)}return e.digest()}getField(e){for(const t of this.attributes){if(e===t.oid||e===t.name||e===t.shortName){return t}}return null}addField(e){fillMissingFields([e]);this.attributes.push(e)}setAttrs(e){fillMissingFields(e);this.attributes=e}toJSON(){const e={};for(const t of this.attributes){const r=t.shortName;if(typeof r==="string"&&r!==""){e[r]=t.value}}e.uniqueId=this.uniqueId;e.attributes=this.attributes;return e}getFieldValue(e){const t=this.getField(e);if(t!=null){return t.value}return""}}t.DistinguishedName=DistinguishedName;class Certificate{static fromPEMs(e){const t=[];const r=s.PEM.parse(e);for(const e of r){if(e.type!=="CERTIFICATE"&&e.type!=="X509 CERTIFICATE"&&e.type!=="TRUSTED CERTIFICATE"){throw new Error("Could not convert certificate from PEM: invalid type")}if(e.procType.includes("ENCRYPTED")){throw new Error("Could not convert certificate from PEM: PEM is encrypted.")}const r=s.ASN1.fromDER(e.body);t.push(new Certificate(r))}if(t.length===0){throw new Error("No Certificate")}return t}static fromPEM(e){return Certificate.fromPEMs(e)[0]}constructor(e){const t=Object.create(null);const r=e.validate(u,t);if(r!=null){throw new Error("Cannot read X.509 certificate: "+r.message)}this.raw=e.DER;this.version=t.certVersion==null?0:s.ASN1.parseIntegerNum(t.certVersion.bytes)+1;this.serialNumber=s.ASN1.parseIntegerStr(t.certSerialNumber.bytes);this.signatureOID=s.ASN1.parseOID(t.certSignatureOID.bytes);this.signatureAlgorithm=o.getOIDName(this.signatureOID);this.infoSignatureOID=s.ASN1.parseOID(t.certinfoSignatureOID.bytes);this.signature=s.ASN1.parseBitString(t.certSignature.bytes).buf;this.validFrom=s.ASN1.parseTime(t.certValidityNotBefore.tag,t.certValidityNotBefore.bytes);this.validTo=s.ASN1.parseTime(t.certValidityNotAfter.tag,t.certValidityNotAfter.bytes);this.issuer=new DistinguishedName;this.issuer.setAttrs(RDNAttributesAsArray(t.certIssuer));if(t.certIssuerUniqueId!=null){this.issuer.uniqueId=s.ASN1.parseBitString(t.certIssuerUniqueId.bytes)}this.subject=new DistinguishedName;this.subject.setAttrs(RDNAttributesAsArray(t.certSubject));if(t.certSubjectUniqueId!=null){this.subject.uniqueId=s.ASN1.parseBitString(t.certSubjectUniqueId.bytes)}this.extensions=[];this.subjectKeyIdentifier="";this.authorityKeyIdentifier="";this.ocspServer="";this.issuingCertificateURL="";this.isCA=false;this.maxPathLen=-1;this.basicConstraintsValid=false;this.keyUsage=0;this.dnsNames=[];this.emailAddresses=[];this.ipAddresses=[];this.uris=[];if(t.certExtensions!=null){this.extensions=certificateExtensionsFromAsn1(t.certExtensions);for(const e of this.extensions){if(typeof e.subjectKeyIdentifier==="string"){this.subjectKeyIdentifier=e.subjectKeyIdentifier}if(typeof e.authorityKeyIdentifier==="string"){this.authorityKeyIdentifier=e.authorityKeyIdentifier}if(typeof e.authorityInfoAccessOcsp==="string"){this.ocspServer=e.authorityInfoAccessOcsp}if(typeof e.authorityInfoAccessIssuers==="string"){this.issuingCertificateURL=e.authorityInfoAccessIssuers}if(typeof e.basicConstraintsValid==="boolean"){this.isCA=e.isCA;this.maxPathLen=e.maxPathLen;this.basicConstraintsValid=e.basicConstraintsValid}if(typeof e.keyUsage==="number"){this.keyUsage=e.keyUsage}if(Array.isArray(e.altNames)){for(const t of e.altNames){if(t.dnsName!=null){this.dnsNames.push(t.dnsName)}if(t.email!=null){this.emailAddresses.push(t.email)}if(t.ip!=null){this.ipAddresses.push(t.ip)}if(t.uri!=null){this.uris.push(t.uri)}}}}}this.publicKey=new a.PublicKey(t.publicKeyInfo);this.publicKeyRaw=this.publicKey.toDER();this.tbsCertificate=t.tbsCertificate}getExtension(e,t=""){for(const r of this.extensions){if(e===r.oid||e===r.name){return t===""?r:r[t]}}return null}checkSignature(e){if(this.version===3&&!this.basicConstraintsValid||this.basicConstraintsValid&&!this.isCA){return new Error("The parent constraint violation error")}if(this.getExtension("keyUsage","keyCertSign")!==true){return new Error("The parent constraint violation error")}if(!e.isIssuer(this)){return new Error("The parent certificate did not issue the given child certificate")}const t=getHashAgl(e.signatureOID);if(t===""){return new Error("Unknown child signature OID.")}const r=this.publicKey.verify(e.tbsCertificate.DER,e.signature,t);if(r===false){return new Error("Child signature not matched")}return null}isIssuer(e){return this.issuer.getHash().equals(e.subject.getHash())}verifySubjectKeyIdentifier(){const e=this.publicKey.getFingerprint("sha1","PublicKey");return e.toString("hex")===this.subjectKeyIdentifier}toJSON(){const e={};for(const t of Object.keys(this)){e[t]=toJSONify(this[t])}delete e.tbsCertificate;return e}[n.inspect.custom](e,t){if(t.depth<=2){t.depth=10}return`<${this.constructor.name} ${n.inspect(this.toJSON(),t)}>`}}t.Certificate=Certificate;function certificateExtensionsFromAsn1(e){const t=[];for(const r of e.mustCompound()){for(const e of r.mustCompound()){t.push(certificateExtensionFromAsn1(e))}}return t}function certificateExtensionFromAsn1(e){const t={};t.oid=s.ASN1.parseOID(e.value[0].bytes);t.critical=false;if(e.value[1].tag===s.Tag.BOOLEAN){t.critical=s.ASN1.parseBool(e.value[1].bytes);t.value=e.value[2].bytes}else{t.value=e.value[1].bytes}t.name=o.getOIDName(t.oid);switch(t.name){case"keyUsage":decodeExtKeyUsage(t);break;case"basicConstraints":decodeExtBasicConstraints(t);break;case"extKeyUsage":decodeExtExtKeyUsage(t);break;case"nsCertType":decodeExtNsCertType(t);break;case"subjectAltName":decodeExtAltName(t);break;case"issuerAltName":decodeExtAltName(t);break;case"subjectKeyIdentifier":decodeExtSubjectKeyIdentifier(t);break;case"authorityKeyIdentifier":decodeExtAuthorityKeyIdentifier(t);break;case"authorityInfoAccess":decodeExtAuthorityInfoAccess(t);break}return t}function decodeExtKeyUsage(e){const t=s.ASN1.parseBitString(s.ASN1.fromDER(e.value).bytes);let r=0;let n=0;e.keyUsage=0;for(let r=0;r<9;r++){if(t.at(r)!==0){e.keyUsage|=1<<r}}if(t.buf.length>0){r=t.buf[0];n=t.buf.length>1?t.buf[1]:0}e.digitalSignature=(r&128)===128;e.nonRepudiation=(r&64)===64;e.keyEncipherment=(r&32)===32;e.dataEncipherment=(r&16)===16;e.keyAgreement=(r&8)===8;e.keyCertSign=(r&4)===4;e.cRLSign=(r&2)===2;e.encipherOnly=(r&1)===1;e.decipherOnly=(n&128)===128}function decodeExtBasicConstraints(e){const t=s.ASN1.fromDER(e.value);const r=t.mustCompound();if(r.length>0&&r[0].tag===s.Tag.BOOLEAN){e.isCA=s.ASN1.parseBool(r[0].bytes)}else{e.isCA=false}let n=null;if(r.length>0&&r[0].tag===s.Tag.INTEGER){n=r[0].bytes}else if(r.length>1){n=r[1].bytes}if(n!==null){e.maxPathLen=s.ASN1.parseInteger(n)}else{e.maxPathLen=-1}e.basicConstraintsValid=true}function decodeExtExtKeyUsage(e){const t=s.ASN1.fromDER(e.value);const r=t.mustCompound();for(const t of r){e[o.getOIDName(s.ASN1.parseOID(t.bytes))]=true}}function decodeExtNsCertType(e){const t=s.ASN1.parseBitString(s.ASN1.fromDER(e.value).bytes);let r=0;if(t.buf.length>0){r=t.buf[0]}e.client=(r&128)===128;e.server=(r&64)===64;e.email=(r&32)===32;e.objsign=(r&16)===16;e.reserved=(r&8)===8;e.sslCA=(r&4)===4;e.emailCA=(r&2)===2;e.objCA=(r&1)===1}function decodeExtAltName(e){e.altNames=[];const t=s.ASN1.fromDER(e.value);const r=t.mustCompound();for(const t of r){const r={tag:t.tag,value:t.bytes};e.altNames.push(r);switch(t.tag){case 1:r.email=t.bytes.toString();break;case 2:r.dnsName=t.bytes.toString();break;case 6:r.uri=t.bytes.toString();break;case 7:r.ip=o.bytesToIP(t.bytes);break;case 8:r.oid=s.ASN1.parseOID(t.bytes);break;default:}}}const d={name:"subjectKeyIdentifier",class:s.Class.UNIVERSAL,tag:s.Tag.OCTETSTRING,capture:"subjectKeyIdentifier"};function decodeExtSubjectKeyIdentifier(e){const t=s.ASN1.parseDERWithTemplate(e.value,d);e.subjectKeyIdentifier=t.subjectKeyIdentifier.bytes.toString("hex")}const p={name:"authorityKeyIdentifier",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,value:[{name:"authorityKeyIdentifier.value",class:s.Class.CONTEXT_SPECIFIC,tag:s.Tag.NONE,capture:"authorityKeyIdentifier"}]};function decodeExtAuthorityKeyIdentifier(e){const t=s.ASN1.parseDERWithTemplate(e.value,p);e.authorityKeyIdentifier=t.authorityKeyIdentifier.bytes.toString("hex")}const m={name:"authorityInfoAccess",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,value:[{name:"authorityInfoAccess.authorityInfoAccessOcsp",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,optional:true,value:[{name:"authorityInfoAccess.authorityInfoAccessOcsp.oid",class:s.Class.UNIVERSAL,tag:s.Tag.OID},{name:"authorityInfoAccess.authorityInfoAccessOcsp.value",class:s.Class.CONTEXT_SPECIFIC,tag:s.Tag.OID,capture:"authorityInfoAccessOcsp"}]},{name:"authorityInfoAccess.authorityInfoAccessIssuers",class:s.Class.UNIVERSAL,tag:s.Tag.SEQUENCE,optional:true,value:[{name:"authorityInfoAccess.authorityInfoAccessIssuers.oid",class:s.Class.UNIVERSAL,tag:s.Tag.OID},{name:"authorityInfoAccess.authorityInfoAccessIssuers.value",class:s.Class.CONTEXT_SPECIFIC,tag:s.Tag.OID,capture:"authorityInfoAccessIssuers"}]}]};function decodeExtAuthorityInfoAccess(e){const t=s.ASN1.parseDERWithTemplate(e.value,m);if(t.authorityInfoAccessOcsp!=null){e.authorityInfoAccessOcsp=t.authorityInfoAccessOcsp.bytes.toString()}if(t.authorityInfoAccessIssuers!=null){e.authorityInfoAccessIssuers=t.authorityInfoAccessIssuers.bytes.toString()}}function fillMissingFields(e){for(const t of e){if(t.name==null||t.name===""){if(t.oid!=null){t.name=o.getOIDName(t.oid)}if(t.name===""&&t.shortName!=null){t.name=o.getOIDName(c[t.shortName])}}if(t.oid==null||t.oid===""){if(t.name!==""){t.oid=o.getOID(t.name)}else{throw new Error("Attribute oid not specified.")}}if(t.shortName==null||t.shortName===""){t.shortName=c[t.name]==null?"":c[t.name]}if(t.value==null){throw new Error("Attribute value not specified.")}}}function getHashAgl(e){switch(o.getOIDName(e)){case"sha1WithRsaEncryption":return"sha1";case"md5WithRsaEncryption":return"md5";case"sha256WithRsaEncryption":return"sha256";case"sha384WithRsaEncryption":return"sha384";case"sha512WithRsaEncryption":return"sha512";case"RSASSA-PSS":return"sha256";case"ecdsaWithSha1":return"sha1";case"ecdsaWithSha256":return"sha256";case"ecdsaWithSha384":return"sha384";case"ecdsaWithSha512":return"sha512";case"dsaWithSha1":return"sha1";case"dsaWithSha256":return"sha256";default:return""}}function RDNAttributesAsArray(e){const t=[];for(const r of e.mustCompound()){for(const e of r.mustCompound()){const r=e.mustCompound();const n={};n.oid=s.ASN1.parseOID(r[0].bytes);n.value=r[1].value;n.valueTag=r[1].tag;n.name=o.getOIDName(n.oid);n.shortName=getShortName(n.name);t.push(n)}}return t}function toJSONify(e){if(e!=null&&!(e instanceof Buffer)&&typeof e.toJSON==="function"){return e.toJSON()}return e}},96608:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.getDefaultIpAddress=void 0;const s=i(r(22037));const o=r(48587);function getDefaultIpAddress(e=false){return n(this,void 0,void 0,(function*(){const t=s.default.networkInterfaces(),r=yield(0,o.networkInterfaceDefault)(),n=t[r],i=n===null||n===void 0?void 0:n.filter((e=>!e.internal)),a=e?"IPv6":"IPv4",c=(i===null||i===void 0?void 0:i.find((e=>e.family===a)))||(i===null||i===void 0?void 0:i[0]);if(!c){throw new Error("Unable to get default network address")}return c.address}))}t.getDefaultIpAddress=getDefaultIpAddress},79331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FfmpegProcess=void 0;const n=r(94569);const i=r(32081);const s=r(59577);const noop=()=>null,o=new n.Subject;process.on("exit",(()=>o.next(null)));class FfmpegProcess{constructor(e){this.options=e;this.ff=(0,i.spawn)(this.options.ffmpegPath||s.defaultFfmpegPath,this.options.ffmpegArgs.map((e=>e.toString())));this.processSubscription=o.subscribe((()=>{this.stop()}));this.started=false;this.stopped=false;this.exited=false;const{logger:t,logLabel:r}=e,n=(t===null||t===void 0?void 0:t.error)||noop,a=(t===null||t===void 0?void 0:t.info)||noop,c=r?`${r}: `:"";if(e.stdoutCallback){const{stdoutCallback:t}=e;this.ff.stdout.on("data",(e=>{t(e)}))}this.ff.stderr.on("data",(t=>{var r;if(!this.started){this.started=true;(r=e.startedCallback)===null||r===void 0?void 0:r.call(e)}a(c+t)}));this.ff.stdin.on("error",(e=>{if(!e.message.includes("EPIPE")){n(c+e.message)}}));this.ff.on("exit",((e,t)=>{var r,i;this.exited=true;(i=(r=this.options).exitCallback)===null||i===void 0?void 0:i.call(r,e,t);if(!e||e===255){a(c+"stopped gracefully")}else{n(c+`exited with code ${e} and signal ${t}`)}this.stop()}))}stop(){if(this.stopped){return}this.stopped=true;this.processSubscription.unsubscribe();this.ff.stderr.pause();this.ff.stdout.pause();if(!this.exited){this.ff.kill()}}writeStdin(e){if(this.stopped){return}this.ff.stdin.write(e);this.ff.stdin.end()}}t.FfmpegProcess=FfmpegProcess},59577:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.isFfmpegInstalled=t.doesFfmpegSupportCodec=t.defaultFfmpegPath=void 0;const s=i(r(96745));const o=i(r(58912));t.defaultFfmpegPath=o.default||"ffmpeg";function doesFfmpegSupportCodec(e,r=t.defaultFfmpegPath){return n(this,void 0,void 0,(function*(){const t=yield(0,s.default)(r,["-codecs"]);return t.stdout.includes(e)}))}t.doesFfmpegSupportCodec=doesFfmpegSupportCodec;function isFfmpegInstalled(e=t.defaultFfmpegPath){return n(this,void 0,void 0,(function*(){try{yield(0,s.default)(e,["-codecs"]);return true}catch(e){return false}}))}t.isFfmpegInstalled=isFfmpegInstalled},16453:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(96608),t);i(r(59577),t);i(r(79331),t);i(r(68596),t);i(r(62418),t);i(r(57875),t);i(r(92870),t);i(r(74020),t)},68596:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.bindToPort=t.reservePorts=void 0;const i=r(47195);function reservePorts({count:e=1,type:t="udp",attemptNumber:r=0}={}){return n(this,void 0,void 0,(function*(){if(r>100){throw new Error("Failed to reserve ports after 100 tries")}const n={type:t,reserveTimeout:15},s=yield(0,i.pickPort)(n),o=[s],tryAgain=()=>reservePorts({count:e,type:t,attemptNumber:r+1});for(let t=1;t<e;t++){try{const e=s+t,r=yield(0,i.pickPort)(Object.assign(Object.assign({},n),{minPort:e,maxPort:e}));o.push(r)}catch(e){return tryAgain()}}return o}))}t.reservePorts=reservePorts;function bindToPort(e){return new Promise(((t,r)=>{e.on("error",r);e.bind(0,(()=>{const{port:r}=e.address();t(r)}))}))}t.bindToPort=bindToPort},62418:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.ReturnAudioTranscoder=void 0;const i=r(92870);const s=r(79331);const o=r(74020);const a=r(68596);const c=r(57875);const u={audio:{codec:"AAC_eld",channel:1,sample_rate:16,pt:110}};class ReturnAudioTranscoder{constructor(e){this.options=e;this.startStreamRequest=this.options.startStreamRequest||u;this.ffmpegProcess=new s.FfmpegProcess(Object.assign({ffmpegArgs:["-hide_banner","-protocol_whitelist","pipe,udp,rtp,file,crypto","-f","sdp","-acodec",this.startStreamRequest.audio.codec==="OPUS"?"libopus":"libfdk_aac","-i","pipe:","-map","0:0",...this.options.outputArgs]},this.options));this.reservedPortsPromise=(0,a.reservePorts)({count:2});this.returnRtpSplitter=e.returnAudioSplitter||new i.RtpSplitter}start(){return n(this,void 0,void 0,(function*(){const[e,t]=yield this.reservedPortsPromise,{targetAddress:r,addressVersion:n,audio:{srtp_key:i,srtp_salt:s}}=this.options.prepareStreamRequest,{ssrc:a,rtcpPort:u}=this.options.incomingAudioOptions,{codec:d,sample_rate:p,channel:m,pt:y}=this.startStreamRequest.audio;this.ffmpegProcess.writeStdin(["v=0","o=- 0 0 IN IP4 127.0.0.1","s=Talk",`c=IN ${n.replace("v","").toUpperCase()} ${r}`,"t=0 0","a=tool:libavformat 58.38.100",`m=audio ${e} RTP/AVP ${y}`,"b=AS:24",...d==="OPUS"?[`a=rtpmap:${y} opus/${p}000/${m}`,`a=fmtp:${y} minptime=10;useinbandfec=1`]:[`a=rtpmap:${y} MPEG4-GENERIC/${p}000/${m}`,`a=fmtp:${y} profile-level-id=1;mode=AAC-hbr;sizelength=13;indexlength=3;indexdeltalength=3; config=F8F0212C00BC00`],(0,o.createCryptoLine)({srtpKey:i,srtpSalt:s})].join("\n"));this.returnRtpSplitter.addMessageHandler((({isRtpMessage:r,message:n})=>{if(!r&&(0,c.getSsrc)(n)===a){return{port:u}}return{port:r?e:t}}));return this.returnRtpSplitter.portPromise}))}stop(){this.ffmpegProcess.stop();this.returnRtpSplitter.close()}}t.ReturnAudioTranscoder=ReturnAudioTranscoder},92870:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.RtpSplitter=void 0;const i=r(71891);const s=r(68596);const o=r(94569);const a=r(33956);const c=r(57875);class RtpSplitter{constructor(e){this.socket=(0,i.createSocket)("udp4");this.portPromise=(0,s.bindToPort)(this.socket);this.onClose=new o.ReplaySubject;this.onMessage=(0,o.fromEvent)(this.socket,"message").pipe((0,a.map)((([e,t])=>{const r=(0,c.getPayloadType)(e);return{message:e,info:t,isRtpMessage:(0,c.isRtpMessagePayloadType)(r),payloadType:r}})),(0,a.takeUntil)(this.onClose),(0,a.share)());this.cleanedUp=false;this.closed=false;if(e){this.addMessageHandler(e)}(0,o.merge)((0,o.fromEvent)(this.socket,"close"),(0,o.fromEvent)(this.socket,"error")).pipe((0,a.takeUntil)(this.onClose)).subscribe((()=>{this.cleanUp()}))}addMessageHandler(e){this.onMessage.subscribe((t=>{const r=e(t);if(r){this.send(t.message,r)}}))}send(e,t){return n(this,void 0,void 0,(function*(){yield this.portPromise;if(this.closed){return}this.socket.send(e,t.port,t.address||"127.0.0.1")}))}cleanUp(){this.closed=true;if(this.cleanedUp){return}this.cleanedUp=true;this.onClose.next(null)}close(){if(this.closed){return}this.socket.close();this.cleanUp()}}t.RtpSplitter=RtpSplitter},57875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getSsrc=t.isRtpMessagePayloadType=t.getPayloadType=void 0;function getPayloadType(e){return e.readUInt8(1)&127}t.getPayloadType=getPayloadType;function isRtpMessagePayloadType(e){return e>90||e===0}t.isRtpMessagePayloadType=isRtpMessagePayloadType;function getSsrc(e){try{const t=getPayloadType(e),r=isRtpMessagePayloadType(t);return e.readUInt32BE(r?8:4)}catch(e){return null}}t.getSsrc=getSsrc},74020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.generateSrtpOptions=t.createCryptoLine=t.decodeSrtpOptions=t.encodeSrtpOptions=void 0;const n=r(6113);function encodeSrtpOptions({srtpKey:e,srtpSalt:t}){return Buffer.concat([e,t]).toString("base64")}t.encodeSrtpOptions=encodeSrtpOptions;function decodeSrtpOptions(e){const t=Buffer.from(e,"base64");return{srtpKey:t.slice(0,16),srtpSalt:t.slice(16,30)}}t.decodeSrtpOptions=decodeSrtpOptions;function createCryptoLine(e){const t=encodeSrtpOptions(e);return`a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:${t}`}t.createCryptoLine=createCryptoLine;function generateSrtpOptions(){return{srtpKey:(0,n.randomBytes)(16),srtpSalt:(0,n.randomBytes)(14)}}t.generateSrtpOptions=generateSrtpOptions},561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LEB128=t.SignedLEB128=t.UnsignedLEB128=void 0;var r;(function(e){e[e["LOWER_7"]=127]="LOWER_7";e[e["UPPER_1"]=128]="UPPER_1"})(r||(r={}));const int=e=>Number.isSafeInteger(e);class UnsignedLEB128{static decode(e,t=0){const n=this.$scanForNullBytes(e,t);let i=0,s=0;for(let o=0;o<=n-t;o++){const n=e[t+o]&r.LOWER_7;i|=n<<s;s+=8-1}return i}static encode(e){this.check(e);if(e<0)throw new Error(`An unsigned number must NOT be negative, ${e} is!`);let t=[],n=e;do{let e=n&r.LOWER_7;n>>=8-1;if(n)e=e|r.UPPER_1;t.push(e)}while(n);return Uint8Array.from(t)}static check(e){if(!int(e))throw new Error(`${e} is not a safe integer!`)}static $scanForNullBytes(e,t=0){let n=t,i=0;do{if(n>=e.byteLength)throw new Error("This is not a LEB128-encoded Uint8Array, no ending found!");i=e.slice(n,n+1)[0];n++}while(i&r.UPPER_1);return n-1}static getLength(e,t=0){return this.$scanForNullBytes(e,t)-t}}t.UnsignedLEB128=UnsignedLEB128;class SignedLEB128{static $ceil7mul(e){let t=e;while(t%7)t++;return t}static check(e){if(!int(e))throw new Error(`${e} is not a safe integer!`)}static encode(e){this.check(e);if(e>=0)throw new Error(`A signed number must be negative, ${e} isn't!`);const t=Math.ceil(Math.log2(-e));return UnsignedLEB128.encode((1<<this.$ceil7mul(t))+e)}static decode(e,t=0){const r=UnsignedLEB128.decode(e,t);const n=Math.ceil(Math.log2(r));const i=1<<n;return-(i-r)}}t.SignedLEB128=SignedLEB128;class LEB128{}t.LEB128=LEB128;LEB128.encode=e=>(e>=0?UnsignedLEB128:SignedLEB128).encode(e);LEB128.decode=(e,t=0,r=false)=>(r?SignedLEB128:UnsignedLEB128).decode(e,t)},11946:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getHash=getHash;t.createCurve=createCurve;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const n=r(52790);const i=r(88257);const s=r(5214);function getHash(e){return{hash:e,hmac:(t,...r)=>(0,n.hmac)(e,t,(0,i.concatBytes)(...r)),randomBytes:i.randomBytes}}function createCurve(e,t){const create=t=>(0,s.weierstrass)({...e,...getHash(t)});return Object.freeze({...create(t),create:create})}},44134:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.wNAF=wNAF;t.pippenger=pippenger;t.validateBasic=validateBasic;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const n=r(17132);const i=r(71508);const s=BigInt(0);const o=BigInt(1);const a=new WeakMap;const c=new WeakMap;function wNAF(e,t){const constTimeNegate=(e,t)=>{const r=t.negate();return e?r:t};const validateW=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)};const opts=e=>{validateW(e);const r=Math.ceil(t/e)+1;const n=2**(e-1);return{windows:r,windowSize:n}};return{constTimeNegate:constTimeNegate,unsafeLadder(t,r){let n=e.ZERO;let i=t;while(r>s){if(r&o)n=n.add(i);i=i.double();r>>=o}return n},precomputeWindow(e,t){const{windows:r,windowSize:n}=opts(t);const i=[];let s=e;let o=s;for(let e=0;e<r;e++){o=s;i.push(o);for(let e=1;e<n;e++){o=o.add(s);i.push(o)}s=o.double()}return i},wNAF(t,r,n){const{windows:i,windowSize:s}=opts(t);let a=e.ZERO;let c=e.BASE;const u=BigInt(2**t-1);const d=2**t;const p=BigInt(t);for(let e=0;e<i;e++){const t=e*s;let i=Number(n&u);n>>=p;if(i>s){i-=d;n+=o}const m=t;const y=t+Math.abs(i)-1;const g=e%2!==0;const b=i<0;if(i===0){c=c.add(constTimeNegate(g,r[m]))}else{a=a.add(constTimeNegate(b,r[y]))}}return{p:a,f:c}},wNAFCached(e,t,r){const n=c.get(e)||1;let i=a.get(e);if(!i){i=this.precomputeWindow(e,n);if(n!==1)a.set(e,r(i))}return this.wNAF(n,i,t)},setWindowSize(e,t){validateW(t);c.set(e,t);a.delete(e)}}}function pippenger(e,t,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach(((e,r)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${r}`)}));r.forEach(((t,r)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${r}`)}));const s=(0,i.bitLen)(BigInt(r.length));const o=s>12?s-3:s>4?s-2:s?2:1;const a=(1<<o)-1;const c=new Array(a+1).fill(e.ZERO);const u=Math.floor((t.BITS-1)/o)*o;let d=e.ZERO;for(let t=u;t>=0;t-=o){c.fill(e.ZERO);for(let e=0;e<n.length;e++){const i=n[e];const s=Number(i>>BigInt(t)&BigInt(a));c[s]=c[s].add(r[e])}let i=e.ZERO;for(let t=c.length-1,r=e.ZERO;t>0;t--){r=r.add(c[t]);i=i.add(r)}d=d.add(i);if(t!==0)for(let e=0;e<o;e++)d=d.double()}return d}function validateBasic(e){(0,n.validateField)(e.Fp);(0,i.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"});return Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})}},20435:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.expand_message_xmd=expand_message_xmd;t.expand_message_xof=expand_message_xof;t.hash_to_field=hash_to_field;t.isogenyMap=isogenyMap;t.createHasher=createHasher;const n=r(17132);const i=r(71508);const s=i.bytesToNumberBE;function i2osp(e,t){anum(e);anum(t);if(e<0||e>=1<<8*t){throw new Error(`bad I2OSP call: value=${e} length=${t}`)}const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--){r[n]=e&255;e>>>=8}return new Uint8Array(r)}function strxor(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++){r[n]=e[n]^t[n]}return r}function anum(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function expand_message_xmd(e,t,r,n){(0,i.abytes)(e);(0,i.abytes)(t);anum(r);if(t.length>255)t=n((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),t));const{outputLen:s,blockLen:o}=n;const a=Math.ceil(r/s);if(r>65535||a>255)throw new Error("expand_message_xmd: invalid lenInBytes");const c=(0,i.concatBytes)(t,i2osp(t.length,1));const u=i2osp(0,o);const d=i2osp(r,2);const p=new Array(a);const m=n((0,i.concatBytes)(u,e,d,i2osp(0,1),c));p[0]=n((0,i.concatBytes)(m,i2osp(1,1),c));for(let e=1;e<=a;e++){const t=[strxor(m,p[e-1]),i2osp(e+1,1),c];p[e]=n((0,i.concatBytes)(...t))}const y=(0,i.concatBytes)(...p);return y.slice(0,r)}function expand_message_xof(e,t,r,n,s){(0,i.abytes)(e);(0,i.abytes)(t);anum(r);if(t.length>255){const e=Math.ceil(2*n/8);t=s.create({dkLen:e}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:r}).update(e).update(i2osp(r,2)).update(t).update(i2osp(t.length,1)).digest()}function hash_to_field(e,t,r){(0,i.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:o,k:a,m:c,hash:u,expand:d,DST:p}=r;(0,i.abytes)(e);anum(t);const m=typeof p==="string"?(0,i.utf8ToBytes)(p):p;const y=o.toString(2).length;const g=Math.ceil((y+a)/8);const b=t*c*g;let v;if(d==="xmd"){v=expand_message_xmd(e,m,b,u)}else if(d==="xof"){v=expand_message_xof(e,m,b,a,u)}else if(d==="_internal_pass"){v=e}else{throw new Error('expand must be "xmd" or "xof"')}const w=new Array(t);for(let e=0;e<t;e++){const t=new Array(c);for(let r=0;r<c;r++){const i=g*(r+e*c);const a=v.subarray(i,i+g);t[r]=(0,n.mod)(s(a),o)}w[e]=t}return w}function isogenyMap(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,n)=>{const[i,s,o,a]=r.map((r=>r.reduce(((r,n)=>e.add(e.mul(r,t),n)))));t=e.div(i,s);n=e.mul(n,e.div(o,a));return{x:t,y:n}}}function createHasher(e,t,r){if(typeof t!=="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=hash_to_field(n,2,{...r,DST:r.DST,...i});const o=e.fromAffine(t(s[0]));const a=e.fromAffine(t(s[1]));const c=o.add(a).clearCofactor();c.assertValidity();return c},encodeToCurve(n,i){const s=hash_to_field(n,1,{...r,DST:r.encodeDST,...i});const o=e.fromAffine(t(s[0])).clearCofactor();o.assertValidity();return o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const e of r)if(typeof e!=="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${e} in array`);const n=e.fromAffine(t(r)).clearCofactor();n.assertValidity();return n}}}},17132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isNegativeLE=void 0;t.mod=mod;t.pow=pow;t.pow2=pow2;t.invert=invert;t.tonelliShanks=tonelliShanks;t.FpSqrt=FpSqrt;t.validateField=validateField;t.FpPow=FpPow;t.FpInvertBatch=FpInvertBatch;t.FpDiv=FpDiv;t.FpLegendre=FpLegendre;t.FpIsSquare=FpIsSquare;t.nLength=nLength;t.Field=Field;t.FpSqrtOdd=FpSqrtOdd;t.FpSqrtEven=FpSqrtEven;t.hashToPrivateScalar=hashToPrivateScalar;t.getFieldBytesLength=getFieldBytesLength;t.getMinHashLength=getMinHashLength;t.mapHashToField=mapHashToField;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const n=r(71508);const i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3);const c=BigInt(4),u=BigInt(5),d=BigInt(8);const p=BigInt(9),m=BigInt(16);function mod(e,t){const r=e%t;return r>=i?r:t+r}function pow(e,t,r){if(r<=i||t<i)throw new Error("Expected power/modulo > 0");if(r===s)return i;let n=s;while(t>i){if(t&s)n=n*e%r;e=e*e%r;t>>=s}return n}function pow2(e,t,r){let n=e;while(t-- >i){n*=n;n%=r}return n}function invert(e,t){if(e===i||t<=i){throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`)}let r=mod(e,t);let n=t;let o=i,a=s,c=s,u=i;while(r!==i){const e=n/r;const t=n%r;const i=o-c*e;const s=a-u*e;n=r,r=t,o=c,a=u,c=i,u=s}const d=n;if(d!==s)throw new Error("invert: does not exist");return mod(o,t)}function tonelliShanks(e){const t=(e-s)/o;let r,n,a;for(r=e-s,n=0;r%o===i;r/=o,n++);for(a=o;a<e&&pow(a,t,e)!==e-s;a++);if(n===1){const t=(e+s)/c;return function tonelliFast(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const u=(r+s)/o;return function tonelliSlow(e,i){if(e.pow(i,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=n;let c=e.pow(e.mul(e.ONE,a),r);let d=e.pow(i,u);let p=e.pow(i,r);while(!e.eql(p,e.ONE)){if(e.eql(p,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(p);t<o;t++){if(e.eql(r,e.ONE))break;r=e.sqr(r)}const r=e.pow(c,s<<BigInt(o-t-1));c=e.sqr(r);d=e.mul(d,r);p=e.mul(p,c);o=t}return d}}function FpSqrt(e){if(e%c===a){const t=(e+s)/c;return function sqrt3mod4(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%d===u){const t=(e-u)/d;return function sqrt5mod8(e,r){const n=e.mul(r,o);const i=e.pow(n,t);const s=e.mul(r,i);const a=e.mul(e.mul(s,o),i);const c=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(c),r))throw new Error("Cannot find square root");return c}}if(e%m===p){}return tonelliShanks(e)}const isNegativeLE=(e,t)=>(mod(e,t)&s)===s;t.isNegativeLE=isNegativeLE;const y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};const r=y.reduce(((e,t)=>{e[t]="function";return e}),t);return(0,n.validateObject)(e,r)}function FpPow(e,t,r){if(r<i)throw new Error("Expected power > 0");if(r===i)return e.ONE;if(r===s)return t;let n=e.ONE;let o=t;while(r>i){if(r&s)n=e.mul(n,o);o=e.sqr(o);r>>=s}return n}function FpInvertBatch(e,t){const r=new Array(t.length);const n=t.reduce(((t,n,i)=>{if(e.is0(n))return t;r[i]=t;return e.mul(t,n)}),e.ONE);const i=e.inv(n);t.reduceRight(((t,n,i)=>{if(e.is0(n))return t;r[i]=e.mul(t,r[i]);return e.mul(t,n)}),i);return r}function FpDiv(e,t,r){return e.mul(t,typeof r==="bigint"?invert(r,e.ORDER):e.inv(r))}function FpLegendre(e){const t=(e-s)/o;return(e,r)=>e.pow(r,t)}function FpIsSquare(e){const t=FpLegendre(e.ORDER);return r=>{const n=t(e,r);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}}function nLength(e,t){const r=t!==undefined?t:e.toString(2).length;const n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Field(e,t,r=false,o={}){if(e<=i)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:a,nByteLength:c}=nLength(e,t);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=FpSqrt(e);const d=Object.freeze({ORDER:e,BITS:a,BYTES:c,MASK:(0,n.bitMask)(a),ZERO:i,ONE:s,create:t=>mod(t,e),isValid:t=>{if(typeof t!=="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof t}`);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&s)===s,neg:t=>mod(-t,e),eql:(e,t)=>e===t,sqr:t=>mod(t*t,e),add:(t,r)=>mod(t+r,e),sub:(t,r)=>mod(t-r,e),mul:(t,r)=>mod(t*r,e),pow:(e,t)=>FpPow(d,e,t),div:(t,r)=>mod(t*invert(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>invert(t,e),sqrt:o.sqrt||(e=>u(d,e)),invertBatch:e=>FpInvertBatch(d,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.numberToBytesLE)(e,c):(0,n.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${e.length}`);return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(d)}function FpSqrtOdd(e,t){if(!e.isOdd)throw new Error(`Field doesn't have isOdd`);const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)}function FpSqrtEven(e,t){if(!e.isOdd)throw new Error(`Field doesn't have isOdd`);const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}function hashToPrivateScalar(e,t,r=false){e=(0,n.ensureBytes)("privateHash",e);const i=e.length;const o=nLength(t).nByteLength+8;if(o<24||i<o||i>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${i}`);const a=r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e);return mod(a,t-s)+s}function getFieldBytesLength(e){if(typeof e!=="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function getMinHashLength(e){const t=getFieldBytesLength(e);return t+Math.ceil(t/2)}function mapHashToField(e,t,r=false){const i=e.length;const o=getFieldBytesLength(t);const a=getMinHashLength(t);if(i<16||i<a||i>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${i}`);const c=r?(0,n.bytesToNumberBE)(e):(0,n.bytesToNumberLE)(e);const u=mod(c,t-s)+s;return r?(0,n.numberToBytesLE)(u,o):(0,n.numberToBytesBE)(u,o)}},71508:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.notImplemented=t.bitMask=void 0;t.isBytes=isBytes;t.abytes=abytes;t.abool=abool;t.bytesToHex=bytesToHex;t.numberToHexUnpadded=numberToHexUnpadded;t.hexToNumber=hexToNumber;t.hexToBytes=hexToBytes;t.bytesToNumberBE=bytesToNumberBE;t.bytesToNumberLE=bytesToNumberLE;t.numberToBytesBE=numberToBytesBE;t.numberToBytesLE=numberToBytesLE;t.numberToVarBytesBE=numberToVarBytesBE;t.ensureBytes=ensureBytes;t.concatBytes=concatBytes;t.equalBytes=equalBytes;t.utf8ToBytes=utf8ToBytes;t.inRange=inRange;t.aInRange=aInRange;t.bitLen=bitLen;t.bitGet=bitGet;t.bitSet=bitSet;t.createHmacDrbg=createHmacDrbg;t.validateObject=validateObject;t.memoized=memoized;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const r=BigInt(0);const n=BigInt(1);const i=BigInt(2);function isBytes(e){return e instanceof Uint8Array||e!=null&&typeof e==="object"&&e.constructor.name==="Uint8Array"}function abytes(e){if(!isBytes(e))throw new Error("Uint8Array expected")}function abool(e,t){if(typeof t!=="boolean")throw new Error(`${e} must be valid boolean, got "${t}".`)}const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex(e){abytes(e);let t="";for(let r=0;r<e.length;r++){t+=s[e[r]]}return t}function numberToHexUnpadded(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function hexToNumber(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(e){if(e>=o._0&&e<=o._9)return e-o._0;if(e>=o._A&&e<=o._F)return e-(o._A-10);if(e>=o._a&&e<=o._f)return e-(o._a-10);return}function hexToBytes(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;const r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=asciiToBase16(e.charCodeAt(i));const s=asciiToBase16(e.charCodeAt(i+1));if(r===undefined||s===undefined){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=r*16+s}return n}function bytesToNumberBE(e){return hexToNumber(bytesToHex(e))}function bytesToNumberLE(e){abytes(e);return hexToNumber(bytesToHex(Uint8Array.from(e).reverse()))}function numberToBytesBE(e,t){return hexToBytes(e.toString(16).padStart(t*2,"0"))}function numberToBytesLE(e,t){return numberToBytesBE(e,t).reverse()}function numberToVarBytesBE(e){return hexToBytes(numberToHexUnpadded(e))}function ensureBytes(e,t,r){let n;if(typeof t==="string"){try{n=hexToBytes(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}}else if(isBytes(t)){n=Uint8Array.from(t)}else{throw new Error(`${e} must be hex string or Uint8Array`)}const i=n.length;if(typeof r==="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function concatBytes(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];abytes(n);t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n);n+=i.length}return r}function equalBytes(e,t){if(e.length!==t.length)return false;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function utf8ToBytes(e){if(typeof e!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array((new TextEncoder).encode(e))}const isPosBig=e=>typeof e==="bigint"&&r<=e;function inRange(e,t,r){return isPosBig(e)&&isPosBig(t)&&isPosBig(r)&&t<=e&&e<r}function aInRange(e,t,r,n){if(!inRange(t,r,n))throw new Error(`expected valid ${e}: ${r} <= n < ${n}, got ${typeof t} ${t}`)}function bitLen(e){let t;for(t=0;e>r;e>>=n,t+=1);return t}function bitGet(e,t){return e>>BigInt(t)&n}function bitSet(e,t,i){return e|(i?n:r)<<BigInt(t)}const bitMask=e=>(i<<BigInt(e-1))-n;t.bitMask=bitMask;const u8n=e=>new Uint8Array(e);const u8fr=e=>Uint8Array.from(e);function createHmacDrbg(e,t,r){if(typeof e!=="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!=="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!=="function")throw new Error("hmacFn must be a function");let n=u8n(e);let i=u8n(e);let s=0;const reset=()=>{n.fill(1);i.fill(0);s=0};const h=(...e)=>r(i,n,...e);const reseed=(e=u8n())=>{i=h(u8fr([0]),e);n=h();if(e.length===0)return;i=h(u8fr([1]),e);n=h()};const gen=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];while(e<t){n=h();const t=n.slice();r.push(t);e+=n.length}return concatBytes(...r)};const genUntil=(e,t)=>{reset();reseed(e);let r=undefined;while(!(r=t(gen())))reseed();reset();return r};return genUntil}const a={bigint:e=>typeof e==="bigint",function:e=>typeof e==="function",boolean:e=>typeof e==="boolean",string:e=>typeof e==="string",stringOrUint8Array:e=>typeof e==="string"||isBytes(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e==="function"&&Number.isSafeInteger(e.outputLen)};function validateObject(e,t,r={}){const checkField=(t,r,n)=>{const i=a[r];if(typeof i!=="function")throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(n&&s===undefined)return;if(!i(s,e)){throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)}};for(const[e,r]of Object.entries(t))checkField(e,r,false);for(const[e,t]of Object.entries(r))checkField(e,t,true);return e}const notImplemented=()=>{throw new Error("not implemented")};t.notImplemented=notImplemented;function memoized(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(i!==undefined)return i;const s=e(r,...n);t.set(r,s);return s}}},5214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DER=void 0;t.weierstrassPoints=weierstrassPoints;t.weierstrass=weierstrass;t.SWUFpSqrtRatio=SWUFpSqrtRatio;t.mapToCurveSimpleSWU=mapToCurveSimpleSWU;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const n=r(44134);const i=r(17132);const s=r(71508);const o=r(71508);function validateSigVerOpts(e){if(e.lowS!==undefined)(0,o.abool)("lowS",e.lowS);if(e.prehash!==undefined)(0,o.abool)("prehash",e.prehash)}function validatePointOpts(e){const t=(0,n.validateBasic)(e);s.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:i,a:o}=t;if(r){if(!i.eql(o,i.ZERO)){throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0")}if(typeof r!=="object"||typeof r.beta!=="bigint"||typeof r.splitScalar!=="function"){throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}}return Object.freeze({...t})}const{bytesToNumberBE:a,hexToBytes:c}=s;t.DER={Err:class DERErr extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,r)=>{const{Err:n}=t.DER;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(r.length&1)throw new n("tlv.encode: unpadded data");const i=r.length/2;const o=s.numberToHexUnpadded(i);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const a=i>127?s.numberToHexUnpadded(o.length/2|128):"";return`${s.numberToHexUnpadded(e)}${a}${o}${r}`},decode(e,r){const{Err:n}=t.DER;let i=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(r.length<2||r[i++]!==e)throw new n("tlv.decode: wrong tlv");const s=r[i++];const o=!!(s&128);let a=0;if(!o)a=s;else{const e=s&127;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const t=r.subarray(i,i+e);if(t.length!==e)throw new n("tlv.decode: length bytes not complete");if(t[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const e of t)a=a<<8|e;i+=e;if(a<128)throw new n("tlv.decode(long): not minimal encoding")}const c=r.subarray(i,i+a);if(c.length!==a)throw new n("tlv.decode: wrong value length");return{v:c,l:r.subarray(i+a)}}},_int:{encode(e){const{Err:r}=t.DER;if(e<u)throw new r("integer: negative integers are not allowed");let n=s.numberToHexUnpadded(e);if(Number.parseInt(n[0],16)&8)n="00"+n;if(n.length&1)throw new r("unexpected assertion");return n},decode(e){const{Err:r}=t.DER;if(e[0]&128)throw new r("Invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return a(e)}},toSig(e){const{Err:r,_int:n,_tlv:i}=t.DER;const o=typeof e==="string"?c(e):e;s.abytes(o);const{v:a,l:u}=i.decode(48,o);if(u.length)throw new r("Invalid signature: left bytes after parsing");const{v:d,l:p}=i.decode(2,a);const{v:m,l:y}=i.decode(2,p);if(y.length)throw new r("Invalid signature: left bytes after parsing");return{r:n.decode(d),s:n.decode(m)}},hexFromSig(e){const{_tlv:r,_int:n}=t.DER;const i=`${r.encode(2,n.encode(e.r))}${r.encode(2,n.encode(e.s))}`;return r.encode(48,i)}};const u=BigInt(0),d=BigInt(1),p=BigInt(2),m=BigInt(3),y=BigInt(4);function weierstrassPoints(e){const t=validatePointOpts(e);const{Fp:r}=t;const a=i.Field(t.n,t.nBitLength);const c=t.toBytes||((e,t,n)=>{const i=t.toAffine();return s.concatBytes(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))});const p=t.fromBytes||(e=>{const t=e.subarray(1);const n=r.fromBytes(t.subarray(0,r.BYTES));const i=r.fromBytes(t.subarray(r.BYTES,2*r.BYTES));return{x:n,y:i}});function weierstrassEquation(e){const{a:n,b:i}=t;const s=r.sqr(e);const o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),weierstrassEquation(t.Gx)))throw new Error("bad generator point: equation left != right");function isWithinCurveOrder(e){return s.inRange(e,d,t.n)}function normPrivateKeyToScalar(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:a,n:c}=t;if(r&&typeof e!=="bigint"){if(s.isBytes(e))e=s.bytesToHex(e);if(typeof e!=="string"||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(n*2,"0")}let u;try{u=typeof e==="bigint"?e:s.bytesToNumberBE((0,o.ensureBytes)("private key",e,n))}catch(t){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}if(a)u=i.mod(u,c);s.aInRange("private key",u,d,c);return u}function assertPrjPoint(e){if(!(e instanceof Point))throw new Error("ProjectivePoint expected")}const y=(0,o.memoized)(((e,t)=>{const{px:n,py:i,pz:s}=e;if(r.eql(s,r.ONE))return{x:n,y:i};const o=e.is0();if(t==null)t=o?r.ONE:r.inv(s);const a=r.mul(n,t);const c=r.mul(i,t);const u=r.mul(s,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}));const g=(0,o.memoized)((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const s=r.sqr(i);const o=weierstrassEquation(n);if(!r.eql(s,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return true}));class Point{constructor(e,t,n){this.px=e;this.py=t;this.pz=n;if(e==null||!r.isValid(e))throw new Error("x required");if(t==null||!r.isValid(t))throw new Error("y required");if(n==null||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof Point)throw new Error("projective point not allowed");const is0=e=>r.eql(e,r.ZERO);if(is0(t)&&is0(n))return Point.ZERO;return new Point(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(Point.fromAffine)}static fromHex(e){const t=Point.fromAffine(p((0,o.ensureBytes)("pointHex",e)));t.assertValidity();return t}static fromPrivateKey(e){return Point.BASE.multiply(normPrivateKeyToScalar(e))}static msm(e,t){return(0,n.pippenger)(Point,a,e,t)}_setWindowSize(e){v.setWindowSize(this,e)}assertValidity(){g(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){assertPrjPoint(e);const{px:t,py:n,pz:i}=this;const{px:s,py:o,pz:a}=e;const c=r.eql(r.mul(t,a),r.mul(s,i));const u=r.eql(r.mul(n,a),r.mul(o,i));return c&&u}negate(){return new Point(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t;const i=r.mul(n,m);const{px:s,py:o,pz:a}=this;let c=r.ZERO,u=r.ZERO,d=r.ZERO;let p=r.mul(s,s);let y=r.mul(o,o);let g=r.mul(a,a);let b=r.mul(s,o);b=r.add(b,b);d=r.mul(s,a);d=r.add(d,d);c=r.mul(e,d);u=r.mul(i,g);u=r.add(c,u);c=r.sub(y,u);u=r.add(y,u);u=r.mul(c,u);c=r.mul(b,c);d=r.mul(i,d);g=r.mul(e,g);b=r.sub(p,g);b=r.mul(e,b);b=r.add(b,d);d=r.add(p,p);p=r.add(d,p);p=r.add(p,g);p=r.mul(p,b);u=r.add(u,p);g=r.mul(o,a);g=r.add(g,g);p=r.mul(g,b);c=r.sub(c,p);d=r.mul(g,y);d=r.add(d,d);d=r.add(d,d);return new Point(c,u,d)}add(e){assertPrjPoint(e);const{px:n,py:i,pz:s}=this;const{px:o,py:a,pz:c}=e;let u=r.ZERO,d=r.ZERO,p=r.ZERO;const y=t.a;const g=r.mul(t.b,m);let b=r.mul(n,o);let v=r.mul(i,a);let w=r.mul(s,c);let _=r.add(n,i);let C=r.add(o,a);_=r.mul(_,C);C=r.add(b,v);_=r.sub(_,C);C=r.add(n,s);let P=r.add(o,c);C=r.mul(C,P);P=r.add(b,w);C=r.sub(C,P);P=r.add(i,s);u=r.add(a,c);P=r.mul(P,u);u=r.add(v,w);P=r.sub(P,u);p=r.mul(y,C);u=r.mul(g,w);p=r.add(u,p);u=r.sub(v,p);p=r.add(v,p);d=r.mul(u,p);v=r.add(b,b);v=r.add(v,b);w=r.mul(y,w);C=r.mul(g,C);v=r.add(v,w);w=r.sub(b,w);w=r.mul(y,w);C=r.add(C,w);b=r.mul(v,C);d=r.add(d,b);b=r.mul(P,C);u=r.mul(_,u);u=r.sub(u,b);b=r.mul(_,v);p=r.mul(P,p);p=r.add(p,b);return new Point(u,d,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(Point.ZERO)}wNAF(e){return v.wNAFCached(this,e,Point.normalizeZ)}multiplyUnsafe(e){s.aInRange("scalar",e,u,t.n);const n=Point.ZERO;if(e===u)return n;if(e===d)return this;const{endo:i}=t;if(!i)return v.unsafeLadder(this,e);let{k1neg:o,k1:a,k2neg:c,k2:p}=i.splitScalar(e);let m=n;let y=n;let g=this;while(a>u||p>u){if(a&d)m=m.add(g);if(p&d)y=y.add(g);g=g.double();a>>=d;p>>=d}if(o)m=m.negate();if(c)y=y.negate();y=new Point(r.mul(y.px,i.beta),y.py,y.pz);return m.add(y)}multiply(e){const{endo:n,n:i}=t;s.aInRange("scalar",e,d,i);let o,a;if(n){const{k1neg:t,k1:i,k2neg:s,k2:c}=n.splitScalar(e);let{p:u,f:d}=this.wNAF(i);let{p:p,f:m}=this.wNAF(c);u=v.constTimeNegate(t,u);p=v.constTimeNegate(s,p);p=new Point(r.mul(p.px,n.beta),p.py,p.pz);o=u.add(p);a=d.add(m)}else{const{p:t,f:r}=this.wNAF(e);o=t;a=r}return Point.normalizeZ([o,a])[0]}multiplyAndAddUnsafe(e,t,r){const n=Point.BASE;const mul=(e,t)=>t===u||t===d||!e.equals(n)?e.multiplyUnsafe(t):e.multiply(t);const i=mul(this,t).add(mul(e,r));return i.is0()?undefined:i}toAffine(e){return y(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===d)return true;if(r)return r(Point,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;if(e===d)return this;if(r)return r(Point,this);return this.multiplyUnsafe(t.h)}toRawBytes(e=true){(0,o.abool)("isCompressed",e);this.assertValidity();return c(Point,this,e)}toHex(e=true){(0,o.abool)("isCompressed",e);return s.bytesToHex(this.toRawBytes(e))}}Point.BASE=new Point(t.Gx,t.Gy,r.ONE);Point.ZERO=new Point(r.ZERO,r.ONE,r.ZERO);const b=t.nBitLength;const v=(0,n.wNAF)(Point,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:Point,normPrivateKeyToScalar:normPrivateKeyToScalar,weierstrassEquation:weierstrassEquation,isWithinCurveOrder:isWithinCurveOrder}}function validateOpts(e){const t=(0,n.validateBasic)(e);s.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"});return Object.freeze({lowS:true,...t})}function weierstrass(e){const r=validateOpts(e);const{Fp:n,n:a}=r;const c=n.BYTES+1;const p=2*n.BYTES+1;function modN(e){return i.mod(e,a)}function invN(e){return i.invert(e,a)}const{ProjectivePoint:m,normPrivateKeyToScalar:y,weierstrassEquation:g,isWithinCurveOrder:b}=weierstrassPoints({...r,toBytes(e,t,r){const i=t.toAffine();const a=n.toBytes(i.x);const c=s.concatBytes;(0,o.abool)("isCompressed",r);if(r){return c(Uint8Array.from([t.hasEvenY()?2:3]),a)}else{return c(Uint8Array.from([4]),a,n.toBytes(i.y))}},fromBytes(e){const t=e.length;const r=e[0];const i=e.subarray(1);if(t===c&&(r===2||r===3)){const e=s.bytesToNumberBE(i);if(!s.inRange(e,d,n.ORDER))throw new Error("Point is not on curve");const t=g(e);let o;try{o=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}const a=(o&d)===d;const c=(r&1)===1;if(c!==a)o=n.neg(o);return{x:e,y:o}}else if(t===p&&r===4){const e=n.fromBytes(i.subarray(0,n.BYTES));const t=n.fromBytes(i.subarray(n.BYTES,2*n.BYTES));return{x:e,y:t}}else{throw new Error(`Point of length ${t} was invalid. Expected ${c} compressed bytes or ${p} uncompressed bytes`)}}});const numToNByteStr=e=>s.bytesToHex(s.numberToBytesBE(e,r.nByteLength));function isBiggerThanHalfOrder(e){const t=a>>d;return e>t}function normalizeS(e){return isBiggerThanHalfOrder(e)?modN(-e):e}const slcNum=(e,t,r)=>s.bytesToNumberBE(e.slice(t,r));class Signature{constructor(e,t,r){this.r=e;this.s=t;this.recovery=r;this.assertValidity()}static fromCompact(e){const t=r.nByteLength;e=(0,o.ensureBytes)("compactSignature",e,t*2);return new Signature(slcNum(e,0,t),slcNum(e,t,2*t))}static fromDER(e){const{r:r,s:n}=t.DER.toSig((0,o.ensureBytes)("DER",e));return new Signature(r,n)}assertValidity(){s.aInRange("r",this.r,d,a);s.aInRange("s",this.s,d,a)}addRecoveryBit(e){return new Signature(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:i,recovery:s}=this;const a=_((0,o.ensureBytes)("msgHash",e));if(s==null||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const c=s===2||s===3?t+r.n:t;if(c>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=(s&1)===0?"02":"03";const d=m.fromHex(u+numToNByteStr(c));const p=invN(c);const y=modN(-a*p);const g=modN(i*p);const b=m.BASE.multiplyAndAddUnsafe(d,y,g);if(!b)throw new Error("point at infinify");b.assertValidity();return b}hasHighS(){return isBiggerThanHalfOrder(this.s)}normalizeS(){return this.hasHighS()?new Signature(this.r,modN(-this.s),this.recovery):this}toDERRawBytes(){return s.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return s.hexToBytes(this.toCompactHex())}toCompactHex(){return numToNByteStr(this.r)+numToNByteStr(this.s)}}const v={isValidPrivateKey(e){try{y(e);return true}catch(e){return false}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const e=i.getMinHashLength(r.n);return i.mapHashToField(r.randomBytes(e),r.n)},precompute(e=8,t=m.BASE){t._setWindowSize(e);t.multiply(BigInt(3));return t}};function getPublicKey(e,t=true){return m.fromPrivateKey(e).toRawBytes(t)}function isProbPub(e){const t=s.isBytes(e);const r=typeof e==="string";const n=(t||r)&&e.length;if(t)return n===c||n===p;if(r)return n===2*c||n===2*p;if(e instanceof m)return true;return false}function getSharedSecret(e,t,r=true){if(isProbPub(e))throw new Error("first arg must be private key");if(!isProbPub(t))throw new Error("second arg must be public key");const n=m.fromHex(t);return n.multiply(y(e)).toRawBytes(r)}const w=r.bits2int||function(e){const t=s.bytesToNumberBE(e);const n=e.length*8-r.nBitLength;return n>0?t>>BigInt(n):t};const _=r.bits2int_modN||function(e){return modN(w(e))};const C=s.bitMask(r.nBitLength);function int2octets(e){s.aInRange(`num < 2^${r.nBitLength}`,e,u,C);return s.numberToBytesBE(e,r.nByteLength)}function prepSig(e,t,i=P){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:c}=r;let{lowS:p,prehash:g,extraEntropy:v}=i;if(p==null)p=true;e=(0,o.ensureBytes)("msgHash",e);validateSigVerOpts(i);if(g)e=(0,o.ensureBytes)("prehashed msgHash",a(e));const C=_(e);const O=y(t);const E=[int2octets(O),int2octets(C)];if(v!=null&&v!==false){const e=v===true?c(n.BYTES):v;E.push((0,o.ensureBytes)("extraEntropy",e))}const I=s.concatBytes(...E);const k=C;function k2sig(e){const t=w(e);if(!b(t))return;const r=invN(t);const n=m.BASE.multiply(t).toAffine();const i=modN(n.x);if(i===u)return;const s=modN(r*modN(k+i*O));if(s===u)return;let o=(n.x===i?0:2)|Number(n.y&d);let a=s;if(p&&isBiggerThanHalfOrder(s)){a=normalizeS(s);o^=1}return new Signature(i,a,o)}return{seed:I,k2sig:k2sig}}const P={lowS:r.lowS,prehash:false};const O={lowS:r.lowS,prehash:false};function sign(e,t,n=P){const{seed:i,k2sig:o}=prepSig(e,t,n);const a=r;const c=s.createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac);return c(i,o)}m.BASE._setWindowSize(8);function verify(e,n,i,a=O){const c=e;n=(0,o.ensureBytes)("msgHash",n);i=(0,o.ensureBytes)("publicKey",i);if("strict"in a)throw new Error("options.strict was renamed to lowS");validateSigVerOpts(a);const{lowS:u,prehash:d}=a;let p=undefined;let y;try{if(typeof c==="string"||s.isBytes(c)){try{p=Signature.fromDER(c)}catch(e){if(!(e instanceof t.DER.Err))throw e;p=Signature.fromCompact(c)}}else if(typeof c==="object"&&typeof c.r==="bigint"&&typeof c.s==="bigint"){const{r:e,s:t}=c;p=new Signature(e,t)}else{throw new Error("PARSE")}y=m.fromHex(i)}catch(e){if(e.message==="PARSE")throw new Error(`signature must be Signature instance, Uint8Array or hex string`);return false}if(u&&p.hasHighS())return false;if(d)n=r.hash(n);const{r:g,s:b}=p;const v=_(n);const w=invN(b);const C=modN(v*w);const P=modN(g*w);const E=m.BASE.multiplyAndAddUnsafe(y,C,P)?.toAffine();if(!E)return false;const I=modN(E.x);return I===g}return{CURVE:r,getPublicKey:getPublicKey,getSharedSecret:getSharedSecret,sign:sign,verify:verify,ProjectivePoint:m,Signature:Signature,utils:v}}function SWUFpSqrtRatio(e,t){const r=e.ORDER;let n=u;for(let e=r-d;e%p===u;e/=p)n+=d;const i=n;const s=p<<i-d-d;const o=s*p;const a=(r-d)/o;const c=(a-d)/p;const g=o-d;const b=s;const v=e.pow(t,a);const w=e.pow(t,(a+d)/p);let sqrtRatio=(t,r)=>{let n=v;let s=e.pow(r,g);let o=e.sqr(s);o=e.mul(o,r);let a=e.mul(t,o);a=e.pow(a,c);a=e.mul(a,s);s=e.mul(a,r);o=e.mul(a,t);let u=e.mul(o,s);a=e.pow(u,b);let m=e.eql(a,e.ONE);s=e.mul(o,w);a=e.mul(u,n);o=e.cmov(s,o,m);u=e.cmov(a,u,m);for(let t=i;t>d;t--){let r=t-p;r=p<<r-d;let i=e.pow(u,r);const a=e.eql(i,e.ONE);s=e.mul(o,n);n=e.mul(n,n);i=e.mul(u,n);o=e.cmov(s,o,a);u=e.cmov(i,u,a)}return{isValid:m,value:o}};if(e.ORDER%y===m){const r=(e.ORDER-m)/y;const n=e.sqrt(e.neg(t));sqrtRatio=(t,i)=>{let s=e.sqr(i);const o=e.mul(t,i);s=e.mul(s,o);let a=e.pow(s,r);a=e.mul(a,o);const c=e.mul(a,n);const u=e.mul(e.sqr(a),i);const d=e.eql(u,t);let p=e.cmov(c,a,d);return{isValid:d,value:p}}}return sqrtRatio}function mapToCurveSimpleSWU(e,t){i.validateField(e);if(!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=SWUFpSqrtRatio(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,c,u,d,p;i=e.sqr(n);i=e.mul(i,t.Z);s=e.sqr(i);s=e.add(s,i);o=e.add(s,e.ONE);o=e.mul(o,t.B);a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO));a=e.mul(a,t.A);s=e.sqr(o);u=e.sqr(a);c=e.mul(u,t.A);s=e.add(s,c);s=e.mul(s,o);u=e.mul(u,a);c=e.mul(u,t.B);s=e.add(s,c);d=e.mul(i,o);const{isValid:m,value:y}=r(s,u);p=e.mul(i,n);p=e.mul(p,y);d=e.cmov(d,o,m);p=e.cmov(p,y,m);const g=e.isOdd(n)===e.isOdd(p);p=e.cmov(e.neg(p),p,g);d=e.div(d,a);return{x:d,y:p}}}},37527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.encodeToCurve=t.hashToCurve=t.secp256r1=t.p256=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const n=r(8008);const i=r(11946);const s=r(20435);const o=r(17132);const a=r(5214);const c=(0,o.Field)(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"));const u=c.create(BigInt("-3"));const d=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b");t.p256=(0,i.createCurve)({a:u,b:d,Fp:c,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:false},n.sha256);t.secp256r1=t.p256;const p=(()=>(0,a.mapToCurveSimpleSWU)(c,{A:u,B:d,Z:c.create(BigInt("-10"))}))();const m=(()=>(0,s.createHasher)(t.secp256r1.ProjectivePoint,(e=>p(e[0])),{DST:"P256_XMD:SHA-256_SSWU_RO_",encodeDST:"P256_XMD:SHA-256_SSWU_NU_",p:c.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256}))();t.hashToCurve=(()=>m.hashToCurve)();t.encodeToCurve=(()=>m.encodeToCurve)()},55498:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isBytes=isBytes;t.number=number;t.bool=bool;t.bytes=bytes;t.hash=hash;t.exists=exists;t.output=output;function number(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function bool(e){if(typeof e!=="boolean")throw new Error(`boolean expected, not ${e}`)}function isBytes(e){return e instanceof Uint8Array||e!=null&&typeof e==="object"&&e.constructor.name==="Uint8Array"}function bytes(e,...t){if(!isBytes(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function hash(e){if(typeof e!=="function"||typeof e.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number(e.outputLen);number(e.blockLen)}function exists(e,t=true){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function output(e,t){bytes(e);const r=t.outputLen;if(e.length<r){throw new Error(`digestInto() expects output buffer of length at least ${r}`)}}const r={number:number,bool:bool,bytes:bytes,hash:hash,exists:exists,output:output};t["default"]=r},67609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HashMD=t.Maj=t.Chi=void 0;const n=r(55498);const i=r(88257);function setBigUint64(e,t,r,n){if(typeof e.setBigUint64==="function")return e.setBigUint64(t,r,n);const i=BigInt(32);const s=BigInt(4294967295);const o=Number(r>>i&s);const a=Number(r&s);const c=n?4:0;const u=n?0:4;e.setUint32(t+c,o,n);e.setUint32(t+u,a,n)}const Chi=(e,t,r)=>e&t^~e&r;t.Chi=Chi;const Maj=(e,t,r)=>e&t^e&r^t&r;t.Maj=Maj;class HashMD extends i.Hash{constructor(e,t,r,n){super();this.blockLen=e;this.outputLen=t;this.padOffset=r;this.isLE=n;this.finished=false;this.length=0;this.pos=0;this.destroyed=false;this.buffer=new Uint8Array(e);this.view=(0,i.createView)(this.buffer)}update(e){(0,n.exists)(this);const{view:t,buffer:r,blockLen:s}=this;e=(0,i.toBytes)(e);const o=e.length;for(let n=0;n<o;){const a=Math.min(s-this.pos,o-n);if(a===s){const t=(0,i.createView)(e);for(;s<=o-n;n+=s)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos);this.pos+=a;n+=a;if(this.pos===s){this.process(t,0);this.pos=0}}this.length+=e.length;this.roundClean();return this}digestInto(e){(0,n.exists)(this);(0,n.output)(e,this);this.finished=true;const{buffer:t,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;t[a++]=128;this.buffer.subarray(a).fill(0);if(this.padOffset>s-a){this.process(r,0);a=0}for(let e=a;e<s;e++)t[e]=0;setBigUint64(r,s-8,BigInt(this.length*8),o);this.process(r,0);const c=(0,i.createView)(e);const u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=u/4;const p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)c.setUint32(4*e,p[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);this.destroy();return r}_cloneInto(e){e||(e=new this.constructor);e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;e.length=n;e.pos=o;e.finished=i;e.destroyed=s;if(n%t)e.buffer.set(r);return e}}t.HashMD=HashMD},77997:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.crypto=void 0;const n=r(6005);t.crypto=n&&typeof n==="object"&&"webcrypto"in n?n.webcrypto:n&&typeof n==="object"&&"randomBytes"in n?n:undefined},52790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.hmac=t.HMAC=void 0;const n=r(55498);const i=r(88257);class HMAC extends i.Hash{constructor(e,t){super();this.finished=false;this.destroyed=false;(0,n.hash)(e);const r=(0,i.toBytes)(t);this.iHash=e.create();if(typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const s=this.blockLen;const o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o);this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=54^92;this.oHash.update(o);o.fill(0)}update(e){(0,n.exists)(this);this.iHash.update(e);return this}digestInto(e){(0,n.exists)(this);(0,n.bytes)(e,this.outputLen);this.finished=true;this.iHash.digestInto(e);this.oHash.update(e);this.oHash.digestInto(e);this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);this.digestInto(e);return e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;e=e;e.finished=n;e.destroyed=i;e.blockLen=s;e.outputLen=o;e.oHash=t._cloneInto(e.oHash);e.iHash=r._cloneInto(e.iHash);return e}destroy(){this.destroyed=true;this.oHash.destroy();this.iHash.destroy()}}t.HMAC=HMAC;const hmac=(e,t,r)=>new HMAC(e,t).update(r).digest();t.hmac=hmac;t.hmac.create=(e,t)=>new HMAC(e,t)},8008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sha224=t.sha256=t.SHA256=void 0;const n=r(67609);const i=r(88257);const s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);const o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const a=new Uint32Array(64);class SHA256 extends n.HashMD{constructor(){super(64,32,8,false);this.A=o[0]|0;this.B=o[1]|0;this.C=o[2]|0;this.D=o[3]|0;this.E=o[4]|0;this.F=o[5]|0;this.G=o[6]|0;this.H=o[7]|0}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=e|0;this.B=t|0;this.C=r|0;this.D=n|0;this.E=i|0;this.F=s|0;this.G=o|0;this.H=a|0}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,false);for(let e=16;e<64;e++){const t=a[e-15];const r=a[e-2];const n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3;const s=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;a[e]=s+a[e-7]+n+a[e-16]|0}let{A:r,B:o,C:c,D:u,E:d,F:p,G:m,H:y}=this;for(let e=0;e<64;e++){const t=(0,i.rotr)(d,6)^(0,i.rotr)(d,11)^(0,i.rotr)(d,25);const g=y+t+(0,n.Chi)(d,p,m)+s[e]+a[e]|0;const b=(0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22);const v=b+(0,n.Maj)(r,o,c)|0;y=m;m=p;p=d;d=u+g|0;u=c;c=o;o=r;r=g+v|0}r=r+this.A|0;o=o+this.B|0;c=c+this.C|0;u=u+this.D|0;d=d+this.E|0;p=p+this.F|0;m=m+this.G|0;y=y+this.H|0;this.set(r,o,c,u,d,p,m,y)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0);this.buffer.fill(0)}}t.SHA256=SHA256;class SHA224 extends SHA256{constructor(){super();this.A=3238371032|0;this.B=914150663|0;this.C=812702999|0;this.D=4144912697|0;this.E=4290775857|0;this.F=1750603025|0;this.G=1694076839|0;this.H=3204075428|0;this.outputLen=28}}t.sha256=(0,i.wrapConstructor)((()=>new SHA256));t.sha224=(0,i.wrapConstructor)((()=>new SHA224))},88257:(e,t,r)=>{"use strict";
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:true});t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0;t.isBytes=isBytes;t.byteSwap32=byteSwap32;t.bytesToHex=bytesToHex;t.hexToBytes=hexToBytes;t.asyncLoop=asyncLoop;t.utf8ToBytes=utf8ToBytes;t.toBytes=toBytes;t.concatBytes=concatBytes;t.checkOpts=checkOpts;t.wrapConstructor=wrapConstructor;t.wrapConstructorWithOpts=wrapConstructorWithOpts;t.wrapXOFConstructorWithOpts=wrapXOFConstructorWithOpts;t.randomBytes=randomBytes;const n=r(77997);const i=r(55498);function isBytes(e){return e instanceof Uint8Array||e!=null&&typeof e==="object"&&e.constructor.name==="Uint8Array"}const u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.u8=u8;const u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));t.u32=u32;const createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);t.createView=createView;const rotr=(e,t)=>e<<32-t|e>>>t;t.rotr=rotr;const rotl=(e,t)=>e<<t|e>>>32-t>>>0;t.rotl=rotl;t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;t.byteSwap=byteSwap;t.byteSwapIfBE=t.isLE?e=>e:e=>(0,t.byteSwap)(e);function byteSwap32(e){for(let r=0;r<e.length;r++){e[r]=(0,t.byteSwap)(e[r])}}const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex(e){(0,i.bytes)(e);let t="";for(let r=0;r<e.length;r++){t+=s[e[r]]}return t}const o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(e){if(e>=o._0&&e<=o._9)return e-o._0;if(e>=o._A&&e<=o._F)return e-(o._A-10);if(e>=o._a&&e<=o._f)return e-(o._a-10);return}function hexToBytes(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;const r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=asciiToBase16(e.charCodeAt(i));const s=asciiToBase16(e.charCodeAt(i+1));if(r===undefined||s===undefined){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=r*16+s}return n}const nextTick=async()=>{};t.nextTick=nextTick;async function asyncLoop(e,r,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;if(e>=0&&e<r)continue;await(0,t.nextTick)();i+=e}}function utf8ToBytes(e){if(typeof e!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array((new TextEncoder).encode(e))}function toBytes(e){if(typeof e==="string")e=utf8ToBytes(e);(0,i.bytes)(e);return e}function concatBytes(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];(0,i.bytes)(n);t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n);n+=i.length}return r}class Hash{clone(){return this._cloneInto()}}t.Hash=Hash;const a={}.toString;function checkOpts(e,t){if(t!==undefined&&a.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");const r=Object.assign(e,t);return r}function wrapConstructor(e){const hashC=t=>e().update(toBytes(t)).digest();const t=e();hashC.outputLen=t.outputLen;hashC.blockLen=t.blockLen;hashC.create=()=>e();return hashC}function wrapConstructorWithOpts(e){const hashC=(t,r)=>e(r).update(toBytes(t)).digest();const t=e({});hashC.outputLen=t.outputLen;hashC.blockLen=t.blockLen;hashC.create=t=>e(t);return hashC}function wrapXOFConstructorWithOpts(e){const hashC=(t,r)=>e(r).update(toBytes(t)).digest();const t=e({});hashC.outputLen=t.outputLen;hashC.blockLen=t.blockLen;hashC.create=t=>e(t);return hashC}function randomBytes(e=32){if(n.crypto&&typeof n.crypto.getRandomValues==="function"){return n.crypto.getRandomValues(new Uint8Array(e))}if(n.crypto&&typeof n.crypto.randomBytes==="function"){return n.crypto.randomBytes(e)}throw new Error("crypto.getRandomValues must be defined")}},52455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Attribute=void 0;const n=r(80516);const i=r(61237);class Attribute{constructor(e={}){this.attrType="";this.attrValues=[];Object.assign(this,e)}}t.Attribute=Attribute;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],Attribute.prototype,"attrType",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,repeated:"set"})],Attribute.prototype,"attrValues",void 0)},62754:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CounterSignature=t.SigningTime=void 0;const n=r(80516);const i=r(61237);const s=r(20168);const o=r(27754);let a=class SigningTime extends s.Time{};a=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],a);t.SigningTime=a;let c=class CounterSignature extends o.SignerInfo{};c=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Sequence})],c);t.CounterSignature=c},24585:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.CertificateSet=t.CertificateChoices=t.OtherCertificateFormat=void 0;const i=r(80516);const s=r(61237);const o=r(20168);const a=r(45335);class OtherCertificateFormat{constructor(e={}){this.otherCertFormat="";this.otherCert=new ArrayBuffer(0);Object.assign(this,e)}}t.OtherCertificateFormat=OtherCertificateFormat;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],OtherCertificateFormat.prototype,"otherCertFormat",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Any})],OtherCertificateFormat.prototype,"otherCert",void 0);let c=class CertificateChoices{constructor(e={}){Object.assign(this,e)}};t.CertificateChoices=c;i.__decorate([(0,s.AsnProp)({type:o.Certificate})],c.prototype,"certificate",void 0);i.__decorate([(0,s.AsnProp)({type:a.AttributeCertificate,context:2,implicit:true})],c.prototype,"v2AttrCert",void 0);i.__decorate([(0,s.AsnProp)({type:OtherCertificateFormat,context:3,implicit:true})],c.prototype,"other",void 0);t.CertificateChoices=c=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Choice})],c);let u=n=class CertificateSet extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.CertificateSet=u;t.CertificateSet=u=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Set,itemType:c})],u)},40090:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ContentInfo=void 0;const n=r(80516);const i=r(61237);class ContentInfo{constructor(e={}){this.contentType="";this.content=new ArrayBuffer(0);Object.assign(this,e)}}t.ContentInfo=ContentInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],ContentInfo.prototype,"contentType",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,context:0})],ContentInfo.prototype,"content",void 0)},2332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EncapsulatedContentInfo=t.EncapsulatedContent=void 0;const n=r(80516);const i=r(61237);let s=class EncapsulatedContent{constructor(e={}){Object.assign(this,e)}};t.EncapsulatedContent=s;n.__decorate([(0,i.AsnProp)({type:i.OctetString})],s.prototype,"single",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any})],s.prototype,"any",void 0);t.EncapsulatedContent=s=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],s);class EncapsulatedContentInfo{constructor(e={}){this.eContentType="";Object.assign(this,e)}}t.EncapsulatedContentInfo=EncapsulatedContentInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],EncapsulatedContentInfo.prototype,"eContentType",void 0);n.__decorate([(0,i.AsnProp)({type:s,context:0,optional:true})],EncapsulatedContentInfo.prototype,"eContent",void 0)},409:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EncryptedContentInfo=t.EncryptedContent=void 0;const n=r(80516);const i=r(61237);const s=r(49269);let o=class EncryptedContent{constructor(e={}){Object.assign(this,e)}};t.EncryptedContent=o;n.__decorate([(0,i.AsnProp)({type:i.OctetString,context:0,implicit:true,optional:true})],o.prototype,"value",void 0);n.__decorate([(0,i.AsnProp)({type:i.OctetString,converter:i.AsnConstructedOctetStringConverter,context:0,implicit:true,optional:true,repeated:"sequence"})],o.prototype,"constructedValue",void 0);t.EncryptedContent=o=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],o);class EncryptedContentInfo{constructor(e={}){this.contentType="";this.contentEncryptionAlgorithm=new s.ContentEncryptionAlgorithmIdentifier;Object.assign(this,e)}}t.EncryptedContentInfo=EncryptedContentInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],EncryptedContentInfo.prototype,"contentType",void 0);n.__decorate([(0,i.AsnProp)({type:s.ContentEncryptionAlgorithmIdentifier})],EncryptedContentInfo.prototype,"contentEncryptionAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:o,optional:true})],EncryptedContentInfo.prototype,"encryptedContent",void 0)},65226:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.EnvelopedData=t.UnprotectedAttributes=void 0;const i=r(80516);const s=r(61237);const o=r(49269);const a=r(52455);const c=r(91727);const u=r(36922);const d=r(409);let p=n=class UnprotectedAttributes extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.UnprotectedAttributes=p;t.UnprotectedAttributes=p=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Set,itemType:a.Attribute})],p);class EnvelopedData{constructor(e={}){this.version=o.CMSVersion.v0;this.recipientInfos=new c.RecipientInfos;this.encryptedContentInfo=new d.EncryptedContentInfo;Object.assign(this,e)}}t.EnvelopedData=EnvelopedData;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer})],EnvelopedData.prototype,"version",void 0);i.__decorate([(0,s.AsnProp)({type:u.OriginatorInfo,context:0,implicit:true,optional:true})],EnvelopedData.prototype,"originatorInfo",void 0);i.__decorate([(0,s.AsnProp)({type:c.RecipientInfos})],EnvelopedData.prototype,"recipientInfos",void 0);i.__decorate([(0,s.AsnProp)({type:d.EncryptedContentInfo})],EnvelopedData.prototype,"encryptedContentInfo",void 0);i.__decorate([(0,s.AsnProp)({type:p,context:1,implicit:true,optional:true})],EnvelopedData.prototype,"unprotectedAttrs",void 0)},74113:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(62754),t);n.__exportStar(r(52455),t);n.__exportStar(r(24585),t);n.__exportStar(r(40090),t);n.__exportStar(r(2332),t);n.__exportStar(r(409),t);n.__exportStar(r(65226),t);n.__exportStar(r(34164),t);n.__exportStar(r(2672),t);n.__exportStar(r(74373),t);n.__exportStar(r(98346),t);n.__exportStar(r(83986),t);n.__exportStar(r(36922),t);n.__exportStar(r(71799),t);n.__exportStar(r(67217),t);n.__exportStar(r(91727),t);n.__exportStar(r(24635),t);n.__exportStar(r(68838),t);n.__exportStar(r(9546),t);n.__exportStar(r(27754),t);n.__exportStar(r(49269),t)},34164:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IssuerAndSerialNumber=void 0;const n=r(80516);const i=r(61237);const s=r(20168);class IssuerAndSerialNumber{constructor(e={}){this.issuer=new s.Name;this.serialNumber=new ArrayBuffer(0);Object.assign(this,e)}}t.IssuerAndSerialNumber=IssuerAndSerialNumber;n.__decorate([(0,i.AsnProp)({type:s.Name})],IssuerAndSerialNumber.prototype,"issuer",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],IssuerAndSerialNumber.prototype,"serialNumber",void 0)},2672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.KEKRecipientInfo=t.KEKIdentifier=void 0;const n=r(80516);const i=r(61237);const s=r(28921);const o=r(49269);class KEKIdentifier{constructor(e={}){this.keyIdentifier=new i.OctetString;Object.assign(this,e)}}t.KEKIdentifier=KEKIdentifier;n.__decorate([(0,i.AsnProp)({type:i.OctetString})],KEKIdentifier.prototype,"keyIdentifier",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.GeneralizedTime,optional:true})],KEKIdentifier.prototype,"date",void 0);n.__decorate([(0,i.AsnProp)({type:s.OtherKeyAttribute,optional:true})],KEKIdentifier.prototype,"other",void 0);class KEKRecipientInfo{constructor(e={}){this.version=o.CMSVersion.v4;this.kekid=new KEKIdentifier;this.keyEncryptionAlgorithm=new o.KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new i.OctetString;Object.assign(this,e)}}t.KEKRecipientInfo=KEKRecipientInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],KEKRecipientInfo.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:KEKIdentifier})],KEKRecipientInfo.prototype,"kekid",void 0);n.__decorate([(0,i.AsnProp)({type:o.KeyEncryptionAlgorithmIdentifier})],KEKRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.OctetString})],KEKRecipientInfo.prototype,"encryptedKey",void 0)},74373:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.KeyAgreeRecipientInfo=t.OriginatorIdentifierOrKey=t.OriginatorPublicKey=t.RecipientEncryptedKeys=t.RecipientEncryptedKey=t.KeyAgreeRecipientIdentifier=t.RecipientKeyIdentifier=void 0;const i=r(80516);const s=r(61237);const o=r(49269);const a=r(34164);const c=r(20168);const u=r(28921);class RecipientKeyIdentifier{constructor(e={}){this.subjectKeyIdentifier=new c.SubjectKeyIdentifier;Object.assign(this,e)}}t.RecipientKeyIdentifier=RecipientKeyIdentifier;i.__decorate([(0,s.AsnProp)({type:c.SubjectKeyIdentifier})],RecipientKeyIdentifier.prototype,"subjectKeyIdentifier",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.GeneralizedTime,optional:true})],RecipientKeyIdentifier.prototype,"date",void 0);i.__decorate([(0,s.AsnProp)({type:u.OtherKeyAttribute,optional:true})],RecipientKeyIdentifier.prototype,"other",void 0);let d=class KeyAgreeRecipientIdentifier{constructor(e={}){Object.assign(this,e)}};t.KeyAgreeRecipientIdentifier=d;i.__decorate([(0,s.AsnProp)({type:RecipientKeyIdentifier,context:0,implicit:true,optional:true})],d.prototype,"rKeyId",void 0);i.__decorate([(0,s.AsnProp)({type:a.IssuerAndSerialNumber,optional:true})],d.prototype,"issuerAndSerialNumber",void 0);t.KeyAgreeRecipientIdentifier=d=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Choice})],d);class RecipientEncryptedKey{constructor(e={}){this.rid=new d;this.encryptedKey=new s.OctetString;Object.assign(this,e)}}t.RecipientEncryptedKey=RecipientEncryptedKey;i.__decorate([(0,s.AsnProp)({type:d})],RecipientEncryptedKey.prototype,"rid",void 0);i.__decorate([(0,s.AsnProp)({type:s.OctetString})],RecipientEncryptedKey.prototype,"encryptedKey",void 0);let p=n=class RecipientEncryptedKeys extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.RecipientEncryptedKeys=p;t.RecipientEncryptedKeys=p=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:RecipientEncryptedKey})],p);class OriginatorPublicKey{constructor(e={}){this.algorithm=new c.AlgorithmIdentifier;this.publicKey=new ArrayBuffer(0);Object.assign(this,e)}}t.OriginatorPublicKey=OriginatorPublicKey;i.__decorate([(0,s.AsnProp)({type:c.AlgorithmIdentifier})],OriginatorPublicKey.prototype,"algorithm",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.BitString})],OriginatorPublicKey.prototype,"publicKey",void 0);let m=class OriginatorIdentifierOrKey{constructor(e={}){Object.assign(this,e)}};t.OriginatorIdentifierOrKey=m;i.__decorate([(0,s.AsnProp)({type:c.SubjectKeyIdentifier,context:0,implicit:true,optional:true})],m.prototype,"subjectKeyIdentifier",void 0);i.__decorate([(0,s.AsnProp)({type:OriginatorPublicKey,context:1,implicit:true,optional:true})],m.prototype,"originatorKey",void 0);i.__decorate([(0,s.AsnProp)({type:a.IssuerAndSerialNumber,optional:true})],m.prototype,"issuerAndSerialNumber",void 0);t.OriginatorIdentifierOrKey=m=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Choice})],m);class KeyAgreeRecipientInfo{constructor(e={}){this.version=o.CMSVersion.v3;this.originator=new m;this.keyEncryptionAlgorithm=new o.KeyEncryptionAlgorithmIdentifier;this.recipientEncryptedKeys=new p;Object.assign(this,e)}}t.KeyAgreeRecipientInfo=KeyAgreeRecipientInfo;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer})],KeyAgreeRecipientInfo.prototype,"version",void 0);i.__decorate([(0,s.AsnProp)({type:m,context:0})],KeyAgreeRecipientInfo.prototype,"originator",void 0);i.__decorate([(0,s.AsnProp)({type:s.OctetString,context:1,optional:true})],KeyAgreeRecipientInfo.prototype,"ukm",void 0);i.__decorate([(0,s.AsnProp)({type:o.KeyEncryptionAlgorithmIdentifier})],KeyAgreeRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);i.__decorate([(0,s.AsnProp)({type:p})],KeyAgreeRecipientInfo.prototype,"recipientEncryptedKeys",void 0)},98346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.KeyTransRecipientInfo=t.RecipientIdentifier=void 0;const n=r(80516);const i=r(61237);const s=r(49269);const o=r(34164);const a=r(20168);let c=class RecipientIdentifier{constructor(e={}){Object.assign(this,e)}};t.RecipientIdentifier=c;n.__decorate([(0,i.AsnProp)({type:a.SubjectKeyIdentifier,context:0,implicit:true})],c.prototype,"subjectKeyIdentifier",void 0);n.__decorate([(0,i.AsnProp)({type:o.IssuerAndSerialNumber})],c.prototype,"issuerAndSerialNumber",void 0);t.RecipientIdentifier=c=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],c);class KeyTransRecipientInfo{constructor(e={}){this.version=s.CMSVersion.v0;this.rid=new c;this.keyEncryptionAlgorithm=new s.KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new i.OctetString;Object.assign(this,e)}}t.KeyTransRecipientInfo=KeyTransRecipientInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],KeyTransRecipientInfo.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:c})],KeyTransRecipientInfo.prototype,"rid",void 0);n.__decorate([(0,i.AsnProp)({type:s.KeyEncryptionAlgorithmIdentifier})],KeyTransRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.OctetString})],KeyTransRecipientInfo.prototype,"encryptedKey",void 0)},83986:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.id_authData=t.id_encryptedData=t.id_digestedData=t.id_envelopedData=t.id_signedData=t.id_data=t.id_ct_contentInfo=void 0;t.id_ct_contentInfo="1.2.840.113549.1.9.16.1.6";t.id_data="1.2.840.113549.1.7.1";t.id_signedData="1.2.840.113549.1.7.2";t.id_envelopedData="1.2.840.113549.1.7.3";t.id_digestedData="1.2.840.113549.1.7.5";t.id_encryptedData="1.2.840.113549.1.7.6";t.id_authData="1.2.840.113549.1.9.16.1.2"},36922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OriginatorInfo=void 0;const n=r(80516);const i=r(61237);const s=r(24585);const o=r(24635);class OriginatorInfo{constructor(e={}){Object.assign(this,e)}}t.OriginatorInfo=OriginatorInfo;n.__decorate([(0,i.AsnProp)({type:s.CertificateSet,context:0,implicit:true,optional:true})],OriginatorInfo.prototype,"certs",void 0);n.__decorate([(0,i.AsnProp)({type:o.RevocationInfoChoices,context:1,implicit:true,optional:true})],OriginatorInfo.prototype,"crls",void 0)},28921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OtherKeyAttribute=void 0;const n=r(80516);const i=r(61237);class OtherKeyAttribute{constructor(e={}){this.keyAttrId="";Object.assign(this,e)}}t.OtherKeyAttribute=OtherKeyAttribute;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],OtherKeyAttribute.prototype,"keyAttrId",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,optional:true})],OtherKeyAttribute.prototype,"keyAttr",void 0)},71799:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PasswordRecipientInfo=void 0;const n=r(80516);const i=r(61237);const s=r(49269);class PasswordRecipientInfo{constructor(e={}){this.version=s.CMSVersion.v0;this.keyEncryptionAlgorithm=new s.KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new i.OctetString;Object.assign(this,e)}}t.PasswordRecipientInfo=PasswordRecipientInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],PasswordRecipientInfo.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:s.KeyDerivationAlgorithmIdentifier,context:0,optional:true})],PasswordRecipientInfo.prototype,"keyDerivationAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:s.KeyEncryptionAlgorithmIdentifier})],PasswordRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.OctetString})],PasswordRecipientInfo.prototype,"encryptedKey",void 0)},67217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RecipientInfo=t.OtherRecipientInfo=void 0;const n=r(80516);const i=r(61237);const s=r(74373);const o=r(98346);const a=r(2672);const c=r(71799);class OtherRecipientInfo{constructor(e={}){this.oriType="";this.oriValue=new ArrayBuffer(0);Object.assign(this,e)}}t.OtherRecipientInfo=OtherRecipientInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],OtherRecipientInfo.prototype,"oriType",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any})],OtherRecipientInfo.prototype,"oriValue",void 0);let u=class RecipientInfo{constructor(e={}){Object.assign(this,e)}};t.RecipientInfo=u;n.__decorate([(0,i.AsnProp)({type:o.KeyTransRecipientInfo,optional:true})],u.prototype,"ktri",void 0);n.__decorate([(0,i.AsnProp)({type:s.KeyAgreeRecipientInfo,context:1,implicit:true,optional:true})],u.prototype,"kari",void 0);n.__decorate([(0,i.AsnProp)({type:a.KEKRecipientInfo,context:2,implicit:true,optional:true})],u.prototype,"kekri",void 0);n.__decorate([(0,i.AsnProp)({type:c.PasswordRecipientInfo,context:3,implicit:true,optional:true})],u.prototype,"pwri",void 0);n.__decorate([(0,i.AsnProp)({type:OtherRecipientInfo,context:4,implicit:true,optional:true})],u.prototype,"ori",void 0);t.RecipientInfo=u=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],u)},91727:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.RecipientInfos=void 0;const i=r(80516);const s=r(61237);const o=r(67217);let a=n=class RecipientInfos extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.RecipientInfos=a;t.RecipientInfos=a=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Set,itemType:o.RecipientInfo})],a)},24635:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.RevocationInfoChoices=t.RevocationInfoChoice=t.OtherRevocationInfoFormat=t.id_ri_scvp=t.id_ri_ocsp_response=t.id_ri=void 0;const i=r(80516);const s=r(61237);const o=r(20168);t.id_ri=`${o.id_pkix}.16`;t.id_ri_ocsp_response=`${t.id_ri}.2`;t.id_ri_scvp=`${t.id_ri}.4`;class OtherRevocationInfoFormat{constructor(e={}){this.otherRevInfoFormat="";this.otherRevInfo=new ArrayBuffer(0);Object.assign(this,e)}}t.OtherRevocationInfoFormat=OtherRevocationInfoFormat;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],OtherRevocationInfoFormat.prototype,"otherRevInfoFormat",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Any})],OtherRevocationInfoFormat.prototype,"otherRevInfo",void 0);let a=class RevocationInfoChoice{constructor(e={}){this.other=new OtherRevocationInfoFormat;Object.assign(this,e)}};t.RevocationInfoChoice=a;i.__decorate([(0,s.AsnProp)({type:OtherRevocationInfoFormat,context:1,implicit:true})],a.prototype,"other",void 0);t.RevocationInfoChoice=a=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Choice})],a);let c=n=class RevocationInfoChoices extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.RevocationInfoChoices=c;t.RevocationInfoChoices=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Set,itemType:a})],c)},68838:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.SignedData=t.DigestAlgorithmIdentifiers=void 0;const i=r(80516);const s=r(61237);const o=r(24585);const a=r(49269);const c=r(2332);const u=r(24635);const d=r(27754);let p=n=class DigestAlgorithmIdentifiers extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.DigestAlgorithmIdentifiers=p;t.DigestAlgorithmIdentifiers=p=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Set,itemType:a.DigestAlgorithmIdentifier})],p);class SignedData{constructor(e={}){this.version=a.CMSVersion.v0;this.digestAlgorithms=new p;this.encapContentInfo=new c.EncapsulatedContentInfo;this.signerInfos=new d.SignerInfos;Object.assign(this,e)}}t.SignedData=SignedData;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer})],SignedData.prototype,"version",void 0);i.__decorate([(0,s.AsnProp)({type:p})],SignedData.prototype,"digestAlgorithms",void 0);i.__decorate([(0,s.AsnProp)({type:c.EncapsulatedContentInfo})],SignedData.prototype,"encapContentInfo",void 0);i.__decorate([(0,s.AsnProp)({type:o.CertificateSet,context:0,implicit:true,optional:true})],SignedData.prototype,"certificates",void 0);i.__decorate([(0,s.AsnProp)({type:u.RevocationInfoChoices,context:1,implicit:true,optional:true})],SignedData.prototype,"crls",void 0);i.__decorate([(0,s.AsnProp)({type:d.SignerInfos})],SignedData.prototype,"signerInfos",void 0)},9546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SignerIdentifier=void 0;const n=r(80516);const i=r(61237);const s=r(34164);const o=r(20168);let a=class SignerIdentifier{constructor(e={}){Object.assign(this,e)}};t.SignerIdentifier=a;n.__decorate([(0,i.AsnProp)({type:o.SubjectKeyIdentifier,context:0,implicit:true})],a.prototype,"subjectKeyIdentifier",void 0);n.__decorate([(0,i.AsnProp)({type:s.IssuerAndSerialNumber})],a.prototype,"issuerAndSerialNumber",void 0);t.SignerIdentifier=a=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],a)},27754:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.SignerInfos=t.SignerInfo=void 0;const i=r(80516);const s=r(61237);const o=r(9546);const a=r(49269);const c=r(52455);class SignerInfo{constructor(e={}){this.version=a.CMSVersion.v0;this.sid=new o.SignerIdentifier;this.digestAlgorithm=new a.DigestAlgorithmIdentifier;this.signatureAlgorithm=new a.SignatureAlgorithmIdentifier;this.signature=new s.OctetString;Object.assign(this,e)}}t.SignerInfo=SignerInfo;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer})],SignerInfo.prototype,"version",void 0);i.__decorate([(0,s.AsnProp)({type:o.SignerIdentifier})],SignerInfo.prototype,"sid",void 0);i.__decorate([(0,s.AsnProp)({type:a.DigestAlgorithmIdentifier})],SignerInfo.prototype,"digestAlgorithm",void 0);i.__decorate([(0,s.AsnProp)({type:c.Attribute,repeated:"set",context:0,implicit:true,optional:true})],SignerInfo.prototype,"signedAttrs",void 0);i.__decorate([(0,s.AsnProp)({type:a.SignatureAlgorithmIdentifier})],SignerInfo.prototype,"signatureAlgorithm",void 0);i.__decorate([(0,s.AsnProp)({type:s.OctetString})],SignerInfo.prototype,"signature",void 0);i.__decorate([(0,s.AsnProp)({type:c.Attribute,repeated:"set",context:1,implicit:true,optional:true})],SignerInfo.prototype,"unsignedAttrs",void 0);let u=n=class SignerInfos extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.SignerInfos=u;t.SignerInfos=u=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Set,itemType:SignerInfo})],u)},49269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.KeyDerivationAlgorithmIdentifier=t.MessageAuthenticationCodeAlgorithm=t.ContentEncryptionAlgorithmIdentifier=t.KeyEncryptionAlgorithmIdentifier=t.SignatureAlgorithmIdentifier=t.DigestAlgorithmIdentifier=t.CMSVersion=void 0;const n=r(80516);const i=r(20168);const s=r(61237);var o;(function(e){e[e["v0"]=0]="v0";e[e["v1"]=1]="v1";e[e["v2"]=2]="v2";e[e["v3"]=3]="v3";e[e["v4"]=4]="v4";e[e["v5"]=5]="v5"})(o||(t.CMSVersion=o={}));let a=class DigestAlgorithmIdentifier extends i.AlgorithmIdentifier{};t.DigestAlgorithmIdentifier=a;t.DigestAlgorithmIdentifier=a=n.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],a);let c=class SignatureAlgorithmIdentifier extends i.AlgorithmIdentifier{};t.SignatureAlgorithmIdentifier=c;t.SignatureAlgorithmIdentifier=c=n.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],c);let u=class KeyEncryptionAlgorithmIdentifier extends i.AlgorithmIdentifier{};t.KeyEncryptionAlgorithmIdentifier=u;t.KeyEncryptionAlgorithmIdentifier=u=n.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],u);let d=class ContentEncryptionAlgorithmIdentifier extends i.AlgorithmIdentifier{};t.ContentEncryptionAlgorithmIdentifier=d;t.ContentEncryptionAlgorithmIdentifier=d=n.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],d);let p=class MessageAuthenticationCodeAlgorithm extends i.AlgorithmIdentifier{};t.MessageAuthenticationCodeAlgorithm=p;t.MessageAuthenticationCodeAlgorithm=p=n.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],p);let m=class KeyDerivationAlgorithmIdentifier extends i.AlgorithmIdentifier{};t.KeyDerivationAlgorithmIdentifier=m;t.KeyDerivationAlgorithmIdentifier=m=n.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],m)},83256:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.Attributes=void 0;const i=r(80516);const s=r(61237);const o=r(20168);let a=n=class Attributes extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.Attributes=a;t.Attributes=a=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:o.Attribute})],a)},90483:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CertificationRequest=void 0;const n=r(80516);const i=r(61237);const s=r(39173);const o=r(20168);class CertificationRequest{constructor(e={}){this.certificationRequestInfo=new s.CertificationRequestInfo;this.signatureAlgorithm=new o.AlgorithmIdentifier;this.signature=new ArrayBuffer(0);Object.assign(this,e)}}t.CertificationRequest=CertificationRequest;n.__decorate([(0,i.AsnProp)({type:s.CertificationRequestInfo})],CertificationRequest.prototype,"certificationRequestInfo",void 0);n.__decorate([(0,i.AsnProp)({type:o.AlgorithmIdentifier})],CertificationRequest.prototype,"signatureAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString})],CertificationRequest.prototype,"signature",void 0)},39173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CertificationRequestInfo=void 0;const n=r(80516);const i=r(61237);const s=r(20168);const o=r(83256);class CertificationRequestInfo{constructor(e={}){this.version=0;this.subject=new s.Name;this.subjectPKInfo=new s.SubjectPublicKeyInfo;this.attributes=new o.Attributes;Object.assign(this,e)}}t.CertificationRequestInfo=CertificationRequestInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],CertificationRequestInfo.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:s.Name})],CertificationRequestInfo.prototype,"subject",void 0);n.__decorate([(0,i.AsnProp)({type:s.SubjectPublicKeyInfo})],CertificationRequestInfo.prototype,"subjectPKInfo",void 0);n.__decorate([(0,i.AsnProp)({type:o.Attributes,implicit:true,context:0})],CertificationRequestInfo.prototype,"attributes",void 0)},28511:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(83256),t);n.__exportStar(r(90483),t);n.__exportStar(r(39173),t)},56598:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ecdsaWithSHA512=t.ecdsaWithSHA384=t.ecdsaWithSHA256=t.ecdsaWithSHA224=t.ecdsaWithSHA1=void 0;const n=r(20168);const i=r(61323);function create(e){return new n.AlgorithmIdentifier({algorithm:e})}t.ecdsaWithSHA1=create(i.id_ecdsaWithSHA1);t.ecdsaWithSHA224=create(i.id_ecdsaWithSHA224);t.ecdsaWithSHA256=create(i.id_ecdsaWithSHA256);t.ecdsaWithSHA384=create(i.id_ecdsaWithSHA384);t.ecdsaWithSHA512=create(i.id_ecdsaWithSHA512)},76519:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ECParameters=void 0;const n=r(80516);const i=r(61237);let s=class ECParameters{constructor(e={}){Object.assign(this,e)}};t.ECParameters=s;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],s.prototype,"namedCurve",void 0);t.ECParameters=s=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],s)},46301:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ECPrivateKey=void 0;const n=r(80516);const i=r(61237);const s=r(76519);class ECPrivateKey{constructor(e={}){this.version=1;this.privateKey=new i.OctetString;Object.assign(this,e)}}t.ECPrivateKey=ECPrivateKey;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],ECPrivateKey.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:i.OctetString})],ECPrivateKey.prototype,"privateKey",void 0);n.__decorate([(0,i.AsnProp)({type:s.ECParameters,context:0,optional:true})],ECPrivateKey.prototype,"parameters",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString,context:1,optional:true})],ECPrivateKey.prototype,"publicKey",void 0)},30103:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ECDSASigValue=void 0;const n=r(80516);const i=r(61237);class ECDSASigValue{constructor(e={}){this.r=new ArrayBuffer(0);this.s=new ArrayBuffer(0);Object.assign(this,e)}}t.ECDSASigValue=ECDSASigValue;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],ECDSASigValue.prototype,"r",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],ECDSASigValue.prototype,"s",void 0)},94333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(56598),t);n.__exportStar(r(76519),t);n.__exportStar(r(46301),t);n.__exportStar(r(30103),t);n.__exportStar(r(61323),t)},61323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.id_sect571r1=t.id_sect571k1=t.id_secp521r1=t.id_sect409r1=t.id_sect409k1=t.id_secp384r1=t.id_sect283r1=t.id_sect283k1=t.id_secp256r1=t.id_sect233r1=t.id_sect233k1=t.id_secp224r1=t.id_sect163r2=t.id_sect163k1=t.id_secp192r1=t.id_ecdsaWithSHA512=t.id_ecdsaWithSHA384=t.id_ecdsaWithSHA256=t.id_ecdsaWithSHA224=t.id_ecdsaWithSHA1=t.id_ecMQV=t.id_ecDH=t.id_ecPublicKey=void 0;t.id_ecPublicKey="1.2.840.10045.2.1";t.id_ecDH="1.3.132.1.12";t.id_ecMQV="1.3.132.1.13";t.id_ecdsaWithSHA1="1.2.840.10045.4.1";t.id_ecdsaWithSHA224="1.2.840.10045.4.3.1";t.id_ecdsaWithSHA256="1.2.840.10045.4.3.2";t.id_ecdsaWithSHA384="1.2.840.10045.4.3.3";t.id_ecdsaWithSHA512="1.2.840.10045.4.3.4";t.id_secp192r1="1.2.840.10045.3.1.1";t.id_sect163k1="1.3.132.0.1";t.id_sect163r2="1.3.132.0.15";t.id_secp224r1="1.3.132.0.33";t.id_sect233k1="1.3.132.0.26";t.id_sect233r1="1.3.132.0.27";t.id_secp256r1="1.2.840.10045.3.1.7";t.id_sect283k1="1.3.132.0.16";t.id_sect283r1="1.3.132.0.17";t.id_secp384r1="1.3.132.0.34";t.id_sect409k1="1.3.132.0.36";t.id_sect409r1="1.3.132.0.37";t.id_secp521r1="1.3.132.0.35";t.id_sect571k1="1.3.132.0.38";t.id_sect571r1="1.3.132.0.39"},7314:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.PKCS12AttrSet=t.PKCS12Attribute=void 0;const i=r(80516);const s=r(61237);class PKCS12Attribute{constructor(e={}){this.attrId="";this.attrValues=[];Object.assign(e)}}t.PKCS12Attribute=PKCS12Attribute;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],PKCS12Attribute.prototype,"attrId",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Any,repeated:"set"})],PKCS12Attribute.prototype,"attrValues",void 0);let o=n=class PKCS12AttrSet extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.PKCS12AttrSet=o;t.PKCS12AttrSet=o=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:PKCS12Attribute})],o)},19338:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.AuthenticatedSafe=void 0;const i=r(80516);const s=r(61237);const o=r(74113);let a=n=class AuthenticatedSafe extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.AuthenticatedSafe=a;t.AuthenticatedSafe=a=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:o.ContentInfo})],a)},8125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.id_sdsiCertificate=t.id_x509Certificate=t.id_certTypes=t.CertBag=void 0;const n=r(80516);const i=r(61237);const s=r(41476);class CertBag{constructor(e={}){this.certId="";this.certValue=new ArrayBuffer(0);Object.assign(this,e)}}t.CertBag=CertBag;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],CertBag.prototype,"certId",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,context:0})],CertBag.prototype,"certValue",void 0);t.id_certTypes=`${s.id_pkcs_9}.22`;t.id_x509Certificate=`${t.id_certTypes}.1`;t.id_sdsiCertificate=`${t.id_certTypes}.2`},73385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.id_x509CRL=t.id_crlTypes=t.CRLBag=void 0;const n=r(80516);const i=r(61237);const s=r(41476);class CRLBag{constructor(e={}){this.crlId="";this.crltValue=new ArrayBuffer(0);Object.assign(this,e)}}t.CRLBag=CRLBag;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],CRLBag.prototype,"crlId",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,context:0})],CRLBag.prototype,"crltValue",void 0);t.id_crlTypes=`${s.id_pkcs_9}.23`;t.id_x509CRL=`${t.id_crlTypes}.1`},81928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(8125),t);n.__exportStar(r(73385),t);n.__exportStar(r(76170),t);n.__exportStar(r(16647),t);n.__exportStar(r(23112),t);n.__exportStar(r(41476),t)},76170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.KeyBag=void 0;const n=r(80516);const i=r(90071);const s=r(61237);let o=class KeyBag extends i.PrivateKeyInfo{};t.KeyBag=o;t.KeyBag=o=n.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],o)},16647:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PKCS8ShroudedKeyBag=void 0;const n=r(80516);const i=r(90071);const s=r(61237);let o=class PKCS8ShroudedKeyBag extends i.EncryptedPrivateKeyInfo{};t.PKCS8ShroudedKeyBag=o;t.PKCS8ShroudedKeyBag=o=n.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],o)},23112:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SecretBag=void 0;const n=r(80516);const i=r(61237);class SecretBag{constructor(e={}){this.secretTypeId="";this.secretValue=new ArrayBuffer(0);Object.assign(this,e)}}t.SecretBag=SecretBag;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],SecretBag.prototype,"secretTypeId",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,context:0})],SecretBag.prototype,"secretValue",void 0)},41476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.id_pkcs_9=t.id_SafeContents=t.id_SecretBag=t.id_CRLBag=t.id_certBag=t.id_pkcs8ShroudedKeyBag=t.id_keyBag=void 0;const n=r(19083);t.id_keyBag=`${n.id_bagtypes}.1`;t.id_pkcs8ShroudedKeyBag=`${n.id_bagtypes}.2`;t.id_certBag=`${n.id_bagtypes}.3`;t.id_CRLBag=`${n.id_bagtypes}.4`;t.id_SecretBag=`${n.id_bagtypes}.5`;t.id_SafeContents=`${n.id_bagtypes}.6`;t.id_pkcs_9="1.2.840.113549.1.9"},96633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(7314),t);n.__exportStar(r(19338),t);n.__exportStar(r(81928),t);n.__exportStar(r(77632),t);n.__exportStar(r(19083),t);n.__exportStar(r(69222),t);n.__exportStar(r(22835),t)},77632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MacData=void 0;const n=r(80516);const i=r(77420);const s=r(61237);class MacData{constructor(e={}){this.mac=new i.DigestInfo;this.macSalt=new s.OctetString;this.iterations=1;Object.assign(this,e)}}t.MacData=MacData;n.__decorate([(0,s.AsnProp)({type:i.DigestInfo})],MacData.prototype,"mac",void 0);n.__decorate([(0,s.AsnProp)({type:s.OctetString})],MacData.prototype,"macSalt",void 0);n.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer,defaultValue:1})],MacData.prototype,"iterations",void 0)},19083:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.id_bagtypes=t.id_pbewithSHAAnd40BitRC2_CBC=t.id_pbeWithSHAAnd128BitRC2_CBC=t.id_pbeWithSHAAnd2_KeyTripleDES_CBC=t.id_pbeWithSHAAnd3_KeyTripleDES_CBC=t.id_pbeWithSHAAnd40BitRC4=t.id_pbeWithSHAAnd128BitRC4=t.id_pkcs_12PbeIds=t.id_pkcs_12=t.id_pkcs=t.id_rsadsi=void 0;t.id_rsadsi="1.2.840.113549";t.id_pkcs=`${t.id_rsadsi}.1`;t.id_pkcs_12=`${t.id_pkcs}.12`;t.id_pkcs_12PbeIds=`${t.id_pkcs_12}.1`;t.id_pbeWithSHAAnd128BitRC4=`${t.id_pkcs_12PbeIds}.1`;t.id_pbeWithSHAAnd40BitRC4=`${t.id_pkcs_12PbeIds}.2`;t.id_pbeWithSHAAnd3_KeyTripleDES_CBC=`${t.id_pkcs_12PbeIds}.3`;t.id_pbeWithSHAAnd2_KeyTripleDES_CBC=`${t.id_pkcs_12PbeIds}.4`;t.id_pbeWithSHAAnd128BitRC2_CBC=`${t.id_pkcs_12PbeIds}.5`;t.id_pbewithSHAAnd40BitRC2_CBC=`${t.id_pkcs_12PbeIds}.6`;t.id_bagtypes=`${t.id_pkcs_12}.10.1`},69222:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PFX=void 0;const n=r(80516);const i=r(61237);const s=r(74113);const o=r(77632);class PFX{constructor(e={}){this.version=3;this.authSafe=new s.ContentInfo;this.macData=new o.MacData;Object.assign(this,e)}}t.PFX=PFX;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],PFX.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:s.ContentInfo})],PFX.prototype,"authSafe",void 0);n.__decorate([(0,i.AsnProp)({type:o.MacData,optional:true})],PFX.prototype,"macData",void 0)},22835:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.SafeContents=t.SafeBag=void 0;const i=r(80516);const s=r(61237);const o=r(7314);class SafeBag{constructor(e={}){this.bagId="";this.bagValue=new ArrayBuffer(0);Object.assign(this,e)}}t.SafeBag=SafeBag;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],SafeBag.prototype,"bagId",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Any,context:0})],SafeBag.prototype,"bagValue",void 0);i.__decorate([(0,s.AsnProp)({type:o.PKCS12Attribute,repeated:"set",optional:true})],SafeBag.prototype,"bagAttributes",void 0);let a=n=class SafeContents extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.SafeContents=a;t.SafeContents=a=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:SafeBag})],a)},33252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EncryptedPrivateKeyInfo=t.EncryptedData=void 0;const n=r(80516);const i=r(61237);const s=r(20168);class EncryptedData extends i.OctetString{}t.EncryptedData=EncryptedData;class EncryptedPrivateKeyInfo{constructor(e={}){this.encryptionAlgorithm=new s.AlgorithmIdentifier;this.encryptedData=new EncryptedData;Object.assign(this,e)}}t.EncryptedPrivateKeyInfo=EncryptedPrivateKeyInfo;n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier})],EncryptedPrivateKeyInfo.prototype,"encryptionAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:EncryptedData})],EncryptedPrivateKeyInfo.prototype,"encryptedData",void 0)},90071:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(33252),t);n.__exportStar(r(87199),t)},87199:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.PrivateKeyInfo=t.Attributes=t.PrivateKey=t.Version=void 0;const i=r(80516);const s=r(61237);const o=r(20168);var a;(function(e){e[e["v1"]=0]="v1"})(a||(t.Version=a={}));class PrivateKey extends s.OctetString{}t.PrivateKey=PrivateKey;let c=n=class Attributes extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.Attributes=c;t.Attributes=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:o.Attribute})],c);class PrivateKeyInfo{constructor(e={}){this.version=a.v1;this.privateKeyAlgorithm=new o.AlgorithmIdentifier;this.privateKey=new PrivateKey;Object.assign(this,e)}}t.PrivateKeyInfo=PrivateKeyInfo;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer})],PrivateKeyInfo.prototype,"version",void 0);i.__decorate([(0,s.AsnProp)({type:o.AlgorithmIdentifier})],PrivateKeyInfo.prototype,"privateKeyAlgorithm",void 0);i.__decorate([(0,s.AsnProp)({type:PrivateKey})],PrivateKeyInfo.prototype,"privateKey",void 0);i.__decorate([(0,s.AsnProp)({type:c,implicit:true,context:0,optional:true})],PrivateKeyInfo.prototype,"attributes",void 0)},12156:(e,t,r)=>{"use strict";var n,i,s;Object.defineProperty(t,"__esModule",{value:true});t.DateOfBirth=t.UnstructuredAddress=t.UnstructuredName=t.EmailAddress=t.EncryptedPrivateKeyInfo=t.UserPKCS12=t.Pkcs7PDU=t.PKCS9String=t.id_at_pseudonym=t.crlTypes=t.id_certTypes=t.id_smime=t.id_pkcs9_mr_signingTimeMatch=t.id_pkcs9_mr_caseIgnoreMatch=t.id_pkcs9_sx_signingTime=t.id_pkcs9_sx_pkcs9String=t.id_pkcs9_at_countryOfResidence=t.id_pkcs9_at_countryOfCitizenship=t.id_pkcs9_at_gender=t.id_pkcs9_at_placeOfBirth=t.id_pkcs9_at_dateOfBirth=t.id_ietf_at=t.id_pkcs9_at_pkcs7PDU=t.id_pkcs9_at_sequenceNumber=t.id_pkcs9_at_randomNonce=t.id_pkcs9_at_encryptedPrivateKeyInfo=t.id_pkcs9_at_pkcs15Token=t.id_pkcs9_at_userPKCS12=t.id_pkcs9_at_localKeyId=t.id_pkcs9_at_friendlyName=t.id_pkcs9_at_smimeCapabilities=t.id_pkcs9_at_extensionRequest=t.id_pkcs9_at_signingDescription=t.id_pkcs9_at_extendedCertificateAttributes=t.id_pkcs9_at_unstructuredAddress=t.id_pkcs9_at_challengePassword=t.id_pkcs9_at_counterSignature=t.id_pkcs9_at_signingTime=t.id_pkcs9_at_messageDigest=t.id_pkcs9_at_contentType=t.id_pkcs9_at_unstructuredName=t.id_pkcs9_at_emailAddress=t.id_pkcs9_oc_naturalPerson=t.id_pkcs9_oc_pkcsEntity=t.id_pkcs9_mr=t.id_pkcs9_sx=t.id_pkcs9_at=t.id_pkcs9_oc=t.id_pkcs9_mo=t.id_pkcs9=void 0;t.SMIMECapabilities=t.SMIMECapability=t.SigningDescription=t.LocalKeyId=t.FriendlyName=t.ExtendedCertificateAttributes=t.ExtensionRequest=t.ChallengePassword=t.CounterSignature=t.SequenceNumber=t.RandomNonce=t.SigningTime=t.MessageDigest=t.ContentType=t.Pseudonym=t.CountryOfResidence=t.CountryOfCitizenship=t.Gender=t.PlaceOfBirth=void 0;const o=r(80516);const a=r(61237);const c=r(74113);const u=r(96633);const d=r(90071);const p=r(20168);const m=r(45335);t.id_pkcs9="1.2.840.113549.1.9";t.id_pkcs9_mo=`${t.id_pkcs9}.0`;t.id_pkcs9_oc=`${t.id_pkcs9}.24`;t.id_pkcs9_at=`${t.id_pkcs9}.25`;t.id_pkcs9_sx=`${t.id_pkcs9}.26`;t.id_pkcs9_mr=`${t.id_pkcs9}.27`;t.id_pkcs9_oc_pkcsEntity=`${t.id_pkcs9_oc}.1`;t.id_pkcs9_oc_naturalPerson=`${t.id_pkcs9_oc}.2`;t.id_pkcs9_at_emailAddress=`${t.id_pkcs9}.1`;t.id_pkcs9_at_unstructuredName=`${t.id_pkcs9}.2`;t.id_pkcs9_at_contentType=`${t.id_pkcs9}.3`;t.id_pkcs9_at_messageDigest=`${t.id_pkcs9}.4`;t.id_pkcs9_at_signingTime=`${t.id_pkcs9}.5`;t.id_pkcs9_at_counterSignature=`${t.id_pkcs9}.6`;t.id_pkcs9_at_challengePassword=`${t.id_pkcs9}.7`;t.id_pkcs9_at_unstructuredAddress=`${t.id_pkcs9}.8`;t.id_pkcs9_at_extendedCertificateAttributes=`${t.id_pkcs9}.9`;t.id_pkcs9_at_signingDescription=`${t.id_pkcs9}.13`;t.id_pkcs9_at_extensionRequest=`${t.id_pkcs9}.14`;t.id_pkcs9_at_smimeCapabilities=`${t.id_pkcs9}.15`;t.id_pkcs9_at_friendlyName=`${t.id_pkcs9}.20`;t.id_pkcs9_at_localKeyId=`${t.id_pkcs9}.21`;t.id_pkcs9_at_userPKCS12=`2.16.840.1.113730.3.1.216`;t.id_pkcs9_at_pkcs15Token=`${t.id_pkcs9_at}.1`;t.id_pkcs9_at_encryptedPrivateKeyInfo=`${t.id_pkcs9_at}.2`;t.id_pkcs9_at_randomNonce=`${t.id_pkcs9_at}.3`;t.id_pkcs9_at_sequenceNumber=`${t.id_pkcs9_at}.4`;t.id_pkcs9_at_pkcs7PDU=`${t.id_pkcs9_at}.5`;t.id_ietf_at=`1.3.6.1.5.5.7.9`;t.id_pkcs9_at_dateOfBirth=`${t.id_ietf_at}.1`;t.id_pkcs9_at_placeOfBirth=`${t.id_ietf_at}.2`;t.id_pkcs9_at_gender=`${t.id_ietf_at}.3`;t.id_pkcs9_at_countryOfCitizenship=`${t.id_ietf_at}.4`;t.id_pkcs9_at_countryOfResidence=`${t.id_ietf_at}.5`;t.id_pkcs9_sx_pkcs9String=`${t.id_pkcs9_sx}.1`;t.id_pkcs9_sx_signingTime=`${t.id_pkcs9_sx}.2`;t.id_pkcs9_mr_caseIgnoreMatch=`${t.id_pkcs9_mr}.1`;t.id_pkcs9_mr_signingTimeMatch=`${t.id_pkcs9_mr}.2`;t.id_smime=`${t.id_pkcs9}.16`;t.id_certTypes=`${t.id_pkcs9}.22`;t.crlTypes=`${t.id_pkcs9}.23`;t.id_at_pseudonym=`${m.id_at}.65`;let y=class PKCS9String extends p.DirectoryString{constructor(e={}){super(e)}toString(){const e={};e.toString();return this.ia5String||super.toString()}};t.PKCS9String=y;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.IA5String})],y.prototype,"ia5String",void 0);t.PKCS9String=y=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],y);let g=class Pkcs7PDU extends c.ContentInfo{};t.Pkcs7PDU=g;t.Pkcs7PDU=g=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Sequence})],g);let b=class UserPKCS12 extends u.PFX{};t.UserPKCS12=b;t.UserPKCS12=b=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Sequence})],b);let v=class EncryptedPrivateKeyInfo extends d.EncryptedPrivateKeyInfo{};t.EncryptedPrivateKeyInfo=v;t.EncryptedPrivateKeyInfo=v=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Sequence})],v);let w=class EmailAddress{constructor(e=""){this.value=e}toString(){return this.value}};t.EmailAddress=w;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.IA5String})],w.prototype,"value",void 0);t.EmailAddress=w=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],w);let _=class UnstructuredName extends y{};t.UnstructuredName=_;t.UnstructuredName=_=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],_);let C=class UnstructuredAddress extends p.DirectoryString{};t.UnstructuredAddress=C;t.UnstructuredAddress=C=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],C);let P=class DateOfBirth{constructor(e=new Date){this.value=e}};t.DateOfBirth=P;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.GeneralizedTime})],P.prototype,"value",void 0);t.DateOfBirth=P=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],P);let O=class PlaceOfBirth extends p.DirectoryString{};t.PlaceOfBirth=O;t.PlaceOfBirth=O=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],O);let E=class Gender{constructor(e="M"){this.value=e}toString(){return this.value}};t.Gender=E;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.PrintableString})],E.prototype,"value",void 0);t.Gender=E=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],E);let I=class CountryOfCitizenship{constructor(e=""){this.value=e}toString(){return this.value}};t.CountryOfCitizenship=I;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.PrintableString})],I.prototype,"value",void 0);t.CountryOfCitizenship=I=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],I);let k=class CountryOfResidence extends I{};t.CountryOfResidence=k;t.CountryOfResidence=k=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],k);let T=class Pseudonym extends p.DirectoryString{};t.Pseudonym=T;t.Pseudonym=T=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],T);let x=class ContentType{constructor(e=""){this.value=e}toString(){return this.value}};t.ContentType=x;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.ObjectIdentifier})],x.prototype,"value",void 0);t.ContentType=x=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],x);class MessageDigest extends a.OctetString{}t.MessageDigest=MessageDigest;let R=class SigningTime extends p.Time{};t.SigningTime=R;t.SigningTime=R=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],R);class RandomNonce extends a.OctetString{}t.RandomNonce=RandomNonce;let B=class SequenceNumber{constructor(e=0){this.value=e}toString(){return this.value.toString()}};t.SequenceNumber=B;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.Integer})],B.prototype,"value",void 0);t.SequenceNumber=B=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],B);let N=class CounterSignature extends c.SignerInfo{};t.CounterSignature=N;t.CounterSignature=N=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Sequence})],N);let j=class ChallengePassword extends p.DirectoryString{};t.ChallengePassword=j;t.ChallengePassword=j=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],j);let L=n=class ExtensionRequest extends p.Extensions{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.ExtensionRequest=L;t.ExtensionRequest=L=n=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Sequence})],L);let D=i=class ExtendedCertificateAttributes extends a.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,i.prototype)}};t.ExtendedCertificateAttributes=D;t.ExtendedCertificateAttributes=D=i=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Set,itemType:c.Attribute})],D);let U=class FriendlyName{constructor(e=""){this.value=e}toString(){return this.value}};t.FriendlyName=U;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.BmpString})],U.prototype,"value",void 0);t.FriendlyName=U=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],U);class LocalKeyId extends a.OctetString{}t.LocalKeyId=LocalKeyId;class SigningDescription extends p.DirectoryString{}t.SigningDescription=SigningDescription;let F=class SMIMECapability extends p.AlgorithmIdentifier{};t.SMIMECapability=F;t.SMIMECapability=F=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Sequence})],F);let K=s=class SMIMECapabilities extends a.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,s.prototype)}};t.SMIMECapabilities=K;t.SMIMECapabilities=K=s=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Sequence,itemType:F})],K)},8319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sha512_256WithRSAEncryption=t.sha512_224WithRSAEncryption=t.sha512WithRSAEncryption=t.sha384WithRSAEncryption=t.sha256WithRSAEncryption=t.sha224WithRSAEncryption=t.sha1WithRSAEncryption=t.md5WithRSAEncryption=t.md2WithRSAEncryption=t.rsaEncryption=t.pSpecifiedEmpty=t.mgf1SHA1=t.sha512_256=t.sha512_224=t.sha512=t.sha384=t.sha256=t.sha224=t.sha1=t.md4=t.md2=void 0;const n=r(61237);const i=r(20168);const s=r(55698);function create(e){return new i.AlgorithmIdentifier({algorithm:e,parameters:null})}t.md2=create(s.id_md2);t.md4=create(s.id_md5);t.sha1=create(s.id_sha1);t.sha224=create(s.id_sha224);t.sha256=create(s.id_sha256);t.sha384=create(s.id_sha384);t.sha512=create(s.id_sha512);t.sha512_224=create(s.id_sha512_224);t.sha512_256=create(s.id_sha512_256);t.mgf1SHA1=new i.AlgorithmIdentifier({algorithm:s.id_mgf1,parameters:n.AsnConvert.serialize(t.sha1)});t.pSpecifiedEmpty=new i.AlgorithmIdentifier({algorithm:s.id_pSpecified,parameters:n.AsnConvert.serialize(n.AsnOctetStringConverter.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});t.rsaEncryption=create(s.id_rsaEncryption);t.md2WithRSAEncryption=create(s.id_md2WithRSAEncryption);t.md5WithRSAEncryption=create(s.id_md5WithRSAEncryption);t.sha1WithRSAEncryption=create(s.id_sha1WithRSAEncryption);t.sha224WithRSAEncryption=create(s.id_sha512_224WithRSAEncryption);t.sha256WithRSAEncryption=create(s.id_sha512_256WithRSAEncryption);t.sha384WithRSAEncryption=create(s.id_sha384WithRSAEncryption);t.sha512WithRSAEncryption=create(s.id_sha512WithRSAEncryption);t.sha512_224WithRSAEncryption=create(s.id_sha512_224WithRSAEncryption);t.sha512_256WithRSAEncryption=create(s.id_sha512_256WithRSAEncryption)},77420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(18108),t);n.__exportStar(r(8319),t);n.__exportStar(r(55698),t);n.__exportStar(r(14172),t);n.__exportStar(r(91396),t);n.__exportStar(r(20556),t)},55698:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.id_mgf1=t.id_md5=t.id_md2=t.id_sha512_256=t.id_sha512_224=t.id_sha512=t.id_sha384=t.id_sha256=t.id_sha224=t.id_sha1=t.id_sha512_256WithRSAEncryption=t.id_sha512_224WithRSAEncryption=t.id_sha512WithRSAEncryption=t.id_sha384WithRSAEncryption=t.id_sha256WithRSAEncryption=t.id_ssha224WithRSAEncryption=t.id_sha224WithRSAEncryption=t.id_sha1WithRSAEncryption=t.id_md5WithRSAEncryption=t.id_md2WithRSAEncryption=t.id_RSASSA_PSS=t.id_pSpecified=t.id_RSAES_OAEP=t.id_rsaEncryption=t.id_pkcs_1=void 0;t.id_pkcs_1="1.2.840.113549.1.1";t.id_rsaEncryption=`${t.id_pkcs_1}.1`;t.id_RSAES_OAEP=`${t.id_pkcs_1}.7`;t.id_pSpecified=`${t.id_pkcs_1}.9`;t.id_RSASSA_PSS=`${t.id_pkcs_1}.10`;t.id_md2WithRSAEncryption=`${t.id_pkcs_1}.2`;t.id_md5WithRSAEncryption=`${t.id_pkcs_1}.4`;t.id_sha1WithRSAEncryption=`${t.id_pkcs_1}.5`;t.id_sha224WithRSAEncryption=`${t.id_pkcs_1}.14`;t.id_ssha224WithRSAEncryption=t.id_sha224WithRSAEncryption;t.id_sha256WithRSAEncryption=`${t.id_pkcs_1}.11`;t.id_sha384WithRSAEncryption=`${t.id_pkcs_1}.12`;t.id_sha512WithRSAEncryption=`${t.id_pkcs_1}.13`;t.id_sha512_224WithRSAEncryption=`${t.id_pkcs_1}.15`;t.id_sha512_256WithRSAEncryption=`${t.id_pkcs_1}.16`;t.id_sha1="1.3.14.3.2.26";t.id_sha224="2.16.840.1.101.3.4.2.4";t.id_sha256="2.16.840.1.101.3.4.2.1";t.id_sha384="2.16.840.1.101.3.4.2.2";t.id_sha512="2.16.840.1.101.3.4.2.3";t.id_sha512_224="2.16.840.1.101.3.4.2.5";t.id_sha512_256="2.16.840.1.101.3.4.2.6";t.id_md2="1.2.840.113549.2.2";t.id_md5="1.2.840.113549.2.5";t.id_mgf1=`${t.id_pkcs_1}.8`},14172:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.OtherPrimeInfos=t.OtherPrimeInfo=void 0;const i=r(80516);const s=r(61237);class OtherPrimeInfo{constructor(e={}){this.prime=new ArrayBuffer(0);this.exponent=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0);Object.assign(this,e)}}t.OtherPrimeInfo=OtherPrimeInfo;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer,converter:s.AsnIntegerArrayBufferConverter})],OtherPrimeInfo.prototype,"prime",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer,converter:s.AsnIntegerArrayBufferConverter})],OtherPrimeInfo.prototype,"exponent",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer,converter:s.AsnIntegerArrayBufferConverter})],OtherPrimeInfo.prototype,"coefficient",void 0);let o=n=class OtherPrimeInfos extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.OtherPrimeInfos=o;t.OtherPrimeInfos=o=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:OtherPrimeInfo})],o)},18108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(88125),t);n.__exportStar(r(27495),t);n.__exportStar(r(97569),t)},88125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RSAES_OAEP=t.RsaEsOaepParams=void 0;const n=r(80516);const i=r(61237);const s=r(20168);const o=r(55698);const a=r(8319);class RsaEsOaepParams{constructor(e={}){this.hashAlgorithm=new s.AlgorithmIdentifier(a.sha1);this.maskGenAlgorithm=new s.AlgorithmIdentifier({algorithm:o.id_mgf1,parameters:i.AsnConvert.serialize(a.sha1)});this.pSourceAlgorithm=new s.AlgorithmIdentifier(a.pSpecifiedEmpty);Object.assign(this,e)}}t.RsaEsOaepParams=RsaEsOaepParams;n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier,context:0,defaultValue:a.sha1})],RsaEsOaepParams.prototype,"hashAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier,context:1,defaultValue:a.mgf1SHA1})],RsaEsOaepParams.prototype,"maskGenAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier,context:2,defaultValue:a.pSpecifiedEmpty})],RsaEsOaepParams.prototype,"pSourceAlgorithm",void 0);t.RSAES_OAEP=new s.AlgorithmIdentifier({algorithm:o.id_RSAES_OAEP,parameters:i.AsnConvert.serialize(new RsaEsOaepParams)})},97569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DigestInfo=void 0;const n=r(80516);const i=r(20168);const s=r(61237);class DigestInfo{constructor(e={}){this.digestAlgorithm=new i.AlgorithmIdentifier;this.digest=new s.OctetString;Object.assign(this,e)}}t.DigestInfo=DigestInfo;n.__decorate([(0,s.AsnProp)({type:i.AlgorithmIdentifier})],DigestInfo.prototype,"digestAlgorithm",void 0);n.__decorate([(0,s.AsnProp)({type:s.OctetString})],DigestInfo.prototype,"digest",void 0)},27495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RSASSA_PSS=t.RsaSaPssParams=void 0;const n=r(80516);const i=r(61237);const s=r(20168);const o=r(55698);const a=r(8319);class RsaSaPssParams{constructor(e={}){this.hashAlgorithm=new s.AlgorithmIdentifier(a.sha1);this.maskGenAlgorithm=new s.AlgorithmIdentifier({algorithm:o.id_mgf1,parameters:i.AsnConvert.serialize(a.sha1)});this.saltLength=20;this.trailerField=1;Object.assign(this,e)}}t.RsaSaPssParams=RsaSaPssParams;n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier,context:0,defaultValue:a.sha1})],RsaSaPssParams.prototype,"hashAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier,context:1,defaultValue:a.mgf1SHA1})],RsaSaPssParams.prototype,"maskGenAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,context:2,defaultValue:20})],RsaSaPssParams.prototype,"saltLength",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,context:3,defaultValue:1})],RsaSaPssParams.prototype,"trailerField",void 0);t.RSASSA_PSS=new s.AlgorithmIdentifier({algorithm:o.id_RSASSA_PSS,parameters:i.AsnConvert.serialize(new RsaSaPssParams)})},91396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RSAPrivateKey=void 0;const n=r(80516);const i=r(61237);const s=r(14172);class RSAPrivateKey{constructor(e={}){this.version=0;this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);this.privateExponent=new ArrayBuffer(0);this.prime1=new ArrayBuffer(0);this.prime2=new ArrayBuffer(0);this.exponent1=new ArrayBuffer(0);this.exponent2=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0);Object.assign(this,e)}}t.RSAPrivateKey=RSAPrivateKey;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],RSAPrivateKey.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPrivateKey.prototype,"modulus",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPrivateKey.prototype,"publicExponent",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPrivateKey.prototype,"privateExponent",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPrivateKey.prototype,"prime1",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPrivateKey.prototype,"prime2",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPrivateKey.prototype,"exponent1",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPrivateKey.prototype,"exponent2",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPrivateKey.prototype,"coefficient",void 0);n.__decorate([(0,i.AsnProp)({type:s.OtherPrimeInfos,optional:true})],RSAPrivateKey.prototype,"otherPrimeInfos",void 0)},20556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RSAPublicKey=void 0;const n=r(80516);const i=r(61237);class RSAPublicKey{constructor(e={}){this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);Object.assign(this,e)}}t.RSAPublicKey=RSAPublicKey;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPublicKey.prototype,"modulus",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RSAPublicKey.prototype,"publicExponent",void 0)},51735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsnConvert=void 0;const n=r(34697);const i=r(69185);const s=r(79922);const o=r(79500);class AsnConvert{static serialize(e){return o.AsnSerializer.serialize(e)}static parse(e,t){return s.AsnParser.parse(e,t)}static toString(e){const t=i.BufferSourceConverter.isBufferSource(e)?i.BufferSourceConverter.toArrayBuffer(e):AsnConvert.serialize(e);const r=n.fromBER(t);if(r.offset===-1){throw new Error(`Cannot decode ASN.1 data. ${r.result.error}`)}return r.result.toString()}}t.AsnConvert=AsnConvert},65367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.defaultConverter=t.AsnNullConverter=t.AsnGeneralizedTimeConverter=t.AsnUTCTimeConverter=t.AsnCharacterStringConverter=t.AsnGeneralStringConverter=t.AsnVisibleStringConverter=t.AsnGraphicStringConverter=t.AsnIA5StringConverter=t.AsnVideotexStringConverter=t.AsnTeletexStringConverter=t.AsnPrintableStringConverter=t.AsnNumericStringConverter=t.AsnUniversalStringConverter=t.AsnBmpStringConverter=t.AsnUtf8StringConverter=t.AsnConstructedOctetStringConverter=t.AsnOctetStringConverter=t.AsnBooleanConverter=t.AsnObjectIdentifierConverter=t.AsnBitStringConverter=t.AsnIntegerBigIntConverter=t.AsnIntegerArrayBufferConverter=t.AsnEnumeratedConverter=t.AsnIntegerConverter=t.AsnAnyConverter=void 0;const n=r(34697);const i=r(27028);const s=r(36876);t.AsnAnyConverter={fromASN:e=>e instanceof n.Null?null:e.valueBeforeDecodeView,toASN:e=>{if(e===null){return new n.Null}const t=n.fromBER(e);if(t.result.error){throw new Error(t.result.error)}return t.result}};t.AsnIntegerConverter={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new n.Integer({value:+e})};t.AsnEnumeratedConverter={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new n.Enumerated({value:e})};t.AsnIntegerArrayBufferConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new n.Integer({valueHex:e})};t.AsnIntegerBigIntConverter={fromASN:e=>e.toBigInt(),toASN:e=>n.Integer.fromBigInt(e)};t.AsnBitStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new n.BitString({valueHex:e})};t.AsnObjectIdentifierConverter={fromASN:e=>e.valueBlock.toString(),toASN:e=>new n.ObjectIdentifier({value:e})};t.AsnBooleanConverter={fromASN:e=>e.valueBlock.value,toASN:e=>new n.Boolean({value:e})};t.AsnOctetStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new n.OctetString({valueHex:e})};t.AsnConstructedOctetStringConverter={fromASN:e=>new s.OctetString(e.getValue()),toASN:e=>e.toASN()};function createStringConverter(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}t.AsnUtf8StringConverter=createStringConverter(n.Utf8String);t.AsnBmpStringConverter=createStringConverter(n.BmpString);t.AsnUniversalStringConverter=createStringConverter(n.UniversalString);t.AsnNumericStringConverter=createStringConverter(n.NumericString);t.AsnPrintableStringConverter=createStringConverter(n.PrintableString);t.AsnTeletexStringConverter=createStringConverter(n.TeletexString);t.AsnVideotexStringConverter=createStringConverter(n.VideotexString);t.AsnIA5StringConverter=createStringConverter(n.IA5String);t.AsnGraphicStringConverter=createStringConverter(n.GraphicString);t.AsnVisibleStringConverter=createStringConverter(n.VisibleString);t.AsnGeneralStringConverter=createStringConverter(n.GeneralString);t.AsnCharacterStringConverter=createStringConverter(n.CharacterString);t.AsnUTCTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new n.UTCTime({valueDate:e})};t.AsnGeneralizedTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new n.GeneralizedTime({valueDate:e})};t.AsnNullConverter={fromASN:()=>null,toASN:()=>new n.Null};function defaultConverter(e){switch(e){case i.AsnPropTypes.Any:return t.AsnAnyConverter;case i.AsnPropTypes.BitString:return t.AsnBitStringConverter;case i.AsnPropTypes.BmpString:return t.AsnBmpStringConverter;case i.AsnPropTypes.Boolean:return t.AsnBooleanConverter;case i.AsnPropTypes.CharacterString:return t.AsnCharacterStringConverter;case i.AsnPropTypes.Enumerated:return t.AsnEnumeratedConverter;case i.AsnPropTypes.GeneralString:return t.AsnGeneralStringConverter;case i.AsnPropTypes.GeneralizedTime:return t.AsnGeneralizedTimeConverter;case i.AsnPropTypes.GraphicString:return t.AsnGraphicStringConverter;case i.AsnPropTypes.IA5String:return t.AsnIA5StringConverter;case i.AsnPropTypes.Integer:return t.AsnIntegerConverter;case i.AsnPropTypes.Null:return t.AsnNullConverter;case i.AsnPropTypes.NumericString:return t.AsnNumericStringConverter;case i.AsnPropTypes.ObjectIdentifier:return t.AsnObjectIdentifierConverter;case i.AsnPropTypes.OctetString:return t.AsnOctetStringConverter;case i.AsnPropTypes.PrintableString:return t.AsnPrintableStringConverter;case i.AsnPropTypes.TeletexString:return t.AsnTeletexStringConverter;case i.AsnPropTypes.UTCTime:return t.AsnUTCTimeConverter;case i.AsnPropTypes.UniversalString:return t.AsnUniversalStringConverter;case i.AsnPropTypes.Utf8String:return t.AsnUtf8StringConverter;case i.AsnPropTypes.VideotexString:return t.AsnVideotexStringConverter;case i.AsnPropTypes.VisibleString:return t.AsnVisibleStringConverter;default:return null}}t.defaultConverter=defaultConverter},34550:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsnProp=t.AsnSequenceType=t.AsnSetType=t.AsnChoiceType=t.AsnType=void 0;const n=r(65367);const i=r(27028);const s=r(62124);const AsnType=e=>t=>{let r;if(!s.schemaStorage.has(t)){r=s.schemaStorage.createDefault(t);s.schemaStorage.set(t,r)}else{r=s.schemaStorage.get(t)}Object.assign(r,e)};t.AsnType=AsnType;const AsnChoiceType=()=>(0,t.AsnType)({type:i.AsnTypeTypes.Choice});t.AsnChoiceType=AsnChoiceType;const AsnSetType=e=>(0,t.AsnType)({type:i.AsnTypeTypes.Set,...e});t.AsnSetType=AsnSetType;const AsnSequenceType=e=>(0,t.AsnType)({type:i.AsnTypeTypes.Sequence,...e});t.AsnSequenceType=AsnSequenceType;const AsnProp=e=>(t,r)=>{let i;if(!s.schemaStorage.has(t.constructor)){i=s.schemaStorage.createDefault(t.constructor);s.schemaStorage.set(t.constructor,i)}else{i=s.schemaStorage.get(t.constructor)}const o=Object.assign({},e);if(typeof o.type==="number"&&!o.converter){const i=n.defaultConverter(e.type);if(!i){throw new Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`)}o.converter=i}i.items[r]=o};t.AsnProp=AsnProp},27028:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsnPropTypes=t.AsnTypeTypes=void 0;var r;(function(e){e[e["Sequence"]=0]="Sequence";e[e["Set"]=1]="Set";e[e["Choice"]=2]="Choice"})(r||(t.AsnTypeTypes=r={}));var n;(function(e){e[e["Any"]=1]="Any";e[e["Boolean"]=2]="Boolean";e[e["OctetString"]=3]="OctetString";e[e["BitString"]=4]="BitString";e[e["Integer"]=5]="Integer";e[e["Enumerated"]=6]="Enumerated";e[e["ObjectIdentifier"]=7]="ObjectIdentifier";e[e["Utf8String"]=8]="Utf8String";e[e["BmpString"]=9]="BmpString";e[e["UniversalString"]=10]="UniversalString";e[e["NumericString"]=11]="NumericString";e[e["PrintableString"]=12]="PrintableString";e[e["TeletexString"]=13]="TeletexString";e[e["VideotexString"]=14]="VideotexString";e[e["IA5String"]=15]="IA5String";e[e["GraphicString"]=16]="GraphicString";e[e["VisibleString"]=17]="VisibleString";e[e["GeneralString"]=18]="GeneralString";e[e["CharacterString"]=19]="CharacterString";e[e["UTCTime"]=20]="UTCTime";e[e["GeneralizedTime"]=21]="GeneralizedTime";e[e["DATE"]=22]="DATE";e[e["TimeOfDay"]=23]="TimeOfDay";e[e["DateTime"]=24]="DateTime";e[e["Duration"]=25]="Duration";e[e["TIME"]=26]="TIME";e[e["Null"]=27]="Null"})(n||(t.AsnPropTypes=n={}))},68011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(29516),t)},29516:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsnSchemaValidationError=void 0;class AsnSchemaValidationError extends Error{constructor(){super(...arguments);this.schemas=[]}}t.AsnSchemaValidationError=AsnSchemaValidationError},62779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isArrayEqual=t.isTypeOfArray=t.isConvertible=void 0;function isConvertible(e){if(typeof e==="function"&&e.prototype){if(e.prototype.toASN&&e.prototype.fromASN){return true}else{return isConvertible(e.prototype)}}else{return!!(e&&typeof e==="object"&&"toASN"in e&&"fromASN"in e)}}t.isConvertible=isConvertible;function isTypeOfArray(e){var t;if(e){const r=Object.getPrototypeOf(e);if(((t=r===null||r===void 0?void 0:r.prototype)===null||t===void 0?void 0:t.constructor)===Array){return true}return isTypeOfArray(r)}return false}t.isTypeOfArray=isTypeOfArray;function isArrayEqual(e,t){if(!(e&&t)){return false}if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++){if(r[t]!==n[t]){return false}}return true}t.isArrayEqual=isArrayEqual},61237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsnSerializer=t.AsnParser=t.AsnPropTypes=t.AsnTypeTypes=t.AsnSetType=t.AsnSequenceType=t.AsnChoiceType=t.AsnType=t.AsnProp=void 0;const n=r(80516);n.__exportStar(r(65367),t);n.__exportStar(r(36876),t);var i=r(34550);Object.defineProperty(t,"AsnProp",{enumerable:true,get:function(){return i.AsnProp}});Object.defineProperty(t,"AsnType",{enumerable:true,get:function(){return i.AsnType}});Object.defineProperty(t,"AsnChoiceType",{enumerable:true,get:function(){return i.AsnChoiceType}});Object.defineProperty(t,"AsnSequenceType",{enumerable:true,get:function(){return i.AsnSequenceType}});Object.defineProperty(t,"AsnSetType",{enumerable:true,get:function(){return i.AsnSetType}});var s=r(27028);Object.defineProperty(t,"AsnTypeTypes",{enumerable:true,get:function(){return s.AsnTypeTypes}});Object.defineProperty(t,"AsnPropTypes",{enumerable:true,get:function(){return s.AsnPropTypes}});var o=r(79922);Object.defineProperty(t,"AsnParser",{enumerable:true,get:function(){return o.AsnParser}});var a=r(79500);Object.defineProperty(t,"AsnSerializer",{enumerable:true,get:function(){return a.AsnSerializer}});n.__exportStar(r(68011),t);n.__exportStar(r(65149),t);n.__exportStar(r(51735),t)},65149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsnArray=void 0;class AsnArray extends Array{constructor(e=[]){if(typeof e==="number"){super(e)}else{super();for(const t of e){this.push(t)}}}}t.AsnArray=AsnArray},79922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsnParser=void 0;const n=r(34697);const i=r(27028);const s=r(65367);const o=r(68011);const a=r(62779);const c=r(62124);class AsnParser{static parse(e,t){const r=n.fromBER(e);if(r.result.error){throw new Error(r.result.error)}const i=this.fromASN(r.result,t);return i}static fromASN(e,t){var r;try{if((0,a.isConvertible)(t)){const r=new t;return r.fromASN(e)}const u=c.schemaStorage.get(t);c.schemaStorage.cache(t);let d=u.schema;if(e.constructor===n.Constructed&&u.type!==i.AsnTypeTypes.Choice){d=new n.Constructed({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:u.schema.valueBlock.value});for(const t in u.items){delete e[t]}}const p=n.compareSchema({},e,d);if(!p.verified){throw new o.AsnSchemaValidationError(`Data does not match to ${t.name} ASN1 schema. ${p.result.error}`)}const m=new t;if((0,a.isTypeOfArray)(t)){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value))){throw new Error(`Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.`)}const r=u.itemType;if(typeof r==="number"){const n=s.defaultConverter(r);if(!n){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}return t.from(e.valueBlock.value,(e=>n.fromASN(e)))}else{return t.from(e.valueBlock.value,(e=>this.fromASN(e,r)))}}for(const e in u.items){const t=p.result[e];if(!t){continue}const s=u.items[e];const o=s.type;if(typeof o==="number"||(0,a.isConvertible)(o)){const c=(r=s.converter)!==null&&r!==void 0?r:(0,a.isConvertible)(o)?new o:null;if(!c){throw new Error("Converter is empty")}if(s.repeated){if(s.implicit){const r=s.repeated==="sequence"?n.Sequence:n.Set;const i=new r;i.valueBlock=t.valueBlock;const o=n.fromBER(i.toBER(false));if(o.offset===-1){throw new Error(`Cannot parse the child item. ${o.result.error}`)}if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value))){throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.")}const a=o.result.valueBlock.value;m[e]=Array.from(a,(e=>c.fromASN(e)))}else{m[e]=Array.from(t,(e=>c.fromASN(e)))}}else{let r=t;if(s.implicit){let e;if((0,a.isConvertible)(o)){e=(new o).toSchema("")}else{const t=i.AsnPropTypes[o];const r=n[t];if(!r){throw new Error(`Cannot get '${t}' class from asn1js module`)}e=new r}e.valueBlock=r.valueBlock;r=n.fromBER(e.toBER(false)).result}m[e]=c.fromASN(r)}}else{if(s.repeated){if(!Array.isArray(t)){throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.")}m[e]=Array.from(t,(e=>this.fromASN(e,o)))}else{m[e]=this.fromASN(t,o)}}}return m}catch(e){if(e instanceof o.AsnSchemaValidationError){e.schemas.push(t.name)}throw e}}}t.AsnParser=AsnParser},88714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsnSchemaStorage=void 0;const n=r(34697);const i=r(27028);const s=r(62779);class AsnSchemaStorage{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,t=false){const r=this.items.get(e);if(!r){throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`)}if(t&&!r.schema){throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`)}return r}cache(e){const t=this.get(e);if(!t.schema){t.schema=this.create(e,true)}}createDefault(e){const t={type:i.AsnTypeTypes.Sequence,items:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.items=Object.assign({},t.items,r.items)}return t}create(e,t){const r=this.items.get(e)||this.createDefault(e);const o=[];for(const e in r.items){const a=r.items[e];const c=t?e:"";let u;if(typeof a.type==="number"){const e=i.AsnPropTypes[a.type];const t=n[e];if(!t){throw new Error(`Cannot get ASN1 class by name '${e}'`)}u=new t({name:c})}else if((0,s.isConvertible)(a.type)){const e=new a.type;u=e.toSchema(c)}else if(a.optional){const e=this.get(a.type);if(e.type===i.AsnTypeTypes.Choice){u=new n.Any({name:c})}else{u=this.create(a.type,false);u.name=c}}else{u=new n.Any({name:c})}const d=!!a.optional||a.defaultValue!==undefined;if(a.repeated){u.name="";const e=a.repeated==="set"?n.Set:n.Sequence;u=new e({name:"",value:[new n.Repeated({name:c,value:u})]})}if(a.context!==null&&a.context!==undefined){if(a.implicit){if(typeof a.type==="number"||(0,s.isConvertible)(a.type)){const e=a.repeated?n.Constructed:n.Primitive;o.push(new e({name:c,optional:d,idBlock:{tagClass:3,tagNumber:a.context}}))}else{this.cache(a.type);const e=!!a.repeated;let t=!e?this.get(a.type,true).schema:u;t="valueBlock"in t?t.valueBlock.value:t.value;o.push(new n.Constructed({name:!e?c:"",optional:d,idBlock:{tagClass:3,tagNumber:a.context},value:t}))}}else{o.push(new n.Constructed({optional:d,idBlock:{tagClass:3,tagNumber:a.context},value:[u]}))}}else{u.optional=d;o.push(u)}}switch(r.type){case i.AsnTypeTypes.Sequence:return new n.Sequence({value:o,name:""});case i.AsnTypeTypes.Set:return new n.Set({value:o,name:""});case i.AsnTypeTypes.Choice:return new n.Choice({value:o,name:""});default:throw new Error(`Unsupported ASN1 type in use`)}}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=Object.getPrototypeOf(e);if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}}t.AsnSchemaStorage=AsnSchemaStorage},79500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsnSerializer=void 0;const n=r(34697);const i=r(65367);const s=r(27028);const o=r(62779);const a=r(62124);class AsnSerializer{static serialize(e){if(e instanceof n.BaseBlock){return e.toBER(false)}return this.toASN(e).toBER(false)}static toASN(e){if(e&&typeof e==="object"&&(0,o.isConvertible)(e)){return e.toASN()}if(!(e&&typeof e==="object")){throw new TypeError("Parameter 1 should be type of Object.")}const t=e.constructor;const r=a.schemaStorage.get(t);a.schemaStorage.cache(t);let c=[];if(r.itemType){if(!Array.isArray(e)){throw new TypeError("Parameter 1 should be type of Array.")}if(typeof r.itemType==="number"){const n=i.defaultConverter(r.itemType);if(!n){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}c=e.map((e=>n.toASN(e)))}else{c=e.map((e=>this.toAsnItem({type:r.itemType},"[]",t,e)))}}else{for(const i in r.items){const s=r.items[i];const a=e[i];if(a===undefined||s.defaultValue===a||typeof s.defaultValue==="object"&&typeof a==="object"&&(0,o.isArrayEqual)(this.serialize(s.defaultValue),this.serialize(a))){continue}const u=AsnSerializer.toAsnItem(s,i,t,a);if(typeof s.context==="number"){if(s.implicit){if(!s.repeated&&(typeof s.type==="number"||(0,o.isConvertible)(s.type))){const e={};e.valueHex=u instanceof n.Null?u.valueBeforeDecodeView:u.valueBlock.toBER();c.push(new n.Primitive({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},...e}))}else{c.push(new n.Constructed({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:u.valueBlock.value}))}}else{c.push(new n.Constructed({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:[u]}))}}else if(s.repeated){c=c.concat(u)}else{c.push(u)}}}let u;switch(r.type){case s.AsnTypeTypes.Sequence:u=new n.Sequence({value:c});break;case s.AsnTypeTypes.Set:u=new n.Set({value:c});break;case s.AsnTypeTypes.Choice:if(!c[0]){throw new Error(`Schema '${t.name}' has wrong data. Choice cannot be empty.`)}u=c[0];break}return u}static toAsnItem(e,t,r,i){let o;if(typeof e.type==="number"){const a=e.converter;if(!a){throw new Error(`Property '${t}' doesn't have converter for type ${s.AsnPropTypes[e.type]} in schema '${r.name}'`)}if(e.repeated){if(!Array.isArray(i)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const t=Array.from(i,(e=>a.toASN(e)));const r=e.repeated==="sequence"?n.Sequence:n.Set;o=new r({value:t})}else{o=a.toASN(i)}}else{if(e.repeated){if(!Array.isArray(i)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const t=Array.from(i,(e=>this.toASN(e)));const r=e.repeated==="sequence"?n.Sequence:n.Set;o=new r({value:t})}else{o=this.toASN(i)}}return o}}t.AsnSerializer=AsnSerializer},62124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.schemaStorage=void 0;const n=r(88714);t.schemaStorage=new n.AsnSchemaStorage},29631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BitString=void 0;const n=r(34697);const i=r(69185);class BitString{constructor(e,t=0){this.unusedBits=0;this.value=new ArrayBuffer(0);if(e){if(typeof e==="number"){this.fromNumber(e)}else if(i.BufferSourceConverter.isBufferSource(e)){this.unusedBits=t;this.value=i.BufferSourceConverter.toArrayBuffer(e)}else{throw TypeError("Unsupported type of 'params' argument for BitString")}}}fromASN(e){if(!(e instanceof n.BitString)){throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString")}this.unusedBits=e.valueBlock.unusedBits;this.value=e.valueBlock.valueHex;return this}toASN(){return new n.BitString({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new n.BitString({name:e})}toNumber(){let e="";const t=new Uint8Array(this.value);for(const r of t){e+=r.toString(2).padStart(8,"0")}e=e.split("").reverse().join("");if(this.unusedBits){e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")}return parseInt(e,2)}fromNumber(e){let t=e.toString(2);const r=t.length+7>>3;this.unusedBits=(r<<3)-t.length;const n=new Uint8Array(r);t=t.padStart(r<<3,"0").split("").reverse().join("");let i=0;while(i<r){n[i]=parseInt(t.slice(i<<3,(i<<3)+8),2);i++}this.value=n.buffer}}t.BitString=BitString},36876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(29631),t);n.__exportStar(r(84376),t)},84376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OctetString=void 0;const n=r(34697);const i=r(69185);class OctetString{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(e){if(typeof e==="number"){this.buffer=new ArrayBuffer(e)}else{if(i.BufferSourceConverter.isBufferSource(e)){this.buffer=i.BufferSourceConverter.toArrayBuffer(e)}else if(Array.isArray(e)){this.buffer=new Uint8Array(e)}else{this.buffer=new ArrayBuffer(0)}}}fromASN(e){if(!(e instanceof n.OctetString)){throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString")}this.buffer=e.valueBlock.valueHex;return this}toASN(){return new n.OctetString({valueHex:this.buffer})}toSchema(e){return new n.OctetString({name:e})}}t.OctetString=OctetString},96245:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ACClearAttrs=void 0;const n=r(80516);const i=r(61237);const s=r(20168);class ACClearAttrs{constructor(e={}){this.acIssuer=new s.GeneralName;this.acSerial=0;this.attrs=[];Object.assign(this,e)}}t.ACClearAttrs=ACClearAttrs;n.__decorate([(0,i.AsnProp)({type:s.GeneralName})],ACClearAttrs.prototype,"acIssuer",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],ACClearAttrs.prototype,"acSerial",void 0);n.__decorate([(0,i.AsnProp)({type:s.Attribute,repeated:"sequence"})],ACClearAttrs.prototype,"attrs",void 0)},17114:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AAControls=void 0;const n=r(80516);const i=r(61237);const s=r(63951);class AAControls{constructor(e={}){this.permitUnSpecified=true;Object.assign(this,e)}}t.AAControls=AAControls;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,optional:true})],AAControls.prototype,"pathLenConstraint",void 0);n.__decorate([(0,i.AsnProp)({type:s.AttrSpec,implicit:true,context:0,optional:true})],AAControls.prototype,"permittedAttrs",void 0);n.__decorate([(0,i.AsnProp)({type:s.AttrSpec,implicit:true,context:1,optional:true})],AAControls.prototype,"excludedAttrs",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Boolean,defaultValue:true})],AAControls.prototype,"permitUnSpecified",void 0)},11920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AttCertIssuer=void 0;const n=r(80516);const i=r(61237);const s=r(20168);const o=r(25679);let a=class AttCertIssuer{constructor(e={}){Object.assign(this,e)}};t.AttCertIssuer=a;n.__decorate([(0,i.AsnProp)({type:s.GeneralName,repeated:"sequence"})],a.prototype,"v1Form",void 0);n.__decorate([(0,i.AsnProp)({type:o.V2Form,context:0,implicit:true})],a.prototype,"v2Form",void 0);t.AttCertIssuer=a=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],a)},78201:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AttCertValidityPeriod=void 0;const n=r(80516);const i=r(61237);class AttCertValidityPeriod{constructor(e={}){this.notBeforeTime=new Date;this.notAfterTime=new Date;Object.assign(this,e)}}t.AttCertValidityPeriod=AttCertValidityPeriod;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.GeneralizedTime})],AttCertValidityPeriod.prototype,"notBeforeTime",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.GeneralizedTime})],AttCertValidityPeriod.prototype,"notAfterTime",void 0)},63951:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.AttrSpec=void 0;const i=r(80516);const s=r(61237);let o=n=class AttrSpec extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.AttrSpec=o;t.AttrSpec=o=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:s.AsnPropTypes.ObjectIdentifier})],o)},73294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AttributeCertificate=void 0;const n=r(80516);const i=r(61237);const s=r(20168);const o=r(52354);class AttributeCertificate{constructor(e={}){this.acinfo=new o.AttributeCertificateInfo;this.signatureAlgorithm=new s.AlgorithmIdentifier;this.signatureValue=new ArrayBuffer(0);Object.assign(this,e)}}t.AttributeCertificate=AttributeCertificate;n.__decorate([(0,i.AsnProp)({type:o.AttributeCertificateInfo})],AttributeCertificate.prototype,"acinfo",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier})],AttributeCertificate.prototype,"signatureAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString})],AttributeCertificate.prototype,"signatureValue",void 0)},52354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AttributeCertificateInfo=t.AttCertVersion=void 0;const n=r(80516);const i=r(61237);const s=r(20168);const o=r(90148);const a=r(11920);const c=r(78201);var u;(function(e){e[e["v2"]=1]="v2"})(u||(t.AttCertVersion=u={}));class AttributeCertificateInfo{constructor(e={}){this.version=u.v2;this.holder=new o.Holder;this.issuer=new a.AttCertIssuer;this.signature=new s.AlgorithmIdentifier;this.serialNumber=new ArrayBuffer(0);this.attrCertValidityPeriod=new c.AttCertValidityPeriod;this.attributes=[];Object.assign(this,e)}}t.AttributeCertificateInfo=AttributeCertificateInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],AttributeCertificateInfo.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:o.Holder})],AttributeCertificateInfo.prototype,"holder",void 0);n.__decorate([(0,i.AsnProp)({type:a.AttCertIssuer})],AttributeCertificateInfo.prototype,"issuer",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier})],AttributeCertificateInfo.prototype,"signature",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],AttributeCertificateInfo.prototype,"serialNumber",void 0);n.__decorate([(0,i.AsnProp)({type:c.AttCertValidityPeriod})],AttributeCertificateInfo.prototype,"attrCertValidityPeriod",void 0);n.__decorate([(0,i.AsnProp)({type:s.Attribute,repeated:"sequence"})],AttributeCertificateInfo.prototype,"attributes",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString,optional:true})],AttributeCertificateInfo.prototype,"issuerUniqueID",void 0);n.__decorate([(0,i.AsnProp)({type:s.Extensions,optional:true})],AttributeCertificateInfo.prototype,"extensions",void 0)},43663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClassList=t.ClassListFlags=void 0;const n=r(61237);var i;(function(e){e[e["unmarked"]=1]="unmarked";e[e["unclassified"]=2]="unclassified";e[e["restricted"]=4]="restricted";e[e["confidential"]=8]="confidential";e[e["secret"]=16]="secret";e[e["topSecret"]=32]="topSecret"})(i||(t.ClassListFlags=i={}));class ClassList extends n.BitString{}t.ClassList=ClassList},80360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Clearance=void 0;const n=r(80516);const i=r(61237);const s=r(43663);const o=r(72130);class Clearance{constructor(e={}){this.policyId="";this.classList=new s.ClassList(s.ClassListFlags.unclassified);Object.assign(this,e)}}t.Clearance=Clearance;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],Clearance.prototype,"policyId",void 0);n.__decorate([(0,i.AsnProp)({type:s.ClassList,defaultValue:new s.ClassList(s.ClassListFlags.unclassified)})],Clearance.prototype,"classList",void 0);n.__decorate([(0,i.AsnProp)({type:o.SecurityCategory,repeated:"set"})],Clearance.prototype,"securityCategories",void 0)},90148:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Holder=void 0;const n=r(80516);const i=r(61237);const s=r(40106);const o=r(20168);const a=r(14648);class Holder{constructor(e={}){Object.assign(this,e)}}t.Holder=Holder;n.__decorate([(0,i.AsnProp)({type:s.IssuerSerial,implicit:true,context:0,optional:true})],Holder.prototype,"baseCertificateID",void 0);n.__decorate([(0,i.AsnProp)({type:o.GeneralNames,implicit:true,context:1,optional:true})],Holder.prototype,"entityName",void 0);n.__decorate([(0,i.AsnProp)({type:a.ObjectDigestInfo,implicit:true,context:2,optional:true})],Holder.prototype,"objectDigestInfo",void 0)},56929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IetfAttrSyntax=t.IetfAttrSyntaxValueChoices=void 0;const n=r(80516);const i=r(61237);const s=r(20168);class IetfAttrSyntaxValueChoices{constructor(e={}){Object.assign(this,e)}}t.IetfAttrSyntaxValueChoices=IetfAttrSyntaxValueChoices;n.__decorate([(0,i.AsnProp)({type:i.OctetString})],IetfAttrSyntaxValueChoices.prototype,"cotets",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],IetfAttrSyntaxValueChoices.prototype,"oid",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Utf8String})],IetfAttrSyntaxValueChoices.prototype,"string",void 0);class IetfAttrSyntax{constructor(e={}){this.values=[];Object.assign(this,e)}}t.IetfAttrSyntax=IetfAttrSyntax;n.__decorate([(0,i.AsnProp)({type:s.GeneralNames,implicit:true,context:0,optional:true})],IetfAttrSyntax.prototype,"policyAuthority",void 0);n.__decorate([(0,i.AsnProp)({type:IetfAttrSyntaxValueChoices,repeated:"sequence"})],IetfAttrSyntax.prototype,"values",void 0)},45335:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(96245),t);n.__exportStar(r(17114),t);n.__exportStar(r(11920),t);n.__exportStar(r(78201),t);n.__exportStar(r(63951),t);n.__exportStar(r(73294),t);n.__exportStar(r(52354),t);n.__exportStar(r(43663),t);n.__exportStar(r(80360),t);n.__exportStar(r(90148),t);n.__exportStar(r(56929),t);n.__exportStar(r(40106),t);n.__exportStar(r(14648),t);n.__exportStar(r(46334),t);n.__exportStar(r(87808),t);n.__exportStar(r(99488),t);n.__exportStar(r(72130),t);n.__exportStar(r(33945),t);n.__exportStar(r(37825),t);n.__exportStar(r(25679),t)},40106:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IssuerSerial=void 0;const n=r(80516);const i=r(61237);const s=r(20168);class IssuerSerial{constructor(e={}){this.issuer=new s.GeneralNames;this.serial=new ArrayBuffer(0);this.issuerUID=new ArrayBuffer(0);Object.assign(this,e)}}t.IssuerSerial=IssuerSerial;n.__decorate([(0,i.AsnProp)({type:s.GeneralNames})],IssuerSerial.prototype,"issuer",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],IssuerSerial.prototype,"serial",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString,optional:true})],IssuerSerial.prototype,"issuerUID",void 0)},14648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ObjectDigestInfo=t.DigestedObjectType=void 0;const n=r(80516);const i=r(61237);const s=r(20168);var o;(function(e){e[e["publicKey"]=0]="publicKey";e[e["publicKeyCert"]=1]="publicKeyCert";e[e["otherObjectTypes"]=2]="otherObjectTypes"})(o||(t.DigestedObjectType=o={}));class ObjectDigestInfo{constructor(e={}){this.digestedObjectType=o.publicKey;this.digestAlgorithm=new s.AlgorithmIdentifier;this.objectDigest=new ArrayBuffer(0);Object.assign(this,e)}}t.ObjectDigestInfo=ObjectDigestInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Enumerated})],ObjectDigestInfo.prototype,"digestedObjectType",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier,optional:true})],ObjectDigestInfo.prototype,"otherObjectTypeID",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier})],ObjectDigestInfo.prototype,"digestAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString})],ObjectDigestInfo.prototype,"objectDigest",void 0)},46334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.id_at_clearance=t.id_at_role=t.id_at=t.id_aca_encAttrs=t.id_aca_group=t.id_aca_chargingIdentity=t.id_aca_accessIdentity=t.id_aca_authenticationInfo=t.id_aca=t.id_ce_targetInformation=t.id_pe_ac_proxying=t.id_pe_aaControls=t.id_pe_ac_auditIdentity=void 0;const n=r(20168);t.id_pe_ac_auditIdentity=`${n.id_pe}.4`;t.id_pe_aaControls=`${n.id_pe}.6`;t.id_pe_ac_proxying=`${n.id_pe}.10`;t.id_ce_targetInformation=`${n.id_ce}.55`;t.id_aca=`${n.id_pkix}.10`;t.id_aca_authenticationInfo=`${t.id_aca}.1`;t.id_aca_accessIdentity=`${t.id_aca}.2`;t.id_aca_chargingIdentity=`${t.id_aca}.3`;t.id_aca_group=`${t.id_aca}.4`;t.id_aca_encAttrs=`${t.id_aca}.6`;t.id_at="2.5.4";t.id_at_role=`${t.id_at}.72`;t.id_at_clearance="2.5.1.5.55"},87808:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.ProxyInfo=void 0;const i=r(80516);const s=r(61237);const o=r(37825);let a=n=class ProxyInfo extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.ProxyInfo=a;t.ProxyInfo=a=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:o.Targets})],a)},99488:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RoleSyntax=void 0;const n=r(80516);const i=r(61237);const s=r(20168);class RoleSyntax{constructor(e={}){Object.assign(this,e)}}t.RoleSyntax=RoleSyntax;n.__decorate([(0,i.AsnProp)({type:s.GeneralNames,implicit:true,context:0,optional:true})],RoleSyntax.prototype,"roleAuthority",void 0);n.__decorate([(0,i.AsnProp)({type:s.GeneralName,implicit:true,context:1})],RoleSyntax.prototype,"roleName",void 0)},72130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SecurityCategory=void 0;const n=r(80516);const i=r(61237);class SecurityCategory{constructor(e={}){this.type="";this.value=new ArrayBuffer(0);Object.assign(this,e)}}t.SecurityCategory=SecurityCategory;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier,implicit:true,context:0})],SecurityCategory.prototype,"type",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,implicit:true,context:1})],SecurityCategory.prototype,"value",void 0)},33945:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SvceAuthInfo=void 0;const n=r(80516);const i=r(61237);const s=r(20168);class SvceAuthInfo{constructor(e={}){this.service=new s.GeneralName;this.ident=new s.GeneralName;Object.assign(this,e)}}t.SvceAuthInfo=SvceAuthInfo;n.__decorate([(0,i.AsnProp)({type:s.GeneralName})],SvceAuthInfo.prototype,"service",void 0);n.__decorate([(0,i.AsnProp)({type:s.GeneralName})],SvceAuthInfo.prototype,"ident",void 0);n.__decorate([(0,i.AsnProp)({type:i.OctetString,optional:true})],SvceAuthInfo.prototype,"authInfo",void 0)},37825:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.Targets=t.Target=t.TargetCert=void 0;const i=r(80516);const s=r(61237);const o=r(20168);const a=r(40106);const c=r(14648);class TargetCert{constructor(e={}){this.targetCertificate=new a.IssuerSerial;Object.assign(this,e)}}t.TargetCert=TargetCert;i.__decorate([(0,s.AsnProp)({type:a.IssuerSerial})],TargetCert.prototype,"targetCertificate",void 0);i.__decorate([(0,s.AsnProp)({type:o.GeneralName,optional:true})],TargetCert.prototype,"targetName",void 0);i.__decorate([(0,s.AsnProp)({type:c.ObjectDigestInfo,optional:true})],TargetCert.prototype,"certDigestInfo",void 0);let u=class Target{constructor(e={}){Object.assign(this,e)}};t.Target=u;i.__decorate([(0,s.AsnProp)({type:o.GeneralName,context:0,implicit:true})],u.prototype,"targetName",void 0);i.__decorate([(0,s.AsnProp)({type:o.GeneralName,context:1,implicit:true})],u.prototype,"targetGroup",void 0);i.__decorate([(0,s.AsnProp)({type:TargetCert,context:2,implicit:true})],u.prototype,"targetCert",void 0);t.Target=u=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Choice})],u);let d=n=class Targets extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.Targets=d;t.Targets=d=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:u})],d)},25679:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.V2Form=void 0;const n=r(80516);const i=r(61237);const s=r(20168);const o=r(40106);const a=r(14648);class V2Form{constructor(e={}){Object.assign(this,e)}}t.V2Form=V2Form;n.__decorate([(0,i.AsnProp)({type:s.GeneralNames,optional:true})],V2Form.prototype,"issuerName",void 0);n.__decorate([(0,i.AsnProp)({type:o.IssuerSerial,context:0,implicit:true,optional:true})],V2Form.prototype,"baseCertificateID",void 0);n.__decorate([(0,i.AsnProp)({type:a.ObjectDigestInfo,context:1,implicit:true,optional:true})],V2Form.prototype,"objectDigestInfo",void 0)},17595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AlgorithmIdentifier=void 0;const n=r(80516);const i=r(61237);const s=r(69185);class AlgorithmIdentifier{constructor(e={}){this.algorithm="";Object.assign(this,e)}isEqual(e){return e instanceof AlgorithmIdentifier&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&s.isEqual(e.parameters,this.parameters)||e.parameters===this.parameters)}}t.AlgorithmIdentifier=AlgorithmIdentifier;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier.prototype,"algorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,optional:true})],AlgorithmIdentifier.prototype,"parameters",void 0)},51468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Attribute=void 0;const n=r(80516);const i=r(61237);class Attribute{constructor(e={}){this.type="";this.values=[];Object.assign(this,e)}}t.Attribute=Attribute;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],Attribute.prototype,"type",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,repeated:"set"})],Attribute.prototype,"values",void 0)},45371:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Certificate=void 0;const n=r(80516);const i=r(61237);const s=r(17595);const o=r(33784);class Certificate{constructor(e={}){this.tbsCertificate=new o.TBSCertificate;this.signatureAlgorithm=new s.AlgorithmIdentifier;this.signatureValue=new ArrayBuffer(0);Object.assign(this,e)}}t.Certificate=Certificate;n.__decorate([(0,i.AsnProp)({type:o.TBSCertificate})],Certificate.prototype,"tbsCertificate",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier})],Certificate.prototype,"signatureAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString})],Certificate.prototype,"signatureValue",void 0)},10196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CertificateList=void 0;const n=r(80516);const i=r(61237);const s=r(17595);const o=r(52466);class CertificateList{constructor(e={}){this.tbsCertList=new o.TBSCertList;this.signatureAlgorithm=new s.AlgorithmIdentifier;this.signature=new ArrayBuffer(0);Object.assign(this,e)}}t.CertificateList=CertificateList;n.__decorate([(0,i.AsnProp)({type:o.TBSCertList})],CertificateList.prototype,"tbsCertList",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier})],CertificateList.prototype,"signatureAlgorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString})],CertificateList.prototype,"signature",void 0)},69413:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.Extensions=t.Extension=void 0;const i=r(80516);const s=r(61237);class Extension{constructor(e={}){this.extnID="";this.critical=Extension.CRITICAL;this.extnValue=new s.OctetString;Object.assign(this,e)}}t.Extension=Extension;Extension.CRITICAL=false;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],Extension.prototype,"extnID",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Boolean,defaultValue:Extension.CRITICAL})],Extension.prototype,"critical",void 0);i.__decorate([(0,s.AsnProp)({type:s.OctetString})],Extension.prototype,"extnValue",void 0);let o=n=class Extensions extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.Extensions=o;t.Extensions=o=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:Extension})],o)},32047:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.AuthorityInfoAccessSyntax=t.AccessDescription=t.id_pe_authorityInfoAccess=void 0;const i=r(80516);const s=r(61237);const o=r(96206);const a=r(35555);t.id_pe_authorityInfoAccess=`${a.id_pe}.1`;class AccessDescription{constructor(e={}){this.accessMethod="";this.accessLocation=new o.GeneralName;Object.assign(this,e)}}t.AccessDescription=AccessDescription;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],AccessDescription.prototype,"accessMethod",void 0);i.__decorate([(0,s.AsnProp)({type:o.GeneralName})],AccessDescription.prototype,"accessLocation",void 0);let c=n=class AuthorityInfoAccessSyntax extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.AuthorityInfoAccessSyntax=c;t.AuthorityInfoAccessSyntax=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:AccessDescription})],c)},7766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AuthorityKeyIdentifier=t.KeyIdentifier=t.id_ce_authorityKeyIdentifier=void 0;const n=r(80516);const i=r(61237);const s=r(96206);const o=r(35555);t.id_ce_authorityKeyIdentifier=`${o.id_ce}.35`;class KeyIdentifier extends i.OctetString{}t.KeyIdentifier=KeyIdentifier;class AuthorityKeyIdentifier{constructor(e={}){if(e){Object.assign(this,e)}}}t.AuthorityKeyIdentifier=AuthorityKeyIdentifier;n.__decorate([(0,i.AsnProp)({type:KeyIdentifier,context:0,optional:true,implicit:true})],AuthorityKeyIdentifier.prototype,"keyIdentifier",void 0);n.__decorate([(0,i.AsnProp)({type:s.GeneralName,context:1,optional:true,implicit:true,repeated:"sequence"})],AuthorityKeyIdentifier.prototype,"authorityCertIssuer",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,context:2,optional:true,implicit:true,converter:i.AsnIntegerArrayBufferConverter})],AuthorityKeyIdentifier.prototype,"authorityCertSerialNumber",void 0)},42479:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BasicConstraints=t.id_ce_basicConstraints=void 0;const n=r(80516);const i=r(61237);const s=r(35555);t.id_ce_basicConstraints=`${s.id_ce}.19`;class BasicConstraints{constructor(e={}){this.cA=false;Object.assign(this,e)}}t.BasicConstraints=BasicConstraints;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Boolean,defaultValue:false})],BasicConstraints.prototype,"cA",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,optional:true})],BasicConstraints.prototype,"pathLenConstraint",void 0)},36594:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.CertificateIssuer=t.id_ce_certificateIssuer=void 0;const i=r(80516);const s=r(61237);const o=r(16608);const a=r(35555);t.id_ce_certificateIssuer=`${a.id_ce}.29`;let c=n=class CertificateIssuer extends o.GeneralNames{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.CertificateIssuer=c;t.CertificateIssuer=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],c)},45212:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.CertificatePolicies=t.PolicyInformation=t.PolicyQualifierInfo=t.Qualifier=t.UserNotice=t.NoticeReference=t.DisplayText=t.id_ce_certificatePolicies_anyPolicy=t.id_ce_certificatePolicies=void 0;const i=r(80516);const s=r(61237);const o=r(35555);t.id_ce_certificatePolicies=`${o.id_ce}.32`;t.id_ce_certificatePolicies_anyPolicy=`${t.id_ce_certificatePolicies}.0`;let a=class DisplayText{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};t.DisplayText=a;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.IA5String})],a.prototype,"ia5String",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.VisibleString})],a.prototype,"visibleString",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.BmpString})],a.prototype,"bmpString",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Utf8String})],a.prototype,"utf8String",void 0);t.DisplayText=a=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Choice})],a);class NoticeReference{constructor(e={}){this.organization=new a;this.noticeNumbers=[];Object.assign(this,e)}}t.NoticeReference=NoticeReference;i.__decorate([(0,s.AsnProp)({type:a})],NoticeReference.prototype,"organization",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer,repeated:"sequence"})],NoticeReference.prototype,"noticeNumbers",void 0);class UserNotice{constructor(e={}){Object.assign(this,e)}}t.UserNotice=UserNotice;i.__decorate([(0,s.AsnProp)({type:NoticeReference,optional:true})],UserNotice.prototype,"noticeRef",void 0);i.__decorate([(0,s.AsnProp)({type:a,optional:true})],UserNotice.prototype,"explicitText",void 0);let c=class Qualifier{constructor(e={}){Object.assign(this,e)}};t.Qualifier=c;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.IA5String})],c.prototype,"cPSuri",void 0);i.__decorate([(0,s.AsnProp)({type:UserNotice})],c.prototype,"userNotice",void 0);t.Qualifier=c=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Choice})],c);class PolicyQualifierInfo{constructor(e={}){this.policyQualifierId="";this.qualifier=new ArrayBuffer(0);Object.assign(this,e)}}t.PolicyQualifierInfo=PolicyQualifierInfo;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],PolicyQualifierInfo.prototype,"policyQualifierId",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Any})],PolicyQualifierInfo.prototype,"qualifier",void 0);class PolicyInformation{constructor(e={}){this.policyIdentifier="";Object.assign(this,e)}}t.PolicyInformation=PolicyInformation;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],PolicyInformation.prototype,"policyIdentifier",void 0);i.__decorate([(0,s.AsnProp)({type:PolicyQualifierInfo,repeated:"sequence",optional:true})],PolicyInformation.prototype,"policyQualifiers",void 0);let u=n=class CertificatePolicies extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.CertificatePolicies=u;t.CertificatePolicies=u=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:PolicyInformation})],u)},68889:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseCRLNumber=t.id_ce_deltaCRLIndicator=void 0;const n=r(80516);const i=r(61237);const s=r(35555);const o=r(21951);t.id_ce_deltaCRLIndicator=`${s.id_ce}.27`;let a=class BaseCRLNumber extends o.CRLNumber{};t.BaseCRLNumber=a;t.BaseCRLNumber=a=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],a)},74822:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.CRLDistributionPoints=t.DistributionPoint=t.DistributionPointName=t.Reason=t.ReasonFlags=t.id_ce_cRLDistributionPoints=void 0;const i=r(80516);const s=r(61237);const o=r(2970);const a=r(96206);const c=r(35555);t.id_ce_cRLDistributionPoints=`${c.id_ce}.31`;var u;(function(e){e[e["unused"]=1]="unused";e[e["keyCompromise"]=2]="keyCompromise";e[e["cACompromise"]=4]="cACompromise";e[e["affiliationChanged"]=8]="affiliationChanged";e[e["superseded"]=16]="superseded";e[e["cessationOfOperation"]=32]="cessationOfOperation";e[e["certificateHold"]=64]="certificateHold";e[e["privilegeWithdrawn"]=128]="privilegeWithdrawn";e[e["aACompromise"]=256]="aACompromise"})(u||(t.ReasonFlags=u={}));class Reason extends s.BitString{toJSON(){const e=[];const t=this.toNumber();if(t&u.aACompromise){e.push("aACompromise")}if(t&u.affiliationChanged){e.push("affiliationChanged")}if(t&u.cACompromise){e.push("cACompromise")}if(t&u.certificateHold){e.push("certificateHold")}if(t&u.cessationOfOperation){e.push("cessationOfOperation")}if(t&u.keyCompromise){e.push("keyCompromise")}if(t&u.privilegeWithdrawn){e.push("privilegeWithdrawn")}if(t&u.superseded){e.push("superseded")}if(t&u.unused){e.push("unused")}return e}toString(){return`[${this.toJSON().join(", ")}]`}}t.Reason=Reason;let d=class DistributionPointName{constructor(e={}){Object.assign(this,e)}};t.DistributionPointName=d;i.__decorate([(0,s.AsnProp)({type:a.GeneralName,context:0,repeated:"sequence",implicit:true})],d.prototype,"fullName",void 0);i.__decorate([(0,s.AsnProp)({type:o.RelativeDistinguishedName,context:1,implicit:true})],d.prototype,"nameRelativeToCRLIssuer",void 0);t.DistributionPointName=d=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Choice})],d);class DistributionPoint{constructor(e={}){Object.assign(this,e)}}t.DistributionPoint=DistributionPoint;i.__decorate([(0,s.AsnProp)({type:d,context:0,optional:true})],DistributionPoint.prototype,"distributionPoint",void 0);i.__decorate([(0,s.AsnProp)({type:Reason,context:1,optional:true,implicit:true})],DistributionPoint.prototype,"reasons",void 0);i.__decorate([(0,s.AsnProp)({type:a.GeneralName,context:2,optional:true,repeated:"sequence",implicit:true})],DistributionPoint.prototype,"cRLIssuer",void 0);let p=n=class CRLDistributionPoints extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.CRLDistributionPoints=p;t.CRLDistributionPoints=p=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:DistributionPoint})],p)},53734:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.FreshestCRL=t.id_ce_freshestCRL=void 0;const i=r(80516);const s=r(61237);const o=r(35555);const a=r(74822);t.id_ce_freshestCRL=`${o.id_ce}.46`;let c=n=class FreshestCRL extends a.CRLDistributionPoints{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.FreshestCRL=c;t.FreshestCRL=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:a.DistributionPoint})],c)},13291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IssuingDistributionPoint=t.id_ce_issuingDistributionPoint=void 0;const n=r(80516);const i=r(61237);const s=r(74822);const o=r(35555);const a=r(61237);t.id_ce_issuingDistributionPoint=`${o.id_ce}.28`;class IssuingDistributionPoint{constructor(e={}){this.onlyContainsUserCerts=IssuingDistributionPoint.ONLY;this.onlyContainsCACerts=IssuingDistributionPoint.ONLY;this.indirectCRL=IssuingDistributionPoint.ONLY;this.onlyContainsAttributeCerts=IssuingDistributionPoint.ONLY;Object.assign(this,e)}}t.IssuingDistributionPoint=IssuingDistributionPoint;IssuingDistributionPoint.ONLY=false;n.__decorate([(0,i.AsnProp)({type:s.DistributionPointName,context:0,optional:true})],IssuingDistributionPoint.prototype,"distributionPoint",void 0);n.__decorate([(0,i.AsnProp)({type:a.AsnPropTypes.Boolean,context:1,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsUserCerts",void 0);n.__decorate([(0,i.AsnProp)({type:a.AsnPropTypes.Boolean,context:2,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsCACerts",void 0);n.__decorate([(0,i.AsnProp)({type:s.Reason,context:3,optional:true,implicit:true})],IssuingDistributionPoint.prototype,"onlySomeReasons",void 0);n.__decorate([(0,i.AsnProp)({type:a.AsnPropTypes.Boolean,context:4,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"indirectCRL",void 0);n.__decorate([(0,i.AsnProp)({type:a.AsnPropTypes.Boolean,context:5,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsAttributeCerts",void 0)},21951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CRLNumber=t.id_ce_cRLNumber=void 0;const n=r(80516);const i=r(61237);const s=r(35555);t.id_ce_cRLNumber=`${s.id_ce}.20`;let o=class CRLNumber{constructor(e=0){this.value=e}};t.CRLNumber=o;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer})],o.prototype,"value",void 0);t.CRLNumber=o=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],o)},49802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CRLReason=t.CRLReasons=t.id_ce_cRLReasons=void 0;const n=r(80516);const i=r(61237);const s=r(35555);t.id_ce_cRLReasons=`${s.id_ce}.21`;var o;(function(e){e[e["unspecified"]=0]="unspecified";e[e["keyCompromise"]=1]="keyCompromise";e[e["cACompromise"]=2]="cACompromise";e[e["affiliationChanged"]=3]="affiliationChanged";e[e["superseded"]=4]="superseded";e[e["cessationOfOperation"]=5]="cessationOfOperation";e[e["certificateHold"]=6]="certificateHold";e[e["removeFromCRL"]=8]="removeFromCRL";e[e["privilegeWithdrawn"]=9]="privilegeWithdrawn";e[e["aACompromise"]=10]="aACompromise"})(o||(t.CRLReasons=o={}));let a=class CRLReason{constructor(e=o.unspecified){this.reason=o.unspecified;this.reason=e}toJSON(){return o[this.reason]}toString(){return this.toJSON()}};t.CRLReason=a;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Enumerated})],a.prototype,"reason",void 0);t.CRLReason=a=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],a)},98614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EntrustVersionInfo=t.EntrustInfo=t.EntrustInfoFlags=t.id_entrust_entrustVersInfo=void 0;const n=r(80516);const i=r(61237);t.id_entrust_entrustVersInfo="1.2.840.113533.7.65.0";var s;(function(e){e[e["keyUpdateAllowed"]=1]="keyUpdateAllowed";e[e["newExtensions"]=2]="newExtensions";e[e["pKIXCertificate"]=4]="pKIXCertificate"})(s||(t.EntrustInfoFlags=s={}));class EntrustInfo extends i.BitString{toJSON(){const e=[];const t=this.toNumber();if(t&s.pKIXCertificate){e.push("pKIXCertificate")}if(t&s.newExtensions){e.push("newExtensions")}if(t&s.keyUpdateAllowed){e.push("keyUpdateAllowed")}return e}toString(){return`[${this.toJSON().join(", ")}]`}}t.EntrustInfo=EntrustInfo;class EntrustVersionInfo{constructor(e={}){this.entrustVers="";this.entrustInfoFlags=new EntrustInfo;Object.assign(this,e)}}t.EntrustVersionInfo=EntrustVersionInfo;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.GeneralString})],EntrustVersionInfo.prototype,"entrustVers",void 0);n.__decorate([(0,i.AsnProp)({type:EntrustInfo})],EntrustVersionInfo.prototype,"entrustInfoFlags",void 0)},20515:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.id_kp_OCSPSigning=t.id_kp_timeStamping=t.id_kp_emailProtection=t.id_kp_codeSigning=t.id_kp_clientAuth=t.id_kp_serverAuth=t.anyExtendedKeyUsage=t.ExtendedKeyUsage=t.id_ce_extKeyUsage=void 0;const i=r(80516);const s=r(61237);const o=r(35555);t.id_ce_extKeyUsage=`${o.id_ce}.37`;let a=n=class ExtendedKeyUsage extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.ExtendedKeyUsage=a;t.ExtendedKeyUsage=a=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:s.AsnPropTypes.ObjectIdentifier})],a);t.anyExtendedKeyUsage=`${t.id_ce_extKeyUsage}.0`;t.id_kp_serverAuth=`${o.id_kp}.1`;t.id_kp_clientAuth=`${o.id_kp}.2`;t.id_kp_codeSigning=`${o.id_kp}.3`;t.id_kp_emailProtection=`${o.id_kp}.4`;t.id_kp_timeStamping=`${o.id_kp}.8`;t.id_kp_OCSPSigning=`${o.id_kp}.9`},23212:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(32047),t);n.__exportStar(r(7766),t);n.__exportStar(r(42479),t);n.__exportStar(r(36594),t);n.__exportStar(r(45212),t);n.__exportStar(r(68889),t);n.__exportStar(r(74822),t);n.__exportStar(r(53734),t);n.__exportStar(r(13291),t);n.__exportStar(r(21951),t);n.__exportStar(r(49802),t);n.__exportStar(r(20515),t);n.__exportStar(r(65977),t);n.__exportStar(r(41353),t);n.__exportStar(r(98501),t);n.__exportStar(r(3106),t);n.__exportStar(r(28900),t);n.__exportStar(r(1690),t);n.__exportStar(r(57933),t);n.__exportStar(r(61978),t);n.__exportStar(r(45493),t);n.__exportStar(r(4322),t);n.__exportStar(r(37497),t);n.__exportStar(r(98614),t);n.__exportStar(r(64331),t)},65977:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InhibitAnyPolicy=t.id_ce_inhibitAnyPolicy=void 0;const n=r(80516);const i=r(61237);const s=r(35555);t.id_ce_inhibitAnyPolicy=`${s.id_ce}.54`;let o=class InhibitAnyPolicy{constructor(e=new ArrayBuffer(0)){this.value=e}};t.InhibitAnyPolicy=o;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],o.prototype,"value",void 0);t.InhibitAnyPolicy=o=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],o)},41353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidityDate=t.id_ce_invalidityDate=void 0;const n=r(80516);const i=r(61237);const s=r(35555);t.id_ce_invalidityDate=`${s.id_ce}.24`;let o=class InvalidityDate{constructor(e){this.value=new Date;if(e){this.value=e}}};t.InvalidityDate=o;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.GeneralizedTime})],o.prototype,"value",void 0);t.InvalidityDate=o=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],o)},98501:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.IssueAlternativeName=t.id_ce_issuerAltName=void 0;const i=r(80516);const s=r(61237);const o=r(16608);const a=r(35555);t.id_ce_issuerAltName=`${a.id_ce}.18`;let c=n=class IssueAlternativeName extends o.GeneralNames{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.IssueAlternativeName=c;t.IssueAlternativeName=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],c)},3106:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.KeyUsage=t.KeyUsageFlags=t.id_ce_keyUsage=void 0;const n=r(61237);const i=r(35555);t.id_ce_keyUsage=`${i.id_ce}.15`;var s;(function(e){e[e["digitalSignature"]=1]="digitalSignature";e[e["nonRepudiation"]=2]="nonRepudiation";e[e["keyEncipherment"]=4]="keyEncipherment";e[e["dataEncipherment"]=8]="dataEncipherment";e[e["keyAgreement"]=16]="keyAgreement";e[e["keyCertSign"]=32]="keyCertSign";e[e["cRLSign"]=64]="cRLSign";e[e["encipherOnly"]=128]="encipherOnly";e[e["decipherOnly"]=256]="decipherOnly"})(s||(t.KeyUsageFlags=s={}));class KeyUsage extends n.BitString{toJSON(){const e=this.toNumber();const t=[];if(e&s.cRLSign){t.push("crlSign")}if(e&s.dataEncipherment){t.push("dataEncipherment")}if(e&s.decipherOnly){t.push("decipherOnly")}if(e&s.digitalSignature){t.push("digitalSignature")}if(e&s.encipherOnly){t.push("encipherOnly")}if(e&s.keyAgreement){t.push("keyAgreement")}if(e&s.keyCertSign){t.push("keyCertSign")}if(e&s.keyEncipherment){t.push("keyEncipherment")}if(e&s.nonRepudiation){t.push("nonRepudiation")}return t}toString(){return`[${this.toJSON().join(", ")}]`}}t.KeyUsage=KeyUsage},28900:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.NameConstraints=t.GeneralSubtrees=t.GeneralSubtree=t.id_ce_nameConstraints=void 0;const i=r(80516);const s=r(61237);const o=r(96206);const a=r(35555);t.id_ce_nameConstraints=`${a.id_ce}.30`;class GeneralSubtree{constructor(e={}){this.base=new o.GeneralName;this.minimum=0;Object.assign(this,e)}}t.GeneralSubtree=GeneralSubtree;i.__decorate([(0,s.AsnProp)({type:o.GeneralName})],GeneralSubtree.prototype,"base",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer,context:0,defaultValue:0,implicit:true})],GeneralSubtree.prototype,"minimum",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.Integer,context:1,optional:true,implicit:true})],GeneralSubtree.prototype,"maximum",void 0);let c=n=class GeneralSubtrees extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.GeneralSubtrees=c;t.GeneralSubtrees=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:GeneralSubtree})],c);class NameConstraints{constructor(e={}){Object.assign(this,e)}}t.NameConstraints=NameConstraints;i.__decorate([(0,s.AsnProp)({type:c,context:0,optional:true,implicit:true})],NameConstraints.prototype,"permittedSubtrees",void 0);i.__decorate([(0,s.AsnProp)({type:c,context:1,optional:true,implicit:true})],NameConstraints.prototype,"excludedSubtrees",void 0)},1690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PolicyConstraints=t.id_ce_policyConstraints=void 0;const n=r(80516);const i=r(61237);const s=r(35555);t.id_ce_policyConstraints=`${s.id_ce}.36`;class PolicyConstraints{constructor(e={}){Object.assign(this,e)}}t.PolicyConstraints=PolicyConstraints;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,context:0,implicit:true,optional:true,converter:i.AsnIntegerArrayBufferConverter})],PolicyConstraints.prototype,"requireExplicitPolicy",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,context:1,implicit:true,optional:true,converter:i.AsnIntegerArrayBufferConverter})],PolicyConstraints.prototype,"inhibitPolicyMapping",void 0)},57933:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.PolicyMappings=t.PolicyMapping=t.id_ce_policyMappings=void 0;const i=r(80516);const s=r(61237);const o=r(35555);t.id_ce_policyMappings=`${o.id_ce}.33`;class PolicyMapping{constructor(e={}){this.issuerDomainPolicy="";this.subjectDomainPolicy="";Object.assign(this,e)}}t.PolicyMapping=PolicyMapping;i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],PolicyMapping.prototype,"issuerDomainPolicy",void 0);i.__decorate([(0,s.AsnProp)({type:s.AsnPropTypes.ObjectIdentifier})],PolicyMapping.prototype,"subjectDomainPolicy",void 0);let a=n=class PolicyMappings extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.PolicyMappings=a;t.PolicyMappings=a=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:PolicyMapping})],a)},37497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PrivateKeyUsagePeriod=t.id_ce_privateKeyUsagePeriod=void 0;const n=r(80516);const i=r(61237);const s=r(35555);t.id_ce_privateKeyUsagePeriod=`${s.id_ce}.16`;class PrivateKeyUsagePeriod{constructor(e={}){Object.assign(this,e)}}t.PrivateKeyUsagePeriod=PrivateKeyUsagePeriod;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.GeneralizedTime,context:0,implicit:true,optional:true})],PrivateKeyUsagePeriod.prototype,"notBefore",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.GeneralizedTime,context:1,implicit:true,optional:true})],PrivateKeyUsagePeriod.prototype,"notAfter",void 0)},61978:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.SubjectAlternativeName=t.id_ce_subjectAltName=void 0;const i=r(80516);const s=r(61237);const o=r(16608);const a=r(35555);t.id_ce_subjectAltName=`${a.id_ce}.17`;let c=n=class SubjectAlternativeName extends o.GeneralNames{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.SubjectAlternativeName=c;t.SubjectAlternativeName=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence})],c)},45493:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.SubjectDirectoryAttributes=t.id_ce_subjectDirectoryAttributes=void 0;const i=r(80516);const s=r(61237);const o=r(51468);const a=r(35555);t.id_ce_subjectDirectoryAttributes=`${a.id_ce}.9`;let c=n=class SubjectDirectoryAttributes extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.SubjectDirectoryAttributes=c;t.SubjectDirectoryAttributes=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:o.Attribute})],c)},64331:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.SubjectInfoAccessSyntax=t.id_pe_subjectInfoAccess=void 0;const i=r(80516);const s=r(61237);const o=r(35555);const a=r(32047);t.id_pe_subjectInfoAccess=`${o.id_pe}.11`;let c=n=class SubjectInfoAccessSyntax extends s.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.SubjectInfoAccessSyntax=c;t.SubjectInfoAccessSyntax=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:a.AccessDescription})],c)},4322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SubjectKeyIdentifier=t.id_ce_subjectKeyIdentifier=void 0;const n=r(35555);const i=r(7766);t.id_ce_subjectKeyIdentifier=`${n.id_ce}.14`;class SubjectKeyIdentifier extends i.KeyIdentifier{}t.SubjectKeyIdentifier=SubjectKeyIdentifier},96206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GeneralName=t.EDIPartyName=t.OtherName=t.AsnIpConverter=void 0;const n=r(80516);const i=r(61237);const s=r(31162);const o=r(2970);t.AsnIpConverter={fromASN:e=>s.IpConverter.toString(i.AsnOctetStringConverter.fromASN(e)),toASN:e=>i.AsnOctetStringConverter.toASN(s.IpConverter.fromString(e))};class OtherName{constructor(e={}){this.typeId="";this.value=new ArrayBuffer(0);Object.assign(this,e)}}t.OtherName=OtherName;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier})],OtherName.prototype,"typeId",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,context:0})],OtherName.prototype,"value",void 0);class EDIPartyName{constructor(e={}){this.partyName=new o.DirectoryString;Object.assign(this,e)}}t.EDIPartyName=EDIPartyName;n.__decorate([(0,i.AsnProp)({type:o.DirectoryString,optional:true,context:0,implicit:true})],EDIPartyName.prototype,"nameAssigner",void 0);n.__decorate([(0,i.AsnProp)({type:o.DirectoryString,context:1,implicit:true})],EDIPartyName.prototype,"partyName",void 0);let a=class GeneralName{constructor(e={}){Object.assign(this,e)}};t.GeneralName=a;n.__decorate([(0,i.AsnProp)({type:OtherName,context:0,implicit:true})],a.prototype,"otherName",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.IA5String,context:1,implicit:true})],a.prototype,"rfc822Name",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.IA5String,context:2,implicit:true})],a.prototype,"dNSName",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Any,context:3,implicit:true})],a.prototype,"x400Address",void 0);n.__decorate([(0,i.AsnProp)({type:o.Name,context:4,implicit:false})],a.prototype,"directoryName",void 0);n.__decorate([(0,i.AsnProp)({type:EDIPartyName,context:5})],a.prototype,"ediPartyName",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.IA5String,context:6,implicit:true})],a.prototype,"uniformResourceIdentifier",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.OctetString,context:7,implicit:true,converter:t.AsnIpConverter})],a.prototype,"iPAddress",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.ObjectIdentifier,context:8,implicit:true})],a.prototype,"registeredID",void 0);t.GeneralName=a=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],a)},16608:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.GeneralNames=void 0;const i=r(80516);const s=r(61237);const o=r(96206);const a=r(61237);let c=n=class GeneralNames extends a.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.GeneralNames=c;t.GeneralNames=c=n=i.__decorate([(0,s.AsnType)({type:s.AsnTypeTypes.Sequence,itemType:o.GeneralName})],c)},20168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(80516);n.__exportStar(r(23212),t);n.__exportStar(r(17595),t);n.__exportStar(r(51468),t);n.__exportStar(r(45371),t);n.__exportStar(r(10196),t);n.__exportStar(r(69413),t);n.__exportStar(r(96206),t);n.__exportStar(r(16608),t);n.__exportStar(r(2970),t);n.__exportStar(r(35555),t);n.__exportStar(r(19676),t);n.__exportStar(r(52466),t);n.__exportStar(r(33784),t);n.__exportStar(r(57224),t);n.__exportStar(r(45517),t);n.__exportStar(r(81133),t)},31162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IpConverter=void 0;const n=r(28260);const i=r(69185);class IpConverter{static decodeIP(e){if(e.length===64&&parseInt(e,16)===0){return"::/0"}if(e.length!==16){return e}const t=parseInt(e.slice(8),16).toString(2).split("").reduce(((e,t)=>e+ +t),0);let r=e.slice(0,8).replace(/(.{2})/g,(e=>`${parseInt(e,16)}.`));r=r.slice(0,-1);return`${r}/${t}`}static toString(e){if(e.byteLength===4||e.byteLength===16){const t=new Uint8Array(e);const r=n.fromByteArray(Array.from(t));return r.toString()}return this.decodeIP(i.Convert.ToHex(e))}static fromString(e){const t=n.parse(e);return new Uint8Array(t.toByteArray()).buffer}}t.IpConverter=IpConverter},2970:(e,t,r)=>{"use strict";var n,i,s;Object.defineProperty(t,"__esModule",{value:true});t.Name=t.RDNSequence=t.RelativeDistinguishedName=t.AttributeTypeAndValue=t.AttributeValue=t.DirectoryString=void 0;const o=r(80516);const a=r(61237);const c=r(69185);let u=class DirectoryString{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};t.DirectoryString=u;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.TeletexString})],u.prototype,"teletexString",void 0);o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.PrintableString})],u.prototype,"printableString",void 0);o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.UniversalString})],u.prototype,"universalString",void 0);o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.Utf8String})],u.prototype,"utf8String",void 0);o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.BmpString})],u.prototype,"bmpString",void 0);t.DirectoryString=u=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],u);let d=class AttributeValue extends u{constructor(e={}){super(e);Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?c.Convert.ToHex(this.anyValue):super.toString())}};t.AttributeValue=d;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.IA5String})],d.prototype,"ia5String",void 0);o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.Any})],d.prototype,"anyValue",void 0);t.AttributeValue=d=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Choice})],d);class AttributeTypeAndValue{constructor(e={}){this.type="";this.value=new d;Object.assign(this,e)}}t.AttributeTypeAndValue=AttributeTypeAndValue;o.__decorate([(0,a.AsnProp)({type:a.AsnPropTypes.ObjectIdentifier})],AttributeTypeAndValue.prototype,"type",void 0);o.__decorate([(0,a.AsnProp)({type:d})],AttributeTypeAndValue.prototype,"value",void 0);let p=n=class RelativeDistinguishedName extends a.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,n.prototype)}};t.RelativeDistinguishedName=p;t.RelativeDistinguishedName=p=n=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Set,itemType:AttributeTypeAndValue})],p);let m=i=class RDNSequence extends a.AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,i.prototype)}};t.RDNSequence=m;t.RDNSequence=m=i=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Sequence,itemType:p})],m);let y=s=class Name extends m{constructor(e){super(e);Object.setPrototypeOf(this,s.prototype)}};t.Name=y;t.Name=y=s=o.__decorate([(0,a.AsnType)({type:a.AsnTypeTypes.Sequence})],y)},35555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.id_ce=t.id_ad_caRepository=t.id_ad_timeStamping=t.id_ad_caIssuers=t.id_ad_ocsp=t.id_qt_unotice=t.id_qt_csp=t.id_ad=t.id_kp=t.id_qt=t.id_pe=t.id_pkix=void 0;t.id_pkix="1.3.6.1.5.5.7";t.id_pe=`${t.id_pkix}.1`;t.id_qt=`${t.id_pkix}.2`;t.id_kp=`${t.id_pkix}.3`;t.id_ad=`${t.id_pkix}.48`;t.id_qt_csp=`${t.id_qt}.1`;t.id_qt_unotice=`${t.id_qt}.2`;t.id_ad_ocsp=`${t.id_ad}.1`;t.id_ad_caIssuers=`${t.id_ad}.2`;t.id_ad_timeStamping=`${t.id_ad}.3`;t.id_ad_caRepository=`${t.id_ad}.5`;t.id_ce="2.5.29"},19676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SubjectPublicKeyInfo=void 0;const n=r(80516);const i=r(61237);const s=r(17595);class SubjectPublicKeyInfo{constructor(e={}){this.algorithm=new s.AlgorithmIdentifier;this.subjectPublicKey=new ArrayBuffer(0);Object.assign(this,e)}}t.SubjectPublicKeyInfo=SubjectPublicKeyInfo;n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier})],SubjectPublicKeyInfo.prototype,"algorithm",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString})],SubjectPublicKeyInfo.prototype,"subjectPublicKey",void 0)},52466:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TBSCertList=t.RevokedCertificate=void 0;const n=r(80516);const i=r(61237);const s=r(17595);const o=r(2970);const a=r(57224);const c=r(69413);class RevokedCertificate{constructor(e={}){this.userCertificate=new ArrayBuffer(0);this.revocationDate=new a.Time;Object.assign(this,e)}}t.RevokedCertificate=RevokedCertificate;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],RevokedCertificate.prototype,"userCertificate",void 0);n.__decorate([(0,i.AsnProp)({type:a.Time})],RevokedCertificate.prototype,"revocationDate",void 0);n.__decorate([(0,i.AsnProp)({type:c.Extension,optional:true,repeated:"sequence"})],RevokedCertificate.prototype,"crlEntryExtensions",void 0);class TBSCertList{constructor(e={}){this.signature=new s.AlgorithmIdentifier;this.issuer=new o.Name;this.thisUpdate=new a.Time;Object.assign(this,e)}}t.TBSCertList=TBSCertList;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,optional:true})],TBSCertList.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier})],TBSCertList.prototype,"signature",void 0);n.__decorate([(0,i.AsnProp)({type:o.Name})],TBSCertList.prototype,"issuer",void 0);n.__decorate([(0,i.AsnProp)({type:a.Time})],TBSCertList.prototype,"thisUpdate",void 0);n.__decorate([(0,i.AsnProp)({type:a.Time,optional:true})],TBSCertList.prototype,"nextUpdate",void 0);n.__decorate([(0,i.AsnProp)({type:RevokedCertificate,repeated:"sequence",optional:true})],TBSCertList.prototype,"revokedCertificates",void 0);n.__decorate([(0,i.AsnProp)({type:c.Extension,optional:true,context:0,repeated:"sequence"})],TBSCertList.prototype,"crlExtensions",void 0)},33784:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TBSCertificate=void 0;const n=r(80516);const i=r(61237);const s=r(17595);const o=r(2970);const a=r(19676);const c=r(81133);const u=r(69413);const d=r(45517);class TBSCertificate{constructor(e={}){this.version=d.Version.v1;this.serialNumber=new ArrayBuffer(0);this.signature=new s.AlgorithmIdentifier;this.issuer=new o.Name;this.validity=new c.Validity;this.subject=new o.Name;this.subjectPublicKeyInfo=new a.SubjectPublicKeyInfo;Object.assign(this,e)}}t.TBSCertificate=TBSCertificate;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,context:0,defaultValue:d.Version.v1})],TBSCertificate.prototype,"version",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerArrayBufferConverter})],TBSCertificate.prototype,"serialNumber",void 0);n.__decorate([(0,i.AsnProp)({type:s.AlgorithmIdentifier})],TBSCertificate.prototype,"signature",void 0);n.__decorate([(0,i.AsnProp)({type:o.Name})],TBSCertificate.prototype,"issuer",void 0);n.__decorate([(0,i.AsnProp)({type:c.Validity})],TBSCertificate.prototype,"validity",void 0);n.__decorate([(0,i.AsnProp)({type:o.Name})],TBSCertificate.prototype,"subject",void 0);n.__decorate([(0,i.AsnProp)({type:a.SubjectPublicKeyInfo})],TBSCertificate.prototype,"subjectPublicKeyInfo",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString,context:1,implicit:true,optional:true})],TBSCertificate.prototype,"issuerUniqueID",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.BitString,context:2,implicit:true,optional:true})],TBSCertificate.prototype,"subjectUniqueID",void 0);n.__decorate([(0,i.AsnProp)({type:u.Extensions,context:3,optional:true})],TBSCertificate.prototype,"extensions",void 0)},57224:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Time=void 0;const n=r(80516);const i=r(61237);let s=class Time{constructor(e){if(e){if(typeof e==="string"||typeof e==="number"||e instanceof Date){const t=new Date(e);if(t.getUTCFullYear()>2049){this.generalTime=t}else{this.utcTime=t}}else{Object.assign(this,e)}}}getTime(){const e=this.utcTime||this.generalTime;if(!e){throw new Error("Cannot get time from CHOICE object")}return e}};t.Time=s;n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.UTCTime})],s.prototype,"utcTime",void 0);n.__decorate([(0,i.AsnProp)({type:i.AsnPropTypes.GeneralizedTime})],s.prototype,"generalTime",void 0);t.Time=s=n.__decorate([(0,i.AsnType)({type:i.AsnTypeTypes.Choice})],s)},45517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Version=void 0;var r;(function(e){e[e["v1"]=0]="v1";e[e["v2"]=1]="v2";e[e["v3"]=2]="v3"})(r||(t.Version=r={}))},81133:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Validity=void 0;const n=r(80516);const i=r(61237);const s=r(57224);class Validity{constructor(e){this.notBefore=new s.Time(new Date);this.notAfter=new s.Time(new Date);if(e){this.notBefore=new s.Time(e.notBefore);this.notAfter=new s.Time(e.notAfter)}}}t.Validity=Validity;n.__decorate([(0,i.AsnProp)({type:s.Time})],Validity.prototype,"notBefore",void 0);n.__decorate([(0,i.AsnProp)({type:s.Time})],Validity.prototype,"notAfter",void 0)},84440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});class JsonError extends Error{constructor(e,t){super(t?`${e}. See the inner exception for more details.`:e);this.message=e;this.innerError=t}}class TransformError extends JsonError{constructor(e,t,r){super(t,r);this.schema=e}}class ParserError extends TransformError{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}}class ValidationError extends JsonError{}class SerializerError extends JsonError{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r);this.schemaName=e}}class KeyError extends ParserError{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema");this.keys=t;this.errors=r}}(function(e){e[e["Any"]=0]="Any";e[e["Boolean"]=1]="Boolean";e[e["Number"]=2]="Number";e[e["String"]=3]="String"})(t.JsonPropTypes||(t.JsonPropTypes={}));function checkType(e,r){switch(r){case t.JsonPropTypes.Boolean:return typeof e==="boolean";case t.JsonPropTypes.Number:return typeof e==="number";case t.JsonPropTypes.String:return typeof e==="string"}return true}function throwIfTypeIsWrong(e,r){if(!checkType(e,r)){throw new TypeError(`Value must be ${t.JsonPropTypes[r]}`)}}function isConvertible(e){if(e&&e.prototype){if(e.prototype.toJSON&&e.prototype.fromJSON){return true}else{return isConvertible(e.prototype)}}else{return!!(e&&e.toJSON&&e.fromJSON)}}class JsonSchemaStorage{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){const t=this.items.get(e)||this.findParentSchema(e);if(!t){throw new Error("Cannot get schema for current target")}return t}create(e){const t={names:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.names={};for(const e in r.names){t.names[e]=Object.assign({},r.names[e])}}t.target=e;return t}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=e.__proto__;if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}}const r="default";const n=new JsonSchemaStorage;class PatternValidation{constructor(e){this.pattern=new RegExp(e)}validate(e){const t=new RegExp(this.pattern.source,this.pattern.flags);if(typeof e!=="string"){throw new ValidationError("Incoming value must be string")}if(!t.exec(e)){throw new ValidationError(`Value doesn't match to pattern '${t.toString()}'`)}}}class InclusiveValidation{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,t.JsonPropTypes.Number);if(!(this.min<=e&&e<=this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason [${e},${t}]`)}}}class ExclusiveValidation{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,t.JsonPropTypes.Number);if(!(this.min<e&&e<this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason (${e},${t})`)}}}class LengthValidation{constructor(e,t,r){this.length=e;this.minLength=t;this.maxLength=r}validate(e){if(this.length!==undefined){if(e.length!==this.length){throw new ValidationError(`Value length must be exactly ${this.length}.`)}return}if(this.minLength!==undefined){if(e.length<this.minLength){throw new ValidationError(`Value length must be more than ${this.minLength}.`)}}if(this.maxLength!==undefined){if(e.length>this.maxLength){throw new ValidationError(`Value length must be less than ${this.maxLength}.`)}}}}class EnumerationValidation{constructor(e){this.enumeration=e}validate(e){throwIfTypeIsWrong(e,t.JsonPropTypes.String);if(!this.enumeration.includes(e)){throw new ValidationError(`Value must be one of ${this.enumeration.map((e=>`'${e}'`)).join(", ")}`)}}}class JsonTransform{static checkValues(e,t){const r=Array.isArray(e)?e:[e];for(const n of r){for(const r of t.validations){if(r instanceof LengthValidation&&t.repeated){r.validate(e)}else{r.validate(n)}}}}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e)){throw new TypeError("Value must be Array")}if(typeof t.type==="number"){const r=Array.isArray(e)?e:[e];for(const e of r){throwIfTypeIsWrong(e,t.type)}}}static getSchemaByName(e,t=r){return{...e.names[r],...e.names[t]}}}class JsonSerializer extends JsonTransform{static serialize(e,t,r,n){const i=this.toJSON(e,t);return JSON.stringify(i,r,n)}static toJSON(e,t={}){let i;let s=t.targetSchema;const o=t.schemaName||r;if(isConvertible(e)){return e.toJSON()}if(Array.isArray(e)){i=[];for(const r of e){i.push(this.toJSON(r,t))}}else if(typeof e==="object"){if(s&&!n.has(s)){throw new JsonError("Cannot get schema for `targetSchema` param")}s=s||e.constructor;if(n.has(s)){const t=n.get(s);i={};const r=this.getSchemaByName(t,o);for(const n in r){try{const t=r[n];const a=e[n];let c;if(t.optional&&a===undefined||t.defaultValue!==undefined&&a===t.defaultValue){continue}if(!t.optional&&a===undefined){throw new SerializerError(s.name,`Property '${n}' is required.`)}if(typeof t.type==="number"){if(t.converter){if(t.repeated){c=a.map((r=>t.converter.toJSON(r,e)))}else{c=t.converter.toJSON(a,e)}}else{c=a}}else{if(t.repeated){c=a.map((e=>this.toJSON(e,{schemaName:o})))}else{c=this.toJSON(a,{schemaName:o})}}this.checkTypes(c,t);this.checkValues(c,t);i[t.name||n]=c}catch(e){if(e instanceof SerializerError){throw e}else{throw new SerializerError(t.target.name,`Property '${n}' is wrong. ${e.message}`,e)}}}}else{i={};for(const t in e){i[t]=this.toJSON(e[t],{schemaName:o})}}}else{i=e}return i}}class JsonParser extends JsonTransform{static parse(e,t){const r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){const i=t.targetSchema;const s=t.schemaName||r;const o=new i;if(isConvertible(o)){return o.fromJSON(e)}const a=n.get(i);const c=this.getSchemaByName(a,s);const u={};if(t.strictProperty&&!Array.isArray(e)){JsonParser.checkStrictProperty(e,c,a)}for(const r in c){try{const n=c[r];const i=n.name||r;const u=e[i];if(u===undefined&&(n.optional||n.defaultValue!==undefined)){continue}if(!n.optional&&u===undefined){throw new ParserError(a,`Property '${i}' is required.`)}this.checkTypes(u,n);this.checkValues(u,n);if(typeof n.type==="number"){if(n.converter){if(n.repeated){o[r]=u.map((e=>n.converter.fromJSON(e,o)))}else{o[r]=n.converter.fromJSON(u,o)}}else{o[r]=u}}else{const e={...t,targetSchema:n.type,schemaName:s};if(n.repeated){o[r]=u.map((t=>this.fromJSON(t,e)))}else{o[r]=this.fromJSON(u,e)}}}catch(e){if(!(e instanceof ParserError)){e=new ParserError(a,`Property '${r}' is wrong. ${e.message}`,e)}if(t.strictAllKeys){u[r]=e}else{throw e}}}const d=Object.keys(u);if(d.length){throw new KeyError(a,d,u)}return o}static checkStrictProperty(e,t,r){const n=Object.keys(e);const i=Object.keys(t);const s=[];for(const e of n){if(i.indexOf(e)===-1){s.push(e)}}if(s.length){throw new KeyError(r,s)}}}function getValidations(e){const r=[];if(e.pattern){r.push(new PatternValidation(e.pattern))}if(e.type===t.JsonPropTypes.Number||e.type===t.JsonPropTypes.Any){if(e.minInclusive!==undefined||e.maxInclusive!==undefined){r.push(new InclusiveValidation(e.minInclusive,e.maxInclusive))}if(e.minExclusive!==undefined||e.maxExclusive!==undefined){r.push(new ExclusiveValidation(e.minExclusive,e.maxExclusive))}if(e.enumeration!==undefined){r.push(new EnumerationValidation(e.enumeration))}}if(e.type===t.JsonPropTypes.String||e.repeated||e.type===t.JsonPropTypes.Any){if(e.length!==undefined||e.minLength!==undefined||e.maxLength!==undefined){r.push(new LengthValidation(e.length,e.minLength,e.maxLength))}}return r}const JsonProp=(e={})=>(i,s)=>{const o=`Cannot set type for ${s} property of ${i.constructor.name} schema`;let a;if(!n.has(i.constructor)){a=n.create(i.constructor);n.set(i.constructor,a)}else{a=n.get(i.constructor);if(a.target!==i.constructor){a=n.create(i.constructor);n.set(i.constructor,a)}}const c={type:t.JsonPropTypes.Any,validations:[]};const u=Object.assign(c,e);u.validations=getValidations(u);if(typeof u.type!=="number"){if(!n.has(u.type)&&!isConvertible(u.type)){throw new Error(`${o}. Assigning type doesn't have schema.`)}}let d;if(Array.isArray(e.schema)){d=e.schema}else{d=[e.schema||r]}for(const e of d){if(!a.names[e]){a.names[e]={}}const t=a.names[e];t[s]=u}};t.JsonError=JsonError;t.JsonParser=JsonParser;t.JsonProp=JsonProp;t.JsonSerializer=JsonSerializer;t.KeyError=KeyError;t.ParserError=ParserError;t.SerializerError=SerializerError;t.TransformError=TransformError;t.ValidationError=ValidationError},85400:(e,t,r)=>{"use strict";
/*!
 Copyright (c) Peculiar Ventures, LLC
*/var n=r(16822);var i=r(14300);var s=r(6113);var o=r(77282);var a=r(80516);var c=r(84440);var u=r(69185);var d=r(61237);function _interopNamespaceDefault(e){var t=Object.create(null);if(e){Object.keys(e).forEach((function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:true,get:function(){return e[r]}})}}))}t.default=e;return Object.freeze(t)}var p=_interopNamespaceDefault(n);var m=_interopNamespaceDefault(o);const y={fromJSON:e=>i.Buffer.from(u.Convert.FromBase64Url(e)),toJSON:e=>u.Convert.ToBase64Url(e)};class CryptoKey extends p.CryptoKey{constructor(){super(...arguments);this.data=i.Buffer.alloc(0);this.algorithm={name:""};this.extractable=false;this.type="secret";this.usages=[];this.kty="oct";this.alg=""}}a.__decorate([c.JsonProp({name:"ext",type:c.JsonPropTypes.Boolean,optional:true})],CryptoKey.prototype,"extractable",void 0);a.__decorate([c.JsonProp({name:"key_ops",type:c.JsonPropTypes.String,repeated:true,optional:true})],CryptoKey.prototype,"usages",void 0);a.__decorate([c.JsonProp({type:c.JsonPropTypes.String})],CryptoKey.prototype,"kty",void 0);a.__decorate([c.JsonProp({type:c.JsonPropTypes.String,optional:true})],CryptoKey.prototype,"alg",void 0);class SymmetricKey extends CryptoKey{constructor(){super(...arguments);this.kty="oct";this.type="secret"}}class AsymmetricKey extends CryptoKey{}class AesCryptoKey extends SymmetricKey{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new p.AlgorithmError("Unsupported algorithm name")}}set alg(e){}}a.__decorate([c.JsonProp({name:"k",converter:y})],AesCryptoKey.prototype,"data",void 0);class AesCrypto{static async generateKey(e,t,r){const n=new AesCryptoKey;n.algorithm=e;n.extractable=t;n.usages=r;n.data=s.randomBytes(e.length>>3);return n}static async exportKey(e,t){if(!(t instanceof AesCryptoKey)){throw new Error("key: Is not AesCryptoKey")}switch(e.toLowerCase()){case"jwk":return c.JsonSerializer.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new p.OperationError("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,n,s){let o;switch(e.toLowerCase()){case"jwk":o=c.JsonParser.fromJSON(t,{targetSchema:AesCryptoKey});break;case"raw":o=new AesCryptoKey;o.data=i.Buffer.from(t);break;default:throw new p.OperationError("format: Must be 'jwk' or 'raw'")}o.algorithm=r;o.algorithm.length=o.data.length<<3;o.extractable=n;o.usages=s;switch(o.algorithm.length){case 128:case 192:case 256:break;default:throw new p.OperationError("keyData: Is wrong key length")}return o}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(e,t,i.Buffer.from(r));case"AES-CTR":return this.encryptAesCTR(e,t,i.Buffer.from(r));case"AES-GCM":return this.encryptAesGCM(e,t,i.Buffer.from(r));case"AES-KW":return this.encryptAesKW(e,t,i.Buffer.from(r));case"AES-ECB":return this.encryptAesECB(e,t,i.Buffer.from(r));default:throw new p.OperationError("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof AesCryptoKey)){throw new Error("key: Is not AesCryptoKey")}switch(e.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(e,t,i.Buffer.from(r));case"AES-CTR":return this.decryptAesCTR(e,t,i.Buffer.from(r));case"AES-GCM":return this.decryptAesGCM(e,t,i.Buffer.from(r));case"AES-KW":return this.decryptAesKW(e,t,i.Buffer.from(r));case"AES-ECB":return this.decryptAesECB(e,t,i.Buffer.from(r));default:throw new p.OperationError("algorithm: Is not recognized")}}static async encryptAesCBC(e,t,r){const n=s.createCipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);const a=new Uint8Array(o).buffer;return a}static async decryptAesCBC(e,t,r){const n=s.createDecipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);return new Uint8Array(o).buffer}static async encryptAesCTR(e,t,r){const n=s.createCipheriv(`aes-${t.algorithm.length}-ctr`,t.data,i.Buffer.from(e.counter));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);const a=new Uint8Array(o).buffer;return a}static async decryptAesCTR(e,t,r){const n=s.createDecipheriv(`aes-${t.algorithm.length}-ctr`,t.data,new Uint8Array(e.counter));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);return new Uint8Array(o).buffer}static async encryptAesGCM(e,t,r){const n=s.createCipheriv(`aes-${t.algorithm.length}-gcm`,t.data,i.Buffer.from(e.iv),{authTagLength:(e.tagLength||128)>>3});if(e.additionalData){n.setAAD(i.Buffer.from(e.additionalData))}let o=n.update(r);o=i.Buffer.concat([o,n.final(),n.getAuthTag()]);const a=new Uint8Array(o).buffer;return a}static async decryptAesGCM(e,t,r){const n=(e.tagLength||128)>>3;const o=s.createDecipheriv(`aes-${t.algorithm.length}-gcm`,t.data,new Uint8Array(e.iv),{authTagLength:n});const a=r.slice(0,r.length-n);const c=r.slice(r.length-n);if(e.additionalData){o.setAAD(i.Buffer.from(e.additionalData))}o.setAuthTag(c);let u=o.update(a);u=i.Buffer.concat([u,o.final()]);return new Uint8Array(u).buffer}static async encryptAesKW(e,t,r){const n=s.createCipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV);let o=n.update(r);o=i.Buffer.concat([o,n.final()]);return new Uint8Array(o).buffer}static async decryptAesKW(e,t,r){const n=s.createDecipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV);let o=n.update(r);o=i.Buffer.concat([o,n.final()]);return new Uint8Array(o).buffer}static async encryptAesECB(e,t,r){const n=s.createCipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);const a=new Uint8Array(o).buffer;return a}static async decryptAesECB(e,t,r){const n=s.createDecipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);return new Uint8Array(o).buffer}}AesCrypto.AES_KW_IV=i.Buffer.from("A6A6A6A6A6A6A6A6","hex");const g=new WeakMap;function getCryptoKey(e){const t=g.get(e);if(!t){throw new p.OperationError("Cannot get CryptoKey from secure storage")}return t}function setCryptoKey(e){const t=p.CryptoKey.create(e.algorithm,e.type,e.extractable,e.usages);Object.freeze(t);g.set(t,e);return t}class AesCbcProvider extends p.AesCbcProvider{async onGenerateKey(e,t,r){const n=await AesCrypto.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return AesCrypto.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return AesCrypto.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return AesCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await AesCrypto.importKey(e,t,{name:r.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof AesCryptoKey)){throw new TypeError("key: Is not a AesCryptoKey")}}}const b=i.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);const v=i.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]);const w=16;function bitShiftLeft(e){const t=i.Buffer.alloc(e.length);const r=e.length-1;for(let n=0;n<r;n++){t[n]=e[n]<<1;if(e[n+1]&128){t[n]+=1}}t[r]=e[r]<<1;return t}function xor(e,t){const r=Math.min(e.length,t.length);const n=i.Buffer.alloc(r);for(let i=0;i<r;i++){n[i]=e[i]^t[i]}return n}function aes(e,t){const r=s.createCipheriv(`aes${e.length<<3}`,e,b);const n=r.update(t);r.final();return n}function getMessageBlock(e,t){const r=i.Buffer.alloc(w);const n=t*w;const s=n+w;e.copy(r,0,n,s);return r}function getPaddedMessageBlock(e,t){const r=i.Buffer.alloc(w);const n=t*w;const s=e.length;r.fill(0);e.copy(r,0,n,s);r[s-n]=128;return r}function generateSubkeys(e){const t=aes(e,b);let r=bitShiftLeft(t);if(t[0]&128){r=xor(r,v)}let n=bitShiftLeft(r);if(r[0]&128){n=xor(n,v)}return{subkey1:r,subkey2:n}}function aesCmac(e,t){const r=generateSubkeys(e);let n=Math.ceil(t.length/w);let i;let s;if(n===0){n=1;i=false}else{i=t.length%w===0}const o=n-1;if(i){s=xor(getMessageBlock(t,o),r.subkey1)}else{s=xor(getPaddedMessageBlock(t,o),r.subkey2)}let a=b;let c;for(let r=0;r<o;r++){c=xor(a,getMessageBlock(t,r));a=aes(e,c)}c=xor(s,a);return aes(e,c)}class AesCmacProvider extends p.AesCmacProvider{async onGenerateKey(e,t,r){const n=await AesCrypto.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onSign(e,t,r){const n=aesCmac(getCryptoKey(t).data,i.Buffer.from(r));return new Uint8Array(n).buffer}async onVerify(e,t,r,n){const s=await this.sign(e,t,n);return i.Buffer.from(r).compare(i.Buffer.from(s))===0}async onExportKey(e,t){return AesCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await AesCrypto.importKey(e,t,{name:r.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof AesCryptoKey)){throw new TypeError("key: Is not a AesCryptoKey")}}}class AesCtrProvider extends p.AesCtrProvider{async onGenerateKey(e,t,r){const n=await AesCrypto.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return AesCrypto.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return AesCrypto.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return AesCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await AesCrypto.importKey(e,t,{name:r.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof AesCryptoKey)){throw new TypeError("key: Is not a AesCryptoKey")}}}class AesGcmProvider extends p.AesGcmProvider{async onGenerateKey(e,t,r){const n=await AesCrypto.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return AesCrypto.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return AesCrypto.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return AesCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await AesCrypto.importKey(e,t,{name:r.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof AesCryptoKey)){throw new TypeError("key: Is not a AesCryptoKey")}}}class AesKwProvider extends p.AesKwProvider{async onGenerateKey(e,t,r){const n=await AesCrypto.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onExportKey(e,t){return AesCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await AesCrypto.importKey(e,t,{name:r.name},n,i);return setCryptoKey(s)}async onEncrypt(e,t,r){return AesCrypto.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return AesCrypto.decrypt(e,getCryptoKey(t),new Uint8Array(r))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof AesCryptoKey)){throw new TypeError("key: Is not a AesCryptoKey")}}}class AesEcbProvider extends p.AesEcbProvider{async onGenerateKey(e,t,r){const n=await AesCrypto.generateKey({name:this.name,length:e.length},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return AesCrypto.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return AesCrypto.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return AesCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await AesCrypto.importKey(e,t,{name:r.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof AesCryptoKey)){throw new TypeError("key: Is not a AesCryptoKey")}}}class DesCryptoKey extends SymmetricKey{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return`DES-CBC`;case"DES-EDE3-CBC":return`3DES-CBC`;default:throw new p.AlgorithmError("Unsupported algorithm name")}}set alg(e){}}a.__decorate([c.JsonProp({name:"k",converter:y})],DesCryptoKey.prototype,"data",void 0);class DesCrypto{static async generateKey(e,t,r){const n=new DesCryptoKey;n.algorithm=e;n.extractable=t;n.usages=r;n.data=s.randomBytes(e.length>>3);return n}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return c.JsonSerializer.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new p.OperationError("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,n,s){let o;switch(e.toLowerCase()){case"jwk":o=c.JsonParser.fromJSON(t,{targetSchema:DesCryptoKey});break;case"raw":o=new DesCryptoKey;o.data=i.Buffer.from(t);break;default:throw new p.OperationError("format: Must be 'jwk' or 'raw'")}o.algorithm=r;o.extractable=n;o.usages=s;return o}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(e,t,i.Buffer.from(r));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(e,t,i.Buffer.from(r));default:throw new p.OperationError("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof DesCryptoKey)){throw new Error("key: Is not DesCryptoKey")}switch(e.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(e,t,i.Buffer.from(r));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(e,t,i.Buffer.from(r));default:throw new p.OperationError("algorithm: Is not recognized")}}static async encryptDesCBC(e,t,r){const n=s.createCipheriv(`des-cbc`,t.data,new Uint8Array(e.iv));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);const a=new Uint8Array(o).buffer;return a}static async decryptDesCBC(e,t,r){const n=s.createDecipheriv(`des-cbc`,t.data,new Uint8Array(e.iv));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);return new Uint8Array(o).buffer}static async encryptDesEDE3CBC(e,t,r){const n=s.createCipheriv(`des-ede3-cbc`,t.data,i.Buffer.from(e.iv));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);const a=new Uint8Array(o).buffer;return a}static async decryptDesEDE3CBC(e,t,r){const n=s.createDecipheriv(`des-ede3-cbc`,t.data,new Uint8Array(e.iv));let o=n.update(r);o=i.Buffer.concat([o,n.final()]);return new Uint8Array(o).buffer}}class DesCbcProvider extends p.DesProvider{constructor(){super(...arguments);this.keySizeBits=64;this.ivSize=8;this.name="DES-CBC"}async onGenerateKey(e,t,r){const n=await DesCrypto.generateKey({name:this.name,length:this.keySizeBits},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return DesCrypto.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return DesCrypto.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return DesCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await DesCrypto.importKey(e,t,{name:this.name,length:this.keySizeBits},n,i);if(s.data.length!==this.keySizeBits>>3){throw new p.OperationError("keyData: Wrong key size")}return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof DesCryptoKey)){throw new TypeError("key: Is not a DesCryptoKey")}}}class DesEde3CbcProvider extends p.DesProvider{constructor(){super(...arguments);this.keySizeBits=192;this.ivSize=8;this.name="DES-EDE3-CBC"}async onGenerateKey(e,t,r){const n=await DesCrypto.generateKey({name:this.name,length:this.keySizeBits},t,r);return setCryptoKey(n)}async onEncrypt(e,t,r){return DesCrypto.encrypt(e,getCryptoKey(t),new Uint8Array(r))}async onDecrypt(e,t,r){return DesCrypto.decrypt(e,getCryptoKey(t),new Uint8Array(r))}async onExportKey(e,t){return DesCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await DesCrypto.importKey(e,t,{name:this.name,length:this.keySizeBits},n,i);if(s.data.length!==this.keySizeBits>>3){throw new p.OperationError("keyData: Wrong key size")}return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof DesCryptoKey)){throw new TypeError("key: Is not a DesCryptoKey")}}}function getJwkAlgorithm(e){switch(e.name.toUpperCase()){case"RSA-OAEP":{const t=/(\d+)$/.exec(e.hash.name)[1];return`RSA-OAEP${t!=="1"?`-${t}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PKCS1":return`RS1`;default:throw new p.OperationError("algorithm: Is not recognized")}}class RsaPrivateKey extends AsymmetricKey{constructor(){super(...arguments);this.type="private"}getKey(){const e=d.AsnParser.parse(this.data,p.asn1.PrivateKeyInfo);return d.AsnParser.parse(e.privateKey,p.asn1.RsaPrivateKey)}toJSON(){const e=this.getKey();const t={kty:"RSA",alg:getJwkAlgorithm(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(t,c.JsonSerializer.toJSON(e))}fromJSON(e){const t=c.JsonParser.fromJSON(e,{targetSchema:p.asn1.RsaPrivateKey});const r=new p.asn1.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";r.privateKeyAlgorithm.parameters=null;r.privateKey=d.AsnSerializer.serialize(t);this.data=i.Buffer.from(d.AsnSerializer.serialize(r))}}class RsaPublicKey extends AsymmetricKey{constructor(){super(...arguments);this.type="public"}getKey(){const e=d.AsnParser.parse(this.data,p.asn1.PublicKeyInfo);return d.AsnParser.parse(e.publicKey,p.asn1.RsaPublicKey)}toJSON(){const e=this.getKey();const t={kty:"RSA",alg:getJwkAlgorithm(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(t,c.JsonSerializer.toJSON(e))}fromJSON(e){const t=c.JsonParser.fromJSON(e,{targetSchema:p.asn1.RsaPublicKey});const r=new p.asn1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";r.publicKeyAlgorithm.parameters=null;r.publicKey=d.AsnSerializer.serialize(t);this.data=i.Buffer.from(d.AsnSerializer.serialize(r))}}class RsaCrypto{static async generateKey(e,t,r){const n=new RsaPrivateKey;n.algorithm=e;n.extractable=t;n.usages=r.filter((e=>this.privateKeyUsages.indexOf(e)!==-1));const o=new RsaPublicKey;o.algorithm=e;o.extractable=true;o.usages=r.filter((e=>this.publicKeyUsages.indexOf(e)!==-1));const a=i.Buffer.concat([i.Buffer.alloc(4-e.publicExponent.byteLength,0),i.Buffer.from(e.publicExponent)]).readInt32BE(0);const c=s.generateKeyPairSync("rsa",{modulusLength:e.modulusLength,publicExponent:a,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});n.data=c.privateKey;o.data=c.publicKey;const u={privateKey:n,publicKey:o};return u}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return c.JsonSerializer.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;default:throw new p.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(e,t,r,n,i){switch(e.toLowerCase()){case"jwk":{const e=t;if(e.d){const e=c.JsonParser.fromJSON(t,{targetSchema:p.asn1.RsaPrivateKey});return this.importPrivateKey(e,r,n,i)}else{const e=c.JsonParser.fromJSON(t,{targetSchema:p.asn1.RsaPublicKey});return this.importPublicKey(e,r,n,i)}}case"spki":{const e=d.AsnParser.parse(new Uint8Array(t),p.asn1.PublicKeyInfo);const s=d.AsnParser.parse(e.publicKey,p.asn1.RsaPublicKey);return this.importPublicKey(s,r,n,i)}case"pkcs8":{const e=d.AsnParser.parse(new Uint8Array(t),p.asn1.PrivateKeyInfo);const s=d.AsnParser.parse(e.privateKey,p.asn1.RsaPrivateKey);return this.importPrivateKey(s,r,n,i)}default:throw new p.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(e,t,r){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(e,t,r);default:throw new p.OperationError("algorithm: Is not recognized")}}static async verify(e,t,r,n){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(e,t,n,r);default:throw new p.OperationError("algorithm: Is not recognized")}}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"RSA-OAEP":return this.encryptOAEP(e,t,r);default:throw new p.OperationError("algorithm: Is not recognized")}}static async decrypt(e,t,r){switch(e.name.toUpperCase()){case"RSA-OAEP":return this.decryptOAEP(e,t,r);default:throw new p.OperationError("algorithm: Is not recognized")}}static importPrivateKey(e,t,r,n){const s=new p.asn1.PrivateKeyInfo;s.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";s.privateKeyAlgorithm.parameters=null;s.privateKey=d.AsnSerializer.serialize(e);const o=new RsaPrivateKey;o.data=i.Buffer.from(d.AsnSerializer.serialize(s));o.algorithm=Object.assign({},t);o.algorithm.publicExponent=new Uint8Array(e.publicExponent);o.algorithm.modulusLength=e.modulus.byteLength<<3;o.extractable=r;o.usages=n;return o}static importPublicKey(e,t,r,n){const s=new p.asn1.PublicKeyInfo;s.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";s.publicKeyAlgorithm.parameters=null;s.publicKey=d.AsnSerializer.serialize(e);const o=new RsaPublicKey;o.data=i.Buffer.from(d.AsnSerializer.serialize(s));o.algorithm=Object.assign({},t);o.algorithm.publicExponent=new Uint8Array(e.publicExponent);o.algorithm.modulusLength=e.modulus.byteLength<<3;o.extractable=r;o.usages=n;return o}static getCryptoAlgorithm(e){switch(e.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new p.OperationError("algorithm.hash: Is not recognized")}}static signRsa(e,t,r){const n=this.getCryptoAlgorithm(t.algorithm);const o=s.createSign(n);o.update(i.Buffer.from(r));if(!t.pem){t.pem=`-----BEGIN PRIVATE KEY-----\n${t.data.toString("base64")}\n-----END PRIVATE KEY-----`}const a={key:t.pem};if(e.name.toUpperCase()==="RSA-PSS"){a.padding=s.constants.RSA_PKCS1_PSS_PADDING;a.saltLength=e.saltLength}const c=o.sign(a);return new Uint8Array(c).buffer}static verifySSA(e,t,r,n){const o=this.getCryptoAlgorithm(t.algorithm);const a=s.createVerify(o);a.update(i.Buffer.from(r));if(!t.pem){t.pem=`-----BEGIN PUBLIC KEY-----\n${t.data.toString("base64")}\n-----END PUBLIC KEY-----`}const c={key:t.pem};if(e.name.toUpperCase()==="RSA-PSS"){c.padding=s.constants.RSA_PKCS1_PSS_PADDING;c.saltLength=e.saltLength}const u=a.verify(c,n);return u}static encryptOAEP(e,t,r){const n={key:`-----BEGIN PUBLIC KEY-----\n${t.data.toString("base64")}\n-----END PUBLIC KEY-----`,padding:s.constants.RSA_PKCS1_OAEP_PADDING};if(e.label);return new Uint8Array(s.publicEncrypt(n,r)).buffer}static decryptOAEP(e,t,r){const n={key:`-----BEGIN PRIVATE KEY-----\n${t.data.toString("base64")}\n-----END PRIVATE KEY-----`,padding:s.constants.RSA_PKCS1_OAEP_PADDING};if(e.label);return new Uint8Array(s.privateDecrypt(n,r)).buffer}}RsaCrypto.publicKeyUsages=["verify","encrypt","wrapKey"];RsaCrypto.privateKeyUsages=["sign","decrypt","unwrapKey"];class RsaSsaProvider extends p.RsaSsaProvider{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){const n=await RsaCrypto.generateKey({...e,name:this.name},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(e,t,r){return RsaCrypto.sign(e,getCryptoKey(t),new Uint8Array(r))}async onVerify(e,t,r,n){return RsaCrypto.verify(e,getCryptoKey(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return RsaCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await RsaCrypto.importKey(e,t,{...r,name:this.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof RsaPrivateKey||r instanceof RsaPublicKey)){throw new TypeError("key: Is not RSA CryptoKey")}}}class RsaPssProvider extends p.RsaPssProvider{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){const n=await RsaCrypto.generateKey({...e,name:this.name},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(e,t,r){return RsaCrypto.sign(e,getCryptoKey(t),new Uint8Array(r))}async onVerify(e,t,r,n){return RsaCrypto.verify(e,getCryptoKey(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return RsaCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await RsaCrypto.importKey(e,t,{...r,name:this.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof RsaPrivateKey||r instanceof RsaPublicKey)){throw new TypeError("key: Is not RSA CryptoKey")}}}class ShaCrypto{static size(e){switch(e.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw new Error("Unrecognized name")}}static getAlgorithmName(e){switch(e.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw new Error("Unrecognized name")}}static digest(e,t){const r=this.getAlgorithmName(e);const n=s.createHash(r).update(i.Buffer.from(t)).digest();return new Uint8Array(n).buffer}}class RsaOaepProvider extends p.RsaOaepProvider{async onGenerateKey(e,t,r){const n=await RsaCrypto.generateKey({...e,name:this.name},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onEncrypt(e,t,r){const n=getCryptoKey(t);const o=new Uint8Array(r);const a=Math.ceil(n.algorithm.modulusLength>>3);const c=ShaCrypto.size(n.algorithm.hash)>>3;const u=o.byteLength;const d=a-u-2*c-2;if(u>a-2*c-2){throw new Error("Data too large")}const m=new Uint8Array(a);const y=m.subarray(1,c+1);const g=m.subarray(c+1);g.set(o,c+d+1);const b=s.createHash(n.algorithm.hash.name.replace("-","")).update(p.BufferSourceConverter.toUint8Array(e.label||new Uint8Array(0))).digest();g.set(b,0);g[c+d]=1;s.randomFillSync(y);const v=this.mgf1(n.algorithm.hash,y,g.length);for(let e=0;e<g.length;e++){g[e]^=v[e]}const w=this.mgf1(n.algorithm.hash,g,y.length);for(let e=0;e<y.length;e++){y[e]^=w[e]}if(!n.pem){n.pem=`-----BEGIN PUBLIC KEY-----\n${n.data.toString("base64")}\n-----END PUBLIC KEY-----`}const _=s.publicEncrypt({key:n.pem,padding:s.constants.RSA_NO_PADDING},i.Buffer.from(m));return new Uint8Array(_).buffer}async onDecrypt(e,t,r){const n=getCryptoKey(t);const o=Math.ceil(n.algorithm.modulusLength>>3);const a=ShaCrypto.size(n.algorithm.hash)>>3;const c=r.byteLength;if(c!==o){throw new Error("Bad data")}if(!n.pem){n.pem=`-----BEGIN PRIVATE KEY-----\n${n.data.toString("base64")}\n-----END PRIVATE KEY-----`}let u=s.privateDecrypt({key:n.pem,padding:s.constants.RSA_NO_PADDING},i.Buffer.from(r));const d=u[0];const m=u.subarray(1,a+1);const y=u.subarray(a+1);if(d!==0){throw new Error("Decryption failed")}const g=this.mgf1(n.algorithm.hash,y,m.length);for(let e=0;e<m.length;e++){m[e]^=g[e]}const b=this.mgf1(n.algorithm.hash,m,y.length);for(let e=0;e<y.length;e++){y[e]^=b[e]}const v=s.createHash(n.algorithm.hash.name.replace("-","")).update(p.BufferSourceConverter.toUint8Array(e.label||new Uint8Array(0))).digest();for(let e=0;e<a;e++){if(v[e]!==y[e]){throw new Error("Decryption failed")}}let w=a;for(;w<y.length;w++){const e=y[w];if(e===1){break}if(e!==0){throw new Error("Decryption failed")}}if(w===y.length){throw new Error("Decryption failed")}u=y.subarray(w+1);return new Uint8Array(u).buffer}async onExportKey(e,t){return RsaCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await RsaCrypto.importKey(e,t,{...r,name:this.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof RsaPrivateKey||r instanceof RsaPublicKey)){throw new TypeError("key: Is not RSA CryptoKey")}}mgf1(e,t,r=0){const n=ShaCrypto.size(e)>>3;const i=new Uint8Array(r);const o=new Uint8Array(4);const a=Math.ceil(r/n);for(let r=0;r<a;r++){o[0]=r>>>24;o[1]=r>>>16&255;o[2]=r>>>8&255;o[3]=r&255;const a=i.subarray(r*n);let c=s.createHash(e.name.replace("-","")).update(t).update(o).digest();if(c.length>a.length){c=c.subarray(0,a.length)}a.set(c)}return i}}class RsaEsProvider extends p.ProviderCrypto{constructor(){super(...arguments);this.name="RSAES-PKCS1-v1_5";this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(e,t,r){const n=await RsaCrypto.generateKey({...e,name:this.name},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=u.Convert.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");switch(e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(e,t,r){const n=this.toCryptoOptions(t);const i=s.publicEncrypt(n,new Uint8Array(r));return new Uint8Array(i).buffer}async onDecrypt(e,t,r){const n=this.toCryptoOptions(t);const i=s.privateDecrypt(n,new Uint8Array(r));return new Uint8Array(i).buffer}async onExportKey(e,t){return RsaCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await RsaCrypto.importKey(e,t,{...r,name:this.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof RsaPrivateKey||r instanceof RsaPublicKey)){throw new TypeError("key: Is not RSA CryptoKey")}}toCryptoOptions(e){const t=e.type.toUpperCase();return{key:`-----BEGIN ${t} KEY-----\n${getCryptoKey(e).data.toString("base64")}\n-----END ${t} KEY-----`,padding:s.constants.RSA_PKCS1_PADDING}}}const _={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function getOidByNamedCurve$1(e){const t=_[e];if(!t){throw new p.OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}class EcPrivateKey extends AsymmetricKey{constructor(){super(...arguments);this.type="private"}getKey(){const e=d.AsnParser.parse(this.data,p.asn1.PrivateKeyInfo);return d.AsnParser.parse(e.privateKey,p.asn1.EcPrivateKey)}toJSON(){const e=this.getKey();const t={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,c.JsonSerializer.toJSON(e))}fromJSON(e){if(!e.crv){throw new p.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}const t=new p.asn1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1";t.privateKeyAlgorithm.parameters=d.AsnSerializer.serialize(new p.asn1.ObjectIdentifier(getOidByNamedCurve$1(e.crv)));const r=c.JsonParser.fromJSON(e,{targetSchema:p.asn1.EcPrivateKey});t.privateKey=d.AsnSerializer.serialize(r);this.data=i.Buffer.from(d.AsnSerializer.serialize(t));return this}}class EcPublicKey extends AsymmetricKey{constructor(){super(...arguments);this.type="public"}getKey(){const e=d.AsnParser.parse(this.data,p.asn1.PublicKeyInfo);return new p.asn1.EcPublicKey(e.publicKey)}toJSON(){const e=this.getKey();const t={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,c.JsonSerializer.toJSON(e))}fromJSON(e){if(!e.crv){throw new p.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}const t=c.JsonParser.fromJSON(e,{targetSchema:p.asn1.EcPublicKey});const r=new p.asn1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";r.publicKeyAlgorithm.parameters=d.AsnSerializer.serialize(new p.asn1.ObjectIdentifier(getOidByNamedCurve$1(e.crv)));r.publicKey=d.AsnSerializer.toASN(t).valueHex;this.data=i.Buffer.from(d.AsnSerializer.serialize(r));return this}}class Sha1Provider extends p.ProviderCrypto{constructor(){super(...arguments);this.name="SHA-1";this.usages=[]}async onDigest(e,t){return ShaCrypto.digest(e,t)}}class Sha256Provider extends p.ProviderCrypto{constructor(){super(...arguments);this.name="SHA-256";this.usages=[]}async onDigest(e,t){return ShaCrypto.digest(e,t)}}class Sha384Provider extends p.ProviderCrypto{constructor(){super(...arguments);this.name="SHA-384";this.usages=[]}async onDigest(e,t){return ShaCrypto.digest(e,t)}}class Sha512Provider extends p.ProviderCrypto{constructor(){super(...arguments);this.name="SHA-512";this.usages=[]}async onDigest(e,t){return ShaCrypto.digest(e,t)}}class Sha3256Provider extends p.ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-256";this.usages=[]}async onDigest(e,t){return ShaCrypto.digest(e,t)}}class Sha3384Provider extends p.ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-384";this.usages=[]}async onDigest(e,t){return ShaCrypto.digest(e,t)}}class Sha3512Provider extends p.ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-512";this.usages=[]}async onDigest(e,t){return ShaCrypto.digest(e,t)}}class EcCrypto{static async generateKey(e,t,r){const n=new EcPrivateKey;n.algorithm=e;n.extractable=t;n.usages=r.filter((e=>this.privateKeyUsages.indexOf(e)!==-1));const i=new EcPublicKey;i.algorithm=e;i.extractable=true;i.usages=r.filter((e=>this.publicKeyUsages.indexOf(e)!==-1));const o=s.generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(e.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});n.data=o.privateKey;i.data=o.publicKey;const a={privateKey:n,publicKey:i};return a}static async sign(e,t,r){const n=ShaCrypto.getAlgorithmName(e.hash);const o=s.createSign(n);o.update(i.Buffer.from(r));if(!t.pem){t.pem=`-----BEGIN PRIVATE KEY-----\n${t.data.toString("base64")}\n-----END PRIVATE KEY-----`}const a={key:t.pem};const c=o.sign(a);const u=d.AsnParser.parse(c,p.asn1.EcDsaSignature);const m=p.EcUtils.encodeSignature(u,p.EcCurves.get(t.algorithm.namedCurve).size);return m.buffer}static async verify(e,t,r,n){const o=ShaCrypto.getAlgorithmName(e.hash);const a=s.createVerify(o);a.update(i.Buffer.from(n));if(!t.pem){t.pem=`-----BEGIN PUBLIC KEY-----\n${t.data.toString("base64")}\n-----END PUBLIC KEY-----`}const c={key:t.pem};const m=new p.asn1.EcDsaSignature;const y=p.EcCurves.get(t.algorithm.namedCurve);const g=p.EcUtils.decodeSignature(r,y.size);m.r=u.BufferSourceConverter.toArrayBuffer(g.r);m.s=u.BufferSourceConverter.toArrayBuffer(g.s);const b=i.Buffer.from(d.AsnSerializer.serialize(m));const v=a.verify(c,b);return v}static async deriveBits(e,t,r){const n=this.getOpenSSLNamedCurve(t.algorithm.namedCurve);const o=s.createECDH(n);const a=d.AsnParser.parse(t.data,p.asn1.PrivateKeyInfo);const c=d.AsnParser.parse(a.privateKey,p.asn1.EcPrivateKey);o.setPrivateKey(i.Buffer.from(c.privateKey));const u=d.AsnParser.parse(e.public.data,p.asn1.PublicKeyInfo);const m=o.computeSecret(i.Buffer.from(u.publicKey));if(r===null){return m}return new Uint8Array(m).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return c.JsonSerializer.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":{const e=d.AsnParser.parse(t.data,p.asn1.PublicKeyInfo);return e.publicKey}default:throw new p.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,n,i){switch(e.toLowerCase()){case"jwk":{const e=t;if(e.d){const e=c.JsonParser.fromJSON(t,{targetSchema:p.asn1.EcPrivateKey});return this.importPrivateKey(e,r,n,i)}else{const e=c.JsonParser.fromJSON(t,{targetSchema:p.asn1.EcPublicKey});return this.importPublicKey(e,r,n,i)}}case"raw":{const e=new p.asn1.EcPublicKey(t);return this.importPublicKey(e,r,n,i)}case"spki":{const e=d.AsnParser.parse(new Uint8Array(t),p.asn1.PublicKeyInfo);const s=new p.asn1.EcPublicKey(e.publicKey);this.assertKeyParameters(e.publicKeyAlgorithm.parameters,r.namedCurve);return this.importPublicKey(s,r,n,i)}case"pkcs8":{const e=d.AsnParser.parse(new Uint8Array(t),p.asn1.PrivateKeyInfo);const s=d.AsnParser.parse(e.privateKey,p.asn1.EcPrivateKey);this.assertKeyParameters(e.privateKeyAlgorithm.parameters,r.namedCurve);return this.importPrivateKey(s,r,n,i)}default:throw new p.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(e,t){if(!e){throw new p.CryptoError("Key info doesn't have required parameters")}let r="";try{r=d.AsnParser.parse(e,p.asn1.ObjectIdentifier).value}catch(e){throw new p.CryptoError("Cannot read key info parameters")}if(getOidByNamedCurve$1(t)!==r){throw new p.CryptoError("Key info parameter doesn't match to named curve")}}static async importPrivateKey(e,t,r,n){const s=new p.asn1.PrivateKeyInfo;s.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1";s.privateKeyAlgorithm.parameters=d.AsnSerializer.serialize(new p.asn1.ObjectIdentifier(getOidByNamedCurve$1(t.namedCurve)));s.privateKey=d.AsnSerializer.serialize(e);const o=new EcPrivateKey;o.data=i.Buffer.from(d.AsnSerializer.serialize(s));o.algorithm=Object.assign({},t);o.extractable=r;o.usages=n;return o}static async importPublicKey(e,t,r,n){const s=new p.asn1.PublicKeyInfo;s.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";const o=getOidByNamedCurve$1(t.namedCurve);s.publicKeyAlgorithm.parameters=d.AsnSerializer.serialize(new p.asn1.ObjectIdentifier(o));s.publicKey=e.value;const a=new EcPublicKey;a.data=i.Buffer.from(d.AsnSerializer.serialize(s));a.algorithm=Object.assign({},t);a.extractable=r;a.usages=n;return a}static getOpenSSLNamedCurve(e){switch(e.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return e}}}EcCrypto.publicKeyUsages=["verify"];EcCrypto.privateKeyUsages=["sign","deriveKey","deriveBits"];class EcdsaProvider extends p.EcdsaProvider{constructor(){super(...arguments);this.namedCurves=p.EcCurves.names;this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){const n=await EcCrypto.generateKey({...e,name:this.name},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(e,t,r){return EcCrypto.sign(e,getCryptoKey(t),new Uint8Array(r))}async onVerify(e,t,r,n){return EcCrypto.verify(e,getCryptoKey(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return EcCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await EcCrypto.importKey(e,t,{...r,name:this.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof EcPrivateKey||r instanceof EcPublicKey)){throw new TypeError("key: Is not EC CryptoKey")}}}class EcdhProvider extends p.EcdhProvider{constructor(){super(...arguments);this.namedCurves=p.EcCurves.names}async onGenerateKey(e,t,r){const n=await EcCrypto.generateKey({...e,name:this.name},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onExportKey(e,t){return EcCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await EcCrypto.importKey(e,t,{...r,name:this.name},n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);const r=getCryptoKey(e);if(!(r instanceof EcPrivateKey||r instanceof EcPublicKey)){throw new TypeError("key: Is not EC CryptoKey")}}async onDeriveBits(e,t,r){const n=await EcCrypto.deriveBits({...e,public:getCryptoKey(e.public)},getCryptoKey(t),r);return n}}const C={[p.asn1.idEd448]:"Ed448",ed448:p.asn1.idEd448,[p.asn1.idX448]:"X448",x448:p.asn1.idX448,[p.asn1.idEd25519]:"Ed25519",ed25519:p.asn1.idEd25519,[p.asn1.idX25519]:"X25519",x25519:p.asn1.idX25519};function getOidByNamedCurve(e){const t=C[e.toLowerCase()];if(!t){throw new p.OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}class EdPrivateKey extends AsymmetricKey{constructor(){super(...arguments);this.type="private"}getKey(){const e=d.AsnParser.parse(this.data,p.asn1.PrivateKeyInfo);return d.AsnParser.parse(e.privateKey,p.asn1.CurvePrivateKey)}toJSON(){const e=this.getKey();const t={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,c.JsonSerializer.toJSON(e))}fromJSON(e){if(!e.crv){throw new p.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}const t=new p.asn1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm=getOidByNamedCurve(e.crv);const r=c.JsonParser.fromJSON(e,{targetSchema:p.asn1.CurvePrivateKey});t.privateKey=d.AsnSerializer.serialize(r);this.data=i.Buffer.from(d.AsnSerializer.serialize(t));return this}}class EdPublicKey extends AsymmetricKey{constructor(){super(...arguments);this.type="public"}getKey(){const e=d.AsnParser.parse(this.data,p.asn1.PublicKeyInfo);return e.publicKey}toJSON(){const e=this.getKey();const t={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,{x:u.Convert.ToBase64Url(e)})}fromJSON(e){if(!e.crv){throw new p.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}if(!e.x){throw new p.OperationError(`Cannot get property from JWK. Property 'x' is required`)}const t=new p.asn1.PublicKeyInfo;t.publicKeyAlgorithm.algorithm=getOidByNamedCurve(e.crv);t.publicKey=u.Convert.FromBase64Url(e.x);this.data=i.Buffer.from(d.AsnSerializer.serialize(t));return this}}class EdCrypto{static async generateKey(e,t,r){const n=new EdPrivateKey;n.algorithm=e;n.extractable=t;n.usages=r.filter((e=>this.privateKeyUsages.indexOf(e)!==-1));const i=new EdPublicKey;i.algorithm=e;i.extractable=true;i.usages=r.filter((e=>this.publicKeyUsages.indexOf(e)!==-1));const o=e.namedCurve.toLowerCase();const a=s.generateKeyPairSync(o,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});n.data=a.privateKey;i.data=a.publicKey;const c={privateKey:n,publicKey:i};return c}static async sign(e,t,r){if(!t.pem){t.pem=`-----BEGIN PRIVATE KEY-----\n${t.data.toString("base64")}\n-----END PRIVATE KEY-----`}const n={key:t.pem};const o=s.sign(null,i.Buffer.from(r),n);return p.BufferSourceConverter.toArrayBuffer(o)}static async verify(e,t,r,n){if(!t.pem){t.pem=`-----BEGIN PUBLIC KEY-----\n${t.data.toString("base64")}\n-----END PUBLIC KEY-----`}const o={key:t.pem};const a=s.verify(null,i.Buffer.from(n),o,i.Buffer.from(r));return a}static async deriveBits(e,t,r){const n=s.createPublicKey({key:e.public.data,format:"der",type:"spki"});const i=s.createPrivateKey({key:t.data,format:"der",type:"pkcs8"});const o=s.diffieHellman({publicKey:n,privateKey:i});return new Uint8Array(o).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return c.JsonSerializer.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":{const e=d.AsnParser.parse(t.data,p.asn1.PublicKeyInfo);return e.publicKey}default:throw new p.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,n,i){switch(e.toLowerCase()){case"jwk":{const e=t;if(e.d){const e=c.JsonParser.fromJSON(t,{targetSchema:p.asn1.CurvePrivateKey});return this.importPrivateKey(e,r,n,i)}else{if(!e.x){throw new TypeError("keyData: Cannot get required 'x' filed")}return this.importPublicKey(u.Convert.FromBase64Url(e.x),r,n,i)}}case"raw":{return this.importPublicKey(t,r,n,i)}case"spki":{const e=d.AsnParser.parse(new Uint8Array(t),p.asn1.PublicKeyInfo);return this.importPublicKey(e.publicKey,r,n,i)}case"pkcs8":{const e=d.AsnParser.parse(new Uint8Array(t),p.asn1.PrivateKeyInfo);const s=d.AsnParser.parse(e.privateKey,p.asn1.CurvePrivateKey);return this.importPrivateKey(s,r,n,i)}default:throw new p.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(e,t,r,n){const i=new EdPrivateKey;i.fromJSON({crv:t.namedCurve,d:u.Convert.ToBase64Url(e.d)});i.algorithm=Object.assign({},t);i.extractable=r;i.usages=n;return i}static async importPublicKey(e,t,r,n){const i=new EdPublicKey;i.fromJSON({crv:t.namedCurve,x:u.Convert.ToBase64Url(e)});i.algorithm=Object.assign({},t);i.extractable=r;i.usages=n;return i}}EdCrypto.publicKeyUsages=["verify"];EdCrypto.privateKeyUsages=["sign","deriveKey","deriveBits"];class EdDsaProvider extends p.EdDsaProvider{async onGenerateKey(e,t,r){const n=await EdCrypto.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(e,t,r){return EdCrypto.sign(e,getCryptoKey(t),new Uint8Array(r))}async onVerify(e,t,r,n){return EdCrypto.verify(e,getCryptoKey(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return EdCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await EdCrypto.importKey(e,t,{...r,name:this.name},n,i);return setCryptoKey(s)}}class EcdhEsProvider extends p.EcdhEsProvider{async onGenerateKey(e,t,r){const n=await EdCrypto.generateKey({name:this.name,namedCurve:e.namedCurve.toUpperCase()},t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onDeriveBits(e,t,r){const n=await EdCrypto.deriveBits({...e,public:getCryptoKey(e.public)},getCryptoKey(t),r);return n}async onExportKey(e,t){return EdCrypto.exportKey(e,getCryptoKey(t))}async onImportKey(e,t,r,n,i){const s=await EdCrypto.importKey(e,t,{...r,name:this.name},n,i);return setCryptoKey(s)}}class Ed25519CryptoKey extends CryptoKey{constructor(e,t,r,n){super();this.algorithm=e;this.extractable=t;this.usages=r;this.data=Buffer.from(n)}toJWK(){return{kty:"OKP",crv:this.algorithm.name,key_ops:this.usages,ext:this.extractable}}}class Ed25519PrivateKey extends Ed25519CryptoKey{constructor(){super(...arguments);this.type="private"}toJWK(){const e=s.createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"});const t=p.PemConverter.toUint8Array(this.data.toString());const r=d.AsnConvert.parse(t,p.asn1.PrivateKeyInfo);const n=d.AsnConvert.parse(r.privateKey,p.asn1.EdPrivateKey).value;return{...super.toJWK(),...e,d:Buffer.from(new Uint8Array(n)).toString("base64url")}}}class Ed25519PublicKey extends Ed25519CryptoKey{constructor(){super(...arguments);this.type="public"}toJWK(){const e=s.createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"});return{...super.toJWK(),...e}}}class Ed25519Crypto{static async generateKey(e,t,r){const n=e.name.toLowerCase();const i=s.generateKeyPairSync(n,{publicKeyEncoding:{format:"pem",type:"spki"},privateKeyEncoding:{format:"pem",type:"pkcs8"}});const o={name:n==="ed25519"?"Ed25519":"X25519"};const a=r.filter((e=>this.privateKeyUsages.includes(e)));const c=r.filter((e=>this.publicKeyUsages.includes(e)));return{privateKey:new Ed25519PrivateKey(o,t,a,i.privateKey),publicKey:new Ed25519PublicKey(o,true,c,i.publicKey)}}static async sign(e,t,r){const n=s.sign(null,Buffer.from(r),t.data);return p.BufferSourceConverter.toArrayBuffer(n)}static async verify(e,t,r,n){return s.verify(null,Buffer.from(n),t.data,r)}static async exportKey(e,t){switch(e){case"jwk":return t.toJWK();case"pkcs8":{return p.PemConverter.toArrayBuffer(t.data.toString())}case"spki":{return p.PemConverter.toArrayBuffer(t.data.toString())}case"raw":{const e=t.toJWK();return u.Convert.FromBase64Url(e.x)}default:return Promise.reject(new p.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}static async importKey(e,t,r,n,i){switch(e){case"jwk":{const e=t;if(e.d){const t=new p.asn1.EdPrivateKey;t.value=p.BufferSourceConverter.toArrayBuffer(Buffer.from(e.d,"base64url"));const s=new p.asn1.PrivateKeyInfo;s.privateKeyAlgorithm.algorithm=r.name.toLowerCase()==="ed25519"?p.asn1.idEd25519:p.asn1.idX25519;s.privateKey=d.AsnConvert.serialize(t);const o=d.AsnConvert.serialize(s);const a=p.PemConverter.fromBufferSource(o,"PRIVATE KEY");return new Ed25519PrivateKey(r,n,i,a)}else if(e.x){const t=s.createPublicKey({format:"jwk",key:e});const o=t.export({format:"pem",type:"spki"});return new Ed25519PublicKey(r,n,i,o)}else{throw new p.OperationError("keyData: Cannot import JWK. 'd' or 'x' must be presented")}}case"pkcs8":{const e=p.PemConverter.fromBufferSource(t,"PRIVATE KEY");return new Ed25519PrivateKey(r,n,i,e)}case"spki":{const e=p.PemConverter.fromBufferSource(t,"PUBLIC KEY");return new Ed25519PublicKey(r,n,i,e)}case"raw":{const e=t;const o=s.createPublicKey({format:"jwk",key:{kty:"OKP",crv:r.name.toLowerCase()==="ed25519"?"Ed25519":"X25519",x:u.Convert.ToBase64Url(e)}});const a=o.export({format:"pem",type:"spki"});return new Ed25519PublicKey(r,n,i,a)}default:return Promise.reject(new p.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}}Ed25519Crypto.privateKeyUsages=["sign","deriveBits","deriveKey"];Ed25519Crypto.publicKeyUsages=["verify"];class Ed25519Provider extends p.Ed25519Provider{async onGenerateKey(e,t,r){const n=await Ed25519Crypto.generateKey(e,t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(e,t,r){const n=getCryptoKey(t);const i=Ed25519Crypto.sign(e,n,new Uint8Array(r));return i}onVerify(e,t,r,n){const i=getCryptoKey(t);return Ed25519Crypto.verify(e,i,new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){const r=getCryptoKey(t);return Ed25519Crypto.exportKey(e,r)}async onImportKey(e,t,r,n,i){const s=await Ed25519Crypto.importKey(e,t,r,n,i);return setCryptoKey(s)}}class X25519Provider extends p.X25519Provider{async onGenerateKey(e,t,r){const n=await Ed25519Crypto.generateKey(e,t,r);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onDeriveBits(e,t,r){const n=getCryptoKey(t);const i=getCryptoKey(e.public);const o=s.createPublicKey({key:i.data.toString(),format:"pem",type:"spki"});const a=s.createPrivateKey({key:n.data.toString(),format:"pem",type:"pkcs8"});const c=s.diffieHellman({publicKey:o,privateKey:a});return new Uint8Array(c).buffer.slice(0,r>>3)}async onExportKey(e,t){const r=getCryptoKey(t);return Ed25519Crypto.exportKey(e,r)}async onImportKey(e,t,r,n,i){const s=await Ed25519Crypto.importKey(e,t,r,n,i);return setCryptoKey(s)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof Ed25519CryptoKey)){throw new TypeError("key: Is not a Ed25519CryptoKey")}}}class PbkdfCryptoKey extends CryptoKey{}class Pbkdf2Provider extends p.Pbkdf2Provider{async onDeriveBits(e,t,r){return new Promise(((n,o)=>{const a=p.BufferSourceConverter.toArrayBuffer(e.salt);const c=e.hash.name.replace("-","");s.pbkdf2(getCryptoKey(t).data,i.Buffer.from(a),e.iterations,r>>3,c,((e,t)=>{if(e){o(e)}else{n(new Uint8Array(t).buffer)}}))}))}async onImportKey(e,t,r,n,s){if(e==="raw"){const e=new PbkdfCryptoKey;e.data=i.Buffer.from(t);e.algorithm={name:this.name};e.extractable=false;e.usages=s;return setCryptoKey(e)}throw new p.OperationError("format: Must be 'raw'")}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof PbkdfCryptoKey)){throw new TypeError("key: Is not PBKDF CryptoKey")}}}class HmacCryptoKey extends CryptoKey{get alg(){const e=this.algorithm.hash.name.toUpperCase();return`HS${e.replace("SHA-","")}`}set alg(e){}}a.__decorate([c.JsonProp({name:"k",converter:y})],HmacCryptoKey.prototype,"data",void 0);class HmacProvider extends p.HmacProvider{async onGenerateKey(e,t,r){const n=(e.length||this.getDefaultLength(e.hash.name))>>3<<3;const i=new HmacCryptoKey;i.algorithm={...e,length:n,name:this.name};i.extractable=t;i.usages=r;i.data=s.randomBytes(n>>3);return setCryptoKey(i)}async onSign(e,t,r){const n=ShaCrypto.getAlgorithmName(t.algorithm.hash);const o=s.createHmac(n,getCryptoKey(t).data).update(i.Buffer.from(r)).digest();return new Uint8Array(o).buffer}async onVerify(e,t,r,n){const o=ShaCrypto.getAlgorithmName(t.algorithm.hash);const a=s.createHmac(o,getCryptoKey(t).data).update(i.Buffer.from(n)).digest();return a.compare(i.Buffer.from(r))===0}async onImportKey(e,t,r,n,s){let o;switch(e.toLowerCase()){case"jwk":o=c.JsonParser.fromJSON(t,{targetSchema:HmacCryptoKey});break;case"raw":o=new HmacCryptoKey;o.data=i.Buffer.from(t);break;default:throw new p.OperationError("format: Must be 'jwk' or 'raw'")}o.algorithm={hash:{name:r.hash.name},name:this.name,length:o.data.length<<3};o.extractable=n;o.usages=s;return setCryptoKey(o)}async onExportKey(e,t){switch(e.toLowerCase()){case"jwk":return c.JsonSerializer.toJSON(getCryptoKey(t));case"raw":return new Uint8Array(getCryptoKey(t).data).buffer;default:throw new p.OperationError("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof HmacCryptoKey)){throw new TypeError("key: Is not HMAC CryptoKey")}}}class HkdfCryptoKey extends CryptoKey{}class HkdfProvider extends p.HkdfProvider{async onImportKey(e,t,r,n,s){if(e.toLowerCase()!=="raw"){throw new p.OperationError("Operation not supported")}const o=new HkdfCryptoKey;o.data=i.Buffer.from(t);o.algorithm={name:this.name};o.extractable=n;o.usages=s;return setCryptoKey(o)}async onDeriveBits(e,t,r){const o=e.hash.name.replace("-","");const a=s.createHash(o).digest().length;const c=r/8;const u=n.BufferSourceConverter.toUint8Array(e.info);const d=s.createHmac(o,n.BufferSourceConverter.toUint8Array(e.salt)).update(n.BufferSourceConverter.toUint8Array(getCryptoKey(t).data)).digest();const p=[i.Buffer.alloc(0)];const m=Math.ceil(c/a)+1;for(let e=1;e<m;++e){p.push(s.createHmac(o,d).update(i.Buffer.concat([p[e-1],u,i.Buffer.from([e])])).digest())}return i.Buffer.concat(p).slice(0,c)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(getCryptoKey(e)instanceof HkdfCryptoKey)){throw new TypeError("key: Is not HKDF CryptoKey")}}}class ShakeCrypto{static digest(e,t){const r=s.createHash(e.name.toLowerCase(),{outputLength:e.length}).update(i.Buffer.from(t)).digest();return new Uint8Array(r).buffer}}class Shake128Provider extends p.Shake128Provider{async onDigest(e,t){return ShakeCrypto.digest(e,t)}}class Shake256Provider extends p.Shake256Provider{async onDigest(e,t){return ShakeCrypto.digest(e,t)}}class SubtleCrypto extends p.SubtleCrypto{constructor(){var e;super();this.providers.set(new AesCbcProvider);this.providers.set(new AesCtrProvider);this.providers.set(new AesGcmProvider);this.providers.set(new AesCmacProvider);this.providers.set(new AesKwProvider);this.providers.set(new AesEcbProvider);const t=s.getCiphers();if(t.includes("des-cbc")){this.providers.set(new DesCbcProvider)}this.providers.set(new DesEde3CbcProvider);this.providers.set(new RsaSsaProvider);this.providers.set(new RsaPssProvider);this.providers.set(new RsaOaepProvider);this.providers.set(new RsaEsProvider);this.providers.set(new EcdsaProvider);this.providers.set(new EcdhProvider);this.providers.set(new Sha1Provider);this.providers.set(new Sha256Provider);this.providers.set(new Sha384Provider);this.providers.set(new Sha512Provider);this.providers.set(new Pbkdf2Provider);this.providers.set(new HmacProvider);this.providers.set(new HkdfProvider);const r=(e=/^v(\d+)/.exec(m.version))===null||e===void 0?void 0:e[1];if(r&&parseInt(r,10)>=12){this.providers.set(new Shake128Provider);this.providers.set(new Shake256Provider)}const n=s.getHashes();if(n.includes("sha3-256")){this.providers.set(new Sha3256Provider)}if(n.includes("sha3-384")){this.providers.set(new Sha3384Provider)}if(n.includes("sha3-512")){this.providers.set(new Sha3512Provider)}if(r&&parseInt(r,10)>=14){this.providers.set(new EdDsaProvider);this.providers.set(new EcdhEsProvider);this.providers.set(new Ed25519Provider);this.providers.set(new X25519Provider)}}}class Crypto extends p.Crypto{constructor(){super(...arguments);this.subtle=new SubtleCrypto}getRandomValues(e){if(!ArrayBuffer.isView(e)){throw new TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'")}const t=i.Buffer.from(e.buffer,e.byteOffset,e.byteLength);s.randomFillSync(t);return e}}Object.defineProperty(t,"CryptoKey",{enumerable:true,get:function(){return n.CryptoKey}});t.Crypto=Crypto},65064:(e,t,r)=>{"use strict";
/*!
 * MIT License
 * 
 * Copyright (c) Peculiar Ventures. All rights reserved.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */r(67873);var n=r(61237);var i=r(20168);var s=r(69185);var o=r(74113);var a=r(94333);var c=r(77420);var u=r(80516);var d=r(22728);var p=r(12156);var m=r(28511);function _interopNamespaceDefault(e){var t=Object.create(null);if(e){Object.keys(e).forEach((function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:true,get:function(){return e[r]}})}}))}t.default=e;return Object.freeze(t)}var y=_interopNamespaceDefault(i);var g=_interopNamespaceDefault(o);var b=_interopNamespaceDefault(a);var v=_interopNamespaceDefault(c);var w=_interopNamespaceDefault(p);const _="crypto.algorithm";class AlgorithmProvider{getAlgorithms(){return d.container.resolveAll(_)}toAsnAlgorithm(e){({...e});for(const t of this.getAlgorithms()){const r=t.toAsnAlgorithm(e);if(r){return r}}if(/^[0-9.]+$/.test(e.name)){const t=new i.AlgorithmIdentifier({algorithm:e.name});if("parameters"in e){const r=e;t.parameters=r.parameters}return t}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const t of this.getAlgorithms()){const r=t.toWebAlgorithm(e);if(r){return r}}const t={name:e.algorithm,parameters:e.parameters};return t}}const C="crypto.algorithmProvider";d.container.registerSingleton(C,AlgorithmProvider);var P;const O="1.3.36.3.3.2.8.1.1";const E=`${O}.1`;const I=`${O}.2`;const k=`${O}.3`;const T=`${O}.4`;const x=`${O}.5`;const R=`${O}.6`;const B=`${O}.7`;const N=`${O}.8`;const j=`${O}.9`;const L=`${O}.10`;const D=`${O}.11`;const U=`${O}.12`;const F=`${O}.13`;const K=`${O}.14`;const V="brainpoolP160r1";const H="brainpoolP160t1";const q="brainpoolP192r1";const W="brainpoolP192t1";const z="brainpoolP224r1";const $="brainpoolP224t1";const G="brainpoolP256r1";const J="brainpoolP256t1";const X="brainpoolP320r1";const Y="brainpoolP320t1";const Q="brainpoolP384r1";const ee="brainpoolP384t1";const te="brainpoolP512r1";const re="brainpoolP512t1";const ne="ECDSA";t.EcAlgorithm=P=class EcAlgorithm{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case ne.toLowerCase():if("hash"in e){const t=typeof e.hash==="string"?e.hash:e.hash.name;switch(t.toLowerCase()){case"sha-1":return b.ecdsaWithSHA1;case"sha-256":return b.ecdsaWithSHA256;case"sha-384":return b.ecdsaWithSHA384;case"sha-512":return b.ecdsaWithSHA512}}else if("namedCurve"in e){let t="";switch(e.namedCurve){case"P-256":t=b.id_secp256r1;break;case"K-256":t=P.SECP256K1;break;case"P-384":t=b.id_secp384r1;break;case"P-521":t=b.id_secp521r1;break;case V:t=E;break;case H:t=I;break;case q:t=k;break;case W:t=T;break;case z:t=x;break;case $:t=R;break;case G:t=B;break;case J:t=N;break;case X:t=j;break;case Y:t=L;break;case Q:t=D;break;case ee:t=U;break;case te:t=F;break;case re:t=K;break}if(t){return new i.AlgorithmIdentifier({algorithm:b.id_ecPublicKey,parameters:n.AsnConvert.serialize(new b.ECParameters({namedCurve:t}))})}}}return null}toWebAlgorithm(e){switch(e.algorithm){case b.id_ecdsaWithSHA1:return{name:ne,hash:{name:"SHA-1"}};case b.id_ecdsaWithSHA256:return{name:ne,hash:{name:"SHA-256"}};case b.id_ecdsaWithSHA384:return{name:ne,hash:{name:"SHA-384"}};case b.id_ecdsaWithSHA512:return{name:ne,hash:{name:"SHA-512"}};case b.id_ecPublicKey:{if(!e.parameters){throw new TypeError("Cannot get required parameters from EC algorithm")}const t=n.AsnConvert.parse(e.parameters,b.ECParameters);switch(t.namedCurve){case b.id_secp256r1:return{name:ne,namedCurve:"P-256"};case P.SECP256K1:return{name:ne,namedCurve:"K-256"};case b.id_secp384r1:return{name:ne,namedCurve:"P-384"};case b.id_secp521r1:return{name:ne,namedCurve:"P-521"};case E:return{name:ne,namedCurve:V};case I:return{name:ne,namedCurve:H};case k:return{name:ne,namedCurve:q};case T:return{name:ne,namedCurve:W};case x:return{name:ne,namedCurve:z};case R:return{name:ne,namedCurve:$};case B:return{name:ne,namedCurve:G};case N:return{name:ne,namedCurve:J};case j:return{name:ne,namedCurve:X};case L:return{name:ne,namedCurve:Y};case D:return{name:ne,namedCurve:Q};case U:return{name:ne,namedCurve:ee};case F:return{name:ne,namedCurve:te};case K:return{name:ne,namedCurve:re}}}}return null}};t.EcAlgorithm.SECP256K1="1.3.132.0.10";t.EcAlgorithm=P=u.__decorate([d.injectable()],t.EcAlgorithm);d.container.registerSingleton(_,t.EcAlgorithm);const ie=Symbol("name");const se=Symbol("value");class TextObject{constructor(e,t={},r=""){this[ie]=e;this[se]=r;for(const e in t){this[e]=t[e]}}}TextObject.NAME=ie;TextObject.VALUE=se;class DefaultAlgorithmSerializer{static toTextObject(e){const r=new TextObject("Algorithm Identifier",{},OidSerializer.toString(e.algorithm));if(e.parameters){switch(e.algorithm){case b.id_ecPublicKey:{const n=(new t.EcAlgorithm).toWebAlgorithm(e);if(n&&"namedCurve"in n){r["Named Curve"]=n.namedCurve}else{r["Parameters"]=e.parameters}break}default:r["Parameters"]=e.parameters}}return r}}class OidSerializer{static toString(e){const t=this.items[e];if(t){return t}return e}}OidSerializer.items={[v.id_sha1]:"sha1",[v.id_sha224]:"sha224",[v.id_sha256]:"sha256",[v.id_sha384]:"sha384",[v.id_sha512]:"sha512",[v.id_rsaEncryption]:"rsaEncryption",[v.id_sha1WithRSAEncryption]:"sha1WithRSAEncryption",[v.id_sha224WithRSAEncryption]:"sha224WithRSAEncryption",[v.id_sha256WithRSAEncryption]:"sha256WithRSAEncryption",[v.id_sha384WithRSAEncryption]:"sha384WithRSAEncryption",[v.id_sha512WithRSAEncryption]:"sha512WithRSAEncryption",[b.id_ecPublicKey]:"ecPublicKey",[b.id_ecdsaWithSHA1]:"ecdsaWithSHA1",[b.id_ecdsaWithSHA224]:"ecdsaWithSHA224",[b.id_ecdsaWithSHA256]:"ecdsaWithSHA256",[b.id_ecdsaWithSHA384]:"ecdsaWithSHA384",[b.id_ecdsaWithSHA512]:"ecdsaWithSHA512",[y.id_kp_serverAuth]:"TLS WWW server authentication",[y.id_kp_clientAuth]:"TLS WWW client authentication",[y.id_kp_codeSigning]:"Code Signing",[y.id_kp_emailProtection]:"E-mail Protection",[y.id_kp_timeStamping]:"Time Stamping",[y.id_kp_OCSPSigning]:"OCSP Signing",[g.id_signedData]:"Signed Data"};class TextConverter{static serialize(e){return this.serializeObj(e).join("\n")}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,t=0){const r=[];let n=this.pad(t++);let i="";const o=e[TextObject.VALUE];if(o){i=` ${o}`}r.push(`${n}${e[TextObject.NAME]}:${i}`);n=this.pad(t);for(const i in e){if(typeof i==="symbol"){continue}const o=e[i];const a=i?`${i}: `:"";if(typeof o==="string"||typeof o==="number"||typeof o==="boolean"){r.push(`${n}${a}${o}`)}else if(o instanceof Date){r.push(`${n}${a}${o.toUTCString()}`)}else if(Array.isArray(o)){for(const e of o){e[TextObject.NAME]=i;r.push(...this.serializeObj(e,t))}}else if(o instanceof TextObject){o[TextObject.NAME]=i;r.push(...this.serializeObj(o,t))}else if(s.BufferSourceConverter.isBufferSource(o)){if(i){r.push(`${n}${a}`);r.push(...this.serializeBufferSource(o,t+1))}else{r.push(...this.serializeBufferSource(o,t))}}else if("toTextObject"in o){const e=o.toTextObject();e[TextObject.NAME]=i;r.push(...this.serializeObj(e,t))}else{throw new TypeError("Cannot serialize data in text format. Unsupported type.")}}return r}static serializeBufferSource(e,t=0){const r=this.pad(t);const n=s.BufferSourceConverter.toUint8Array(e);const i=[];for(let e=0;e<n.length;){const t=[];for(let r=0;r<16&&e<n.length;r++){if(r===8){t.push("")}const i=n[e++].toString(16).padStart(2,"0");t.push(i)}i.push(`${r}${t.join(" ")}`)}return i}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}TextConverter.oidSerializer=OidSerializer;TextConverter.algorithmSerializer=DefaultAlgorithmSerializer;class AsnData{constructor(...e){if(e.length===1){const t=e[0];this.rawData=n.AsnConvert.serialize(t);this.onInit(t)}else{const t=n.AsnConvert.parse(e[0],e[1]);this.rawData=s.BufferSourceConverter.toArrayBuffer(e[0]);this.onInit(t)}}equal(e){if(e instanceof AsnData){return s.isEqual(e.rawData,this.rawData)}return false}toString(e="text"){switch(e){case"asn":return n.AsnConvert.toString(this.rawData);case"text":return TextConverter.serialize(this.toTextObject());case"hex":return s.Convert.ToHex(this.rawData);case"base64":return s.Convert.ToBase64(this.rawData);case"base64url":return s.Convert.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){const e=this.constructor;return e.NAME}toTextObject(){const e=this.toTextObjectEmpty();e[""]=this.rawData;return e}toTextObjectEmpty(e){return new TextObject(this.getTextName(),{},e)}}AsnData.NAME="ASN";class Extension extends AsnData{constructor(...e){let t;if(s.BufferSourceConverter.isBufferSource(e[0])){t=s.BufferSourceConverter.toArrayBuffer(e[0])}else{t=n.AsnConvert.serialize(new i.Extension({extnID:e[0],critical:e[1],extnValue:new n.OctetString(s.BufferSourceConverter.toArrayBuffer(e[2]))}))}super(t,i.Extension)}onInit(e){this.type=e.extnID;this.critical=e.critical;this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();e[""]=this.value;return e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":undefined);if(e[TextObject.NAME]===Extension.NAME){e[TextObject.NAME]=OidSerializer.toString(this.type)}return e}}var oe;class CryptoProvider{static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==undefined}constructor(){this.items=new Map;this[oe]="CryptoProvider";if(typeof self!=="undefined"&&typeof crypto!=="undefined"){this.set(CryptoProvider.DEFAULT,crypto)}else if(typeof global!=="undefined"&&global.crypto&&global.crypto.subtle){this.set(CryptoProvider.DEFAULT,global.crypto)}}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,t){return this.items.forEach(e,t)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=CryptoProvider.DEFAULT){const t=this.items.get(e.toLowerCase());if(!t){throw new Error(`Cannot get Crypto by name '${e}'`)}return t}set(e,t){if(typeof e==="string"){if(!t){throw new TypeError("Argument 'value' is required")}this.items.set(e.toLowerCase(),t)}else{this.items.set(CryptoProvider.DEFAULT,e)}return this}}oe=Symbol.toStringTag;CryptoProvider.DEFAULT="default";const ae=new CryptoProvider;const ce=/^[0-2](?:\.[1-9][0-9]*)+$/;function isOID(e){return new RegExp(ce).test(e)}class NameIdentifier{constructor(e={}){this.items={};for(const t in e){this.register(t,e[t])}}get(e){return this.items[e]||null}findId(e){if(!isOID(e)){return this.get(e)}return e}register(e,t){this.items[e]=t;this.items[t]=e}}const ue=new NameIdentifier;ue.register("CN","2.5.4.3");ue.register("L","2.5.4.7");ue.register("ST","2.5.4.8");ue.register("O","2.5.4.10");ue.register("OU","2.5.4.11");ue.register("C","2.5.4.6");ue.register("DC","0.9.2342.19200300.100.1.25");ue.register("E","1.2.840.113549.1.9.1");ue.register("G","2.5.4.42");ue.register("I","2.5.4.43");ue.register("SN","2.5.4.4");ue.register("T","2.5.4.12");function replaceUnknownCharacter(e,t){return`\\${s.Convert.ToHex(s.Convert.FromUtf8String(t)).toUpperCase()}`}function escape(e){return e.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,replaceUnknownCharacter)}class Name{static isASCII(e){for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r>255){return false}}return true}static isPrintableString(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/g.test(e)}constructor(e,t={}){this.extraNames=new NameIdentifier;this.asn=new i.Name;for(const e in t){if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e];this.extraNames.register(e,r)}}if(typeof e==="string"){this.asn=this.fromString(e)}else if(e instanceof i.Name){this.asn=e}else if(s.BufferSourceConverter.isBufferSource(e)){this.asn=n.AsnConvert.parse(e,i.Name)}else{this.asn=this.fromJSON(e)}}getField(e){const t=this.extraNames.findId(e)||ue.findId(e);const r=[];for(const e of this.asn){for(const n of e){if(n.type===t){r.push(n.value.toString())}}}return r}getName(e){return this.extraNames.get(e)||ue.get(e)}toString(){return this.asn.map((e=>e.map((e=>{const t=this.getName(e.type)||e.type;const r=e.value.anyValue?`#${s.Convert.ToHex(e.value.anyValue)}`:escape(e.value.toString());return`${t}=${r}`})).join("+"))).join(", ")}toJSON(){var e;const t=[];for(const r of this.asn){const n={};for(const t of r){const r=this.getName(t.type)||t.type;(e=n[r])!==null&&e!==void 0?e:n[r]=[];n[r].push(t.value.anyValue?`#${s.Convert.ToHex(t.value.anyValue)}`:t.value.toString())}t.push(n)}return t}fromString(e){const t=new i.Name;const r=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let n=null;let o=",";while(n=r.exec(`${e},`)){let[,e,r]=n;const a=r[r.length-1];if(a===","||a==="+"){r=r.slice(0,r.length-1);n[3]=a}const c=n[3];if(!/[\d.]+/.test(e)){e=this.getName(e)||""}if(!e){throw new Error(`Cannot get OID for name type '${e}'`)}const u=new i.AttributeTypeAndValue({type:e});if(r.charAt(0)==="#"){u.value.anyValue=s.Convert.FromHex(r.slice(1))}else{const t=/"(.*?[^\\])?"/.exec(r);if(t){r=t[1]}r=r.replace(/\\0a/gi,"\n").replace(/\\0d/gi,"\r").replace(/\\0g/gi,"\t").replace(/\\(.)/g,"$1");if(e===this.getName("E")||e===this.getName("DC")){u.value.ia5String=r}else{if(Name.isPrintableString(r)){u.value.printableString=r}else{u.value.utf8String=r}}}if(o==="+"){t[t.length-1].push(u)}else{t.push(new i.RelativeDistinguishedName([u]))}o=c}return t}fromJSON(e){const t=new i.Name;for(const r of e){const e=new i.RelativeDistinguishedName;for(const t in r){let n=t;if(!/[\d.]+/.test(t)){n=this.getName(t)||""}if(!n){throw new Error(`Cannot get OID for name type '${t}'`)}const o=r[t];for(const t of o){const r=new i.AttributeTypeAndValue({type:n});if(typeof t==="object"){for(const e in t){switch(e){case"ia5String":r.value.ia5String=t[e];break;case"utf8String":r.value.utf8String=t[e];break;case"universalString":r.value.universalString=t[e];break;case"bmpString":r.value.bmpString=t[e];break;case"printableString":r.value.printableString=t[e];break}}}else if(t[0]==="#"){r.value.anyValue=s.Convert.FromHex(t.slice(1))}else{if(n===this.getName("E")||n===this.getName("DC")){r.value.ia5String=t}else{r.value.printableString=t}}e.push(r)}}t.push(e)}return t}toArrayBuffer(){return n.AsnConvert.serialize(this.asn)}async getThumbprint(...e){var t;let r;let n="SHA-1";if(e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)){n=e[0]||n;r=e[1]||ae.get()}else{r=e[0]||ae.get()}return await r.subtle.digest(n,this.toArrayBuffer())}}const le="Cannot initialize GeneralName from ASN.1 data.";const fe=`${le} Unsupported string format in use.`;const de=`${le} Value doesn't match to GUID regular expression.`;const pe=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i;const he="1.3.6.1.4.1.311.25.1";const me="1.3.6.1.4.1.311.20.2.3";const ye="dns";const ge="dn";const be="email";const ve="ip";const Se="url";const we="guid";const _e="upn";const Ce="id";class GeneralName extends AsnData{constructor(...e){let t;if(e.length===2){switch(e[0]){case ge:{const r=new Name(e[1]).toArrayBuffer();const i=n.AsnConvert.parse(r,y.Name);t=new y.GeneralName({directoryName:i});break}case ye:t=new y.GeneralName({dNSName:e[1]});break;case be:t=new y.GeneralName({rfc822Name:e[1]});break;case we:{const r=new RegExp(pe,"i").exec(e[1]);if(!r){throw new Error("Cannot parse GUID value. Value doesn't match to regular expression")}const i=r.slice(1).map(((e,t)=>{if(t<3){return s.Convert.ToHex(new Uint8Array(s.Convert.FromHex(e)).reverse())}return e})).join("");t=new y.GeneralName({otherName:new y.OtherName({typeId:he,value:n.AsnConvert.serialize(new n.OctetString(s.Convert.FromHex(i)))})});break}case ve:t=new y.GeneralName({iPAddress:e[1]});break;case Ce:t=new y.GeneralName({registeredID:e[1]});break;case _e:{t=new y.GeneralName({otherName:new y.OtherName({typeId:me,value:n.AsnConvert.serialize(n.AsnUtf8StringConverter.toASN(e[1]))})});break}case Se:t=new y.GeneralName({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}}else if(s.BufferSourceConverter.isBufferSource(e[0])){t=n.AsnConvert.parse(e[0],y.GeneralName)}else{t=e[0]}super(t)}onInit(e){if(e.dNSName!=undefined){this.type=ye;this.value=e.dNSName}else if(e.rfc822Name!=undefined){this.type=be;this.value=e.rfc822Name}else if(e.iPAddress!=undefined){this.type=ve;this.value=e.iPAddress}else if(e.uniformResourceIdentifier!=undefined){this.type=Se;this.value=e.uniformResourceIdentifier}else if(e.registeredID!=undefined){this.type=Ce;this.value=e.registeredID}else if(e.directoryName!=undefined){this.type=ge;this.value=new Name(e.directoryName).toString()}else if(e.otherName!=undefined){if(e.otherName.typeId===he){this.type=we;const t=n.AsnConvert.parse(e.otherName.value,n.OctetString);const r=new RegExp(pe,"i").exec(s.Convert.ToHex(t));if(!r){throw new Error(de)}this.value=r.slice(1).map(((e,t)=>{if(t<3){return s.Convert.ToHex(new Uint8Array(s.Convert.FromHex(e)).reverse())}return e})).join("-")}else if(e.otherName.typeId===me){this.type=_e;this.value=n.AsnConvert.parse(e.otherName.value,y.DirectoryString).toString()}else{throw new Error(fe)}}else{throw new Error(fe)}}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case ge:case ye:case we:case ve:case Ce:case _e:case Se:e=this.type.toUpperCase();break;case be:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let t=this.value;if(this.type===Ce){t=OidSerializer.toString(t)}return new TextObject(e,undefined,t)}}class GeneralNames extends AsnData{constructor(e){let t;if(e instanceof y.GeneralNames){t=e}else if(Array.isArray(e)){const r=[];for(const t of e){if(t instanceof y.GeneralName){r.push(t)}else{const e=n.AsnConvert.parse(new GeneralName(t.type,t.value).rawData,y.GeneralName);r.push(e)}}t=new y.GeneralNames(r)}else if(s.BufferSourceConverter.isBufferSource(e)){t=n.AsnConvert.parse(e,y.GeneralNames)}else{throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments")}super(t)}onInit(e){const t=[];for(const r of e){let e=null;try{e=new GeneralName(r)}catch{continue}t.push(e)}this.items=t}toJSON(){return this.items.map((e=>e.toJSON()))}toTextObject(){const e=super.toTextObjectEmpty();for(const t of this.items){const r=t.toTextObject();let n=e[r[TextObject.NAME]];if(!Array.isArray(n)){n=[];e[r[TextObject.NAME]]=n}n.push(r)}return e}}GeneralNames.NAME="GeneralNames";const Pe="-{5}";const Oe="\\n";const Ee=`[^${Oe}]+`;const Ae=`${Pe}BEGIN (${Ee}(?=${Pe}))${Pe}`;const Ie=`${Pe}END \\1${Pe}`;const ke="\\n";const Te=`[^:${Oe}]+`;const xe=`(?:[^${Oe}]+${ke}(?: +[^${Oe}]+${ke})*)`;const Re="[a-zA-Z0-9=+/]+";const Be=`(?:${Re}${ke})+`;const Ne=`${Ae}${ke}(?:((?:${Te}: ${xe})+))?${ke}?(${Be})${Ie}`;class PemConverter{static isPem(e){return typeof e==="string"&&new RegExp(Ne,"g").test(e)}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const t=new RegExp(Ne,"g");const r=[];let n=null;while(n=t.exec(e)){const e=n[3].replace(new RegExp(`[${Oe}]+`,"g"),"");const t={type:n[1],headers:[],rawData:s.Convert.FromBase64(e)};const i=n[2];if(i){const e=i.split(new RegExp(ke,"g"));let r=null;for(const n of e){const[e,i]=n.split(/:(.*)/);if(i===undefined){if(!r){throw new Error("Cannot parse PEM string. Incorrect header value")}r.value+=e.trim()}else{if(r){t.headers.push(r)}r={key:e,value:i.trim()}}}if(r){t.headers.push(r)}}r.push(t)}return r}static decode(e){const t=this.decodeWithHeaders(e);return t.map((e=>e.rawData))}static decodeFirst(e){const t=this.decode(e);if(!t.length){throw new RangeError("PEM string doesn't contain any objects")}return t[0]}static encode(e,t){if(Array.isArray(e)){const r=new Array;if(t){e.forEach((e=>{if(!s.BufferSourceConverter.isBufferSource(e)){throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource")}r.push(this.encodeStruct({type:t,rawData:s.BufferSourceConverter.toArrayBuffer(e)}))}))}else{e.forEach((e=>{if(!("type"in e)){throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut")}r.push(this.encodeStruct(e))}))}return r.join("\n")}else{if(!t){throw new Error("Required argument 'tag' is missed")}return this.encodeStruct({type:t,rawData:s.BufferSourceConverter.toArrayBuffer(e)})}}static encodeStruct(e){var t;const r=e.type.toLocaleUpperCase();const n=[];n.push(`-----BEGIN ${r}-----`);if((t=e.headers)===null||t===void 0?void 0:t.length){for(const t of e.headers){n.push(`${t.key}: ${t.value}`)}n.push("")}const i=s.Convert.ToBase64(e.rawData);let o;let a=0;const c=Array();while(a<i.length){if(i.length-a<64){o=i.substring(a)}else{o=i.substring(a,a+64);a+=64}if(o.length!==0){c.push(o);if(o.length<64){break}}else{break}}n.push(...c);n.push(`-----END ${r}-----`);return n.join("\n")}}PemConverter.CertificateTag="CERTIFICATE";PemConverter.CrlTag="CRL";PemConverter.CertificateRequestTag="CERTIFICATE REQUEST";PemConverter.PublicKeyTag="PUBLIC KEY";PemConverter.PrivateKeyTag="PRIVATE KEY";class PemData extends AsnData{static isAsnEncoded(e){return s.BufferSourceConverter.isBufferSource(e)||typeof e==="string"}static toArrayBuffer(e){if(typeof e==="string"){if(PemConverter.isPem(e)){return PemConverter.decode(e)[0]}else if(s.Convert.isHex(e)){return s.Convert.FromHex(e)}else if(s.Convert.isBase64(e)){return s.Convert.FromBase64(e)}else if(s.Convert.isBase64Url(e)){return s.Convert.FromBase64Url(e)}else{throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}}else{const t=s.Convert.ToBinary(e);if(PemConverter.isPem(t)){return PemConverter.decode(t)[0]}else if(s.Convert.isHex(t)){return s.Convert.FromHex(t)}else if(s.Convert.isBase64(t)){return s.Convert.FromBase64(t)}else if(s.Convert.isBase64Url(t)){return s.Convert.FromBase64Url(t)}return s.BufferSourceConverter.toArrayBuffer(e)}}constructor(...e){if(PemData.isAsnEncoded(e[0])){super(PemData.toArrayBuffer(e[0]),e[1])}else{super(e[0])}}toString(e="pem"){switch(e){case"pem":return PemConverter.encode(this.rawData,this.tag);default:return super.toString(e)}}}class PublicKey extends PemData{static async create(e,t=ae.get()){if(e instanceof PublicKey){return e}else if(CryptoProvider.isCryptoKey(e)){if(e.type!=="public"){throw new TypeError("Public key is required")}const r=await t.subtle.exportKey("spki",e);return new PublicKey(r)}else if(e.publicKey){return e.publicKey}else if(s.BufferSourceConverter.isBufferSource(e)){return new PublicKey(e)}else{throw new TypeError("Unsupported PublicKeyType")}}constructor(e){if(PemData.isAsnEncoded(e)){super(e,i.SubjectPublicKeyInfo)}else{super(e)}this.tag=PemConverter.PublicKeyTag}async export(...e){let t;let r=["verify"];let s={hash:"SHA-256",...this.algorithm};if(e.length>1){s=e[0]||s;r=e[1]||r;t=e[2]||ae.get()}else{t=e[0]||ae.get()}let o=this.rawData;const a=n.AsnConvert.parse(this.rawData,i.SubjectPublicKeyInfo);if(a.algorithm.algorithm===c.id_RSASSA_PSS){o=convertSpkiToRsaPkcs1(a,o)}return t.subtle.importKey("spki",o,s,true,r)}onInit(e){const t=d.container.resolve(C);const r=this.algorithm=t.toWebAlgorithm(e.algorithm);switch(e.algorithm.algorithm){case c.id_rsaEncryption:{const t=n.AsnConvert.parse(e.subjectPublicKey,c.RSAPublicKey);const i=s.BufferSourceConverter.toUint8Array(t.modulus);r.publicExponent=s.BufferSourceConverter.toUint8Array(t.publicExponent);r.modulusLength=(!i[0]?i.slice(1):i).byteLength<<3;break}}}async getThumbprint(...e){var t;let r;let n="SHA-1";if(e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)){n=e[0]||n;r=e[1]||ae.get()}else{r=e[0]||ae.get()}return await r.subtle.digest(n,this.rawData)}async getKeyIdentifier(...e){let t;let r="SHA-1";if(e.length===1){if(typeof e[0]==="string"){r=e[0];t=ae.get()}else{t=e[0]}}else if(e.length===2){r=e[0];t=e[1]}else{t=ae.get()}const s=n.AsnConvert.parse(this.rawData,i.SubjectPublicKeyInfo);return await t.subtle.digest(r,s.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty();const t=n.AsnConvert.parse(this.rawData,i.SubjectPublicKeyInfo);e["Algorithm"]=TextConverter.serializeAlgorithm(t.algorithm);switch(t.algorithm.algorithm){case a.id_ecPublicKey:e["EC Point"]=t.subjectPublicKey;break;case c.id_rsaEncryption:default:e["Raw Data"]=t.subjectPublicKey}return e}}function convertSpkiToRsaPkcs1(e,t){e.algorithm=new i.AlgorithmIdentifier({algorithm:c.id_rsaEncryption,parameters:null});t=n.AsnConvert.serialize(e);return t}class AuthorityKeyIdentifierExtension extends Extension{static async create(e,t=false,r=ae.get()){if("name"in e&&"serialNumber"in e){return new AuthorityKeyIdentifierExtension(e,t)}const n=await PublicKey.create(e,r);const i=await n.getKeyIdentifier(r);return new AuthorityKeyIdentifierExtension(s.Convert.ToHex(i),t)}constructor(...e){if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else if(typeof e[0]==="string"){const t=new y.AuthorityKeyIdentifier({keyIdentifier:new y.KeyIdentifier(s.Convert.FromHex(e[0]))});super(y.id_ce_authorityKeyIdentifier,e[1],n.AsnConvert.serialize(t))}else{const t=e[0];const r=t.name instanceof GeneralNames?n.AsnConvert.parse(t.name.rawData,y.GeneralNames):t.name;const i=new y.AuthorityKeyIdentifier({authorityCertIssuer:r,authorityCertSerialNumber:s.Convert.FromHex(t.serialNumber)});super(y.id_ce_authorityKeyIdentifier,e[1],n.AsnConvert.serialize(i))}}onInit(e){super.onInit(e);const t=n.AsnConvert.parse(e.extnValue,y.AuthorityKeyIdentifier);if(t.keyIdentifier){this.keyId=s.Convert.ToHex(t.keyIdentifier)}if(t.authorityCertIssuer||t.authorityCertSerialNumber){this.certId={name:t.authorityCertIssuer||[],serialNumber:t.authorityCertSerialNumber?s.Convert.ToHex(t.authorityCertSerialNumber):""}}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=n.AsnConvert.parse(this.value,y.AuthorityKeyIdentifier);if(t.authorityCertIssuer){e["Authority Issuer"]=new GeneralNames(t.authorityCertIssuer).toTextObject()}if(t.authorityCertSerialNumber){e["Authority Serial Number"]=t.authorityCertSerialNumber}if(t.keyIdentifier){e[""]=t.keyIdentifier}return e}}AuthorityKeyIdentifierExtension.NAME="Authority Key Identifier";class BasicConstraintsExtension extends Extension{constructor(...e){if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=n.AsnConvert.parse(this.value,i.BasicConstraints);this.ca=t.cA;this.pathLength=t.pathLenConstraint}else{const t=new i.BasicConstraints({cA:e[0],pathLenConstraint:e[1]});super(i.id_ce_basicConstraints,e[2],n.AsnConvert.serialize(t));this.ca=e[0];this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();if(this.ca){e["CA"]=this.ca}if(this.pathLength!==undefined){e["Path Length"]=this.pathLength}return e}}BasicConstraintsExtension.NAME="Basic Constraints";t.ExtendedKeyUsage=void 0;(function(e){e["serverAuth"]="1.3.6.1.5.5.7.3.1";e["clientAuth"]="1.3.6.1.5.5.7.3.2";e["codeSigning"]="1.3.6.1.5.5.7.3.3";e["emailProtection"]="1.3.6.1.5.5.7.3.4";e["timeStamping"]="1.3.6.1.5.5.7.3.8";e["ocspSigning"]="1.3.6.1.5.5.7.3.9"})(t.ExtendedKeyUsage||(t.ExtendedKeyUsage={}));class ExtendedKeyUsageExtension extends Extension{constructor(...e){if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=n.AsnConvert.parse(this.value,y.ExtendedKeyUsage);this.usages=t.map((e=>e))}else{const t=new y.ExtendedKeyUsage(e[0]);super(y.id_ce_extKeyUsage,e[1],n.AsnConvert.serialize(t));this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();e[""]=this.usages.map((e=>OidSerializer.toString(e))).join(", ");return e}}ExtendedKeyUsageExtension.NAME="Extended Key Usages";t.KeyUsageFlags=void 0;(function(e){e[e["digitalSignature"]=1]="digitalSignature";e[e["nonRepudiation"]=2]="nonRepudiation";e[e["keyEncipherment"]=4]="keyEncipherment";e[e["dataEncipherment"]=8]="dataEncipherment";e[e["keyAgreement"]=16]="keyAgreement";e[e["keyCertSign"]=32]="keyCertSign";e[e["cRLSign"]=64]="cRLSign";e[e["encipherOnly"]=128]="encipherOnly";e[e["decipherOnly"]=256]="decipherOnly"})(t.KeyUsageFlags||(t.KeyUsageFlags={}));class KeyUsagesExtension extends Extension{constructor(...e){if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=n.AsnConvert.parse(this.value,i.KeyUsage);this.usages=t.toNumber()}else{const t=new i.KeyUsage(e[0]);super(i.id_ce_keyUsage,e[1],n.AsnConvert.serialize(t));this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=n.AsnConvert.parse(this.value,i.KeyUsage);e[""]=t.toJSON().join(", ");return e}}KeyUsagesExtension.NAME="Key Usages";class SubjectKeyIdentifierExtension extends Extension{static async create(e,t=false,r=ae.get()){const n=await PublicKey.create(e,r);const i=await n.getKeyIdentifier(r);return new SubjectKeyIdentifierExtension(s.Convert.ToHex(i),t)}constructor(...e){if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=n.AsnConvert.parse(this.value,y.SubjectKeyIdentifier);this.keyId=s.Convert.ToHex(t)}else{const t=typeof e[0]==="string"?s.Convert.FromHex(e[0]):e[0];const r=new y.SubjectKeyIdentifier(t);super(y.id_ce_subjectKeyIdentifier,e[1],n.AsnConvert.serialize(r));this.keyId=s.Convert.ToHex(t)}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=n.AsnConvert.parse(this.value,y.SubjectKeyIdentifier);e[""]=t;return e}}SubjectKeyIdentifierExtension.NAME="Subject Key Identifier";class SubjectAlternativeNameExtension extends Extension{constructor(...e){if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else{super(y.id_ce_subjectAltName,e[1],new GeneralNames(e[0]||[]).rawData)}}onInit(e){super.onInit(e);const t=n.AsnConvert.parse(e.extnValue,y.SubjectAlternativeName);this.names=new GeneralNames(t)}toTextObject(){const e=this.toTextObjectWithoutValue();const t=this.names.toTextObject();for(const r in t){e[r]=t[r]}return e}}SubjectAlternativeNameExtension.NAME="Subject Alternative Name";class ExtensionFactory{static register(e,t){this.items.set(e,t)}static create(e){const t=new Extension(e);const r=this.items.get(t.type);if(r){return new r(e)}return t}}ExtensionFactory.items=new Map;class CertificatePolicyExtension extends Extension{constructor(...e){var t;if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=n.AsnConvert.parse(this.value,y.CertificatePolicies);this.policies=t.map((e=>e.policyIdentifier))}else{const r=e[0];const i=(t=e[1])!==null&&t!==void 0?t:false;const s=new y.CertificatePolicies(r.map((e=>new y.PolicyInformation({policyIdentifier:e}))));super(y.id_ce_certificatePolicies,i,n.AsnConvert.serialize(s));this.policies=r}}toTextObject(){const e=this.toTextObjectWithoutValue();e["Policy"]=this.policies.map((e=>new TextObject("",{},OidSerializer.toString(e))));return e}}CertificatePolicyExtension.NAME="Certificate Policies";ExtensionFactory.register(y.id_ce_certificatePolicies,CertificatePolicyExtension);class CRLDistributionPointsExtension extends Extension{constructor(...e){var t;if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else if(Array.isArray(e[0])&&typeof e[0][0]==="string"){const t=e[0];const r=t.map((e=>new y.DistributionPoint({distributionPoint:new y.DistributionPointName({fullName:[new y.GeneralName({uniformResourceIdentifier:e})]})})));const i=new y.CRLDistributionPoints(r);super(y.id_ce_cRLDistributionPoints,e[1],n.AsnConvert.serialize(i))}else{const t=new y.CRLDistributionPoints(e[0]);super(y.id_ce_cRLDistributionPoints,e[1],n.AsnConvert.serialize(t))}(t=this.distributionPoints)!==null&&t!==void 0?t:this.distributionPoints=[]}onInit(e){super.onInit(e);const t=n.AsnConvert.parse(e.extnValue,y.CRLDistributionPoints);this.distributionPoints=t}toTextObject(){const e=this.toTextObjectWithoutValue();e["Distribution Point"]=this.distributionPoints.map((e=>{var t;const r={};if(e.distributionPoint){r[""]=(t=e.distributionPoint.fullName)===null||t===void 0?void 0:t.map((e=>new GeneralName(e).toString())).join(", ")}if(e.reasons){r["Reasons"]=e.reasons.toString()}if(e.cRLIssuer){r["CRL Issuer"]=e.cRLIssuer.map((e=>e.toString())).join(", ")}return r}));return e}}CRLDistributionPointsExtension.NAME="CRL Distribution Points";class AuthorityInfoAccessExtension extends Extension{constructor(...e){var t,r,i,o;if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else if(e[0]instanceof y.AuthorityInfoAccessSyntax){const t=new y.AuthorityInfoAccessSyntax(e[0]);super(y.id_pe_authorityInfoAccess,e[1],n.AsnConvert.serialize(t))}else{const t=e[0];const r=new y.AuthorityInfoAccessSyntax;addAccessDescriptions(r,t,y.id_ad_ocsp,"ocsp");addAccessDescriptions(r,t,y.id_ad_caIssuers,"caIssuers");addAccessDescriptions(r,t,y.id_ad_timeStamping,"timeStamping");addAccessDescriptions(r,t,y.id_ad_caRepository,"caRepository");super(y.id_pe_authorityInfoAccess,e[1],n.AsnConvert.serialize(r))}(t=this.ocsp)!==null&&t!==void 0?t:this.ocsp=[];(r=this.caIssuers)!==null&&r!==void 0?r:this.caIssuers=[];(i=this.timeStamping)!==null&&i!==void 0?i:this.timeStamping=[];(o=this.caRepository)!==null&&o!==void 0?o:this.caRepository=[]}onInit(e){super.onInit(e);this.ocsp=[];this.caIssuers=[];this.timeStamping=[];this.caRepository=[];const t=n.AsnConvert.parse(e.extnValue,y.AuthorityInfoAccessSyntax);t.forEach((e=>{switch(e.accessMethod){case y.id_ad_ocsp:this.ocsp.push(new GeneralName(e.accessLocation));break;case y.id_ad_caIssuers:this.caIssuers.push(new GeneralName(e.accessLocation));break;case y.id_ad_timeStamping:this.timeStamping.push(new GeneralName(e.accessLocation));break;case y.id_ad_caRepository:this.caRepository.push(new GeneralName(e.accessLocation));break}}))}toTextObject(){const e=this.toTextObjectWithoutValue();if(this.ocsp.length){addUrlsToObject(e,"OCSP",this.ocsp)}if(this.caIssuers.length){addUrlsToObject(e,"CA Issuers",this.caIssuers)}if(this.timeStamping.length){addUrlsToObject(e,"Time Stamping",this.timeStamping)}if(this.caRepository.length){addUrlsToObject(e,"CA Repository",this.caRepository)}return e}}AuthorityInfoAccessExtension.NAME="Authority Info Access";function addUrlsToObject(e,t,r){if(r.length===1){e[t]=r[0].toTextObject()}else{const n=new TextObject("");r.forEach(((e,t)=>{const r=e.toTextObject();const i=`${r[TextObject.NAME]} ${t+1}`;let s=n[i];if(!Array.isArray(s)){s=[];n[i]=s}s.push(r)}));e[t]=n}}function addAccessDescriptions(e,t,r,i){const s=t[i];if(s){const t=Array.isArray(s)?s:[s];t.forEach((t=>{if(typeof t==="string"){t=new GeneralName("url",t)}e.push(new y.AccessDescription({accessMethod:r,accessLocation:n.AsnConvert.parse(t.rawData,y.GeneralName)}))}))}}class Attribute extends AsnData{constructor(...e){let t;if(s.BufferSourceConverter.isBufferSource(e[0])){t=s.BufferSourceConverter.toArrayBuffer(e[0])}else{const r=e[0];const o=Array.isArray(e[1])?e[1].map((e=>s.BufferSourceConverter.toArrayBuffer(e))):[];t=n.AsnConvert.serialize(new i.Attribute({type:r,values:o}))}super(t,i.Attribute)}onInit(e){this.type=e.type;this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();e["Value"]=this.values.map((e=>new TextObject("",{"":e})));return e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();if(e[TextObject.NAME]===Attribute.NAME){e[TextObject.NAME]=OidSerializer.toString(this.type)}return e}}Attribute.NAME="Attribute";class ChallengePasswordAttribute extends Attribute{constructor(...e){var t;if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else{const t=new w.ChallengePassword({printableString:e[0]});super(w.id_pkcs9_at_challengePassword,[n.AsnConvert.serialize(t)])}(t=this.password)!==null&&t!==void 0?t:this.password=""}onInit(e){super.onInit(e);if(this.values[0]){const e=n.AsnConvert.parse(this.values[0],w.ChallengePassword);this.password=e.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();e[TextObject.VALUE]=this.password;return e}}ChallengePasswordAttribute.NAME="Challenge Password";class ExtensionsAttribute extends Attribute{constructor(...e){var t;if(s.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else{const t=e[0];const r=new y.Extensions;for(const e of t){r.push(n.AsnConvert.parse(e.rawData,y.Extension))}super(w.id_pkcs9_at_extensionRequest,[n.AsnConvert.serialize(r)])}(t=this.items)!==null&&t!==void 0?t:this.items=[]}onInit(e){super.onInit(e);if(this.values[0]){const e=n.AsnConvert.parse(this.values[0],y.Extensions);this.items=e.map((e=>ExtensionFactory.create(n.AsnConvert.serialize(e))))}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=this.items.map((e=>e.toTextObject()));for(const r of t){e[r[TextObject.NAME]]=r}return e}}ExtensionsAttribute.NAME="Extensions";class AttributeFactory{static register(e,t){this.items.set(e,t)}static create(e){const t=new Attribute(e);const r=this.items.get(t.type);if(r){return new r(e)}return t}}AttributeFactory.items=new Map;const je="crypto.signatureFormatter";class AsnDefaultSignatureFormatter{toAsnSignature(e,t){return s.BufferSourceConverter.toArrayBuffer(t)}toWebSignature(e,t){return s.BufferSourceConverter.toArrayBuffer(t)}}var Le;t.RsaAlgorithm=Le=class RsaAlgorithm{static createPssParams(e,t){const r=Le.getHashAlgorithm(e);if(!r){return null}return new v.RsaSaPssParams({hashAlgorithm:r,maskGenAlgorithm:new i.AlgorithmIdentifier({algorithm:v.id_mgf1,parameters:n.AsnConvert.serialize(r)}),saltLength:t})}static getHashAlgorithm(e){const t=d.container.resolve(C);if(typeof e==="string"){return t.toAsnAlgorithm({name:e})}if(typeof e==="object"&&e&&"name"in e){return t.toAsnAlgorithm(e)}return null}toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if("hash"in e){let t;if(typeof e.hash==="string"){t=e.hash}else if(e.hash&&typeof e.hash==="object"&&"name"in e.hash&&typeof e.hash.name==="string"){t=e.hash.name.toUpperCase()}else{throw new Error("Cannot get hash algorithm name")}switch(t.toLowerCase()){case"sha-1":return new i.AlgorithmIdentifier({algorithm:v.id_sha1WithRSAEncryption,parameters:null});case"sha-256":return new i.AlgorithmIdentifier({algorithm:v.id_sha256WithRSAEncryption,parameters:null});case"sha-384":return new i.AlgorithmIdentifier({algorithm:v.id_sha384WithRSAEncryption,parameters:null});case"sha-512":return new i.AlgorithmIdentifier({algorithm:v.id_sha512WithRSAEncryption,parameters:null})}}else{return new i.AlgorithmIdentifier({algorithm:v.id_rsaEncryption,parameters:null})}break;case"rsa-pss":if("hash"in e){if(!("saltLength"in e&&typeof e.saltLength==="number")){throw new Error("Cannot get 'saltLength' from 'alg' argument")}const t=Le.createPssParams(e.hash,e.saltLength);if(!t){throw new Error("Cannot create PSS parameters")}return new i.AlgorithmIdentifier({algorithm:v.id_RSASSA_PSS,parameters:n.AsnConvert.serialize(t)})}else{return new i.AlgorithmIdentifier({algorithm:v.id_RSASSA_PSS,parameters:null})}}return null}toWebAlgorithm(e){switch(e.algorithm){case v.id_rsaEncryption:return{name:"RSASSA-PKCS1-v1_5"};case v.id_sha1WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case v.id_sha256WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case v.id_sha384WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case v.id_sha512WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case v.id_RSASSA_PSS:if(e.parameters){const t=n.AsnConvert.parse(e.parameters,v.RsaSaPssParams);const r=d.container.resolve(C);const i=r.toWebAlgorithm(t.hashAlgorithm);return{name:"RSA-PSS",hash:i,saltLength:t.saltLength}}else{return{name:"RSA-PSS"}}}return null}};t.RsaAlgorithm=Le=u.__decorate([d.injectable()],t.RsaAlgorithm);d.container.registerSingleton(_,t.RsaAlgorithm);t.ShaAlgorithm=class ShaAlgorithm{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"sha-1":return new i.AlgorithmIdentifier({algorithm:c.id_sha1});case"sha-256":return new i.AlgorithmIdentifier({algorithm:c.id_sha256});case"sha-384":return new i.AlgorithmIdentifier({algorithm:c.id_sha384});case"sha-512":return new i.AlgorithmIdentifier({algorithm:c.id_sha512})}return null}toWebAlgorithm(e){switch(e.algorithm){case c.id_sha1:return{name:"SHA-1"};case c.id_sha256:return{name:"SHA-256"};case c.id_sha384:return{name:"SHA-384"};case c.id_sha512:return{name:"SHA-512"}}return null}};t.ShaAlgorithm=u.__decorate([d.injectable()],t.ShaAlgorithm);d.container.registerSingleton(_,t.ShaAlgorithm);class AsnEcSignatureFormatter{addPadding(e,t){const r=s.BufferSourceConverter.toUint8Array(t);const n=new Uint8Array(e);n.set(r,e-r.length);return n}removePadding(e,t=false){let r=s.BufferSourceConverter.toUint8Array(e);for(let e=0;e<r.length;e++){if(!r[e]){continue}r=r.slice(e);break}if(t&&r[0]>127){const e=new Uint8Array(r.length+1);e.set(r,1);return e.buffer}return r.buffer}toAsnSignature(e,t){if(e.name==="ECDSA"){const r=e.namedCurve;const i=AsnEcSignatureFormatter.namedCurveSize.get(r)||AsnEcSignatureFormatter.defaultNamedCurveSize;const o=new a.ECDSASigValue;const c=s.BufferSourceConverter.toUint8Array(t);o.r=this.removePadding(c.slice(0,i),true);o.s=this.removePadding(c.slice(i,i+i),true);return n.AsnConvert.serialize(o)}return null}toWebSignature(e,t){if(e.name==="ECDSA"){const r=n.AsnConvert.parse(t,a.ECDSASigValue);const i=e.namedCurve;const o=AsnEcSignatureFormatter.namedCurveSize.get(i)||AsnEcSignatureFormatter.defaultNamedCurveSize;const c=this.addPadding(o,this.removePadding(r.r));const u=this.addPadding(o,this.removePadding(r.s));return s.combine(c,u)}return null}}AsnEcSignatureFormatter.namedCurveSize=new Map;AsnEcSignatureFormatter.defaultNamedCurveSize=32;const De="1.3.101.110";const Me="1.3.101.111";const Ue="1.3.101.112";const Fe="1.3.101.113";t.EdAlgorithm=class EdAlgorithm{toAsnAlgorithm(e){let t=null;switch(e.name.toLowerCase()){case"ed25519":t=Ue;break;case"x25519":t=De;break;case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":t=Ue;break;case"ed448":t=Fe;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":t=De;break;case"x448":t=Me;break}}if(t){return new i.AlgorithmIdentifier({algorithm:t})}return null}toWebAlgorithm(e){switch(e.algorithm){case Ue:return{name:"Ed25519"};case Fe:return{name:"EdDSA",namedCurve:"Ed448"};case De:return{name:"X25519"};case Me:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};t.EdAlgorithm=u.__decorate([d.injectable()],t.EdAlgorithm);d.container.registerSingleton(_,t.EdAlgorithm);class Pkcs10CertificateRequest extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,m.CertificationRequest)}else{super(e)}this.tag=PemConverter.CertificateRequestTag}onInit(e){this.tbs=n.AsnConvert.serialize(e.certificationRequestInfo);this.publicKey=new PublicKey(e.certificationRequestInfo.subjectPKInfo);const t=d.container.resolve(C);this.signatureAlgorithm=t.toWebAlgorithm(e.signatureAlgorithm);this.signature=e.signature;this.attributes=e.certificationRequestInfo.attributes.map((e=>AttributeFactory.create(n.AsnConvert.serialize(e))));const r=this.getAttribute(p.id_pkcs9_at_extensionRequest);this.extensions=[];if(r instanceof ExtensionsAttribute){this.extensions=r.items}this.subjectName=new Name(e.certificationRequestInfo.subject);this.subject=this.subjectName.toString()}getAttribute(e){for(const t of this.attributes){if(t.type===e){return t}}return null}getAttributes(e){return this.attributes.filter((t=>t.type===e))}getExtension(e){for(const t of this.extensions){if(t.type===e){return t}}return null}getExtensions(e){return this.extensions.filter((t=>t.type===e))}async verify(e=ae.get()){const t={...this.publicKey.algorithm,...this.signatureAlgorithm};const r=await this.publicKey.export(t,["verify"],e);const n=d.container.resolveAll(je).reverse();let i=null;for(const e of n){i=e.toWebSignature(t,this.signature);if(i){break}}if(!i){throw Error("Cannot convert WebCrypto signature value to ASN.1 format")}const s=await e.subtle.verify(this.signatureAlgorithm,r,i,this.tbs);return s}toTextObject(){const e=this.toTextObjectEmpty();const t=n.AsnConvert.parse(this.rawData,m.CertificationRequest);const r=t.certificationRequestInfo;const s=new TextObject("",{Version:`${i.Version[r.version]} (${r.version})`,Subject:this.subject,"Subject Public Key Info":this.publicKey});if(this.attributes.length){const e=new TextObject("");for(const t of this.attributes){const r=t.toTextObject();e[r[TextObject.NAME]]=r}s["Attributes"]=e}e["Data"]=s;e["Signature"]=new TextObject("",{Algorithm:TextConverter.serializeAlgorithm(t.signatureAlgorithm),"":t.signature});return e}}Pkcs10CertificateRequest.NAME="PKCS#10 Certificate Request";class Pkcs10CertificateRequestGenerator{static async create(e,t=ae.get()){if(!e.keys.privateKey){throw new Error("Bad field 'keys' in 'params' argument. 'privateKey' is empty")}if(!e.keys.publicKey){throw new Error("Bad field 'keys' in 'params' argument. 'publicKey' is empty")}const r=await t.subtle.exportKey("spki",e.keys.publicKey);const s=new m.CertificationRequest({certificationRequestInfo:new m.CertificationRequestInfo({subjectPKInfo:n.AsnConvert.parse(r,i.SubjectPublicKeyInfo)})});if(e.name){const t=e.name instanceof Name?e.name:new Name(e.name);s.certificationRequestInfo.subject=n.AsnConvert.parse(t.toArrayBuffer(),i.Name)}if(e.attributes){for(const t of e.attributes){s.certificationRequestInfo.attributes.push(n.AsnConvert.parse(t.rawData,i.Attribute))}}if(e.extensions&&e.extensions.length){const t=new i.Attribute({type:p.id_pkcs9_at_extensionRequest});const r=new i.Extensions;for(const t of e.extensions){r.push(n.AsnConvert.parse(t.rawData,i.Extension))}t.values.push(n.AsnConvert.serialize(r));s.certificationRequestInfo.attributes.push(t)}const o={...e.signingAlgorithm,...e.keys.privateKey.algorithm};const a=d.container.resolve(C);s.signatureAlgorithm=a.toAsnAlgorithm(o);const c=n.AsnConvert.serialize(s.certificationRequestInfo);const u=await t.subtle.sign(o,e.keys.privateKey,c);const y=d.container.resolveAll(je).reverse();let g=null;for(const e of y){g=e.toAsnSignature(o,u);if(g){break}}if(!g){throw Error("Cannot convert WebCrypto signature value to ASN.1 format")}s.signature=g;return new Pkcs10CertificateRequest(n.AsnConvert.serialize(s))}}class X509Certificate extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,i.Certificate)}else{super(e)}this.tag=PemConverter.CertificateTag}onInit(e){const t=e.tbsCertificate;this.tbs=n.AsnConvert.serialize(t);this.serialNumber=s.Convert.ToHex(t.serialNumber);this.subjectName=new Name(t.subject);this.subject=new Name(t.subject).toString();this.issuerName=new Name(t.issuer);this.issuer=this.issuerName.toString();const r=d.container.resolve(C);this.signatureAlgorithm=r.toWebAlgorithm(e.signatureAlgorithm);this.signature=e.signatureValue;const i=t.validity.notBefore.utcTime||t.validity.notBefore.generalTime;if(!i){throw new Error("Cannot get 'notBefore' value")}this.notBefore=i;const o=t.validity.notAfter.utcTime||t.validity.notAfter.generalTime;if(!o){throw new Error("Cannot get 'notAfter' value")}this.notAfter=o;this.extensions=[];if(t.extensions){this.extensions=t.extensions.map((e=>ExtensionFactory.create(n.AsnConvert.serialize(e))))}this.publicKey=new PublicKey(t.subjectPublicKeyInfo)}getExtension(e){for(const t of this.extensions){if(typeof e==="string"){if(t.type===e){return t}}else{if(t instanceof e){return t}}}return null}getExtensions(e){return this.extensions.filter((t=>{if(typeof e==="string"){return t.type===e}else{return t instanceof e}}))}async verify(e={},t=ae.get()){let r;let n;const i=e.publicKey;try{if(!i){r={...this.publicKey.algorithm,...this.signatureAlgorithm};n=await this.publicKey.export(r,["verify"],t)}else if("publicKey"in i){r={...i.publicKey.algorithm,...this.signatureAlgorithm};n=await i.publicKey.export(r,["verify"],t)}else if(i instanceof PublicKey){r={...i.algorithm,...this.signatureAlgorithm};n=await i.export(r,["verify"],t)}else if(s.BufferSourceConverter.isBufferSource(i)){const e=new PublicKey(i);r={...e.algorithm,...this.signatureAlgorithm};n=await e.export(r,["verify"],t)}else{r={...i.algorithm,...this.signatureAlgorithm};n=i}}catch(e){return false}const o=d.container.resolveAll(je).reverse();let a=null;for(const e of o){a=e.toWebSignature(r,this.signature);if(a){break}}if(!a){throw Error("Cannot convert ASN.1 signature value to WebCrypto format")}const c=await t.subtle.verify(this.signatureAlgorithm,n,a,this.tbs);if(e.signatureOnly){return c}else{const t=e.date||new Date;const r=t.getTime();return c&&this.notBefore.getTime()<r&&r<this.notAfter.getTime()}}async getThumbprint(...e){let t;let r="SHA-1";if(e[0]){if(!e[0].subtle){r=e[0]||r;t=e[1]}else{t=e[0]}}t!==null&&t!==void 0?t:t=ae.get();return await t.subtle.digest(r,this.rawData)}async isSelfSigned(e=ae.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:true},e)}toTextObject(){const e=this.toTextObjectEmpty();const t=n.AsnConvert.parse(this.rawData,i.Certificate);const r=t.tbsCertificate;const s=new TextObject("",{Version:`${i.Version[r.version]} (${r.version})`,"Serial Number":r.serialNumber,"Signature Algorithm":TextConverter.serializeAlgorithm(r.signature),Issuer:this.issuer,Validity:new TextObject("",{"Not Before":r.validity.notBefore.getTime(),"Not After":r.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(r.issuerUniqueID){s["Issuer Unique ID"]=r.issuerUniqueID}if(r.subjectUniqueID){s["Subject Unique ID"]=r.subjectUniqueID}if(this.extensions.length){const e=new TextObject("");for(const t of this.extensions){const r=t.toTextObject();e[r[TextObject.NAME]]=r}s["Extensions"]=e}e["Data"]=s;e["Signature"]=new TextObject("",{Algorithm:TextConverter.serializeAlgorithm(t.signatureAlgorithm),"":t.signatureValue});return e}}X509Certificate.NAME="Certificate";class X509Certificates extends Array{constructor(e){super();if(PemData.isAsnEncoded(e)){this.import(e)}else if(e instanceof X509Certificate){this.push(e)}else if(Array.isArray(e)){for(const t of e){this.push(t)}}}export(e){const t=new g.SignedData;t.version=1;t.encapContentInfo.eContentType=g.id_data;t.encapContentInfo.eContent=new g.EncapsulatedContent({single:new n.OctetString});t.certificates=new g.CertificateSet(this.map((e=>new g.CertificateChoices({certificate:n.AsnConvert.parse(e.rawData,i.Certificate)}))));const r=new g.ContentInfo({contentType:g.id_signedData,content:n.AsnConvert.serialize(t)});const s=n.AsnConvert.serialize(r);if(e==="raw"){return s}return this.toString(e)}import(e){const t=PemData.toArrayBuffer(e);const r=n.AsnConvert.parse(t,g.ContentInfo);if(r.contentType!==g.id_signedData){throw new TypeError("Cannot parse CMS package. Incoming data is not a SignedData object.")}const i=n.AsnConvert.parse(r.content,g.SignedData);this.clear();for(const e of i.certificates||[]){if(e.certificate){this.push(new X509Certificate(e.certificate))}}}clear(){while(this.pop()){}}toString(e="pem"){const t=this.export("raw");switch(e){case"pem":return PemConverter.encode(t,"CMS");case"pem-chain":return this.map((e=>e.toString("pem"))).join("\n");case"asn":return n.AsnConvert.toString(t);case"hex":return s.Convert.ToHex(t);case"base64":return s.Convert.ToBase64(t);case"base64url":return s.Convert.ToBase64Url(t);case"text":return TextConverter.serialize(this.toTextObject());default:throw TypeError("Argument 'format' is unsupported value")}}toTextObject(){const e=n.AsnConvert.parse(this.export("raw"),g.ContentInfo);const t=n.AsnConvert.parse(e.content,g.SignedData);const r=new TextObject("X509Certificates",{"Content Type":OidSerializer.toString(e.contentType),Content:new TextObject("",{Version:`${g.CMSVersion[t.version]} (${t.version})`,Certificates:new TextObject("",{Certificate:this.map((e=>e.toTextObject()))})})});return r}}class X509ChainBuilder{constructor(e={}){this.certificates=[];if(e.certificates){this.certificates=e.certificates}}async build(e,t=ae.get()){const r=new X509Certificates(e);let n=e;while(n=await this.findIssuer(n,t)){const e=await n.getThumbprint(t);for(const n of r){const r=await n.getThumbprint(t);if(s.isEqual(e,r)){throw new Error("Cannot build a certificate chain. Circular dependency.")}}r.push(n)}return r}async findIssuer(e,t=ae.get()){if(!await e.isSelfSigned(t)){const r=e.getExtension(y.id_ce_authorityKeyIdentifier);for(const i of this.certificates){if(i.subject!==e.issuer){continue}if(r){if(r.keyId){const e=i.getExtension(y.id_ce_subjectKeyIdentifier);if(e&&e.keyId!==r.keyId){continue}}else if(r.certId){const e=i.getExtension(y.id_ce_subjectAltName);if(e&&!(r.certId.serialNumber===i.serialNumber&&s.isEqual(n.AsnConvert.serialize(r.certId.name),n.AsnConvert.serialize(e)))){continue}}}try{const r={...i.publicKey.algorithm,...e.signatureAlgorithm};const n=await i.publicKey.export(r,["verify"],t);const s=await e.verify({publicKey:n,signatureOnly:true},t);if(!s){continue}}catch(e){continue}return i}}return null}}class X509CertificateGenerator{static async createSelfSigned(e,t=ae.get()){if(!e.keys.privateKey){throw new Error("Bad field 'keys' in 'params' argument. 'privateKey' is empty")}if(!e.keys.publicKey){throw new Error("Bad field 'keys' in 'params' argument. 'publicKey' is empty")}return this.create({serialNumber:e.serialNumber,subject:e.name,issuer:e.name,notBefore:e.notBefore,notAfter:e.notAfter,publicKey:e.keys.publicKey,signingKey:e.keys.privateKey,signingAlgorithm:e.signingAlgorithm,extensions:e.extensions},t)}static async create(e,t=ae.get()){var r;let i;if(e.publicKey instanceof PublicKey){i=e.publicKey.rawData}else if("publicKey"in e.publicKey){i=e.publicKey.publicKey.rawData}else if(s.BufferSourceConverter.isBufferSource(e.publicKey)){i=e.publicKey}else{i=await t.subtle.exportKey("spki",e.publicKey)}const o=e.serialNumber?s.BufferSourceConverter.toUint8Array(s.Convert.FromHex(e.serialNumber)):t.getRandomValues(new Uint8Array(16));if(o[0]>127){o[0]&=127}if(o.length>1&&o[0]===0){o[1]|=128}const a=e.notBefore||new Date;const c=e.notAfter||new Date(a.getTime()+31536e6);const u=new y.Certificate({tbsCertificate:new y.TBSCertificate({version:y.Version.v3,serialNumber:o,validity:new y.Validity({notBefore:a,notAfter:c}),extensions:new y.Extensions(((r=e.extensions)===null||r===void 0?void 0:r.map((e=>n.AsnConvert.parse(e.rawData,y.Extension))))||[]),subjectPublicKeyInfo:n.AsnConvert.parse(i,y.SubjectPublicKeyInfo)})});if(e.subject){const t=e.subject instanceof Name?e.subject:new Name(e.subject);u.tbsCertificate.subject=n.AsnConvert.parse(t.toArrayBuffer(),y.Name)}if(e.issuer){const t=e.issuer instanceof Name?e.issuer:new Name(e.issuer);u.tbsCertificate.issuer=n.AsnConvert.parse(t.toArrayBuffer(),y.Name)}const p={hash:"SHA-256"};const m="signingKey"in e?{...p,...e.signingAlgorithm,...e.signingKey.algorithm}:{...p,...e.signingAlgorithm};const g=d.container.resolve(C);u.tbsCertificate.signature=u.signatureAlgorithm=g.toAsnAlgorithm(m);const b=n.AsnConvert.serialize(u.tbsCertificate);const v="signingKey"in e?await t.subtle.sign(m,e.signingKey,b):e.signature;const w=d.container.resolveAll(je).reverse();let _=null;for(const e of w){_=e.toAsnSignature(m,v);if(_){break}}if(!_){throw Error("Cannot convert ASN.1 signature value to WebCrypto format")}u.signatureValue=_;return new X509Certificate(n.AsnConvert.serialize(u))}}t.X509CrlReason=void 0;(function(e){e[e["unspecified"]=0]="unspecified";e[e["keyCompromise"]=1]="keyCompromise";e[e["cACompromise"]=2]="cACompromise";e[e["affiliationChanged"]=3]="affiliationChanged";e[e["superseded"]=4]="superseded";e[e["cessationOfOperation"]=5]="cessationOfOperation";e[e["certificateHold"]=6]="certificateHold";e[e["removeFromCRL"]=8]="removeFromCRL";e[e["privilegeWithdrawn"]=9]="privilegeWithdrawn";e[e["aACompromise"]=10]="aACompromise"})(t.X509CrlReason||(t.X509CrlReason={}));class X509CrlEntry extends AsnData{constructor(...e){let t;if(s.BufferSourceConverter.isBufferSource(e[0])){t=s.BufferSourceConverter.toArrayBuffer(e[0])}else{t=n.AsnConvert.serialize(new i.RevokedCertificate({userCertificate:e[0],revocationDate:new i.Time(e[1]),crlEntryExtensions:e[2]}))}super(t,i.RevokedCertificate)}onInit(e){this.serialNumber=s.Convert.ToHex(e.userCertificate);this.revocationDate=e.revocationDate.getTime();this.extensions=[];if(e.crlEntryExtensions){this.extensions=e.crlEntryExtensions.map((e=>{const t=ExtensionFactory.create(n.AsnConvert.serialize(e));switch(t.type){case i.id_ce_cRLReasons:this.reason=n.AsnConvert.parse(t.value,i.CRLReason).reason;break;case i.id_ce_invalidityDate:this.invalidity=n.AsnConvert.parse(t.value,i.InvalidityDate).value;break}return t}))}}}class X509Crl extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,i.CertificateList)}else{super(e)}this.tag=PemConverter.CrlTag}onInit(e){var t,r;const i=e.tbsCertList;this.tbs=n.AsnConvert.serialize(i);this.version=i.version;const s=d.container.resolve(C);this.signatureAlgorithm=s.toWebAlgorithm(e.signatureAlgorithm);this.tbsCertListSignatureAlgorithm=i.signature;this.certListSignatureAlgorithm=e.signatureAlgorithm;this.signature=e.signature;this.issuerName=new Name(i.issuer);this.issuer=this.issuerName.toString();const o=i.thisUpdate.getTime();if(!o){throw new Error("Cannot get 'thisUpdate' value")}this.thisUpdate=o;const a=(t=i.nextUpdate)===null||t===void 0?void 0:t.getTime();this.nextUpdate=a;this.entries=((r=i.revokedCertificates)===null||r===void 0?void 0:r.map((e=>new X509CrlEntry(n.AsnConvert.serialize(e)))))||[];this.extensions=[];if(i.crlExtensions){this.extensions=i.crlExtensions.map((e=>ExtensionFactory.create(n.AsnConvert.serialize(e))))}}getExtension(e){for(const t of this.extensions){if(typeof e==="string"){if(t.type===e){return t}}else{if(t instanceof e){return t}}}return null}getExtensions(e){return this.extensions.filter((t=>{if(typeof e==="string"){return t.type===e}else{return t instanceof e}}))}async verify(e,t=ae.get()){if(!this.certListSignatureAlgorithm.isEqual(this.tbsCertListSignatureAlgorithm)){throw new Error("algorithm identifier in the sequence tbsCertList and CertificateList mismatch")}let r;let n;const i=e.publicKey;try{if(i instanceof X509Certificate){r={...i.publicKey.algorithm,...i.signatureAlgorithm};n=await i.publicKey.export(r,["verify"])}else if(i instanceof PublicKey){r={...i.algorithm,...this.signature};n=await i.export(r,["verify"])}else{r={...i.algorithm,...this.signature};n=i}}catch(e){return false}const s=d.container.resolveAll(je).reverse();let o=null;for(const e of s){o=e.toWebSignature(r,this.signature);if(o){break}}if(!o){throw Error("Cannot convert ASN.1 signature value to WebCrypto format")}return await t.subtle.verify(this.signatureAlgorithm,n,o,this.tbs)}async getThumbprint(...e){let t;let r="SHA-1";if(e[0]){if(!e[0].subtle){r=e[0]||r;t=e[1]}else{t=e[0]}}t!==null&&t!==void 0?t:t=ae.get();return await t.subtle.digest(r,this.rawData)}findRevoked(e){const t=typeof e==="string"?e:e.serialNumber;for(const e of this.entries){if(e.serialNumber===t){return e}}return null}}class X509CrlGenerator{static async create(e,t=ae.get()){var r;const o=e.issuer instanceof Name?e.issuer:new Name(e.issuer);const a=new y.CertificateList({tbsCertList:new y.TBSCertList({version:y.Version.v2,issuer:n.AsnConvert.parse(o.toArrayBuffer(),y.Name),thisUpdate:new i.Time(e.thisUpdate||new Date)})});if(e.nextUpdate){a.tbsCertList.nextUpdate=new i.Time(e.nextUpdate)}if(e.extensions&&e.extensions.length){a.tbsCertList.crlExtensions=new y.Extensions(e.extensions.map((e=>n.AsnConvert.parse(e.rawData,y.Extension)))||[])}if(e.entries&&e.entries.length){a.tbsCertList.revokedCertificates=[];for(const t of e.entries){const o=PemData.toArrayBuffer(t.serialNumber);const c=a.tbsCertList.revokedCertificates.findIndex((e=>s.isEqual(e.userCertificate,o)));if(c>-1){throw new Error(`Certificate serial number ${t.serialNumber} already exists in tbsCertList`)}const u=new i.RevokedCertificate({userCertificate:o,revocationDate:new i.Time(t.revocationDate||new Date)});if("extensions"in t&&((r=t.extensions)===null||r===void 0?void 0:r.length)){u.crlEntryExtensions=t.extensions.map((e=>n.AsnConvert.parse(e.rawData,y.Extension)))}else{u.crlEntryExtensions=[]}if(!(t instanceof X509CrlEntry)){if(t.reason){u.crlEntryExtensions.push(new y.Extension({extnID:y.id_ce_cRLReasons,critical:false,extnValue:new n.OctetString(n.AsnConvert.serialize(new y.CRLReason(t.reason)))}))}if(t.invalidity){u.crlEntryExtensions.push(new y.Extension({extnID:y.id_ce_invalidityDate,critical:false,extnValue:new n.OctetString(n.AsnConvert.serialize(new y.InvalidityDate(t.invalidity)))}))}if(t.issuer){const t=e.issuer instanceof Name?e.issuer:new Name(e.issuer);u.crlEntryExtensions.push(new y.Extension({extnID:y.id_ce_certificateIssuer,critical:false,extnValue:new n.OctetString(n.AsnConvert.serialize(n.AsnConvert.parse(t.toArrayBuffer(),y.Name)))}))}}a.tbsCertList.revokedCertificates.push(u)}}const c={...e.signingAlgorithm,...e.signingKey.algorithm};const u=d.container.resolve(C);a.tbsCertList.signature=a.signatureAlgorithm=u.toAsnAlgorithm(c);const p=n.AsnConvert.serialize(a.tbsCertList);const m=await t.subtle.sign(c,e.signingKey,p);const g=d.container.resolveAll(je).reverse();let b=null;for(const e of g){b=e.toAsnSignature(c,m);if(b){break}}if(!b){throw Error("Cannot convert ASN.1 signature value to WebCrypto format")}a.signature=b;return new X509Crl(n.AsnConvert.serialize(a))}}ExtensionFactory.register(y.id_ce_basicConstraints,BasicConstraintsExtension);ExtensionFactory.register(y.id_ce_extKeyUsage,ExtendedKeyUsageExtension);ExtensionFactory.register(y.id_ce_keyUsage,KeyUsagesExtension);ExtensionFactory.register(y.id_ce_subjectKeyIdentifier,SubjectKeyIdentifierExtension);ExtensionFactory.register(y.id_ce_authorityKeyIdentifier,AuthorityKeyIdentifierExtension);ExtensionFactory.register(y.id_ce_subjectAltName,SubjectAlternativeNameExtension);ExtensionFactory.register(y.id_ce_cRLDistributionPoints,CRLDistributionPointsExtension);ExtensionFactory.register(y.id_pe_authorityInfoAccess,AuthorityInfoAccessExtension);AttributeFactory.register(w.id_pkcs9_at_challengePassword,ChallengePasswordAttribute);AttributeFactory.register(w.id_pkcs9_at_extensionRequest,ExtensionsAttribute);d.container.registerSingleton(je,AsnDefaultSignatureFormatter);d.container.registerSingleton(je,AsnEcSignatureFormatter);AsnEcSignatureFormatter.namedCurveSize.set("P-256",32);AsnEcSignatureFormatter.namedCurveSize.set("K-256",32);AsnEcSignatureFormatter.namedCurveSize.set("P-384",48);AsnEcSignatureFormatter.namedCurveSize.set("P-521",66);t.AlgorithmProvider=AlgorithmProvider;t.AsnData=AsnData;t.AsnDefaultSignatureFormatter=AsnDefaultSignatureFormatter;t.AsnEcSignatureFormatter=AsnEcSignatureFormatter;t.Attribute=Attribute;t.AttributeFactory=AttributeFactory;t.AuthorityInfoAccessExtension=AuthorityInfoAccessExtension;t.AuthorityKeyIdentifierExtension=AuthorityKeyIdentifierExtension;t.BasicConstraintsExtension=BasicConstraintsExtension;t.CRLDistributionPointsExtension=CRLDistributionPointsExtension;t.CertificatePolicyExtension=CertificatePolicyExtension;t.ChallengePasswordAttribute=ChallengePasswordAttribute;t.CryptoProvider=CryptoProvider;t.DefaultAlgorithmSerializer=DefaultAlgorithmSerializer;t.ExtendedKeyUsageExtension=ExtendedKeyUsageExtension;t.Extension=Extension;t.ExtensionFactory=ExtensionFactory;t.ExtensionsAttribute=ExtensionsAttribute;t.GeneralName=GeneralName;t.GeneralNames=GeneralNames;t.KeyUsagesExtension=KeyUsagesExtension;t.Name=Name;t.NameIdentifier=NameIdentifier;t.OidSerializer=OidSerializer;t.PemConverter=PemConverter;t.Pkcs10CertificateRequest=Pkcs10CertificateRequest;t.Pkcs10CertificateRequestGenerator=Pkcs10CertificateRequestGenerator;t.PublicKey=PublicKey;t.SubjectAlternativeNameExtension=SubjectAlternativeNameExtension;t.SubjectKeyIdentifierExtension=SubjectKeyIdentifierExtension;t.TextConverter=TextConverter;t.TextObject=TextObject;t.X509Certificate=X509Certificate;t.X509CertificateGenerator=X509CertificateGenerator;t.X509Certificates=X509Certificates;t.X509ChainBuilder=X509ChainBuilder;t.X509Crl=X509Crl;t.X509CrlEntry=X509CrlEntry;t.X509CrlGenerator=X509CrlGenerator;t.cryptoProvider=ae;t.diAlgorithm=_;t.diAlgorithmProvider=C;t.diAsnSignatureFormatter=je;t.idEd25519=Ue;t.idEd448=Fe;t.idX25519=De;t.idX448=Me},65494:e=>{"use strict";e.exports=asPromise;function asPromise(e,t){var r=new Array(arguments.length-1),n=0,i=2,s=true;while(i<arguments.length)r[n++]=arguments[i++];return new Promise((function executor(i,o){r[n]=function callback(e){if(s){s=false;if(e)o(e);else{var t=new Array(arguments.length-1),r=0;while(r<t.length)t[r++]=arguments[r];i.apply(null,t)}}};try{e.apply(t||null,r)}catch(e){if(s){s=false;o(e)}}}))}},63020:(e,t)=>{"use strict";var r=t;r.length=function length(e){var t=e.length;if(!t)return 0;var r=0;while(--t%4>1&&e.charAt(t)==="=")++r;return Math.ceil(e.length*3)/4-r};var n=new Array(64);var i=new Array(123);for(var s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function encode(e,t,r){var i=null,s=[];var o=0,a=0,c;while(t<r){var u=e[t++];switch(a){case 0:s[o++]=n[u>>2];c=(u&3)<<4;a=1;break;case 1:s[o++]=n[c|u>>4];c=(u&15)<<2;a=2;break;case 2:s[o++]=n[c|u>>6];s[o++]=n[u&63];a=0;break}if(o>8191){(i||(i=[])).push(String.fromCharCode.apply(String,s));o=0}}if(a){s[o++]=n[c];s[o++]=61;if(a===1)s[o++]=61}if(i){if(o)i.push(String.fromCharCode.apply(String,s.slice(0,o)));return i.join("")}return String.fromCharCode.apply(String,s.slice(0,o))};var o="invalid encoding";r.decode=function decode(e,t,r){var n=r;var s=0,a;for(var c=0;c<e.length;){var u=e.charCodeAt(c++);if(u===61&&s>1)break;if((u=i[u])===undefined)throw Error(o);switch(s){case 0:a=u;s=1;break;case 1:t[r++]=a<<2|(u&48)>>4;a=u;s=2;break;case 2:t[r++]=(a&15)<<4|(u&60)>>2;a=u;s=3;break;case 3:t[r++]=(a&3)<<6|u;s=0;break}}if(s===1)throw Error(o);return r-n};r.test=function test(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},56809:e=>{"use strict";e.exports=codegen;function codegen(e,t){if(typeof e==="string"){t=e;e=undefined}var r=[];function Codegen(e){if(typeof e!=="string"){var t=toString();if(codegen.verbose)console.log("codegen: "+t);t="return "+t;if(e){var n=Object.keys(e),i=new Array(n.length+1),s=new Array(n.length),o=0;while(o<n.length){i[o]=n[o];s[o]=e[n[o++]]}i[o]=t;return Function.apply(null,i).apply(null,s)}return Function(t)()}var a=new Array(arguments.length-1),c=0;while(c<a.length)a[c]=arguments[++c];c=0;e=e.replace(/%([%dfijs])/g,(function replace(e,t){var r=a[c++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}));if(c!==a.length)throw Error("parameter count mismatch");r.push(e);return Codegen}function toString(n){return"function "+(n||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}Codegen.toString=toString;return Codegen}codegen.verbose=false},58076:e=>{"use strict";e.exports=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function on(e,t,r){(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this});return this};EventEmitter.prototype.off=function off(e,t){if(e===undefined)this._listeners={};else{if(t===undefined)this._listeners[e]=[];else{var r=this._listeners[e];for(var n=0;n<r.length;)if(r[n].fn===t)r.splice(n,1);else++n}}return this};EventEmitter.prototype.emit=function emit(e){var t=this._listeners[e];if(t){var r=[],n=1;for(;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},99161:(e,t,r)=>{"use strict";e.exports=fetch;var n=r(65494),i=r(148);var s=i("fs");function fetch(e,t,r){if(typeof t==="function"){r=t;t={}}else if(!t)t={};if(!r)return n(fetch,this,e,t);if(!t.xhr&&s&&s.readFile)return s.readFile(e,(function fetchReadFileCallback(n,i){return n&&typeof XMLHttpRequest!=="undefined"?fetch.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))}));return fetch.xhr(e,t,r)}fetch.xhr=function fetch_xhr(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function fetchOnReadyStateChange(){if(n.readyState!==4)return undefined;if(n.status!==0&&n.status!==200)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(n.responseText.charCodeAt(i)&255)}return r(null,typeof Uint8Array!=="undefined"?new Uint8Array(e):e)}return r(null,n.responseText)};if(t.binary){if("overrideMimeType"in n)n.overrideMimeType("text/plain; charset=x-user-defined");n.responseType="arraybuffer"}n.open("GET",e);n.send()}},95735:e=>{"use strict";e.exports=factory(factory);function factory(e){if(typeof Float32Array!=="undefined")(function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function writeFloat_f32_cpy(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3]}function writeFloat_f32_rev(e,n,i){t[0]=e;n[i]=r[3];n[i+1]=r[2];n[i+2]=r[1];n[i+3]=r[0]}e.writeFloatLE=n?writeFloat_f32_cpy:writeFloat_f32_rev;e.writeFloatBE=n?writeFloat_f32_rev:writeFloat_f32_cpy;function readFloat_f32_cpy(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];return t[0]}function readFloat_f32_rev(e,n){r[3]=e[n];r[2]=e[n+1];r[1]=e[n+2];r[0]=e[n+3];return t[0]}e.readFloatLE=n?readFloat_f32_cpy:readFloat_f32_rev;e.readFloatBE=n?readFloat_f32_rev:readFloat_f32_cpy})();else(function(){function writeFloat_ieee754(e,t,r,n){var i=t<0?1:0;if(i)t=-t;if(t===0)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),o=Math.round(t*Math.pow(2,-s)*8388608)&8388607;e((i<<31|s+127<<23|o)>>>0,r,n)}}e.writeFloatLE=writeFloat_ieee754.bind(null,writeUintLE);e.writeFloatBE=writeFloat_ieee754.bind(null,writeUintBE);function readFloat_ieee754(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,o=n&8388607;return s===255?o?NaN:i*Infinity:s===0?i*1401298464324817e-60*o:i*Math.pow(2,s-150)*(o+8388608)}e.readFloatLE=readFloat_ieee754.bind(null,readUintLE);e.readFloatBE=readFloat_ieee754.bind(null,readUintBE)})();if(typeof Float64Array!=="undefined")(function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function writeDouble_f64_cpy(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3];n[i+4]=r[4];n[i+5]=r[5];n[i+6]=r[6];n[i+7]=r[7]}function writeDouble_f64_rev(e,n,i){t[0]=e;n[i]=r[7];n[i+1]=r[6];n[i+2]=r[5];n[i+3]=r[4];n[i+4]=r[3];n[i+5]=r[2];n[i+6]=r[1];n[i+7]=r[0]}e.writeDoubleLE=n?writeDouble_f64_cpy:writeDouble_f64_rev;e.writeDoubleBE=n?writeDouble_f64_rev:writeDouble_f64_cpy;function readDouble_f64_cpy(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];r[4]=e[n+4];r[5]=e[n+5];r[6]=e[n+6];r[7]=e[n+7];return t[0]}function readDouble_f64_rev(e,n){r[7]=e[n];r[6]=e[n+1];r[5]=e[n+2];r[4]=e[n+3];r[3]=e[n+4];r[2]=e[n+5];r[1]=e[n+6];r[0]=e[n+7];return t[0]}e.readDoubleLE=n?readDouble_f64_cpy:readDouble_f64_rev;e.readDoubleBE=n?readDouble_f64_rev:readDouble_f64_cpy})();else(function(){function writeDouble_ieee754(e,t,r,n,i,s){var o=n<0?1:0;if(o)n=-n;if(n===0){e(0,i,s+t);e(1/n>0?0:2147483648,i,s+r)}else if(isNaN(n)){e(0,i,s+t);e(2146959360,i,s+r)}else if(n>17976931348623157e292){e(0,i,s+t);e((o<<31|2146435072)>>>0,i,s+r)}else{var a;if(n<22250738585072014e-324){a=n/5e-324;e(a>>>0,i,s+t);e((o<<31|a/4294967296)>>>0,i,s+r)}else{var c=Math.floor(Math.log(n)/Math.LN2);if(c===1024)c=1023;a=n*Math.pow(2,-c);e(a*4503599627370496>>>0,i,s+t);e((o<<31|c+1023<<20|a*1048576&1048575)>>>0,i,s+r)}}}e.writeDoubleLE=writeDouble_ieee754.bind(null,writeUintLE,0,4);e.writeDoubleBE=writeDouble_ieee754.bind(null,writeUintBE,4,0);function readDouble_ieee754(e,t,r,n,i){var s=e(n,i+t),o=e(n,i+r);var a=(o>>31)*2+1,c=o>>>20&2047,u=4294967296*(o&1048575)+s;return c===2047?u?NaN:a*Infinity:c===0?a*5e-324*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.readDoubleLE=readDouble_ieee754.bind(null,readUintLE,0,4);e.readDoubleBE=readDouble_ieee754.bind(null,readUintBE,4,0)})();return e}function writeUintLE(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24;t[r+1]=e>>>16&255;t[r+2]=e>>>8&255;t[r+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}},148:module=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},26660:(e,t)=>{"use strict";var r=t;var n=r.isAbsolute=function isAbsolute(e){return/^(?:\/|\w+:)/.test(e)};var i=r.normalize=function normalize(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var t=e.split("/"),r=n(e),i="";if(r)i=t.shift()+"/";for(var s=0;s<t.length;){if(t[s]===".."){if(s>0&&t[s-1]!=="..")t.splice(--s,2);else if(r)t.splice(s,1);else++s}else if(t[s]===".")t.splice(s,1);else++s}return i+t.join("/")};r.resolve=function resolve(e,t,r){if(!r)t=i(t);if(n(t))return t;if(!r)e=i(e);return(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t}},76084:e=>{"use strict";e.exports=pool;function pool(e,t,r){var n=r||8192;var i=n>>>1;var s=null;var o=n;return function pool_alloc(r){if(r<1||r>i)return e(r);if(o+r>n){s=e(n);o=0}var a=t.call(s,o,o+=r);if(o&7)o=(o|7)+1;return a}}},21697:(e,t)=>{"use strict";var r=t;r.length=function utf8_length(e){var t=0,r=0;for(var n=0;n<e.length;++n){r=e.charCodeAt(n);if(r<128)t+=1;else if(r<2048)t+=2;else if((r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320){++n;t+=4}else t+=3}return t};r.read=function utf8_read(e,t,r){var n=r-t;if(n<1)return"";var i=null,s=[],o=0,a;while(t<r){a=e[t++];if(a<128)s[o++]=a;else if(a>191&&a<224)s[o++]=(a&31)<<6|e[t++]&63;else if(a>239&&a<365){a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536;s[o++]=55296+(a>>10);s[o++]=56320+(a&1023)}else s[o++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63;if(o>8191){(i||(i=[])).push(String.fromCharCode.apply(String,s));o=0}}if(i){if(o)i.push(String.fromCharCode.apply(String,s.slice(0,o)));return i.join("")}return String.fromCharCode.apply(String,s.slice(0,o))};r.write=function utf8_write(e,t,r){var n=r,i,s;for(var o=0;o<e.length;++o){i=e.charCodeAt(o);if(i<128){t[r++]=i}else if(i<2048){t[r++]=i>>6|192;t[r++]=i&63|128}else if((i&64512)===55296&&((s=e.charCodeAt(o+1))&64512)===56320){i=65536+((i&1023)<<10)+(s&1023);++o;t[r++]=i>>18|240;t[r++]=i>>12&63|128;t[r++]=i>>6&63|128;t[r++]=i&63|128}else{t[r++]=i>>12|224;t[r++]=i>>6&63|128;t[r++]=i&63|128}}return r-n}},39055:(e,t,r)=>{"use strict";const n=r(25280);const i=r(90316);const s=r(3753);const o=r(28904);const a=r(92229);const c=r(92806);const u=r(42316);const d=r(10064);const p=r(10228);const{encode:m}=r(35493);const{decode:y}=r(45826);const{encodingLength:g}=r(78278);const b=r(78418);const v=r(5763);const w={array:i,bool:o,buffer:s,reserved:a,string:c,when:d,select:p};for(const e of Object.keys(u)){w[e]=u[e]}const _=Symbol("schema");function createEncodeStream(e){const t=new n({readableObjectMode:false,writableObjectMode:true,transform:transformEncode});t[_]=e;return t}function createDecodeStream(e){let t=null;const r=Buffer.isBuffer(e);if(!r){t=e}const i=new n({transform:transformDecode,readableObjectMode:true,writableObjectMode:false});i[_]=t;if(r){i.append(e)}return i}function transformEncode(e,t,r){try{m(e,this[_],this);const t=this.slice();this.consume(t.length);r(null,t)}catch(e){r(e)}}function transformDecode(e,t,r){this.append(e);try{while(this.length>0){const e=new b(this);const t=y(e,this[_]);e.commit();this.push(t)}r()}catch(e){if(e instanceof v){r()}else{r(e)}}}e.exports={createEncodeStream:createEncodeStream,createDecodeStream:createDecodeStream,encode:m,decode:y,encodingLength:g,createEncode:createEncodeStream,createDecode:createDecodeStream,types:w,BinaryStream:n,NotEnoughDataError:v}},75032:(e,t,r)=>{"use strict";const n=r(37151);const i=r(64292);class BufferList{constructor(){this.queue=new i;this.offset=0}get length(){return this.queue.length-this.offset}append(e){if(Buffer.isBuffer(e)){if(this.offset>0){const e=this.queue.shift();this.queue.unshift(e.slice(this.offset));this.offset=0}this.queue.push(e)}else if(Array.isArray(e)){for(let t=0;t<e.length;t+=1){this.append(e[t])}}else if(e instanceof BufferList){if(this.offset>0){const e=this.queue.shift();this.queue.unshift(e.slice(this.offset));this.offset=0}if(e.offset>0){const t=e.queue.shift();e.queue.unshift(t.slice(e.offset));e.offset=0}let t=e.queue.head;while(t){this.queue.push(t.buffer);t=t.next}}}get(e){let t=e;while(t>=this.length){t-=this.length}while(t<0){t+=this.length}let r=this.queue.head;let{offset:n}=this;while(r){if(r.buffer.length-n>t){return r.buffer[t+n]}t-=r.buffer.length-n;n=0;r=r.next}}slice(e,t){if(typeof e!=="number"){e=0}if(typeof t!=="number"){t=this.length}while(e<0){e+=this.length}while(t<0){t+=this.length}t=Math.min(t,this.length);if(e>=this.length||t===0){return Buffer.alloc(0)}const r=e;e=Math.min(r,t);t=Math.max(r,t);const n=this.queue.slice(e+this.offset,t+this.offset);if(n.count===1){return n.first}let i=n.head;const s=Buffer.allocUnsafe(n.length);let o=0;for(let e=0;e<n.count;e+=1){s.set(i.buffer,o);o+=i.buffer.length;i=i.next}return s}toString(e,t,r){return this.slice(t,r).toString(e)}consume(e){let t=e;while(this.length>0){const e=this.queue.first.length-this.offset;if(t>=e){this.queue.shift();t-=e;this.offset=0}else{this.offset+=t;break}}}indexOf(e,t=0){if(!Number.isInteger(e)){throw new TypeError("Invalid argument 1")}if(e<0||e>255){throw new Error("Invalid argument 1")}if(!Number.isInteger(t)){t=0}while(t>=this.length){t-=this.length}while(t<0){t+=this.length}let r=this.queue.head;let n=0;const next=()=>{n+=r.buffer.length;r=r.next};while(r){let i=0;if(r===this.queue.head){i+=this.offset}if(t>=r.buffer.length-i){t-=r.buffer.length-i;next();continue}if(t<r.buffer.length){i+=t}const s=r.buffer.indexOf(e,i);if(s>-1){return s+n-this.offset}next();if(i>this.offset){t=0}}return-1}}const s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};Object.keys(s).forEach((e=>{const t=n();t(`\n    function bufferlist_${e}(offset = 0) {\n      const start = offset + this.offset;\n      const head = this.queue.first;\n      const size = ${t.formats.d(s[e])};\n      const isFirtsChunkEnough = head.length - start >= size;\n\n      return isFirtsChunkEnough\n        ? head.${e}(start)\n        : this.slice(offset, offset + size).${e}(0)\n    }\n  `);BufferList.prototype[e]=t.toFunction()}));const o=["readIntBE","readIntLE","readUIntBE","readUIntLE"];o.forEach((e=>{const t=n();t(`\n    function bufferlist_${e}(size, offset = 0) {\n      const start = offset + this.offset;\n      const head = this.queue.first;\n      const isFirtsChunkEnough = head.length - start >= size;\n\n      return isFirtsChunkEnough\n        ? head.${e}(start, size)\n        : this.slice(offset, offset + size).${e}(0, size)\n    }\n  `);BufferList.prototype[e]=t.toFunction()}));const a={writeDoubleBE:8,writeDoubleLE:8,writeFloatBE:4,writeFloatLE:4,writeInt32BE:4,writeInt32LE:4,writeUInt32BE:4,writeUInt32LE:4,writeInt16BE:2,writeInt16LE:2,writeUInt16BE:2,writeUInt16LE:2,writeInt8:1,writeUInt8:1};Object.keys(a).forEach((e=>{const t=n();t(`\n    function bufferlist_${e}(value) {\n      const size = ${t.formats.d(a[e])};\n      const buf = Buffer.allocUnsafe(size);\n      buf.${e}(value, 0);\n      this.append(buf);\n    }\n  `);BufferList.prototype[e]=t.toFunction()}));const c=["writeIntBE","writeIntLE","writeUIntBE","writeUIntLE"];c.forEach((e=>{const t=n();t(`\n    function bufferlist_${e}(value, size) {\n      const buf = Buffer.allocUnsafe(size);\n      buf.${e}(value, 0, size);\n      this.append(buf);\n    }\n  `);BufferList.prototype[e]=t.toFunction()}));e.exports=BufferList},64292:e=>{"use strict";class Chunk{constructor(){this.next=null;this.buffer=null}}e.exports=class LinkedList{constructor(){this.head=null;this.tail=null;this.length=0;this.count=0}push(e){const t=new Chunk;t.buffer=e;if(this.length>0){this.tail.next=t}else{this.head=t}this.tail=t;this.length+=e.length;this.count+=1}unshift(e){const t=new Chunk;t.buffer=e;t.next=this.head;if(this.isEmpty()){this.tail=t}this.head=t;this.length+=e.length;this.count+=1}shift(){if(this.isEmpty()){return null}const e=this.head.buffer;if(this.head===this.tail){this.head=null;this.tail=null}else{this.head=this.head.next}this.length-=e.length;this.length=Math.max(this.length,0);this.count-=1;return e}get first(){if(this.isEmpty()){return null}return this.head.buffer}get last(){if(this.isEmpty()){return null}return this.tail.buffer}isEmpty(){return this.length===0}clear(){this.head=null;this.tail=null;this.length=0;this.count=0}slice(e,t){if(e<0||e>=this.length){return new LinkedList}if(t<0||t>this.length||t<e){return new LinkedList}const r=new LinkedList;let n=this.head;let i=e;let s=t;while(n){if(n.buffer.length>i){if(i===0&&n.buffer.length<=s){r.push(n.buffer)}else if(n.buffer.length>=s){r.push(n.buffer.slice(i,s))}else{r.push(n.buffer.slice(i))}break}i-=n.buffer.length;s-=n.buffer.length;n=n.next}if(n.buffer.length<s){while(n){if(n.buffer.length===s){r.push(n.buffer);break}else if(n.buffer.length>s){r.push(n.buffer.slice(0,s));break}else if(i<0&&n.buffer.length<s){r.push(n.buffer)}i-=n.buffer.length;s-=n.buffer.length;n=n.next}}return r}}},64706:(e,t,r)=>{"use strict";const n=r(88843);e.exports=class Metadata{constructor(){this[n.bytes]=0;this.node=undefined;this.current=undefined}get bytes(){return this[n.bytes]}static clone(e){const t=new Metadata;if(e instanceof Metadata){t.node=e.node;t.current=e.current}return t}static clean(e){if(e instanceof Metadata){e.node=undefined;e.current=undefined}}}},88843:e=>{"use strict";const t=Symbol("skip");const r=Symbol("bytes");e.exports={skip:t,bytes:r}},25280:(e,t,r)=>{"use strict";const{Transform:n}=r(68265);const i=r(37151);const s=r(75032);const o=r(5763);const a=Symbol("buffer");class BinaryStream extends n{constructor(e={}){super(e);this[a]=new s}get buffer(){return this[a]}get length(){return this.buffer.length}append(e){this.buffer.append(e)}get(e){return this.buffer.get(e)}slice(e,t){return this.buffer.slice(e,t)}consume(e){this.buffer.consume(e)}toString(e,t,r){return this.buffer.toString(e,t,r)}indexOf(e,t=0){return this.buffer.indexOf(e,t)}readBuffer(e){assertSize(e,this.length);const t=this.slice(0,e);this.consume(e);return t}writeBuffer(e){this.append(e)}}const c={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};const u=["readIntBE","readIntLE","readUIntBE","readUIntLE"];Object.keys(c).forEach((e=>{const t=i();t(`\n    function binary_${e}() {\n      const bytes = ${t.formats.d(c[e])};\n      assertSize(bytes, this.length);\n\n      const res = this.buffer.${e}(0);\n      this.consume(bytes);\n\n      return res;\n    }\n  `);BinaryStream.prototype[e]=t.toFunction({assertSize:assertSize})}));u.forEach((e=>{const t=i();t(`\n    function binary_${e}(size) {\n      assertSize(size, this.length);\n\n      const res = this.buffer.${e}(size, 0);\n      this.consume(size);\n      return res;\n    }\n  `);BinaryStream.prototype[e]=t.toFunction({assertSize:assertSize})}));const d=["writeDoubleBE","writeDoubleLE","writeFloatBE","writeFloatLE","writeInt32BE","writeInt32LE","writeUInt32BE","writeUInt32LE","writeInt16BE","writeInt16LE","writeUInt16BE","writeUInt16LE","writeInt8","writeUInt8"];d.forEach((e=>{const t=i();t(`\n    function binary_${e}(value) {\n      this.buffer.${e}(value);\n    }\n  `);BinaryStream.prototype[e]=t.toFunction()}));const p=["writeIntBE","writeIntLE","writeUIntBE","writeUIntLE"];p.forEach((e=>{const t=i();t(`\n    function binary_${e}(value, size) {\n      this.buffer.${e}(value, size);\n    }\n  `);BinaryStream.prototype[e]=t.toFunction()}));function assertSize(e,t){if(e>t){throw new o(e,t)}}e.exports=BinaryStream},45826:(e,t,r)=>{"use strict";const{isType:n,isUserType:i,isDecodeType:s}=r(99092);const o=r(25280);const a=r(88843);const c=r(64706);e.exports={decode:decode,decodeCommon:decodeCommon};function decode(e,t){let r=e;if(Buffer.isBuffer(e)){r=new o;r.append(e)}const n=new c;const i=decodeCommon(r,t,n);decode.bytes=n.bytes;c.clean(n);return i}function decodeCommon(e,t,r){if(n(t)){const n=t.decode.call(r,e);r[a.bytes]+=t.decode.bytes;return n}return decodeSchema(e,t,r)}function decodeSchema(e,t,r){assertSchema(t);const n=Object.create(null);if(r.node===undefined){r.node=n;r.current=n}else{r.current=n}const i=Object.keys(t);for(let o=0;o<i.length;o+=1){const c=i[o];const u=t[c];if(!s(u)){n[c]=decodeSchema(e,u,r);r.current=n;continue}const d=u.decode.call(r,e);r[a.bytes]+=u.decode.bytes;if(u[a.skip]===true){continue}n[c]=d}return n}function assertSchema(e){if(!i(e)){throw new TypeError("Argument #2 should be a plain object.")}}},35493:(e,t,r)=>{"use strict";const{isUserType:n,isEncodeType:i,isType:s}=r(99092);const o=r(88843);const a=r(64706);const c=r(25280);e.exports={encode:encode,encodeCommon:encodeCommon};function encode(e,t,r){const n=new a;if(t instanceof c){const e=r;r=t;t=e}if(!(r instanceof c)){r=new c}encodeCommon(e,r,t,n);encode.bytes=n.bytes;a.clean(n);return r}function encodeCommon(e,t,r,n){if(s(r)){r.encode.call(n,e,t);n[o.bytes]+=r.encode.bytes}else{encodeSchema(e,t,r,n)}}function encodeSchema(e,t,r,n){assertSchema(r);if(n.node===undefined){n.node=e;n.current=e}else{n.current=e}const s=Object.keys(r);for(let a=0;a<s.length;a+=1){const c=s[a];const u=r[c];const d=e[c];if(!i(u)){encodeSchema(d,t,u,n);n.current=e;continue}u.encode.call(n,d,t);n[o.bytes]+=u.encode.bytes}}function assertSchema(e){if(!n(e)){throw new TypeError("Argument `schema` should be a plain object.")}}},78278:(e,t,r)=>{"use strict";const{isUserType:n,isType:i}=r(99092);const s=r(64706);const o=r(88843);e.exports={encodingLength:encodingLength,encodingLengthCommon:encodingLengthCommon};function encodingLength(e,t){const r=new s;encodingLengthCommon(e,t,r);s.clean(r);return r.bytes}function encodingLengthCommon(e,t,r){if(i(t)){r[o.bytes]+=t.encodingLength.call(r,e)}else{encodingLengthSchema(e,t,r)}}function encodingLengthSchema(e,t,r){if(!n(t)){throw new TypeError("Argument `schema` should be a plain object.")}if(r.node===undefined){r.node=e;r.current=e}else{r.current=e}const s=Object.keys(t);for(let n=0;n<s.length;n+=1){const a=s[n];const c=t[a];const u=e[a];if(!i(c)){encodingLengthSchema(u,c,r);r.current=e;continue}r[o.bytes]+=c.encodingLength.call(r,u)}}},5763:e=>{"use strict";e.exports=class NotEnoughDataError extends Error{constructor(e,t){const r=`requested ${e} bytes but only ${t} available`;super(r);this.name="NotEnoughDataError"}}},78418:(e,t,r)=>{"use strict";const n=r(37151);const i=r(5763);class Transaction{constructor(e){this.stream=e;this.index=0}append(e){this.stream.append(e)}commit(){this.stream.consume(this.index)}get(e=0){return this.stream.get(this.index+e)}get length(){return this.stream.length}slice(e,t){return this.stream.slice(e,t)}toString(e,t,r){return this.stream.toString(e,t,r)}readBuffer(e){assertSize(this.index+e,this.length);const t=this.stream.slice(this.index,this.index+e);this.index+=e;return t}indexOf(e,t=0){return this.stream.indexOf(e,this.index+t)-this.index}}const s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};Object.keys(s).forEach((e=>{const t=n();const r=s[e];t(`\n    function transaction_${e}() {\n      assertSize(this.index + ${t.formats.d(r)}, this.length);\n      const value = this.stream.buffer.${e}(this.index);\n      this.index += ${t.formats.d(r)};\n      return value;\n    }\n  `);Transaction.prototype[e]=t.toFunction({assertSize:assertSize})}));["readIntBE","readIntLE","readUIntBE","readUIntLE"].forEach((e=>{const t=n();t(`\n    function transaction_${e}(bytes) {\n      assertSize(this.index + bytes, this.length);\n      const value = this.stream.buffer.${e}(bytes, this.index);\n      this.index += bytes;\n      return value;\n    }\n  `);Transaction.prototype[e]=t.toFunction({assertSize:assertSize})}));e.exports=Transaction;function assertSize(e,t){if(e>t){throw new i(e,t)}}},99092:(e,t,r)=>{"use strict";const n=r(89682);e.exports={isType:isType,isUserType:n,isFunction:isFunction,isDecodeType:isDecodeType,isEncodeType:isEncodeType};function isType(e){return isObject(e)&&isFunction(e.encode)&&isFunction(e.decode)}function isFunction(e){return typeof e==="function"}function isObject(e){return typeof e==="object"&&e!==null}function isDecodeType(e){return isObject(e)&&isFunction(e.decode)}function isEncodeType(e){return isObject(e)&&isFunction(e.encode)}},90316:(e,t,r)=>{"use strict";const{decodeCommon:n}=r(45826);const{encodeCommon:i}=r(35493);const{encodingLengthCommon:s}=r(78278);const{isType:o,isUserType:a,isFunction:c}=r(99092);const u=r(64706);e.exports=array;function array(e,t,r="count"){if(!o(e)&&!a(e)){throw new TypeError("Argument #1 should be a valid type.")}const n=r==="bytes";const d=typeof t==="number";const p=o(t);const m=c(t);if(!d&&!p&&!m){throw new TypeError("Unknown type of argument #1.")}return{encode:encode,decode:decode,encodingLength:encodingLength};function encode(r,o){checkArray(r);const a=u.clone(this);encode.bytes=0;let c=0;if(p){c=r.length}else if(d){c=t}else if(m){c=t(a);checkArraySizeType(c)}if(!n){checkArraySize(c,r.length)}if(n){const t=u.clone(a);for(const n of r){s(n,e,t)}if(p){c=t.bytes}checkArraySize(t.bytes,c);u.clean(t)}if(p){t.encode.call(a,c,o);encode.bytes+=t.encode.bytes}r.forEach((t=>{i(t,o,e,a)}));encode.bytes+=a.bytes;u.clean(a)}function decode(r){let i=0;decode.bytes=0;const s=u.clone(this);if(d){i=t}else if(p){i=t.decode.call(s,r);decode.bytes+=t.decode.bytes}else if(m){i=t(s)}checkArraySizeType(i);let o;if(n){o=decodeBytes(e,i,r,s)}else{o=decodeCount(e,i,r,s)}decode.bytes+=s.bytes;u.clean(s);return o}function encodingLength(r){checkArray(r);const i=u.clone(this);let o=0;if(d&&n){return t}if(p&&!n){o=t.encodingLength(r.length)}for(const t of r){s(t,e,i)}u.clean(i);o+=i.bytes;if(p&&n){o+=t.encodingLength(o)}return o}}function checkArray(e){if(!Array.isArray(e)){throw new TypeError("Argument #1 should be an Array.")}}function checkArraySizeType(e){if(typeof e!=="number"){throw new TypeError("Length of an array should be a number.")}}function checkArraySize(e,t){if(e!==t){throw new Error(`Argument #1 required length ${e} instead of ${t}`)}}function decodeBytes(e,t,r,i){const s=[];const o=i.bytes;let a=0;while(a<t){s.push(n(r,e,i));a=i.bytes-o}if(a>t){throw new Error("Incorrect length of an array.")}return s}function decodeCount(e,t,r,i){const s=new Array(t);for(let o=0;o<t;o+=1){s[o]=n(r,e,i)}return s}},28904:(e,t,r)=>{"use strict";const{isType:n}=r(99092);e.exports=bool;function bool(e){if(!n(e)){throw new TypeError("Argument #1 should be valid type.")}function decode(t){const r=this;const n=e.decode.call(r,t);decode.bytes=e.decode.bytes;return Boolean(n)}function encode(t,r){const n=this;e.encode.call(n,t?1:0,r);encode.bytes=e.encode.bytes}return{encode:encode,decode:decode,encodingLength:e.encodingLength}}},3753:(e,t,r)=>{"use strict";const{isType:n,isFunction:i}=r(99092);const s=r(5763);const o=r(25280);e.exports=buffer;function buffer(e){const t=typeof e==="number";const r=n(e);const o=i(e);const a=e===null;if(!t&&!r&&!o&&!a){throw new TypeError("Unknown type of argument #1.")}return{encode:encode,decode:decode,encodingLength:encodingLength};function encode(n,i){checkBuffer(n);encode.bytes=0;const s=this;if(t){checkLength(e,n.length)}if(r){e.encode.call(s,n.length,i);encode.bytes+=e.encode.bytes}if(o){const t=e(s);checkLengthType(t);checkLength(t,n.length)}i.writeBuffer(Buffer.isBuffer(n)?n:n.buffer);encode.bytes+=n.length;if(a){i.writeUInt8(0);encode.bytes+=1}}function decode(n){let i=0;decode.bytes=0;const c=this;if(t){i=e}else if(r){i=e.decode.call(c,n);decode.bytes+=e.decode.bytes;checkLengthType(i)}else if(o){i=e(c);checkLengthType(i)}else if(a){i=n.indexOf(0);if(i===-1){throw new s(n.length+1,n.length)}}const u=n.readBuffer(i);decode.bytes+=i;if(a){decode.bytes+=1;n.consume(1)}return u}function encodingLength(n){checkBuffer(n);let i=0;if(t){return e}if(a){i=1}else if(r){i=e.encodingLength(n.length)}return i+n.length}}function checkBuffer(e){if(!Buffer.isBuffer(e)&&!(e instanceof o)){throw new TypeError("Argument 1 should be a Buffer or a BinaryStream.")}}function checkLength(e,t){if(e!==t){throw new Error(`Buffer required length ${e} instead of ${t}`)}}function checkLengthType(e){if(typeof e!=="number"){throw new TypeError("Length of a buffer should be a number.")}}},42316:(e,t,r)=>{"use strict";const n=r(37151);e.exports={doublebe:createFastStub(8,"writeDoubleBE","readDoubleBE"),doublele:createFastStub(8,"writeDoubleLE","readDoubleLE"),floatbe:createFastStub(4,"writeFloatBE","readFloatBE"),floatle:createFastStub(4,"writeFloatLE","readFloatLE"),int8:createFastStub(1,"writeInt8","readInt8"),uint8:createFastStub(1,"writeUInt8","readUInt8"),int16be:createFastStub(2,"writeInt16BE","readInt16BE"),uint16be:createFastStub(2,"writeUInt16BE","readUInt16BE"),int16le:createFastStub(2,"writeInt16LE","readInt16LE"),uint16le:createFastStub(2,"writeUInt16LE","readUInt16LE"),int32be:createFastStub(4,"writeInt32BE","readInt32BE"),uint32be:createFastStub(4,"writeUInt32BE","readUInt32BE"),int32le:createFastStub(4,"writeInt32LE","readInt32LE"),uint32le:createFastStub(4,"writeUInt32LE","readUInt32LE"),int24be:createFastStubGeneric(3,"writeIntBE","readIntBE"),uint24be:createFastStubGeneric(3,"writeUIntBE","readUIntBE"),int24le:createFastStubGeneric(3,"writeIntLE","readIntLE"),uint24le:createFastStubGeneric(3,"writeUIntLE","readUIntLE"),int40be:createFastStubGeneric(5,"writeIntBE","readIntBE"),uint40be:createFastStubGeneric(5,"writeUIntBE","readUIntBE"),int40le:createFastStubGeneric(5,"writeIntLE","readIntLE"),uint40le:createFastStubGeneric(5,"writeUIntLE","readUIntLE"),int48be:createFastStubGeneric(6,"writeIntBE","readIntBE"),uint48be:createFastStubGeneric(6,"writeUIntBE","readUIntBE"),int48le:createFastStubGeneric(6,"writeIntLE","readIntLE"),uint48le:createFastStubGeneric(6,"writeUIntLE","readUIntLE")};function createFastStub(e,t,r){const i=n();const s=n();i(`\n    function decode_${r}(rstream) {\n      decode_${r}.bytes = ${i.formats.d(e)};\n      return rstream.${r}()\n    }\n  `);s(`\n    function encode_${t}(value, wstream) {\n      wstream.${t}(value);\n      encode_${t}.bytes = ${i.formats.d(e)};\n    }\n  `);return{encodingLength:()=>e,encode:s.toFunction(),decode:i.toFunction()}}function createFastStubGeneric(e,t,r){const i=n();const s=n();i(`\n    function decode_${r}(rstream) {\n      decode_${r}.bytes = ${i.formats.d(e)};\n      return rstream.${r}(${i.formats.d(e)})\n    }\n  `);s(`\n    function encode_${t}(value, wstream) {\n      wstream.${t}(value, ${i.formats.d(e)});\n      encode_${t}.bytes = ${i.formats.d(e)};\n    }\n  `);return{encodingLength:()=>e,encode:s.toFunction(),decode:i.toFunction()}}},92229:(e,t,r)=>{"use strict";const{decodeCommon:n}=r(45826);const{encodeCommon:i}=r(35493);const{encodingLengthCommon:s}=r(78278);const{isType:o,isFunction:a}=r(99092);const c=r(88843);const u=r(64706);e.exports=reserved;function reserved(e,t=1){if(!o(e)){throw new TypeError("Invalid data type.")}if(!Number.isInteger(t)&&!a(t)){throw new TypeError("Argument #2 should be a valid integer or function.")}return{[c.skip]:true,encodingLength:encodingLength,decode:decode,encode:encode};function encodingLength(r){const n=u.clone(this);const i=a(t)?t(n):t;s(r,e,n);u.clean(n);return n.bytes*i}function decode(r){const i=u.clone(this);decode.bytes=0;const s=a(t)?t(i):t;if(s===0){u.clean(i);return}for(let t=s;t>0;t-=1){n(r,e,i)}decode.bytes=i.bytes;u.clean(i)}function encode(r,n){encode.bytes=0;const s=u.clone(this);const o=a(t)?t(s):t;if(o===0){u.clean(s);return}for(let t=o;t>0;t-=1){i(0,n,e,s)}encode.bytes=s.bytes;u.clean(s)}}},10228:(e,t,r)=>{"use strict";const n=r(88843);const{decodeCommon:i}=r(45826);const s=r(64706);e.exports=select;function select(...e){if(e.length===0){throw new TypeError("You should set at least one condition type.")}const t={decode:decode,encode:()=>{},[n.skip]:true};return t;function decode(r){decode.bytes=0;const o=s.clone(this);for(const a of e){const e=i(r,a,o);if(a[n.skip]===true){continue}decode.bytes=o.bytes;s.clean(o);t[n.skip]=false;return e}t[n.skip]=true}}},92806:(e,t,r)=>{"use strict";const{isType:n}=r(99092);const i=r(5763);e.exports=string;function string(e,t="ascii"){if(!Buffer.isEncoding(t)){throw new Error("Argument #2 should be an encoding name.")}if(typeof e==="number"){return{encode:encodeFixedString(e,t),decode:decodeFixedString(e,t),encodingLength:()=>e}}if(n(e)){return{encode:encodeSizePrefixedString(e,t),decode:decodeSizePrefixedString(e,t),encodingLength:encodingLengthSizePrefixedString(e,t)}}if(e===null){return{encode:encodeNullString(t),decode:decodeNullString(t),encodingLength(e){return Buffer.byteLength(e,t)+1}}}if(typeof e==="function"){return{encode:encodeCallback(e,t),decode:decodeCallback(e,t),encodingLength(e){return Buffer.byteLength(e,t)}}}throw new TypeError("Unknown type of argument #1.")}function encodeNullString(e){return function encode(t,r){const n=Buffer.from(t.toString(),e);r.writeBuffer(n);r.writeInt8(0);encode.bytes=n.length+1}}function decodeNullString(e){return function decode(t){const r=t.indexOf(0);if(r===-1){throw new i(t.length+1,t.length)}const n=r+1;const s=t.readBuffer(n);decode.bytes=n;return s.toString(e,0,r)}}function encodeFixedString(e,t){return function encode(r,n){r=r.toString();if(Buffer.byteLength(r,t)!==e){throw new Error(`Size of string should be ${e} in bytes.`)}const i=Buffer.from(r,t);n.writeBuffer(i);encode.bytes=i.length}}function decodeFixedString(e,t){return function decode(r){const n=r.readBuffer(e);decode.bytes=e;return n.toString(t)}}function encodeSizePrefixedString(e,t){return function encode(r,n){r=r.toString();const i=this;e.encode.call(i,Buffer.byteLength(r,t),n);encode.bytes=e.encode.bytes;const s=Buffer.from(r,t);n.writeBuffer(s);encode.bytes+=s.length}}function decodeSizePrefixedString(e,t){return function decode(r){const n=e.decode.call(this,r);if(typeof n!=="number"){throw new TypeError("Size of a string should be a number.")}const i=r.readBuffer(n);decode.bytes=e.decode.bytes+i.length;return i.toString(t)}}function encodingLengthSizePrefixedString(e,t){return function encodingLength(r){const n=Buffer.byteLength(r,t);return e.encodingLength(n)+n}}function encodeCallback(e,t){return function encode(r,n){encode.bytes=0;const i=this;const s=e(i);const o=Buffer.from(r.toString(),t);checkLengthType(s);checkLength(s,o.length);n.writeBuffer(o);encode.bytes+=o.length}}function decodeCallback(e,t){return function decode(r){const n=e(this);checkLengthType(n);const i=r.readBuffer(n);decode.bytes=n;return i.toString(t)}}function checkLengthType(e){if(typeof e!=="number"){throw new TypeError("Length of a buffer should be a number.")}}function checkLength(e,t){if(e!==t){throw new Error(`Buffer required length ${e} instead of ${t}`)}}},10064:(e,t,r)=>{"use strict";const{isType:n,isFunction:i,isUserType:s}=r(99092);const o=r(88843);const{decodeCommon:a}=r(45826);const{encodeCommon:c}=r(35493);const{encodingLengthCommon:u}=r(78278);const d=r(64706);e.exports=when;function when(e,t){if(!n(t)&&!s(t)){throw new TypeError("Argument #2 should be a valid type.")}const r={encode:encode,decode:decode,encodingLength:encodingLength,[o.skip]:false};return r;function encode(n,s){const a=d.clone(this);encode.bytes=0;const u=i(e)?Boolean(e(a)):Boolean(e);r[o.skip]=!u;if(!u){d.clean(a);return}c(n,s,t,a);encode.bytes=a.bytes;d.clean(a)}function decode(n){const s=d.clone(this);decode.bytes=0;const c=i(e)?Boolean(e(s)):Boolean(e);r[o.skip]=!c;if(!c){d.clean(s);return}const u=a(n,t,s);decode.bytes=s.bytes;d.clean(s);return u}function encodingLength(r){const n=d.clone(this);const s=i(e)?Boolean(e(n)):Boolean(e);if(s){u(r,t,n)}d.clean(n);return n.bytes}}},48775:(e,t)=>{function JSPack(){var e;var t=false;var r=this;r._DeArray=function(e,t,r){return[e.slice(t,t+r)]};r._EnArray=function(e,t,r,n){for(var i=0;i<r;e[t+i]=n[i]?n[i]:0,i++){}};r._DeChar=function(e,t){return String.fromCharCode(e[t])};r._EnChar=function(e,t,r){e[t]=r.charCodeAt(0)};r._DeInt=function(r,n){var i=t?e.len-1:0;var s=t?-1:1;var o=i+s*e.len;var a,c,u;for(a=0,c=i,u=1;c!=o;a+=r[n+c]*u,c+=s,u*=256){}if(e.bSigned&&a&Math.pow(2,e.len*8-1)){a-=Math.pow(2,e.len*8)}return a};r._EnInt=function(r,n,i){var s=t?e.len-1:0;var o=t?-1:1;var a=s+o*e.len;var c;i=i<e.min?e.min:i>e.max?e.max:i;for(c=s;c!=a;r[n+c]=i&255,c+=o,i>>=8){}};r._DeString=function(e,t,r){for(var n=new Array(r),i=0;i<r;n[i]=String.fromCharCode(e[t+i]),i++){}return n.join("")};r._EnString=function(e,t,r,n){for(var i,s=0;s<r;e[t+s]=(i=n.charCodeAt(s))?i:0,s++){}};r._De754=function(r,n){var i,s,o,a,c,u,d,p,m,y;d=e.mLen,p=e.len*8-e.mLen-1,y=(1<<p)-1,m=y>>1;a=t?0:e.len-1;c=t?1:-1;i=r[n+a];a+=c;u=-7;for(s=i&(1<<-u)-1,i>>=-u,u+=p;u>0;s=s*256+r[n+a],a+=c,u-=8){}for(o=s&(1<<-u)-1,s>>=-u,u+=d;u>0;o=o*256+r[n+a],a+=c,u-=8){}switch(s){case 0:s=1-m;break;case y:return o?NaN:(i?-1:1)*Infinity;default:o=o+Math.pow(2,d);s=s-m;break}return(i?-1:1)*o*Math.pow(2,s-d)};r._En754=function(r,n,i){var s,o,a,c,u,d,p,m,y,g;p=e.mLen,m=e.len*8-e.mLen-1,g=(1<<m)-1,y=g>>1;s=i<0?1:0;i=Math.abs(i);if(isNaN(i)||i==Infinity){a=isNaN(i)?1:0;o=g}else{o=Math.floor(Math.log(i)/Math.LN2);if(i*(d=Math.pow(2,-o))<1){o--;d*=2}if(o+y>=1){i+=e.rt/d}else{i+=e.rt*Math.pow(2,1-y)}if(i*d>=2){o++;d/=2}if(o+y>=g){a=0;o=g}else if(o+y>=1){a=(i*d-1)*Math.pow(2,p);o=o+y}else{a=i*Math.pow(2,y-1)*Math.pow(2,p);o=0}}for(c=t?e.len-1:0,u=t?-1:1;p>=8;r[n+c]=a&255,c+=u,a/=256,p-=8){}for(o=o<<p|a,m+=p;m>0;r[n+c]=o&255,c+=u,o/=256,m-=8){}r[n+c-u]|=s*128};r._DeInt64=function(r,n){var i=t?0:7;var s=t?1:-1;var o=i+s*8;var a=[0,0,!e.bSigned];var c,u,d;for(c=i,d=1,u=0;c!=o;a[d]=(a[d]<<8>>>0)+r[n+c],c+=s,u++,d=u<4?1:0){}return a};r._EnInt64=function(e,r,n){var i=t?0:7;var s=t?1:-1;var o=i+s*8;var a,c,u,d;for(a=i,u=1,c=0,d=24;a!=o;e[r+a]=n[u]>>d&255,a+=s,c++,u=c<4?1:0,d=24-8*(c%4)){}};r._sPattern="(\\d + )?([AxcbBhHsfdiIlLqQ])";r._lenLut={A:1,x:1,c:1,b:1,B:1,h:2,H:2,s:1,f:4,d:8,i:4,I:4,l:4,L:4,q:8,Q:8};r._elLut={A:{en:r._EnArray,de:r._DeArray},s:{en:r._EnString,de:r._DeString},c:{en:r._EnChar,de:r._DeChar},b:{en:r._EnInt,de:r._DeInt,len:1,bSigned:true,min:-Math.pow(2,7),max:Math.pow(2,7)-1},B:{en:r._EnInt,de:r._DeInt,len:1,bSigned:false,min:0,max:Math.pow(2,8)-1},h:{en:r._EnInt,de:r._DeInt,len:2,bSigned:true,min:-Math.pow(2,15),max:Math.pow(2,15)-1},H:{en:r._EnInt,de:r._DeInt,len:2,bSigned:false,min:0,max:Math.pow(2,16)-1},i:{en:r._EnInt,de:r._DeInt,len:4,bSigned:true,min:-Math.pow(2,31),max:Math.pow(2,31)-1},I:{en:r._EnInt,de:r._DeInt,len:4,bSigned:false,min:0,max:Math.pow(2,32)-1},l:{en:r._EnInt,de:r._DeInt,len:4,bSigned:true,min:-Math.pow(2,31),max:Math.pow(2,31)-1},L:{en:r._EnInt,de:r._DeInt,len:4,bSigned:false,min:0,max:Math.pow(2,32)-1},f:{en:r._En754,de:r._De754,len:4,mLen:23,rt:Math.pow(2,-24)-Math.pow(2,-77)},d:{en:r._En754,de:r._De754,len:8,mLen:52,rt:0},q:{en:r._EnInt64,de:r._DeInt64,bSigned:true},Q:{en:r._EnInt64,de:r._DeInt64,bSigned:false}};r._UnpackSeries=function(t,r,n,i){for(var s=e.de,o=[],a=0;a<t;o.push(s(n,i+a*r)),a++){}return o};r._PackSeries=function(t,r,n,i,s,o){for(var a=e.en,c=0;c<t;a(n,i+c*r,s[o+c]),c++){}};r.Unpack=function(r,n,i){t=r.charAt(0)!="<";i=i?i:0;var s=new RegExp(this._sPattern,"g");var o,a,c;var u=[];while(o=s.exec(r)){a=o[1]==undefined||o[1]==""?1:parseInt(o[1]);c=this._lenLut[o[2]];if(i+a*c>n.length){return undefined}switch(o[2]){case"A":case"s":u.push(this._elLut[o[2]].de(n,i,a));break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":case"q":case"Q":e=this._elLut[o[2]];u.push(this._UnpackSeries(a,c,n,i));break}i+=a*c}return Array.prototype.concat.apply([],u)};r.PackTo=function(r,n,i,s){t=r.charAt(0)!="<";var o=new RegExp(this._sPattern,"g");var a,c,u,d;var p=0;while(a=o.exec(r)){c=a[1]==undefined||a[1]==""?1:parseInt(a[1]);u=this._lenLut[a[2]];if(i+c*u>n.length){return false}switch(a[2]){case"A":case"s":if(p+1>s.length){return false}this._elLut[a[2]].en(n,i,c,s[p]);p+=1;break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":case"q":case"Q":e=this._elLut[a[2]];if(p+c>s.length){return false}this._PackSeries(c,u,n,i,s,p);p+=c;break;case"x":for(d=0;d<c;d++){n[i+d]=0}break}i+=c*u}return n};r.Pack=function(e,t){return this.PackTo(e,new Array(this.CalcLength(e)),0,t)};r.CalcLength=function(e){var t=new RegExp(this._sPattern,"g");var r=0;var n;while(n=t.exec(e)){r+=(n[1]==undefined||n[1]==""?1:parseInt(n[1]))*this._lenLut[n[2]]}return r}}t.jspack=new JSPack},42786:function(e){
/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */
(function(t){"use strict";function checkInt(e){return parseInt(e)===e}function checkInts(e){if(!checkInt(e.length)){return false}for(var t=0;t<e.length;t++){if(!checkInt(e[t])||e[t]<0||e[t]>255){return false}}return true}function coerceArray(e,t){if(e.buffer&&e.name==="Uint8Array"){if(t){if(e.slice){e=e.slice()}else{e=Array.prototype.slice.call(e)}}return e}if(Array.isArray(e)){if(!checkInts(e)){throw new Error("Array contains invalid value: "+e)}return new Uint8Array(e)}if(checkInt(e.length)&&checkInts(e)){return new Uint8Array(e)}throw new Error("unsupported array-like object")}function createArray(e){return new Uint8Array(e)}function copyArray(e,t,r,n,i){if(n!=null||i!=null){if(e.slice){e=e.slice(n,i)}else{e=Array.prototype.slice.call(e,n,i)}}t.set(e,r)}var r=function(){function toBytes(e){var t=[],r=0;e=encodeURI(e);while(r<e.length){var n=e.charCodeAt(r++);if(n===37){t.push(parseInt(e.substr(r,2),16));r+=2}else{t.push(n)}}return coerceArray(t)}function fromBytes(e){var t=[],r=0;while(r<e.length){var n=e[r];if(n<128){t.push(String.fromCharCode(n));r++}else if(n>191&&n<224){t.push(String.fromCharCode((n&31)<<6|e[r+1]&63));r+=2}else{t.push(String.fromCharCode((n&15)<<12|(e[r+1]&63)<<6|e[r+2]&63));r+=3}}return t.join("")}return{toBytes:toBytes,fromBytes:fromBytes}}();var n=function(){function toBytes(e){var t=[];for(var r=0;r<e.length;r+=2){t.push(parseInt(e.substr(r,2),16))}return t}var e="0123456789abcdef";function fromBytes(t){var r=[];for(var n=0;n<t.length;n++){var i=t[n];r.push(e[(i&240)>>4]+e[i&15])}return r.join("")}return{toBytes:toBytes,fromBytes:fromBytes}}();var i={16:10,24:12,32:14};var s=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145];var o=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var a=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125];var c=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986];var u=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766];var d=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126];var p=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436];var m=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890];var y=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935];var g=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600];var b=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480];var v=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795];var w=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855];var _=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150];var C=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function convertToInt32(e){var t=[];for(var r=0;r<e.length;r+=4){t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])}return t}var AES=function(e){if(!(this instanceof AES)){throw Error("AES must be instanitated with `new`")}Object.defineProperty(this,"key",{value:coerceArray(e,true)});this._prepare()};AES.prototype._prepare=function(){var e=i[this.key.length];if(e==null){throw new Error("invalid key size (must be 16, 24 or 32 bytes)")}this._Ke=[];this._Kd=[];for(var t=0;t<=e;t++){this._Ke.push([0,0,0,0]);this._Kd.push([0,0,0,0])}var r=(e+1)*4;var n=this.key.length/4;var a=convertToInt32(this.key);var c;for(var t=0;t<n;t++){c=t>>2;this._Ke[c][t%4]=a[t];this._Kd[e-c][t%4]=a[t]}var u=0;var d=n,p;while(d<r){p=a[n-1];a[0]^=o[p>>16&255]<<24^o[p>>8&255]<<16^o[p&255]<<8^o[p>>24&255]^s[u]<<24;u+=1;if(n!=8){for(var t=1;t<n;t++){a[t]^=a[t-1]}}else{for(var t=1;t<n/2;t++){a[t]^=a[t-1]}p=a[n/2-1];a[n/2]^=o[p&255]^o[p>>8&255]<<8^o[p>>16&255]<<16^o[p>>24&255]<<24;for(var t=n/2+1;t<n;t++){a[t]^=a[t-1]}}var t=0,m,y;while(t<n&&d<r){m=d>>2;y=d%4;this._Ke[m][y]=a[t];this._Kd[e-m][y]=a[t++];d++}}for(var m=1;m<e;m++){for(var y=0;y<4;y++){p=this._Kd[m][y];this._Kd[m][y]=v[p>>24&255]^w[p>>16&255]^_[p>>8&255]^C[p&255]}}};AES.prototype.encrypt=function(e){if(e.length!=16){throw new Error("invalid plaintext size (must be 16 bytes)")}var t=this._Ke.length-1;var r=[0,0,0,0];var n=convertToInt32(e);for(var i=0;i<4;i++){n[i]^=this._Ke[0][i]}for(var s=1;s<t;s++){for(var i=0;i<4;i++){r[i]=c[n[i]>>24&255]^u[n[(i+1)%4]>>16&255]^d[n[(i+2)%4]>>8&255]^p[n[(i+3)%4]&255]^this._Ke[s][i]}n=r.slice()}var a=createArray(16),m;for(var i=0;i<4;i++){m=this._Ke[t][i];a[4*i]=(o[n[i]>>24&255]^m>>24)&255;a[4*i+1]=(o[n[(i+1)%4]>>16&255]^m>>16)&255;a[4*i+2]=(o[n[(i+2)%4]>>8&255]^m>>8)&255;a[4*i+3]=(o[n[(i+3)%4]&255]^m)&255}return a};AES.prototype.decrypt=function(e){if(e.length!=16){throw new Error("invalid ciphertext size (must be 16 bytes)")}var t=this._Kd.length-1;var r=[0,0,0,0];var n=convertToInt32(e);for(var i=0;i<4;i++){n[i]^=this._Kd[0][i]}for(var s=1;s<t;s++){for(var i=0;i<4;i++){r[i]=m[n[i]>>24&255]^y[n[(i+3)%4]>>16&255]^g[n[(i+2)%4]>>8&255]^b[n[(i+1)%4]&255]^this._Kd[s][i]}n=r.slice()}var o=createArray(16),c;for(var i=0;i<4;i++){c=this._Kd[t][i];o[4*i]=(a[n[i]>>24&255]^c>>24)&255;o[4*i+1]=(a[n[(i+3)%4]>>16&255]^c>>16)&255;o[4*i+2]=(a[n[(i+2)%4]>>8&255]^c>>8)&255;o[4*i+3]=(a[n[(i+1)%4]&255]^c)&255}return o};var ModeOfOperationECB=function(e){if(!(this instanceof ModeOfOperationECB)){throw Error("AES must be instanitated with `new`")}this.description="Electronic Code Block";this.name="ecb";this._aes=new AES(e)};ModeOfOperationECB.prototype.encrypt=function(e){e=coerceArray(e);if(e.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var t=createArray(e.length);var r=createArray(16);for(var n=0;n<e.length;n+=16){copyArray(e,r,0,n,n+16);r=this._aes.encrypt(r);copyArray(r,t,n)}return t};ModeOfOperationECB.prototype.decrypt=function(e){e=coerceArray(e);if(e.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var t=createArray(e.length);var r=createArray(16);for(var n=0;n<e.length;n+=16){copyArray(e,r,0,n,n+16);r=this._aes.decrypt(r);copyArray(r,t,n)}return t};var ModeOfOperationCBC=function(e,t){if(!(this instanceof ModeOfOperationCBC)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Block Chaining";this.name="cbc";if(!t){t=createArray(16)}else if(t.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastCipherblock=coerceArray(t,true);this._aes=new AES(e)};ModeOfOperationCBC.prototype.encrypt=function(e){e=coerceArray(e);if(e.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var t=createArray(e.length);var r=createArray(16);for(var n=0;n<e.length;n+=16){copyArray(e,r,0,n,n+16);for(var i=0;i<16;i++){r[i]^=this._lastCipherblock[i]}this._lastCipherblock=this._aes.encrypt(r);copyArray(this._lastCipherblock,t,n)}return t};ModeOfOperationCBC.prototype.decrypt=function(e){e=coerceArray(e);if(e.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var t=createArray(e.length);var r=createArray(16);for(var n=0;n<e.length;n+=16){copyArray(e,r,0,n,n+16);r=this._aes.decrypt(r);for(var i=0;i<16;i++){t[n+i]=r[i]^this._lastCipherblock[i]}copyArray(e,this._lastCipherblock,0,n,n+16)}return t};var ModeOfOperationCFB=function(e,t,r){if(!(this instanceof ModeOfOperationCFB)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Feedback";this.name="cfb";if(!t){t=createArray(16)}else if(t.length!=16){throw new Error("invalid initialation vector size (must be 16 size)")}if(!r){r=1}this.segmentSize=r;this._shiftRegister=coerceArray(t,true);this._aes=new AES(e)};ModeOfOperationCFB.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0){throw new Error("invalid plaintext size (must be segmentSize bytes)")}var t=coerceArray(e,true);var r;for(var n=0;n<t.length;n+=this.segmentSize){r=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++){t[n+i]^=r[i]}copyArray(this._shiftRegister,this._shiftRegister,0,this.segmentSize);copyArray(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t};ModeOfOperationCFB.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0){throw new Error("invalid ciphertext size (must be segmentSize bytes)")}var t=coerceArray(e,true);var r;for(var n=0;n<t.length;n+=this.segmentSize){r=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++){t[n+i]^=r[i]}copyArray(this._shiftRegister,this._shiftRegister,0,this.segmentSize);copyArray(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t};var ModeOfOperationOFB=function(e,t){if(!(this instanceof ModeOfOperationOFB)){throw Error("AES must be instanitated with `new`")}this.description="Output Feedback";this.name="ofb";if(!t){t=createArray(16)}else if(t.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastPrecipher=coerceArray(t,true);this._lastPrecipherIndex=16;this._aes=new AES(e)};ModeOfOperationOFB.prototype.encrypt=function(e){var t=coerceArray(e,true);for(var r=0;r<t.length;r++){if(this._lastPrecipherIndex===16){this._lastPrecipher=this._aes.encrypt(this._lastPrecipher);this._lastPrecipherIndex=0}t[r]^=this._lastPrecipher[this._lastPrecipherIndex++]}return t};ModeOfOperationOFB.prototype.decrypt=ModeOfOperationOFB.prototype.encrypt;var Counter=function(e){if(!(this instanceof Counter)){throw Error("Counter must be instanitated with `new`")}if(e!==0&&!e){e=1}if(typeof e==="number"){this._counter=createArray(16);this.setValue(e)}else{this.setBytes(e)}};Counter.prototype.setValue=function(e){if(typeof e!=="number"||parseInt(e)!=e){throw new Error("invalid counter value (must be an integer)")}if(e>Number.MAX_SAFE_INTEGER){throw new Error("integer value out of safe range")}for(var t=15;t>=0;--t){this._counter[t]=e%256;e=parseInt(e/256)}};Counter.prototype.setBytes=function(e){e=coerceArray(e,true);if(e.length!=16){throw new Error("invalid counter bytes size (must be 16 bytes)")}this._counter=e};Counter.prototype.increment=function(){for(var e=15;e>=0;e--){if(this._counter[e]===255){this._counter[e]=0}else{this._counter[e]++;break}}};var ModeOfOperationCTR=function(e,t){if(!(this instanceof ModeOfOperationCTR)){throw Error("AES must be instanitated with `new`")}this.description="Counter";this.name="ctr";if(!(t instanceof Counter)){t=new Counter(t)}this._counter=t;this._remainingCounter=null;this._remainingCounterIndex=16;this._aes=new AES(e)};ModeOfOperationCTR.prototype.encrypt=function(e){var t=coerceArray(e,true);for(var r=0;r<t.length;r++){if(this._remainingCounterIndex===16){this._remainingCounter=this._aes.encrypt(this._counter._counter);this._remainingCounterIndex=0;this._counter.increment()}t[r]^=this._remainingCounter[this._remainingCounterIndex++]}return t};ModeOfOperationCTR.prototype.decrypt=ModeOfOperationCTR.prototype.encrypt;function pkcs7pad(e){e=coerceArray(e,true);var t=16-e.length%16;var r=createArray(e.length+t);copyArray(e,r);for(var n=e.length;n<r.length;n++){r[n]=t}return r}function pkcs7strip(e){e=coerceArray(e,true);if(e.length<16){throw new Error("PKCS#7 invalid length")}var t=e[e.length-1];if(t>16){throw new Error("PKCS#7 padding byte out of range")}var r=e.length-t;for(var n=0;n<t;n++){if(e[r+n]!==t){throw new Error("PKCS#7 invalid padding byte")}}var i=createArray(r);copyArray(e,i,0,0,r);return i}var P={AES:AES,Counter:Counter,ModeOfOperation:{ecb:ModeOfOperationECB,cbc:ModeOfOperationCBC,cfb:ModeOfOperationCFB,ofb:ModeOfOperationOFB,ctr:ModeOfOperationCTR},utils:{hex:n,utf8:r},padding:{pkcs7:{pad:pkcs7pad,strip:pkcs7strip}},_arrayTest:{coerceArray:coerceArray,createArray:createArray,copyArray:copyArray}};if(true){e.exports=P}else{}})(this)},3015:e=>{e.exports=after;function after(e,t,r){var n=false;r=r||noop;proxy.count=e;return e===0?t():proxy;function proxy(e,i){if(proxy.count<=0){throw new Error("after called too many times")}--proxy.count;if(e){n=true;t(e);t=r}else if(proxy.count===0&&!n){t(null,i)}}}function noop(){}},34697:(e,t,r)=>{"use strict";
/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */Object.defineProperty(t,"__esModule",{value:true});var n=r(69185);var i=r(33940);function _interopNamespace(e){if(e&&e.__esModule)return e;var t=Object.create(null);if(e){Object.keys(e).forEach((function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:true,get:function(){return e[r]}})}}))}t["default"]=e;return Object.freeze(t)}var s=_interopNamespace(n);var o=_interopNamespace(i);function assertBigInt(){if(typeof BigInt==="undefined"){throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}}function concat(e){let t=0;let r=0;for(let r=0;r<e.length;r++){const n=e[r];t+=n.byteLength}const n=new Uint8Array(t);for(let t=0;t<e.length;t++){const i=e[t];n.set(new Uint8Array(i),r);r+=i.byteLength}return n.buffer}function checkBufferParams(e,t,r,n){if(!(t instanceof Uint8Array)){e.error="Wrong parameter: inputBuffer must be 'Uint8Array'";return false}if(!t.byteLength){e.error="Wrong parameter: inputBuffer has zero length";return false}if(r<0){e.error="Wrong parameter: inputOffset less than zero";return false}if(n<0){e.error="Wrong parameter: inputLength less than zero";return false}if(t.byteLength-r-n<0){e.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return false}return true}class ViewWriter{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return concat(this.items)}}const a=[new Uint8Array([1])];const c="0123456789";const u="name";const d="valueHexView";const p="isHexOnly";const m="idBlock";const y="tagClass";const g="tagNumber";const b="isConstructed";const v="fromBER";const w="toBER";const _="local";const C="";const P=new ArrayBuffer(0);const O=new Uint8Array(0);const E="EndOfContent";const I="OCTET STRING";const k="BIT STRING";function HexBlock(e){var t;return t=class Some extends e{constructor(...e){var t;super(...e);const r=e[0]||{};this.isHexOnly=(t=r.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=r.valueHex?s.BufferSourceConverter.toUint8Array(r.valueHex):O}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,r){const n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!checkBufferParams(this,n,t,r)){return-1}const i=t+r;this.valueHexView=n.subarray(t,i);if(!this.valueHexView.length){this.warnings.push("Zero buffer length");return t}this.blockLength=r;return i}toBER(e=false){if(!this.isHexOnly){this.error="Flag 'isHexOnly' is not set, abort";return P}if(e){return new ArrayBuffer(this.valueHexView.byteLength)}return this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:s.Convert.ToHex(this.valueHexView)}}},t.NAME="hexBlock",t}class LocalBaseBlock{constructor({blockLength:e=0,error:t=C,warnings:r=[],valueBeforeDecode:n=O}={}){this.blockLength=e;this.error=t;this.warnings=r;this.valueBeforeDecodeView=s.BufferSourceConverter.toUint8Array(n)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:s.Convert.ToHex(this.valueBeforeDecodeView)}}}LocalBaseBlock.NAME="baseBlock";class ValueBlock extends LocalBaseBlock{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ValueBlock.NAME="valueBlock";class LocalIdentificationBlock extends(HexBlock(LocalBaseBlock)){constructor({idBlock:e={}}={}){var t,r,n,i;super();if(e){this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=e.valueHex?s.BufferSourceConverter.toUint8Array(e.valueHex):O;this.tagClass=(r=e.tagClass)!==null&&r!==void 0?r:-1;this.tagNumber=(n=e.tagNumber)!==null&&n!==void 0?n:-1;this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:false}else{this.tagClass=-1;this.tagNumber=-1;this.isConstructed=false}}toBER(e=false){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:this.error="Unknown tag class";return P}if(this.isConstructed)t|=32;if(this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31;t|=e;r[0]=t}return r.buffer}if(!this.isHexOnly){const r=o.utilToBase(this.tagNumber,7);const n=new Uint8Array(r);const i=r.byteLength;const s=new Uint8Array(i+1);s[0]=t|31;if(!e){for(let e=0;e<i-1;e++)s[e+1]=n[e]|128;s[i]=n[i-1]}return s.buffer}const r=new Uint8Array(this.valueHexView.byteLength+1);r[0]=t|31;if(!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=e[t]|128;r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){const n=s.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const i=n.subarray(t,t+r);if(i.length===0){this.error="Zero buffer length";return-1}const a=i[0]&192;switch(a){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:this.error="Unknown tag class";return-1}this.isConstructed=(i[0]&32)===32;this.isHexOnly=false;const c=i[0]&31;if(c!==31){this.tagNumber=c;this.blockLength=1}else{let e=1;let t=this.valueHexView=new Uint8Array(255);let r=255;while(i[e]&128){t[e-1]=i[e]&127;e++;if(e>=i.length){this.error="End of input reached before message was fully decoded";return-1}if(e===r){r+=255;const e=new Uint8Array(r);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1;t[e-1]=i[e]&127;const n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t[r];t=this.valueHexView=new Uint8Array(e);t.set(n);if(this.blockLength<=9)this.tagNumber=o.utilFromBase(t,7);else{this.isHexOnly=true;this.warnings.push("Tag too long, represented as hex-coded")}}if(this.tagClass===1&&this.isConstructed){switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:this.error="Constructed encoding used for primitive type";return-1}}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}LocalIdentificationBlock.NAME="identificationBlock";class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:e={}}={}){var t,r,n;super();this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:false;this.longFormUsed=(r=e.longFormUsed)!==null&&r!==void 0?r:false;this.length=(n=e.length)!==null&&n!==void 0?n:0}fromBER(e,t,r){const n=s.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const i=n.subarray(t,t+r);if(i.length===0){this.error="Zero buffer length";return-1}if(i[0]===255){this.error="Length block 0xFF is reserved by standard";return-1}this.isIndefiniteForm=i[0]===128;if(this.isIndefiniteForm){this.blockLength=1;return t+this.blockLength}this.longFormUsed=!!(i[0]&128);if(this.longFormUsed===false){this.length=i[0];this.blockLength=1;return t+this.blockLength}const a=i[0]&127;if(a>8){this.error="Too big integer";return-1}if(a+1>i.length){this.error="End of input reached before message was fully decoded";return-1}const c=t+1;const u=n.subarray(c,c+a);if(u[a-1]===0)this.warnings.push("Needlessly long encoded length");this.length=o.utilFromBase(u,8);if(this.longFormUsed&&this.length<=127)this.warnings.push("Unnecessary usage of long length form");this.blockLength=a+1;return t+this.blockLength}toBER(e=false){let t;let r;if(this.length>127)this.longFormUsed=true;if(this.isIndefiniteForm){t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=128}return t}if(this.longFormUsed){const n=o.utilToBase(this.length,8);if(n.byteLength>127){this.error="Too big length";return P}t=new ArrayBuffer(n.byteLength+1);if(e)return t;const i=new Uint8Array(n);r=new Uint8Array(t);r[0]=n.byteLength|128;for(let e=0;e<n.byteLength;e++)r[e+1]=i[e];return t}t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=this.length}return t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}LocalLengthBlock.NAME="lengthBlock";const T={};class BaseBlock extends LocalBaseBlock{constructor({name:e=C,optional:t=false,primitiveSchema:r,...n}={},i){super(n);this.name=e;this.optional=t;if(r){this.primitiveSchema=r}this.idBlock=new LocalIdentificationBlock(n);this.lenBlock=new LocalLengthBlock(n);this.valueBlock=i?new i(n):new ValueBlock(n)}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}toBER(e,t){const r=t||new ViewWriter;if(!t){prepareIndefiniteForm(this)}const n=this.idBlock.toBER(e);r.write(n);if(this.lenBlock.isIndefiniteForm){r.write(new Uint8Array([128]).buffer);this.valueBlock.toBER(e,r);r.write(new ArrayBuffer(2))}else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const n=this.lenBlock.toBER(e);r.write(n);r.write(t)}if(!t){return r.final()}return P}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};if(this.primitiveSchema)e.primitiveSchema=this.primitiveSchema.toJSON();return e}toString(e="ascii"){if(e==="ascii"){return this.onAsciiEncoding()}return s.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${s.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e){return true}if(!(e instanceof this.constructor)){return false}const t=this.toBER();const r=e.toBER();return o.isEqualBuffer(t,r)}}BaseBlock.NAME="BaseBlock";function prepareIndefiniteForm(e){if(e instanceof T.Constructed){for(const t of e.valueBlock.value){if(prepareIndefiniteForm(t)){e.lenBlock.isIndefiniteForm=true}}}return!!e.lenBlock.isIndefiniteForm}class BaseStringBlock extends BaseBlock{constructor({value:e=C,...t}={},r){super(t,r);if(e){this.fromString(e)}}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}this.fromBuffer(this.valueBlock.valueHexView);if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}BaseStringBlock.NAME="BaseStringBlock";class LocalPrimitiveValueBlock extends(HexBlock(ValueBlock)){constructor({isHexOnly:e=true,...t}={}){super(t);this.isHexOnly=e}}LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";var x;class Primitive extends BaseBlock{constructor(e={}){super(e,LocalPrimitiveValueBlock);this.idBlock.isConstructed=false}}x=Primitive;(()=>{T.Primitive=x})();Primitive.NAME="PRIMITIVE";function localChangeType(e,t){if(e instanceof t){return e}const r=new t;r.idBlock=e.idBlock;r.lenBlock=e.lenBlock;r.warnings=e.warnings;r.valueBeforeDecodeView=e.valueBeforeDecodeView;return r}function localFromBER(e,t=0,r=e.length){const n=t;let i=new BaseBlock({},ValueBlock);const s=new LocalBaseBlock;if(!checkBufferParams(s,e,t,r)){i.error=s.error;return{offset:-1,result:i}}const o=e.subarray(t,t+r);if(!o.length){i.error="Zero buffer length";return{offset:-1,result:i}}let a=i.idBlock.fromBER(e,t,r);if(i.idBlock.warnings.length){i.warnings.concat(i.idBlock.warnings)}if(a===-1){i.error=i.idBlock.error;return{offset:-1,result:i}}t=a;r-=i.idBlock.blockLength;a=i.lenBlock.fromBER(e,t,r);if(i.lenBlock.warnings.length){i.warnings.concat(i.lenBlock.warnings)}if(a===-1){i.error=i.lenBlock.error;return{offset:-1,result:i}}t=a;r-=i.lenBlock.blockLength;if(!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm){i.error="Indefinite length form used for primitive encoding form";return{offset:-1,result:i}}let c=BaseBlock;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===false){i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard";return{offset:-1,result:i}}switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0){i.error="Type [UNIVERSAL 0] is reserved";return{offset:-1,result:i}}c=T.EndOfContent;break;case 1:c=T.Boolean;break;case 2:c=T.Integer;break;case 3:c=T.BitString;break;case 4:c=T.OctetString;break;case 5:c=T.Null;break;case 6:c=T.ObjectIdentifier;break;case 10:c=T.Enumerated;break;case 12:c=T.Utf8String;break;case 13:c=T.RelativeObjectIdentifier;break;case 14:c=T.TIME;break;case 15:i.error="[UNIVERSAL 15] is reserved by ASN.1 standard";return{offset:-1,result:i};case 16:c=T.Sequence;break;case 17:c=T.Set;break;case 18:c=T.NumericString;break;case 19:c=T.PrintableString;break;case 20:c=T.TeletexString;break;case 21:c=T.VideotexString;break;case 22:c=T.IA5String;break;case 23:c=T.UTCTime;break;case 24:c=T.GeneralizedTime;break;case 25:c=T.GraphicString;break;case 26:c=T.VisibleString;break;case 27:c=T.GeneralString;break;case 28:c=T.UniversalString;break;case 29:c=T.CharacterString;break;case 30:c=T.BmpString;break;case 31:c=T.DATE;break;case 32:c=T.TimeOfDay;break;case 33:c=T.DateTime;break;case 34:c=T.Duration;break;default:{const e=i.idBlock.isConstructed?new T.Constructed:new T.Primitive;e.idBlock=i.idBlock;e.lenBlock=i.lenBlock;e.warnings=i.warnings;i=e}}break;case 2:case 3:case 4:default:{c=i.idBlock.isConstructed?T.Constructed:T.Primitive}}i=localChangeType(i,c);a=i.fromBER(e,t,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length);i.valueBeforeDecodeView=e.subarray(n,n+i.blockLength);return{offset:a,result:i}}function fromBER(e){if(!e.byteLength){const e=new BaseBlock({},ValueBlock);e.error="Input buffer has zero length";return{offset:-1,result:e}}return localFromBER(s.BufferSourceConverter.toUint8Array(e).slice(),0,e.byteLength)}function checkLen(e,t){if(e){return 1}return t}class LocalConstructedValueBlock extends ValueBlock{constructor({value:e=[],isIndefiniteForm:t=false,...r}={}){super(r);this.value=e;this.isIndefiniteForm=t}fromBER(e,t,r){const n=s.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}this.valueBeforeDecodeView=n.subarray(t,t+r);if(this.valueBeforeDecodeView.length===0){this.warnings.push("Zero buffer length");return t}let i=t;while(checkLen(this.isIndefiniteForm,r)>0){const e=localFromBER(n,i,r);if(e.offset===-1){this.error=e.result.error;this.warnings.concat(e.result.warnings);return-1}i=e.offset;this.blockLength+=e.result.blockLength;r-=e.result.blockLength;this.value.push(e.result);if(this.isIndefiniteForm&&e.result.constructor.NAME===E){break}}if(this.isIndefiniteForm){if(this.value[this.value.length-1].constructor.NAME===E){this.value.pop()}else{this.warnings.push("No EndOfContent block encoded")}}return i}toBER(e,t){const r=t||new ViewWriter;for(let t=0;t<this.value.length;t++){this.value[t].toBER(e,r)}if(!t){return r.final()}return P}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value){e.value.push(t.toJSON())}return e}}LocalConstructedValueBlock.NAME="ConstructedValueBlock";var R;class Constructed extends BaseBlock{constructor(e={}){super(e,LocalConstructedValueBlock);this.idBlock.isConstructed=true}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){const e=[];for(const t of this.valueBlock.value){e.push(t.toString("ascii").split("\n").map((e=>`  ${e}`)).join("\n"))}const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}}R=Constructed;(()=>{T.Constructed=R})();Constructed.NAME="CONSTRUCTED";class LocalEndOfContentValueBlock extends ValueBlock{fromBER(e,t,r){return t}toBER(e){return P}}LocalEndOfContentValueBlock.override="EndOfContentValueBlock";var B;class EndOfContent extends BaseBlock{constructor(e={}){super(e,LocalEndOfContentValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=0}}B=EndOfContent;(()=>{T.EndOfContent=B})();EndOfContent.NAME=E;var N;class Null extends BaseBlock{constructor(e={}){super(e,ValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=5}fromBER(e,t,r){if(this.lenBlock.length>0)this.warnings.push("Non-zero length of value block for Null type");if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;this.blockLength+=r;if(t+r>e.byteLength){this.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return-1}return t+r}toBER(e,t){const r=new ArrayBuffer(2);if(!e){const e=new Uint8Array(r);e[0]=5;e[1]=0}if(t){t.write(r)}return r}onAsciiEncoding(){return`${this.constructor.NAME}`}}N=Null;(()=>{T.Null=N})();Null.NAME="NULL";class LocalBooleanValueBlock extends(HexBlock(ValueBlock)){constructor({value:e,...t}={}){super(t);if(t.valueHex){this.valueHexView=s.BufferSourceConverter.toUint8Array(t.valueHex)}else{this.valueHexView=new Uint8Array(1)}if(e){this.value=e}}get value(){for(const e of this.valueHexView){if(e>0){return true}}return false}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,r){const n=s.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}this.valueHexView=n.subarray(t,t+r);if(r>1)this.warnings.push("Boolean value encoded in more then 1 octet");this.isHexOnly=true;o.utilDecodeTC.call(this);this.blockLength=r;return t+r}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}LocalBooleanValueBlock.NAME="BooleanValueBlock";var j;class Boolean extends BaseBlock{constructor(e={}){super(e,LocalBooleanValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}j=Boolean;(()=>{T.Boolean=j})();Boolean.NAME="BOOLEAN";class LocalOctetStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({isConstructed:e=false,...t}={}){super(t);this.isConstructed=e}fromBER(e,t,r){let n=0;if(this.isConstructed){this.isHexOnly=false;n=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r);if(n===-1)return n;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===E){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only";return-1}}if(t!==I){this.error="OCTET STRING may consists of OCTET STRINGs only";return-1}}}else{this.isHexOnly=true;n=super.fromBER(e,t,r);this.blockLength=r}return n}toBER(e,t){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,e,t);return e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}LocalOctetStringValueBlock.NAME="OctetStringValueBlock";var L;class OctetString extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;(n=r.isConstructed)!==null&&n!==void 0?n:r.isConstructed=!!((i=r.value)===null||i===void 0?void 0:i.length);super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalOctetStringValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=4}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;if(r===0){if(this.idBlock.error.length===0)this.blockLength+=this.idBlock.blockLength;if(this.lenBlock.error.length===0)this.blockLength+=this.lenBlock.blockLength;return t}if(!this.valueBlock.isConstructed){const n=e instanceof ArrayBuffer?new Uint8Array(e):e;const i=n.subarray(t,t+r);try{if(i.byteLength){const e=localFromBER(i,0,i.byteLength);if(e.offset!==-1&&e.offset===r){this.valueBlock.value=[e.result]}}}catch(e){}}return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return Constructed.prototype.onAsciiEncoding.call(this)}return`${this.constructor.NAME} : ${s.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed){return this.valueBlock.valueHexView.slice().buffer}const e=[];for(const t of this.valueBlock.value){if(t instanceof OctetString){e.push(t.valueBlock.valueHexView)}}return s.BufferSourceConverter.concat(e)}}L=OctetString;(()=>{T.OctetString=L})();OctetString.NAME=I;class LocalBitStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({unusedBits:e=0,isConstructed:t=false,...r}={}){super(r);this.unusedBits=e;this.isConstructed=t;this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r){return t}let n=-1;if(this.isConstructed){n=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r);if(n===-1)return n;for(const e of this.value){const t=e.constructor.NAME;if(t===E){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only";return-1}}if(t!==k){this.error="BIT STRING may consists of BIT STRINGs only";return-1}const r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0){this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only';return-1}this.unusedBits=r.unusedBits}return n}const i=s.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,i,t,r)){return-1}const o=i.subarray(t,t+r);this.unusedBits=o[0];if(this.unusedBits>7){this.error="Unused bits for BitString must be in range 0-7";return-1}if(!this.unusedBits){const e=o.subarray(1);try{if(e.byteLength){const t=localFromBER(e,0,e.byteLength);if(t.offset!==-1&&t.offset===r-1){this.value=[t.result]}}}catch(e){}}this.valueHexView=o.subarray(1);this.blockLength=o.length;return t+r}toBER(e,t){if(this.isConstructed){return LocalConstructedValueBlock.prototype.toBER.call(this,e,t)}if(e){return new ArrayBuffer(this.valueHexView.byteLength+1)}if(!this.valueHexView.byteLength){return P}const r=new Uint8Array(this.valueHexView.length+1);r[0]=this.unusedBits;r.set(this.valueHexView,1);return r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}LocalBitStringValueBlock.NAME="BitStringValueBlock";var D;class BitString extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;(n=r.isConstructed)!==null&&n!==void 0?n:r.isConstructed=!!((i=r.value)===null||i===void 0?void 0:i.length);super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalBitStringValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=3}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return Constructed.prototype.onAsciiEncoding.call(this)}else{const e=[];const t=this.valueBlock.valueHexView;for(const r of t){e.push(r.toString(2).padStart(8,"0"))}const r=e.join("");return`${this.constructor.NAME} : ${r.substring(0,r.length-this.valueBlock.unusedBits)}`}}}D=BitString;(()=>{T.BitString=D})();BitString.NAME=k;var U;function viewAdd(e,t){const r=new Uint8Array([0]);const n=new Uint8Array(e);const i=new Uint8Array(t);let s=n.slice(0);const a=s.length-1;const c=i.slice(0);const u=c.length-1;let d=0;const p=u<a?a:u;let m=0;for(let e=p;e>=0;e--,m++){switch(true){case m<c.length:d=s[a-m]+c[u-m]+r[0];break;default:d=s[a-m]+r[0]}r[0]=d/10;switch(true){case m>=s.length:s=o.utilConcatView(new Uint8Array([d%10]),s);break;default:s[a-m]=d%10}}if(r[0]>0)s=o.utilConcatView(r,s);return s}function power2(e){if(e>=a.length){for(let t=a.length;t<=e;t++){const e=new Uint8Array([0]);let r=a[t-1].slice(0);for(let t=r.length-1;t>=0;t--){const n=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=n[0]/10;r[t]=n[0]%10}if(e[0]>0)r=o.utilConcatView(e,r);a.push(r)}}return a[e]}function viewSub(e,t){let r=0;const n=new Uint8Array(e);const i=new Uint8Array(t);const s=n.slice(0);const o=s.length-1;const a=i.slice(0);const c=a.length-1;let u;let d=0;for(let e=c;e>=0;e--,d++){u=s[o-d]-a[c-d]-r;switch(true){case u<0:r=1;s[o-d]=u+10;break;default:r=0;s[o-d]=u}}if(r>0){for(let e=o-c+1;e>=0;e--,d++){u=s[o-d]-r;if(u<0){r=1;s[o-d]=u+10}else{r=0;s[o-d]=u;break}}}return s.slice()}class LocalIntegerValueBlock extends(HexBlock(ValueBlock)){constructor({value:e,...t}={}){super(t);this._valueDec=0;if(t.valueHex){this.setValueHex()}if(e!==undefined){this.valueDec=e}}setValueHex(){if(this.valueHexView.length>=4){this.warnings.push("Too big Integer for decoding, hex only");this.isHexOnly=true;this._valueDec=0}else{this.isHexOnly=false;if(this.valueHexView.length>0){this._valueDec=o.utilDecodeTC.call(this)}}}set valueDec(e){this._valueDec=e;this.isHexOnly=false;this.valueHexView=new Uint8Array(o.utilEncodeTC(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){const i=this.fromBER(e,t,r);if(i===-1)return i;const s=this.valueHexView;if(s[0]===0&&(s[1]&128)!==0){this.valueHexView=s.subarray(1)}else{if(n!==0){if(s.length<n){if(n-s.length>1)n=s.length+1;this.valueHexView=s.subarray(n-s.length)}}}return i}toDER(e=false){const t=this.valueHexView;switch(true){case(t[0]&128)!==0:{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0;e.set(t,1);this.valueHexView=e}break;case t[0]===0&&(t[1]&128)===0:{this.valueHexView=this.valueHexView.subarray(1)}break}return this.toBER(e)}fromBER(e,t,r){const n=super.fromBER(e,t,r);if(n===-1){return n}this.setValueHex();return n}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let t=new Uint8Array(this.valueHexView.length*8/3);let r=0;let n;const i=this.valueHexView;let s="";let o=false;for(let o=i.byteLength-1;o>=0;o--){n=i[o];for(let i=0;i<8;i++){if((n&1)===1){switch(r){case e:t=viewSub(power2(r),t);s="-";break;default:t=viewAdd(t,power2(r))}}r++;n>>=1}}for(let e=0;e<t.length;e++){if(t[e])o=true;if(o)s+=c.charAt(t[e])}if(o===false)s+=c.charAt(0);return s}}U=LocalIntegerValueBlock;LocalIntegerValueBlock.NAME="IntegerValueBlock";(()=>{Object.defineProperty(U.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e);this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}})})();var F;class Integer extends BaseBlock{constructor(e={}){super(e,LocalIntegerValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=2}toBigInt(){assertBigInt();return BigInt(this.valueBlock.toString())}static fromBigInt(e){assertBigInt();const t=BigInt(e);const r=new ViewWriter;const n=t.toString(16).replace(/^-/,"");const i=new Uint8Array(s.Convert.FromHex(n));if(t<0){const e=new Uint8Array(i.length+(i[0]&128?1:0));e[0]|=128;const n=BigInt(`0x${s.Convert.ToHex(e)}`);const o=n+t;const a=s.BufferSourceConverter.toUint8Array(s.Convert.FromHex(o.toString(16)));a[0]|=128;r.write(a)}else{if(i[0]&128){r.write(new Uint8Array([0]))}r.write(i)}const o=new Integer({valueHex:r.final()});return o}convertToDER(){const e=new Integer({valueHex:this.valueBlock.valueHexView});e.valueBlock.toDER();return e}convertFromDER(){return new Integer({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}F=Integer;(()=>{T.Integer=F})();Integer.NAME="INTEGER";var K;class Enumerated extends Integer{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=10}}K=Enumerated;(()=>{T.Enumerated=K})();Enumerated.NAME="ENUMERATED";class LocalSidValueBlock extends(HexBlock(ValueBlock)){constructor({valueDec:e=-1,isFirstSid:t=false,...r}={}){super(r);this.valueDec=e;this.isFirstSid=t}fromBER(e,t,r){if(!r){return t}const n=s.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=i[e]&127;this.blockLength++;if((i[e]&128)===0)break}const a=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++){a[e]=this.valueHexView[e]}this.valueHexView=a;if((i[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=o.utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}set valueBigInt(e){assertBigInt();let t=BigInt(e).toString(2);while(t.length%7){t="0"+t}const r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++){r[e]=parseInt(t.slice(e*7,e*7+7),2)+(e+1<r.length?128:0)}this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=o.utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return P}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=e[t]|128;r[n]=e[n]}return r}toString(){let e="";if(this.isHexOnly)e=s.Convert.ToHex(this.valueHexView);else{if(this.isFirstSid){let t=this.valueDec;if(this.valueDec<=39)e="0.";else{if(this.valueDec<=79){e="1.";t-=40}else{e="2.";t-=80}}e+=t.toString()}else e=this.valueDec.toString()}return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}LocalSidValueBlock.NAME="sidBlock";class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=C,...t}={}){super(t);this.value=[];if(e){this.fromString(e)}}fromBER(e,t,r){let n=t;while(r>0){const t=new LocalSidValueBlock;n=t.fromBER(e,n,r);if(n===-1){this.blockLength=0;this.error=t.error;return n}if(this.value.length===0)t.isFirstSid=true;this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return n}toBER(e){const t=[];for(let r=0;r<this.value.length;r++){const n=this.value[r].toBER(e);if(n.byteLength===0){this.error=this.value[r].error;return P}t.push(n)}return concat(t)}fromString(e){this.value=[];let t=0;let r=0;let n="";let i=false;do{r=e.indexOf(".",t);if(r===-1)n=e.substring(t);else n=e.substring(t,r);t=r+1;if(i){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}const r=parseInt(n,10);if(isNaN(r))return;e.valueDec=r+t;i=false}else{const e=new LocalSidValueBlock;if(n>Number.MAX_SAFE_INTEGER){assertBigInt();const t=BigInt(n);e.valueBigInt=t}else{e.valueDec=parseInt(n,10);if(isNaN(e.valueDec))return}if(!this.value.length){e.isFirstSid=true;i=true}this.value.push(e)}}while(r!==-1)}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){n=`{${n}}`;if(this.value[r].isFirstSid)e=`2.{${n} - 80}`;else e+=n}else e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++){e.sidArray.push(this.value[t].toJSON())}return e}}LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";var V;class ObjectIdentifier extends BaseBlock{constructor(e={}){super(e,LocalObjectIdentifierValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}V=ObjectIdentifier;(()=>{T.ObjectIdentifier=V})();ObjectIdentifier.NAME="OBJECT IDENTIFIER";class LocalRelativeSidValueBlock extends(HexBlock(LocalBaseBlock)){constructor({valueDec:e=0,...t}={}){super(t);this.valueDec=e}fromBER(e,t,r){if(r===0)return t;const n=s.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r))return-1;const i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=i[e]&127;this.blockLength++;if((i[e]&128)===0)break}const a=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)a[e]=this.valueHexView[e];this.valueHexView=a;if((i[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=o.utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=o.utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return P}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=e[t]|128;r[n]=e[n]}return r.buffer}toString(){let e="";if(this.isHexOnly)e=s.Convert.ToHex(this.valueHexView);else{e=this.valueDec.toString()}return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}LocalRelativeSidValueBlock.NAME="relativeSidBlock";class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=C,...t}={}){super(t);this.value=[];if(e){this.fromString(e)}}fromBER(e,t,r){let n=t;while(r>0){const t=new LocalRelativeSidValueBlock;n=t.fromBER(e,n,r);if(n===-1){this.blockLength=0;this.error=t.error;return n}this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return n}toBER(e,t){const r=[];for(let t=0;t<this.value.length;t++){const n=this.value[t].toBER(e);if(n.byteLength===0){this.error=this.value[t].error;return P}r.push(n)}return concat(r)}fromString(e){this.value=[];let t=0;let r=0;let n="";do{r=e.indexOf(".",t);if(r===-1)n=e.substring(t);else n=e.substring(t,r);t=r+1;const i=new LocalRelativeSidValueBlock;i.valueDec=parseInt(n,10);if(isNaN(i.valueDec))return true;this.value.push(i)}while(r!==-1);return true}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){n=`{${n}}`;e+=n}else e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";var H;class RelativeObjectIdentifier extends BaseBlock{constructor(e={}){super(e,LocalRelativeObjectIdentifierValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}H=RelativeObjectIdentifier;(()=>{T.RelativeObjectIdentifier=H})();RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";var q;class Sequence extends Constructed{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=16}}q=Sequence;(()=>{T.Sequence=q})();Sequence.NAME="SEQUENCE";var W;class Set extends Constructed{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=17}}W=Set;(()=>{T.Set=W})();Set.NAME="SET";class LocalStringValueBlock extends(HexBlock(ValueBlock)){constructor({...e}={}){super(e);this.isHexOnly=true;this.value=C}toJSON(){return{...super.toJSON(),value:this.value}}}LocalStringValueBlock.NAME="StringValueBlock";class LocalSimpleStringValueBlock extends LocalStringValueBlock{}LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";class LocalSimpleStringBlock extends BaseStringBlock{constructor({...e}={}){super(e,LocalSimpleStringValueBlock)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,s.BufferSourceConverter.toUint8Array(e))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}LocalSimpleStringBlock.NAME="SIMPLE STRING";class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.valueHexView=s.BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=s.Convert.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`);this.valueBlock.value=s.Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(s.Convert.FromUtf8String(e));this.valueBlock.value=e}}LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";var z;class Utf8String extends LocalUtf8StringValueBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=12}}z=Utf8String;(()=>{T.Utf8String=z})();Utf8String.NAME="UTF8String";class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.value=s.Convert.ToUtf16String(e);this.valueBlock.valueHexView=s.BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e;this.valueBlock.valueHexView=new Uint8Array(s.Convert.FromUtf16String(e))}}LocalBmpStringValueBlock.NAME="BmpStringValueBlock";var $;class BmpString extends LocalBmpStringValueBlock{constructor({...e}={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=30}}$=BmpString;(()=>{T.BmpString=$})();BmpString.NAME="BMPString";class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0);const r=new Uint8Array(t);for(let e=0;e<r.length;e+=4){r[e]=r[e+3];r[e+1]=r[e+2];r[e+2]=0;r[e+3]=0}this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let n=0;n<t;n++){const t=o.utilToBase(e.charCodeAt(n),8);const i=new Uint8Array(t);if(i.length>4)continue;const s=4-i.length;for(let e=i.length-1;e>=0;e--)r[n*4+e+s]=i[e]}this.valueBlock.value=e}}LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";var G;class UniversalString extends LocalUniversalStringValueBlock{constructor({...e}={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=28}}G=UniversalString;(()=>{T.UniversalString=G})();UniversalString.NAME="UniversalString";var J;class NumericString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=18}}J=NumericString;(()=>{T.NumericString=J})();NumericString.NAME="NumericString";var X;class PrintableString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=19}}X=PrintableString;(()=>{T.PrintableString=X})();PrintableString.NAME="PrintableString";var Y;class TeletexString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=20}}Y=TeletexString;(()=>{T.TeletexString=Y})();TeletexString.NAME="TeletexString";var Q;class VideotexString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=21}}Q=VideotexString;(()=>{T.VideotexString=Q})();VideotexString.NAME="VideotexString";var ee;class IA5String extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=22}}ee=IA5String;(()=>{T.IA5String=ee})();IA5String.NAME="IA5String";var te;class GraphicString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=25}}te=GraphicString;(()=>{T.GraphicString=te})();GraphicString.NAME="GraphicString";var re;class VisibleString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=26}}re=VisibleString;(()=>{T.VisibleString=re})();VisibleString.NAME="VisibleString";var ne;class GeneralString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=27}}ne=GeneralString;(()=>{T.GeneralString=ne})();GeneralString.NAME="GeneralString";var ie;class CharacterString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=29}}ie=CharacterString;(()=>{T.CharacterString=ie})();CharacterString.NAME="CharacterString";var se;class UTCTime extends VisibleString{constructor({value:e,valueDate:t,...r}={}){super(r);this.year=0;this.month=0;this.day=0;this.hour=0;this.minute=0;this.second=0;if(e){this.fromString(e);this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}if(t){this.fromDate(t);this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())}this.idBlock.tagClass=1;this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,s.BufferSourceConverter.toUint8Array(e)))}toBuffer(){const e=this.toString();const t=new ArrayBuffer(e.length);const r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear();this.month=e.getUTCMonth()+1;this.day=e.getUTCDate();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi;const r=t.exec(e);if(r===null){this.error="Wrong input string for conversion";return}const n=parseInt(r[1],10);if(n>=50)this.year=1900+n;else this.year=2e3+n;this.month=parseInt(r[2],10);this.day=parseInt(r[3],10);this.hour=parseInt(r[4],10);this.minute=parseInt(r[5],10);this.second=parseInt(r[6],10)}toString(e="iso"){if(e==="iso"){const e=new Array(7);e[0]=o.padNumber(this.year<2e3?this.year-1900:this.year-2e3,2);e[1]=o.padNumber(this.month,2);e[2]=o.padNumber(this.day,2);e[3]=o.padNumber(this.hour,2);e[4]=o.padNumber(this.minute,2);e[5]=o.padNumber(this.second,2);e[6]="Z";return e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}se=UTCTime;(()=>{T.UTCTime=se})();UTCTime.NAME="UTCTime";var oe;class GeneralizedTime extends UTCTime{constructor(e={}){var t;super(e);(t=this.millisecond)!==null&&t!==void 0?t:this.millisecond=0;this.idBlock.tagClass=1;this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e);this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=false;let r="";let n="";let i=0;let s;let o=0;let a=0;if(e[e.length-1]==="Z"){r=e.substring(0,e.length-1);t=true}else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");r=e}if(t){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let e=1;let t=r.indexOf("+");let n="";if(t===-1){t=r.indexOf("-");e=-1}if(t!==-1){n=r.substring(t+1);r=r.substring(0,t);if(n.length!==2&&n.length!==4)throw new Error("Wrong input string for conversion");let i=parseInt(n.substring(0,2),10);if(isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");o=e*i;if(n.length===4){i=parseInt(n.substring(2,4),10);if(isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");a=e*i}}}let c=r.indexOf(".");if(c===-1)c=r.indexOf(",");if(c!==-1){const e=new Number(`0${r.substring(c)}`);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");i=e.valueOf();n=r.substring(0,c)}else n=r;switch(true){case n.length===8:s=/(\d{4})(\d{2})(\d{2})/gi;if(c!==-1)throw new Error("Wrong input string for conversion");break;case n.length===10:s=/(\d{4})(\d{2})(\d{2})(\d{2})/gi;if(c!==-1){let e=60*i;this.minute=Math.floor(e);e=60*(e-this.minute);this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case n.length===12:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(c!==-1){let e=60*i;this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case n.length===14:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(c!==-1){const e=1e3*i;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const u=s.exec(n);if(u===null)throw new Error("Wrong input string for conversion");for(let e=1;e<u.length;e++){switch(e){case 1:this.year=parseInt(u[e],10);break;case 2:this.month=parseInt(u[e],10);break;case 3:this.day=parseInt(u[e],10);break;case 4:this.hour=parseInt(u[e],10)+o;break;case 5:this.minute=parseInt(u[e],10)+a;break;case 6:this.second=parseInt(u[e],10);break;default:throw new Error("Wrong input string for conversion")}}if(t===false){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear();this.month=e.getUTCMonth();this.day=e.getUTCDay();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds();this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const e=[];e.push(o.padNumber(this.year,4));e.push(o.padNumber(this.month,2));e.push(o.padNumber(this.day,2));e.push(o.padNumber(this.hour,2));e.push(o.padNumber(this.minute,2));e.push(o.padNumber(this.second,2));if(this.millisecond!==0){e.push(".");e.push(o.padNumber(this.millisecond,3))}e.push("Z");return e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}oe=GeneralizedTime;(()=>{T.GeneralizedTime=oe})();GeneralizedTime.NAME="GeneralizedTime";var ae;class DATE extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=31}}ae=DATE;(()=>{T.DATE=ae})();DATE.NAME="DATE";var ce;class TimeOfDay extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=32}}ce=TimeOfDay;(()=>{T.TimeOfDay=ce})();TimeOfDay.NAME="TimeOfDay";var ue;class DateTime extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=33}}ue=DateTime;(()=>{T.DateTime=ue})();DateTime.NAME="DateTime";var le;class Duration extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=34}}le=Duration;(()=>{T.Duration=le})();Duration.NAME="Duration";var fe;class TIME extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=14}}fe=TIME;(()=>{T.TIME=fe})();TIME.NAME="TIME";class Any{constructor({name:e=C,optional:t=false}={}){this.name=e;this.optional=t}}class Choice extends Any{constructor({value:e=[],...t}={}){super(t);this.value=e}}class Repeated extends Any{constructor({value:e=new Any,local:t=false,...r}={}){super(r);this.value=e;this.local=t}}class RawData{constructor({data:e=O}={}){this.dataView=s.BufferSourceConverter.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=s.BufferSourceConverter.toUint8Array(e)}fromBER(e,t,r){const n=t+r;this.dataView=s.BufferSourceConverter.toUint8Array(e).subarray(t,n);return n}toBER(e){return this.dataView.slice().buffer}}function compareSchema(e,t,r){if(r instanceof Choice){for(let n=0;n<r.value.length;n++){const i=compareSchema(e,t,r.value[n]);if(i.verified){return{verified:true,result:e}}}{const e={verified:false,result:{error:"Wrong values for Choice type"}};if(r.hasOwnProperty(u))e.name=r.name;return e}}if(r instanceof Any){if(r.hasOwnProperty(u))e[r.name]=t;return{verified:true,result:e}}if(e instanceof Object===false){return{verified:false,result:{error:"Wrong root object"}}}if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 data"}}}if(r instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(m in r===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(v in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(w in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.toBER(false);if(n.byteLength===0){return{verified:false,result:{error:"Error encoding idBlock for ASN.1 schema"}}}const i=r.idBlock.fromBER(n,0,n.byteLength);if(i===-1){return{verified:false,result:{error:"Error decoding idBlock for ASN.1 schema"}}}if(r.idBlock.hasOwnProperty(y)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagClass!==t.idBlock.tagClass){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty(g)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagNumber!==t.idBlock.tagNumber){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty(b)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isConstructed!==t.idBlock.isConstructed){return{verified:false,result:e}}if(!(p in r.idBlock)){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly){return{verified:false,result:e}}if(r.idBlock.isHexOnly){if(d in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.valueHexView;const i=t.idBlock.valueHexView;if(n.length!==i.length){return{verified:false,result:e}}for(let t=0;t<n.length;t++){if(n[t]!==i[1]){return{verified:false,result:e}}}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,C);if(r.name)e[r.name]=t}if(r instanceof T.Constructed){let n=0;let i={verified:false,result:{error:"Unknown error"}};let s=r.valueBlock.value.length;if(s>0){if(r.valueBlock.value[0]instanceof Repeated){s=t.valueBlock.value.length}}if(s===0){return{verified:true,result:e}}if(t.valueBlock.value.length===0&&r.valueBlock.value.length!==0){let t=true;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||false);if(t){return{verified:true,result:e}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,C);if(r.name)delete e[r.name]}e.error="Inconsistent object length";return{verified:false,result:e}}for(let o=0;o<s;o++){if(o-n>=t.valueBlock.value.length){if(r.valueBlock.value[o].optional===false){const t={verified:false,result:e};e.error="Inconsistent length between ASN.1 data and schema";if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,C);if(r.name){delete e[r.name];t.name=r.name}}return t}}else{if(r.valueBlock.value[0]instanceof Repeated){i=compareSchema(e,t.valueBlock.value[o],r.valueBlock.value[0].value);if(i.verified===false){if(r.valueBlock.value[0].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,C);if(r.name)delete e[r.name]}return i}}if(u in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let n={};if(_ in r.valueBlock.value[0]&&r.valueBlock.value[0].local)n=t;else n=e;if(typeof n[r.valueBlock.value[0].name]==="undefined")n[r.valueBlock.value[0].name]=[];n[r.valueBlock.value[0].name].push(t.valueBlock.value[o])}}else{i=compareSchema(e,t.valueBlock.value[o-n],r.valueBlock.value[o]);if(i.verified===false){if(r.valueBlock.value[o].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,C);if(r.name)delete e[r.name]}return i}}}}}if(i.verified===false){const t={verified:false,result:e};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,C);if(r.name){delete e[r.name];t.name=r.name}}return t}return{verified:true,result:e}}if(r.primitiveSchema&&d in t.valueBlock){const n=localFromBER(t.valueBlock.valueHexView);if(n.offset===-1){const t={verified:false,result:n.result};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,C);if(r.name){delete e[r.name];t.name=r.name}}return t}return compareSchema(e,n.result,r.primitiveSchema)}return{verified:true,result:e}}function verifySchema(e,t){if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema type"}}}const r=localFromBER(s.BufferSourceConverter.toUint8Array(e));if(r.offset===-1){return{verified:false,result:r.result}}return compareSchema(r.result,r.result,t)}t.Any=Any;t.BaseBlock=BaseBlock;t.BaseStringBlock=BaseStringBlock;t.BitString=BitString;t.BmpString=BmpString;t.Boolean=Boolean;t.CharacterString=CharacterString;t.Choice=Choice;t.Constructed=Constructed;t.DATE=DATE;t.DateTime=DateTime;t.Duration=Duration;t.EndOfContent=EndOfContent;t.Enumerated=Enumerated;t.GeneralString=GeneralString;t.GeneralizedTime=GeneralizedTime;t.GraphicString=GraphicString;t.HexBlock=HexBlock;t.IA5String=IA5String;t.Integer=Integer;t.Null=Null;t.NumericString=NumericString;t.ObjectIdentifier=ObjectIdentifier;t.OctetString=OctetString;t.Primitive=Primitive;t.PrintableString=PrintableString;t.RawData=RawData;t.RelativeObjectIdentifier=RelativeObjectIdentifier;t.Repeated=Repeated;t.Sequence=Sequence;t.Set=Set;t.TIME=TIME;t.TeletexString=TeletexString;t.TimeOfDay=TimeOfDay;t.UTCTime=UTCTime;t.UniversalString=UniversalString;t.Utf8String=Utf8String;t.ValueBlock=ValueBlock;t.VideotexString=VideotexString;t.ViewWriter=ViewWriter;t.VisibleString=VisibleString;t.compareSchema=compareSchema;t.fromBER=fromBER;t.verifySchema=verifySchema},22065:e=>{e.exports=Backoff;function Backoff(e){e=e||{};this.ms=e.min||100;this.max=e.max||1e4;this.factor=e.factor||2;this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0;this.attempts=0}Backoff.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random();var r=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-r:e+r}return Math.min(e,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(e){this.ms=e};Backoff.prototype.setMax=function(e){this.max=e};Backoff.prototype.setJitter=function(e){this.jitter=e}},36933:(e,t,r)=>{e=r.nmd(e);var n=function(e){"use strict";var t=1e7,r=7,i=9007199254740992,s=smallToArray(i),o="0123456789abcdefghijklmnopqrstuvwxyz";var a=typeof BigInt==="function";function Integer(e,t,r,n){if(typeof e==="undefined")return Integer[0];if(typeof t!=="undefined")return+t===10&&!r?parseValue(e):parseBase(e,t,r,n);return parseValue(e)}function BigInteger(e,t){this.value=e;this.sign=t;this.isSmall=false}BigInteger.prototype=Object.create(Integer.prototype);function SmallInteger(e){this.value=e;this.sign=e<0;this.isSmall=true}SmallInteger.prototype=Object.create(Integer.prototype);function NativeBigInt(e){this.value=e}NativeBigInt.prototype=Object.create(Integer.prototype);function isPrecise(e){return-i<e&&e<i}function smallToArray(e){if(e<1e7)return[e];if(e<1e14)return[e%1e7,Math.floor(e/1e7)];return[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function arrayToSmall(e){trim(e);var r=e.length;if(r<4&&compareAbs(e,s)<0){switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}}return e}function trim(e){var t=e.length;while(e[--t]===0);e.length=t+1}function createArray(e){var t=new Array(e);var r=-1;while(++r<e){t[r]=0}return t}function truncate(e){if(e>0)return Math.floor(e);return Math.ceil(e)}function add(e,r){var n=e.length,i=r.length,s=new Array(n),o=0,a=t,c,u;for(u=0;u<i;u++){c=e[u]+r[u]+o;o=c>=a?1:0;s[u]=c-o*a}while(u<n){c=e[u]+o;o=c===a?1:0;s[u++]=c-o*a}if(o>0)s.push(o);return s}function addAny(e,t){if(e.length>=t.length)return add(e,t);return add(t,e)}function addSmall(e,r){var n=e.length,i=new Array(n),s=t,o,a;for(a=0;a<n;a++){o=e[a]-s+r;r=Math.floor(o/s);i[a]=o-r*s;r+=1}while(r>0){i[a++]=r%s;r=Math.floor(r/s)}return i}BigInteger.prototype.add=function(e){var t=parseValue(e);if(this.sign!==t.sign){return this.subtract(t.negate())}var r=this.value,n=t.value;if(t.isSmall){return new BigInteger(addSmall(r,Math.abs(n)),this.sign)}return new BigInteger(addAny(r,n),this.sign)};BigInteger.prototype.plus=BigInteger.prototype.add;SmallInteger.prototype.add=function(e){var t=parseValue(e);var r=this.value;if(r<0!==t.sign){return this.subtract(t.negate())}var n=t.value;if(t.isSmall){if(isPrecise(r+n))return new SmallInteger(r+n);n=smallToArray(Math.abs(n))}return new BigInteger(addSmall(n,Math.abs(r)),r<0)};SmallInteger.prototype.plus=SmallInteger.prototype.add;NativeBigInt.prototype.add=function(e){return new NativeBigInt(this.value+parseValue(e).value)};NativeBigInt.prototype.plus=NativeBigInt.prototype.add;function subtract(e,r){var n=e.length,i=r.length,s=new Array(n),o=0,a=t,c,u;for(c=0;c<i;c++){u=e[c]-o-r[c];if(u<0){u+=a;o=1}else o=0;s[c]=u}for(c=i;c<n;c++){u=e[c]-o;if(u<0)u+=a;else{s[c++]=u;break}s[c]=u}for(;c<n;c++){s[c]=e[c]}trim(s);return s}function subtractAny(e,t,r){var n;if(compareAbs(e,t)>=0){n=subtract(e,t)}else{n=subtract(t,e);r=!r}n=arrayToSmall(n);if(typeof n==="number"){if(r)n=-n;return new SmallInteger(n)}return new BigInteger(n,r)}function subtractSmall(e,r,n){var i=e.length,s=new Array(i),o=-r,a=t,c,u;for(c=0;c<i;c++){u=e[c]+o;o=Math.floor(u/a);u%=a;s[c]=u<0?u+a:u}s=arrayToSmall(s);if(typeof s==="number"){if(n)s=-s;return new SmallInteger(s)}return new BigInteger(s,n)}BigInteger.prototype.subtract=function(e){var t=parseValue(e);if(this.sign!==t.sign){return this.add(t.negate())}var r=this.value,n=t.value;if(t.isSmall)return subtractSmall(r,Math.abs(n),this.sign);return subtractAny(r,n,this.sign)};BigInteger.prototype.minus=BigInteger.prototype.subtract;SmallInteger.prototype.subtract=function(e){var t=parseValue(e);var r=this.value;if(r<0!==t.sign){return this.add(t.negate())}var n=t.value;if(t.isSmall){return new SmallInteger(r-n)}return subtractSmall(n,Math.abs(r),r>=0)};SmallInteger.prototype.minus=SmallInteger.prototype.subtract;NativeBigInt.prototype.subtract=function(e){return new NativeBigInt(this.value-parseValue(e).value)};NativeBigInt.prototype.minus=NativeBigInt.prototype.subtract;BigInteger.prototype.negate=function(){return new BigInteger(this.value,!this.sign)};SmallInteger.prototype.negate=function(){var e=this.sign;var t=new SmallInteger(-this.value);t.sign=!e;return t};NativeBigInt.prototype.negate=function(){return new NativeBigInt(-this.value)};BigInteger.prototype.abs=function(){return new BigInteger(this.value,false)};SmallInteger.prototype.abs=function(){return new SmallInteger(Math.abs(this.value))};NativeBigInt.prototype.abs=function(){return new NativeBigInt(this.value>=0?this.value:-this.value)};function multiplyLong(e,r){var n=e.length,i=r.length,s=n+i,o=createArray(s),a=t,c,u,d,p,m;for(d=0;d<n;++d){p=e[d];for(var y=0;y<i;++y){m=r[y];c=p*m+o[d+y];u=Math.floor(c/a);o[d+y]=c-u*a;o[d+y+1]+=u}}trim(o);return o}function multiplySmall(e,r){var n=e.length,i=new Array(n),s=t,o=0,a,c;for(c=0;c<n;c++){a=e[c]*r+o;o=Math.floor(a/s);i[c]=a-o*s}while(o>0){i[c++]=o%s;o=Math.floor(o/s)}return i}function shiftLeft(e,t){var r=[];while(t-- >0)r.push(0);return r.concat(e)}function multiplyKaratsuba(e,t){var r=Math.max(e.length,t.length);if(r<=30)return multiplyLong(e,t);r=Math.ceil(r/2);var n=e.slice(r),i=e.slice(0,r),s=t.slice(r),o=t.slice(0,r);var a=multiplyKaratsuba(i,o),c=multiplyKaratsuba(n,s),u=multiplyKaratsuba(addAny(i,n),addAny(o,s));var d=addAny(addAny(a,shiftLeft(subtract(subtract(u,a),c),r)),shiftLeft(c,2*r));trim(d);return d}function useKaratsuba(e,t){return-.012*e-.012*t+15e-6*e*t>0}BigInteger.prototype.multiply=function(e){var r=parseValue(e),n=this.value,i=r.value,s=this.sign!==r.sign,o;if(r.isSmall){if(i===0)return Integer[0];if(i===1)return this;if(i===-1)return this.negate();o=Math.abs(i);if(o<t){return new BigInteger(multiplySmall(n,o),s)}i=smallToArray(o)}if(useKaratsuba(n.length,i.length))return new BigInteger(multiplyKaratsuba(n,i),s);return new BigInteger(multiplyLong(n,i),s)};BigInteger.prototype.times=BigInteger.prototype.multiply;function multiplySmallAndArray(e,r,n){if(e<t){return new BigInteger(multiplySmall(r,e),n)}return new BigInteger(multiplyLong(r,smallToArray(e)),n)}SmallInteger.prototype._multiplyBySmall=function(e){if(isPrecise(e.value*this.value)){return new SmallInteger(e.value*this.value)}return multiplySmallAndArray(Math.abs(e.value),smallToArray(Math.abs(this.value)),this.sign!==e.sign)};BigInteger.prototype._multiplyBySmall=function(e){if(e.value===0)return Integer[0];if(e.value===1)return this;if(e.value===-1)return this.negate();return multiplySmallAndArray(Math.abs(e.value),this.value,this.sign!==e.sign)};SmallInteger.prototype.multiply=function(e){return parseValue(e)._multiplyBySmall(this)};SmallInteger.prototype.times=SmallInteger.prototype.multiply;NativeBigInt.prototype.multiply=function(e){return new NativeBigInt(this.value*parseValue(e).value)};NativeBigInt.prototype.times=NativeBigInt.prototype.multiply;function square(e){var r=e.length,n=createArray(r+r),i=t,s,o,a,c,u;for(a=0;a<r;a++){c=e[a];o=0-c*c;for(var d=a;d<r;d++){u=e[d];s=2*(c*u)+n[a+d]+o;o=Math.floor(s/i);n[a+d]=s-o*i}n[a+r]=o}trim(n);return n}BigInteger.prototype.square=function(){return new BigInteger(square(this.value),false)};SmallInteger.prototype.square=function(){var e=this.value*this.value;if(isPrecise(e))return new SmallInteger(e);return new BigInteger(square(smallToArray(Math.abs(this.value))),false)};NativeBigInt.prototype.square=function(e){return new NativeBigInt(this.value*this.value)};function divMod1(e,r){var n=e.length,i=r.length,s=t,o=createArray(r.length),a=r[i-1],c=Math.ceil(s/(2*a)),u=multiplySmall(e,c),d=multiplySmall(r,c),p,m,y,g,b,v,w;if(u.length<=n)u.push(0);d.push(0);a=d[i-1];for(m=n-i;m>=0;m--){p=s-1;if(u[m+i]!==a){p=Math.floor((u[m+i]*s+u[m+i-1])/a)}y=0;g=0;v=d.length;for(b=0;b<v;b++){y+=p*d[b];w=Math.floor(y/s);g+=u[m+b]-(y-w*s);y=w;if(g<0){u[m+b]=g+s;g=-1}else{u[m+b]=g;g=0}}while(g!==0){p-=1;y=0;for(b=0;b<v;b++){y+=u[m+b]-s+d[b];if(y<0){u[m+b]=y+s;y=0}else{u[m+b]=y;y=1}}g+=y}o[m]=p}u=divModSmall(u,c)[0];return[arrayToSmall(o),arrayToSmall(u)]}function divMod2(e,r){var n=e.length,i=r.length,s=[],o=[],a=t,c,u,d,p,m;while(n){o.unshift(e[--n]);trim(o);if(compareAbs(o,r)<0){s.push(0);continue}u=o.length;d=o[u-1]*a+o[u-2];p=r[i-1]*a+r[i-2];if(u>i){d=(d+1)*a}c=Math.ceil(d/p);do{m=multiplySmall(r,c);if(compareAbs(m,o)<=0)break;c--}while(c);s.push(c);o=subtract(o,m)}s.reverse();return[arrayToSmall(s),arrayToSmall(o)]}function divModSmall(e,r){var n=e.length,i=createArray(n),s=t,o,a,c,u;c=0;for(o=n-1;o>=0;--o){u=c*s+e[o];a=truncate(u/r);c=u-a*r;i[o]=a|0}return[i,c|0]}function divModAny(e,r){var n,i=parseValue(r);if(a){return[new NativeBigInt(e.value/i.value),new NativeBigInt(e.value%i.value)]}var s=e.value,o=i.value;var c;if(o===0)throw new Error("Cannot divide by zero");if(e.isSmall){if(i.isSmall){return[new SmallInteger(truncate(s/o)),new SmallInteger(s%o)]}return[Integer[0],e]}if(i.isSmall){if(o===1)return[e,Integer[0]];if(o==-1)return[e.negate(),Integer[0]];var u=Math.abs(o);if(u<t){n=divModSmall(s,u);c=arrayToSmall(n[0]);var d=n[1];if(e.sign)d=-d;if(typeof c==="number"){if(e.sign!==i.sign)c=-c;return[new SmallInteger(c),new SmallInteger(d)]}return[new BigInteger(c,e.sign!==i.sign),new SmallInteger(d)]}o=smallToArray(u)}var p=compareAbs(s,o);if(p===-1)return[Integer[0],e];if(p===0)return[Integer[e.sign===i.sign?1:-1],Integer[0]];if(s.length+o.length<=200)n=divMod1(s,o);else n=divMod2(s,o);c=n[0];var m=e.sign!==i.sign,y=n[1],g=e.sign;if(typeof c==="number"){if(m)c=-c;c=new SmallInteger(c)}else c=new BigInteger(c,m);if(typeof y==="number"){if(g)y=-y;y=new SmallInteger(y)}else y=new BigInteger(y,g);return[c,y]}BigInteger.prototype.divmod=function(e){var t=divModAny(this,e);return{quotient:t[0],remainder:t[1]}};NativeBigInt.prototype.divmod=SmallInteger.prototype.divmod=BigInteger.prototype.divmod;BigInteger.prototype.divide=function(e){return divModAny(this,e)[0]};NativeBigInt.prototype.over=NativeBigInt.prototype.divide=function(e){return new NativeBigInt(this.value/parseValue(e).value)};SmallInteger.prototype.over=SmallInteger.prototype.divide=BigInteger.prototype.over=BigInteger.prototype.divide;BigInteger.prototype.mod=function(e){return divModAny(this,e)[1]};NativeBigInt.prototype.mod=NativeBigInt.prototype.remainder=function(e){return new NativeBigInt(this.value%parseValue(e).value)};SmallInteger.prototype.remainder=SmallInteger.prototype.mod=BigInteger.prototype.remainder=BigInteger.prototype.mod;BigInteger.prototype.pow=function(e){var t=parseValue(e),r=this.value,n=t.value,i,s,o;if(n===0)return Integer[1];if(r===0)return Integer[0];if(r===1)return Integer[1];if(r===-1)return t.isEven()?Integer[1]:Integer[-1];if(t.sign){return Integer[0]}if(!t.isSmall)throw new Error("The exponent "+t.toString()+" is too large.");if(this.isSmall){if(isPrecise(i=Math.pow(r,n)))return new SmallInteger(truncate(i))}s=this;o=Integer[1];while(true){if(n&1===1){o=o.times(s);--n}if(n===0)break;n/=2;s=s.square()}return o};SmallInteger.prototype.pow=BigInteger.prototype.pow;NativeBigInt.prototype.pow=function(e){var t=parseValue(e);var r=this.value,n=t.value;var i=BigInt(0),s=BigInt(1),o=BigInt(2);if(n===i)return Integer[1];if(r===i)return Integer[0];if(r===s)return Integer[1];if(r===BigInt(-1))return t.isEven()?Integer[1]:Integer[-1];if(t.isNegative())return new NativeBigInt(i);var a=this;var c=Integer[1];while(true){if((n&s)===s){c=c.times(a);--n}if(n===i)break;n/=o;a=a.square()}return c};BigInteger.prototype.modPow=function(e,t){e=parseValue(e);t=parseValue(t);if(t.isZero())throw new Error("Cannot take modPow with modulus 0");var r=Integer[1],n=this.mod(t);if(e.isNegative()){e=e.multiply(Integer[-1]);n=n.modInv(t)}while(e.isPositive()){if(n.isZero())return Integer[0];if(e.isOdd())r=r.multiply(n).mod(t);e=e.divide(2);n=n.square().mod(t)}return r};NativeBigInt.prototype.modPow=SmallInteger.prototype.modPow=BigInteger.prototype.modPow;function compareAbs(e,t){if(e.length!==t.length){return e.length>t.length?1:-1}for(var r=e.length-1;r>=0;r--){if(e[r]!==t[r])return e[r]>t[r]?1:-1}return 0}BigInteger.prototype.compareAbs=function(e){var t=parseValue(e),r=this.value,n=t.value;if(t.isSmall)return 1;return compareAbs(r,n)};SmallInteger.prototype.compareAbs=function(e){var t=parseValue(e),r=Math.abs(this.value),n=t.value;if(t.isSmall){n=Math.abs(n);return r===n?0:r>n?1:-1}return-1};NativeBigInt.prototype.compareAbs=function(e){var t=this.value;var r=parseValue(e).value;t=t>=0?t:-t;r=r>=0?r:-r;return t===r?0:t>r?1:-1};BigInteger.prototype.compare=function(e){if(e===Infinity){return-1}if(e===-Infinity){return 1}var t=parseValue(e),r=this.value,n=t.value;if(this.sign!==t.sign){return t.sign?1:-1}if(t.isSmall){return this.sign?-1:1}return compareAbs(r,n)*(this.sign?-1:1)};BigInteger.prototype.compareTo=BigInteger.prototype.compare;SmallInteger.prototype.compare=function(e){if(e===Infinity){return-1}if(e===-Infinity){return 1}var t=parseValue(e),r=this.value,n=t.value;if(t.isSmall){return r==n?0:r>n?1:-1}if(r<0!==t.sign){return r<0?-1:1}return r<0?1:-1};SmallInteger.prototype.compareTo=SmallInteger.prototype.compare;NativeBigInt.prototype.compare=function(e){if(e===Infinity){return-1}if(e===-Infinity){return 1}var t=this.value;var r=parseValue(e).value;return t===r?0:t>r?1:-1};NativeBigInt.prototype.compareTo=NativeBigInt.prototype.compare;BigInteger.prototype.equals=function(e){return this.compare(e)===0};NativeBigInt.prototype.eq=NativeBigInt.prototype.equals=SmallInteger.prototype.eq=SmallInteger.prototype.equals=BigInteger.prototype.eq=BigInteger.prototype.equals;BigInteger.prototype.notEquals=function(e){return this.compare(e)!==0};NativeBigInt.prototype.neq=NativeBigInt.prototype.notEquals=SmallInteger.prototype.neq=SmallInteger.prototype.notEquals=BigInteger.prototype.neq=BigInteger.prototype.notEquals;BigInteger.prototype.greater=function(e){return this.compare(e)>0};NativeBigInt.prototype.gt=NativeBigInt.prototype.greater=SmallInteger.prototype.gt=SmallInteger.prototype.greater=BigInteger.prototype.gt=BigInteger.prototype.greater;BigInteger.prototype.lesser=function(e){return this.compare(e)<0};NativeBigInt.prototype.lt=NativeBigInt.prototype.lesser=SmallInteger.prototype.lt=SmallInteger.prototype.lesser=BigInteger.prototype.lt=BigInteger.prototype.lesser;BigInteger.prototype.greaterOrEquals=function(e){return this.compare(e)>=0};NativeBigInt.prototype.geq=NativeBigInt.prototype.greaterOrEquals=SmallInteger.prototype.geq=SmallInteger.prototype.greaterOrEquals=BigInteger.prototype.geq=BigInteger.prototype.greaterOrEquals;BigInteger.prototype.lesserOrEquals=function(e){return this.compare(e)<=0};NativeBigInt.prototype.leq=NativeBigInt.prototype.lesserOrEquals=SmallInteger.prototype.leq=SmallInteger.prototype.lesserOrEquals=BigInteger.prototype.leq=BigInteger.prototype.lesserOrEquals;BigInteger.prototype.isEven=function(){return(this.value[0]&1)===0};SmallInteger.prototype.isEven=function(){return(this.value&1)===0};NativeBigInt.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)};BigInteger.prototype.isOdd=function(){return(this.value[0]&1)===1};SmallInteger.prototype.isOdd=function(){return(this.value&1)===1};NativeBigInt.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)};BigInteger.prototype.isPositive=function(){return!this.sign};SmallInteger.prototype.isPositive=function(){return this.value>0};NativeBigInt.prototype.isPositive=SmallInteger.prototype.isPositive;BigInteger.prototype.isNegative=function(){return this.sign};SmallInteger.prototype.isNegative=function(){return this.value<0};NativeBigInt.prototype.isNegative=SmallInteger.prototype.isNegative;BigInteger.prototype.isUnit=function(){return false};SmallInteger.prototype.isUnit=function(){return Math.abs(this.value)===1};NativeBigInt.prototype.isUnit=function(){return this.abs().value===BigInt(1)};BigInteger.prototype.isZero=function(){return false};SmallInteger.prototype.isZero=function(){return this.value===0};NativeBigInt.prototype.isZero=function(){return this.value===BigInt(0)};BigInteger.prototype.isDivisibleBy=function(e){var t=parseValue(e);if(t.isZero())return false;if(t.isUnit())return true;if(t.compareAbs(2)===0)return this.isEven();return this.mod(t).isZero()};NativeBigInt.prototype.isDivisibleBy=SmallInteger.prototype.isDivisibleBy=BigInteger.prototype.isDivisibleBy;function isBasicPrime(e){var t=e.abs();if(t.isUnit())return false;if(t.equals(2)||t.equals(3)||t.equals(5))return true;if(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))return false;if(t.lesser(49))return true}function millerRabinTest(e,t){var r=e.prev(),i=r,s=0,o,a,c,u;while(i.isEven())i=i.divide(2),s++;e:for(c=0;c<t.length;c++){if(e.lesser(t[c]))continue;u=n(t[c]).modPow(i,e);if(u.isUnit()||u.equals(r))continue;for(o=s-1;o!=0;o--){u=u.square().mod(e);if(u.isUnit())return false;if(u.equals(r))continue e}return false}return true}BigInteger.prototype.isPrime=function(t){var r=isBasicPrime(this);if(r!==e)return r;var i=this.abs();var s=i.bitLength();if(s<=64)return millerRabinTest(i,[2,3,5,7,11,13,17,19,23,29,31,37]);var o=Math.log(2)*s.toJSNumber();var a=Math.ceil(t===true?2*Math.pow(o,2):o);for(var c=[],u=0;u<a;u++){c.push(n(u+2))}return millerRabinTest(i,c)};NativeBigInt.prototype.isPrime=SmallInteger.prototype.isPrime=BigInteger.prototype.isPrime;BigInteger.prototype.isProbablePrime=function(t,r){var i=isBasicPrime(this);if(i!==e)return i;var s=this.abs();var o=t===e?5:t;for(var a=[],c=0;c<o;c++){a.push(n.randBetween(2,s.minus(2),r))}return millerRabinTest(s,a)};NativeBigInt.prototype.isProbablePrime=SmallInteger.prototype.isProbablePrime=BigInteger.prototype.isProbablePrime;BigInteger.prototype.modInv=function(e){var t=n.zero,r=n.one,i=parseValue(e),s=this.abs(),o,a,c;while(!s.isZero()){o=i.divide(s);a=t;c=i;t=r;i=s;r=a.subtract(o.multiply(r));s=c.subtract(o.multiply(s))}if(!i.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");if(t.compare(0)===-1){t=t.add(e)}if(this.isNegative()){return t.negate()}return t};NativeBigInt.prototype.modInv=SmallInteger.prototype.modInv=BigInteger.prototype.modInv;BigInteger.prototype.next=function(){var e=this.value;if(this.sign){return subtractSmall(e,1,this.sign)}return new BigInteger(addSmall(e,1),this.sign)};SmallInteger.prototype.next=function(){var e=this.value;if(e+1<i)return new SmallInteger(e+1);return new BigInteger(s,false)};NativeBigInt.prototype.next=function(){return new NativeBigInt(this.value+BigInt(1))};BigInteger.prototype.prev=function(){var e=this.value;if(this.sign){return new BigInteger(addSmall(e,1),true)}return subtractSmall(e,1,this.sign)};SmallInteger.prototype.prev=function(){var e=this.value;if(e-1>-i)return new SmallInteger(e-1);return new BigInteger(s,true)};NativeBigInt.prototype.prev=function(){return new NativeBigInt(this.value-BigInt(1))};var c=[1];while(2*c[c.length-1]<=t)c.push(2*c[c.length-1]);var u=c.length,d=c[u-1];function shift_isSmall(e){return Math.abs(e)<=t}BigInteger.prototype.shiftLeft=function(e){var t=parseValue(e).toJSNumber();if(!shift_isSmall(t)){throw new Error(String(t)+" is too large for shifting.")}if(t<0)return this.shiftRight(-t);var r=this;if(r.isZero())return r;while(t>=u){r=r.multiply(d);t-=u-1}return r.multiply(c[t])};NativeBigInt.prototype.shiftLeft=SmallInteger.prototype.shiftLeft=BigInteger.prototype.shiftLeft;BigInteger.prototype.shiftRight=function(e){var t;var r=parseValue(e).toJSNumber();if(!shift_isSmall(r)){throw new Error(String(r)+" is too large for shifting.")}if(r<0)return this.shiftLeft(-r);var n=this;while(r>=u){if(n.isZero()||n.isNegative()&&n.isUnit())return n;t=divModAny(n,d);n=t[1].isNegative()?t[0].prev():t[0];r-=u-1}t=divModAny(n,c[r]);return t[1].isNegative()?t[0].prev():t[0]};NativeBigInt.prototype.shiftRight=SmallInteger.prototype.shiftRight=BigInteger.prototype.shiftRight;function bitwise(e,t,r){t=parseValue(t);var i=e.isNegative(),s=t.isNegative();var o=i?e.not():e,a=s?t.not():t;var c=0,u=0;var p=null,m=null;var y=[];while(!o.isZero()||!a.isZero()){p=divModAny(o,d);c=p[1].toJSNumber();if(i){c=d-1-c}m=divModAny(a,d);u=m[1].toJSNumber();if(s){u=d-1-u}o=p[0];a=m[0];y.push(r(c,u))}var g=r(i?1:0,s?1:0)!==0?n(-1):n(0);for(var b=y.length-1;b>=0;b-=1){g=g.multiply(d).add(n(y[b]))}return g}BigInteger.prototype.not=function(){return this.negate().prev()};NativeBigInt.prototype.not=SmallInteger.prototype.not=BigInteger.prototype.not;BigInteger.prototype.and=function(e){return bitwise(this,e,(function(e,t){return e&t}))};NativeBigInt.prototype.and=SmallInteger.prototype.and=BigInteger.prototype.and;BigInteger.prototype.or=function(e){return bitwise(this,e,(function(e,t){return e|t}))};NativeBigInt.prototype.or=SmallInteger.prototype.or=BigInteger.prototype.or;BigInteger.prototype.xor=function(e){return bitwise(this,e,(function(e,t){return e^t}))};NativeBigInt.prototype.xor=SmallInteger.prototype.xor=BigInteger.prototype.xor;var p=1<<30,m=(t&-t)*(t&-t)|p;function roughLOB(e){var r=e.value,n=typeof r==="number"?r|p:typeof r==="bigint"?r|BigInt(p):r[0]+r[1]*t|m;return n&-n}function integerLogarithm(e,t){if(t.compareTo(e)<=0){var r=integerLogarithm(e,t.square(t));var i=r.p;var s=r.e;var o=i.multiply(t);return o.compareTo(e)<=0?{p:o,e:s*2+1}:{p:i,e:s*2}}return{p:n(1),e:0}}BigInteger.prototype.bitLength=function(){var e=this;if(e.compareTo(n(0))<0){e=e.negate().subtract(n(1))}if(e.compareTo(n(0))===0){return n(0)}return n(integerLogarithm(e,n(2)).e).add(n(1))};NativeBigInt.prototype.bitLength=SmallInteger.prototype.bitLength=BigInteger.prototype.bitLength;function max(e,t){e=parseValue(e);t=parseValue(t);return e.greater(t)?e:t}function min(e,t){e=parseValue(e);t=parseValue(t);return e.lesser(t)?e:t}function gcd(e,t){e=parseValue(e).abs();t=parseValue(t).abs();if(e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;var r=Integer[1],n,i;while(e.isEven()&&t.isEven()){n=min(roughLOB(e),roughLOB(t));e=e.divide(n);t=t.divide(n);r=r.multiply(n)}while(e.isEven()){e=e.divide(roughLOB(e))}do{while(t.isEven()){t=t.divide(roughLOB(t))}if(e.greater(t)){i=t;t=e;e=i}t=t.subtract(e)}while(!t.isZero());return r.isUnit()?e:e.multiply(r)}function lcm(e,t){e=parseValue(e).abs();t=parseValue(t).abs();return e.divide(gcd(e,t)).multiply(t)}function randBetween(e,r,n){e=parseValue(e);r=parseValue(r);var i=n||Math.random;var s=min(e,r),o=max(e,r);var a=o.subtract(s).add(1);if(a.isSmall)return s.add(Math.floor(i()*a));var c=toBase(a,t).value;var u=[],d=true;for(var p=0;p<c.length;p++){var m=d?c[p]+(p+1<c.length?c[p+1]/t:0):t;var y=truncate(i()*m);u.push(y);if(y<c[p])d=false}return s.add(Integer.fromArray(u,t,false))}var parseBase=function(e,t,r,n){r=r||o;e=String(e);if(!n){e=e.toLowerCase();r=r.toLowerCase()}var i=e.length;var s;var a=Math.abs(t);var c={};for(s=0;s<r.length;s++){c[r[s]]=s}for(s=0;s<i;s++){var u=e[s];if(u==="-")continue;if(u in c){if(c[u]>=a){if(u==="1"&&a===1)continue;throw new Error(u+" is not a valid digit in base "+t+".")}}}t=parseValue(t);var d=[];var p=e[0]==="-";for(s=p?1:0;s<e.length;s++){var u=e[s];if(u in c)d.push(parseValue(c[u]));else if(u==="<"){var m=s;do{s++}while(e[s]!==">"&&s<e.length);d.push(parseValue(e.slice(m+1,s)))}else throw new Error(u+" is not a valid character")}return parseBaseFromArray(d,t,p)};function parseBaseFromArray(e,t,r){var n=Integer[0],i=Integer[1],s;for(s=e.length-1;s>=0;s--){n=n.add(e[s].times(i));i=i.times(t)}return r?n.negate():n}function stringify(e,t){t=t||o;if(e<t.length){return t[e]}return"<"+e+">"}function toBase(e,t){t=n(t);if(t.isZero()){if(e.isZero())return{value:[0],isNegative:false};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:false};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:false};var r=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);r.unshift([1]);return{value:[].concat.apply([],r),isNegative:false}}var i=false;if(e.isNegative()&&t.isPositive()){i=true;e=e.abs()}if(t.isUnit()){if(e.isZero())return{value:[0],isNegative:false};return{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:i}}var s=[];var o=e,a;while(o.isNegative()||o.compareAbs(t)>=0){a=o.divmod(t);o=a.quotient;var c=a.remainder;if(c.isNegative()){c=t.minus(c).abs();o=o.next()}s.push(c.toJSNumber())}s.push(o.toJSNumber());return{value:s.reverse(),isNegative:i}}function toBaseString(e,t,r){var n=toBase(e,t);return(n.isNegative?"-":"")+n.value.map((function(e){return stringify(e,r)})).join("")}BigInteger.prototype.toArray=function(e){return toBase(this,e)};SmallInteger.prototype.toArray=function(e){return toBase(this,e)};NativeBigInt.prototype.toArray=function(e){return toBase(this,e)};BigInteger.prototype.toString=function(t,r){if(t===e)t=10;if(t!==10||r)return toBaseString(this,t,r);var n=this.value,i=n.length,s=String(n[--i]),o="0000000",a;while(--i>=0){a=String(n[i]);s+=o.slice(a.length)+a}var c=this.sign?"-":"";return c+s};SmallInteger.prototype.toString=function(t,r){if(t===e)t=10;if(t!=10||r)return toBaseString(this,t,r);return String(this.value)};NativeBigInt.prototype.toString=SmallInteger.prototype.toString;NativeBigInt.prototype.toJSON=BigInteger.prototype.toJSON=SmallInteger.prototype.toJSON=function(){return this.toString()};BigInteger.prototype.valueOf=function(){return parseInt(this.toString(),10)};BigInteger.prototype.toJSNumber=BigInteger.prototype.valueOf;SmallInteger.prototype.valueOf=function(){return this.value};SmallInteger.prototype.toJSNumber=SmallInteger.prototype.valueOf;NativeBigInt.prototype.valueOf=NativeBigInt.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function parseStringValue(e){if(isPrecise(+e)){var t=+e;if(t===truncate(t))return a?new NativeBigInt(BigInt(t)):new SmallInteger(t);throw new Error("Invalid integer: "+e)}var n=e[0]==="-";if(n)e=e.slice(1);var i=e.split(/e/i);if(i.length>2)throw new Error("Invalid integer: "+i.join("e"));if(i.length===2){var s=i[1];if(s[0]==="+")s=s.slice(1);s=+s;if(s!==truncate(s)||!isPrecise(s))throw new Error("Invalid integer: "+s+" is not a valid exponent.");var o=i[0];var c=o.indexOf(".");if(c>=0){s-=o.length-c-1;o=o.slice(0,c)+o.slice(c+1)}if(s<0)throw new Error("Cannot include negative exponent part for integers");o+=new Array(s+1).join("0");e=o}var u=/^([0-9][0-9]*)$/.test(e);if(!u)throw new Error("Invalid integer: "+e);if(a){return new NativeBigInt(BigInt(n?"-"+e:e))}var d=[],p=e.length,m=r,y=p-m;while(p>0){d.push(+e.slice(y,p));y-=m;if(y<0)y=0;p-=m}trim(d);return new BigInteger(d,n)}function parseNumberValue(e){if(a){return new NativeBigInt(BigInt(e))}if(isPrecise(e)){if(e!==truncate(e))throw new Error(e+" is not an integer.");return new SmallInteger(e)}return parseStringValue(e.toString())}function parseValue(e){if(typeof e==="number"){return parseNumberValue(e)}if(typeof e==="string"){return parseStringValue(e)}if(typeof e==="bigint"){return new NativeBigInt(e)}return e}for(var y=0;y<1e3;y++){Integer[y]=parseValue(y);if(y>0)Integer[-y]=parseValue(-y)}Integer.one=Integer[1];Integer.zero=Integer[0];Integer.minusOne=Integer[-1];Integer.max=max;Integer.min=min;Integer.gcd=gcd;Integer.lcm=lcm;Integer.isInstance=function(e){return e instanceof BigInteger||e instanceof SmallInteger||e instanceof NativeBigInt};Integer.randBetween=randBetween;Integer.fromArray=function(e,t,r){return parseBaseFromArray(e.map(parseValue),parseValue(t||10),r)};return Integer}();if(true&&e.hasOwnProperty("exports")){e.exports=n}if(typeof define==="function"&&define.amd){define((function(){return n}))}},78134:function(e){(function(t){"use strict";var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,y=1e9;function clone(e){var t,r,g,b=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},v=new BigNumber(1),w=20,_=4,C=-7,P=21,O=-1e7,E=1e7,I=false,k=1,T=0,x={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},R="0123456789abcdefghijklmnopqrstuvwxyz",B=true;function BigNumber(e,t){var i,o,c,p,m,y,b,v,C=this;if(!(C instanceof BigNumber))return new BigNumber(e,t);if(t==null){if(e&&e._isBigNumber===true){C.s=e.s;if(!e.c||e.e>E){C.c=C.e=null}else if(e.e<O){C.c=[C.e=0]}else{C.e=e.e;C.c=e.c.slice()}return}if((y=typeof e=="number")&&e*0==0){C.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(p=0,m=e;m>=10;m/=10,p++);if(p>E){C.c=C.e=null}else{C.e=p;C.c=[e]}return}v=String(e)}else{if(!n.test(v=String(e)))return g(C,v,y);C.s=v.charCodeAt(0)==45?(v=v.slice(1),-1):1}if((p=v.indexOf("."))>-1)v=v.replace(".","");if((m=v.search(/e/i))>0){if(p<0)p=m;p+=+v.slice(m+1);v=v.substring(0,m)}else if(p<0){p=v.length}}else{intCheck(t,2,R.length,"Base");if(t==10&&B){C=new BigNumber(e);return round(C,w+C.e+1,_)}v=String(e);if(y=typeof e=="number"){if(e*0!=0)return g(C,v,y,t);C.s=1/e<0?(v=v.slice(1),-1):1;if(BigNumber.DEBUG&&v.replace(/^0\.0*|\./,"").length>15){throw Error(a+e)}}else{C.s=v.charCodeAt(0)===45?(v=v.slice(1),-1):1}i=R.slice(0,t);p=m=0;for(b=v.length;m<b;m++){if(i.indexOf(o=v.charAt(m))<0){if(o=="."){if(m>p){p=b;continue}}else if(!c){if(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase())){c=true;m=-1;p=0;continue}}return g(C,String(e),y,t)}}y=false;v=r(v,t,10,C.s);if((p=v.indexOf("."))>-1)v=v.replace(".","");else p=v.length}for(m=0;v.charCodeAt(m)===48;m++);for(b=v.length;v.charCodeAt(--b)===48;);if(v=v.slice(m,++b)){b-=m;if(y&&BigNumber.DEBUG&&b>15&&(e>d||e!==s(e))){throw Error(a+C.s*e)}if((p=p-m-1)>E){C.c=C.e=null}else if(p<O){C.c=[C.e=0]}else{C.e=p;C.c=[];m=(p+1)%u;if(p<0)m+=u;if(m<b){if(m)C.c.push(+v.slice(0,m));for(b-=u;m<b;){C.c.push(+v.slice(m,m+=u))}m=u-(v=v.slice(m)).length}else{m-=b}for(;m--;v+="0");C.c.push(+v)}}else{C.c=[C.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(e!=null){if(typeof e=="object"){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];intCheck(r,0,y,t);w=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];intCheck(r,0,8,t);_=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){intCheck(r[0],-y,0,t);intCheck(r[1],0,y,t);C=r[0];P=r[1]}else{intCheck(r,-y,y,t);C=-(P=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){intCheck(r[0],-y,-1,t);intCheck(r[1],1,y,t);O=r[0];E=r[1]}else{intCheck(r,-y,y,t);if(r){O=-(E=r<0?-r:r)}else{throw Error(o+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(r===!!r){if(r){if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){I=r}else{I=!r;throw Error(o+"crypto unavailable")}}else{I=r}}else{throw Error(o+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];intCheck(r,0,9,t);k=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];intCheck(r,0,y,t);T=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if(typeof r=="object")x=r;else throw Error(o+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if(typeof r=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(r)){B=r.slice(0,10)=="0123456789";R=r}else{throw Error(o+t+" invalid: "+r)}}}else{throw Error(o+"Object expected: "+e)}}return{DECIMAL_PLACES:w,ROUNDING_MODE:_,EXPONENTIAL_AT:[C,P],RANGE:[O,E],CRYPTO:I,MODULO_MODE:k,POW_PRECISION:T,FORMAT:x,ALPHABET:R}};BigNumber.isBigNumber=function(e){if(!e||e._isBigNumber!==true)return false;if(!BigNumber.DEBUG)return true;var t,r,n=e.c,i=e.e,a=e.s;e:if({}.toString.call(n)=="[object Array]"){if((a===1||a===-1)&&i>=-y&&i<=y&&i===s(i)){if(n[0]===0){if(i===0&&n.length===1)return true;break e}t=(i+1)%u;if(t<1)t+=u;if(String(n[0]).length==t){for(t=0;t<n.length;t++){r=n[t];if(r<0||r>=c||r!==s(r))break e}if(r!==0)return true}}}else if(n===null&&i===null&&(a===null||a===1||a===-1)){return true}throw Error(o+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,-1)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,1)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return s(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(e){var r,n,a,c,d,m=0,g=[],b=new BigNumber(v);if(e==null)e=w;else intCheck(e,0,y);c=i(e/u);if(I){if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(c*=2));for(;m<c;){d=r[m]*131072+(r[m+1]>>>11);if(d>=9e15){n=crypto.getRandomValues(new Uint32Array(2));r[m]=n[0];r[m+1]=n[1]}else{g.push(d%1e14);m+=2}}m=c/2}else if(crypto.randomBytes){r=crypto.randomBytes(c*=7);for(;m<c;){d=(r[m]&31)*281474976710656+r[m+1]*1099511627776+r[m+2]*4294967296+r[m+3]*16777216+(r[m+4]<<16)+(r[m+5]<<8)+r[m+6];if(d>=9e15){crypto.randomBytes(7).copy(r,m)}else{g.push(d%1e14);m+=7}}m=c/7}else{I=false;throw Error(o+"crypto unavailable")}}if(!I){for(;m<c;){d=t();if(d<9e15)g[m++]=d%1e14}}c=g[--m];e%=u;if(c&&e){d=p[u-e];g[m]=s(c/d)*d}for(;g[m]===0;g.pop(),m--);if(m<0){g=[a=0]}else{for(a=-1;g[0]===0;g.splice(0,1),a-=u);for(m=1,d=g[0];d>=10;d/=10,m++);if(m<u)a-=u-m}b.e=a;b.c=g;return b}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,n){var i,s=[0],o,a=0,c=e.length;for(;a<c;){for(o=s.length;o--;s[o]*=t);s[0]+=n.indexOf(e.charAt(a++));for(i=0;i<s.length;i++){if(s[i]>r-1){if(s[i+1]==null)s[i+1]=0;s[i+1]+=s[i]/r|0;s[i]%=r}}}return s.reverse()}return function(r,n,i,s,o){var a,c,u,d,p,m,y,g,b=r.indexOf("."),v=w,C=_;if(b>=0){d=T;T=0;r=r.replace(".","");g=new BigNumber(n);m=g.pow(r.length-b);T=d;g.c=toBaseOut(toFixedPoint(coeffToString(m.c),m.e,"0"),10,i,e);g.e=g.c.length}y=toBaseOut(r,n,i,o?(a=R,e):(a=e,R));u=d=y.length;for(;y[--d]==0;y.pop());if(!y[0])return a.charAt(0);if(b<0){--u}else{m.c=y;m.e=u;m.s=s;m=t(m,g,v,C,i);y=m.c;p=m.r;u=m.e}c=u+v+1;b=y[c];d=i/2;p=p||c<0||y[c+1]!=null;p=C<4?(b!=null||p)&&(C==0||C==(m.s<0?3:2)):b>d||b==d&&(C==4||p||C==6&&y[c-1]&1||C==(m.s<0?8:7));if(c<1||!y[0]){r=p?toFixedPoint(a.charAt(1),-v,a.charAt(0)):a.charAt(0)}else{y.length=c;if(p){for(--i;++y[--c]>i;){y[c]=0;if(!c){++u;y=[1].concat(y)}}}for(d=y.length;!y[--d];);for(b=0,r="";b<=d;r+=a.charAt(y[b++]));r=toFixedPoint(r,u,a.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%m,d=t/m|0;for(e=e.slice();c--;){s=e[c]%m;o=e[c]/m|0;n=d*s+o*u;i=u*s+n%m*m+a;a=(i/r|0)+(n/m|0)+d*o;e[c]=i%r}if(a)e=[a].concat(e);return e}function compare(e,t,r,n){var i,s;if(r!=n){s=r>n?1:-1}else{for(i=s=0;i<r;i++){if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}}}return s}function subtract(e,t,r,n){var i=0;for(;r--;){e[r]-=i;i=e[r]<t[r]?1:0;e[r]=i*n+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,n,i){var o,a,d,p,m,y,g,b,v,w,_,C,P,O,E,I,k,T=e.s==t.s?1:-1,x=e.c,R=t.c;if(!x||!x[0]||!R||!R[0]){return new BigNumber(!e.s||!t.s||(x?R&&x[0]==R[0]:!R)?NaN:x&&x[0]==0||!R?T*0:T/0)}b=new BigNumber(T);v=b.c=[];a=e.e-t.e;T=r+a+1;if(!i){i=c;a=bitFloor(e.e/u)-bitFloor(t.e/u);T=T/u|0}for(d=0;R[d]==(x[d]||0);d++);if(R[d]>(x[d]||0))a--;if(T<0){v.push(1);p=true}else{O=x.length;I=R.length;d=0;T+=2;m=s(i/(R[0]+1));if(m>1){R=multiply(R,m,i);x=multiply(x,m,i);I=R.length;O=x.length}P=I;w=x.slice(0,I);_=w.length;for(;_<I;w[_++]=0);k=R.slice();k=[0].concat(k);E=R[0];if(R[1]>=i/2)E++;do{m=0;o=compare(R,w,I,_);if(o<0){C=w[0];if(I!=_)C=C*i+(w[1]||0);m=s(C/E);if(m>1){if(m>=i)m=i-1;y=multiply(R,m,i);g=y.length;_=w.length;while(compare(y,w,g,_)==1){m--;subtract(y,I<g?k:R,g,i);g=y.length;o=1}}else{if(m==0){o=m=1}y=R.slice();g=y.length}if(g<_)y=[0].concat(y);subtract(w,y,_,i);_=w.length;if(o==-1){while(compare(R,w,I,_)<1){m++;subtract(w,I<_?k:R,_,i);_=w.length}}}else if(o===0){m++;w=[0]}v[d++]=m;if(w[0]){w[_++]=x[P]||0}else{w=[x[P]];_=1}}while((P++<O||w[0]!=null)&&T--);p=w[0]!=null;if(!v[0])v.splice(0,1)}if(i==c){for(d=1,T=v[0];T>=10;T/=10,d++);round(b,r+(b.e=d+a*u-1)+1,n,p)}else{b.e=a;b.r=+p}return b}}();function format(e,t,r,n){var i,s,o,a,c;if(r==null)r=_;else intCheck(r,0,8);if(!e.c)return e.toString();i=e.c[0];o=e.e;if(t==null){c=coeffToString(e.c);c=n==1||n==2&&(o<=C||o>=P)?toExponential(c,o):toFixedPoint(c,o,"0")}else{e=round(new BigNumber(e),t,r);s=e.e;c=coeffToString(e.c);a=c.length;if(n==1||n==2&&(t<=s||s<=C)){for(;a<t;c+="0",a++);c=toExponential(c,s)}else{t-=o;c=toFixedPoint(c,s,"0");if(s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else{t+=s-a;if(t>0){if(s+1==a)c+=".";for(;t--;c+="0");}}}}return e.s<0&&i?"-"+c:c}function maxOrMin(e,t){var r,n,i=1,s=new BigNumber(e[0]);for(;i<e.length;i++){n=new BigNumber(e[i]);if(!n.s||(r=compare(s,n))===t||r===0&&s.s===t){s=n}}return s}function normalise(e,t,r){var n=1,i=t.length;for(;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);if((r=n+r*u-1)>E){e.c=e.e=null}else if(r<O){e.c=[e.e=0]}else{e.e=r;e.c=t}return e}g=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,a,c,u){var d,p=c?a:a.replace(i,"");if(n.test(p)){s.s=isNaN(p)?null:p<0?-1:1}else{if(!c){p=p.replace(e,(function(e,t,r){d=(r=r.toLowerCase())=="x"?16:r=="b"?2:8;return!u||u==d?t:e}));if(u){d=u;p=p.replace(t,"$1").replace(r,"0.$1")}if(a!=p)return new BigNumber(p,d)}if(BigNumber.DEBUG){throw Error(o+"Not a"+(u?" base "+u:"")+" number: "+a)}s.s=null}s.c=s.e=null}}();function round(e,t,r,n){var o,a,d,m,y,g,b,v=e.c,w=p;if(v){e:{for(o=1,m=v[0];m>=10;m/=10,o++);a=t-o;if(a<0){a+=u;d=t;y=v[g=0];b=s(y/w[o-d-1]%10)}else{g=i((a+1)/u);if(g>=v.length){if(n){for(;v.length<=g;v.push(0));y=b=0;o=1;a%=u;d=a-u+1}else{break e}}else{y=m=v[g];for(o=1;m>=10;m/=10,o++);a%=u;d=a-u+o;b=d<0?0:s(y/w[o-d-1]%10)}}n=n||t<0||v[g+1]!=null||(d<0?y:y%w[o-d-1]);n=r<4?(b||n)&&(r==0||r==(e.s<0?3:2)):b>5||b==5&&(r==4||n||r==6&&(a>0?d>0?y/w[o-d]:0:v[g-1])%10&1||r==(e.s<0?8:7));if(t<1||!v[0]){v.length=0;if(n){t-=e.e+1;v[0]=w[(u-t%u)%u];e.e=-t||0}else{v[0]=e.e=0}return e}if(a==0){v.length=g;m=1;g--}else{v.length=g+1;m=w[u-a];v[g]=d>0?s(y/w[o-d]%w[d])*m:0}if(n){for(;;){if(g==0){for(a=1,d=v[0];d>=10;d/=10,a++);d=v[0]+=m;for(m=1;d>=10;d/=10,m++);if(a!=m){e.e++;if(v[0]==c)v[0]=1}break}else{v[g]+=m;if(v[g]!=c)break;v[g--]=0;m=1}}}for(a=v.length;v[--a]===0;v.pop());}if(e.e>E){e.c=e.e=null}else if(e.e<O){e.c=[e.e=0]}}return e}function valueOf(e){var t,r=e.e;if(r===null)return e.toString();t=coeffToString(e.c);t=r<=C||r>=P?toExponential(t,r):toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}b.absoluteValue=b.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};b.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};b.decimalPlaces=b.dp=function(e,t){var r,n,i,s=this;if(e!=null){intCheck(e,0,y);if(t==null)t=_;else intCheck(t,0,8);return round(new BigNumber(s),e+s.e+1,t)}if(!(r=s.c))return null;n=((i=r.length-1)-bitFloor(this.e/u))*u;if(i=r[i])for(;i%10==0;i/=10,n--);if(n<0)n=0;return n};b.dividedBy=b.div=function(e,r){return t(this,new BigNumber(e,r),w,_)};b.dividedToIntegerBy=b.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};b.exponentiatedBy=b.pow=function(e,t){var r,n,a,c,d,p,m,y,g,b=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(o+"Exponent not an integer: "+valueOf(e))}if(t!=null)t=new BigNumber(t);p=e.e>14;if(!b.c||!b.c[0]||b.c[0]==1&&!b.e&&b.c.length==1||!e.c||!e.c[0]){g=new BigNumber(Math.pow(+valueOf(b),p?e.s*(2-isOdd(e)):+valueOf(e)));return t?g.mod(t):g}m=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);n=!m&&b.isInteger()&&t.isInteger();if(n)b=b.mod(t)}else if(e.e>9&&(b.e>0||b.e<-1||(b.e==0?b.c[0]>1||p&&b.c[1]>=24e7:b.c[0]<8e13||p&&b.c[0]<=9999975e7))){c=b.s<0&&isOdd(e)?-0:0;if(b.e>-1)c=1/c;return new BigNumber(m?1/c:c)}else if(T){c=i(T/u+2)}if(p){r=new BigNumber(.5);if(m)e.s=1;y=isOdd(e)}else{a=Math.abs(+valueOf(e));y=a%2}g=new BigNumber(v);for(;;){if(y){g=g.times(b);if(!g.c)break;if(c){if(g.c.length>c)g.c.length=c}else if(n){g=g.mod(t)}}if(a){a=s(a/2);if(a===0)break;y=a%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14){y=isOdd(e)}else{a=+valueOf(e);if(a===0)break;y=a%2}}b=b.times(b);if(c){if(b.c&&b.c.length>c)b.c.length=c}else if(n){b=b.mod(t)}}if(n)return g;if(m)g=v.div(g);return t?g.mod(t):c?round(g,T,_,d):g};b.integerValue=function(e){var t=new BigNumber(this);if(e==null)e=_;else intCheck(e,0,8);return round(t,t.e+1,e)};b.isEqualTo=b.eq=function(e,t){return compare(this,new BigNumber(e,t))===0};b.isFinite=function(){return!!this.c};b.isGreaterThan=b.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};b.isGreaterThanOrEqualTo=b.gte=function(e,t){return(t=compare(this,new BigNumber(e,t)))===1||t===0};b.isInteger=function(){return!!this.c&&bitFloor(this.e/u)>this.c.length-2};b.isLessThan=b.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};b.isLessThanOrEqualTo=b.lte=function(e,t){return(t=compare(this,new BigNumber(e,t)))===-1||t===0};b.isNaN=function(){return!this.s};b.isNegative=function(){return this.s<0};b.isPositive=function(){return this.s>0};b.isZero=function(){return!!this.c&&this.c[0]==0};b.minus=function(e,t){var r,n,i,s,o=this,a=o.s;e=new BigNumber(e,t);t=e.s;if(!a||!t)return new BigNumber(NaN);if(a!=t){e.s=-t;return o.plus(e)}var d=o.e/u,p=e.e/u,m=o.c,y=e.c;if(!d||!p){if(!m||!y)return m?(e.s=-t,e):new BigNumber(y?o:NaN);if(!m[0]||!y[0]){return y[0]?(e.s=-t,e):new BigNumber(m[0]?o:_==3?-0:0)}}d=bitFloor(d);p=bitFloor(p);m=m.slice();if(a=d-p){if(s=a<0){a=-a;i=m}else{p=d;i=y}i.reverse();for(t=a;t--;i.push(0));i.reverse()}else{n=(s=(a=m.length)<(t=y.length))?a:t;for(a=t=0;t<n;t++){if(m[t]!=y[t]){s=m[t]<y[t];break}}}if(s){i=m;m=y;y=i;e.s=-e.s}t=(n=y.length)-(r=m.length);if(t>0)for(;t--;m[r++]=0);t=c-1;for(;n>a;){if(m[--n]<y[n]){for(r=n;r&&!m[--r];m[r]=t);--m[r];m[n]+=c}m[n]-=y[n]}for(;m[0]==0;m.splice(0,1),--p);if(!m[0]){e.s=_==3?-1:1;e.c=[e.e=0];return e}return normalise(e,m,p)};b.modulo=b.mod=function(e,r){var n,i,s=this;e=new BigNumber(e,r);if(!s.c||!e.s||e.c&&!e.c[0]){return new BigNumber(NaN)}else if(!e.c||s.c&&!s.c[0]){return new BigNumber(s)}if(k==9){i=e.s;e.s=1;n=t(s,e,0,3);e.s=i;n.s*=i}else{n=t(s,e,0,k)}e=s.minus(n.times(e));if(!e.c[0]&&k==1)e.s=s.s;return e};b.multipliedBy=b.times=function(e,t){var r,n,i,s,o,a,d,p,y,g,b,v,w,_,C,P=this,O=P.c,E=(e=new BigNumber(e,t)).c;if(!O||!E||!O[0]||!E[0]){if(!P.s||!e.s||O&&!O[0]&&!E||E&&!E[0]&&!O){e.c=e.e=e.s=null}else{e.s*=P.s;if(!O||!E){e.c=e.e=null}else{e.c=[0];e.e=0}}return e}n=bitFloor(P.e/u)+bitFloor(e.e/u);e.s*=P.s;d=O.length;g=E.length;if(d<g){w=O;O=E;E=w;i=d;d=g;g=i}for(i=d+g,w=[];i--;w.push(0));_=c;C=m;for(i=g;--i>=0;){r=0;b=E[i]%C;v=E[i]/C|0;for(o=d,s=i+o;s>i;){p=O[--o]%C;y=O[o]/C|0;a=v*p+y*b;p=b*p+a%C*C+w[s]+r;r=(p/_|0)+(a/C|0)+v*y;w[s--]=p%_}w[s]=r}if(r){++n}else{w.splice(0,1)}return normalise(e,w,n)};b.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};b.plus=function(e,t){var r,n=this,i=n.s;e=new BigNumber(e,t);t=e.s;if(!i||!t)return new BigNumber(NaN);if(i!=t){e.s=-t;return n.minus(e)}var s=n.e/u,o=e.e/u,a=n.c,d=e.c;if(!s||!o){if(!a||!d)return new BigNumber(i/0);if(!a[0]||!d[0])return d[0]?e:new BigNumber(a[0]?n:i*0)}s=bitFloor(s);o=bitFloor(o);a=a.slice();if(i=s-o){if(i>0){o=s;r=d}else{i=-i;r=a}r.reverse();for(;i--;r.push(0));r.reverse()}i=a.length;t=d.length;if(i-t<0){r=d;d=a;a=r;t=i}for(i=0;t;){i=(a[--t]=a[t]+d[t]+i)/c|0;a[t]=c===a[t]?0:a[t]%c}if(i){a=[i].concat(a);++o}return normalise(e,a,o)};b.precision=b.sd=function(e,t){var r,n,i,s=this;if(e!=null&&e!==!!e){intCheck(e,1,y);if(t==null)t=_;else intCheck(t,0,8);return round(new BigNumber(s),e,t)}if(!(r=s.c))return null;i=r.length-1;n=i*u+1;if(i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}if(e&&s.e+1>n)n=s.e+1;return n};b.shiftedBy=function(e){intCheck(e,-d,d);return this.times("1e"+e)};b.squareRoot=b.sqrt=function(){var e,r,n,i,s,o=this,a=o.c,c=o.s,u=o.e,d=w+4,p=new BigNumber("0.5");if(c!==1||!a||!a[0]){return new BigNumber(!c||c<0&&(!a||a[0])?NaN:a?o:1/0)}c=Math.sqrt(+valueOf(o));if(c==0||c==1/0){r=coeffToString(a);if((r.length+u)%2==0)r+="0";c=Math.sqrt(+r);u=bitFloor((u+1)/2)-(u<0||u%2);if(c==1/0){r="5e"+u}else{r=c.toExponential();r=r.slice(0,r.indexOf("e")+1)+u}n=new BigNumber(r)}else{n=new BigNumber(c+"")}if(n.c[0]){u=n.e;c=u+d;if(c<3)c=0;for(;;){s=n;n=p.times(s.plus(t(o,s,d,1)));if(coeffToString(s.c).slice(0,c)===(r=coeffToString(n.c)).slice(0,c)){if(n.e<u)--c;r=r.slice(c-3,c+1);if(r=="9999"||!i&&r=="4999"){if(!i){round(s,s.e+w+2,0);if(s.times(s).eq(o)){n=s;break}}d+=4;c+=4;i=1}else{if(!+r||!+r.slice(1)&&r.charAt(0)=="5"){round(n,n.e+w+2,1);e=!n.times(n).eq(o)}break}}}}return round(n,n.e+w+1,_,e)};b.toExponential=function(e,t){if(e!=null){intCheck(e,0,y);e++}return format(this,e,t,1)};b.toFixed=function(e,t){if(e!=null){intCheck(e,0,y);e=e+this.e+1}return format(this,e,t)};b.toFormat=function(e,t,r){var n,i=this;if(r==null){if(e!=null&&t&&typeof t=="object"){r=t;t=null}else if(e&&typeof e=="object"){r=e;e=t=null}else{r=x}}else if(typeof r!="object"){throw Error(o+"Argument not an object: "+r)}n=i.toFixed(e,t);if(i.c){var s,a=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,d=r.groupSeparator||"",p=a[0],m=a[1],y=i.s<0,g=y?p.slice(1):p,b=g.length;if(u){s=c;c=u;u=s;b-=s}if(c>0&&b>0){s=b%c||c;p=g.substr(0,s);for(;s<b;s+=c)p+=d+g.substr(s,c);if(u>0)p+=d+g.slice(s);if(y)p="-"+p}n=m?p+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?m.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):m):p}return(r.prefix||"")+n+(r.suffix||"")};b.toFraction=function(e){var r,n,i,s,a,c,d,m,y,g,b,w,C=this,P=C.c;if(e!=null){d=new BigNumber(e);if(!d.isInteger()&&(d.c||d.s!==1)||d.lt(v)){throw Error(o+"Argument "+(d.isInteger()?"out of range: ":"not an integer: ")+valueOf(d))}}if(!P)return new BigNumber(C);r=new BigNumber(v);y=n=new BigNumber(v);i=m=new BigNumber(v);w=coeffToString(P);a=r.e=w.length-C.e-1;r.c[0]=p[(c=a%u)<0?u+c:c];e=!e||d.comparedTo(r)>0?a>0?r:y:d;c=E;E=1/0;d=new BigNumber(w);m.c[0]=0;for(;;){g=t(d,r,0,1);s=n.plus(g.times(i));if(s.comparedTo(e)==1)break;n=i;i=s;y=m.plus(g.times(s=y));m=s;r=d.minus(g.times(s=r));d=s}s=t(e.minus(n),i,0,1);m=m.plus(s.times(y));n=n.plus(s.times(i));m.s=y.s=C.s;a=a*2;b=t(y,i,a,_).minus(C).abs().comparedTo(t(m,n,a,_).minus(C).abs())<1?[y,i]:[m,n];E=c;return b};b.toNumber=function(){return+valueOf(this)};b.toPrecision=function(e,t){if(e!=null)intCheck(e,1,y);return format(this,e,t,2)};b.toString=function(e){var t,n=this,i=n.s,s=n.e;if(s===null){if(i){t="Infinity";if(i<0)t="-"+t}else{t="NaN"}}else{if(e==null){t=s<=C||s>=P?toExponential(coeffToString(n.c),s):toFixedPoint(coeffToString(n.c),s,"0")}else if(e===10&&B){n=round(new BigNumber(n),w+s+1,_);t=toFixedPoint(coeffToString(n.c),n.e,"0")}else{intCheck(e,2,R.length,"Base");t=r(toFixedPoint(coeffToString(n.c),s,"0"),10,e,i,true)}if(i<0&&n.c[0])t="-"+t}return t};b.valueOf=b.toJSON=function(){return valueOf(this)};b._isBigNumber=true;if(e!=null)BigNumber.set(e);return BigNumber}function bitFloor(e){var t=e|0;return e>0||e===t?t:t-1}function coeffToString(e){var t,r,n=1,i=e.length,s=e[0]+"";for(;n<i;){t=e[n++]+"";r=u-t.length;for(;r--;t="0"+t);s+=t}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function compare(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;r=i&&!i[0];n=s&&!s[0];if(r||n)return r?n?0:-a:o;if(o!=a)return o;r=o<0;n=c==u;if(!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;a=(c=i.length)<(u=s.length)?c:u;for(o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function intCheck(e,t,r,n){if(e<t||e>r||e!==s(e)){throw Error(o+(n||"Argument")+(typeof e=="number"?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/u)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else{n=e.length;if(++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else if(t<n){e=e.slice(0,t)+"."+e.slice(t)}}return e}r=clone();r["default"]=r.BigNumber=r;if(typeof define=="function"&&define.amd){define((function(){return r}))}else if(true&&e.exports){e.exports=r}else{if(!t){t=typeof self!="undefined"&&self?self:window}t.BigNumber=r}})(this)},80078:(e,t,r)=>{"use strict";var n=r(14300).Buffer;var i=r(14300).SlowBuffer;e.exports=bufferEq;function bufferEq(e,t){if(!n.isBuffer(e)||!n.isBuffer(t)){return false}if(e.length!==t.length){return false}var r=0;for(var i=0;i<e.length;i++){r|=e[i]^t[i]}return r===0}bufferEq.install=function(){n.prototype.equal=i.prototype.equal=function equal(e){return bufferEq(this,e)}};var s=n.prototype.equal;var o=i.prototype.equal;bufferEq.restore=function(){n.prototype.equal=s;i.prototype.equal=o}},94641:(e,t,r)=>{var n={};e["exports"]=n;n.themes={};var i=r(73837);var s=n.styles=r(24446);var o=Object.defineProperties;var a=new RegExp(/[\r\n]+/g);n.supportsColor=r(25506).supportsColor;if(typeof n.enabled==="undefined"){n.enabled=n.supportsColor()!==false}n.enable=function(){n.enabled=true};n.disable=function(){n.enabled=false};n.stripColors=n.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};var c=n.stylize=function stylize(e,t){if(!n.enabled){return e+""}var r=s[t];if(!r&&t in n){return n[t](e)}return r.open+e+r.close};var u=/[|\\{}()[\]^$+*?.]/g;var escapeStringRegexp=function(e){if(typeof e!=="string"){throw new TypeError("Expected a string")}return e.replace(u,"\\$&")};function build(e){var t=function builder(){return applyStyle.apply(builder,arguments)};t._styles=e;t.__proto__=p;return t}var d=function(){var e={};s.grey=s.gray;Object.keys(s).forEach((function(t){s[t].closeRe=new RegExp(escapeStringRegexp(s[t].close),"g");e[t]={get:function(){return build(this._styles.concat(t))}}}));return e}();var p=o((function colors(){}),d);function applyStyle(){var e=Array.prototype.slice.call(arguments);var t=e.map((function(e){if(e!=null&&e.constructor===String){return e}else{return i.inspect(e)}})).join(" ");if(!n.enabled||!t){return t}var r=t.indexOf("\n")!=-1;var o=this._styles;var c=o.length;while(c--){var u=s[o[c]];t=u.open+t.replace(u.closeRe,u.open)+u.close;if(r){t=t.replace(a,(function(e){return u.close+e+u.open}))}}return t}n.setTheme=function(e){if(typeof e==="string"){console.log("colors.setTheme now only accepts an object, not a string.  "+"If you are trying to set a theme from a file, it is now your (the "+"caller's) responsibility to require the file.  The old syntax "+"looked like colors.setTheme(__dirname + "+"'/../themes/generic-logging.js'); The new syntax looks like "+"colors.setTheme(require(__dirname + "+"'/../themes/generic-logging.js'));");return}for(var t in e){(function(t){n[t]=function(r){if(typeof e[t]==="object"){var i=r;for(var s in e[t]){i=n[e[t][s]](i)}return i}return n[e[t]](r)}})(t)}};function init(){var e={};Object.keys(d).forEach((function(t){e[t]={get:function(){return build([t])}}}));return e}var m=function sequencer(e,t){var r=t.split("");r=r.map(e);return r.join("")};n.trap=r(74253);n.zalgo=r(29188);n.maps={};n.maps.america=r(54226)(n);n.maps.zebra=r(48504)(n);n.maps.rainbow=r(49457)(n);n.maps.random=r(12523)(n);for(var y in n.maps){(function(e){n[e]=function(t){return m(n.maps[e],t)}})(y)}o(n,init())},74253:e=>{e["exports"]=function runTheTrap(e,t){var r="";e=e||"Run the trap, drop the bass";e=e.split("");var n={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};e.forEach((function(e){e=e.toLowerCase();var t=n[e]||[" "];var i=Math.floor(Math.random()*t.length);if(typeof n[e]!=="undefined"){r+=n[e][i]}else{r+=e}}));return r}},29188:e=>{e["exports"]=function zalgo(e,t){e=e||"   he is here   ";var r={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]};var n=[].concat(r.up,r.down,r.mid);function randomNumber(e){var t=Math.floor(Math.random()*e);return t}function isChar(e){var t=false;n.filter((function(r){t=r===e}));return t}function heComes(e,t){var n="";var i;var s;t=t||{};t["up"]=typeof t["up"]!=="undefined"?t["up"]:true;t["mid"]=typeof t["mid"]!=="undefined"?t["mid"]:true;t["down"]=typeof t["down"]!=="undefined"?t["down"]:true;t["size"]=typeof t["size"]!=="undefined"?t["size"]:"maxi";e=e.split("");for(s in e){if(isChar(s)){continue}n=n+e[s];i={up:0,down:0,mid:0};switch(t.size){case"mini":i.up=randomNumber(8);i.mid=randomNumber(2);i.down=randomNumber(8);break;case"maxi":i.up=randomNumber(16)+3;i.mid=randomNumber(4)+1;i.down=randomNumber(64)+3;break;default:i.up=randomNumber(8)+1;i.mid=randomNumber(6)/2;i.down=randomNumber(8)+1;break}var o=["up","mid","down"];for(var a in o){var c=o[a];for(var u=0;u<=i[c];u++){if(t[c]){n=n+r[c][randomNumber(r[c].length)]}}}}return n}return heComes(e,t)}},7660:(e,t,r)=>{var n=r(94641);e["exports"]=function(){var addProperty=function(e,t){String.prototype.__defineGetter__(e,t)};addProperty("strip",(function(){return n.strip(this)}));addProperty("stripColors",(function(){return n.strip(this)}));addProperty("trap",(function(){return n.trap(this)}));addProperty("zalgo",(function(){return n.zalgo(this)}));addProperty("zebra",(function(){return n.zebra(this)}));addProperty("rainbow",(function(){return n.rainbow(this)}));addProperty("random",(function(){return n.random(this)}));addProperty("america",(function(){return n.america(this)}));var e=Object.keys(n.styles);e.forEach((function(e){addProperty(e,(function(){return n.stylize(this,e)}))}));function applyTheme(e){var t=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexOf","length","localeCompare","match","repeat","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(e).forEach((function(r){if(t.indexOf(r)!==-1){console.log("warn: ".red+("String.prototype"+r).magenta+" is probably something you don't want to override.  "+"Ignoring style name")}else{if(typeof e[r]==="string"){n[r]=n[e[r]];addProperty(r,(function(){return n[r](this)}))}else{var themePropApplicator=function(t){var i=t||this;for(var s=0;s<e[r].length;s++){i=n[e[r][s]](i)}return i};addProperty(r,themePropApplicator);n[r]=function(e){return themePropApplicator(e)}}}}))}n.setTheme=function(e){if(typeof e==="string"){console.log("colors.setTheme now only accepts an object, not a string. "+"If you are trying to set a theme from a file, it is now your (the "+"caller's) responsibility to require the file.  The old syntax "+"looked like colors.setTheme(__dirname + "+"'/../themes/generic-logging.js'); The new syntax looks like "+"colors.setTheme(require(__dirname + "+"'/../themes/generic-logging.js'));");return}else{applyTheme(e)}}}},67885:(e,t,r)=>{var n=r(94641);e["exports"]=n;r(7660)()},54226:e=>{e["exports"]=function(e){return function(t,r,n){if(t===" ")return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}},49457:e=>{e["exports"]=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,i){if(r===" "){return r}else{return e[t[n++%t.length]](r)}}}},12523:e=>{e["exports"]=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}},48504:e=>{e["exports"]=function(e){return function(t,r,n){return r%2===0?t:e.inverse(t)}}},24446:e=>{var t={};e["exports"]=t;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach((function(e){var n=r[e];var i=t[e]=[];i.open="["+n[0]+"m";i.close="["+n[1]+"m"}))},57551:e=>{"use strict";e.exports=function(e,t){t=t||process.argv;var r=t.indexOf("--");var n=/^-{1,2}/.test(e)?"":"--";var i=t.indexOf(n+e);return i!==-1&&(r===-1?true:i<r)}},25506:(e,t,r)=>{"use strict";var n=r(22037);var i=r(57551);var s=process.env;var o=void 0;if(i("no-color")||i("no-colors")||i("color=false")){o=false}else if(i("color")||i("colors")||i("color=true")||i("color=always")){o=true}if("FORCE_COLOR"in s){o=s.FORCE_COLOR.length===0||parseInt(s.FORCE_COLOR,10)!==0}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e){if(o===false){return 0}if(i("color=16m")||i("color=full")||i("color=truecolor")){return 3}if(i("color=256")){return 2}if(e&&!e.isTTY&&o!==true){return 0}var t=o?1:0;if(process.platform==="win32"){var r=n.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586){return Number(r[2])>=14931?3:2}return 1}if("CI"in s){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in s}))||s.CI_NAME==="codeship"){return 1}return t}if("TEAMCITY_VERSION"in s){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0}if("TERM_PROGRAM"in s){var a=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(s.TERM)){return 2}if(/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)){return 1}if("COLORTERM"in s){return 1}if(s.TERM==="dumb"){return t}return t}function getSupportLevel(e){var t=supportsColor(e);return translateLevel(t)}e.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},83508:e=>{var t=[].slice;e.exports=function(e,r){if("string"==typeof r)r=e[r];if("function"!=typeof r)throw new Error("bind() requires a function");var n=t.call(arguments,2);return function(){return r.apply(e,n.concat(t.call(arguments)))}}},40138:e=>{if(true){e.exports=Emitter}function Emitter(e){if(e)return mixin(e)}function mixin(e){for(var t in Emitter.prototype){e[t]=Emitter.prototype[t]}return e}Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t);return this};Emitter.prototype.once=function(e,t){function on(){this.off(e,on);t.apply(this,arguments)}on.fn=t;this.on(e,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length){delete this._callbacks["$"+e];return this}var n;for(var i=0;i<r.length;i++){n=r[i];if(n===t||n.fn===t){r.splice(i,1);break}}if(r.length===0){delete this._callbacks["$"+e]}return this};Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=new Array(arguments.length-1),r=this._callbacks["$"+e];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n){r[n].apply(this,t)}}return this};Emitter.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks["$"+e]||[]};Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length}},56192:e=>{e.exports=function(e,t){var fn=function(){};fn.prototype=t.prototype;e.prototype=new fn;e.prototype.constructor=e}},2032:(e,t,r)=>{"use strict";const n=r(32081);const i=r(27854);const s=r(85662);function spawn(e,t,r){const o=i(e,t,r);const a=n.spawn(o.command,o.args,o.options);s.hookChildProcess(a,o);return a}function spawnSync(e,t,r){const o=i(e,t,r);const a=n.spawnSync(o.command,o.args,o.options);a.error=a.error||s.verifyENOENTSync(a.status,o);return a}e.exports=spawn;e.exports.spawn=spawn;e.exports.sync=spawnSync;e.exports._parse=i;e.exports._enoent=s},85662:e=>{"use strict";const t=process.platform==="win32";function notFoundError(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function hookChildProcess(e,r){if(!t){return}const n=e.emit;e.emit=function(t,i){if(t==="exit"){const t=verifyENOENT(i,r,"spawn");if(t){return n.call(e,"error",t)}}return n.apply(e,arguments)}}function verifyENOENT(e,r){if(t&&e===1&&!r.file){return notFoundError(r.original,"spawn")}return null}function verifyENOENTSync(e,r){if(t&&e===1&&!r.file){return notFoundError(r.original,"spawnSync")}return null}e.exports={hookChildProcess:hookChildProcess,verifyENOENT:verifyENOENT,verifyENOENTSync:verifyENOENTSync,notFoundError:notFoundError}},27854:(e,t,r)=>{"use strict";const n=r(71017);const i=r(82094);const s=r(22337);const o=r(57315);const a=process.platform==="win32";const c=/\.(?:com|exe)$/i;const u=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function detectShebang(e){e.file=i(e);const t=e.file&&o(e.file);if(t){e.args.unshift(e.file);e.command=t;return i(e)}return e.file}function parseNonShell(e){if(!a){return e}const t=detectShebang(e);const r=!c.test(t);if(e.options.forceShell||r){const r=u.test(t);e.command=n.normalize(e.command);e.command=s.command(e.command);e.args=e.args.map((e=>s.argument(e,r)));const i=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${i}"`];e.command=process.env.comspec||"cmd.exe";e.options.windowsVerbatimArguments=true}return e}function parse(e,t,r){if(t&&!Array.isArray(t)){r=t;t=null}t=t?t.slice(0):[];r=Object.assign({},r);const n={command:e,args:t,options:r,file:undefined,original:{command:e,args:t}};return r.shell?n:parseNonShell(n)}e.exports=parse},22337:e=>{"use strict";const t=/([()\][%!^"`<>&|;, *?])/g;function escapeCommand(e){e=e.replace(t,"^$1");return e}function escapeArgument(e,r){e=`${e}`;e=e.replace(/(\\*)"/g,'$1$1\\"');e=e.replace(/(\\*)$/,"$1$1");e=`"${e}"`;e=e.replace(t,"^$1");if(r){e=e.replace(t,"^$1")}return e}e.exports.command=escapeCommand;e.exports.argument=escapeArgument},57315:(e,t,r)=>{"use strict";const n=r(57147);const i=r(22421);function readShebang(e){const t=150;const r=Buffer.alloc(t);let s;try{s=n.openSync(e,"r");n.readSync(s,r,0,t,0);n.closeSync(s)}catch(e){}return i(r.toString())}e.exports=readShebang},82094:(e,t,r)=>{"use strict";const n=r(71017);const i=r(8546);const s=r(24658);function resolveCommandAttempt(e,t){const r=e.options.env||process.env;const o=process.cwd();const a=e.options.cwd!=null;const c=a&&process.chdir!==undefined&&!process.chdir.disabled;if(c){try{process.chdir(e.options.cwd)}catch(e){}}let u;try{u=i.sync(e.command,{path:r[s({env:r})],pathExt:t?n.delimiter:undefined})}catch(e){}finally{if(c){process.chdir(o)}}if(u){u=n.resolve(a?e.options.cwd:"",u)}return u}function resolveCommand(e){return resolveCommandAttempt(e)||resolveCommandAttempt(e,true)}e.exports=resolveCommand},62395:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=requiredArgs;function requiredArgs(e,t){if(t.length<e){throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}}e.exports=t.default},24535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=toInteger;function toInteger(e){if(e===null||e===true||e===false){return NaN}var t=Number(e);if(isNaN(t)){return t}return t<0?Math.ceil(t):Math.floor(t)}e.exports=t.default},5216:(e,t,r)=>{"use strict";var n=r(80324)["default"];Object.defineProperty(t,"__esModule",{value:true});t["default"]=addMonths;var i=n(r(24535));var s=n(r(12593));var o=n(r(62395));function addMonths(e,t){(0,o.default)(2,arguments);var r=(0,s.default)(e);var n=(0,i.default)(t);if(isNaN(n)){return new Date(NaN)}if(!n){return r}var a=r.getDate();var c=new Date(r.getTime());c.setMonth(r.getMonth()+n+1,0);var u=c.getDate();if(a>=u){return c}else{r.setFullYear(c.getFullYear(),c.getMonth(),a);return r}}e.exports=t.default},2200:(e,t,r)=>{"use strict";var n=r(80324)["default"];Object.defineProperty(t,"__esModule",{value:true});t["default"]=addYears;var i=n(r(24535));var s=n(r(5216));var o=n(r(62395));function addYears(e,t){(0,o.default)(2,arguments);var r=(0,i.default)(t);return(0,s.default)(e,r*12)}e.exports=t.default},12593:(e,t,r)=>{"use strict";var n=r(80324)["default"];Object.defineProperty(t,"__esModule",{value:true});t["default"]=toDate;var i=n(r(70769));var s=n(r(62395));function toDate(e){(0,s.default)(1,arguments);var t=Object.prototype.toString.call(e);if(e instanceof Date||(0,i.default)(e)==="object"&&t==="[object Date]"){return new Date(e.getTime())}else if(typeof e==="number"||t==="[object Number]"){return new Date(e)}else{if((typeof e==="string"||t==="[object String]")&&typeof console!=="undefined"){console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments");console.warn((new Error).stack)}return new Date(NaN)}}e.exports=t.default},94672:(e,t,r)=>{t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.storage=localstorage();t.destroy=(()=>{let e=false;return()=>{if(!e){e=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}let e;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(t){t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff);if(!this.useColors){return}const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0;let i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{if(e==="%%"){return}n++;if(e==="%c"){i=n}}));t.splice(i,0,r)}t.log=console.debug||console.log||(()=>{});function save(e){try{if(e){t.storage.setItem("debug",e)}else{t.storage.removeItem("debug")}}catch(e){}}function load(){let e;try{e=t.storage.getItem("debug")}catch(e){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}function localstorage(){try{return localStorage}catch(e){}}e.exports=r(59003)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},59003:(e,t,r)=>{function setup(e){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=r(31560);createDebug.destroy=destroy;Object.keys(e).forEach((t=>{createDebug[t]=e[t]}));createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(e){let t=0;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r);t|=0}return createDebug.colors[Math.abs(t)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(e){let t;let r=null;let n;let i;function debug(...e){if(!debug.enabled){return}const r=debug;const n=Number(new Date);const i=n-(t||n);r.diff=i;r.prev=t;r.curr=n;t=n;e[0]=createDebug.coerce(e[0]);if(typeof e[0]!=="string"){e.unshift("%O")}let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,n)=>{if(t==="%%"){return"%"}s++;const i=createDebug.formatters[n];if(typeof i==="function"){const n=e[s];t=i.call(r,n);e.splice(s,1);s--}return t}));createDebug.formatArgs.call(r,e);const o=r.log||createDebug.log;o.apply(r,e)}debug.namespace=e;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(e);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(r!==null){return r}if(n!==createDebug.namespaces){n=createDebug.namespaces;i=createDebug.enabled(e)}return i},set:e=>{r=e}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(e,t){const r=createDebug(this.namespace+(typeof t==="undefined"?":":t)+e);r.log=this.log;return r}function enable(e){createDebug.save(e);createDebug.namespaces=e;createDebug.names=[];createDebug.skips=[];let t;const r=(typeof e==="string"?e:"").split(/[\s,]+/);const n=r.length;for(t=0;t<n;t++){if(!r[t]){continue}e=r[t].replace(/\*/g,".*?");if(e[0]==="-"){createDebug.skips.push(new RegExp("^"+e.slice(1)+"$"))}else{createDebug.names.push(new RegExp("^"+e+"$"))}}}function disable(){const e=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((e=>"-"+e))].join(",");createDebug.enable("");return e}function enabled(e){if(e[e.length-1]==="*"){return true}let t;let r;for(t=0,r=createDebug.skips.length;t<r;t++){if(createDebug.skips[t].test(e)){return false}}for(t=0,r=createDebug.names.length;t<r;t++){if(createDebug.names[t].test(e)){return true}}return false}function toNamespace(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function coerce(e){if(e instanceof Error){return e.stack||e.message}return e}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}e.exports=setup},69565:(e,t,r)=>{if(typeof process==="undefined"||process.type==="renderer"||process.browser===true||process.__nwjs){e.exports=r(94672)}else{e.exports=r(94231)}},94231:(e,t,r)=>{const n=r(76224);const i=r(73837);t.init=init;t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");t.colors=[6,2,3,4,5,1];try{const e=r(68337);if(e&&(e.stderr||e).level>=2){t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];if(/^(yes|on|true|enabled)$/i.test(n)){n=true}else if(/^(no|off|false|disabled)$/i.test(n)){n=false}else if(n==="null"){n=null}else{n=Number(n)}e[r]=n;return e}),{});function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)}function formatArgs(t){const{namespace:r,useColors:n}=this;if(n){const n=this.color;const i="[3"+(n<8?n:"8;5;"+n);const s=`  ${i};1m${r} [0m`;t[0]=s+t[0].split("\n").join("\n"+s);t.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else{t[0]=getDate()+r+" "+t[0]}}function getDate(){if(t.inspectOpts.hideDate){return""}return(new Date).toISOString()+" "}function log(...e){return process.stderr.write(i.formatWithOptions(t.inspectOpts,...e)+"\n")}function save(e){if(e){process.env.DEBUG=e}else{delete process.env.DEBUG}}function load(){return process.env.DEBUG}function init(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++){e.inspectOpts[r[n]]=t.inspectOpts[r[n]]}}e.exports=r(59003)(t);const{formatters:s}=e.exports;s.o=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")};s.O=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts)}},53331:(e,t)=>{"use strict";t.toString=function(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e};t.toClass=function(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}},1211:(e,t,r)=>{"use strict";const n=r(14300).Buffer;const i=r(27126);const s=r(87966);const o=r(4868);const a=r(53331);const c=r(66857);const u=r(53322);const d=0;const p=1<<15;const m=1<<15;const y=~m;const g=1<<15;const b=~g;const v=t.name={};v.encode=function(e,t,r,{mail:i=false}={}){if(!t)t=n.alloc(v.encodingLength(e));if(!r)r=0;const s=r;const o=e.replace(/^\.|\.$/gm,"");if(o.length){let e=[];if(i){let t="";o.split(".").forEach((r=>{if(r.endsWith("\\")){t+=(t.length?".":"")+r.slice(0,-1)}else{if(e.length===0&&t.length){e.push(t+"."+r)}else{e.push(r)}}}))}else{e=o.split(".")}for(let n=0;n<e.length;n++){const i=t.write(e[n],r+1);t[r]=i;r+=i+1}}t[r++]=0;v.encode.bytes=r-s;return t};v.encode.bytes=0;v.decode=function(e,t,{mail:r=false}={}){if(!t)t=0;const n=[];let i=t;let s=0;let o=0;let a=false;while(true){if(t>=e.length){throw new Error("Cannot decode name (buffer overflow)")}const c=e[t++];o+=a?0:1;if(c===0){break}else if((c&192)===0){if(t+c>e.length){throw new Error("Cannot decode name (buffer overflow)")}s+=c+1;if(s>254){throw new Error("Cannot decode name (name too long)")}let i=e.toString("utf-8",t,t+c);if(r){i=i.replace(/\./g,"\\.")}n.push(i);t+=c;o+=a?0:c}else if((c&192)===192){if(t+1>e.length){throw new Error("Cannot decode name (buffer overflow)")}const r=e.readUInt16BE(t-1)-49152;if(r>=i){throw new Error("Cannot decode name (bad pointer)")}t=r;i=r;o+=a?0:1;a=true}else{throw new Error("Cannot decode name (bad label)")}}v.decode.bytes=o;return n.length===0?".":n.join(".")};v.decode.bytes=0;v.encodingLength=function(e){if(e==="."||e==="..")return 1;return n.byteLength(e.replace(/^\.|\.$/gm,""))+2};const w={};w.encode=function(e,t,r){if(!t)t=n.alloc(w.encodingLength(e));if(!r)r=0;const i=t.write(e,r+1);t[r]=i;w.encode.bytes=i+1;return t};w.encode.bytes=0;w.decode=function(e,t){if(!t)t=0;const r=e[t];const n=e.toString("utf-8",t+1,t+1+r);w.decode.bytes=r+1;return n};w.decode.bytes=0;w.encodingLength=function(e){return n.byteLength(e)+1};const _={};_.encode=function(e,t,r){if(!t)t=_.encodingLength(e);if(!r)r=0;const n=(e.flags||0)&32767;const i=e.type==="response"?p:d;t.writeUInt16BE(e.id||0,r);t.writeUInt16BE(n|i,r+2);t.writeUInt16BE(e.questions.length,r+4);t.writeUInt16BE(e.answers.length,r+6);t.writeUInt16BE(e.authorities.length,r+8);t.writeUInt16BE(e.additionals.length,r+10);return t};_.encode.bytes=12;_.decode=function(e,t){if(!t)t=0;if(e.length<12)throw new Error("Header must be 12 bytes");const r=e.readUInt16BE(t+2);return{id:e.readUInt16BE(t),type:r&p?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:o.toString(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:s.toString(r&15),questions:new Array(e.readUInt16BE(t+4)),answers:new Array(e.readUInt16BE(t+6)),authorities:new Array(e.readUInt16BE(t+8)),additionals:new Array(e.readUInt16BE(t+10))}};_.decode.bytes=12;_.encodingLength=function(){return 12};const C=t.unknown={};C.encode=function(e,t,r){if(!t)t=n.alloc(C.encodingLength(e));if(!r)r=0;t.writeUInt16BE(e.length,r);e.copy(t,r+2);C.encode.bytes=e.length+2;return t};C.encode.bytes=0;C.decode=function(e,t){if(!t)t=0;const r=e.readUInt16BE(t);const n=e.slice(t+2,t+2+r);C.decode.bytes=r+2;return n};C.decode.bytes=0;C.encodingLength=function(e){return e.length+2};const P=t.ns={};P.encode=function(e,t,r){if(!t)t=n.alloc(P.encodingLength(e));if(!r)r=0;v.encode(e,t,r+2);t.writeUInt16BE(v.encode.bytes,r);P.encode.bytes=v.encode.bytes+2;return t};P.encode.bytes=0;P.decode=function(e,t){if(!t)t=0;const r=e.readUInt16BE(t);const n=v.decode(e,t+2);P.decode.bytes=r+2;return n};P.decode.bytes=0;P.encodingLength=function(e){return v.encodingLength(e)+2};const O=t.soa={};O.encode=function(e,t,r){if(!t)t=n.alloc(O.encodingLength(e));if(!r)r=0;const i=r;r+=2;v.encode(e.mname,t,r);r+=v.encode.bytes;v.encode(e.rname,t,r,{mail:true});r+=v.encode.bytes;t.writeUInt32BE(e.serial||0,r);r+=4;t.writeUInt32BE(e.refresh||0,r);r+=4;t.writeUInt32BE(e.retry||0,r);r+=4;t.writeUInt32BE(e.expire||0,r);r+=4;t.writeUInt32BE(e.minimum||0,r);r+=4;t.writeUInt16BE(r-i-2,i);O.encode.bytes=r-i;return t};O.encode.bytes=0;O.decode=function(e,t){if(!t)t=0;const r=t;const n={};t+=2;n.mname=v.decode(e,t);t+=v.decode.bytes;n.rname=v.decode(e,t,{mail:true});t+=v.decode.bytes;n.serial=e.readUInt32BE(t);t+=4;n.refresh=e.readUInt32BE(t);t+=4;n.retry=e.readUInt32BE(t);t+=4;n.expire=e.readUInt32BE(t);t+=4;n.minimum=e.readUInt32BE(t);t+=4;O.decode.bytes=t-r;return n};O.decode.bytes=0;O.encodingLength=function(e){return 22+v.encodingLength(e.mname)+v.encodingLength(e.rname)};const E=t.txt={};E.encode=function(e,t,r){if(!Array.isArray(e))e=[e];for(let t=0;t<e.length;t++){if(typeof e[t]==="string"){e[t]=n.from(e[t])}if(!n.isBuffer(e[t])){throw new Error("Must be a Buffer")}}if(!t)t=n.alloc(E.encodingLength(e));if(!r)r=0;const i=r;r+=2;e.forEach((function(e){t[r++]=e.length;e.copy(t,r,0,e.length);r+=e.length}));t.writeUInt16BE(r-i-2,i);E.encode.bytes=r-i;return t};E.encode.bytes=0;E.decode=function(e,t){if(!t)t=0;const r=t;let n=e.readUInt16BE(t);t+=2;let i=[];while(n>0){const r=e[t++];--n;if(n<r){throw new Error("Buffer overflow")}i.push(e.slice(t,t+r));t+=r;n-=r}E.decode.bytes=t-r;return i};E.decode.bytes=0;E.encodingLength=function(e){if(!Array.isArray(e))e=[e];let t=2;e.forEach((function(e){if(typeof e==="string"){t+=n.byteLength(e)+1}else{t+=e.length+1}}));return t};const I=t["null"]={};I.encode=function(e,t,r){if(!t)t=n.alloc(I.encodingLength(e));if(!r)r=0;if(typeof e==="string")e=n.from(e);if(!e)e=n.alloc(0);const i=r;r+=2;const s=e.length;e.copy(t,r,0,s);r+=s;t.writeUInt16BE(r-i-2,i);I.encode.bytes=r-i;return t};I.encode.bytes=0;I.decode=function(e,t){if(!t)t=0;const r=t;const n=e.readUInt16BE(t);t+=2;const i=e.slice(t,t+n);t+=n;I.decode.bytes=t-r;return i};I.decode.bytes=0;I.encodingLength=function(e){if(!e)return 2;return(n.isBuffer(e)?e.length:n.byteLength(e))+2};const k=t.hinfo={};k.encode=function(e,t,r){if(!t)t=n.alloc(k.encodingLength(e));if(!r)r=0;const i=r;r+=2;w.encode(e.cpu,t,r);r+=w.encode.bytes;w.encode(e.os,t,r);r+=w.encode.bytes;t.writeUInt16BE(r-i-2,i);k.encode.bytes=r-i;return t};k.encode.bytes=0;k.decode=function(e,t){if(!t)t=0;const r=t;const n={};t+=2;n.cpu=w.decode(e,t);t+=w.decode.bytes;n.os=w.decode(e,t);t+=w.decode.bytes;k.decode.bytes=t-r;return n};k.decode.bytes=0;k.encodingLength=function(e){return w.encodingLength(e.cpu)+w.encodingLength(e.os)+2};const T=t.ptr={};const x=t.cname=T;const R=t.dname=T;T.encode=function(e,t,r){if(!t)t=n.alloc(T.encodingLength(e));if(!r)r=0;v.encode(e,t,r+2);t.writeUInt16BE(v.encode.bytes,r);T.encode.bytes=v.encode.bytes+2;return t};T.encode.bytes=0;T.decode=function(e,t){if(!t)t=0;const r=v.decode(e,t+2);T.decode.bytes=v.decode.bytes+2;return r};T.decode.bytes=0;T.encodingLength=function(e){return v.encodingLength(e)+2};const B=t.srv={};B.encode=function(e,t,r){if(!t)t=n.alloc(B.encodingLength(e));if(!r)r=0;t.writeUInt16BE(e.priority||0,r+2);t.writeUInt16BE(e.weight||0,r+4);t.writeUInt16BE(e.port||0,r+6);v.encode(e.target,t,r+8);const i=v.encode.bytes+6;t.writeUInt16BE(i,r);B.encode.bytes=i+2;return t};B.encode.bytes=0;B.decode=function(e,t){if(!t)t=0;const r=e.readUInt16BE(t);const n={};n.priority=e.readUInt16BE(t+2);n.weight=e.readUInt16BE(t+4);n.port=e.readUInt16BE(t+6);n.target=v.decode(e,t+8);B.decode.bytes=r+2;return n};B.decode.bytes=0;B.encodingLength=function(e){return 8+v.encodingLength(e.target)};const N=t.caa={};N.ISSUER_CRITICAL=1<<7;N.encode=function(e,t,r){const i=N.encodingLength(e);if(!t)t=n.alloc(N.encodingLength(e));if(!r)r=0;if(e.issuerCritical){e.flags=N.ISSUER_CRITICAL}t.writeUInt16BE(i-2,r);r+=2;t.writeUInt8(e.flags||0,r);r+=1;w.encode(e.tag,t,r);r+=w.encode.bytes;t.write(e.value,r);r+=n.byteLength(e.value);N.encode.bytes=i;return t};N.encode.bytes=0;N.decode=function(e,t){if(!t)t=0;const r=e.readUInt16BE(t);t+=2;const n=t;const i={};i.flags=e.readUInt8(t);t+=1;i.tag=w.decode(e,t);t+=w.decode.bytes;i.value=e.toString("utf-8",t,n+r);i.issuerCritical=!!(i.flags&N.ISSUER_CRITICAL);N.decode.bytes=r+2;return i};N.decode.bytes=0;N.encodingLength=function(e){return w.encodingLength(e.tag)+w.encodingLength(e.value)+2};const j=t.mx={};j.encode=function(e,t,r){if(!t)t=n.alloc(j.encodingLength(e));if(!r)r=0;const i=r;r+=2;t.writeUInt16BE(e.preference||0,r);r+=2;v.encode(e.exchange,t,r);r+=v.encode.bytes;t.writeUInt16BE(r-i-2,i);j.encode.bytes=r-i;return t};j.encode.bytes=0;j.decode=function(e,t){if(!t)t=0;const r=t;const n={};t+=2;n.preference=e.readUInt16BE(t);t+=2;n.exchange=v.decode(e,t);t+=v.decode.bytes;j.decode.bytes=t-r;return n};j.encodingLength=function(e){return 4+v.encodingLength(e.exchange)};const L=t.a={};L.encode=function(e,t,r){if(!t)t=n.alloc(L.encodingLength(e));if(!r)r=0;t.writeUInt16BE(4,r);r+=2;u.v4.encode(e,t,r);L.encode.bytes=6;return t};L.encode.bytes=0;L.decode=function(e,t){if(!t)t=0;t+=2;const r=u.v4.decode(e,t);L.decode.bytes=6;return r};L.decode.bytes=0;L.encodingLength=function(){return 6};const D=t.aaaa={};D.encode=function(e,t,r){if(!t)t=n.alloc(D.encodingLength(e));if(!r)r=0;t.writeUInt16BE(16,r);r+=2;u.v6.encode(e,t,r);D.encode.bytes=18;return t};D.encode.bytes=0;D.decode=function(e,t){if(!t)t=0;t+=2;const r=u.v6.decode(e,t);D.decode.bytes=18;return r};D.decode.bytes=0;D.encodingLength=function(){return 18};const U=t.option={};U.encode=function(e,t,r){if(!t)t=n.alloc(U.encodingLength(e));if(!r)r=0;const i=r;const s=c.toCode(e.code);t.writeUInt16BE(s,r);r+=2;if(e.data){t.writeUInt16BE(e.data.length,r);r+=2;e.data.copy(t,r);r+=e.data.length}else{switch(s){case 8:const i=e.sourcePrefixLength||0;const s=e.family||u.familyOf(e.ip);const o=u.encode(e.ip,n.alloc);const a=Math.ceil(i/8);t.writeUInt16BE(a+4,r);r+=2;t.writeUInt16BE(s,r);r+=2;t.writeUInt8(i,r++);t.writeUInt8(e.scopePrefixLength||0,r++);o.copy(t,r,0,a);r+=a;break;case 11:if(e.timeout){t.writeUInt16BE(2,r);r+=2;t.writeUInt16BE(e.timeout,r);r+=2}else{t.writeUInt16BE(0,r);r+=2}break;case 12:const c=e.length||0;t.writeUInt16BE(c,r);r+=2;t.fill(0,r,r+c);r+=c;break;case 14:const d=e.tags.length*2;t.writeUInt16BE(d,r);r+=2;for(const n of e.tags){t.writeUInt16BE(n,r);r+=2}break;default:throw new Error(`Unknown roption code: ${e.code}`)}}U.encode.bytes=r-i;return t};U.encode.bytes=0;U.decode=function(e,t){if(!t)t=0;const r={};r.code=e.readUInt16BE(t);r.type=c.toString(r.code);t+=2;const i=e.readUInt16BE(t);t+=2;r.data=e.slice(t,t+i);switch(r.code){case 8:r.family=e.readUInt16BE(t);t+=2;r.sourcePrefixLength=e.readUInt8(t++);r.scopePrefixLength=e.readUInt8(t++);const s=n.alloc(r.family===1?4:16);e.copy(s,0,t,t+i-4);r.ip=u.decode(s);break;case 11:if(i>0){r.timeout=e.readUInt16BE(t);t+=2}break;case 14:r.tags=[];for(let n=0;n<i;n+=2){r.tags.push(e.readUInt16BE(t));t+=2}}U.decode.bytes=i+4;return r};U.decode.bytes=0;U.encodingLength=function(e){if(e.data){return e.data.length+4}const t=c.toCode(e.code);switch(t){case 8:const t=e.sourcePrefixLength||0;return Math.ceil(t/8)+8;case 11:return typeof e.timeout==="number"?6:4;case 12:return e.length+4;case 14:return 4+e.tags.length*2}throw new Error(`Unknown roption code: ${e.code}`)};const F=t.opt={};F.encode=function(e,t,r){if(!t)t=n.alloc(F.encodingLength(e));if(!r)r=0;const i=r;const s=encodingLengthList(e,U);t.writeUInt16BE(s,r);r=encodeList(e,U,t,r+2);F.encode.bytes=r-i;return t};F.encode.bytes=0;F.decode=function(e,t){if(!t)t=0;const r=t;const n=[];let i=e.readUInt16BE(t);t+=2;let s=0;while(i>0){n[s++]=U.decode(e,t);t+=U.decode.bytes;i-=U.decode.bytes}F.decode.bytes=t-r;return n};F.decode.bytes=0;F.encodingLength=function(e){return 2+encodingLengthList(e||[],U)};const K=t.dnskey={};K.PROTOCOL_DNSSEC=3;K.ZONE_KEY=128;K.SECURE_ENTRYPOINT=32768;K.encode=function(e,t,r){if(!t)t=n.alloc(K.encodingLength(e));if(!r)r=0;const i=r;const s=e.key;if(!n.isBuffer(s)){throw new Error("Key must be a Buffer")}r+=2;t.writeUInt16BE(e.flags,r);r+=2;t.writeUInt8(K.PROTOCOL_DNSSEC,r);r+=1;t.writeUInt8(e.algorithm,r);r+=1;s.copy(t,r,0,s.length);r+=s.length;K.encode.bytes=r-i;t.writeUInt16BE(K.encode.bytes-2,i);return t};K.encode.bytes=0;K.decode=function(e,t){if(!t)t=0;const r=t;var n={};var i=e.readUInt16BE(t);t+=2;n.flags=e.readUInt16BE(t);t+=2;if(e.readUInt8(t)!==K.PROTOCOL_DNSSEC){throw new Error("Protocol must be 3")}t+=1;n.algorithm=e.readUInt8(t);t+=1;n.key=e.slice(t,r+i+2);t+=n.key.length;K.decode.bytes=t-r;return n};K.decode.bytes=0;K.encodingLength=function(e){return 6+n.byteLength(e.key)};const V=t.rrsig={};V.encode=function(e,t,r){if(!t)t=n.alloc(V.encodingLength(e));if(!r)r=0;const s=r;const o=e.signature;if(!n.isBuffer(o)){throw new Error("Signature must be a Buffer")}r+=2;t.writeUInt16BE(i.toType(e.typeCovered),r);r+=2;t.writeUInt8(e.algorithm,r);r+=1;t.writeUInt8(e.labels,r);r+=1;t.writeUInt32BE(e.originalTTL,r);r+=4;t.writeUInt32BE(e.expiration,r);r+=4;t.writeUInt32BE(e.inception,r);r+=4;t.writeUInt16BE(e.keyTag,r);r+=2;v.encode(e.signersName,t,r);r+=v.encode.bytes;o.copy(t,r,0,o.length);r+=o.length;V.encode.bytes=r-s;t.writeUInt16BE(V.encode.bytes-2,s);return t};V.encode.bytes=0;V.decode=function(e,t){if(!t)t=0;const r=t;var n={};var s=e.readUInt16BE(t);t+=2;n.typeCovered=i.toString(e.readUInt16BE(t));t+=2;n.algorithm=e.readUInt8(t);t+=1;n.labels=e.readUInt8(t);t+=1;n.originalTTL=e.readUInt32BE(t);t+=4;n.expiration=e.readUInt32BE(t);t+=4;n.inception=e.readUInt32BE(t);t+=4;n.keyTag=e.readUInt16BE(t);t+=2;n.signersName=v.decode(e,t);t+=v.decode.bytes;n.signature=e.slice(t,r+s+2);t+=n.signature.length;V.decode.bytes=t-r;return n};V.decode.bytes=0;V.encodingLength=function(e){return 20+v.encodingLength(e.signersName)+n.byteLength(e.signature)};const H=t.rp={};H.encode=function(e,t,r){if(!t)t=n.alloc(H.encodingLength(e));if(!r)r=0;const i=r;r+=2;v.encode(e.mbox||".",t,r,{mail:true});r+=v.encode.bytes;v.encode(e.txt||".",t,r);r+=v.encode.bytes;H.encode.bytes=r-i;t.writeUInt16BE(H.encode.bytes-2,i);return t};H.encode.bytes=0;H.decode=function(e,t){if(!t)t=0;const r=t;const n={};t+=2;n.mbox=v.decode(e,t,{mail:true})||".";t+=v.decode.bytes;n.txt=v.decode(e,t)||".";t+=v.decode.bytes;H.decode.bytes=t-r;return n};H.decode.bytes=0;H.encodingLength=function(e){return 2+v.encodingLength(e.mbox||".")+v.encodingLength(e.txt||".")};const q={};q.encode=function(e,t,r){if(!t)t=n.alloc(q.encodingLength(e));if(!r)r=0;const s=r;var o=[];for(var a=0;a<e.length;a++){var c=i.toType(e[a]);if(o[c>>8]===undefined){o[c>>8]=[]}o[c>>8][c>>3&31]|=1<<7-(c&7)}for(a=0;a<o.length;a++){if(o[a]!==undefined){var u=n.from(o[a]);t.writeUInt8(a,r);r+=1;t.writeUInt8(u.length,r);r+=1;u.copy(t,r);r+=u.length}}q.encode.bytes=r-s;return t};q.encode.bytes=0;q.decode=function(e,t,r){if(!t)t=0;const n=t;var s=[];while(t-n<r){var o=e.readUInt8(t);t+=1;var a=e.readUInt8(t);t+=1;for(var c=0;c<a;c++){var u=e.readUInt8(t+c);for(var d=0;d<8;d++){if(u&1<<7-d){var p=i.toString(o<<8|c<<3|d);s.push(p)}}}t+=a}q.decode.bytes=t-n;return s};q.decode.bytes=0;q.encodingLength=function(e){var t=[];for(var r=0;r<e.length;r++){var n=i.toType(e[r]);t[n>>8]=Math.max(t[n>>8]||0,n&255)}var s=0;for(r=0;r<t.length;r++){if(t[r]!==undefined){s+=2+Math.ceil((t[r]+1)/8)}}return s};const W=t.nsec={};W.encode=function(e,t,r){if(!t)t=n.alloc(W.encodingLength(e));if(!r)r=0;const i=r;r+=2;v.encode(e.nextDomain,t,r);r+=v.encode.bytes;q.encode(e.rrtypes,t,r);r+=q.encode.bytes;W.encode.bytes=r-i;t.writeUInt16BE(W.encode.bytes-2,i);return t};W.encode.bytes=0;W.decode=function(e,t){if(!t)t=0;const r=t;var n={};var i=e.readUInt16BE(t);t+=2;n.nextDomain=v.decode(e,t);t+=v.decode.bytes;n.rrtypes=q.decode(e,t,i-(t-r));t+=q.decode.bytes;W.decode.bytes=t-r;return n};W.decode.bytes=0;W.encodingLength=function(e){return 2+v.encodingLength(e.nextDomain)+q.encodingLength(e.rrtypes)};const z=t.nsec3={};z.encode=function(e,t,r){if(!t)t=n.alloc(z.encodingLength(e));if(!r)r=0;const i=r;const s=e.salt;if(!n.isBuffer(s)){throw new Error("salt must be a Buffer")}const o=e.nextDomain;if(!n.isBuffer(o)){throw new Error("nextDomain must be a Buffer")}r+=2;t.writeUInt8(e.algorithm,r);r+=1;t.writeUInt8(e.flags,r);r+=1;t.writeUInt16BE(e.iterations,r);r+=2;t.writeUInt8(s.length,r);r+=1;s.copy(t,r,0,s.length);r+=s.length;t.writeUInt8(o.length,r);r+=1;o.copy(t,r,0,o.length);r+=o.length;q.encode(e.rrtypes,t,r);r+=q.encode.bytes;z.encode.bytes=r-i;t.writeUInt16BE(z.encode.bytes-2,i);return t};z.encode.bytes=0;z.decode=function(e,t){if(!t)t=0;const r=t;var n={};var i=e.readUInt16BE(t);t+=2;n.algorithm=e.readUInt8(t);t+=1;n.flags=e.readUInt8(t);t+=1;n.iterations=e.readUInt16BE(t);t+=2;const s=e.readUInt8(t);t+=1;n.salt=e.slice(t,t+s);t+=s;const o=e.readUInt8(t);t+=1;n.nextDomain=e.slice(t,t+o);t+=o;n.rrtypes=q.decode(e,t,i-(t-r));t+=q.decode.bytes;z.decode.bytes=t-r;return n};z.decode.bytes=0;z.encodingLength=function(e){return 8+e.salt.length+e.nextDomain.length+q.encodingLength(e.rrtypes)};const $=t.ds={};$.encode=function(e,t,r){if(!t)t=n.alloc($.encodingLength(e));if(!r)r=0;const i=r;const s=e.digest;if(!n.isBuffer(s)){throw new Error("Digest must be a Buffer")}r+=2;t.writeUInt16BE(e.keyTag,r);r+=2;t.writeUInt8(e.algorithm,r);r+=1;t.writeUInt8(e.digestType,r);r+=1;s.copy(t,r,0,s.length);r+=s.length;$.encode.bytes=r-i;t.writeUInt16BE($.encode.bytes-2,i);return t};$.encode.bytes=0;$.decode=function(e,t){if(!t)t=0;const r=t;var n={};var i=e.readUInt16BE(t);t+=2;n.keyTag=e.readUInt16BE(t);t+=2;n.algorithm=e.readUInt8(t);t+=1;n.digestType=e.readUInt8(t);t+=1;n.digest=e.slice(t,r+i+2);t+=n.digest.length;$.decode.bytes=t-r;return n};$.decode.bytes=0;$.encodingLength=function(e){return 6+n.byteLength(e.digest)};const G=t.sshfp={};G.getFingerprintLengthForHashType=function getFingerprintLengthForHashType(e){switch(e){case 1:return 20;case 2:return 32}};G.encode=function encode(e,t,r){if(!t)t=n.alloc(G.encodingLength(e));if(!r)r=0;const i=r;r+=2;t[r]=e.algorithm;r+=1;t[r]=e.hash;r+=1;const s=n.from(e.fingerprint.toUpperCase(),"hex");if(s.length!==G.getFingerprintLengthForHashType(e.hash)){throw new Error("Invalid fingerprint length")}s.copy(t,r);r+=s.byteLength;G.encode.bytes=r-i;t.writeUInt16BE(G.encode.bytes-2,i);return t};G.encode.bytes=0;G.decode=function decode(e,t){if(!t)t=0;const r=t;const n={};t+=2;n.algorithm=e[t];t+=1;n.hash=e[t];t+=1;const i=G.getFingerprintLengthForHashType(n.hash);n.fingerprint=e.slice(t,t+i).toString("hex").toUpperCase();t+=i;G.decode.bytes=t-r;return n};G.decode.bytes=0;G.encodingLength=function(e){return 4+n.from(e.fingerprint,"hex").byteLength};const J=t.naptr={};J.encode=function(e,t,r){if(!t)t=n.alloc(J.encodingLength(e));if(!r)r=0;const i=r;r+=2;t.writeUInt16BE(e.order||0,r);r+=2;t.writeUInt16BE(e.preference||0,r);r+=2;w.encode(e.flags,t,r);r+=w.encode.bytes;w.encode(e.services,t,r);r+=w.encode.bytes;w.encode(e.regexp,t,r);r+=w.encode.bytes;v.encode(e.replacement,t,r);r+=v.encode.bytes;J.encode.bytes=r-i;t.writeUInt16BE(J.encode.bytes-2,i);return t};J.encode.bytes=0;J.decode=function(e,t){if(!t)t=0;const r=t;const n={};t+=2;n.order=e.readUInt16BE(t);t+=2;n.preference=e.readUInt16BE(t);t+=2;n.flags=w.decode(e,t);t+=w.decode.bytes;n.services=w.decode(e,t);t+=w.decode.bytes;n.regexp=w.decode(e,t);t+=w.decode.bytes;n.replacement=v.decode(e,t);t+=v.decode.bytes;J.decode.bytes=t-r;return n};J.decode.bytes=0;J.encodingLength=function(e){return w.encodingLength(e.flags)+w.encodingLength(e.services)+w.encodingLength(e.regexp)+v.encodingLength(e.replacement)+6};const X=t.tlsa={};X.encode=function(e,t,r){if(!t)t=n.alloc(X.encodingLength(e));if(!r)r=0;const i=r;const s=e.certificate;if(!n.isBuffer(s)){throw new Error("Certificate must be a Buffer")}r+=2;t.writeUInt8(e.usage,r);r+=1;t.writeUInt8(e.selector,r);r+=1;t.writeUInt8(e.matchingType,r);r+=1;s.copy(t,r,0,s.length);r+=s.length;X.encode.bytes=r-i;t.writeUInt16BE(X.encode.bytes-2,i);return t};X.encode.bytes=0;X.decode=function(e,t){if(!t)t=0;const r=t;const n={};const i=e.readUInt16BE(t);t+=2;n.usage=e.readUInt8(t);t+=1;n.selector=e.readUInt8(t);t+=1;n.matchingType=e.readUInt8(t);t+=1;n.certificate=e.slice(t,r+i+2);t+=n.certificate.length;X.decode.bytes=t-r;return n};X.decode.bytes=0;X.encodingLength=function(e){return 5+n.byteLength(e.certificate)};const Y=t.record=function(e){switch(e.toUpperCase()){case"A":return L;case"PTR":return T;case"CNAME":return x;case"DNAME":return R;case"TXT":return E;case"NULL":return I;case"AAAA":return D;case"SRV":return B;case"HINFO":return k;case"CAA":return N;case"NS":return P;case"SOA":return O;case"MX":return j;case"OPT":return F;case"DNSKEY":return K;case"RRSIG":return V;case"RP":return H;case"NSEC":return W;case"NSEC3":return z;case"SSHFP":return G;case"DS":return $;case"NAPTR":return J;case"TLSA":return X}return C};const Q=t.answer={};Q.encode=function(e,t,r){if(!t)t=n.alloc(Q.encodingLength(e));if(!r)r=0;const s=r;v.encode(e.name,t,r);r+=v.encode.bytes;t.writeUInt16BE(i.toType(e.type),r);if(e.type.toUpperCase()==="OPT"){if(e.name!=="."){throw new Error("OPT name must be root.")}t.writeUInt16BE(e.udpPayloadSize||4096,r+2);t.writeUInt8(e.extendedRcode||0,r+4);t.writeUInt8(e.ednsVersion||0,r+5);t.writeUInt16BE(e.flags||0,r+6);r+=8;F.encode(e.options||[],t,r);r+=F.encode.bytes}else{let n=a.toClass(e.class===undefined?"IN":e.class);if(e.flush)n|=m;t.writeUInt16BE(n,r+2);t.writeUInt32BE(e.ttl||0,r+4);r+=8;const i=Y(e.type);i.encode(e.data,t,r);r+=i.encode.bytes}Q.encode.bytes=r-s;return t};Q.encode.bytes=0;Q.decode=function(e,t){if(!t)t=0;const r={};const n=t;r.name=v.decode(e,t);t+=v.decode.bytes;r.type=i.toString(e.readUInt16BE(t));if(r.type==="OPT"){r.udpPayloadSize=e.readUInt16BE(t+2);r.extendedRcode=e.readUInt8(t+4);r.ednsVersion=e.readUInt8(t+5);r.flags=e.readUInt16BE(t+6);r.flag_do=(r.flags>>15&1)===1;r.options=F.decode(e,t+8);t+=8+F.decode.bytes}else{const n=e.readUInt16BE(t+2);r.ttl=e.readUInt32BE(t+4);r.class=a.toString(n&y);r.flush=!!(n&m);const i=Y(r.type);r.data=i.decode(e,t+8);t+=8+i.decode.bytes}Q.decode.bytes=t-n;return r};Q.decode.bytes=0;Q.encodingLength=function(e){const t=e.data!==null&&e.data!==undefined?e.data:e.options;return v.encodingLength(e.name)+8+Y(e.type).encodingLength(t)};const ee=t.question={};ee.encode=function(e,t,r){if(!t)t=n.alloc(ee.encodingLength(e));if(!r)r=0;const s=r;v.encode(e.name,t,r);r+=v.encode.bytes;t.writeUInt16BE(i.toType(e.type),r);r+=2;t.writeUInt16BE(a.toClass(e.class===undefined?"IN":e.class),r);r+=2;ee.encode.bytes=r-s;return e};ee.encode.bytes=0;ee.decode=function(e,t){if(!t)t=0;const r=t;const n={};n.name=v.decode(e,t);t+=v.decode.bytes;n.type=i.toString(e.readUInt16BE(t));t+=2;n.class=a.toString(e.readUInt16BE(t));t+=2;const s=!!(n.class&g);if(s)n.class&=b;ee.decode.bytes=t-r;return n};ee.decode.bytes=0;ee.encodingLength=function(e){return v.encodingLength(e.name)+4};t.AUTHORITATIVE_ANSWER=1<<10;t.TRUNCATED_RESPONSE=1<<9;t.RECURSION_DESIRED=1<<8;t.RECURSION_AVAILABLE=1<<7;t.AUTHENTIC_DATA=1<<5;t.CHECKING_DISABLED=1<<4;t.DNSSEC_OK=1<<15;t.encode=function(e,r,i){const s=!r;if(s)r=n.alloc(t.encodingLength(e));if(!i)i=0;const o=i;if(!e.questions)e.questions=[];if(!e.answers)e.answers=[];if(!e.authorities)e.authorities=[];if(!e.additionals)e.additionals=[];_.encode(e,r,i);i+=_.encode.bytes;i=encodeList(e.questions,ee,r,i);i=encodeList(e.answers,Q,r,i);i=encodeList(e.authorities,Q,r,i);i=encodeList(e.additionals,Q,r,i);t.encode.bytes=i-o;if(s&&t.encode.bytes!==r.length){return r.slice(0,t.encode.bytes)}return r};t.encode.bytes=0;t.decode=function(e,r){if(!r)r=0;const n=r;const i=_.decode(e,r);r+=_.decode.bytes;r=decodeList(i.questions,ee,e,r);r=decodeList(i.answers,Q,e,r);r=decodeList(i.authorities,Q,e,r);r=decodeList(i.additionals,Q,e,r);t.decode.bytes=r-n;return i};t.decode.bytes=0;t.encodingLength=function(e){return _.encodingLength(e)+encodingLengthList(e.questions||[],ee)+encodingLengthList(e.answers||[],Q)+encodingLengthList(e.authorities||[],Q)+encodingLengthList(e.additionals||[],Q)};t.streamEncode=function(e){const r=t.encode(e);const i=n.alloc(2);i.writeUInt16BE(r.byteLength);const s=n.concat([i,r]);t.streamEncode.bytes=s.byteLength;return s};t.streamEncode.bytes=0;t.streamDecode=function(e){const r=e.readUInt16BE(0);if(e.byteLength<r+2){return null}const n=t.decode(e.slice(2));t.streamDecode.bytes=t.decode.bytes;return n};t.streamDecode.bytes=0;function encodingLengthList(e,t){let r=0;for(let n=0;n<e.length;n++)r+=t.encodingLength(e[n]);return r}function encodeList(e,t,r,n){for(let i=0;i<e.length;i++){t.encode(e[i],r,n);n+=t.encode.bytes}return n}function decodeList(e,t,r,n){for(let i=0;i<e.length;i++){e[i]=t.decode(r,n);n+=t.decode.bytes}return n}},4868:(e,t)=>{"use strict";t.toString=function(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e};t.toOpcode=function(e){switch(e.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}},66857:(e,t)=>{"use strict";t.toString=function(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}if(e<0){return null}return`OPTION_${e}`};t.toCode=function(e){if(typeof e==="number"){return e}if(!e){return-1}switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const t=e.match(/_(\d+)$/);if(t){return parseInt(t[1],10)}return-1}},87966:(e,t)=>{"use strict";t.toString=function(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e};t.toRcode=function(e){switch(e.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}},27126:(e,t)=>{"use strict";t.toString=function(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e};t.toType=function(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}if(e.toUpperCase().startsWith("UNKNOWN_"))return parseInt(e.slice(8));return 0}},6105:(e,t,r)=>{"use strict";var n=r(78586).Buffer;var i=r(18742);var s=128,o=0,a=32,c=16,u=2,d=c|a|o<<6,p=u|o<<6;function base64Url(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function signatureAsBuffer(e){if(n.isBuffer(e)){return e}else if("string"===typeof e){return n.from(e,"base64")}throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function derToJose(e,t){e=signatureAsBuffer(e);var r=i(t);var o=r+1;var a=e.length;var c=0;if(e[c++]!==d){throw new Error('Could not find expected "seq"')}var u=e[c++];if(u===(s|1)){u=e[c++]}if(a-c<u){throw new Error('"seq" specified length of "'+u+'", only "'+(a-c)+'" remaining')}if(e[c++]!==p){throw new Error('Could not find expected "int" for "r"')}var m=e[c++];if(a-c-2<m){throw new Error('"r" specified length of "'+m+'", only "'+(a-c-2)+'" available')}if(o<m){throw new Error('"r" specified length of "'+m+'", max of "'+o+'" is acceptable')}var y=c;c+=m;if(e[c++]!==p){throw new Error('Could not find expected "int" for "s"')}var g=e[c++];if(a-c!==g){throw new Error('"s" specified length of "'+g+'", expected "'+(a-c)+'"')}if(o<g){throw new Error('"s" specified length of "'+g+'", max of "'+o+'" is acceptable')}var b=c;c+=g;if(c!==a){throw new Error('Expected to consume entire buffer, but "'+(a-c)+'" bytes remain')}var v=r-m,w=r-g;var _=n.allocUnsafe(v+m+w+g);for(c=0;c<v;++c){_[c]=0}e.copy(_,c,y+Math.max(-v,0),y+m);c=r;for(var C=c;c<C+w;++c){_[c]=0}e.copy(_,c,b+Math.max(-w,0),b+g);_=_.toString("base64");_=base64Url(_);return _}function countPadding(e,t,r){var n=0;while(t+n<r&&e[t+n]===0){++n}var i=e[t+n]>=s;if(i){--n}return n}function joseToDer(e,t){e=signatureAsBuffer(e);var r=i(t);var o=e.length;if(o!==r*2){throw new TypeError('"'+t+'" signatures must be "'+r*2+'" bytes, saw "'+o+'"')}var a=countPadding(e,0,r);var c=countPadding(e,r,e.length);var u=r-a;var m=r-c;var y=1+1+u+1+1+m;var g=y<s;var b=n.allocUnsafe((g?2:3)+y);var v=0;b[v++]=d;if(g){b[v++]=y}else{b[v++]=s|1;b[v++]=y&255}b[v++]=p;b[v++]=u;if(a<0){b[v++]=0;v+=e.copy(b,v,0,r)}else{v+=e.copy(b,v,a,r)}b[v++]=p;b[v++]=m;if(c<0){b[v++]=0;e.copy(b,v,r)}else{e.copy(b,v,r+c)}return b}e.exports={derToJose:derToJose,joseToDer:joseToDer}},18742:e=>{"use strict";function getParamSize(e){var t=(e/8|0)+(e%8===0?0:1);return t}var t={ES256:getParamSize(256),ES384:getParamSize(384),ES512:getParamSize(521)};function getParamBytesForAlg(e){var r=t[e];if(r){return r}throw new Error('Unknown algorithm "'+e+'"')}e.exports=getParamBytesForAlg},23976:e=>{e.exports=global},47729:(e,t,r)=>{e.exports=r(3371);e.exports.parser=r(67118)},3371:(e,t,r)=>{var n=r(90626);var i=r(40138);var s=r(63453)("engine.io-client:socket");var o=r(42094);var a=r(67118);var c=r(81505);var u=r(58175);e.exports=Socket;function Socket(e,t){if(!(this instanceof Socket))return new Socket(e,t);t=t||{};if(e&&"object"===typeof e){t=e;e=null}if(e){e=c(e);t.hostname=e.host;t.secure=e.protocol==="https"||e.protocol==="wss";t.port=e.port;if(e.query)t.query=e.query}else if(t.host){t.hostname=c(t.host).host}this.secure=null!=t.secure?t.secure:typeof location!=="undefined"&&"https:"===location.protocol;if(t.hostname&&!t.port){t.port=this.secure?"443":"80"}this.agent=t.agent||false;this.hostname=t.hostname||(typeof location!=="undefined"?location.hostname:"localhost");this.port=t.port||(typeof location!=="undefined"&&location.port?location.port:this.secure?443:80);this.query=t.query||{};if("string"===typeof this.query)this.query=u.decode(this.query);this.upgrade=false!==t.upgrade;this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!t.forceJSONP;this.jsonp=false!==t.jsonp;this.forceBase64=!!t.forceBase64;this.enablesXDR=!!t.enablesXDR;this.withCredentials=false!==t.withCredentials;this.timestampParam=t.timestampParam||"t";this.timestampRequests=t.timestampRequests;this.transports=t.transports||["polling","websocket"];this.transportOptions=t.transportOptions||{};this.readyState="";this.writeBuffer=[];this.prevBufferLen=0;this.policyPort=t.policyPort||843;this.rememberUpgrade=t.rememberUpgrade||false;this.binaryType=null;this.onlyBinaryUpgrades=t.onlyBinaryUpgrades;this.perMessageDeflate=false!==t.perMessageDeflate?t.perMessageDeflate||{}:false;if(true===this.perMessageDeflate)this.perMessageDeflate={};if(this.perMessageDeflate&&null==this.perMessageDeflate.threshold){this.perMessageDeflate.threshold=1024}this.pfx=t.pfx||undefined;this.key=t.key||undefined;this.passphrase=t.passphrase||undefined;this.cert=t.cert||undefined;this.ca=t.ca||undefined;this.ciphers=t.ciphers||undefined;this.rejectUnauthorized=t.rejectUnauthorized===undefined?true:t.rejectUnauthorized;this.forceNode=!!t.forceNode;this.isReactNative=typeof navigator!=="undefined"&&typeof navigator.product==="string"&&navigator.product.toLowerCase()==="reactnative";if(typeof self==="undefined"||this.isReactNative){if(t.extraHeaders&&Object.keys(t.extraHeaders).length>0){this.extraHeaders=t.extraHeaders}if(t.localAddress){this.localAddress=t.localAddress}}this.id=null;this.upgrades=null;this.pingInterval=null;this.pingTimeout=null;this.pingIntervalTimer=null;this.pingTimeoutTimer=null;this.open()}Socket.priorWebsocketSuccess=false;i(Socket.prototype);Socket.protocol=a.protocol;Socket.Socket=Socket;Socket.Transport=r(47043);Socket.transports=r(90626);Socket.parser=r(67118);Socket.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=clone(this.query);t.EIO=a.protocol;t.transport=e;var r=this.transportOptions[e]||{};if(this.id)t.sid=this.id;var i=new n[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative});return i};function clone(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}return t}Socket.prototype.open=function(){var e;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1){e="websocket"}else if(0===this.transports.length){var t=this;setTimeout((function(){t.emit("error","No transports available")}),0);return}else{e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){this.transports.shift();this.open();return}e.open();this.setTransport(e)};Socket.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;if(this.transport){s("clearing existing transport %s",this.transport.name);this.transport.removeAllListeners()}this.transport=e;e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))};Socket.prototype.probe=function(e){s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1});var r=false;var n=this;Socket.priorWebsocketSuccess=false;function onTransportOpen(){if(n.onlyBinaryUpgrades){var i=!this.supportsBinary&&n.transport.supportsBinary;r=r||i}if(r)return;s('probe transport "%s" opened',e);t.send([{type:"ping",data:"probe"}]);t.once("packet",(function(i){if(r)return;if("pong"===i.type&&"probe"===i.data){s('probe transport "%s" pong',e);n.upgrading=true;n.emit("upgrading",t);if(!t)return;Socket.priorWebsocketSuccess="websocket"===t.name;s('pausing current transport "%s"',n.transport.name);n.transport.pause((function(){if(r)return;if("closed"===n.readyState)return;s("changing transport and sending upgrade packet");cleanup();n.setTransport(t);t.send([{type:"upgrade"}]);n.emit("upgrade",t);t=null;n.upgrading=false;n.flush()}))}else{s('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name;n.emit("upgradeError",o)}}))}function freezeTransport(){if(r)return;r=true;cleanup();t.close();t=null}function onerror(r){var i=new Error("probe error: "+r);i.transport=t.name;freezeTransport();s('probe transport "%s" failed because of error: %s',e,r);n.emit("upgradeError",i)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(e){if(t&&e.name!==t.name){s('"%s" works - aborting "%s"',e.name,t.name);freezeTransport()}}function cleanup(){t.removeListener("open",onTransportOpen);t.removeListener("error",onerror);t.removeListener("close",onTransportClose);n.removeListener("close",onclose);n.removeListener("upgrading",onupgrade)}t.once("open",onTransportOpen);t.once("error",onerror);t.once("close",onTransportClose);this.once("close",onclose);this.once("upgrading",onupgrade);t.open()};Socket.prototype.onOpen=function(){s("socket open");this.readyState="open";Socket.priorWebsocketSuccess="websocket"===this.transport.name;this.emit("open");this.flush();if("open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++){this.probe(this.upgrades[e])}}};Socket.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket receive: type "%s", data "%s"',e.type,e.data);this.emit("packet",e);this.emit("heartbeat");switch(e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing();this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data;this.onError(t);break;case"message":this.emit("data",e.data);this.emit("message",e.data);break}}else{s('packet received with socket readyState "%s"',this.readyState)}};Socket.prototype.onHandshake=function(e){this.emit("handshake",e);this.id=e.sid;this.transport.query.sid=e.sid;this.upgrades=this.filterUpgrades(e.upgrades);this.pingInterval=e.pingInterval;this.pingTimeout=e.pingTimeout;this.onOpen();if("closed"===this.readyState)return;this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};Socket.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){if("closed"===t.readyState)return;t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)};Socket.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer);e.pingIntervalTimer=setTimeout((function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout);e.ping();e.onHeartbeat(e.pingTimeout)}),e.pingInterval)};Socket.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))};Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(0===this.writeBuffer.length){this.emit("drain")}else{this.flush()}};Socket.prototype.flush=function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){s("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};Socket.prototype.write=Socket.prototype.send=function(e,t,r){this.sendPacket("message",e,t,r);return this};Socket.prototype.sendPacket=function(e,t,r,n){if("function"===typeof t){n=t;t=undefined}if("function"===typeof r){n=r;r=null}if("closing"===this.readyState||"closed"===this.readyState){return}r=r||{};r.compress=false!==r.compress;var i={type:e,data:t,options:r};this.emit("packetCreate",i);this.writeBuffer.push(i);if(n)this.once("flush",n);this.flush()};Socket.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;if(this.writeBuffer.length){this.once("drain",(function(){if(this.upgrading){waitForUpgrade()}else{close()}}))}else if(this.upgrading){waitForUpgrade()}else{close()}}function close(){e.onClose("forced close");s("socket closing - telling transport to close");e.transport.close()}function cleanupAndClose(){e.removeListener("upgrade",cleanupAndClose);e.removeListener("upgradeError",cleanupAndClose);close()}function waitForUpgrade(){e.once("upgrade",cleanupAndClose);e.once("upgradeError",cleanupAndClose)}return this};Socket.prototype.onError=function(e){s("socket error %j",e);Socket.priorWebsocketSuccess=false;this.emit("error",e);this.onClose("transport error",e)};Socket.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",e,t);r.writeBuffer=[];r.prevBufferLen=0}};Socket.prototype.filterUpgrades=function(e){var t=[];for(var r=0,n=e.length;r<n;r++){if(~o(this.transports,e[r]))t.push(e[r])}return t}},47043:(e,t,r)=>{var n=r(67118);var i=r(40138);e.exports=Transport;function Transport(e){this.path=e.path;this.hostname=e.hostname;this.port=e.port;this.secure=e.secure;this.query=e.query;this.timestampParam=e.timestampParam;this.timestampRequests=e.timestampRequests;this.readyState="";this.agent=e.agent||false;this.socket=e.socket;this.enablesXDR=e.enablesXDR;this.withCredentials=e.withCredentials;this.pfx=e.pfx;this.key=e.key;this.passphrase=e.passphrase;this.cert=e.cert;this.ca=e.ca;this.ciphers=e.ciphers;this.rejectUnauthorized=e.rejectUnauthorized;this.forceNode=e.forceNode;this.isReactNative=e.isReactNative;this.extraHeaders=e.extraHeaders;this.localAddress=e.localAddress}i(Transport.prototype);Transport.prototype.onError=function(e,t){var r=new Error(e);r.type="TransportError";r.description=t;this.emit("error",r);return this};Transport.prototype.open=function(){if("closed"===this.readyState||""===this.readyState){this.readyState="opening";this.doOpen()}return this};Transport.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.doClose();this.onClose()}return this};Transport.prototype.send=function(e){if("open"===this.readyState){this.write(e)}else{throw new Error("Transport not open")}};Transport.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};Transport.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)};Transport.prototype.onPacket=function(e){this.emit("packet",e)};Transport.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},90626:(e,t,r)=>{var n=r(23166);var i=r(99353);var s=r(94566);var o=r(4034);t.polling=polling;t.websocket=o;function polling(e){var t;var r=false;var o=false;var a=false!==e.jsonp;if(typeof location!=="undefined"){var c="https:"===location.protocol;var u=location.port;if(!u){u=c?443:80}r=e.hostname!==location.hostname||u!==e.port;o=e.secure!==c}e.xdomain=r;e.xscheme=o;t=new n(e);if("open"in t&&!e.forceJSONP){return new i(e)}else{if(!a)throw new Error("JSONP disabled");return new s(e)}}},94566:(e,t,r)=>{var n=r(89955);var i=r(56192);var s=r(23976);e.exports=JSONPPolling;var o=/\n/g;var a=/\\n/g;var c;function empty(){}function JSONPPolling(e){n.call(this,e);this.query=this.query||{};if(!c){c=s.___eio=s.___eio||[]}this.index=c.length;var t=this;c.push((function(e){t.onData(e)}));this.query.j=this.index;if(typeof addEventListener==="function"){addEventListener("beforeunload",(function(){if(t.script)t.script.onerror=empty}),false)}}i(JSONPPolling,n);JSONPPolling.prototype.supportsBinary=false;JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null;this.iframe=null}n.prototype.doClose.call(this)};JSONPPolling.prototype.doPoll=function(){var e=this;var t=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}t.async=true;t.src=this.uri();t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];if(r){r.parentNode.insertBefore(t,r)}else{(document.head||document.body).appendChild(t)}this.script=t;var n="undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent);if(n){setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e);document.body.removeChild(e)}),100)}};JSONPPolling.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n=document.createElement("form");var i=document.createElement("textarea");var s=this.iframeId="eio_iframe_"+this.index;var c;n.className="socketio";n.style.position="absolute";n.style.top="-1000px";n.style.left="-1000px";n.target=s;n.method="POST";n.setAttribute("accept-charset","utf-8");i.name="d";n.appendChild(i);document.body.appendChild(n);this.form=n;this.area=i}this.form.action=this.uri();function complete(){initIframe();t()}function initIframe(){if(r.iframe){try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';c=document.createElement(e)}catch(e){c=document.createElement("iframe");c.name=r.iframeId;c.src="javascript:0"}c.id=r.iframeId;r.form.appendChild(c);r.iframe=c}initIframe();e=e.replace(a,"\\\n");this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(e){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(r.iframe.readyState==="complete"){complete()}}}else{this.iframe.onload=complete}}},99353:(e,t,r)=>{var n=r(23166);var i=r(89955);var s=r(40138);var o=r(56192);var a=r(63453)("engine.io-client:polling-xhr");var c=r(23976);e.exports=XHR;e.exports.Request=Request;function empty(){}function XHR(e){i.call(this,e);this.requestTimeout=e.requestTimeout;this.extraHeaders=e.extraHeaders;if(typeof location!=="undefined"){var t="https:"===location.protocol;var r=location.port;if(!r){r=t?443:80}this.xd=typeof location!=="undefined"&&e.hostname!==location.hostname||r!==e.port;this.xs=e.secure!==t}}o(XHR,i);XHR.prototype.supportsBinary=true;XHR.prototype.request=function(e){e=e||{};e.uri=this.uri();e.xd=this.xd;e.xs=this.xs;e.agent=this.agent||false;e.supportsBinary=this.supportsBinary;e.enablesXDR=this.enablesXDR;e.withCredentials=this.withCredentials;e.pfx=this.pfx;e.key=this.key;e.passphrase=this.passphrase;e.cert=this.cert;e.ca=this.ca;e.ciphers=this.ciphers;e.rejectUnauthorized=this.rejectUnauthorized;e.requestTimeout=this.requestTimeout;e.extraHeaders=this.extraHeaders;return new Request(e)};XHR.prototype.doWrite=function(e,t){var r=typeof e!=="string"&&e!==undefined;var n=this.request({method:"POST",data:e,isBinary:r});var i=this;n.on("success",t);n.on("error",(function(e){i.onError("xhr post error",e)}));this.sendXhr=n};XHR.prototype.doPoll=function(){a("xhr poll");var e=this.request();var t=this;e.on("data",(function(e){t.onData(e)}));e.on("error",(function(e){t.onError("xhr poll error",e)}));this.pollXhr=e};function Request(e){this.method=e.method||"GET";this.uri=e.uri;this.xd=!!e.xd;this.xs=!!e.xs;this.async=false!==e.async;this.data=undefined!==e.data?e.data:null;this.agent=e.agent;this.isBinary=e.isBinary;this.supportsBinary=e.supportsBinary;this.enablesXDR=e.enablesXDR;this.withCredentials=e.withCredentials;this.requestTimeout=e.requestTimeout;this.pfx=e.pfx;this.key=e.key;this.passphrase=e.passphrase;this.cert=e.cert;this.ca=e.ca;this.ciphers=e.ciphers;this.rejectUnauthorized=e.rejectUnauthorized;this.extraHeaders=e.extraHeaders;this.create()}s(Request.prototype);Request.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx;e.key=this.key;e.passphrase=this.passphrase;e.cert=this.cert;e.ca=this.ca;e.ciphers=this.ciphers;e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new n(e);var r=this;try{a("xhr open %s: %s",this.method,this.uri);t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(true);for(var i in this.extraHeaders){if(this.extraHeaders.hasOwnProperty(i)){t.setRequestHeader(i,this.extraHeaders[i])}}}}catch(e){}if("POST"===this.method){try{if(this.isBinary){t.setRequestHeader("Content-type","application/octet-stream")}else{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}}catch(e){}}try{t.setRequestHeader("Accept","*/*")}catch(e){}if("withCredentials"in t){t.withCredentials=this.withCredentials}if(this.requestTimeout){t.timeout=this.requestTimeout}if(this.hasXDR()){t.onload=function(){r.onLoad()};t.onerror=function(){r.onError(t.responseText)}}else{t.onreadystatechange=function(){if(t.readyState===2){try{var e=t.getResponseHeader("Content-Type");if(r.supportsBinary&&e==="application/octet-stream"||e==="application/octet-stream; charset=UTF-8"){t.responseType="arraybuffer"}}catch(e){}}if(4!==t.readyState)return;if(200===t.status||1223===t.status){r.onLoad()}else{setTimeout((function(){r.onError(typeof t.status==="number"?t.status:0)}),0)}}}a("xhr data %s",this.data);t.send(this.data)}catch(e){setTimeout((function(){r.onError(e)}),0);return}if(typeof document!=="undefined"){this.index=Request.requestsCount++;Request.requests[this.index]=this}};Request.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Request.prototype.onData=function(e){this.emit("data",e);this.onSuccess()};Request.prototype.onError=function(e){this.emit("error",e);this.cleanup(true)};Request.prototype.cleanup=function(e){if("undefined"===typeof this.xhr||null===this.xhr){return}if(this.hasXDR()){this.xhr.onload=this.xhr.onerror=empty}else{this.xhr.onreadystatechange=empty}if(e){try{this.xhr.abort()}catch(e){}}if(typeof document!=="undefined"){delete Request.requests[this.index]}this.xhr=null};Request.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}if(t==="application/octet-stream"||t==="application/octet-stream; charset=UTF-8"){e=this.xhr.response||this.xhr.responseText}else{e=this.xhr.responseText}}catch(e){this.onError(e)}if(null!=e){this.onData(e)}};Request.prototype.hasXDR=function(){return typeof XDomainRequest!=="undefined"&&!this.xs&&this.enablesXDR};Request.prototype.abort=function(){this.cleanup()};Request.requestsCount=0;Request.requests={};if(typeof document!=="undefined"){if(typeof attachEvent==="function"){attachEvent("onunload",unloadHandler)}else if(typeof addEventListener==="function"){var u="onpagehide"in c?"pagehide":"unload";addEventListener(u,unloadHandler,false)}}function unloadHandler(){for(var e in Request.requests){if(Request.requests.hasOwnProperty(e)){Request.requests[e].abort()}}}},89955:(e,t,r)=>{var n=r(47043);var i=r(58175);var s=r(67118);var o=r(56192);var a=r(73418);var c=r(63453)("engine.io-client:polling");e.exports=Polling;var u=function(){var e=r(23166);var t=new e({xdomain:false});return null!=t.responseType}();function Polling(e){var t=e&&e.forceBase64;if(!u||t){this.supportsBinary=false}n.call(this,e)}o(Polling,n);Polling.prototype.name="polling";Polling.prototype.doOpen=function(){this.poll()};Polling.prototype.pause=function(e){var t=this;this.readyState="pausing";function pause(){c("paused");t.readyState="paused";e()}if(this.polling||!this.writable){var r=0;if(this.polling){c("we are currently polling - waiting to pause");r++;this.once("pollComplete",(function(){c("pre-pause polling complete");--r||pause()}))}if(!this.writable){c("we are currently writing - waiting to pause");r++;this.once("drain",(function(){c("pre-pause writing complete");--r||pause()}))}}else{pause()}};Polling.prototype.poll=function(){c("polling");this.polling=true;this.doPoll();this.emit("poll")};Polling.prototype.onData=function(e){var t=this;c("polling got data %s",e);var callback=function(e,r,n){if("opening"===t.readyState&&e.type==="open"){t.onOpen()}if("close"===e.type){t.onClose();return false}t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,callback);if("closed"!==this.readyState){this.polling=false;this.emit("pollComplete");if("open"===this.readyState){this.poll()}else{c('ignoring poll - transport state "%s"',this.readyState)}}};Polling.prototype.doClose=function(){var e=this;function close(){c("writing close packet");e.write([{type:"close"}])}if("open"===this.readyState){c("transport open - closing");close()}else{c("transport not open - deferring close");this.once("open",close)}};Polling.prototype.write=function(e){var t=this;this.writable=false;var callbackfn=function(){t.writable=true;t.emit("drain")};s.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,callbackfn)}))};Polling.prototype.uri=function(){var e=this.query||{};var t=this.secure?"https":"http";var r="";if(false!==this.timestampRequests){e[this.timestampParam]=a()}if(!this.supportsBinary&&!e.sid){e.b64=1}e=i.encode(e);if(this.port&&("https"===t&&Number(this.port)!==443||"http"===t&&Number(this.port)!==80)){r=":"+this.port}if(e.length){e="?"+e}var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e}},4034:(e,t,r)=>{var n=r(47043);var i=r(67118);var s=r(58175);var o=r(56192);var a=r(73418);var c=r(63453)("engine.io-client:websocket");var u,d;if(typeof WebSocket!=="undefined"){u=WebSocket}else if(typeof self!=="undefined"){u=self.WebSocket||self.MozWebSocket}if(typeof window==="undefined"){try{d=r(17902)}catch(e){}}var p=u||d;e.exports=WS;function WS(e){var t=e&&e.forceBase64;if(t){this.supportsBinary=false}this.perMessageDeflate=e.perMessageDeflate;this.usingBrowserWebSocket=u&&!e.forceNode;this.protocols=e.protocols;if(!this.usingBrowserWebSocket){p=d}n.call(this,e)}o(WS,n);WS.prototype.name="websocket";WS.prototype.supportsBinary=true;WS.prototype.doOpen=function(){if(!this.check()){return}var e=this.uri();var t=this.protocols;var r={};if(!this.isReactNative){r.agent=this.agent;r.perMessageDeflate=this.perMessageDeflate;r.pfx=this.pfx;r.key=this.key;r.passphrase=this.passphrase;r.cert=this.cert;r.ca=this.ca;r.ciphers=this.ciphers;r.rejectUnauthorized=this.rejectUnauthorized}if(this.extraHeaders){r.headers=this.extraHeaders}if(this.localAddress){r.localAddress=this.localAddress}try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new p(e,t):new p(e):new p(e,t,r)}catch(e){return this.emit("error",e)}if(this.ws.binaryType===undefined){this.supportsBinary=false}if(this.ws.supports&&this.ws.supports.binary){this.supportsBinary=true;this.ws.binaryType="nodebuffer"}else{this.ws.binaryType="arraybuffer"}this.addEventListeners()};WS.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()};this.ws.onclose=function(){e.onClose()};this.ws.onmessage=function(t){e.onData(t.data)};this.ws.onerror=function(t){e.onError("websocket error",t)}};WS.prototype.write=function(e){var t=this;this.writable=false;var r=e.length;for(var n=0,s=r;n<s;n++){(function(e){i.encodePacket(e,t.supportsBinary,(function(n){if(!t.usingBrowserWebSocket){var i={};if(e.options){i.compress=e.options.compress}if(t.perMessageDeflate){var s="string"===typeof n?Buffer.byteLength(n):n.length;if(s<t.perMessageDeflate.threshold){i.compress=false}}}try{if(t.usingBrowserWebSocket){t.ws.send(n)}else{t.ws.send(n,i)}}catch(e){c("websocket closed before onclose event")}--r||done()}))})(e[n])}function done(){t.emit("flush");setTimeout((function(){t.writable=true;t.emit("drain")}),0)}};WS.prototype.onClose=function(){n.prototype.onClose.call(this)};WS.prototype.doClose=function(){if(typeof this.ws!=="undefined"){this.ws.close()}};WS.prototype.uri=function(){var e=this.query||{};var t=this.secure?"wss":"ws";var r="";if(this.port&&("wss"===t&&Number(this.port)!==443||"ws"===t&&Number(this.port)!==80)){r=":"+this.port}if(this.timestampRequests){e[this.timestampParam]=a()}if(!this.supportsBinary){e.b64=1}e=s.encode(e);if(e.length){e="?"+e}var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e};WS.prototype.check=function(){return!!p&&!("__initialize"in p&&this.name===WS.prototype.name)}},23166:(e,t,r)=>{e.exports=r(66842)},12641:(e,t,r)=>{t=e.exports=r(82511);t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function formatArgs(e){var r=this.useColors;e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff);if(!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0;var s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){if("%%"===e)return;i++;if("%c"===e){s=i}}));e.splice(s,0,n)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{if(null==e){t.storage.removeItem("debug")}else{t.storage.debug=e}}catch(e){}}function load(){var e;try{e=t.storage.debug}catch(e){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}t.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},82511:(e,t,r)=>{t=e.exports=createDebug.debug=createDebug["default"]=createDebug;t.coerce=coerce;t.disable=disable;t.enable=enable;t.enabled=enabled;t.humanize=r(74138);t.instances=[];t.names=[];t.skips=[];t.formatters={};function selectColor(e){var r=0,n;for(n in e){r=(r<<5)-r+e.charCodeAt(n);r|=0}return t.colors[Math.abs(r)%t.colors.length]}function createDebug(e){var r;function debug(){if(!debug.enabled)return;var e=debug;var n=+new Date;var i=n-(r||n);e.diff=i;e.prev=r;e.curr=n;r=n;var s=new Array(arguments.length);for(var o=0;o<s.length;o++){s[o]=arguments[o]}s[0]=t.coerce(s[0]);if("string"!==typeof s[0]){s.unshift("%O")}var a=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if(r==="%%")return r;a++;var i=t.formatters[n];if("function"===typeof i){var o=s[a];r=i.call(e,o);s.splice(a,1);a--}return r}));t.formatArgs.call(e,s);var c=debug.log||t.log||console.log.bind(console);c.apply(e,s)}debug.namespace=e;debug.enabled=t.enabled(e);debug.useColors=t.useColors();debug.color=selectColor(e);debug.destroy=destroy;if("function"===typeof t.init){t.init(debug)}t.instances.push(debug);return debug}function destroy(){var e=t.instances.indexOf(this);if(e!==-1){t.instances.splice(e,1);return true}else{return false}}function enable(e){t.save(e);t.names=[];t.skips=[];var r;var n=(typeof e==="string"?e:"").split(/[\s,]+/);var i=n.length;for(r=0;r<i;r++){if(!n[r])continue;e=n[r].replace(/\*/g,".*?");if(e[0]==="-"){t.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{t.names.push(new RegExp("^"+e+"$"))}}for(r=0;r<t.instances.length;r++){var s=t.instances[r];s.enabled=t.enabled(s.namespace)}}function disable(){t.enable("")}function enabled(e){if(e[e.length-1]==="*"){return true}var r,n;for(r=0,n=t.skips.length;r<n;r++){if(t.skips[r].test(e)){return false}}for(r=0,n=t.names.length;r<n;r++){if(t.names[r].test(e)){return true}}return false}function coerce(e){if(e instanceof Error)return e.stack||e.message;return e}},63453:(e,t,r)=>{if(typeof process==="undefined"||process.type==="renderer"){e.exports=r(12641)}else{e.exports=r(20514)}},20514:(e,t,r)=>{var n=r(76224);var i=r(73837);t=e.exports=r(82511);t.init=init;t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.colors=[6,2,3,4,5,1];try{var s=r(68337);if(s&&s.level>=2){t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(e){}t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}));var n=process.env[t];if(/^(yes|on|true|enabled)$/i.test(n))n=true;else if(/^(no|off|false|disabled)$/i.test(n))n=false;else if(n==="null")n=null;else n=Number(n);e[r]=n;return e}),{});function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)}t.formatters.o=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")};t.formatters.O=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts)};function formatArgs(e){var r=this.namespace;var n=this.useColors;if(n){var i=this.color;var s="[3"+(i<8?i:"8;5;"+i);var o="  "+s+";1m"+r+" "+"[0m";e[0]=o+e[0].split("\n").join("\n"+o);e.push(s+"m+"+t.humanize(this.diff)+"[0m")}else{e[0]=getDate()+r+" "+e[0]}}function getDate(){if(t.inspectOpts.hideDate){return""}else{return(new Date).toISOString()+" "}}function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")}function save(e){if(null==e){delete process.env.DEBUG}else{process.env.DEBUG=e}}function load(){return process.env.DEBUG}function init(e){e.inspectOpts={};var r=Object.keys(t.inspectOpts);for(var n=0;n<r.length;n++){e.inspectOpts[r[n]]=t.inspectOpts[r[n]]}}t.enable(load())},74138:e=>{var t=1e3;var r=t*60;var n=r*60;var i=n*24;var s=i*365.25;e.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return parse(e)}else if(r==="number"&&isNaN(e)===false){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!o){return}var a=parseFloat(o[1]);var c=(o[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return undefined}}function fmtShort(e){if(e>=i){return Math.round(e/i)+"d"}if(e>=n){return Math.round(e/n)+"h"}if(e>=r){return Math.round(e/r)+"m"}if(e>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){return plural(e,i,"day")||plural(e,n,"hour")||plural(e,r,"minute")||plural(e,t,"second")||e+" ms"}function plural(e,t,r){if(e<t){return}if(e<t*1.5){return Math.floor(e/t)+" "+r}return Math.ceil(e/t)+" "+r+"s"}},17902:(e,t,r)=>{"use strict";const n=r(36229);n.createWebSocketStream=r(94710);n.Server=r(20980);n.Receiver=r(90618);n.Sender=r(536);e.exports=n},15998:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(74507);function concat(e,t){if(e.length===0)return n;if(e.length===1)return e[0];const r=Buffer.allocUnsafe(t);let i=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,i);i+=n.length}if(i<t)return r.slice(0,i);return r}function _mask(e,t,r,n,i){for(let s=0;s<i;s++){r[n+s]=e[s]^t[s&3]}}function _unmask(e,t){const r=e.length;for(let n=0;n<r;n++){e[n]^=t[n&3]}}function toArrayBuffer(e){if(e.byteLength===e.buffer.byteLength){return e.buffer}return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function toBuffer(e){toBuffer.readOnly=true;if(Buffer.isBuffer(e))return e;let t;if(e instanceof ArrayBuffer){t=Buffer.from(e)}else if(ArrayBuffer.isView(e)){t=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}else{t=Buffer.from(e);toBuffer.readOnly=false}return t}try{const t=r(40521);const n=t.BufferUtil||t;e.exports={concat:concat,mask(e,t,r,i,s){if(s<48)_mask(e,t,r,i,s);else n.mask(e,t,r,i,s)},toArrayBuffer:toArrayBuffer,toBuffer:toBuffer,unmask(e,t){if(e.length<32)_unmask(e,t);else n.unmask(e,t)}}}catch(t){e.exports={concat:concat,mask:_mask,toArrayBuffer:toArrayBuffer,toBuffer:toBuffer,unmask:_unmask}}},74507:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},64226:e=>{"use strict";class Event{constructor(e,t){this.target=t;this.type=e}}class MessageEvent extends Event{constructor(e,t){super("message",t);this.data=e}}class CloseEvent extends Event{constructor(e,t,r){super("close",r);this.wasClean=r._closeFrameReceived&&r._closeFrameSent;this.reason=t;this.code=e}}class OpenEvent extends Event{constructor(e){super("open",e)}}class ErrorEvent extends Event{constructor(e,t){super("error",t);this.message=e.message;this.error=e}}const t={addEventListener(e,t,r){if(typeof t!=="function")return;function onMessage(e){t.call(this,new MessageEvent(e,this))}function onClose(e,r){t.call(this,new CloseEvent(e,r,this))}function onError(e){t.call(this,new ErrorEvent(e,this))}function onOpen(){t.call(this,new OpenEvent(this))}const n=r&&r.once?"once":"on";if(e==="message"){onMessage._listener=t;this[n](e,onMessage)}else if(e==="close"){onClose._listener=t;this[n](e,onClose)}else if(e==="error"){onError._listener=t;this[n](e,onError)}else if(e==="open"){onOpen._listener=t;this[n](e,onOpen)}else{this[n](e,t)}},removeEventListener(e,t){const r=this.listeners(e);for(let n=0;n<r.length;n++){if(r[n]===t||r[n]._listener===t){this.removeListener(e,r[n])}}}};e.exports=t},43751:e=>{"use strict";const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function push(e,t,r){if(e[t]===undefined)e[t]=[r];else e[t].push(r)}function parse(e){const r=Object.create(null);if(e===undefined||e==="")return r;let n=Object.create(null);let i=false;let s=false;let o=false;let a;let c;let u=-1;let d=-1;let p=0;for(;p<e.length;p++){const m=e.charCodeAt(p);if(a===undefined){if(d===-1&&t[m]===1){if(u===-1)u=p}else if(m===32||m===9){if(d===-1&&u!==-1)d=p}else if(m===59||m===44){if(u===-1){throw new SyntaxError(`Unexpected character at index ${p}`)}if(d===-1)d=p;const t=e.slice(u,d);if(m===44){push(r,t,n);n=Object.create(null)}else{a=t}u=d=-1}else{throw new SyntaxError(`Unexpected character at index ${p}`)}}else if(c===undefined){if(d===-1&&t[m]===1){if(u===-1)u=p}else if(m===32||m===9){if(d===-1&&u!==-1)d=p}else if(m===59||m===44){if(u===-1){throw new SyntaxError(`Unexpected character at index ${p}`)}if(d===-1)d=p;push(n,e.slice(u,d),true);if(m===44){push(r,a,n);n=Object.create(null);a=undefined}u=d=-1}else if(m===61&&u!==-1&&d===-1){c=e.slice(u,p);u=d=-1}else{throw new SyntaxError(`Unexpected character at index ${p}`)}}else{if(s){if(t[m]!==1){throw new SyntaxError(`Unexpected character at index ${p}`)}if(u===-1)u=p;else if(!i)i=true;s=false}else if(o){if(t[m]===1){if(u===-1)u=p}else if(m===34&&u!==-1){o=false;d=p}else if(m===92){s=true}else{throw new SyntaxError(`Unexpected character at index ${p}`)}}else if(m===34&&e.charCodeAt(p-1)===61){o=true}else if(d===-1&&t[m]===1){if(u===-1)u=p}else if(u!==-1&&(m===32||m===9)){if(d===-1)d=p}else if(m===59||m===44){if(u===-1){throw new SyntaxError(`Unexpected character at index ${p}`)}if(d===-1)d=p;let t=e.slice(u,d);if(i){t=t.replace(/\\/g,"");i=false}push(n,c,t);if(m===44){push(r,a,n);n=Object.create(null);a=undefined}c=undefined;u=d=-1}else{throw new SyntaxError(`Unexpected character at index ${p}`)}}}if(u===-1||o){throw new SyntaxError("Unexpected end of input")}if(d===-1)d=p;const m=e.slice(u,d);if(a===undefined){push(r,m,n)}else{if(c===undefined){push(n,m,true)}else if(i){push(n,c,m.replace(/\\/g,""))}else{push(n,c,m)}push(r,a,n)}return r}function format(e){return Object.keys(e).map((t=>{let r=e[t];if(!Array.isArray(r))r=[r];return r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];if(!Array.isArray(r))r=[r];return r.map((e=>e===true?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")}e.exports={format:format,parse:parse}},54417:e=>{"use strict";const t=Symbol("kDone");const r=Symbol("kRun");class Limiter{constructor(e){this[t]=()=>{this.pending--;this[r]()};this.concurrency=e||Infinity;this.jobs=[];this.pending=0}add(e){this.jobs.push(e);this[r]()}[r](){if(this.pending===this.concurrency)return;if(this.jobs.length){const e=this.jobs.shift();this.pending++;e(this[t])}}}e.exports=Limiter},72240:(e,t,r)=>{"use strict";const n=r(59796);const i=r(15998);const s=r(54417);const{kStatusCode:o,NOOP:a}=r(74507);const c=Buffer.from([0,0,255,255]);const u=Symbol("permessage-deflate");const d=Symbol("total-length");const p=Symbol("callback");const m=Symbol("buffers");const y=Symbol("error");let g;class PerMessageDeflate{constructor(e,t,r){this._maxPayload=r|0;this._options=e||{};this._threshold=this._options.threshold!==undefined?this._options.threshold:1024;this._isServer=!!t;this._deflate=null;this._inflate=null;this.params=null;if(!g){const e=this._options.concurrencyLimit!==undefined?this._options.concurrencyLimit:10;g=new s(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};if(this._options.serverNoContextTakeover){e.server_no_context_takeover=true}if(this._options.clientNoContextTakeover){e.client_no_context_takeover=true}if(this._options.serverMaxWindowBits){e.server_max_window_bits=this._options.serverMaxWindowBits}if(this._options.clientMaxWindowBits){e.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits==null){e.client_max_window_bits=true}return e}accept(e){e=this.normalizeParams(e);this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e);return this.params}cleanup(){if(this._inflate){this._inflate.close();this._inflate=null}if(this._deflate){const e=this._deflate[p];this._deflate.close();this._deflate=null;if(e){e(new Error("The deflate stream was closed while data was being processed"))}}}acceptAsServer(e){const t=this._options;const r=e.find((e=>{if(t.serverNoContextTakeover===false&&e.server_no_context_takeover||e.server_max_window_bits&&(t.serverMaxWindowBits===false||typeof t.serverMaxWindowBits==="number"&&t.serverMaxWindowBits>e.server_max_window_bits)||typeof t.clientMaxWindowBits==="number"&&!e.client_max_window_bits){return false}return true}));if(!r){throw new Error("None of the extension offers can be accepted")}if(t.serverNoContextTakeover){r.server_no_context_takeover=true}if(t.clientNoContextTakeover){r.client_no_context_takeover=true}if(typeof t.serverMaxWindowBits==="number"){r.server_max_window_bits=t.serverMaxWindowBits}if(typeof t.clientMaxWindowBits==="number"){r.client_max_window_bits=t.clientMaxWindowBits}else if(r.client_max_window_bits===true||t.clientMaxWindowBits===false){delete r.client_max_window_bits}return r}acceptAsClient(e){const t=e[0];if(this._options.clientNoContextTakeover===false&&t.client_no_context_takeover){throw new Error('Unexpected parameter "client_no_context_takeover"')}if(!t.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number"){t.client_max_window_bits=this._options.clientMaxWindowBits}}else if(this._options.clientMaxWindowBits===false||typeof this._options.clientMaxWindowBits==="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits){throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}return t}normalizeParams(e){e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1){throw new Error(`Parameter "${t}" must have only a single value`)}r=r[0];if(t==="client_max_window_bits"){if(r!==true){const e=+r;if(!Number.isInteger(e)||e<8||e>15){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}r=e}else if(!this._isServer){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}}else if(t==="server_max_window_bits"){const e=+r;if(!Number.isInteger(e)||e<8||e>15){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}r=e}else if(t==="client_no_context_takeover"||t==="server_no_context_takeover"){if(r!==true){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}}else{throw new Error(`Unknown parameter "${t}"`)}e[t]=r}))}));return e}decompress(e,t,r){g.add((n=>{this._decompress(e,t,((e,t)=>{n();r(e,t)}))}))}compress(e,t,r){g.add((n=>{this._compress(e,t,((e,t)=>{n();r(e,t)}))}))}_decompress(e,t,r){const s=this._isServer?"client":"server";if(!this._inflate){const e=`${s}_max_window_bits`;const t=typeof this.params[e]!=="number"?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t});this._inflate[u]=this;this._inflate[d]=0;this._inflate[m]=[];this._inflate.on("error",inflateOnError);this._inflate.on("data",inflateOnData)}this._inflate[p]=r;this._inflate.write(e);if(t)this._inflate.write(c);this._inflate.flush((()=>{const e=this._inflate[y];if(e){this._inflate.close();this._inflate=null;r(e);return}const n=i.concat(this._inflate[m],this._inflate[d]);if(this._inflate._readableState.endEmitted){this._inflate.close();this._inflate=null}else{this._inflate[d]=0;this._inflate[m]=[];if(t&&this.params[`${s}_no_context_takeover`]){this._inflate.reset()}}r(null,n)}))}_compress(e,t,r){const s=this._isServer?"server":"client";if(!this._deflate){const e=`${s}_max_window_bits`;const t=typeof this.params[e]!=="number"?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t});this._deflate[d]=0;this._deflate[m]=[];this._deflate.on("error",a);this._deflate.on("data",deflateOnData)}this._deflate[p]=r;this._deflate.write(e);this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate){return}let e=i.concat(this._deflate[m],this._deflate[d]);if(t)e=e.slice(0,e.length-4);this._deflate[p]=null;this._deflate[d]=0;this._deflate[m]=[];if(t&&this.params[`${s}_no_context_takeover`]){this._deflate.reset()}r(null,e)}))}}e.exports=PerMessageDeflate;function deflateOnData(e){this[m].push(e);this[d]+=e.length}function inflateOnData(e){this[d]+=e.length;if(this[u]._maxPayload<1||this[d]<=this[u]._maxPayload){this[m].push(e);return}this[y]=new RangeError("Max payload size exceeded");this[y].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH";this[y][o]=1009;this.removeListener("data",inflateOnData);this.reset()}function inflateOnError(e){this[u]._inflate=null;e[o]=1007;this[p](e)}},90618:(e,t,r)=>{"use strict";const{Writable:n}=r(68265);const i=r(72240);const{BINARY_TYPES:s,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=r(74507);const{concat:u,toArrayBuffer:d,unmask:p}=r(15998);const{isValidStatusCode:m,isValidUTF8:y}=r(63319);const g=0;const b=1;const v=2;const w=3;const _=4;const C=5;class Receiver extends n{constructor(e,t,r,n){super();this._binaryType=e||s[0];this[c]=undefined;this._extensions=t||{};this._isServer=!!r;this._maxPayload=n|0;this._bufferedBytes=0;this._buffers=[];this._compressed=false;this._payloadLength=0;this._mask=undefined;this._fragmented=0;this._masked=false;this._fin=false;this._opcode=0;this._totalPayloadLength=0;this._messageLength=0;this._fragments=[];this._state=g;this._loop=false}_write(e,t,r){if(this._opcode===8&&this._state==g)return r();this._bufferedBytes+=e.length;this._buffers.push(e);this.startLoop(r)}consume(e){this._bufferedBytes-=e;if(e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];this._buffers[0]=t.slice(e);return t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0];const n=t.length-e;if(e>=r.length){t.set(this._buffers.shift(),n)}else{t.set(new Uint8Array(r.buffer,r.byteOffset,e),n);this._buffers[0]=r.slice(e)}e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=true;do{switch(this._state){case g:t=this.getInfo();break;case b:t=this.getPayloadLength16();break;case v:t=this.getPayloadLength64();break;case w:this.getMask();break;case _:t=this.getData(e);break;default:this._loop=false;return}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=false;return}const e=this.consume(2);if((e[0]&48)!==0){this._loop=false;return error(RangeError,"RSV2 and RSV3 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_2_3")}const t=(e[0]&64)===64;if(t&&!this._extensions[i.extensionName]){this._loop=false;return error(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1")}this._fin=(e[0]&128)===128;this._opcode=e[0]&15;this._payloadLength=e[1]&127;if(this._opcode===0){if(t){this._loop=false;return error(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1")}if(!this._fragmented){this._loop=false;return error(RangeError,"invalid opcode 0",true,1002,"WS_ERR_INVALID_OPCODE")}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){this._loop=false;return error(RangeError,`invalid opcode ${this._opcode}`,true,1002,"WS_ERR_INVALID_OPCODE")}this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin){this._loop=false;return error(RangeError,"FIN must be set",true,1002,"WS_ERR_EXPECTED_FIN")}if(t){this._loop=false;return error(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1")}if(this._payloadLength>125){this._loop=false;return error(RangeError,`invalid payload length ${this._payloadLength}`,true,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}}else{this._loop=false;return error(RangeError,`invalid opcode ${this._opcode}`,true,1002,"WS_ERR_INVALID_OPCODE")}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;this._masked=(e[1]&128)===128;if(this._isServer){if(!this._masked){this._loop=false;return error(RangeError,"MASK must be set",true,1002,"WS_ERR_EXPECTED_MASK")}}else if(this._masked){this._loop=false;return error(RangeError,"MASK must be clear",true,1002,"WS_ERR_UNEXPECTED_MASK")}if(this._payloadLength===126)this._state=b;else if(this._payloadLength===127)this._state=v;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=false;return}this._payloadLength=this.consume(2).readUInt16BE(0);return this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=false;return}const e=this.consume(8);const t=e.readUInt32BE(0);if(t>Math.pow(2,53-32)-1){this._loop=false;return error(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",false,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")}this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4);return this.haveLength()}haveLength(){if(this._payloadLength&&this._opcode<8){this._totalPayloadLength+=this._payloadLength;if(this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){this._loop=false;return error(RangeError,"Max payload size exceeded",false,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")}}if(this._masked)this._state=w;else this._state=_}getMask(){if(this._bufferedBytes<4){this._loop=false;return}this._mask=this.consume(4);this._state=_}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=false;return}t=this.consume(this._payloadLength);if(this._masked)p(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=C;this.decompress(t,e);return}if(t.length){this._messageLength=this._totalPayloadLength;this._fragments.push(t)}return this.dataMessage()}decompress(e,t){const r=this._extensions[i.extensionName];r.decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){this._messageLength+=r.length;if(this._messageLength>this._maxPayload&&this._maxPayload>0){return t(error(RangeError,"Max payload size exceeded",false,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"))}this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength;const t=this._fragments;this._totalPayloadLength=0;this._messageLength=0;this._fragmented=0;this._fragments=[];if(this._opcode===2){let r;if(this._binaryType==="nodebuffer"){r=u(t,e)}else if(this._binaryType==="arraybuffer"){r=d(u(t,e))}else{r=t}this.emit("message",r)}else{const r=u(t,e);if(!y(r)){this._loop=false;return error(Error,"invalid UTF-8 sequence",true,1007,"WS_ERR_INVALID_UTF8")}this.emit("message",r.toString())}}this._state=g}controlMessage(e){if(this._opcode===8){this._loop=false;if(e.length===0){this.emit("conclude",1005,"");this.end()}else if(e.length===1){return error(RangeError,"invalid payload length 1",true,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else{const t=e.readUInt16BE(0);if(!m(t)){return error(RangeError,`invalid status code ${t}`,true,1002,"WS_ERR_INVALID_CLOSE_CODE")}const r=e.slice(2);if(!y(r)){return error(Error,"invalid UTF-8 sequence",true,1007,"WS_ERR_INVALID_UTF8")}this.emit("conclude",t,r.toString());this.end()}}else if(this._opcode===9){this.emit("ping",e)}else{this.emit("pong",e)}this._state=g}}e.exports=Receiver;function error(e,t,r,n,i){const s=new e(r?`Invalid WebSocket frame: ${t}`:t);Error.captureStackTrace(s,error);s.code=i;s[a]=n;return s}},536:(e,t,r)=>{"use strict";const n=r(41808);const i=r(24404);const{randomFillSync:s}=r(6113);const o=r(72240);const{EMPTY_BUFFER:a}=r(74507);const{isValidStatusCode:c}=r(63319);const{mask:u,toBuffer:d}=r(15998);const p=Buffer.alloc(4);class Sender{constructor(e,t){this._extensions=t||{};this._socket=e;this._firstFragment=true;this._compress=false;this._bufferedBytes=0;this._deflating=false;this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let n=t.mask?6:2;let i=e.length;if(e.length>=65536){n+=8;i=127}else if(e.length>125){n+=2;i=126}const o=Buffer.allocUnsafe(r?e.length+n:n);o[0]=t.fin?t.opcode|128:t.opcode;if(t.rsv1)o[0]|=64;o[1]=i;if(i===126){o.writeUInt16BE(e.length,2)}else if(i===127){o.writeUInt32BE(0,2);o.writeUInt32BE(e.length,6)}if(!t.mask)return[o,e];s(p,0,4);o[1]|=128;o[n-4]=p[0];o[n-3]=p[1];o[n-2]=p[2];o[n-1]=p[3];if(r){u(e,p,o,n,e.length);return[o]}u(e,p,e,0,e.length);return[o,e]}close(e,t,r,n){let i;if(e===undefined){i=a}else if(typeof e!=="number"||!c(e)){throw new TypeError("First argument must be a valid error code number")}else if(t===undefined||t===""){i=Buffer.allocUnsafe(2);i.writeUInt16BE(e,0)}else{const r=Buffer.byteLength(t);if(r>123){throw new RangeError("The message must not be greater than 123 bytes")}i=Buffer.allocUnsafe(2+r);i.writeUInt16BE(e,0);i.write(t,2)}if(this._deflating){this.enqueue([this.doClose,i,r,n])}else{this.doClose(i,r,n)}}doClose(e,t,r){this.sendFrame(Sender.frame(e,{fin:true,rsv1:false,opcode:8,mask:t,readOnly:false}),r)}ping(e,t,r){const n=d(e);if(n.length>125){throw new RangeError("The data size must not be greater than 125 bytes")}if(this._deflating){this.enqueue([this.doPing,n,t,d.readOnly,r])}else{this.doPing(n,t,d.readOnly,r)}}doPing(e,t,r,n){this.sendFrame(Sender.frame(e,{fin:true,rsv1:false,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){const n=d(e);if(n.length>125){throw new RangeError("The data size must not be greater than 125 bytes")}if(this._deflating){this.enqueue([this.doPong,n,t,d.readOnly,r])}else{this.doPong(n,t,d.readOnly,r)}}doPong(e,t,r,n){this.sendFrame(Sender.frame(e,{fin:true,rsv1:false,opcode:10,mask:t,readOnly:r}),n)}send(e,t,r){const n=d(e);const i=this._extensions[o.extensionName];let s=t.binary?2:1;let a=t.compress;if(this._firstFragment){this._firstFragment=false;if(a&&i){a=n.length>=i._threshold}this._compress=a}else{a=false;s=0}if(t.fin)this._firstFragment=true;if(i){const e={fin:t.fin,rsv1:a,opcode:s,mask:t.mask,readOnly:d.readOnly};if(this._deflating){this.enqueue([this.dispatch,n,this._compress,e,r])}else{this.dispatch(n,this._compress,e,r)}}else{this.sendFrame(Sender.frame(n,{fin:t.fin,rsv1:false,opcode:s,mask:t.mask,readOnly:d.readOnly}),r)}}dispatch(e,t,r,n){if(!t){this.sendFrame(Sender.frame(e,r),n);return}const i=this._extensions[o.extensionName];this._bufferedBytes+=e.length;this._deflating=true;i.compress(e,r.fin,((t,i)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");if(typeof n==="function")n(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];if(typeof r==="function")r(e)}return}this._bufferedBytes-=e.length;this._deflating=false;r.readOnly=false;this.sendFrame(Sender.frame(i,r),n);this.dequeue()}))}dequeue(){while(!this._deflating&&this._queue.length){const e=this._queue.shift();this._bufferedBytes-=e[1].length;Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length;this._queue.push(e)}sendFrame(e,t){if(e.length===2){this._socket.cork();this._socket.write(e[0]);this._socket.write(e[1],t);this._socket.uncork()}else{this._socket.write(e[0],t)}}}e.exports=Sender},94710:(e,t,r)=>{"use strict";const{Duplex:n}=r(68265);function emitClose(e){e.emit("close")}function duplexOnEnd(){if(!this.destroyed&&this._writableState.finished){this.destroy()}}function duplexOnError(e){this.removeListener("error",duplexOnError);this.destroy();if(this.listenerCount("error")===0){this.emit("error",e)}}function createWebSocketStream(e,t){let r=true;let i=true;function receiverOnDrain(){if(r)e._socket.resume()}if(e.readyState===e.CONNECTING){e.once("open",(function open(){e._receiver.removeAllListeners("drain");e._receiver.on("drain",receiverOnDrain)}))}else{e._receiver.removeAllListeners("drain");e._receiver.on("drain",receiverOnDrain)}const s=new n({...t,autoDestroy:false,emitClose:false,objectMode:false,writableObjectMode:false});e.on("message",(function message(t){if(!s.push(t)){r=false;e._socket.pause()}}));e.once("error",(function error(e){if(s.destroyed)return;i=false;s.destroy(e)}));e.once("close",(function close(){if(s.destroyed)return;s.push(null)}));s._destroy=function(t,r){if(e.readyState===e.CLOSED){r(t);process.nextTick(emitClose,s);return}let n=false;e.once("error",(function error(e){n=true;r(e)}));e.once("close",(function close(){if(!n)r(t);process.nextTick(emitClose,s)}));if(i)e.terminate()};s._final=function(t){if(e.readyState===e.CONNECTING){e.once("open",(function open(){s._final(t)}));return}if(e._socket===null)return;if(e._socket._writableState.finished){t();if(s._readableState.endEmitted)s.destroy()}else{e._socket.once("finish",(function finish(){t()}));e.close()}};s._read=function(){if((e.readyState===e.OPEN||e.readyState===e.CLOSING)&&!r){r=true;if(!e._receiver._writableState.needDrain)e._socket.resume()}};s._write=function(t,r,n){if(e.readyState===e.CONNECTING){e.once("open",(function open(){s._write(t,r,n)}));return}e.send(t,n)};s.on("end",duplexOnEnd);s.on("error",duplexOnError);return s}e.exports=createWebSocketStream},63319:(e,t,r)=>{"use strict";function isValidStatusCode(e){return e>=1e3&&e<=1014&&e!==1004&&e!==1005&&e!==1006||e>=3e3&&e<=4999}function _isValidUTF8(e){const t=e.length;let r=0;while(r<t){if((e[r]&128)===0){r++}else if((e[r]&224)===192){if(r+1===t||(e[r+1]&192)!==128||(e[r]&254)===192){return false}r+=2}else if((e[r]&240)===224){if(r+2>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||e[r]===224&&(e[r+1]&224)===128||e[r]===237&&(e[r+1]&224)===160){return false}r+=3}else if((e[r]&248)===240){if(r+3>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||(e[r+3]&192)!==128||e[r]===240&&(e[r+1]&240)===128||e[r]===244&&e[r+1]>143||e[r]>244){return false}r+=4}else{return false}}return true}try{let t=r(6313);if(typeof t==="object"){t=t.Validation.isValidUTF8}e.exports={isValidStatusCode:isValidStatusCode,isValidUTF8(e){return e.length<150?_isValidUTF8(e):t(e)}}}catch(t){e.exports={isValidStatusCode:isValidStatusCode,isValidUTF8:_isValidUTF8}}},20980:(e,t,r)=>{"use strict";const n=r(82361);const i=r(13685);const s=r(95687);const o=r(41808);const a=r(24404);const{createHash:c}=r(6113);const u=r(72240);const d=r(36229);const{format:p,parse:m}=r(43751);const{GUID:y,kWebSocket:g}=r(74507);const b=/^[+/0-9A-Za-z]{22}==$/;const v=0;const w=1;const _=2;class WebSocketServer extends n{constructor(e,t){super();e={maxPayload:100*1024*1024,perMessageDeflate:false,handleProtocols:null,clientTracking:true,verifyClient:null,noServer:false,backlog:null,server:null,host:null,path:null,port:null,...e};if(e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer){throw new TypeError('One and only one of the "port", "server", or "noServer" options '+"must be specified")}if(e.port!=null){this._server=i.createServer(((e,t)=>{const r=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"});t.end(r)}));this._server.listen(e.port,e.host,e.backlog,t)}else if(e.server){this._server=e.server}if(this._server){const e=this.emit.bind(this,"connection");this._removeListeners=addListeners(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}if(e.perMessageDeflate===true)e.perMessageDeflate={};if(e.clientTracking)this.clients=new Set;this.options=e;this._state=v}address(){if(this.options.noServer){throw new Error('The server is operating in "noServer" mode')}if(!this._server)return null;return this._server.address()}close(e){if(e)this.once("close",e);if(this._state===_){process.nextTick(emitClose,this);return}if(this._state===w)return;this._state=w;if(this.clients){for(const e of this.clients)e.terminate()}const t=this._server;if(t){this._removeListeners();this._removeListeners=this._server=null;if(this.options.port!=null){t.close(emitClose.bind(undefined,this));return}}process.nextTick(emitClose,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");const r=t!==-1?e.url.slice(0,t):e.url;if(r!==this.options.path)return false}return true}handleUpgrade(e,t,r,n){t.on("error",socketOnError);const i=e.headers["sec-websocket-key"]!==undefined?e.headers["sec-websocket-key"].trim():false;const s=e.headers.upgrade;const o=+e.headers["sec-websocket-version"];const a={};if(e.method!=="GET"||s===undefined||s.toLowerCase()!=="websocket"||!i||!b.test(i)||o!==8&&o!==13||!this.shouldHandle(e)){return abortHandshake(t,400)}if(this.options.perMessageDeflate){const r=new u(this.options.perMessageDeflate,true,this.options.maxPayload);try{const t=m(e.headers["sec-websocket-extensions"]);if(t[u.extensionName]){r.accept(t[u.extensionName]);a[u.extensionName]=r}}catch(e){return abortHandshake(t,400)}}if(this.options.verifyClient){const s={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(s,((s,o,c,u)=>{if(!s){return abortHandshake(t,o||401,c,u)}this.completeUpgrade(i,a,e,t,r,n)}));return}if(!this.options.verifyClient(s))return abortHandshake(t,401)}this.completeUpgrade(i,a,e,t,r,n)}completeUpgrade(e,t,r,n,i,s){if(!n.readable||!n.writable)return n.destroy();if(n[g]){throw new Error("server.handleUpgrade() was called more than once with the same "+"socket, possibly due to a misconfiguration")}if(this._state>v)return abortHandshake(n,503);const o=c("sha1").update(e+y).digest("base64");const a=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o}`];const m=new d(null);let b=r.headers["sec-websocket-protocol"];if(b){b=b.split(",").map(trim);if(this.options.handleProtocols){b=this.options.handleProtocols(b,r)}else{b=b[0]}if(b){a.push(`Sec-WebSocket-Protocol: ${b}`);m._protocol=b}}if(t[u.extensionName]){const e=t[u.extensionName].params;const r=p({[u.extensionName]:[e]});a.push(`Sec-WebSocket-Extensions: ${r}`);m._extensions=t}this.emit("headers",a,r);n.write(a.concat("\r\n").join("\r\n"));n.removeListener("error",socketOnError);m.setSocket(n,i,this.options.maxPayload);if(this.clients){this.clients.add(m);m.on("close",(()=>this.clients.delete(m)))}s(m,r)}}e.exports=WebSocketServer;function addListeners(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function removeListeners(){for(const r of Object.keys(t)){e.removeListener(r,t[r])}}}function emitClose(e){e._state=_;e.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(e,t,r,n){if(e.writable){r=r||i.STATUS_CODES[t];n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n};e.write(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)}e.removeListener("error",socketOnError);e.destroy()}function trim(e){return e.trim()}},36229:(e,t,r)=>{"use strict";const n=r(82361);const i=r(95687);const s=r(13685);const o=r(41808);const a=r(24404);const{randomBytes:c,createHash:u}=r(6113);const{Readable:d}=r(68265);const{URL:p}=r(57310);const m=r(72240);const y=r(90618);const g=r(536);const{BINARY_TYPES:b,EMPTY_BUFFER:v,GUID:w,kStatusCode:_,kWebSocket:C,NOOP:P}=r(74507);const{addEventListener:O,removeEventListener:E}=r(64226);const{format:I,parse:k}=r(43751);const{toBuffer:T}=r(15998);const x=["CONNECTING","OPEN","CLOSING","CLOSED"];const R=[8,13];const B=30*1e3;class WebSocket extends n{constructor(e,t,r){super();this._binaryType=b[0];this._closeCode=1006;this._closeFrameReceived=false;this._closeFrameSent=false;this._closeMessage="";this._closeTimer=null;this._extensions={};this._protocol="";this._readyState=WebSocket.CONNECTING;this._receiver=null;this._sender=null;this._socket=null;if(e!==null){this._bufferedAmount=0;this._isServer=false;this._redirects=0;if(Array.isArray(t)){t=t.join(", ")}else if(typeof t==="object"&&t!==null){r=t;t=undefined}initAsClient(this,e,t,r)}else{this._isServer=true}}get binaryType(){return this._binaryType}set binaryType(e){if(!b.includes(e))return;this._binaryType=e;if(this._receiver)this._receiver._binaryType=e}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get onclose(){return undefined}set onclose(e){}get onerror(){return undefined}set onerror(e){}get onopen(){return undefined}set onopen(e){}get onmessage(){return undefined}set onmessage(e){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new y(this.binaryType,this._extensions,this._isServer,r);this._sender=new g(e,this._extensions);this._receiver=n;this._socket=e;n[C]=this;e[C]=this;n.on("conclude",receiverOnConclude);n.on("drain",receiverOnDrain);n.on("error",receiverOnError);n.on("message",receiverOnMessage);n.on("ping",receiverOnPing);n.on("pong",receiverOnPong);e.setTimeout(0);e.setNoDelay();if(t.length>0)e.unshift(t);e.on("close",socketOnClose);e.on("data",socketOnData);e.on("end",socketOnEnd);e.on("error",socketOnError);this._readyState=WebSocket.OPEN;this.emit("open")}emitClose(){if(!this._socket){this._readyState=WebSocket.CLOSED;this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[m.extensionName]){this._extensions[m.extensionName].cleanup()}this._receiver.removeAllListeners();this._readyState=WebSocket.CLOSED;this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const e="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,e)}if(this.readyState===WebSocket.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)){this._socket.end()}return}this._readyState=WebSocket.CLOSING;this._sender.close(e,t,!this._isServer,(e=>{if(e)return;this._closeFrameSent=true;if(this._closeFrameReceived||this._receiver._writableState.errorEmitted){this._socket.end()}}));this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),B)}ping(e,t,r){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof e==="function"){r=e;e=t=undefined}else if(typeof t==="function"){r=t;t=undefined}if(typeof e==="number")e=e.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}if(t===undefined)t=!this._isServer;this._sender.ping(e||v,t,r)}pong(e,t,r){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof e==="function"){r=e;e=t=undefined}else if(typeof t==="function"){r=t;t=undefined}if(typeof e==="number")e=e.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}if(t===undefined)t=!this._isServer;this._sender.pong(e||v,t,r)}send(e,t,r){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof t==="function"){r=t;t={}}if(typeof e==="number")e=e.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}const n={binary:typeof e!=="string",mask:!this._isServer,compress:true,fin:true,...t};if(!this._extensions[m.extensionName]){n.compress=false}this._sender.send(e||v,n,r)}terminate(){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const e="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,e)}if(this._socket){this._readyState=WebSocket.CLOSING;this._socket.destroy()}}}Object.defineProperty(WebSocket,"CONNECTING",{enumerable:true,value:x.indexOf("CONNECTING")});Object.defineProperty(WebSocket.prototype,"CONNECTING",{enumerable:true,value:x.indexOf("CONNECTING")});Object.defineProperty(WebSocket,"OPEN",{enumerable:true,value:x.indexOf("OPEN")});Object.defineProperty(WebSocket.prototype,"OPEN",{enumerable:true,value:x.indexOf("OPEN")});Object.defineProperty(WebSocket,"CLOSING",{enumerable:true,value:x.indexOf("CLOSING")});Object.defineProperty(WebSocket.prototype,"CLOSING",{enumerable:true,value:x.indexOf("CLOSING")});Object.defineProperty(WebSocket,"CLOSED",{enumerable:true,value:x.indexOf("CLOSED")});Object.defineProperty(WebSocket.prototype,"CLOSED",{enumerable:true,value:x.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(WebSocket.prototype,e,{enumerable:true})}));["open","error","close","message"].forEach((e=>{Object.defineProperty(WebSocket.prototype,`on${e}`,{enumerable:true,get(){const t=this.listeners(e);for(let e=0;e<t.length;e++){if(t[e]._listener)return t[e]._listener}return undefined},set(t){const r=this.listeners(e);for(let t=0;t<r.length;t++){if(r[t]._listener)this.removeListener(e,r[t])}this.addEventListener(e,t)}})}));WebSocket.prototype.addEventListener=O;WebSocket.prototype.removeEventListener=E;e.exports=WebSocket;function initAsClient(e,t,r,n){const o={protocolVersion:R[1],maxPayload:100*1024*1024,perMessageDeflate:true,followRedirects:false,maxRedirects:10,...n,createConnection:undefined,socketPath:undefined,hostname:undefined,protocol:undefined,timeout:undefined,method:undefined,host:undefined,path:undefined,port:undefined};if(!R.includes(o.protocolVersion)){throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} `+`(supported versions: ${R.join(", ")})`)}let a;if(t instanceof p){a=t;e._url=t.href}else{a=new p(t);e._url=t}const d=a.protocol==="ws+unix:";if(!a.host&&(!d||!a.pathname)){const t=new Error(`Invalid URL: ${e.url}`);if(e._redirects===0){throw t}else{emitErrorAndClose(e,t);return}}const y=a.protocol==="wss:"||a.protocol==="https:";const g=y?443:80;const b=c(16).toString("base64");const v=y?i.get:s.get;let _;o.createConnection=y?tlsConnect:netConnect;o.defaultPort=o.defaultPort||g;o.port=a.port||g;o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname;o.headers={"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":b,Connection:"Upgrade",Upgrade:"websocket",...o.headers};o.path=a.pathname+a.search;o.timeout=o.handshakeTimeout;if(o.perMessageDeflate){_=new m(o.perMessageDeflate!==true?o.perMessageDeflate:{},false,o.maxPayload);o.headers["Sec-WebSocket-Extensions"]=I({[m.extensionName]:_.offer()})}if(r){o.headers["Sec-WebSocket-Protocol"]=r}if(o.origin){if(o.protocolVersion<13){o.headers["Sec-WebSocket-Origin"]=o.origin}else{o.headers.Origin=o.origin}}if(a.username||a.password){o.auth=`${a.username}:${a.password}`}if(d){const e=o.path.split(":");o.socketPath=e[0];o.path=e[1]}if(o.followRedirects){if(e._redirects===0){e._originalUnixSocket=d;e._originalSecure=y;e._originalHostOrSocketPath=d?o.socketPath:a.host;const t=n&&n.headers;n={...n,headers:{}};if(t){for(const[e,r]of Object.entries(t)){n.headers[e.toLowerCase()]=r}}}else{const t=d?e._originalUnixSocket?o.socketPath===e._originalHostOrSocketPath:false:e._originalUnixSocket?false:a.host===e._originalHostOrSocketPath;if(!t||e._originalSecure&&!y){delete o.headers.authorization;delete o.headers.cookie;if(!t)delete o.headers.host;o.auth=undefined}}if(o.auth&&!n.headers.authorization){n.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64")}}let C=e._req=v(o);if(o.timeout){C.on("timeout",(()=>{abortHandshake(e,C,"Opening handshake has timed out")}))}C.on("error",(t=>{if(C===null||C.aborted)return;C=e._req=null;emitErrorAndClose(e,t)}));C.on("response",(i=>{const s=i.headers.location;const a=i.statusCode;if(s&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects){abortHandshake(e,C,"Maximum redirects exceeded");return}C.abort();let i;try{i=new p(s,t)}catch(t){emitErrorAndClose(e,t);return}initAsClient(e,i,r,n)}else if(!e.emit("unexpected-response",C,i)){abortHandshake(e,C,`Unexpected server response: ${i.statusCode}`)}}));C.on("upgrade",((t,n,i)=>{e.emit("upgrade",t);if(e.readyState!==WebSocket.CONNECTING)return;C=e._req=null;const s=t.headers.upgrade;if(s===undefined||s.toLowerCase()!=="websocket"){abortHandshake(e,n,"Invalid Upgrade header");return}const a=u("sha1").update(b+w).digest("base64");if(t.headers["sec-websocket-accept"]!==a){abortHandshake(e,n,"Invalid Sec-WebSocket-Accept header");return}const c=t.headers["sec-websocket-protocol"];const d=(r||"").split(/, */);let p;if(!r&&c){p="Server sent a subprotocol but none was requested"}else if(r&&!c){p="Server sent no subprotocol"}else if(c&&!d.includes(c)){p="Server sent an invalid subprotocol"}if(p){abortHandshake(e,n,p);return}if(c)e._protocol=c;const y=t.headers["sec-websocket-extensions"];if(y!==undefined){if(!_){const t="Server sent a Sec-WebSocket-Extensions header but no extension "+"was requested";abortHandshake(e,n,t);return}let t;try{t=k(y)}catch(t){const r="Invalid Sec-WebSocket-Extensions header";abortHandshake(e,n,r);return}const r=Object.keys(t);if(r.length){if(r.length!==1||r[0]!==m.extensionName){const t="Server indicated an extension that was not requested";abortHandshake(e,n,t);return}try{_.accept(t[m.extensionName])}catch(t){const r="Invalid Sec-WebSocket-Extensions header";abortHandshake(e,n,r);return}e._extensions[m.extensionName]=_}}e.setSocket(n,i,o.maxPayload)}))}function emitErrorAndClose(e,t){e._readyState=WebSocket.CLOSING;e.emit("error",t);e.emitClose()}function netConnect(e){e.path=e.socketPath;return o.connect(e)}function tlsConnect(e){e.path=undefined;if(!e.servername&&e.servername!==""){e.servername=o.isIP(e.host)?"":e.host}return a.connect(e)}function abortHandshake(e,t,r){e._readyState=WebSocket.CLOSING;const n=new Error(r);Error.captureStackTrace(n,abortHandshake);if(t.setHeader){t.abort();if(t.socket&&!t.socket.destroyed){t.socket.destroy()}t.once("abort",e.emitClose.bind(e));e.emit("error",n)}else{t.destroy(n);t.once("error",e.emit.bind(e,"error"));t.once("close",e.emitClose.bind(e))}}function sendAfterClose(e,t,r){if(t){const r=T(t).length;if(e._socket)e._sender._bufferedBytes+=r;else e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} `+`(${x[e.readyState]})`);r(t)}}function receiverOnConclude(e,t){const r=this[C];r._closeFrameReceived=true;r._closeMessage=t;r._closeCode=e;if(r._socket[C]===undefined)return;r._socket.removeListener("data",socketOnData);process.nextTick(resume,r._socket);if(e===1005)r.close();else r.close(e,t)}function receiverOnDrain(){this[C]._socket.resume()}function receiverOnError(e){const t=this[C];if(t._socket[C]!==undefined){t._socket.removeListener("data",socketOnData);process.nextTick(resume,t._socket);t.close(e[_])}t.emit("error",e)}function receiverOnFinish(){this[C].emitClose()}function receiverOnMessage(e){this[C].emit("message",e)}function receiverOnPing(e){const t=this[C];t.pong(e,!t._isServer,P);t.emit("ping",e)}function receiverOnPong(e){this[C].emit("pong",e)}function resume(e){e.resume()}function socketOnClose(){const e=this[C];this.removeListener("close",socketOnClose);this.removeListener("data",socketOnData);this.removeListener("end",socketOnEnd);e._readyState=WebSocket.CLOSING;let t;if(!this._readableState.endEmitted&&!e._closeFrameReceived&&!e._receiver._writableState.errorEmitted&&(t=e._socket.read())!==null){e._receiver.write(t)}e._receiver.end();this[C]=undefined;clearTimeout(e._closeTimer);if(e._receiver._writableState.finished||e._receiver._writableState.errorEmitted){e.emitClose()}else{e._receiver.on("error",receiverOnFinish);e._receiver.on("finish",receiverOnFinish)}}function socketOnData(e){if(!this[C]._receiver.write(e)){this.pause()}}function socketOnEnd(){const e=this[C];e._readyState=WebSocket.CLOSING;e._receiver.end();this.end()}function socketOnError(){const e=this[C];this.removeListener("error",socketOnError);this.on("error",P);if(e){e._readyState=WebSocket.CLOSING;this.destroy()}}},67118:(e,t,r)=>{var n=r(53148);var i=r(27030);var s=r(3015);var o=r(65912);t.protocol=3;var a=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var c=o(a);var u={type:"error",data:"parser error"};const d=Buffer.concat([]);t.encodePacket=function(e,t,r,i){if(typeof t==="function"){i=t;t=null}if(typeof r==="function"){i=r;r=null}if(Buffer.isBuffer(e.data)){return encodeBuffer(e,t,i)}else if(e.data&&(e.data.buffer||e.data)instanceof ArrayBuffer){return encodeBuffer({type:e.type,data:arrayBufferToBuffer(e.data)},t,i)}var s=a[e.type];if(undefined!==e.data){s+=r?n.encode(String(e.data),{strict:false}):String(e.data)}return i(""+s)};function encodeBuffer(e,r,n){if(!r){return t.encodeBase64Packet(e,n)}var i=e.data;var s=Buffer.allocUnsafe(1);s[0]=a[e.type];return n(Buffer.concat([s,i]))}t.encodeBase64Packet=function(e,t){var r=Buffer.isBuffer(e.data)?e.data:arrayBufferToBuffer(e.data);var n="b"+a[e.type];n+=r.toString("base64");return t(n)};t.decodePacket=function(e,r,n){if(e===undefined){return u}var i;if(typeof e==="string"){i=e.charAt(0);if(i==="b"){return t.decodeBase64Packet(e.substr(1),r)}if(n){e=tryDecode(e);if(e===false){return u}}if(Number(i)!=i||!c[i]){return u}if(e.length>1){return{type:c[i],data:e.substring(1)}}else{return{type:c[i]}}}if(r==="arraybuffer"){var s=new Uint8Array(e);i=s[0];return{type:c[i],data:s.buffer.slice(1)}}if(e instanceof ArrayBuffer){e=arrayBufferToBuffer(e)}i=e[0];return{type:c[i],data:e.slice(1)}};function tryDecode(e){try{e=n.decode(e,{strict:false})}catch(e){return false}return e}t.decodeBase64Packet=function(e,t){var r=c[e.charAt(0)];var n=Buffer.from(e.substr(1),"base64");if(t==="arraybuffer"){var i=new Uint8Array(n.length);for(var s=0;s<i.length;s++){i[s]=n[s]}n=i.buffer}return{type:r,data:n}};t.encodePayload=function(e,r,n){if(typeof r==="function"){n=r;r=null}if(r&&i(e)){return t.encodePayloadAsBinary(e,n)}if(!e.length){return n("0:")}function encodeOne(e,n){t.encodePacket(e,r,false,(function(e){n(null,setLengthHeader(e))}))}map(e,encodeOne,(function(e,t){return n(t.join(""))}))};function setLengthHeader(e){return e.length+":"+e}function map(e,t,r){var n=new Array(e.length);var i=s(e.length,r);for(var o=0;o<e.length;o++){t(e[o],(function(e,t){n[o]=t;i(e,n)}))}}t.decodePayload=function(e,r,n){if(typeof e!=="string"){return t.decodePayloadAsBinary(e,r,n)}if(typeof r==="function"){n=r;r=null}if(e===""){return n(u,0,1)}var i="",s,o,a;for(var c=0,d=e.length;c<d;c++){var p=e.charAt(c);if(p!==":"){i+=p;continue}if(i===""||i!=(s=Number(i))){return n(u,0,1)}o=e.substr(c+1,s);if(i!=o.length){return n(u,0,1)}if(o.length){a=t.decodePacket(o,r,false);if(u.type===a.type&&u.data===a.data){return n(u,0,1)}var m=n(a,c+s,d);if(false===m)return}c+=s;i=""}if(i!==""){return n(u,0,1)}};function bufferToString(e){var t="";for(var r=0,n=e.length;r<n;r++){t+=String.fromCharCode(e[r])}return t}function stringToBuffer(e){var t=Buffer.allocUnsafe(e.length);for(var r=0,n=e.length;r<n;r++){t.writeUInt8(e.charCodeAt(r),r)}return t}function arrayBufferToBuffer(e){var t=e.byteLength||e.length;var r=e.byteOffset||0;return Buffer.from(e.buffer||e,r,t)}t.encodePayloadAsBinary=function(e,t){if(!e.length){return t(d)}map(e,encodeOneBinaryPacket,(function(e,r){return t(Buffer.concat(r))}))};function encodeOneBinaryPacket(e,r){function onBinaryPacketEncode(e){var t=""+e.length;var n;if(typeof e==="string"){n=Buffer.allocUnsafe(t.length+2);n[0]=0;for(var i=0;i<t.length;i++){n[i+1]=parseInt(t[i],10)}n[n.length-1]=255;return r(null,Buffer.concat([n,stringToBuffer(e)]))}n=Buffer.allocUnsafe(t.length+2);n[0]=1;for(var i=0;i<t.length;i++){n[i+1]=parseInt(t[i],10)}n[n.length-1]=255;r(null,Buffer.concat([n,e]))}t.encodePacket(e,true,true,onBinaryPacketEncode)}t.decodePayloadAsBinary=function(e,r,n){if(typeof r==="function"){n=r;r=null}var i=e;var s=[];var o;while(i.length>0){var a="";var c=i[0]===0;for(o=1;;o++){if(i[o]===255)break;if(a.length>310){return n(u,0,1)}a+=""+i[o]}i=i.slice(a.length+1);var d=parseInt(a,10);var p=i.slice(1,d+1);if(c)p=bufferToString(p);s.push(p);i=i.slice(d+1)}var m=s.length;for(o=0;o<m;o++){var y=s[o];n(t.decodePacket(y,r,true),o,m)}}},65912:e=>{e.exports=Object.keys||function keys(e){var t=[];var r=Object.prototype.hasOwnProperty;for(var n in e){if(r.call(e,n)){t.push(n)}}return t}},53148:e=>{
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var t=String.fromCharCode;function ucs2decode(e){var t=[];var r=0;var n=e.length;var i;var s;while(r<n){i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){s=e.charCodeAt(r++);if((s&64512)==56320){t.push(((i&1023)<<10)+(s&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}function ucs2encode(e){var r=e.length;var n=-1;var i;var s="";while(++n<r){i=e[n];if(i>65535){i-=65536;s+=t(i>>>10&1023|55296);i=56320|i&1023}s+=t(i)}return s}function checkScalarValue(e,t){if(e>=55296&&e<=57343){if(t){throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}return false}return true}function createByte(e,r){return t(e>>r&63|128)}function encodeCodePoint(e,r){if((e&4294967168)==0){return t(e)}var n="";if((e&4294965248)==0){n=t(e>>6&31|192)}else if((e&4294901760)==0){if(!checkScalarValue(e,r)){e=65533}n=t(e>>12&15|224);n+=createByte(e,6)}else if((e&4292870144)==0){n=t(e>>18&7|240);n+=createByte(e,12);n+=createByte(e,6)}n+=t(e&63|128);return n}function utf8encode(e,t){t=t||{};var r=false!==t.strict;var n=ucs2decode(e);var i=n.length;var s=-1;var o;var a="";while(++s<i){o=n[s];a+=encodeCodePoint(o,r)}return a}function readContinuationByte(){if(i>=n){throw Error("Invalid byte index")}var e=r[i]&255;i++;if((e&192)==128){return e&63}throw Error("Invalid continuation byte")}function decodeSymbol(e){var t;var s;var o;var a;var c;if(i>n){throw Error("Invalid byte index")}if(i==n){return false}t=r[i]&255;i++;if((t&128)==0){return t}if((t&224)==192){s=readContinuationByte();c=(t&31)<<6|s;if(c>=128){return c}else{throw Error("Invalid continuation byte")}}if((t&240)==224){s=readContinuationByte();o=readContinuationByte();c=(t&15)<<12|s<<6|o;if(c>=2048){return checkScalarValue(c,e)?c:65533}else{throw Error("Invalid continuation byte")}}if((t&248)==240){s=readContinuationByte();o=readContinuationByte();a=readContinuationByte();c=(t&7)<<18|s<<12|o<<6|a;if(c>=65536&&c<=1114111){return c}}throw Error("Invalid UTF-8 detected")}var r;var n;var i;function utf8decode(e,t){t=t||{};var s=false!==t.strict;r=ucs2decode(e);n=r.length;i=0;var o=[];var a;while((a=decodeSymbol(s))!==false){o.push(a)}return ucs2encode(o)}e.exports={version:"2.1.2",encode:utf8encode,decode:utf8decode}},96745:(e,t,r)=>{"use strict";const n=r(71017);const i=r(32081);const s=r(2032);const o=r(69162);const a=r(26434);const c=r(99404);const u=r(31511);const d=r(61212);const{spawnedKill:p,spawnedCancel:m,setupTimeout:y,validateTimeout:g,setExitHandler:b}=r(11649);const{handleInput:v,getSpawnedResult:w,makeAllStream:_,validateInputSync:C}=r(48275);const{mergePromise:P,getSpawnedPromise:O}=r(27985);const{joinCommand:E,parseCommand:I,getEscapedCommand:k}=r(19119);const T=1e3*1e3*100;const getEnv=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:i})=>{const s=t?{...process.env,...e}:e;if(r){return a.env({env:s,cwd:n,execPath:i})}return s};const handleArguments=(e,t,r={})=>{const i=s._parse(e,t,r);e=i.command;t=i.args;r=i.options;r={maxBuffer:T,buffer:true,stripFinalNewline:true,extendEnv:true,preferLocal:false,localDir:r.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:true,cleanup:true,all:false,windowsHide:true,...r};r.env=getEnv(r);r.stdio=d(r);if(process.platform==="win32"&&n.basename(e,".exe")==="cmd"){t.unshift("/q")}return{file:e,args:t,options:r,parsed:i}};const handleOutput=(e,t,r)=>{if(typeof t!=="string"&&!Buffer.isBuffer(t)){return r===undefined?undefined:""}if(e.stripFinalNewline){return o(t)}return t};const execa=(e,t,r)=>{const n=handleArguments(e,t,r);const s=E(e,t);const o=k(e,t);g(n.options);let a;try{a=i.spawn(n.file,n.args,n.options)}catch(e){const t=new i.ChildProcess;const r=Promise.reject(u({error:e,stdout:"",stderr:"",all:"",command:s,escapedCommand:o,parsed:n,timedOut:false,isCanceled:false,killed:false}));return P(t,r)}const d=O(a);const C=y(a,n.options,d);const I=b(a,n.options,C);const T={isCanceled:false};a.kill=p.bind(null,a.kill.bind(a));a.cancel=m.bind(null,a,T);const handlePromise=async()=>{const[{error:e,exitCode:t,signal:r,timedOut:i},c,d,p]=await w(a,n.options,I);const m=handleOutput(n.options,c);const y=handleOutput(n.options,d);const g=handleOutput(n.options,p);if(e||t!==0||r!==null){const c=u({error:e,exitCode:t,signal:r,stdout:m,stderr:y,all:g,command:s,escapedCommand:o,parsed:n,timedOut:i,isCanceled:T.isCanceled,killed:a.killed});if(!n.options.reject){return c}throw c}return{command:s,escapedCommand:o,exitCode:0,stdout:m,stderr:y,all:g,failed:false,timedOut:false,isCanceled:false,killed:false}};const x=c(handlePromise);v(a,n.options.input);a.all=_(a,n.options);return P(a,x)};e.exports=execa;e.exports.sync=(e,t,r)=>{const n=handleArguments(e,t,r);const s=E(e,t);const o=k(e,t);C(n.options);let a;try{a=i.spawnSync(n.file,n.args,n.options)}catch(e){throw u({error:e,stdout:"",stderr:"",all:"",command:s,escapedCommand:o,parsed:n,timedOut:false,isCanceled:false,killed:false})}const c=handleOutput(n.options,a.stdout,a.error);const d=handleOutput(n.options,a.stderr,a.error);if(a.error||a.status!==0||a.signal!==null){const e=u({stdout:c,stderr:d,error:a.error,signal:a.signal,exitCode:a.status,command:s,escapedCommand:o,parsed:n,timedOut:a.error&&a.error.code==="ETIMEDOUT",isCanceled:false,killed:a.signal!==null});if(!n.options.reject){return e}throw e}return{command:s,escapedCommand:o,exitCode:0,stdout:c,stderr:d,failed:false,timedOut:false,isCanceled:false,killed:false}};e.exports.command=(e,t)=>{const[r,...n]=I(e);return execa(r,n,t)};e.exports.commandSync=(e,t)=>{const[r,...n]=I(e);return execa.sync(r,n,t)};e.exports.node=(e,t,r={})=>{if(t&&!Array.isArray(t)&&typeof t==="object"){r=t;t=[]}const n=d.node(r);const i=process.execArgv.filter((e=>!e.startsWith("--inspect")));const{nodePath:s=process.execPath,nodeOptions:o=i}=r;return execa(s,[...o,e,...Array.isArray(t)?t:[]],{...r,stdin:undefined,stdout:undefined,stderr:undefined,stdio:n,shell:false})}},19119:e=>{"use strict";const normalizeArgs=(e,t=[])=>{if(!Array.isArray(t)){return[e]}return[e,...t]};const t=/^[\w.-]+$/;const r=/"/g;const escapeArg=e=>{if(typeof e!=="string"||t.test(e)){return e}return`"${e.replace(r,'\\"')}"`};const joinCommand=(e,t)=>normalizeArgs(e,t).join(" ");const getEscapedCommand=(e,t)=>normalizeArgs(e,t).map((e=>escapeArg(e))).join(" ");const n=/ +/g;const parseCommand=e=>{const t=[];for(const r of e.trim().split(n)){const e=t[t.length-1];if(e&&e.endsWith("\\")){t[t.length-1]=`${e.slice(0,-1)} ${r}`}else{t.push(r)}}return t};e.exports={joinCommand:joinCommand,getEscapedCommand:getEscapedCommand,parseCommand:parseCommand}},31511:(e,t,r)=>{"use strict";const{signalsByName:n}=r(6125);const getErrorPrefix=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:i,exitCode:s,isCanceled:o})=>{if(e){return`timed out after ${t} milliseconds`}if(o){return"was canceled"}if(r!==undefined){return`failed with ${r}`}if(n!==undefined){return`was killed with ${n} (${i})`}if(s!==undefined){return`failed with exit code ${s}`}return"failed"};const makeError=({stdout:e,stderr:t,all:r,error:i,signal:s,exitCode:o,command:a,escapedCommand:c,timedOut:u,isCanceled:d,killed:p,parsed:{options:{timeout:m}}})=>{o=o===null?undefined:o;s=s===null?undefined:s;const y=s===undefined?undefined:n[s].description;const g=i&&i.code;const b=getErrorPrefix({timedOut:u,timeout:m,errorCode:g,signal:s,signalDescription:y,exitCode:o,isCanceled:d});const v=`Command ${b}: ${a}`;const w=Object.prototype.toString.call(i)==="[object Error]";const _=w?`${v}\n${i.message}`:v;const C=[_,t,e].filter(Boolean).join("\n");if(w){i.originalMessage=i.message;i.message=C}else{i=new Error(C)}i.shortMessage=_;i.command=a;i.escapedCommand=c;i.exitCode=o;i.signal=s;i.signalDescription=y;i.stdout=e;i.stderr=t;if(r!==undefined){i.all=r}if("bufferedData"in i){delete i.bufferedData}i.failed=true;i.timedOut=Boolean(u);i.isCanceled=d;i.killed=p&&!u;return i};e.exports=makeError},11649:(e,t,r)=>{"use strict";const n=r(22037);const i=r(794);const s=1e3*5;const spawnedKill=(e,t="SIGTERM",r={})=>{const n=e(t);setKillTimeout(e,t,r,n);return n};const setKillTimeout=(e,t,r,n)=>{if(!shouldForceKill(t,r,n)){return}const i=getForceKillAfterTimeout(r);const s=setTimeout((()=>{e("SIGKILL")}),i);if(s.unref){s.unref()}};const shouldForceKill=(e,{forceKillAfterTimeout:t},r)=>isSigterm(e)&&t!==false&&r;const isSigterm=e=>e===n.constants.signals.SIGTERM||typeof e==="string"&&e.toUpperCase()==="SIGTERM";const getForceKillAfterTimeout=({forceKillAfterTimeout:e=true})=>{if(e===true){return s}if(!Number.isFinite(e)||e<0){throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)}return e};const spawnedCancel=(e,t)=>{const r=e.kill();if(r){t.isCanceled=true}};const timeoutKill=(e,t,r)=>{e.kill(t);r(Object.assign(new Error("Timed out"),{timedOut:true,signal:t}))};const setupTimeout=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===undefined){return n}let i;const s=new Promise(((n,s)=>{i=setTimeout((()=>{timeoutKill(e,r,s)}),t)}));const o=n.finally((()=>{clearTimeout(i)}));return Promise.race([s,o])};const validateTimeout=({timeout:e})=>{if(e!==undefined&&(!Number.isFinite(e)||e<0)){throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)}};const setExitHandler=async(e,{cleanup:t,detached:r},n)=>{if(!t||r){return n}const s=i((()=>{e.kill()}));return n.finally((()=>{s()}))};e.exports={spawnedKill:spawnedKill,spawnedCancel:spawnedCancel,setupTimeout:setupTimeout,validateTimeout:validateTimeout,setExitHandler:setExitHandler}},27985:e=>{"use strict";const t=(async()=>{})().constructor.prototype;const r=["then","catch","finally"].map((e=>[e,Reflect.getOwnPropertyDescriptor(t,e)]));const mergePromise=(e,t)=>{for(const[n,i]of r){const r=typeof t==="function"?(...e)=>Reflect.apply(i.value,t(),e):i.value.bind(t);Reflect.defineProperty(e,n,{...i,value:r})}return e};const getSpawnedPromise=e=>new Promise(((t,r)=>{e.on("exit",((e,r)=>{t({exitCode:e,signal:r})}));e.on("error",(e=>{r(e)}));if(e.stdin){e.stdin.on("error",(e=>{r(e)}))}}));e.exports={mergePromise:mergePromise,getSpawnedPromise:getSpawnedPromise}},61212:e=>{"use strict";const t=["stdin","stdout","stderr"];const hasAlias=e=>t.some((t=>e[t]!==undefined));const normalizeStdio=e=>{if(!e){return}const{stdio:r}=e;if(r===undefined){return t.map((t=>e[t]))}if(hasAlias(e)){throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${t.map((e=>`\`${e}\``)).join(", ")}`)}if(typeof r==="string"){return r}if(!Array.isArray(r)){throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof r}\``)}const n=Math.max(r.length,t.length);return Array.from({length:n},((e,t)=>r[t]))};e.exports=normalizeStdio;e.exports.node=e=>{const t=normalizeStdio(e);if(t==="ipc"){return"ipc"}if(t===undefined||typeof t==="string"){return[t,t,t,"ipc"]}if(t.includes("ipc")){return t}return[...t,"ipc"]}},48275:(e,t,r)=>{"use strict";const n=r(5380);const i=r(99270);const s=r(50905);const handleInput=(e,t)=>{if(t===undefined||e.stdin===undefined){return}if(n(t)){t.pipe(e.stdin)}else{e.stdin.end(t)}};const makeAllStream=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr){return}const r=s();if(e.stdout){r.add(e.stdout)}if(e.stderr){r.add(e.stderr)}return r};const getBufferedData=async(e,t)=>{if(!e){return}e.destroy();try{return await t}catch(e){return e.bufferedData}};const getStreamPromise=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!e||!r){return}if(t){return i(e,{encoding:t,maxBuffer:n})}return i.buffer(e,{maxBuffer:n})};const getSpawnedResult=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:i,maxBuffer:s},o)=>{const a=getStreamPromise(e,{encoding:n,buffer:i,maxBuffer:s});const c=getStreamPromise(t,{encoding:n,buffer:i,maxBuffer:s});const u=getStreamPromise(r,{encoding:n,buffer:i,maxBuffer:s*2});try{return await Promise.all([o,a,c,u])}catch(n){return Promise.all([{error:n,signal:n.signal,timedOut:n.timedOut},getBufferedData(e,a),getBufferedData(t,c),getBufferedData(r,u)])}};const validateInputSync=({input:e})=>{if(n(e)){throw new TypeError("The `input` option cannot be a stream in sync mode")}};e.exports={handleInput:handleInput,makeAllStream:makeAllStream,getSpawnedResult:getSpawnedResult,validateInputSync:validateInputSync}},58912:(e,t,r)=>{"use strict";const n=r(22037);const i=r(71017);const s=r(57147);const o=r.ab+"ffmpeg";if(s.existsSync(r.ab+"ffmpeg")){e.exports=o}else{e.exports=undefined}},37151:(e,t,r)=>{var n=r(73837);var i=r(22106);var s=/[\{\[]/;var o=/[\}\]]/;var a=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"];var c={};for(var u=0;u<a.length;u++){c[a[u]]=true}var isVariable=function(e){return i(e)&&!c.hasOwnProperty(e)};var d={s:function(e){return""+e},d:function(e){return""+Number(e)},o:function(e){return JSON.stringify(e)}};var genfun=function(){var e=[];var t=0;var r={};var push=function(r){var n="";while(n.length<t*2)n+="  ";e.push(n+r)};var pushLine=function(e){if(o.test(e.trim()[0])&&s.test(e[e.length-1])){t--;push(e);t++;return}if(s.test(e[e.length-1])){push(e);t++;return}if(o.test(e.trim()[0])){t--;push(e);return}push(e)};var line=function(e){if(!e)return line;if(arguments.length===1&&e.indexOf("\n")>-1){var t=e.trim().split("\n");for(var r=0;r<t.length;r++){pushLine(t[r].trim())}}else{pushLine(n.format.apply(n,arguments))}return line};line.scope={};line.formats=d;line.sym=function(e){if(!e||!isVariable(e))e="tmp";if(!r[e])r[e]=0;return e+(r[e]++||"")};line.property=function(e,t){if(arguments.length===1){t=e;e=""}t=t+"";if(i(t))return e?e+"."+t:t;return e?e+"["+JSON.stringify(t)+"]":JSON.stringify(t)};line.toString=function(){return e.join("\n")};line.toFunction=function(e){if(!e)e={};var t="return ("+line.toString()+")";Object.keys(line.scope).forEach((function(t){if(!e[t])e[t]=line.scope[t]}));var r=Object.keys(e).map((function(e){return e}));var n=r.map((function(t){return e[t]}));return Function.apply(null,r.concat(t)).apply(null,n)};if(arguments.length)line.apply(null,arguments);return line};genfun.formats=d;e.exports=genfun},13898:(e,t,r)=>{"use strict";const{PassThrough:n}=r(68265);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const i=r==="buffer";let s=false;if(t){s=!(r||i)}else{r=r||"utf8"}if(i){r=null}const o=new n({objectMode:s});if(r){o.setEncoding(r)}let a=0;const c=[];o.on("data",(e=>{c.push(e);if(s){a=c.length}else{a+=e.length}}));o.getBufferedValue=()=>{if(t){return c}return i?Buffer.concat(c,a):c.join("")};o.getBufferedLength=()=>a;return o}},99270:(e,t,r)=>{"use strict";const{constants:n}=r(14300);const i=r(68265);const{promisify:s}=r(73837);const o=r(13898);const a=s(i.pipeline);class MaxBufferError extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}}async function getStream(e,t){if(!e){throw new Error("Expected a stream")}t={maxBuffer:Infinity,...t};const{maxBuffer:r}=t;const i=o(t);await new Promise(((t,s)=>{const rejectPromise=e=>{if(e&&i.getBufferedLength()<=n.MAX_LENGTH){e.bufferedData=i.getBufferedValue()}s(e)};(async()=>{try{await a(e,i);t()}catch(e){rejectPromise(e)}})();i.on("data",(()=>{if(i.getBufferedLength()>r){rejectPromise(new MaxBufferError)}}))}));return i.getBufferedValue()}e.exports=getStream;e.exports.buffer=(e,t)=>getStream(e,{...t,encoding:"buffer"});e.exports.array=(e,t)=>getStream(e,{...t,array:true});e.exports.MaxBufferError=MaxBufferError},27030:(e,t,r)=>{var n=r(31534);var i=Object.prototype.toString;var s=typeof Blob==="function"||typeof Blob!=="undefined"&&i.call(Blob)==="[object BlobConstructor]";var o=typeof File==="function"||typeof File!=="undefined"&&i.call(File)==="[object FileConstructor]";e.exports=hasBinary;function hasBinary(e){if(!e||typeof e!=="object"){return false}if(n(e)){for(var t=0,r=e.length;t<r;t++){if(hasBinary(e[t])){return true}}return false}if(typeof Buffer==="function"&&Buffer.isBuffer&&Buffer.isBuffer(e)||typeof ArrayBuffer==="function"&&e instanceof ArrayBuffer||s&&e instanceof Blob||o&&e instanceof File){return true}if(e.toJSON&&typeof e.toJSON==="function"&&arguments.length===1){return hasBinary(e.toJSON(),true)}for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)&&hasBinary(e[i])){return true}}return false}},53075:(e,t,r)=>{"use strict";var n=r(6113);var i="aes-128-gcm";var s={aes128gcm:1,aesgcm:2};var o=16;var a=16;var c=12;var u=32;var d="encrypt";var p="decrypt";var m;if(process.env.ECE_KEYLOG==="1"){m=function(e,t){console.warn(e+" ["+t.length+"]: "+t.toString("base64url"));return t}}else{m=function(e,t){return t}}function decode(e){if(typeof e==="string"){return Buffer.from(e,"base64url")}return e}function HMAC_hash(e,t){var r=n.createHmac("sha256",e);r.update(t);return r.digest()}function HKDF_extract(e,t){m("salt",e);m("ikm",t);return m("extract",HMAC_hash(e,t))}function HKDF_expand(e,t,r){m("prk",e);m("info",t);var n=Buffer.alloc(0);var i=Buffer.alloc(0);t=Buffer.from(t,"ascii");var s=0;var o=Buffer.alloc(1);while(n.length<r){o.writeUIntBE(++s,0,1);i=HMAC_hash(e,Buffer.concat([i,t,o]));n=Buffer.concat([n,i])}return m("expand",n.slice(0,r))}function HKDF(e,t,r,n){return HKDF_expand(HKDF_extract(e,t),r,n)}function info(e,t){var r=Buffer.concat([Buffer.from("Content-Encoding: "+e+"\0","ascii"),t]);m("info "+e,r);return r}function lengthPrefix(e){var t=Buffer.concat([Buffer.alloc(2),e]);t.writeUIntBE(e.length,0,2);return t}function extractDH(e,t){var r=e.privateKey;var n,i;if(t===d){n=r.getPublicKey();i=e.dh}else if(t===p){n=e.dh;i=r.getPublicKey()}else{throw new Error("Unknown mode only "+d+" and "+p+" supported")}return{secret:r.computeSecret(e.dh),context:Buffer.concat([Buffer.from(e.keylabel,"ascii"),Buffer.from([0]),lengthPrefix(i),lengthPrefix(n)])}}function extractSecretAndContext(e,t){var r={secret:null,context:Buffer.alloc(0)};if(e.key){r.secret=e.key;if(r.secret.length!==a){throw new Error("An explicit key must be "+a+" bytes")}}else if(e.dh){r=extractDH(e,t)}else if(typeof e.keyid!==undefined){r.secret=e.keymap[e.keyid]}if(!r.secret){throw new Error("Unable to determine key")}m("secret",r.secret);m("context",r.context);if(e.authSecret){r.secret=HKDF(e.authSecret,r.secret,info("auth",Buffer.alloc(0)),u);m("authsecret",r.secret)}return r}function webpushSecret(e,t){if(!e.authSecret){throw new Error("No authentication secret for webpush")}m("authsecret",e.authSecret);var r,n,i;if(t===d){n=e.privateKey.getPublicKey();r=i=e.dh}else if(t===p){r=n=e.keyid;i=e.privateKey.getPublicKey()}else{throw new Error("Unknown mode only "+d+" and "+p+" supported")}m("remote pubkey",r);m("sender pubkey",n);m("receiver pubkey",i);return m("secret dh",HKDF(e.authSecret,e.privateKey.computeSecret(r),Buffer.concat([Buffer.from("WebPush: info\0"),i,n]),u))}function extractSecret(e,t,r){if(r){if(!isFunction(r)){throw new Error("Callback is not a function")}}if(e.key){if(e.key.length!==a){throw new Error("An explicit key must be "+a+" bytes")}return m("secret key",e.key)}if(!e.privateKey){if(!r){var n=e.keymap&&e.keymap[e.keyid]}else{var n=r(e.keyid)}if(!n){throw new Error('No saved key (keyid: "'+e.keyid+'")')}return n}return webpushSecret(e,t)}function deriveKeyAndNonce(e,t,r){if(!e.salt){throw new Error("must include a salt parameter for "+e.version)}var n;var i;var s;if(e.version==="aesgcm"){var o=extractSecretAndContext(e,t,r);n=info("aesgcm",o.context);i=info("nonce",o.context);s=o.secret}else if(e.version==="aes128gcm"){n=Buffer.from("Content-Encoding: aes128gcm\0");i=Buffer.from("Content-Encoding: nonce\0");s=extractSecret(e,t,r)}else{throw new Error("Unable to set context for mode "+e.version)}var u=HKDF_extract(e.salt,s);var d={key:HKDF_expand(u,n,a),nonce:HKDF_expand(u,i,c)};m("key",d.key);m("nonce base",d.nonce);return d}function parseParams(e){var t={};t.version=e.version||"aes128gcm";t.rs=parseInt(e.rs,10);if(isNaN(t.rs)){t.rs=4096}var r=s[t.version];if(t.version==="aes128gcm"){r+=o}if(t.rs<=r){throw new Error("The rs parameter has to be greater than "+r)}if(e.salt){t.salt=decode(e.salt);if(t.salt.length!==a){throw new Error("The salt parameter must be "+a+" bytes")}}t.keyid=e.keyid;if(e.key){t.key=decode(e.key)}else{t.privateKey=e.privateKey;if(!t.privateKey){t.keymap=e.keymap}if(t.version!=="aes128gcm"){t.keylabel=e.keylabel||"P-256"}if(e.dh){t.dh=decode(e.dh)}}if(e.authSecret){t.authSecret=decode(e.authSecret)}return t}function generateNonce(e,t){var r=Buffer.from(e);var n=r.readUIntBE(r.length-6,6);var i=((n^t)&16777215)+((n/16777216^t/16777216)&16777215)*16777216;r.writeUIntBE(i,r.length-6,6);m("nonce"+t,r);return r}function readHeader(e,t){var r=e.readUIntBE(20,1);t.salt=e.slice(0,a);t.rs=e.readUIntBE(a,4);t.keyid=e.slice(21,21+r);return 21+r}function unpadLegacy(e,t){var r=s[t];var n=e.readUIntBE(0,r);if(n+r>e.length){throw new Error("padding exceeds block size")}m("padding",e.slice(0,r+n));var i=Buffer.alloc(n);i.fill(0);if(i.compare(e.slice(r,r+n))!==0){throw new Error("invalid padding")}return e.slice(r+n)}function unpad(e,t){var r=e.length-1;while(r>=0){if(e[r]){if(t){if(e[r]!==2){throw new Error("last record needs to start padding with a 2")}}else{if(e[r]!==1){throw new Error("last record needs to start padding with a 2")}}return e.slice(0,r)}--r}throw new Error("all zero plaintext")}function decryptRecord(e,t,r,s,a){m("decrypt",r);var c=generateNonce(e.nonce,t);var u=n.createDecipheriv(i,e.key,c);u.setAuthTag(r.slice(r.length-o));var d=u.update(r.slice(0,r.length-o));d=Buffer.concat([d,u.final()]);m("decrypted",d);if(s.version!=="aes128gcm"){return unpadLegacy(d,s.version)}return unpad(d,a)}function decrypt(e,t,r){var n=parseParams(t);if(n.version==="aes128gcm"){var i=readHeader(e,n);e=e.slice(i)}var s=deriveKeyAndNonce(n,p,r);var a=0;var c=Buffer.alloc(0);var u=n.rs;if(n.version!=="aes128gcm"){u+=o}for(var d=0;a<e.length;++d){var m=a+u;if(n.version!=="aes128gcm"&&m===e.length){throw new Error("Truncated payload")}m=Math.min(m,e.length);if(m-a<=o){throw new Error("Invalid block: too small at "+d)}var y=decryptRecord(s,d,e.slice(a,m),n,m>=e.length);c=Buffer.concat([c,y]);a=m}return c}function encryptRecord(e,t,r,a,c,u){m("encrypt",r);a=a||0;var d=generateNonce(e.nonce,t);var p=n.createCipheriv(i,e.key,d);var y=[];var g=s[c.version];var b=Buffer.alloc(a+g);b.fill(0);if(c.version!=="aes128gcm"){b.writeUIntBE(a,0,g);m("padding",b);y.push(p.update(b));y.push(p.update(r));if(!u&&b.length+r.length<c.rs){throw new Error("Unable to pad to record size")}}else{y.push(p.update(r));b.writeUIntBE(u?2:1,0,1);m("padding",b);y.push(p.update(b))}p.final();var v=p.getAuthTag();if(v.length!==o){throw new Error("invalid tag generated")}y.push(v);return m("encrypted",Buffer.concat(y))}function writeHeader(e){var t=Buffer.alloc(5);var r=Buffer.from(e.keyid||[]);if(r.length>255){throw new Error("keyid is too large")}t.writeUIntBE(e.rs,0,4);t.writeUIntBE(r.length,4,1);return Buffer.concat([e.salt,t,r])}function encrypt(e,t,r){if(!Buffer.isBuffer(e)){throw new Error("buffer argument must be a Buffer")}var i=parseParams(t);if(!i.salt){i.salt=n.randomBytes(a)}var c;if(i.version==="aes128gcm"){if(i.privateKey&&!i.keyid){i.keyid=i.privateKey.getPublicKey()}c=writeHeader(i)}else{c=Buffer.alloc(0)}var u=deriveKeyAndNonce(i,d,r);var p=0;var m=s[i.version];var y=m;if(i.version==="aes128gcm"){y+=o}var g=isNaN(parseInt(t.pad,10))?0:parseInt(t.pad,10);var b=0;var v=false;while(!v){var w=Math.min(i.rs-y-1,g);if(i.version!=="aes128gcm"){w=Math.min((1<<m*8)-1,w)}if(g>0&&w===0){++w}g-=w;var _=p+i.rs-y-w;if(i.version!=="aes128gcm"){v=_>e.length}else{v=_>=e.length}v=v&&g<=0;var C=encryptRecord(u,b,e.slice(p,_),w,i,v);c=Buffer.concat([c,C]);p=_;++b}return c}function isFunction(e){return typeof e==="function"}e.exports={decrypt:decrypt,encrypt:encrypt}},62166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SIGNALS=void 0;const r=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:true},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:true},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:true},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];t.SIGNALS=r},6125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.signalsByNumber=t.signalsByName=void 0;var n=r(22037);var i=r(96932);var s=r(98147);const getSignalsByName=function(){const e=(0,i.getSignals)();return e.reduce(getSignalByName,{})};const getSignalByName=function(e,{name:t,number:r,description:n,supported:i,action:s,forced:o,standard:a}){return{...e,[t]:{name:t,number:r,description:n,supported:i,action:s,forced:o,standard:a}}};const o=getSignalsByName();t.signalsByName=o;const getSignalsByNumber=function(){const e=(0,i.getSignals)();const t=s.SIGRTMAX+1;const r=Array.from({length:t},((t,r)=>getSignalByNumber(r,e)));return Object.assign({},...r)};const getSignalByNumber=function(e,t){const r=findSignalByNumber(e,t);if(r===undefined){return{}}const{name:n,description:i,supported:s,action:o,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:i,supported:s,action:o,forced:a,standard:c}}};const findSignalByNumber=function(e,t){const r=t.find((({name:t})=>n.constants.signals[t]===e));if(r!==undefined){return r}return t.find((t=>t.number===e))};const a=getSignalsByNumber();t.signalsByNumber=a},98147:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SIGRTMAX=t.getRealtimeSignals=void 0;const getRealtimeSignals=function(){const e=n-r+1;return Array.from({length:e},getRealtimeSignal)};t.getRealtimeSignals=getRealtimeSignals;const getRealtimeSignal=function(e,t){return{name:`SIGRT${t+1}`,number:r+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}};const r=34;const n=64;t.SIGRTMAX=n},96932:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getSignals=void 0;var n=r(22037);var i=r(62166);var s=r(98147);const getSignals=function(){const e=(0,s.getRealtimeSignals)();const t=[...i.SIGNALS,...e].map(normalizeSignal);return t};t.getSignals=getSignals;const normalizeSignal=function({name:e,number:t,description:r,action:i,forced:s=false,standard:o}){const{signals:{[e]:a}}=n.constants;const c=a!==undefined;const u=c?a:t;return{name:e,number:u,description:r,supported:c,action:i,forced:s,standard:o}}},42094:e=>{var t=[].indexOf;e.exports=function(e,r){if(t)return e.indexOf(r);for(var n=0;n<e.length;++n){if(e[n]===r)return n}return-1}},13910:function(e,t){var r,n,i,s;!function(e){var t="undefined";var o=t!==typeof Buffer&&Buffer;var a=t!==typeof Uint8Array&&Uint8Array;var c=t!==typeof ArrayBuffer&&ArrayBuffer;var u=[0,0,0,0,0,0,0,0];var d=Array.isArray||_isArray;var p=4294967296;var m=16777216;var y;r=factory("Uint64BE",true,true);n=factory("Int64BE",true,false);i=factory("Uint64LE",false,true);s=factory("Int64LE",false,false);function factory(r,n,i){var s=n?0:4;var d=n?4:0;var g=n?0:3;var b=n?1:2;var v=n?2:1;var w=n?3:0;var _=n?fromPositiveBE:fromPositiveLE;var C=n?fromNegativeBE:fromNegativeLE;var P=Int64.prototype;var O="is"+r;var E="_"+O;P.buffer=void 0;P.offset=0;P[E]=true;P.toNumber=toNumber;P.toString=toString;P.toJSON=toNumber;P.toArray=toArray;if(o)P.toBuffer=toBuffer;if(a)P.toArrayBuffer=toArrayBuffer;Int64[O]=isInt64;e[r]=Int64;return Int64;function Int64(e,t,r,n){if(!(this instanceof Int64))return new Int64(e,t,r,n);return init(this,e,t,r,n)}function isInt64(e){return!!(e&&e[E])}function init(e,r,n,i,p){if(a&&c){if(r instanceof c)r=new a(r);if(i instanceof c)i=new a(i)}if(!r&&!n&&!i&&!y){e.buffer=newArray(u,0);return}if(!isValidBuffer(r,n)){var m=y||Array;p=n;i=r;n=0;r=y===o?o.alloc(8):new m(8)}e.buffer=r;e.offset=n|=0;if(t===typeof i)return;if("string"===typeof i){fromString(r,n,i,p||10)}else if(isValidBuffer(i,p)){fromArray(r,n,i,p)}else if("number"===typeof p){writeInt32(r,n+s,i);writeInt32(r,n+d,p)}else if(i>0){_(r,n,i)}else if(i<0){C(r,n,i)}else{fromArray(r,n,u,0)}}function fromString(e,t,r,n){var i=0;var o=r.length;var a=0;var c=0;if(r[0]==="-")i++;var u=i;while(i<o){var m=parseInt(r[i++],n);if(!(m>=0))break;c=c*n+m;a=a*n+Math.floor(c/p);c%=p}if(u){a=~a;if(c){c=p-c}else{a++}}writeInt32(e,t+s,a);writeInt32(e,t+d,c)}function toNumber(){var e=this.buffer;var t=this.offset;var r=readInt32(e,t+s);var n=readInt32(e,t+d);if(!i)r|=0;return r?r*p+n:n}function toString(e){var t=this.buffer;var r=this.offset;var n=readInt32(t,r+s);var o=readInt32(t,r+d);var a="";var c=!i&&n&2147483648;if(c){n=~n;o=p-o}e=e||10;while(1){var u=n%e*p+o;n=Math.floor(n/e);o=Math.floor(u/e);a=(u%e).toString(e)+a;if(!n&&!o)break}if(c){a="-"+a}return a}function writeInt32(e,t,r){e[t+w]=r&255;r=r>>8;e[t+v]=r&255;r=r>>8;e[t+b]=r&255;r=r>>8;e[t+g]=r&255}function readInt32(e,t){return e[t+g]*m+(e[t+b]<<16)+(e[t+v]<<8)+e[t+w]}}function toArray(e){var t=this.buffer;var r=this.offset;y=null;if(e!==false&&d(t)){return t.length===8?t:t.slice(r,r+8)}return newArray(t,r)}function toBuffer(e){var t=this.buffer;var r=this.offset;y=o;if(e!==false&&o.isBuffer(t)){return t.length===8?t:t.slice(r,r+8)}return o.from(toArrayBuffer.call(this,e))}function toArrayBuffer(e){var t=this.buffer;var r=this.offset;var n=t.buffer;y=a;if(e!==false&&!t.offset&&n instanceof c){return n.byteLength===8?n:n.slice(r,r+8)}var i=new a(8);fromArray(i,0,t,r);return i.buffer}function isValidBuffer(e,t){var r=e&&e.length;t|=0;return r&&t+8<=r&&"string"!==typeof e[t]}function fromArray(e,t,r,n){t|=0;n|=0;for(var i=0;i<8;i++){e[t++]=r[n++]&255}}function newArray(e,t){return Array.prototype.slice.call(e,t,t+8)}function fromPositiveBE(e,t,r){var n=t+8;while(n>t){e[--n]=r&255;r/=256}}function fromNegativeBE(e,t,r){var n=t+8;r++;while(n>t){e[--n]=-r&255^255;r/=256}}function fromPositiveLE(e,t,r){var n=t+8;while(t<n){e[t++]=r&255;r/=256}}function fromNegativeLE(e,t,r){var n=t+8;r++;while(t<n){e[t++]=-r&255^255;r/=256}}function _isArray(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)}}(true&&typeof t.nodeName!=="string"?t:this||{})},6230:(e,t,r)=>{var n=t;var{Buffer:i}=r(14300);var s=r(22037);n.toBuffer=function(e,t,r){r=~~r;var n;if(this.isV4Format(e)){n=t||new i(r+4);e.split(/\./g).map((e=>{n[r++]=parseInt(e,10)&255}))}else if(this.isV6Format(e)){var s=e.split(":",8);var o;for(o=0;o<s.length;o++){var a=this.isV4Format(s[o]);var c;if(a){c=this.toBuffer(s[o]);s[o]=c.slice(0,2).toString("hex")}if(c&&++o<8){s.splice(o,0,c.slice(2,4).toString("hex"))}}if(s[0]===""){while(s.length<8)s.unshift("0")}else if(s[s.length-1]===""){while(s.length<8)s.push("0")}else if(s.length<8){for(o=0;o<s.length&&s[o]!=="";o++);var u=[o,1];for(o=9-s.length;o>0;o--){u.push("0")}s.splice.apply(s,u)}n=t||new i(r+16);for(o=0;o<s.length;o++){var d=parseInt(s[o],16);n[r++]=d>>8&255;n[r++]=d&255}}if(!n){throw Error(`Invalid ip address: ${e}`)}return n};n.toString=function(e,t,r){t=~~t;r=r||e.length-t;var n=[];var i;if(r===4){for(i=0;i<r;i++){n.push(e[t+i])}n=n.join(".")}else if(r===16){for(i=0;i<r;i+=2){n.push(e.readUInt16BE(t+i).toString(16))}n=n.join(":");n=n.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3");n=n.replace(/:{3,4}/,"::")}return n};var o=/^(\d{1,3}\.){3,3}\d{1,3}$/;var a=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;n.isV4Format=function(e){return o.test(e)};n.isV6Format=function(e){return a.test(e)};function _normalizeFamily(e){if(e===4){return"ipv4"}if(e===6){return"ipv6"}return e?e.toLowerCase():"ipv4"}n.fromPrefixLen=function(e,t){if(e>32){t="ipv6"}else{t=_normalizeFamily(t)}var r=4;if(t==="ipv6"){r=16}var s=new i(r);for(var o=0,a=s.length;o<a;++o){var c=8;if(e<8){c=e}e-=c;s[o]=~(255>>c)&255}return n.toString(s)};n.mask=function(e,t){e=n.toBuffer(e);t=n.toBuffer(t);var r=new i(Math.max(e.length,t.length));var s;if(e.length===t.length){for(s=0;s<e.length;s++){r[s]=e[s]&t[s]}}else if(t.length===4){for(s=0;s<t.length;s++){r[s]=e[e.length-4+s]&t[s]}}else{for(s=0;s<r.length-6;s++){r[s]=0}r[10]=255;r[11]=255;for(s=0;s<e.length;s++){r[s+12]=e[s]&t[s+12]}s+=12}for(;s<r.length;s++){r[s]=0}return n.toString(r)};n.cidr=function(e){var t=e.split("/");var r=t[0];if(t.length!==2){throw new Error(`invalid CIDR subnet: ${r}`)}var i=n.fromPrefixLen(parseInt(t[1],10));return n.mask(r,i)};n.subnet=function(e,t){var r=n.toLong(n.mask(e,t));var i=n.toBuffer(t);var s=0;for(var o=0;o<i.length;o++){if(i[o]===255){s+=8}else{var a=i[o]&255;while(a){a=a<<1&255;s++}}}var c=Math.pow(2,32-s);return{networkAddress:n.fromLong(r),firstAddress:c<=2?n.fromLong(r):n.fromLong(r+1),lastAddress:c<=2?n.fromLong(r+c-1):n.fromLong(r+c-2),broadcastAddress:n.fromLong(r+c-1),subnetMask:t,subnetMaskLength:s,numHosts:c<=2?c:c-2,length:c,contains(e){return r===n.toLong(n.mask(e,t))}}};n.cidrSubnet=function(e){var t=e.split("/");var r=t[0];if(t.length!==2){throw new Error(`invalid CIDR subnet: ${r}`)}var i=n.fromPrefixLen(parseInt(t[1],10));return n.subnet(r,i)};n.not=function(e){var t=n.toBuffer(e);for(var r=0;r<t.length;r++){t[r]=255^t[r]}return n.toString(t)};n.or=function(e,t){var r;e=n.toBuffer(e);t=n.toBuffer(t);if(e.length===t.length){for(r=0;r<e.length;++r){e[r]|=t[r]}return n.toString(e)}var i=e;var s=t;if(t.length>e.length){i=t;s=e}var o=i.length-s.length;for(r=o;r<i.length;++r){i[r]|=s[r-o]}return n.toString(i)};n.isEqual=function(e,t){var r;e=n.toBuffer(e);t=n.toBuffer(t);if(e.length===t.length){for(r=0;r<e.length;r++){if(e[r]!==t[r])return false}return true}if(t.length===4){var i=t;t=e;e=i}for(r=0;r<10;r++){if(t[r]!==0)return false}var s=t.readUInt16BE(10);if(s!==0&&s!==65535)return false;for(r=0;r<4;r++){if(e[r]!==t[r+12])return false}return true};n.isPrivate=function(e){if(n.isLoopback(e)){return true}if(!n.isV6Format(e)){const t=n.normalizeToLong(e);if(t<0){throw new Error("invalid ipv4 address")}e=n.fromLong(t)}return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)};n.isPublic=function(e){return!n.isPrivate(e)};n.isLoopback=function(e){if(!/\./.test(e)&&!/:/.test(e)){e=n.fromLong(Number(e))}return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^0177\./.test(e)||/^0x7f\./i.test(e)||/^fe80::1$/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)};n.loopback=function(e){e=_normalizeFamily(e);if(e!=="ipv4"&&e!=="ipv6"){throw new Error("family must be ipv4 or ipv6")}return e==="ipv4"?"127.0.0.1":"fe80::1"};n.address=function(e,t){var r=s.networkInterfaces();t=_normalizeFamily(t);if(e&&e!=="private"&&e!=="public"){var i=r[e].filter((e=>{var r=_normalizeFamily(e.family);return r===t}));if(i.length===0){return undefined}return i[0].address}var o=Object.keys(r).map((i=>{var s=r[i].filter((r=>{r.family=_normalizeFamily(r.family);if(r.family!==t||n.isLoopback(r.address)){return false}if(!e){return true}return e==="public"?n.isPrivate(r.address):n.isPublic(r.address)}));return s.length?s[0].address:undefined})).filter(Boolean);return!o.length?n.loopback(t):o[0]};n.toLong=function(e){var t=0;e.split(".").forEach((e=>{t<<=8;t+=parseInt(e)}));return t>>>0};n.fromLong=function(e){return`${e>>>24}.${e>>16&255}.${e>>8&255}.${e&255}`};n.normalizeToLong=function(e){const t=e.split(".").map((e=>{if(e.startsWith("0x")||e.startsWith("0X")){return parseInt(e,16)}else if(e.startsWith("0")&&e!=="0"&&/^[0-7]+$/.test(e)){return parseInt(e,8)}else if(/^[1-9]\d*$/.test(e)||e==="0"){return parseInt(e,10)}else{return NaN}}));if(t.some(isNaN))return-1;let r=0;const n=t.length;switch(n){case 1:r=t[0];break;case 2:if(t[0]>255||t[1]>16777215)return-1;r=t[0]<<24|t[1]&16777215;break;case 3:if(t[0]>255||t[1]>255||t[2]>65535)return-1;r=t[0]<<24|t[1]<<16|t[2]&65535;break;case 4:if(t.some((e=>e>255)))return-1;r=t[0]<<24|t[1]<<16|t[2]<<8|t[3];break;default:return-1}return r>>>0}},28260:function(e){(function(t){"use strict";const r="(0?\\d+|0x[a-f0-9]+)";const n={fourOctet:new RegExp(`^${r}\\.${r}\\.${r}\\.${r}$`,"i"),threeOctet:new RegExp(`^${r}\\.${r}\\.${r}$`,"i"),twoOctet:new RegExp(`^${r}\\.${r}$`,"i"),longValue:new RegExp(`^${r}$`,"i")};const i=new RegExp(`^0[0-7]+$`,"i");const s=new RegExp(`^0x[a-f0-9]+$`,"i");const o="%[0-9a-z]{1,}";const a="(?:[0-9a-f]+::?)+";const c={zoneIndex:new RegExp(o,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${o})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${r}\\.${r}\\.${r}\\.${r}(${o})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${r}\\.${r}\\.${r}\\.${r}(${o})?$`,"i")};function expandIPv6(e,t){if(e.indexOf("::")!==e.lastIndexOf("::")){return null}let r=0;let n=-1;let i=(e.match(c.zoneIndex)||[])[0];let s,o;if(i){i=i.substring(1);e=e.replace(/%.+$/,"")}while((n=e.indexOf(":",n+1))>=0){r++}if(e.substr(0,2)==="::"){r--}if(e.substr(-2,2)==="::"){r--}if(r>t){return null}o=t-r;s=":";while(o--){s+="0:"}e=e.replace("::",s);if(e[0]===":"){e=e.slice(1)}if(e[e.length-1]===":"){e=e.slice(0,-1)}t=function(){const t=e.split(":");const r=[];for(let e=0;e<t.length;e++){r.push(parseInt(t[e],16))}return r}();return{parts:t,zoneId:i}}function matchCIDR(e,t,r,n){if(e.length!==t.length){throw new Error("ipaddr: cannot match CIDR for objects with different lengths")}let i=0;let s;while(n>0){s=r-n;if(s<0){s=0}if(e[i]>>s!==t[i]>>s){return false}n-=r;i+=1}return true}function parseIntAuto(e){if(s.test(e)){return parseInt(e,16)}if(e[0]==="0"&&!isNaN(parseInt(e[1],10))){if(i.test(e)){return parseInt(e,8)}throw new Error(`ipaddr: cannot parse ${e} as octal`)}return parseInt(e,10)}function padPart(e,t){while(e.length<t){e=`0${e}`}return e}const u={};u.IPv4=function(){function IPv4(e){if(e.length!==4){throw new Error("ipaddr: ipv4 octet count should be 4")}let t,r;for(t=0;t<e.length;t++){r=e[t];if(!(0<=r&&r<=255)){throw new Error("ipaddr: ipv4 octet should fit in 8 bits")}}this.octets=e}IPv4.prototype.SpecialRanges={unspecified:[[new IPv4([0,0,0,0]),8]],broadcast:[[new IPv4([255,255,255,255]),32]],multicast:[[new IPv4([224,0,0,0]),4]],linkLocal:[[new IPv4([169,254,0,0]),16]],loopback:[[new IPv4([127,0,0,0]),8]],carrierGradeNat:[[new IPv4([100,64,0,0]),10]],private:[[new IPv4([10,0,0,0]),8],[new IPv4([172,16,0,0]),12],[new IPv4([192,168,0,0]),16]],reserved:[[new IPv4([192,0,0,0]),24],[new IPv4([192,0,2,0]),24],[new IPv4([192,88,99,0]),24],[new IPv4([198,18,0,0]),15],[new IPv4([198,51,100,0]),24],[new IPv4([203,0,113,0]),24],[new IPv4([240,0,0,0]),4]],as112:[[new IPv4([192,175,48,0]),24],[new IPv4([192,31,196,0]),24]],amt:[[new IPv4([192,52,193,0]),24]]};IPv4.prototype.kind=function(){return"ipv4"};IPv4.prototype.match=function(e,t){let r;if(t===undefined){r=e;e=r[0];t=r[1]}if(e.kind()!=="ipv4"){throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one")}return matchCIDR(this.octets,e.octets,8,t)};IPv4.prototype.prefixLengthFromSubnetMask=function(){let e=0;let t=false;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let n,i,s;for(n=3;n>=0;n-=1){i=this.octets[n];if(i in r){s=r[i];if(t&&s!==0){return null}if(s!==8){t=true}e+=s}else{return null}}return 32-e};IPv4.prototype.range=function(){return u.subnetMatch(this,this.SpecialRanges)};IPv4.prototype.toByteArray=function(){return this.octets.slice(0)};IPv4.prototype.toIPv4MappedAddress=function(){return u.IPv6.parse(`::ffff:${this.toString()}`)};IPv4.prototype.toNormalizedString=function(){return this.toString()};IPv4.prototype.toString=function(){return this.octets.join(".")};return IPv4}();u.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e);const r=t[0].toByteArray();const n=this.subnetMaskFromPrefixLength(t[1]).toByteArray();const i=[];let s=0;while(s<4){i.push(parseInt(r[s],10)|parseInt(n[s],10)^255);s++}return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};u.IPv4.isIPv4=function(e){return this.parser(e)!==null};u.IPv4.isValid=function(e){try{new this(this.parser(e));return true}catch(e){return false}};u.IPv4.isValidCIDR=function(e){try{this.parseCIDR(e);return true}catch(e){return false}};u.IPv4.isValidFourPartDecimal=function(e){if(u.IPv4.isValid(e)&&e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/)){return true}else{return false}};u.IPv4.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{t=this.parseCIDR(e);n=t[0].toByteArray();s=this.subnetMaskFromPrefixLength(t[1]).toByteArray();i=[];r=0;while(r<4){i.push(parseInt(n[r],10)&parseInt(s[r],10));r++}return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};u.IPv4.parse=function(e){const t=this.parser(e);if(t===null){throw new Error("ipaddr: string is not formatted like an IPv4 Address")}return new this(t)};u.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const r=[this.parse(t[1]),e];Object.defineProperty(r,"toString",{value:function(){return this.join("/")}});return r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")};u.IPv4.parser=function(e){let t,r,i;if(t=e.match(n.fourOctet)){return function(){const e=t.slice(1,6);const n=[];for(let t=0;t<e.length;t++){r=e[t];n.push(parseIntAuto(r))}return n}()}else if(t=e.match(n.longValue)){i=parseIntAuto(t[1]);if(i>4294967295||i<0){throw new Error("ipaddr: address outside defined range")}return function(){const e=[];let t;for(t=0;t<=24;t+=8){e.push(i>>t&255)}return e}().reverse()}else if(t=e.match(n.twoOctet)){return function(){const e=t.slice(1,4);const r=[];i=parseIntAuto(e[1]);if(i>16777215||i<0){throw new Error("ipaddr: address outside defined range")}r.push(parseIntAuto(e[0]));r.push(i>>16&255);r.push(i>>8&255);r.push(i&255);return r}()}else if(t=e.match(n.threeOctet)){return function(){const e=t.slice(1,5);const r=[];i=parseIntAuto(e[2]);if(i>65535||i<0){throw new Error("ipaddr: address outside defined range")}r.push(parseIntAuto(e[0]));r.push(parseIntAuto(e[1]));r.push(i>>8&255);r.push(i&255);return r}()}else{return null}};u.IPv4.subnetMaskFromPrefixLength=function(e){e=parseInt(e);if(e<0||e>32){throw new Error("ipaddr: invalid IPv4 prefix length")}const t=[0,0,0,0];let r=0;const n=Math.floor(e/8);while(r<n){t[r]=255;r++}if(n<4){t[n]=Math.pow(2,e%8)-1<<8-e%8}return new this(t)};u.IPv6=function(){function IPv6(e,t){let r,n;if(e.length===16){this.parts=[];for(r=0;r<=14;r+=2){this.parts.push(e[r]<<8|e[r+1])}}else if(e.length===8){this.parts=e}else{throw new Error("ipaddr: ipv6 part count should be 8 or 16")}for(r=0;r<this.parts.length;r++){n=this.parts[r];if(!(0<=n&&n<=65535)){throw new Error("ipaddr: ipv6 part should fit in 16 bits")}}if(t){this.zoneId=t}}IPv6.prototype.SpecialRanges={unspecified:[new IPv6([0,0,0,0,0,0,0,0]),128],linkLocal:[new IPv6([65152,0,0,0,0,0,0,0]),10],multicast:[new IPv6([65280,0,0,0,0,0,0,0]),8],loopback:[new IPv6([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new IPv6([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new IPv6([0,0,0,0,0,65535,0,0]),96],discard:[new IPv6([256,0,0,0,0,0,0,0]),64],rfc6145:[new IPv6([0,0,0,0,65535,0,0,0]),96],rfc6052:[new IPv6([100,65435,0,0,0,0,0,0]),96],"6to4":[new IPv6([8194,0,0,0,0,0,0,0]),16],teredo:[new IPv6([8193,0,0,0,0,0,0,0]),32],benchmarking:[new IPv6([8193,2,0,0,0,0,0,0]),48],amt:[new IPv6([8193,3,0,0,0,0,0,0]),32],as112v6:[[new IPv6([8193,4,274,0,0,0,0,0]),48],[new IPv6([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new IPv6([8193,16,0,0,0,0,0,0]),28],orchid2:[new IPv6([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new IPv6([8193,48,0,0,0,0,0,0]),28],reserved:[[new IPv6([8193,0,0,0,0,0,0,0]),23],[new IPv6([8193,3512,0,0,0,0,0,0]),32]]};IPv6.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"};IPv6.prototype.kind=function(){return"ipv6"};IPv6.prototype.match=function(e,t){let r;if(t===undefined){r=e;e=r[0];t=r[1]}if(e.kind()!=="ipv6"){throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one")}return matchCIDR(this.parts,e.parts,16,t)};IPv6.prototype.prefixLengthFromSubnetMask=function(){let e=0;let t=false;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let n,i;for(let s=7;s>=0;s-=1){n=this.parts[s];if(n in r){i=r[n];if(t&&i!==0){return null}if(i!==16){t=true}e+=i}else{return null}}return 128-e};IPv6.prototype.range=function(){return u.subnetMatch(this,this.SpecialRanges)};IPv6.prototype.toByteArray=function(){let e;const t=[];const r=this.parts;for(let n=0;n<r.length;n++){e=r[n];t.push(e>>8);t.push(e&255)}return t};IPv6.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++){e.push(padPart(this.parts[t].toString(16),4))}return e}.call(this).join(":");let t="";if(this.zoneId){t=`%${this.zoneId}`}return e+t};IPv6.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress()){throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4")}const e=this.parts.slice(-2);const t=e[0];const r=e[1];return new u.IPv4([t>>8,t&255,r>>8,r&255])};IPv6.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++){e.push(this.parts[t].toString(16))}return e}.call(this).join(":");let t="";if(this.zoneId){t=`%${this.zoneId}`}return e+t};IPv6.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g;const t=this.toNormalizedString();let r=0;let n=-1;let i;while(i=e.exec(t)){if(i[0].length>n){r=i.index;n=i[0].length}}if(n<0){return t}return`${t.substring(0,r)}::${t.substring(r+n)}`};IPv6.prototype.toString=function(){return this.toRFC5952String()};return IPv6}();u.IPv6.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e);const r=t[0].toByteArray();const n=this.subnetMaskFromPrefixLength(t[1]).toByteArray();const i=[];let s=0;while(s<16){i.push(parseInt(r[s],10)|parseInt(n[s],10)^255);s++}return new this(i)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}};u.IPv6.isIPv6=function(e){return this.parser(e)!==null};u.IPv6.isValid=function(e){if(typeof e==="string"&&e.indexOf(":")===-1){return false}try{const t=this.parser(e);new this(t.parts,t.zoneId);return true}catch(e){return false}};u.IPv6.isValidCIDR=function(e){if(typeof e==="string"&&e.indexOf(":")===-1){return false}try{this.parseCIDR(e);return true}catch(e){return false}};u.IPv6.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{t=this.parseCIDR(e);n=t[0].toByteArray();s=this.subnetMaskFromPrefixLength(t[1]).toByteArray();i=[];r=0;while(r<16){i.push(parseInt(n[r],10)&parseInt(s[r],10));r++}return new this(i)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}};u.IPv6.parse=function(e){const t=this.parser(e);if(t.parts===null){throw new Error("ipaddr: string is not formatted like an IPv6 Address")}return new this(t.parts,t.zoneId)};u.IPv6.parseCIDR=function(e){let t,r,n;if(r=e.match(/^(.+)\/(\d+)$/)){t=parseInt(r[2]);if(t>=0&&t<=128){n=[this.parse(r[1]),t];Object.defineProperty(n,"toString",{value:function(){return this.join("/")}});return n}}throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")};u.IPv6.parser=function(e){let t,r,n,i,s,o;if(n=e.match(c.deprecatedTransitional)){return this.parser(`::ffff:${n[1]}`)}if(c.native.test(e)){return expandIPv6(e,8)}if(n=e.match(c.transitional)){o=n[6]||"";t=n[1];if(!n[1].endsWith("::")){t=t.slice(0,-1)}t=expandIPv6(t+o,6);if(t.parts){s=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])];for(r=0;r<s.length;r++){i=s[r];if(!(0<=i&&i<=255)){return null}}t.parts.push(s[0]<<8|s[1]);t.parts.push(s[2]<<8|s[3]);return{parts:t.parts,zoneId:t.zoneId}}}return null};u.IPv6.subnetMaskFromPrefixLength=function(e){e=parseInt(e);if(e<0||e>128){throw new Error("ipaddr: invalid IPv6 prefix length")}const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const n=Math.floor(e/8);while(r<n){t[r]=255;r++}if(n<16){t[n]=Math.pow(2,e%8)-1<<8-e%8}return new this(t)};u.fromByteArray=function(e){const t=e.length;if(t===4){return new u.IPv4(e)}else if(t===16){return new u.IPv6(e)}else{throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")}};u.isValid=function(e){return u.IPv6.isValid(e)||u.IPv4.isValid(e)};u.isValidCIDR=function(e){return u.IPv6.isValidCIDR(e)||u.IPv4.isValidCIDR(e)};u.parse=function(e){if(u.IPv6.isValid(e)){return u.IPv6.parse(e)}else if(u.IPv4.isValid(e)){return u.IPv4.parse(e)}else{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")}};u.parseCIDR=function(e){try{return u.IPv6.parseCIDR(e)}catch(t){try{return u.IPv4.parseCIDR(e)}catch(e){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}};u.process=function(e){const t=this.parse(e);if(t.kind()==="ipv6"&&t.isIPv4MappedAddress()){return t.toIPv4Address()}else{return t}};u.subnetMatch=function(e,t,r){let n,i,s,o;if(r===undefined||r===null){r="unicast"}for(i in t){if(Object.prototype.hasOwnProperty.call(t,i)){s=t[i];if(s[0]&&!(s[0]instanceof Array)){s=[s]}for(n=0;n<s.length;n++){o=s[n];if(e.kind()===o[0].kind()&&e.match.apply(e,o)){return i}}}}return r};if(true&&e.exports){e.exports=u}else{t.ipaddr=u}})(this)},89682:(e,t,r)=>{"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n=r(3605);function isObjectObject(e){return n(e)===true&&Object.prototype.toString.call(e)==="[object Object]"}e.exports=function isPlainObject(e){var t,r;if(isObjectObject(e)===false)return false;t=e.constructor;if(typeof t!=="function")return false;r=t.prototype;if(isObjectObject(r)===false)return false;if(r.hasOwnProperty("isPrototypeOf")===false){return false}return true}},22106:e=>{"use strict";function isProperty(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}e.exports=isProperty},5380:e=>{"use strict";const isStream=e=>e!==null&&typeof e==="object"&&typeof e.pipe==="function";isStream.writable=e=>isStream(e)&&e.writable!==false&&typeof e._write==="function"&&typeof e._writableState==="object";isStream.readable=e=>isStream(e)&&e.readable!==false&&typeof e._read==="function"&&typeof e._readableState==="object";isStream.duplex=e=>isStream.writable(e)&&isStream.readable(e);isStream.transform=e=>isStream.duplex(e)&&typeof e._transform==="function";e.exports=isStream},31534:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return t.call(e)=="[object Array]"}},10307:(e,t,r)=>{var n=r(57147);var i;if(process.platform==="win32"||global.TESTING_WINDOWS){i=r(2648)}else{i=r(56407)}e.exports=isexe;isexe.sync=sync;function isexe(e,t,r){if(typeof t==="function"){r=t;t={}}if(!r){if(typeof Promise!=="function"){throw new TypeError("callback not provided")}return new Promise((function(r,n){isexe(e,t||{},(function(e,t){if(e){n(e)}else{r(t)}}))}))}i(e,t||{},(function(e,n){if(e){if(e.code==="EACCES"||t&&t.ignoreErrors){e=null;n=false}}r(e,n)}))}function sync(e,t){try{return i.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||e.code==="EACCES"){return false}else{throw e}}}},56407:(e,t,r)=>{e.exports=isexe;isexe.sync=sync;var n=r(57147);function isexe(e,t,r){n.stat(e,(function(e,n){r(e,e?false:checkStat(n,t))}))}function sync(e,t){return checkStat(n.statSync(e),t)}function checkStat(e,t){return e.isFile()&&checkMode(e,t)}function checkMode(e,t){var r=e.mode;var n=e.uid;var i=e.gid;var s=t.uid!==undefined?t.uid:process.getuid&&process.getuid();var o=t.gid!==undefined?t.gid:process.getgid&&process.getgid();var a=parseInt("100",8);var c=parseInt("010",8);var u=parseInt("001",8);var d=a|c;var p=r&u||r&c&&i===o||r&a&&n===s||r&d&&s===0;return p}},2648:(e,t,r)=>{e.exports=isexe;isexe.sync=sync;var n=r(57147);function checkPathExt(e,t){var r=t.pathExt!==undefined?t.pathExt:process.env.PATHEXT;if(!r){return true}r=r.split(";");if(r.indexOf("")!==-1){return true}for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i){return true}}return false}function checkStat(e,t,r){if(!e.isSymbolicLink()&&!e.isFile()){return false}return checkPathExt(t,r)}function isexe(e,t,r){n.stat(e,(function(n,i){r(n,n?false:checkStat(i,e,t))}))}function sync(e,t){return checkStat(n.statSync(e),e,t)}},3605:e=>{"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function isObject(e){return e!=null&&typeof e==="object"&&Array.isArray(e)===false}},54129:(e,t,r)=>{var n=r(53090).stringify;var i=r(92102);e.exports=function(e){return{parse:i(e),stringify:n}};e.exports.parse=i();e.exports.stringify=n},92102:(e,t,r)=>{var n=null;const i=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/;const s=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var json_parse=function(e){"use strict";var t={strict:false,storeAsString:false,alwaysParseAsBig:false,useNativeBigInt:false,protoAction:"error",constructorAction:"error"};if(e!==undefined&&e!==null){if(e.strict===true){t.strict=true}if(e.storeAsString===true){t.storeAsString=true}t.alwaysParseAsBig=e.alwaysParseAsBig===true?e.alwaysParseAsBig:false;t.useNativeBigInt=e.useNativeBigInt===true?e.useNativeBigInt:false;if(typeof e.constructorAction!=="undefined"){if(e.constructorAction==="error"||e.constructorAction==="ignore"||e.constructorAction==="preserve"){t.constructorAction=e.constructorAction}else{throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${e.constructorAction}`)}}if(typeof e.protoAction!=="undefined"){if(e.protoAction==="error"||e.protoAction==="ignore"||e.protoAction==="preserve"){t.protoAction=e.protoAction}else{throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${e.protoAction}`)}}}var o,a,c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u,error=function(e){throw{name:"SyntaxError",message:e,at:o,text:u}},next=function(e){if(e&&e!==a){error("Expected '"+e+"' instead of '"+a+"'")}a=u.charAt(o);o+=1;return a},number=function(){var e,i="";if(a==="-"){i="-";next("-")}while(a>="0"&&a<="9"){i+=a;next()}if(a==="."){i+=".";while(next()&&a>="0"&&a<="9"){i+=a}}if(a==="e"||a==="E"){i+=a;next();if(a==="-"||a==="+"){i+=a;next()}while(a>="0"&&a<="9"){i+=a;next()}}e=+i;if(!isFinite(e)){error("Bad number")}else{if(n==null)n=r(78134);if(i.length>15)return t.storeAsString?i:t.useNativeBigInt?BigInt(i):new n(i);else return!t.alwaysParseAsBig?e:t.useNativeBigInt?BigInt(e):new n(e)}},string=function(){var e,t,r="",n;if(a==='"'){var i=o;while(next()){if(a==='"'){if(o-1>i)r+=u.substring(i,o-1);next();return r}if(a==="\\"){if(o-1>i)r+=u.substring(i,o-1);next();if(a==="u"){n=0;for(t=0;t<4;t+=1){e=parseInt(next(),16);if(!isFinite(e)){break}n=n*16+e}r+=String.fromCharCode(n)}else if(typeof c[a]==="string"){r+=c[a]}else{break}i=o}}}error("Bad string")},white=function(){while(a&&a<=" "){next()}},word=function(){switch(a){case"t":next("t");next("r");next("u");next("e");return true;case"f":next("f");next("a");next("l");next("s");next("e");return false;case"n":next("n");next("u");next("l");next("l");return null}error("Unexpected '"+a+"'")},d,array=function(){var e=[];if(a==="["){next("[");white();if(a==="]"){next("]");return e}while(a){e.push(d());white();if(a==="]"){next("]");return e}next(",");white()}}error("Bad array")},object=function(){var e,r=Object.create(null);if(a==="{"){next("{");white();if(a==="}"){next("}");return r}while(a){e=string();white();next(":");if(t.strict===true&&Object.hasOwnProperty.call(r,e)){error('Duplicate key "'+e+'"')}if(i.test(e)===true){if(t.protoAction==="error"){error("Object contains forbidden prototype property")}else if(t.protoAction==="ignore"){d()}else{r[e]=d()}}else if(s.test(e)===true){if(t.constructorAction==="error"){error("Object contains forbidden constructor property")}else if(t.constructorAction==="ignore"){d()}else{r[e]=d()}}else{r[e]=d()}white();if(a==="}"){next("}");return r}next(",");white()}}error("Bad object")};d=function(){white();switch(a){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return a>="0"&&a<="9"?number():word()}};return function(e,t){var r;u=e+"";o=0;a=" ";r=d();white();if(a){error("Syntax error")}return typeof t==="function"?function walk(e,r){var n,i,s=e[r];if(s&&typeof s==="object"){Object.keys(s).forEach((function(e){i=walk(s,e);if(i!==undefined){s[e]=i}else{delete s[e]}}))}return t.call(e,r,s)}({"":r},""):r}};e.exports=json_parse},53090:(e,t,r)=>{var n=r(78134);var i=e.exports;(function(){"use strict";function f(e){return e<10?"0"+e:e}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r,s,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a;function quote(e){t.lastIndex=0;return t.test(e)?'"'+e.replace(t,(function(e){var t=o[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var i,o,c,u,d=r,p,m=t[e],y=m!=null&&(m instanceof n||n.isBigNumber(m));if(m&&typeof m==="object"&&typeof m.toJSON==="function"){m=m.toJSON(e)}if(typeof a==="function"){m=a.call(t,e,m)}switch(typeof m){case"string":if(y){return m}else{return quote(m)}case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":case"bigint":return String(m);case"object":if(!m){return"null"}r+=s;p=[];if(Object.prototype.toString.apply(m)==="[object Array]"){u=m.length;for(i=0;i<u;i+=1){p[i]=str(i,m)||"null"}c=p.length===0?"[]":r?"[\n"+r+p.join(",\n"+r)+"\n"+d+"]":"["+p.join(",")+"]";r=d;return c}if(a&&typeof a==="object"){u=a.length;for(i=0;i<u;i+=1){if(typeof a[i]==="string"){o=a[i];c=str(o,m);if(c){p.push(quote(o)+(r?": ":":")+c)}}}}else{Object.keys(m).forEach((function(e){var t=str(e,m);if(t){p.push(quote(e)+(r?": ":":")+t)}}))}c=p.length===0?"{}":r?"{\n"+r+p.join(",\n"+r)+"\n"+d+"}":"{"+p.join(",")+"}";r=d;return c}}if(typeof i.stringify!=="function"){i.stringify=function(e,t,n){var i;r="";s="";if(typeof n==="number"){for(i=0;i<n;i+=1){s+=" "}}else if(typeof n==="string"){s=n}a=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}})()},9115:(e,t,r)=>{var n=r(98845);e.exports=function(e,t){t=t||{};var r=n.decode(e,t);if(!r){return null}var i=r.payload;if(typeof i==="string"){try{var s=JSON.parse(i);if(s!==null&&typeof s==="object"){i=s}}catch(e){}}if(t.complete===true){return{header:r.header,payload:i,signature:r.signature}}return i}},98574:(e,t,r)=>{e.exports={decode:r(9115),verify:r(46716),sign:r(30374),JsonWebTokenError:r(60496),NotBeforeError:r(6969),TokenExpiredError:r(80880)}},60496:e=>{var JsonWebTokenError=function(e,t){Error.call(this,e);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}this.name="JsonWebTokenError";this.message=e;if(t)this.inner=t};JsonWebTokenError.prototype=Object.create(Error.prototype);JsonWebTokenError.prototype.constructor=JsonWebTokenError;e.exports=JsonWebTokenError},6969:(e,t,r)=>{var n=r(60496);var NotBeforeError=function(e,t){n.call(this,e);this.name="NotBeforeError";this.date=t};NotBeforeError.prototype=Object.create(n.prototype);NotBeforeError.prototype.constructor=NotBeforeError;e.exports=NotBeforeError},80880:(e,t,r)=>{var n=r(60496);var TokenExpiredError=function(e,t){n.call(this,e);this.name="TokenExpiredError";this.expiredAt=t};TokenExpiredError.prototype=Object.create(n.prototype);TokenExpiredError.prototype.constructor=TokenExpiredError;e.exports=TokenExpiredError},52137:(e,t,r)=>{const n=r(510);e.exports=n.satisfies(process.version,">=15.7.0")},84905:(e,t,r)=>{var n=r(510);e.exports=n.satisfies(process.version,"^6.12.0 || >=8.0.0")},78738:(e,t,r)=>{const n=r(510);e.exports=n.satisfies(process.version,">=16.9.0")},28482:(e,t,r)=>{var n=r(31560);e.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if(typeof e==="string"){var i=n(e);if(typeof i==="undefined"){return}return Math.floor(r+i/1e3)}else if(typeof e==="number"){return r+e}else{return}}},6315:(e,t,r)=>{const n=r(52137);const i=r(78738);const s={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]};const o={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};e.exports=function(e,t){if(!e||!t)return;const r=t.asymmetricKeyType;if(!r)return;const a=s[r];if(!a){throw new Error(`Unknown key type "${r}".`)}if(!a.includes(e)){throw new Error(`"alg" parameter for "${r}" key type must be one of: ${a.join(", ")}.`)}if(n){switch(r){case"ec":const r=t.asymmetricKeyDetails.namedCurve;const n=o[e];if(r!==n){throw new Error(`"alg" parameter "${e}" requires curve "${n}".`)}break;case"rsa-pss":if(i){const r=parseInt(e.slice(-3),10);const{hashAlgorithm:n,mgf1HashAlgorithm:i,saltLength:s}=t.asymmetricKeyDetails;if(n!==`sha${r}`||i!==n){throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`)}if(s!==undefined&&s>r>>3){throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}break}}}},30374:(e,t,r)=>{const n=r(28482);const i=r(84905);const s=r(6315);const o=r(98845);const a=r(52484);const c=r(5764);const u=r(29484);const d=r(68876);const p=r(14095);const m=r(76094);const y=r(4805);const{KeyObject:g,createSecretKey:b,createPrivateKey:v}=r(6113);const w=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];if(i){w.splice(3,0,"PS256","PS384","PS512")}const _={expiresIn:{isValid:function(e){return u(e)||m(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||m(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return m(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:a.bind(null,w),message:'"algorithm" must be a valid string enum value'},header:{isValid:p,message:'"header" must be an object'},encoding:{isValid:m,message:'"encoding" must be a string'},issuer:{isValid:m,message:'"issuer" must be a string'},subject:{isValid:m,message:'"subject" must be a string'},jwtid:{isValid:m,message:'"jwtid" must be a string'},noTimestamp:{isValid:c,message:'"noTimestamp" must be a boolean'},keyid:{isValid:m,message:'"keyid" must be a string'},mutatePayload:{isValid:c,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:c,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:c,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}};const C={iat:{isValid:d,message:'"iat" should be a number of seconds'},exp:{isValid:d,message:'"exp" should be a number of seconds'},nbf:{isValid:d,message:'"nbf" should be a number of seconds'}};function validate(e,t,r,n){if(!p(r)){throw new Error('Expected "'+n+'" to be a plain object.')}Object.keys(r).forEach((function(i){const s=e[i];if(!s){if(!t){throw new Error('"'+i+'" is not allowed in "'+n+'"')}return}if(!s.isValid(r[i])){throw new Error(s.message)}}))}function validateOptions(e){return validate(_,false,e,"options")}function validatePayload(e){return validate(C,true,e,"payload")}const P={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"};const O=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,r,i){if(typeof r==="function"){i=r;r={}}else{r=r||{}}const a=typeof e==="object"&&!Buffer.isBuffer(e);const c=Object.assign({alg:r.algorithm||"HS256",typ:a?"JWT":undefined,kid:r.keyid},r.header);function failure(e){if(i){return i(e)}throw e}if(!t&&r.algorithm!=="none"){return failure(new Error("secretOrPrivateKey must have a value"))}if(t!=null&&!(t instanceof g)){try{t=v(t)}catch(e){try{t=b(typeof t==="string"?Buffer.from(t):t)}catch(e){return failure(new Error("secretOrPrivateKey is not valid key material"))}}}if(c.alg.startsWith("HS")&&t.type!=="secret"){return failure(new Error(`secretOrPrivateKey must be a symmetric key when using ${c.alg}`))}else if(/^(?:RS|PS|ES)/.test(c.alg)){if(t.type!=="private"){return failure(new Error(`secretOrPrivateKey must be an asymmetric key when using ${c.alg}`))}if(!r.allowInsecureKeySizes&&!c.alg.startsWith("ES")&&t.asymmetricKeyDetails!==undefined&&t.asymmetricKeyDetails.modulusLength<2048){return failure(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`))}}if(typeof e==="undefined"){return failure(new Error("payload is required"))}else if(a){try{validatePayload(e)}catch(e){return failure(e)}if(!r.mutatePayload){e=Object.assign({},e)}}else{const t=O.filter((function(e){return typeof r[e]!=="undefined"}));if(t.length>0){return failure(new Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}}if(typeof e.exp!=="undefined"&&typeof r.expiresIn!=="undefined"){return failure(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'))}if(typeof e.nbf!=="undefined"&&typeof r.notBefore!=="undefined"){return failure(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'))}try{validateOptions(r)}catch(e){return failure(e)}if(!r.allowInvalidAsymmetricKeyTypes){try{s(c.alg,t)}catch(e){return failure(e)}}const u=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp){delete e.iat}else if(a){e.iat=u}if(typeof r.notBefore!=="undefined"){try{e.nbf=n(r.notBefore,u)}catch(e){return failure(e)}if(typeof e.nbf==="undefined"){return failure(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}}if(typeof r.expiresIn!=="undefined"&&typeof e==="object"){try{e.exp=n(r.expiresIn,u)}catch(e){return failure(e)}if(typeof e.exp==="undefined"){return failure(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}}Object.keys(P).forEach((function(t){const n=P[t];if(typeof r[t]!=="undefined"){if(typeof e[n]!=="undefined"){return failure(new Error('Bad "options.'+t+'" option. The payload already has an "'+n+'" property.'))}e[n]=r[t]}}));const d=r.encoding||"utf8";if(typeof i==="function"){i=i&&y(i);o.createSign({header:c,privateKey:t,payload:e,encoding:d}).once("error",i).once("done",(function(e){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&e.length<256){return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`))}i(null,e)}))}else{let n=o.sign({header:c,payload:e,secret:t,encoding:d});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&n.length<256){throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`)}return n}}},46716:(e,t,r)=>{const n=r(60496);const i=r(6969);const s=r(80880);const o=r(9115);const a=r(28482);const c=r(6315);const u=r(84905);const d=r(98845);const{KeyObject:p,createSecretKey:m,createPublicKey:y}=r(6113);const g=["RS256","RS384","RS512"];const b=["ES256","ES384","ES512"];const v=["RS256","RS384","RS512"];const w=["HS256","HS384","HS512"];if(u){g.splice(g.length,0,"PS256","PS384","PS512");v.splice(v.length,0,"PS256","PS384","PS512")}e.exports=function(e,t,r,u){if(typeof r==="function"&&!u){u=r;r={}}if(!r){r={}}r=Object.assign({},r);let _;if(u){_=u}else{_=function(e,t){if(e)throw e;return t}}if(r.clockTimestamp&&typeof r.clockTimestamp!=="number"){return _(new n("clockTimestamp must be a number"))}if(r.nonce!==undefined&&(typeof r.nonce!=="string"||r.nonce.trim()==="")){return _(new n("nonce must be a non-empty string"))}if(r.allowInvalidAsymmetricKeyTypes!==undefined&&typeof r.allowInvalidAsymmetricKeyTypes!=="boolean"){return _(new n("allowInvalidAsymmetricKeyTypes must be a boolean"))}const C=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e){return _(new n("jwt must be provided"))}if(typeof e!=="string"){return _(new n("jwt must be a string"))}const P=e.split(".");if(P.length!==3){return _(new n("jwt malformed"))}let O;try{O=o(e,{complete:true})}catch(e){return _(e)}if(!O){return _(new n("invalid token"))}const E=O.header;let I;if(typeof t==="function"){if(!u){return _(new n("verify must be called asynchronous if secret or public key is provided as a callback"))}I=t}else{I=function(e,r){return r(null,t)}}return I(E,(function(t,o){if(t){return _(new n("error in secret or public key callback: "+t.message))}const u=P[2].trim()!=="";if(!u&&o){return _(new n("jwt signature is required"))}if(u&&!o){return _(new n("secret or public key must be provided"))}if(!u&&!r.algorithms){return _(new n('please specify "none" in "algorithms" to verify unsigned tokens'))}if(o!=null&&!(o instanceof p)){try{o=y(o)}catch(e){try{o=m(typeof o==="string"?Buffer.from(o):o)}catch(e){return _(new n("secretOrPublicKey is not valid key material"))}}}if(!r.algorithms){if(o.type==="secret"){r.algorithms=w}else if(["rsa","rsa-pss"].includes(o.asymmetricKeyType)){r.algorithms=v}else if(o.asymmetricKeyType==="ec"){r.algorithms=b}else{r.algorithms=g}}if(r.algorithms.indexOf(O.header.alg)===-1){return _(new n("invalid algorithm"))}if(E.alg.startsWith("HS")&&o.type!=="secret"){return _(new n(`secretOrPublicKey must be a symmetric key when using ${E.alg}`))}else if(/^(?:RS|PS|ES)/.test(E.alg)&&o.type!=="public"){return _(new n(`secretOrPublicKey must be an asymmetric key when using ${E.alg}`))}if(!r.allowInvalidAsymmetricKeyTypes){try{c(E.alg,o)}catch(e){return _(e)}}let I;try{I=d.verify(e,O.header.alg,o)}catch(e){return _(e)}if(!I){return _(new n("invalid signature"))}const k=O.payload;if(typeof k.nbf!=="undefined"&&!r.ignoreNotBefore){if(typeof k.nbf!=="number"){return _(new n("invalid nbf value"))}if(k.nbf>C+(r.clockTolerance||0)){return _(new i("jwt not active",new Date(k.nbf*1e3)))}}if(typeof k.exp!=="undefined"&&!r.ignoreExpiration){if(typeof k.exp!=="number"){return _(new n("invalid exp value"))}if(C>=k.exp+(r.clockTolerance||0)){return _(new s("jwt expired",new Date(k.exp*1e3)))}}if(r.audience){const e=Array.isArray(r.audience)?r.audience:[r.audience];const t=Array.isArray(k.aud)?k.aud:[k.aud];const i=t.some((function(t){return e.some((function(e){return e instanceof RegExp?e.test(t):e===t}))}));if(!i){return _(new n("jwt audience invalid. expected: "+e.join(" or ")))}}if(r.issuer){const e=typeof r.issuer==="string"&&k.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(k.iss)===-1;if(e){return _(new n("jwt issuer invalid. expected: "+r.issuer))}}if(r.subject){if(k.sub!==r.subject){return _(new n("jwt subject invalid. expected: "+r.subject))}}if(r.jwtid){if(k.jti!==r.jwtid){return _(new n("jwt jwtid invalid. expected: "+r.jwtid))}}if(r.nonce){if(k.nonce!==r.nonce){return _(new n("jwt nonce invalid. expected: "+r.nonce))}}if(r.maxAge){if(typeof k.iat!=="number"){return _(new n("iat required when maxAge is specified"))}const e=a(r.maxAge,k.iat);if(typeof e==="undefined"){return _(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(C>=e+(r.clockTolerance||0)){return _(new s("maxAge exceeded",new Date(e*1e3)))}}if(r.complete===true){const e=O.signature;return _(null,{header:E,payload:k,signature:e})}return _(null,k)}))}},64071:(e,t,r)=>{var n=r(80078);var i=r(78586).Buffer;var s=r(6113);var o=r(6105);var a=r(73837);var c='"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".';var u="secret must be a string or buffer";var d="key must be a string or a buffer";var p="key must be a string, a buffer or an object";var m=typeof s.createPublicKey==="function";if(m){d+=" or a KeyObject";u+="or a KeyObject"}function checkIsPublicKey(e){if(i.isBuffer(e)){return}if(typeof e==="string"){return}if(!m){throw typeError(d)}if(typeof e!=="object"){throw typeError(d)}if(typeof e.type!=="string"){throw typeError(d)}if(typeof e.asymmetricKeyType!=="string"){throw typeError(d)}if(typeof e.export!=="function"){throw typeError(d)}}function checkIsPrivateKey(e){if(i.isBuffer(e)){return}if(typeof e==="string"){return}if(typeof e==="object"){return}throw typeError(p)}function checkIsSecretKey(e){if(i.isBuffer(e)){return}if(typeof e==="string"){return e}if(!m){throw typeError(u)}if(typeof e!=="object"){throw typeError(u)}if(e.type!=="secret"){throw typeError(u)}if(typeof e.export!=="function"){throw typeError(u)}}function fromBase64(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBase64(e){e=e.toString();var t=4-e.length%4;if(t!==4){for(var r=0;r<t;++r){e+="="}}return e.replace(/\-/g,"+").replace(/_/g,"/")}function typeError(e){var t=[].slice.call(arguments,1);var r=a.format.bind(a,e).apply(null,t);return new TypeError(r)}function bufferOrString(e){return i.isBuffer(e)||typeof e==="string"}function normalizeInput(e){if(!bufferOrString(e))e=JSON.stringify(e);return e}function createHmacSigner(e){return function sign(t,r){checkIsSecretKey(r);t=normalizeInput(t);var n=s.createHmac("sha"+e,r);var i=(n.update(t),n.digest("base64"));return fromBase64(i)}}function createHmacVerifier(e){return function verify(t,r,s){var o=createHmacSigner(e)(t,s);return n(i.from(r),i.from(o))}}function createKeySigner(e){return function sign(t,r){checkIsPrivateKey(r);t=normalizeInput(t);var n=s.createSign("RSA-SHA"+e);var i=(n.update(t),n.sign(r,"base64"));return fromBase64(i)}}function createKeyVerifier(e){return function verify(t,r,n){checkIsPublicKey(n);t=normalizeInput(t);r=toBase64(r);var i=s.createVerify("RSA-SHA"+e);i.update(t);return i.verify(n,r,"base64")}}function createPSSKeySigner(e){return function sign(t,r){checkIsPrivateKey(r);t=normalizeInput(t);var n=s.createSign("RSA-SHA"+e);var i=(n.update(t),n.sign({key:r,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return fromBase64(i)}}function createPSSKeyVerifier(e){return function verify(t,r,n){checkIsPublicKey(n);t=normalizeInput(t);r=toBase64(r);var i=s.createVerify("RSA-SHA"+e);i.update(t);return i.verify({key:n,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function createECDSASigner(e){var t=createKeySigner(e);return function sign(){var r=t.apply(null,arguments);r=o.derToJose(r,"ES"+e);return r}}function createECDSAVerifer(e){var t=createKeyVerifier(e);return function verify(r,n,i){n=o.joseToDer(n,"ES"+e).toString("base64");var s=t(r,n,i);return s}}function createNoneSigner(){return function sign(){return""}}function createNoneVerifier(){return function verify(e,t){return t===""}}e.exports=function jwa(e){var t={hs:createHmacSigner,rs:createKeySigner,ps:createPSSKeySigner,es:createECDSASigner,none:createNoneSigner};var r={hs:createHmacVerifier,rs:createKeyVerifier,ps:createPSSKeyVerifier,es:createECDSAVerifer,none:createNoneVerifier};var n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw typeError(c,e);var i=(n[1]||n[3]).toLowerCase();var s=n[2];return{sign:t[i](s),verify:r[i](s)}}},98845:(e,t,r)=>{var n=r(51247);var i=r(98296);var s=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];t.ALGORITHMS=s;t.sign=n.sign;t.verify=i.verify;t.decode=i.decode;t.isValid=i.isValid;t.createSign=function createSign(e){return new n(e)};t.createVerify=function createVerify(e){return new i(e)}},56903:(e,t,r)=>{var n=r(78586).Buffer;var i=r(68265);var s=r(73837);function DataStream(e){this.buffer=null;this.writable=true;this.readable=true;if(!e){this.buffer=n.alloc(0);return this}if(typeof e.pipe==="function"){this.buffer=n.alloc(0);e.pipe(this);return this}if(e.length||typeof e==="object"){this.buffer=e;this.writable=false;process.nextTick(function(){this.emit("end",e);this.readable=false;this.emit("close")}.bind(this));return this}throw new TypeError("Unexpected data type ("+typeof e+")")}s.inherits(DataStream,i);DataStream.prototype.write=function write(e){this.buffer=n.concat([this.buffer,n.from(e)]);this.emit("data",e)};DataStream.prototype.end=function end(e){if(e)this.write(e);this.emit("end",e);this.emit("close");this.writable=false;this.readable=false};e.exports=DataStream},51247:(e,t,r)=>{var n=r(78586).Buffer;var i=r(56903);var s=r(64071);var o=r(68265);var a=r(42631);var c=r(73837);function base64url(e,t){return n.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jwsSecuredInput(e,t,r){r=r||"utf8";var n=base64url(a(e),"binary");var i=base64url(a(t),r);return c.format("%s.%s",n,i)}function jwsSign(e){var t=e.header;var r=e.payload;var n=e.secret||e.privateKey;var i=e.encoding;var o=s(t.alg);var a=jwsSecuredInput(t,r,i);var u=o.sign(a,n);return c.format("%s.%s",a,u)}function SignStream(e){var t=e.secret||e.privateKey||e.key;var r=new i(t);this.readable=true;this.header=e.header;this.encoding=e.encoding;this.secret=this.privateKey=this.key=r;this.payload=new i(e.payload);this.secret.once("close",function(){if(!this.payload.writable&&this.readable)this.sign()}.bind(this));this.payload.once("close",function(){if(!this.secret.writable&&this.readable)this.sign()}.bind(this))}c.inherits(SignStream,o);SignStream.prototype.sign=function sign(){try{var e=jwsSign({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});this.emit("done",e);this.emit("data",e);this.emit("end");this.readable=false;return e}catch(e){this.readable=false;this.emit("error",e);this.emit("close")}};SignStream.sign=jwsSign;e.exports=SignStream},42631:(e,t,r)=>{var n=r(14300).Buffer;e.exports=function toString(e){if(typeof e==="string")return e;if(typeof e==="number"||n.isBuffer(e))return e.toString();return JSON.stringify(e)}},98296:(e,t,r)=>{var n=r(78586).Buffer;var i=r(56903);var s=r(64071);var o=r(68265);var a=r(42631);var c=r(73837);var u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}function safeJsonParse(e){if(isObject(e))return e;try{return JSON.parse(e)}catch(e){return undefined}}function headerFromJWS(e){var t=e.split(".",1)[0];return safeJsonParse(n.from(t,"base64").toString("binary"))}function securedInputFromJWS(e){return e.split(".",2).join(".")}function signatureFromJWS(e){return e.split(".")[2]}function payloadFromJWS(e,t){t=t||"utf8";var r=e.split(".")[1];return n.from(r,"base64").toString(t)}function isValidJws(e){return u.test(e)&&!!headerFromJWS(e)}function jwsVerify(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");n.code="MISSING_ALGORITHM";throw n}e=a(e);var i=signatureFromJWS(e);var o=securedInputFromJWS(e);var c=s(t);return c.verify(o,i,r)}function jwsDecode(e,t){t=t||{};e=a(e);if(!isValidJws(e))return null;var r=headerFromJWS(e);if(!r)return null;var n=payloadFromJWS(e);if(r.typ==="JWT"||t.json)n=JSON.parse(n,t.encoding);return{header:r,payload:n,signature:signatureFromJWS(e)}}function VerifyStream(e){e=e||{};var t=e.secret||e.publicKey||e.key;var r=new i(t);this.readable=true;this.algorithm=e.algorithm;this.encoding=e.encoding;this.secret=this.publicKey=this.key=r;this.signature=new i(e.signature);this.secret.once("close",function(){if(!this.signature.writable&&this.readable)this.verify()}.bind(this));this.signature.once("close",function(){if(!this.secret.writable&&this.readable)this.verify()}.bind(this))}c.inherits(VerifyStream,o);VerifyStream.prototype.verify=function verify(){try{var e=jwsVerify(this.signature.buffer,this.algorithm,this.key.buffer);var t=jwsDecode(this.signature.buffer,this.encoding);this.emit("done",e,t);this.emit("data",e);this.emit("end");this.readable=false;return e}catch(e){this.readable=false;this.emit("error",e);this.emit("close")}};VerifyStream.decode=jwsDecode;VerifyStream.isValid=isValidJws;VerifyStream.verify=jwsVerify;e.exports=VerifyStream},52484:e=>{var t=1/0,r=9007199254740991,n=17976931348623157e292,i=0/0;var s="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",c="[object String]",u="[object Symbol]";var d=/^\s+|\s+$/g;var p=/^[-+]0x[0-9a-f]+$/i;var m=/^0b[01]+$/i;var y=/^0o[0-7]+$/i;var g=/^(?:0|[1-9]\d*)$/;var b=parseInt;function arrayMap(e,t){var r=-1,n=e?e.length:0,i=Array(n);while(++r<n){i[r]=t(e[r],r,e)}return i}function baseFindIndex(e,t,r,n){var i=e.length,s=r+(n?1:-1);while(n?s--:++s<i){if(t(e[s],s,e)){return s}}return-1}function baseIndexOf(e,t,r){if(t!==t){return baseFindIndex(e,baseIsNaN,r)}var n=r-1,i=e.length;while(++n<i){if(e[n]===t){return n}}return-1}function baseIsNaN(e){return e!==e}function baseTimes(e,t){var r=-1,n=Array(e);while(++r<e){n[r]=t(r)}return n}function baseValues(e,t){return arrayMap(t,(function(t){return e[t]}))}function overArg(e,t){return function(r){return e(t(r))}}var v=Object.prototype;var w=v.hasOwnProperty;var _=v.toString;var C=v.propertyIsEnumerable;var P=overArg(Object.keys,Object),O=Math.max;function arrayLikeKeys(e,t){var r=E(e)||isArguments(e)?baseTimes(e.length,String):[];var n=r.length,i=!!n;for(var s in e){if((t||w.call(e,s))&&!(i&&(s=="length"||isIndex(s,n)))){r.push(s)}}return r}function baseKeys(e){if(!isPrototype(e)){return P(e)}var t=[];for(var r in Object(e)){if(w.call(e,r)&&r!="constructor"){t.push(r)}}return t}function isIndex(e,t){t=t==null?r:t;return!!t&&(typeof e=="number"||g.test(e))&&(e>-1&&e%1==0&&e<t)}function isPrototype(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||v;return e===r}function includes(e,t,r,n){e=isArrayLike(e)?e:values(e);r=r&&!n?toInteger(r):0;var i=e.length;if(r<0){r=O(i+r,0)}return isString(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&baseIndexOf(e,t,r)>-1}function isArguments(e){return isArrayLikeObject(e)&&w.call(e,"callee")&&(!C.call(e,"callee")||_.call(e)==s)}var E=Array.isArray;function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?_.call(e):"";return t==o||t==a}function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=r}function isObject(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}function isString(e){return typeof e=="string"||!E(e)&&isObjectLike(e)&&_.call(e)==c}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&_.call(e)==u}function toFinite(e){if(!e){return e===0?e:0}e=toNumber(e);if(e===t||e===-t){var r=e<0?-1:1;return r*n}return e===e?e:0}function toInteger(e){var t=toFinite(e),r=t%1;return t===t?r?t-r:t:0}function toNumber(e){if(typeof e=="number"){return e}if(isSymbol(e)){return i}if(isObject(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=e.replace(d,"");var r=m.test(e);return r||y.test(e)?b(e.slice(2),r?2:8):p.test(e)?i:+e}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function values(e){return e?baseValues(e,keys(e)):[]}e.exports=includes},5764:e=>{var t="[object Boolean]";var r=Object.prototype;var n=r.toString;function isBoolean(e){return e===true||e===false||isObjectLike(e)&&n.call(e)==t}function isObjectLike(e){return!!e&&typeof e=="object"}e.exports=isBoolean},29484:e=>{var t=1/0,r=17976931348623157e292,n=0/0;var i="[object Symbol]";var s=/^\s+|\s+$/g;var o=/^[-+]0x[0-9a-f]+$/i;var a=/^0b[01]+$/i;var c=/^0o[0-7]+$/i;var u=parseInt;var d=Object.prototype;var p=d.toString;function isInteger(e){return typeof e=="number"&&e==toInteger(e)}function isObject(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&p.call(e)==i}function toFinite(e){if(!e){return e===0?e:0}e=toNumber(e);if(e===t||e===-t){var n=e<0?-1:1;return n*r}return e===e?e:0}function toInteger(e){var t=toFinite(e),r=t%1;return t===t?r?t-r:t:0}function toNumber(e){if(typeof e=="number"){return e}if(isSymbol(e)){return n}if(isObject(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=e.replace(s,"");var r=a.test(e);return r||c.test(e)?u(e.slice(2),r?2:8):o.test(e)?n:+e}e.exports=isInteger},68876:e=>{var t="[object Number]";var r=Object.prototype;var n=r.toString;function isObjectLike(e){return!!e&&typeof e=="object"}function isNumber(e){return typeof e=="number"||isObjectLike(e)&&n.call(e)==t}e.exports=isNumber},14095:e=>{var t="[object Object]";function isHostObject(e){var t=false;if(e!=null&&typeof e.toString!="function"){try{t=!!(e+"")}catch(e){}}return t}function overArg(e,t){return function(r){return e(t(r))}}var r=Function.prototype,n=Object.prototype;var i=r.toString;var s=n.hasOwnProperty;var o=i.call(Object);var a=n.toString;var c=overArg(Object.getPrototypeOf,Object);function isObjectLike(e){return!!e&&typeof e=="object"}function isPlainObject(e){if(!isObjectLike(e)||a.call(e)!=t||isHostObject(e)){return false}var r=c(e);if(r===null){return true}var n=s.call(r,"constructor")&&r.constructor;return typeof n=="function"&&n instanceof n&&i.call(n)==o}e.exports=isPlainObject},76094:e=>{var t="[object String]";var r=Object.prototype;var n=r.toString;var i=Array.isArray;function isObjectLike(e){return!!e&&typeof e=="object"}function isString(e){return typeof e=="string"||!i(e)&&isObjectLike(e)&&n.call(e)==t}e.exports=isString},4805:e=>{var t="Expected a function";var r=1/0,n=17976931348623157e292,i=0/0;var s="[object Symbol]";var o=/^\s+|\s+$/g;var a=/^[-+]0x[0-9a-f]+$/i;var c=/^0b[01]+$/i;var u=/^0o[0-7]+$/i;var d=parseInt;var p=Object.prototype;var m=p.toString;function before(e,r){var n;if(typeof r!="function"){throw new TypeError(t)}e=toInteger(e);return function(){if(--e>0){n=r.apply(this,arguments)}if(e<=1){r=undefined}return n}}function once(e){return before(2,e)}function isObject(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&m.call(e)==s}function toFinite(e){if(!e){return e===0?e:0}e=toNumber(e);if(e===r||e===-r){var t=e<0?-1:1;return t*n}return e===e?e:0}function toInteger(e){var t=toFinite(e),r=t%1;return t===t?r?t-r:t:0}function toNumber(e){if(typeof e=="number"){return e}if(isSymbol(e)){return i}if(isObject(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=e.replace(o,"");var r=c.test(e);return r||u.test(e)?d(e.slice(2),r?2:8):a.test(e)?i:+e}e.exports=once},76829:(e,t,r)=>{var n=r(3275),i=r(32800);var s=n(i,"DataView");e.exports=s},6261:(e,t,r)=>{var n=r(31777),i=r(93390),s=r(77911),o=r(53894),a=r(76334);function Hash(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=n;Hash.prototype["delete"]=i;Hash.prototype.get=s;Hash.prototype.has=o;Hash.prototype.set=a;e.exports=Hash},70219:(e,t,r)=>{var n=r(61658),i=r(66560),s=r(98981),o=r(84980),a=r(93740);function ListCache(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=n;ListCache.prototype["delete"]=i;ListCache.prototype.get=s;ListCache.prototype.has=o;ListCache.prototype.set=a;e.exports=ListCache},90293:(e,t,r)=>{var n=r(3275),i=r(32800);var s=n(i,"Map");e.exports=s},57765:(e,t,r)=>{var n=r(56263),i=r(19426),s=r(98022),o=r(43728),a=r(60981);function MapCache(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=n;MapCache.prototype["delete"]=i;MapCache.prototype.get=s;MapCache.prototype.has=o;MapCache.prototype.set=a;e.exports=MapCache},97789:(e,t,r)=>{var n=r(3275),i=r(32800);var s=n(i,"Promise");e.exports=s},62297:(e,t,r)=>{var n=r(3275),i=r(32800);var s=n(i,"Set");e.exports=s},35640:(e,t,r)=>{var n=r(57765),i=r(17662),s=r(79541);function SetCache(e){var t=-1,r=e==null?0:e.length;this.__data__=new n;while(++t<r){this.add(e[t])}}SetCache.prototype.add=SetCache.prototype.push=i;SetCache.prototype.has=s;e.exports=SetCache},80912:(e,t,r)=>{var n=r(70219),i=r(96256),s=r(20989),o=r(41673),a=r(62975),c=r(39640);function Stack(e){var t=this.__data__=new n(e);this.size=t.size}Stack.prototype.clear=i;Stack.prototype["delete"]=s;Stack.prototype.get=o;Stack.prototype.has=a;Stack.prototype.set=c;e.exports=Stack},22568:(e,t,r)=>{var n=r(32800);var i=n.Symbol;e.exports=i},83477:(e,t,r)=>{var n=r(32800);var i=n.Uint8Array;e.exports=i},95501:(e,t,r)=>{var n=r(3275),i=r(32800);var s=n(i,"WeakMap");e.exports=s},26119:e=>{function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}e.exports=apply},69285:e=>{function arrayEach(e,t){var r=-1,n=e==null?0:e.length;while(++r<n){if(t(e[r],r,e)===false){break}}return e}e.exports=arrayEach},37019:e=>{function arrayFilter(e,t){var r=-1,n=e==null?0:e.length,i=0,s=[];while(++r<n){var o=e[r];if(t(o,r,e)){s[i++]=o}}return s}e.exports=arrayFilter},52367:(e,t,r)=>{var n=r(55785),i=r(26527),s=r(48820),o=r(38876),a=r(23723),c=r(89512);var u=Object.prototype;var d=u.hasOwnProperty;function arrayLikeKeys(e,t){var r=s(e),u=!r&&i(e),p=!r&&!u&&o(e),m=!r&&!u&&!p&&c(e),y=r||u||p||m,g=y?n(e.length,String):[],b=g.length;for(var v in e){if((t||d.call(e,v))&&!(y&&(v=="length"||p&&(v=="offset"||v=="parent")||m&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||a(v,b)))){g.push(v)}}return g}e.exports=arrayLikeKeys},74986:e=>{function arrayPush(e,t){var r=-1,n=t.length,i=e.length;while(++r<n){e[i+r]=t[r]}return e}e.exports=arrayPush},9818:e=>{function arraySome(e,t){var r=-1,n=e==null?0:e.length;while(++r<n){if(t(e[r],r,e)){return true}}return false}e.exports=arraySome},42613:(e,t,r)=>{var n=r(41849),i=r(1498);function assignMergeValue(e,t,r){if(r!==undefined&&!i(e[t],r)||r===undefined&&!(t in e)){n(e,t,r)}}e.exports=assignMergeValue},73341:(e,t,r)=>{var n=r(41849),i=r(1498);var s=Object.prototype;var o=s.hasOwnProperty;function assignValue(e,t,r){var s=e[t];if(!(o.call(e,t)&&i(s,r))||r===undefined&&!(t in e)){n(e,t,r)}}e.exports=assignValue},75553:(e,t,r)=>{var n=r(1498);function assocIndexOf(e,t){var r=e.length;while(r--){if(n(e[r][0],t)){return r}}return-1}e.exports=assocIndexOf},53974:(e,t,r)=>{var n=r(72423),i=r(25260);function baseAssign(e,t){return e&&n(t,i(t),e)}e.exports=baseAssign},86743:(e,t,r)=>{var n=r(72423),i=r(96610);function baseAssignIn(e,t){return e&&n(t,i(t),e)}e.exports=baseAssignIn},41849:(e,t,r)=>{var n=r(56289);function baseAssignValue(e,t,r){if(t=="__proto__"&&n){n(e,t,{configurable:true,enumerable:true,value:r,writable:true})}else{e[t]=r}}e.exports=baseAssignValue},28191:(e,t,r)=>{var n=r(80912),i=r(69285),s=r(73341),o=r(53974),a=r(86743),c=r(18703),u=r(35419),d=r(20926),p=r(11460),m=r(70408),y=r(6916),g=r(39336),b=r(41788),v=r(54345),w=r(49006),_=r(48820),C=r(38876),P=r(32698),O=r(54238),E=r(67360),I=r(25260),k=r(96610);var T=1,x=2,R=4;var B="[object Arguments]",N="[object Array]",j="[object Boolean]",L="[object Date]",D="[object Error]",U="[object Function]",F="[object GeneratorFunction]",K="[object Map]",V="[object Number]",H="[object Object]",q="[object RegExp]",W="[object Set]",z="[object String]",$="[object Symbol]",G="[object WeakMap]";var J="[object ArrayBuffer]",X="[object DataView]",Y="[object Float32Array]",Q="[object Float64Array]",ee="[object Int8Array]",te="[object Int16Array]",re="[object Int32Array]",ne="[object Uint8Array]",ie="[object Uint8ClampedArray]",se="[object Uint16Array]",oe="[object Uint32Array]";var ae={};ae[B]=ae[N]=ae[J]=ae[X]=ae[j]=ae[L]=ae[Y]=ae[Q]=ae[ee]=ae[te]=ae[re]=ae[K]=ae[V]=ae[H]=ae[q]=ae[W]=ae[z]=ae[$]=ae[ne]=ae[ie]=ae[se]=ae[oe]=true;ae[D]=ae[U]=ae[G]=false;function baseClone(e,t,r,N,j,L){var D,K=t&T,V=t&x,q=t&R;if(r){D=j?r(e,N,j,L):r(e)}if(D!==undefined){return D}if(!O(e)){return e}var W=_(e);if(W){D=b(e);if(!K){return u(e,D)}}else{var z=g(e),$=z==U||z==F;if(C(e)){return c(e,K)}if(z==H||z==B||$&&!j){D=V||$?{}:w(e);if(!K){return V?p(e,a(D,e)):d(e,o(D,e))}}else{if(!ae[z]){return j?e:{}}D=v(e,z,K)}}L||(L=new n);var G=L.get(e);if(G){return G}L.set(e,D);if(E(e)){e.forEach((function(n){D.add(baseClone(n,t,r,n,e,L))}))}else if(P(e)){e.forEach((function(n,i){D.set(i,baseClone(n,t,r,i,e,L))}))}var J=q?V?y:m:V?k:I;var X=W?undefined:J(e);i(X||e,(function(n,i){if(X){i=n;n=e[i]}s(D,i,baseClone(n,t,r,i,e,L))}));return D}e.exports=baseClone},98048:(e,t,r)=>{var n=r(54238);var i=Object.create;var s=function(){function object(){}return function(e){if(!n(e)){return{}}if(i){return i(e)}object.prototype=e;var t=new object;object.prototype=undefined;return t}}();e.exports=s},90918:(e,t,r)=>{var n=r(95803);var i=n();e.exports=i},32716:(e,t,r)=>{var n=r(74986),i=r(48820);function baseGetAllKeys(e,t,r){var s=t(e);return i(e)?s:n(s,r(e))}e.exports=baseGetAllKeys},55361:(e,t,r)=>{var n=r(22568),i=r(96557),s=r(80818);var o="[object Null]",a="[object Undefined]";var c=n?n.toStringTag:undefined;function baseGetTag(e){if(e==null){return e===undefined?a:o}return c&&c in Object(e)?i(e):s(e)}e.exports=baseGetTag},38509:(e,t,r)=>{var n=r(55361),i=r(64936);var s="[object Arguments]";function baseIsArguments(e){return i(e)&&n(e)==s}e.exports=baseIsArguments},69580:(e,t,r)=>{var n=r(25736),i=r(64936);function baseIsEqual(e,t,r,s,o){if(e===t){return true}if(e==null||t==null||!i(e)&&!i(t)){return e!==e&&t!==t}return n(e,t,r,s,baseIsEqual,o)}e.exports=baseIsEqual},25736:(e,t,r)=>{var n=r(80912),i=r(41857),s=r(5176),o=r(77928),a=r(39336),c=r(48820),u=r(38876),d=r(89512);var p=1;var m="[object Arguments]",y="[object Array]",g="[object Object]";var b=Object.prototype;var v=b.hasOwnProperty;function baseIsEqualDeep(e,t,r,b,w,_){var C=c(e),P=c(t),O=C?y:a(e),E=P?y:a(t);O=O==m?g:O;E=E==m?g:E;var I=O==g,k=E==g,T=O==E;if(T&&u(e)){if(!u(t)){return false}C=true;I=false}if(T&&!I){_||(_=new n);return C||d(e)?i(e,t,r,b,w,_):s(e,t,O,r,b,w,_)}if(!(r&p)){var x=I&&v.call(e,"__wrapped__"),R=k&&v.call(t,"__wrapped__");if(x||R){var B=x?e.value():e,N=R?t.value():t;_||(_=new n);return w(B,N,r,b,_)}}if(!T){return false}_||(_=new n);return o(e,t,r,b,w,_)}e.exports=baseIsEqualDeep},43991:(e,t,r)=>{var n=r(39336),i=r(64936);var s="[object Map]";function baseIsMap(e){return i(e)&&n(e)==s}e.exports=baseIsMap},2595:(e,t,r)=>{var n=r(12165),i=r(27388),s=r(54238),o=r(55485);var a=/[\\^$.*+?()[\]{}|]/g;var c=/^\[object .+?Constructor\]$/;var u=Function.prototype,d=Object.prototype;var p=u.toString;var m=d.hasOwnProperty;var y=RegExp("^"+p.call(m).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){if(!s(e)||i(e)){return false}var t=n(e)?y:c;return t.test(o(e))}e.exports=baseIsNative},14820:(e,t,r)=>{var n=r(39336),i=r(64936);var s="[object Set]";function baseIsSet(e){return i(e)&&n(e)==s}e.exports=baseIsSet},34389:(e,t,r)=>{var n=r(55361),i=r(94164),s=r(64936);var o="[object Arguments]",a="[object Array]",c="[object Boolean]",u="[object Date]",d="[object Error]",p="[object Function]",m="[object Map]",y="[object Number]",g="[object Object]",b="[object RegExp]",v="[object Set]",w="[object String]",_="[object WeakMap]";var C="[object ArrayBuffer]",P="[object DataView]",O="[object Float32Array]",E="[object Float64Array]",I="[object Int8Array]",k="[object Int16Array]",T="[object Int32Array]",x="[object Uint8Array]",R="[object Uint8ClampedArray]",B="[object Uint16Array]",N="[object Uint32Array]";var j={};j[O]=j[E]=j[I]=j[k]=j[T]=j[x]=j[R]=j[B]=j[N]=true;j[o]=j[a]=j[C]=j[c]=j[P]=j[u]=j[d]=j[p]=j[m]=j[y]=j[g]=j[b]=j[v]=j[w]=j[_]=false;function baseIsTypedArray(e){return s(e)&&i(e.length)&&!!j[n(e)]}e.exports=baseIsTypedArray},54882:(e,t,r)=>{var n=r(66289),i=r(32323);var s=Object.prototype;var o=s.hasOwnProperty;function baseKeys(e){if(!n(e)){return i(e)}var t=[];for(var r in Object(e)){if(o.call(e,r)&&r!="constructor"){t.push(r)}}return t}e.exports=baseKeys},79832:(e,t,r)=>{var n=r(54238),i=r(66289),s=r(36677);var o=Object.prototype;var a=o.hasOwnProperty;function baseKeysIn(e){if(!n(e)){return s(e)}var t=i(e),r=[];for(var o in e){if(!(o=="constructor"&&(t||!a.call(e,o)))){r.push(o)}}return r}e.exports=baseKeysIn},20710:(e,t,r)=>{var n=r(80912),i=r(42613),s=r(90918),o=r(57713),a=r(54238),c=r(96610),u=r(68478);function baseMerge(e,t,r,d,p){if(e===t){return}s(t,(function(s,c){p||(p=new n);if(a(s)){o(e,t,c,r,baseMerge,d,p)}else{var m=d?d(u(e,c),s,c+"",e,t,p):undefined;if(m===undefined){m=s}i(e,c,m)}}),c)}e.exports=baseMerge},57713:(e,t,r)=>{var n=r(42613),i=r(18703),s=r(85943),o=r(35419),a=r(49006),c=r(26527),u=r(48820),d=r(95675),p=r(38876),m=r(12165),y=r(54238),g=r(8081),b=r(89512),v=r(68478),w=r(26210);function baseMergeDeep(e,t,r,_,C,P,O){var E=v(e,r),I=v(t,r),k=O.get(I);if(k){n(e,r,k);return}var T=P?P(E,I,r+"",e,t,O):undefined;var x=T===undefined;if(x){var R=u(I),B=!R&&p(I),N=!R&&!B&&b(I);T=I;if(R||B||N){if(u(E)){T=E}else if(d(E)){T=o(E)}else if(B){x=false;T=i(I,true)}else if(N){x=false;T=s(I,true)}else{T=[]}}else if(g(I)||c(I)){T=E;if(c(E)){T=w(E)}else if(!y(E)||m(E)){T=a(I)}}else{x=false}}if(x){O.set(I,T);C(T,I,_,P,O);O["delete"](I)}n(e,r,T)}e.exports=baseMergeDeep},4453:e=>{var t=Math.ceil,r=Math.max;function baseRange(e,n,i,s){var o=-1,a=r(t((n-e)/(i||1)),0),c=Array(a);while(a--){c[s?a:++o]=e;e+=i}return c}e.exports=baseRange},4784:(e,t,r)=>{var n=r(30665),i=r(27506),s=r(65468);function baseRest(e,t){return s(i(e,t,n),e+"")}e.exports=baseRest},28328:(e,t,r)=>{var n=r(62693),i=r(56289),s=r(30665);var o=!i?s:function(e,t){return i(e,"toString",{configurable:true,enumerable:false,value:n(t),writable:true})};e.exports=o},55785:e=>{function baseTimes(e,t){var r=-1,n=Array(e);while(++r<e){n[r]=t(r)}return n}e.exports=baseTimes},34685:(e,t,r)=>{var n=r(27108);var i=/^\s+/;function baseTrim(e){return e?e.slice(0,n(e)+1).replace(i,""):e}e.exports=baseTrim},14557:e=>{function baseUnary(e){return function(t){return e(t)}}e.exports=baseUnary},94085:e=>{function cacheHas(e,t){return e.has(t)}e.exports=cacheHas},14916:(e,t,r)=>{var n=r(30665);function castFunction(e){return typeof e=="function"?e:n}e.exports=castFunction},34704:(e,t,r)=>{var n=r(83477);function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);new n(t).set(new n(e));return t}e.exports=cloneArrayBuffer},18703:(e,t,r)=>{e=r.nmd(e);var n=r(32800);var i=true&&t&&!t.nodeType&&t;var s=i&&"object"=="object"&&e&&!e.nodeType&&e;var o=s&&s.exports===i;var a=o?n.Buffer:undefined,c=a?a.allocUnsafe:undefined;function cloneBuffer(e,t){if(t){return e.slice()}var r=e.length,n=c?c(r):new e.constructor(r);e.copy(n);return n}e.exports=cloneBuffer},3479:(e,t,r)=>{var n=r(34704);function cloneDataView(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}e.exports=cloneDataView},72584:e=>{var t=/\w*$/;function cloneRegExp(e){var r=new e.constructor(e.source,t.exec(e));r.lastIndex=e.lastIndex;return r}e.exports=cloneRegExp},5606:(e,t,r)=>{var n=r(22568);var i=n?n.prototype:undefined,s=i?i.valueOf:undefined;function cloneSymbol(e){return s?Object(s.call(e)):{}}e.exports=cloneSymbol},85943:(e,t,r)=>{var n=r(34704);function cloneTypedArray(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}e.exports=cloneTypedArray},35419:e=>{function copyArray(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n){t[r]=e[r]}return t}e.exports=copyArray},72423:(e,t,r)=>{var n=r(73341),i=r(41849);function copyObject(e,t,r,s){var o=!r;r||(r={});var a=-1,c=t.length;while(++a<c){var u=t[a];var d=s?s(r[u],e[u],u,r,e):undefined;if(d===undefined){d=e[u]}if(o){i(r,u,d)}else{n(r,u,d)}}return r}e.exports=copyObject},20926:(e,t,r)=>{var n=r(72423),i=r(83148);function copySymbols(e,t){return n(e,i(e),t)}e.exports=copySymbols},11460:(e,t,r)=>{var n=r(72423),i=r(13691);function copySymbolsIn(e,t){return n(e,i(e),t)}e.exports=copySymbolsIn},27645:(e,t,r)=>{var n=r(32800);var i=n["__core-js_shared__"];e.exports=i},93799:(e,t,r)=>{var n=r(4784),i=r(68602);function createAssigner(e){return n((function(t,r){var n=-1,s=r.length,o=s>1?r[s-1]:undefined,a=s>2?r[2]:undefined;o=e.length>3&&typeof o=="function"?(s--,o):undefined;if(a&&i(r[0],r[1],a)){o=s<3?undefined:o;s=1}t=Object(t);while(++n<s){var c=r[n];if(c){e(t,c,n,o)}}return t}))}e.exports=createAssigner},95803:e=>{function createBaseFor(e){return function(t,r,n){var i=-1,s=Object(t),o=n(t),a=o.length;while(a--){var c=o[e?a:++i];if(r(s[c],c,s)===false){break}}return t}}e.exports=createBaseFor},5128:(e,t,r)=>{var n=r(4453),i=r(68602),s=r(83150);function createRange(e){return function(t,r,o){if(o&&typeof o!="number"&&i(t,r,o)){r=o=undefined}t=s(t);if(r===undefined){r=t;t=0}else{r=s(r)}o=o===undefined?t<r?1:-1:s(o);return n(t,r,o,e)}}e.exports=createRange},56289:(e,t,r)=>{var n=r(3275);var i=function(){try{var e=n(Object,"defineProperty");e({},"",{});return e}catch(e){}}();e.exports=i},41857:(e,t,r)=>{var n=r(35640),i=r(9818),s=r(94085);var o=1,a=2;function equalArrays(e,t,r,c,u,d){var p=r&o,m=e.length,y=t.length;if(m!=y&&!(p&&y>m)){return false}var g=d.get(e);var b=d.get(t);if(g&&b){return g==t&&b==e}var v=-1,w=true,_=r&a?new n:undefined;d.set(e,t);d.set(t,e);while(++v<m){var C=e[v],P=t[v];if(c){var O=p?c(P,C,v,t,e,d):c(C,P,v,e,t,d)}if(O!==undefined){if(O){continue}w=false;break}if(_){if(!i(t,(function(e,t){if(!s(_,t)&&(C===e||u(C,e,r,c,d))){return _.push(t)}}))){w=false;break}}else if(!(C===P||u(C,P,r,c,d))){w=false;break}}d["delete"](e);d["delete"](t);return w}e.exports=equalArrays},5176:(e,t,r)=>{var n=r(22568),i=r(83477),s=r(1498),o=r(41857),a=r(28704),c=r(83654);var u=1,d=2;var p="[object Boolean]",m="[object Date]",y="[object Error]",g="[object Map]",b="[object Number]",v="[object RegExp]",w="[object Set]",_="[object String]",C="[object Symbol]";var P="[object ArrayBuffer]",O="[object DataView]";var E=n?n.prototype:undefined,I=E?E.valueOf:undefined;function equalByTag(e,t,r,n,E,k,T){switch(r){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset){return false}e=e.buffer;t=t.buffer;case P:if(e.byteLength!=t.byteLength||!k(new i(e),new i(t))){return false}return true;case p:case m:case b:return s(+e,+t);case y:return e.name==t.name&&e.message==t.message;case v:case _:return e==t+"";case g:var x=a;case w:var R=n&u;x||(x=c);if(e.size!=t.size&&!R){return false}var B=T.get(e);if(B){return B==t}n|=d;T.set(e,t);var N=o(x(e),x(t),n,E,k,T);T["delete"](e);return N;case C:if(I){return I.call(e)==I.call(t)}}return false}e.exports=equalByTag},77928:(e,t,r)=>{var n=r(70408);var i=1;var s=Object.prototype;var o=s.hasOwnProperty;function equalObjects(e,t,r,s,a,c){var u=r&i,d=n(e),p=d.length,m=n(t),y=m.length;if(p!=y&&!u){return false}var g=p;while(g--){var b=d[g];if(!(u?b in t:o.call(t,b))){return false}}var v=c.get(e);var w=c.get(t);if(v&&w){return v==t&&w==e}var _=true;c.set(e,t);c.set(t,e);var C=u;while(++g<p){b=d[g];var P=e[b],O=t[b];if(s){var E=u?s(O,P,b,t,e,c):s(P,O,b,e,t,c)}if(!(E===undefined?P===O||a(P,O,r,s,c):E)){_=false;break}C||(C=b=="constructor")}if(_&&!C){var I=e.constructor,k=t.constructor;if(I!=k&&("constructor"in e&&"constructor"in t)&&!(typeof I=="function"&&I instanceof I&&typeof k=="function"&&k instanceof k)){_=false}}c["delete"](e);c["delete"](t);return _}e.exports=equalObjects},20864:e=>{var t=typeof global=="object"&&global&&global.Object===Object&&global;e.exports=t},70408:(e,t,r)=>{var n=r(32716),i=r(83148),s=r(25260);function getAllKeys(e){return n(e,s,i)}e.exports=getAllKeys},6916:(e,t,r)=>{var n=r(32716),i=r(13691),s=r(96610);function getAllKeysIn(e){return n(e,s,i)}e.exports=getAllKeysIn},49207:(e,t,r)=>{var n=r(66400);function getMapData(e,t){var r=e.__data__;return n(t)?r[typeof t=="string"?"string":"hash"]:r.map}e.exports=getMapData},3275:(e,t,r)=>{var n=r(2595),i=r(39749);function getNative(e,t){var r=i(e,t);return n(r)?r:undefined}e.exports=getNative},44115:(e,t,r)=>{var n=r(69461);var i=n(Object.getPrototypeOf,Object);e.exports=i},96557:(e,t,r)=>{var n=r(22568);var i=Object.prototype;var s=i.hasOwnProperty;var o=i.toString;var a=n?n.toStringTag:undefined;function getRawTag(e){var t=s.call(e,a),r=e[a];try{e[a]=undefined;var n=true}catch(e){}var i=o.call(e);if(n){if(t){e[a]=r}else{delete e[a]}}return i}e.exports=getRawTag},83148:(e,t,r)=>{var n=r(37019),i=r(39295);var s=Object.prototype;var o=s.propertyIsEnumerable;var a=Object.getOwnPropertySymbols;var c=!a?i:function(e){if(e==null){return[]}e=Object(e);return n(a(e),(function(t){return o.call(e,t)}))};e.exports=c},13691:(e,t,r)=>{var n=r(74986),i=r(44115),s=r(83148),o=r(39295);var a=Object.getOwnPropertySymbols;var c=!a?o:function(e){var t=[];while(e){n(t,s(e));e=i(e)}return t};e.exports=c},39336:(e,t,r)=>{var n=r(76829),i=r(90293),s=r(97789),o=r(62297),a=r(95501),c=r(55361),u=r(55485);var d="[object Map]",p="[object Object]",m="[object Promise]",y="[object Set]",g="[object WeakMap]";var b="[object DataView]";var v=u(n),w=u(i),_=u(s),C=u(o),P=u(a);var O=c;if(n&&O(new n(new ArrayBuffer(1)))!=b||i&&O(new i)!=d||s&&O(s.resolve())!=m||o&&O(new o)!=y||a&&O(new a)!=g){O=function(e){var t=c(e),r=t==p?e.constructor:undefined,n=r?u(r):"";if(n){switch(n){case v:return b;case w:return d;case _:return m;case C:return y;case P:return g}}return t}}e.exports=O},39749:e=>{function getValue(e,t){return e==null?undefined:e[t]}e.exports=getValue},31777:(e,t,r)=>{var n=r(12070);function hashClear(){this.__data__=n?n(null):{};this.size=0}e.exports=hashClear},93390:e=>{function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=hashDelete},77911:(e,t,r)=>{var n=r(12070);var i="__lodash_hash_undefined__";var s=Object.prototype;var o=s.hasOwnProperty;function hashGet(e){var t=this.__data__;if(n){var r=t[e];return r===i?undefined:r}return o.call(t,e)?t[e]:undefined}e.exports=hashGet},53894:(e,t,r)=>{var n=r(12070);var i=Object.prototype;var s=i.hasOwnProperty;function hashHas(e){var t=this.__data__;return n?t[e]!==undefined:s.call(t,e)}e.exports=hashHas},76334:(e,t,r)=>{var n=r(12070);var i="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;this.size+=this.has(e)?0:1;r[e]=n&&t===undefined?i:t;return this}e.exports=hashSet},41788:e=>{var t=Object.prototype;var r=t.hasOwnProperty;function initCloneArray(e){var t=e.length,n=new e.constructor(t);if(t&&typeof e[0]=="string"&&r.call(e,"index")){n.index=e.index;n.input=e.input}return n}e.exports=initCloneArray},54345:(e,t,r)=>{var n=r(34704),i=r(3479),s=r(72584),o=r(5606),a=r(85943);var c="[object Boolean]",u="[object Date]",d="[object Map]",p="[object Number]",m="[object RegExp]",y="[object Set]",g="[object String]",b="[object Symbol]";var v="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",C="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",k="[object Uint8ClampedArray]",T="[object Uint16Array]",x="[object Uint32Array]";function initCloneByTag(e,t,r){var R=e.constructor;switch(t){case v:return n(e);case c:case u:return new R(+e);case w:return i(e,r);case _:case C:case P:case O:case E:case I:case k:case T:case x:return a(e,r);case d:return new R;case p:case g:return new R(e);case m:return s(e);case y:return new R;case b:return o(e)}}e.exports=initCloneByTag},49006:(e,t,r)=>{var n=r(98048),i=r(44115),s=r(66289);function initCloneObject(e){return typeof e.constructor=="function"&&!s(e)?n(i(e)):{}}e.exports=initCloneObject},23723:e=>{var t=9007199254740991;var r=/^(?:0|[1-9]\d*)$/;function isIndex(e,n){var i=typeof e;n=n==null?t:n;return!!n&&(i=="number"||i!="symbol"&&r.test(e))&&(e>-1&&e%1==0&&e<n)}e.exports=isIndex},68602:(e,t,r)=>{var n=r(1498),i=r(46476),s=r(23723),o=r(54238);function isIterateeCall(e,t,r){if(!o(r)){return false}var a=typeof t;if(a=="number"?i(r)&&s(t,r.length):a=="string"&&t in r){return n(r[t],e)}return false}e.exports=isIterateeCall},66400:e=>{function isKeyable(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}e.exports=isKeyable},27388:(e,t,r)=>{var n=r(27645);var i=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!i&&i in e}e.exports=isMasked},66289:e=>{var t=Object.prototype;function isPrototype(e){var r=e&&e.constructor,n=typeof r=="function"&&r.prototype||t;return e===n}e.exports=isPrototype},61658:e=>{function listCacheClear(){this.__data__=[];this.size=0}e.exports=listCacheClear},66560:(e,t,r)=>{var n=r(75553);var i=Array.prototype;var s=i.splice;function listCacheDelete(e){var t=this.__data__,r=n(t,e);if(r<0){return false}var i=t.length-1;if(r==i){t.pop()}else{s.call(t,r,1)}--this.size;return true}e.exports=listCacheDelete},98981:(e,t,r)=>{var n=r(75553);function listCacheGet(e){var t=this.__data__,r=n(t,e);return r<0?undefined:t[r][1]}e.exports=listCacheGet},84980:(e,t,r)=>{var n=r(75553);function listCacheHas(e){return n(this.__data__,e)>-1}e.exports=listCacheHas},93740:(e,t,r)=>{var n=r(75553);function listCacheSet(e,t){var r=this.__data__,i=n(r,e);if(i<0){++this.size;r.push([e,t])}else{r[i][1]=t}return this}e.exports=listCacheSet},56263:(e,t,r)=>{var n=r(6261),i=r(70219),s=r(90293);function mapCacheClear(){this.size=0;this.__data__={hash:new n,map:new(s||i),string:new n}}e.exports=mapCacheClear},19426:(e,t,r)=>{var n=r(49207);function mapCacheDelete(e){var t=n(this,e)["delete"](e);this.size-=t?1:0;return t}e.exports=mapCacheDelete},98022:(e,t,r)=>{var n=r(49207);function mapCacheGet(e){return n(this,e).get(e)}e.exports=mapCacheGet},43728:(e,t,r)=>{var n=r(49207);function mapCacheHas(e){return n(this,e).has(e)}e.exports=mapCacheHas},60981:(e,t,r)=>{var n=r(49207);function mapCacheSet(e,t){var r=n(this,e),i=r.size;r.set(e,t);this.size+=r.size==i?0:1;return this}e.exports=mapCacheSet},28704:e=>{function mapToArray(e){var t=-1,r=Array(e.size);e.forEach((function(e,n){r[++t]=[n,e]}));return r}e.exports=mapToArray},12070:(e,t,r)=>{var n=r(3275);var i=n(Object,"create");e.exports=i},32323:(e,t,r)=>{var n=r(69461);var i=n(Object.keys,Object);e.exports=i},36677:e=>{function nativeKeysIn(e){var t=[];if(e!=null){for(var r in Object(e)){t.push(r)}}return t}e.exports=nativeKeysIn},88623:(e,t,r)=>{e=r.nmd(e);var n=r(20864);var i=true&&t&&!t.nodeType&&t;var s=i&&"object"=="object"&&e&&!e.nodeType&&e;var o=s&&s.exports===i;var a=o&&n.process;var c=function(){try{var e=s&&s.require&&s.require("util").types;if(e){return e}return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=c},80818:e=>{var t=Object.prototype;var r=t.toString;function objectToString(e){return r.call(e)}e.exports=objectToString},69461:e=>{function overArg(e,t){return function(r){return e(t(r))}}e.exports=overArg},27506:(e,t,r)=>{var n=r(26119);var i=Math.max;function overRest(e,t,r){t=i(t===undefined?e.length-1:t,0);return function(){var s=arguments,o=-1,a=i(s.length-t,0),c=Array(a);while(++o<a){c[o]=s[t+o]}o=-1;var u=Array(t+1);while(++o<t){u[o]=s[o]}u[t]=r(c);return n(e,this,u)}}e.exports=overRest},32800:(e,t,r)=>{var n=r(20864);var i=typeof self=="object"&&self&&self.Object===Object&&self;var s=n||i||Function("return this")();e.exports=s},68478:e=>{function safeGet(e,t){if(t==="constructor"&&typeof e[t]==="function"){return}if(t=="__proto__"){return}return e[t]}e.exports=safeGet},17662:e=>{var t="__lodash_hash_undefined__";function setCacheAdd(e){this.__data__.set(e,t);return this}e.exports=setCacheAdd},79541:e=>{function setCacheHas(e){return this.__data__.has(e)}e.exports=setCacheHas},83654:e=>{function setToArray(e){var t=-1,r=Array(e.size);e.forEach((function(e){r[++t]=e}));return r}e.exports=setToArray},65468:(e,t,r)=>{var n=r(28328),i=r(80868);var s=i(n);e.exports=s},80868:e=>{var t=800,r=16;var n=Date.now;function shortOut(e){var i=0,s=0;return function(){var o=n(),a=r-(o-s);s=o;if(a>0){if(++i>=t){return arguments[0]}}else{i=0}return e.apply(undefined,arguments)}}e.exports=shortOut},96256:(e,t,r)=>{var n=r(70219);function stackClear(){this.__data__=new n;this.size=0}e.exports=stackClear},20989:e=>{function stackDelete(e){var t=this.__data__,r=t["delete"](e);this.size=t.size;return r}e.exports=stackDelete},41673:e=>{function stackGet(e){return this.__data__.get(e)}e.exports=stackGet},62975:e=>{function stackHas(e){return this.__data__.has(e)}e.exports=stackHas},39640:(e,t,r)=>{var n=r(70219),i=r(90293),s=r(57765);var o=200;function stackSet(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!i||a.length<o-1){a.push([e,t]);this.size=++r.size;return this}r=this.__data__=new s(a)}r.set(e,t);this.size=r.size;return this}e.exports=stackSet},55485:e=>{var t=Function.prototype;var r=t.toString;function toSource(e){if(e!=null){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}e.exports=toSource},27108:e=>{var t=/\s/;function trimmedEndIndex(e){var r=e.length;while(r--&&t.test(e.charAt(r))){}return r}e.exports=trimmedEndIndex},95122:(e,t,r)=>{var n=r(28191);var i=1,s=4;function cloneDeep(e){return n(e,i|s)}e.exports=cloneDeep},62693:e=>{function constant(e){return function(){return e}}e.exports=constant},1498:e=>{function eq(e,t){return e===t||e!==e&&t!==t}e.exports=eq},30665:e=>{function identity(e){return e}e.exports=identity},26527:(e,t,r)=>{var n=r(38509),i=r(64936);var s=Object.prototype;var o=s.hasOwnProperty;var a=s.propertyIsEnumerable;var c=n(function(){return arguments}())?n:function(e){return i(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},48820:e=>{var t=Array.isArray;e.exports=t},46476:(e,t,r)=>{var n=r(12165),i=r(94164);function isArrayLike(e){return e!=null&&i(e.length)&&!n(e)}e.exports=isArrayLike},95675:(e,t,r)=>{var n=r(46476),i=r(64936);function isArrayLikeObject(e){return i(e)&&n(e)}e.exports=isArrayLikeObject},38876:(e,t,r)=>{e=r.nmd(e);var n=r(32800),i=r(62082);var s=true&&t&&!t.nodeType&&t;var o=s&&"object"=="object"&&e&&!e.nodeType&&e;var a=o&&o.exports===s;var c=a?n.Buffer:undefined;var u=c?c.isBuffer:undefined;var d=u||i;e.exports=d},54539:(e,t,r)=>{var n=r(69580);function isEqual(e,t){return n(e,t)}e.exports=isEqual},12165:(e,t,r)=>{var n=r(55361),i=r(54238);var s="[object AsyncFunction]",o="[object Function]",a="[object GeneratorFunction]",c="[object Proxy]";function isFunction(e){if(!i(e)){return false}var t=n(e);return t==o||t==a||t==s||t==c}e.exports=isFunction},94164:e=>{var t=9007199254740991;function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=t}e.exports=isLength},32698:(e,t,r)=>{var n=r(43991),i=r(14557),s=r(88623);var o=s&&s.isMap;var a=o?i(o):n;e.exports=a},54238:e=>{function isObject(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}e.exports=isObject},64936:e=>{function isObjectLike(e){return e!=null&&typeof e=="object"}e.exports=isObjectLike},8081:(e,t,r)=>{var n=r(55361),i=r(44115),s=r(64936);var o="[object Object]";var a=Function.prototype,c=Object.prototype;var u=a.toString;var d=c.hasOwnProperty;var p=u.call(Object);function isPlainObject(e){if(!s(e)||n(e)!=o){return false}var t=i(e);if(t===null){return true}var r=d.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&u.call(r)==p}e.exports=isPlainObject},67360:(e,t,r)=>{var n=r(14820),i=r(14557),s=r(88623);var o=s&&s.isSet;var a=o?i(o):n;e.exports=a},43610:(e,t,r)=>{var n=r(55361),i=r(64936);var s="[object Symbol]";function isSymbol(e){return typeof e=="symbol"||i(e)&&n(e)==s}e.exports=isSymbol},89512:(e,t,r)=>{var n=r(34389),i=r(14557),s=r(88623);var o=s&&s.isTypedArray;var a=o?i(o):n;e.exports=a},25260:(e,t,r)=>{var n=r(52367),i=r(54882),s=r(46476);function keys(e){return s(e)?n(e):i(e)}e.exports=keys},96610:(e,t,r)=>{var n=r(52367),i=r(79832),s=r(46476);function keysIn(e){return s(e)?n(e,true):i(e)}e.exports=keysIn},625:(e,t,r)=>{var n=r(20710),i=r(93799);var s=i((function(e,t,r,i){n(e,t,r,i)}));e.exports=s},46611:(e,t,r)=>{var n=r(5128);var i=n();e.exports=i},39295:e=>{function stubArray(){return[]}e.exports=stubArray},62082:e=>{function stubFalse(){return false}e.exports=stubFalse},51486:(e,t,r)=>{var n=r(55785),i=r(14916),s=r(14985);var o=9007199254740991;var a=4294967295;var c=Math.min;function times(e,t){e=s(e);if(e<1||e>o){return[]}var r=a,u=c(e,a);t=i(t);e-=a;var d=n(u,t);while(++r<e){t(r)}return d}e.exports=times},83150:(e,t,r)=>{var n=r(56998);var i=1/0,s=17976931348623157e292;function toFinite(e){if(!e){return e===0?e:0}e=n(e);if(e===i||e===-i){var t=e<0?-1:1;return t*s}return e===e?e:0}e.exports=toFinite},14985:(e,t,r)=>{var n=r(83150);function toInteger(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}e.exports=toInteger},56998:(e,t,r)=>{var n=r(34685),i=r(54238),s=r(43610);var o=0/0;var a=/^[-+]0x[0-9a-f]+$/i;var c=/^0b[01]+$/i;var u=/^0o[0-7]+$/i;var d=parseInt;function toNumber(e){if(typeof e=="number"){return e}if(s(e)){return o}if(i(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=i(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=n(e);var r=c.test(e);return r||u.test(e)?d(e.slice(2),r?2:8):a.test(e)?o:+e}e.exports=toNumber},26210:(e,t,r)=>{var n=r(72423),i=r(96610);function toPlainObject(e){return n(e,i(e))}e.exports=toPlainObject},50905:(e,t,r)=>{"use strict";const{PassThrough:n}=r(68265);e.exports=function(){var e=[];var t=new n({objectMode:true});t.setMaxListeners(0);t.add=add;t.isEmpty=isEmpty;t.on("unpipe",remove);Array.prototype.slice.call(arguments).forEach(add);return t;function add(r){if(Array.isArray(r)){r.forEach(add);return this}e.push(r);r.once("end",remove.bind(null,r));r.once("error",t.emit.bind(t,"error"));r.pipe(t,{end:false});return this}function isEmpty(){return e.length==0}function remove(r){e=e.filter((function(e){return e!==r}));if(!e.length&&t.readable){t.end()}}}},30209:e=>{"use strict";const mimicFn=(e,t)=>{for(const r of Reflect.ownKeys(t)){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}return e};e.exports=mimicFn;e.exports["default"]=mimicFn},31560:e=>{var t=1e3;var r=t*60;var n=r*60;var i=n*24;var s=i*7;var o=i*365.25;e.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return parse(e)}else if(r==="number"&&isFinite(e)){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a){return}var c=parseFloat(a[1]);var u=(a[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return undefined}}function fmtShort(e){var s=Math.abs(e);if(s>=i){return Math.round(e/i)+"d"}if(s>=n){return Math.round(e/n)+"h"}if(s>=r){return Math.round(e/r)+"m"}if(s>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){var s=Math.abs(e);if(s>=i){return plural(e,s,i,"day")}if(s>=n){return plural(e,s,n,"hour")}if(s>=r){return plural(e,s,r,"minute")}if(s>=t){return plural(e,s,t,"second")}return e+" ms"}function plural(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}},76098:(e,t,r)=>{var n=r(1211);var i=r(71891);var s=r(81515);var o=r(82361);var a=r(22037);var noop=function(){};e.exports=function(e){if(!e)e={};var t=new o.EventEmitter;var r=typeof e.port==="number"?e.port:5353;var a=e.type||"udp4";var c=e.ip||e.host||(a==="udp4"?"224.0.0.251":null);var u={address:c,port:r};var d={};var p=false;var m=null;if(a==="udp6"&&(!c||!e.interface)){throw new Error("For IPv6 multicast you must specify `ip` and `interface`")}var y=e.socket||i.createSocket({type:a,reuseAddr:e.reuseAddr!==false,toString:function(){return a}});y.on("error",(function(e){if(e.code==="EACCES"||e.code==="EADDRINUSE")t.emit("error",e);else t.emit("warning",e)}));y.on("message",(function(e,r){try{e=n.decode(e)}catch(e){t.emit("warning",e);return}t.emit("packet",e,r);if(e.type==="query")t.emit("query",e,r);if(e.type==="response")t.emit("response",e,r)}));y.on("listening",(function(){if(!r)r=u.port=y.address().port;if(e.multicast!==false){t.update();m=setInterval(t.update,5e3);y.setMulticastTTL(e.ttl||255);y.setMulticastLoopback(e.loopback!==false)}}));var g=s((function(t){if(!r||e.bind===false)return t(null);y.once("error",t);y.bind(r,e.bind||e.interface,(function(){y.removeListener("error",t);t(null)}))}));g((function(e){if(e)return t.emit("error",e);t.emit("ready")}));t.send=function(e,r,i){if(typeof r==="function")return t.send(e,null,r);if(!i)i=noop;if(!r)r=u;else if(!r.host&&!r.address)r.address=u.address;g(onbind);function onbind(t){if(p)return i();if(t)return i(t);var s=n.encode(e);y.send(s,0,s.length,r.port,r.address||r.host,i)}};t.response=t.respond=function(e,r,i){if(Array.isArray(e))e={answers:e};e.type="response";e.flags=(e.flags||0)|n.AUTHORITATIVE_ANSWER;t.send(e,r,i)};t.query=function(e,r,n,i){if(typeof r==="function")return t.query(e,null,null,r);if(typeof r==="object"&&r&&r.port)return t.query(e,null,r,n);if(typeof n==="function")return t.query(e,r,null,n);if(!i)i=noop;if(typeof e==="string")e=[{name:e,type:r||"ANY"}];if(Array.isArray(e))e={type:"query",questions:e};e.type="query";t.send(e,n,i)};t.destroy=function(e){if(!e)e=noop;if(p)return process.nextTick(e);p=true;clearInterval(m);for(var t in d){try{y.dropMembership(c,t)}catch(e){}}d={};y.close(e)};t.update=function(){var r=e.interface?[].concat(e.interface):allInterfaces();var n=false;for(var i=0;i<r.length;i++){var s=r[i];if(d[s])continue;try{y.addMembership(c,s);d[s]=true;n=true}catch(e){t.emit("warning",e)}}if(n){if(y.setMulticastInterface){try{y.setMulticastInterface(e.interface||defaultInterface())}catch(e){t.emit("warning",e)}}t.emit("networkInterface")}};return t};function defaultInterface(){var e=a.networkInterfaces();var t=Object.keys(e);for(var r=0;r<t.length;r++){var n=e[t[r]];for(var i=0;i<n.length;i++){var s=n[i];if(isIPv4(s.family)&&!s.internal){if(a.platform()==="darwin"&&t[r]==="en0")return s.address;return"0.0.0.0"}}}return"127.0.0.1"}function allInterfaces(){var e=a.networkInterfaces();var t=Object.keys(e);var r=[];for(var n=0;n<t.length;n++){var i=e[t[n]];for(var s=0;s<i.length;s++){var o=i[s];if(isIPv4(o.family)){r.push(o.address);break}}}return r}function isIPv4(e){return e===4||e==="IPv4"}},86842:(e,t,r)=>{"use strict";const n=r(36933);const i=process.hrtime();const s=(new Date).getTime();function nanoseconds(){let e=process.hrtime(i);return n(s).times(1e6).add(n(e[0]).times(1e9).plus(e[1])).toString()}function microseconds(){return n(nanoseconds()).divide(1e3).toString()}e.exports=nanoseconds;e.exports.microseconds=e.exports.micro=microseconds},26434:(e,t,r)=>{"use strict";const n=r(71017);const i=r(24658);const npmRunPath=e=>{e={cwd:process.cwd(),path:process.env[i()],execPath:process.execPath,...e};let t;let r=n.resolve(e.cwd);const s=[];while(t!==r){s.push(n.join(r,"node_modules/.bin"));t=r;r=n.resolve(r,"..")}const o=n.resolve(e.cwd,e.execPath,"..");s.push(o);return s.concat(e.path).join(n.delimiter)};e.exports=npmRunPath;e.exports["default"]=npmRunPath;e.exports.env=t=>{t={env:process.env,...t};const r={...t.env};const n=i({env:r});t.path=r[n];r[n]=e.exports(t);return r}},99404:(e,t,r)=>{"use strict";const n=r(30209);const i=new WeakMap;const onetime=(e,t={})=>{if(typeof e!=="function"){throw new TypeError("Expected a function")}let r;let s=0;const o=e.displayName||e.name||"<anonymous>";const onetime=function(...n){i.set(onetime,++s);if(s===1){r=e.apply(this,n);e=null}else if(t.throw===true){throw new Error(`Function \`${o}\` can only be called once`)}return r};n(onetime,e);i.set(onetime,s);return onetime};e.exports=onetime;e.exports["default"]=onetime;e.exports.callCount=e=>{if(!i.has(e)){throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`)}return i.get(e)}},54608:e=>{"use strict";class CancelError extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return true}}class PCancelable{static fn(e){return(...t)=>new PCancelable(((r,n,i)=>{t.push(i);e(...t).then(r,n)}))}constructor(e){this._cancelHandlers=[];this._isPending=true;this._isCanceled=false;this._rejectOnCancel=true;this._promise=new Promise(((t,r)=>{this._reject=r;const onResolve=e=>{if(!this._isCanceled||!onCancel.shouldReject){this._isPending=false;t(e)}};const onReject=e=>{this._isPending=false;r(e)};const onCancel=e=>{if(!this._isPending){throw new Error("The `onCancel` handler was attached after the promise settled.")}this._cancelHandlers.push(e)};Object.defineProperties(onCancel,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}});return e(onResolve,onReject,onCancel)}))}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!this._isPending||this._isCanceled){return}this._isCanceled=true;if(this._cancelHandlers.length>0){try{for(const e of this._cancelHandlers){e()}}catch(e){this._reject(e);return}}if(this._rejectOnCancel){this._reject(new CancelError(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(PCancelable.prototype,Promise.prototype);e.exports=PCancelable;e.exports.CancelError=CancelError},58175:(e,t)=>{t.encode=function(e){var t="";for(var r in e){if(e.hasOwnProperty(r)){if(t.length)t+="&";t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r])}}return t};t.decode=function(e){var t={};var r=e.split("&");for(var n=0,i=r.length;n<i;n++){var s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}},81505:e=>{var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function parseuri(e){var n=e,i=e.indexOf("["),s=e.indexOf("]");if(i!=-1&&s!=-1){e=e.substring(0,i)+e.substring(i,s).replace(/:/g,";")+e.substring(s,e.length)}var o=t.exec(e||""),a={},c=14;while(c--){a[r[c]]=o[c]||""}if(i!=-1&&s!=-1){a.source=n;a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":");a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":");a.ipv6uri=true}a.pathNames=pathNames(a,a["path"]);a.queryKey=queryKey(a,a["query"]);return a};function pathNames(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");if(t.substr(0,1)=="/"||t.length===0){n.splice(0,1)}if(t.substr(t.length-1,1)=="/"){n.splice(n.length-1,1)}return n}function queryKey(e,t){var r={};t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){if(t){r[t]=n}}));return r}},24658:e=>{"use strict";const pathKey=(e={})=>{const t=e.env||process.env;const r=e.platform||process.platform;if(r!=="win32"){return"PATH"}return Object.keys(t).reverse().find((e=>e.toUpperCase()==="PATH"))||"Path"};e.exports=pathKey;e.exports["default"]=pathKey},5662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Logger=void 0;const n=r(69565);const i="pick-port";class Logger{#z;#$;#G;constructor(e){if(e){this.#z=(0,n.default)(`${i}:${e}`);this.#$=(0,n.default)(`${i}:WARN:${e}`);this.#G=(0,n.default)(`${i}:ERROR:${e}`)}else{this.#z=(0,n.default)(i);this.#$=(0,n.default)(`${i}:WARN`);this.#G=(0,n.default)(`${i}:ERROR`)}this.#z.log=console.info.bind(console);this.#$.log=console.warn.bind(console);this.#G.log=console.error.bind(console)}get debug(){return this.#z}get warn(){return this.#$}get error(){return this.#G}}t.Logger=Logger},47195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.pickPort=void 0;const n=r(87503);const i=r(6005);const s=r(5662);const o=r(36953);const a=r(25159);const c=new s.Logger;const u=new Set;let d=undefined;async function pickPort({type:e,ip:t="0.0.0.0",minPort:r=1e4,maxPort:s=2e4,reserveTimeout:u=5}){c.debug(`pickPort() [type:${e}, ip:${t}, minPort:${r}, maxPort:${s}, reserveTimeout:${u}]`);e=e.toLowerCase();const p=n.isIP(t);if(e!=="udp"&&e!=="tcp"){throw new TypeError("invalid type parameter")}else if(p!==4&&p!==6){throw new TypeError("invalid ip parameter")}else if(typeof r!=="number"||typeof s!=="number"||r>s){throw new TypeError("invalid minPort/maxPort parameter")}else if(typeof u!=="number"){throw new TypeError("invalid reserveTimeout parameter")}if(d!==undefined&&(d<r||d>s)){d=undefined}let m=d??i.randomInt(r,s+1);let y=s-r+1;while(--y>=0){if(++m>s){m=r}const n=generateHash(e,t,m);if(isReserved(n)){continue}reserve(n);try{switch(e){case"tcp":{await(0,o.reserve)(t,m);break}case"udp":{await(0,a.reserve)(t,m,p);break}}c.debug(`pickPort() | got available port [type:${e}, ip:${t}, port:${m}]`);d=m;setTimeout((()=>unreserve(n)),u*1e3);return m}catch(r){unreserve(n);if(r.code==="EADDRINUSE"){c.debug(`pickPort() | port in use [type:${e}, ip:${t}, port:${m}]`);continue}else{c.warn(`pickPort() | unexpected error trying to bind a port [type:${e}, ip:${t}, port:${m}]: ${r}`);throw r}}}c.warn(`pickPort() | no available port in the given port range [type:${e}, ip:${t}]`);throw new Error("no available port in the given port range")}t.pickPort=pickPort;function generateHash(e,t,r){return`${e}:${t}:${r}`}function reserve(e){if(isReserved(e)){throw new Error(`reserve() | hash '${e}' is already reserved`)}u.add(e)}function unreserve(e){if(!isReserved(e)){throw new Error(`unreserve() | hash '${e}' is not reserved`)}u.delete(e)}function isReserved(e){return u.has(e)}},36953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.reserve=void 0;const n=r(87503);async function reserve(e,t){const r=n.createServer();await new Promise(((n,i)=>{r.unref();r.on("error",i);r.listen({host:e,port:t,exclusive:true},(()=>{r.close((()=>n()))}))}))}t.reserve=reserve},25159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.reserve=void 0;const n=r(11215);async function reserve(e,t,r){const i=n.createSocket(r===4?"udp4":"udp6");await new Promise(((r,n)=>{i.unref();i.on("error",n);i.bind({address:e,port:t,exclusive:true},(()=>{i.close((()=>r()))}))}))}t.reserve=reserve},92051:(e,t,r)=>{"use strict";e.exports=r(33288)},42079:(e,t,r)=>{"use strict";e.exports=r(17627)},7954:e=>{"use strict";e.exports=common;var t=/\/|\./;function common(e,r){if(!t.test(e)){e="google/protobuf/"+e+".proto";r={nested:{google:{nested:{protobuf:{nested:r}}}}}}common[e]=r}common("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var r;common("duration",{Duration:r={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});common("timestamp",{Timestamp:r});common("empty",{Empty:{fields:{}}});common("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});common("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});common("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});common.get=function get(e){return common[e]||null}},83025:(e,t,r)=>{"use strict";var n=t;var i=r(9691),s=r(13682);function genValuePartial_fromObject(e,t,r,n){var s=false;if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var o=t.resolvedType.values,a=Object.keys(o),c=0;c<a.length;++c){if(o[a[c]]===t.typeDefault&&!s){e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n);if(!t.repeated)e("break");s=true}e("case%j:",a[c])("case %i:",o[a[c]])("m%s=%j",n,o[a[c]])("break")}e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n)}else{var u=false;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n);break}}return e}n.fromObject=function fromObject(e){var t=e.fieldsArray;var r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),a=s.safeProp(o.name);if(o.map){r("if(d%s){",a)('if(typeof d%s!=="object")',a)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",a)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",a);genValuePartial_fromObject(r,o,n,a+"[ks[i]]")("}")("}")}else if(o.repeated){r("if(d%s){",a)("if(!Array.isArray(d%s))",a)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",a)("for(var i=0;i<d%s.length;++i){",a);genValuePartial_fromObject(r,o,n,a+"[i]")("}")("}")}else{if(!(o.resolvedType instanceof i))r("if(d%s!=null){",a);genValuePartial_fromObject(r,o,n,a);if(!(o.resolvedType instanceof i))r("}")}}return r("return m")};function genValuePartial_toObject(e,t,r,n){if(t.resolvedType){if(t.resolvedType instanceof i)e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n);else e("d%s=types[%i].toObject(m%s,o)",n,r,n)}else{var s=false;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n);break}}return e}n.toObject=function toObject(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}");var n=[],o=[],a=[],c=0;for(;c<t.length;++c)if(!t[c].partOf)(t[c].resolve().repeated?n:t[c].map?o:a).push(t[c]);if(n.length){r("if(o.arrays||o.defaults){");for(c=0;c<n.length;++c)r("d%s=[]",s.safeProp(n[c].name));r("}")}if(o.length){r("if(o.objects||o.defaults){");for(c=0;c<o.length;++c)r("d%s={}",s.safeProp(o[c].name));r("}")}if(a.length){r("if(o.defaults){");for(c=0;c<a.length;++c){var u=a[c],d=s.safeProp(u.name);if(u.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",d,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var p="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",d,p)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,u.typeDefault)}r("}")}var m=false;for(c=0;c<t.length;++c){var u=t[c],y=e._fieldsArray.indexOf(u),d=s.safeProp(u.name);if(u.map){if(!m){m=true;r("var ks2")}r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){");genValuePartial_toObject(r,u,y,d+"[ks2[j]]")("}")}else if(u.repeated){r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d);genValuePartial_toObject(r,u,y,d+"[j]")("}")}else{r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,u.name);genValuePartial_toObject(r,u,y,d);if(u.partOf)r("if(o.oneofs)")("d%s=%j",s.safeProp(u.partOf.name),u.name)}r("}")}return r("return d")}},21710:(e,t,r)=>{"use strict";e.exports=decoder;var n=r(9691),i=r(49621),s=r(13682);function missing(e){return"missing required '"+e.name+"'"}function decoder(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");if(e.group)t("if((t&7)===4)")("break");t("switch(t>>>3){");var r=0;for(;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),a=o.resolvedType instanceof n?"int32":o.type,c="m"+s.safeProp(o.name);t("case %i: {",o.id);if(o.map){t("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos");if(i.defaults[o.keyType]!==undefined)t("k=%j",i.defaults[o.keyType]);else t("k=null");if(i.defaults[a]!==undefined)t("value=%j",i.defaults[a]);else t("value=null");t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:");if(i.basic[a]===undefined)t("value=types[%i].decode(r,r.uint32())",r);else t("value=r.%s()",a);t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}");if(i.long[o.keyType]!==undefined)t('%s[typeof k==="object"?util.longToHash(k):k]=value',c);else t("%s[k]=value",c)}else if(o.repeated){t("if(!(%s&&%s.length))",c,c)("%s=[]",c);if(i.packed[a]!==undefined)t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,a)("}else");if(i.basic[a]===undefined)t(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,r);else t("%s.push(r.%s())",c,a)}else if(i.basic[a]===undefined)t(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,r);else t("%s=r.%s()",c,a);t("break")("}")}t("default:")("r.skipType(t&7)")("break")("}")("}");for(r=0;r<e._fieldsArray.length;++r){var u=e._fieldsArray[r];if(u.required)t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",missing(u))}return t("return m")}},61005:(e,t,r)=>{"use strict";e.exports=encoder;var n=r(9691),i=r(49621),s=r(13682);function genTypePartial(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function encoder(e){var t=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()");var r,o;var a=e.fieldsArray.slice().sort(s.compareFieldsById);for(var r=0;r<a.length;++r){var c=a[r].resolve(),u=e._fieldsArray.indexOf(c),d=c.resolvedType instanceof n?"int32":c.type,p=i.basic[d];o="m"+s.safeProp(c.name);if(c.map){t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",o,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",o)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|i.mapKey[c.keyType],c.keyType);if(p===undefined)t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,o);else t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|p,d,o);t("}")("}")}else if(c.repeated){t("if(%s!=null&&%s.length){",o,o);if(c.packed&&i.packed[d]!==undefined){t("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",o)("w.%s(%s[i])",d,o)("w.ldelim()")}else{t("for(var i=0;i<%s.length;++i)",o);if(p===undefined)genTypePartial(t,c,u,o+"[i]");else t("w.uint32(%i).%s(%s[i])",(c.id<<3|p)>>>0,d,o)}t("}")}else{if(c.optional)t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",o,c.name);if(p===undefined)genTypePartial(t,c,u,o);else t("w.uint32(%i).%s(%s)",(c.id<<3|p)>>>0,d,o)}}return t("return w")}},9691:(e,t,r)=>{"use strict";e.exports=Enum;var n=r(38911);((Enum.prototype=Object.create(n.prototype)).constructor=Enum).className="Enum";var i=r(22552),s=r(13682);function Enum(e,t,r,i,s,o){n.call(this,e,r);if(t&&typeof t!=="object")throw TypeError("values must be an object");this.valuesById={};this.values=Object.create(this.valuesById);this.comment=i;this.comments=s||{};this.valuesOptions=o;this.reserved=undefined;if(t)for(var a=Object.keys(t),c=0;c<a.length;++c)if(typeof t[a[c]]==="number")this.valuesById[this.values[a[c]]=t[a[c]]]=a[c]}Enum.fromJSON=function fromJSON(e,t){var r=new Enum(e,t.values,t.options,t.comment,t.comments);r.reserved=t.reserved;return r};Enum.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])};Enum.prototype.add=function add(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;if(n){if(this.valuesOptions===undefined)this.valuesOptions={};this.valuesOptions[e]=n||null}this.comments[e]=r||null;return this};Enum.prototype.remove=function remove(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(t==null)throw Error("name '"+e+"' does not exist in "+this);delete this.valuesById[t];delete this.values[e];delete this.comments[e];if(this.valuesOptions)delete this.valuesOptions[e];return this};Enum.prototype.isReservedId=function isReservedId(e){return i.isReservedId(this.reserved,e)};Enum.prototype.isReservedName=function isReservedName(e){return i.isReservedName(this.reserved,e)}},78125:(e,t,r)=>{"use strict";e.exports=Field;var n=r(38911);((Field.prototype=Object.create(n.prototype)).constructor=Field).className="Field";var i=r(9691),s=r(49621),o=r(13682);var a;var c=/^required|optional|repeated$/;Field.fromJSON=function fromJSON(e,t){return new Field(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)};function Field(e,t,r,i,a,u,d){if(o.isObject(i)){d=a;u=i;i=a=undefined}else if(o.isObject(a)){d=u;u=a;a=undefined}n.call(this,e,u);if(!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(i!==undefined&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(a!==undefined&&!o.isString(a))throw TypeError("extend must be a string");if(i==="proto3_optional"){i="optional"}this.rule=i&&i!=="optional"?i:undefined;this.type=r;this.id=t;this.extend=a||undefined;this.required=i==="required";this.optional=!this.required;this.repeated=i==="repeated";this.map=false;this.message=null;this.partOf=null;this.typeDefault=null;this.defaultValue=null;this.long=o.Long?s.long[r]!==undefined:false;this.bytes=r==="bytes";this.resolvedType=null;this.extensionField=null;this.declaringField=null;this._packed=null;this.comment=d}Object.defineProperty(Field.prototype,"packed",{get:function(){if(this._packed===null)this._packed=this.getOption("packed")!==false;return this._packed}});Field.prototype.setOption=function setOption(e,t,r){if(e==="packed")this._packed=null;return n.prototype.setOption.call(this,e,t,r)};Field.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return o.toObject(["rule",this.rule!=="optional"&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])};Field.prototype.resolve=function resolve(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined){this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type);if(this.resolvedType instanceof a)this.typeDefault=null;else this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]}else if(this.options&&this.options.proto3_optional){this.typeDefault=null}if(this.options&&this.options["default"]!=null){this.typeDefault=this.options["default"];if(this.resolvedType instanceof i&&typeof this.typeDefault==="string")this.typeDefault=this.resolvedType.values[this.typeDefault]}if(this.options){if(this.options.packed===true||this.options.packed!==undefined&&this.resolvedType&&!(this.resolvedType instanceof i))delete this.options.packed;if(!Object.keys(this.options).length)this.options=undefined}if(this.long){this.typeDefault=o.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u");if(Object.freeze)Object.freeze(this.typeDefault)}else if(this.bytes&&typeof this.typeDefault==="string"){var e;if(o.base64.test(this.typeDefault))o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0);else o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0);this.typeDefault=e}if(this.map)this.defaultValue=o.emptyObject;else if(this.repeated)this.defaultValue=o.emptyArray;else this.defaultValue=this.typeDefault;if(this.parent instanceof a)this.parent.ctor.prototype[this.name]=this.defaultValue;return n.prototype.resolve.call(this)};Field.d=function decorateField(e,t,r,n){if(typeof t==="function")t=o.decorateType(t).name;else if(t&&typeof t==="object")t=o.decorateEnum(t).name;return function fieldDecorator(i,s){o.decorateType(i.constructor).add(new Field(s,e,t,r,{default:n}))}};Field._configure=function configure(e){a=e}},83887:(e,t,r)=>{"use strict";var n=e.exports=r(17627);n.build="light";function load(e,t,r){if(typeof t==="function"){r=t;t=new n.Root}else if(!t)t=new n.Root;return t.load(e,r)}n.load=load;function loadSync(e,t){if(!t)t=new n.Root;return t.loadSync(e)}n.loadSync=loadSync;n.encoder=r(61005);n.decoder=r(21710);n.verifier=r(18425);n.converter=r(83025);n.ReflectionObject=r(38911);n.Namespace=r(22552);n.Root=r(62485);n.Enum=r(9691);n.Type=r(43300);n.Field=r(78125);n.OneOf=r(95389);n.MapField=r(96493);n.Service=r(35315);n.Method=r(53527);n.Message=r(4014);n.wrappers=r(42234);n.types=r(49621);n.util=r(13682);n.ReflectionObject._configure(n.Root);n.Namespace._configure(n.Type,n.Service,n.Enum);n.Root._configure(n.Type);n.Field._configure(n.Type)},17627:(e,t,r)=>{"use strict";var n=t;n.build="minimal";n.Writer=r(44064);n.BufferWriter=r(53861);n.Reader=r(25959);n.BufferReader=r(46019);n.util=r(17289);n.rpc=r(1544);n.roots=r(13396);n.configure=configure;function configure(){n.util._configure();n.Writer._configure(n.BufferWriter);n.Reader._configure(n.BufferReader)}configure()},33288:(e,t,r)=>{"use strict";var n=e.exports=r(83887);n.build="full";n.tokenize=r(11298);n.parse=r(36347);n.common=r(7954);n.Root._configure(n.Type,n.parse,n.common)},96493:(e,t,r)=>{"use strict";e.exports=MapField;var n=r(78125);((MapField.prototype=Object.create(n.prototype)).constructor=MapField).className="MapField";var i=r(49621),s=r(13682);function MapField(e,t,r,i,o,a){n.call(this,e,t,i,undefined,undefined,o,a);if(!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r;this.resolvedKeyType=null;this.map=true}MapField.fromJSON=function fromJSON(e,t){return new MapField(e,t.id,t.keyType,t.type,t.options,t.comment)};MapField.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])};MapField.prototype.resolve=function resolve(){if(this.resolved)return this;if(i.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)};MapField.d=function decorateMapField(e,t,r){if(typeof r==="function")r=s.decorateType(r).name;else if(r&&typeof r==="object")r=s.decorateEnum(r).name;return function mapFieldDecorator(n,i){s.decorateType(n.constructor).add(new MapField(i,e,t,r))}}},4014:(e,t,r)=>{"use strict";e.exports=Message;var n=r(17289);function Message(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}Message.create=function create(e){return this.$type.create(e)};Message.encode=function encode(e,t){return this.$type.encode(e,t)};Message.encodeDelimited=function encodeDelimited(e,t){return this.$type.encodeDelimited(e,t)};Message.decode=function decode(e){return this.$type.decode(e)};Message.decodeDelimited=function decodeDelimited(e){return this.$type.decodeDelimited(e)};Message.verify=function verify(e){return this.$type.verify(e)};Message.fromObject=function fromObject(e){return this.$type.fromObject(e)};Message.toObject=function toObject(e,t){return this.$type.toObject(e,t)};Message.prototype.toJSON=function toJSON(){return this.$type.toObject(this,n.toJSONOptions)}},53527:(e,t,r)=>{"use strict";e.exports=Method;var n=r(38911);((Method.prototype=Object.create(n.prototype)).constructor=Method).className="Method";var i=r(13682);function Method(e,t,r,s,o,a,c,u,d){if(i.isObject(o)){c=o;o=a=undefined}else if(i.isObject(a)){c=a;a=undefined}if(!(t===undefined||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,c);this.type=t||"rpc";this.requestType=r;this.requestStream=o?true:undefined;this.responseType=s;this.responseStream=a?true:undefined;this.resolvedRequestType=null;this.resolvedResponseType=null;this.comment=u;this.parsedOptions=d}Method.fromJSON=function fromJSON(e,t){return new Method(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)};Method.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return i.toObject(["type",this.type!=="rpc"&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined,"parsedOptions",this.parsedOptions])};Method.prototype.resolve=function resolve(){if(this.resolved)return this;this.resolvedRequestType=this.parent.lookupType(this.requestType);this.resolvedResponseType=this.parent.lookupType(this.responseType);return n.prototype.resolve.call(this)}},22552:(e,t,r)=>{"use strict";e.exports=Namespace;var n=r(38911);((Namespace.prototype=Object.create(n.prototype)).constructor=Namespace).className="Namespace";var i=r(78125),s=r(13682),o=r(95389);var a,c,u;Namespace.fromJSON=function fromJSON(e,t){return new Namespace(e,t.options).addJSON(t.nested)};function arrayToJSON(e,t){if(!(e&&e.length))return undefined;var r={};for(var n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}Namespace.arrayToJSON=arrayToJSON;Namespace.isReservedId=function isReservedId(e,t){if(e)for(var r=0;r<e.length;++r)if(typeof e[r]!=="string"&&e[r][0]<=t&&e[r][1]>t)return true;return false};Namespace.isReservedName=function isReservedName(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return true;return false};function Namespace(e,t){n.call(this,e,t);this.nested=undefined;this._nestedArray=null}function clearCache(e){e._nestedArray=null;return e}Object.defineProperty(Namespace.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=s.toArray(this.nested))}});Namespace.prototype.toJSON=function toJSON(e){return s.toObject(["options",this.options,"nested",arrayToJSON(this.nestedArray,e)])};Namespace.prototype.addJSON=function addJSON(e){var t=this;if(e){for(var r=Object.keys(e),n=0,s;n<r.length;++n){s=e[r[n]];t.add((s.fields!==undefined?a.fromJSON:s.values!==undefined?u.fromJSON:s.methods!==undefined?c.fromJSON:s.id!==undefined?i.fromJSON:Namespace.fromJSON)(r[n],s))}}return this};Namespace.prototype.get=function get(e){return this.nested&&this.nested[e]||null};Namespace.prototype.getEnum=function getEnum(e){if(this.nested&&this.nested[e]instanceof u)return this.nested[e].values;throw Error("no such enum: "+e)};Namespace.prototype.add=function add(e){if(!(e instanceof i&&e.extend!==undefined||e instanceof a||e instanceof o||e instanceof u||e instanceof c||e instanceof Namespace))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var t=this.get(e.name);if(t){if(t instanceof Namespace&&e instanceof Namespace&&!(t instanceof a||t instanceof c)){var r=t.nestedArray;for(var n=0;n<r.length;++n)e.add(r[n]);this.remove(t);if(!this.nested)this.nested={};e.setOptions(t.options,true)}else throw Error("duplicate name '"+e.name+"' in "+this)}}this.nested[e.name]=e;e.onAdd(this);return clearCache(this)};Namespace.prototype.remove=function remove(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);delete this.nested[e.name];if(!Object.keys(this.nested).length)this.nested=undefined;e.onRemove(this);return clearCache(this)};Namespace.prototype.define=function define(e,t){if(s.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");var r=this;while(e.length>0){var n=e.shift();if(r.nested&&r.nested[n]){r=r.nested[n];if(!(r instanceof Namespace))throw Error("path conflicts with non-namespace objects")}else r.add(r=new Namespace(n))}if(t)r.addJSON(t);return r};Namespace.prototype.resolveAll=function resolveAll(){var e=this.nestedArray,t=0;while(t<e.length)if(e[t]instanceof Namespace)e[t++].resolveAll();else e[t++].resolve();return this.resolve()};Namespace.prototype.lookup=function lookup(e,t,r){if(typeof t==="boolean"){r=t;t=undefined}else if(t&&!Array.isArray(t))t=[t];if(s.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(e.length===1){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof Namespace&&(n=n.lookup(e.slice(1),t,true)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof Namespace&&(n=this._nestedArray[i].lookup(e,t,true)))return n;if(this.parent===null||r)return null;return this.parent.lookup(e,t)};Namespace.prototype.lookupType=function lookupType(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such type: "+e);return t};Namespace.prototype.lookupEnum=function lookupEnum(e){var t=this.lookup(e,[u]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t};Namespace.prototype.lookupTypeOrEnum=function lookupTypeOrEnum(e){var t=this.lookup(e,[a,u]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t};Namespace.prototype.lookupService=function lookupService(e){var t=this.lookup(e,[c]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t};Namespace._configure=function(e,t,r){a=e;c=t;u=r}},38911:(e,t,r)=>{"use strict";e.exports=ReflectionObject;ReflectionObject.className="ReflectionObject";var n=r(13682);var i;function ReflectionObject(e,t){if(!n.isString(e))throw TypeError("name must be a string");if(t&&!n.isObject(t))throw TypeError("options must be an object");this.options=t;this.parsedOptions=null;this.name=e;this.parent=null;this.resolved=false;this.comment=null;this.filename=null}Object.defineProperties(ReflectionObject.prototype,{root:{get:function(){var e=this;while(e.parent!==null)e=e.parent;return e}},fullName:{get:function(){var e=[this.name],t=this.parent;while(t){e.unshift(t.name);t=t.parent}return e.join(".")}}});ReflectionObject.prototype.toJSON=function toJSON(){throw Error()};ReflectionObject.prototype.onAdd=function onAdd(e){if(this.parent&&this.parent!==e)this.parent.remove(this);this.parent=e;this.resolved=false;var t=e.root;if(t instanceof i)t._handleAdd(this)};ReflectionObject.prototype.onRemove=function onRemove(e){var t=e.root;if(t instanceof i)t._handleRemove(this);this.parent=null;this.resolved=false};ReflectionObject.prototype.resolve=function resolve(){if(this.resolved)return this;if(this.root instanceof i)this.resolved=true;return this};ReflectionObject.prototype.getOption=function getOption(e){if(this.options)return this.options[e];return undefined};ReflectionObject.prototype.setOption=function setOption(e,t,r){if(!r||!this.options||this.options[e]===undefined)(this.options||(this.options={}))[e]=t;return this};ReflectionObject.prototype.setParsedOption=function setParsedOption(e,t,r){if(!this.parsedOptions){this.parsedOptions=[]}var i=this.parsedOptions;if(r){var s=i.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(s){var o=s[e];n.setProperty(o,r,t)}else{s={};s[e]=n.setProperty({},r,t);i.push(s)}}else{var a={};a[e]=t;i.push(a)}return this};ReflectionObject.prototype.setOptions=function setOptions(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this};ReflectionObject.prototype.toString=function toString(){var e=this.constructor.className,t=this.fullName;if(t.length)return e+" "+t;return e};ReflectionObject._configure=function(e){i=e}},95389:(e,t,r)=>{"use strict";e.exports=OneOf;var n=r(38911);((OneOf.prototype=Object.create(n.prototype)).constructor=OneOf).className="OneOf";var i=r(78125),s=r(13682);function OneOf(e,t,r,i){if(!Array.isArray(t)){r=t;t=undefined}n.call(this,e,r);if(!(t===undefined||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[];this.fieldsArray=[];this.comment=i}OneOf.fromJSON=function fromJSON(e,t){return new OneOf(e,t.oneof,t.options,t.comment)};OneOf.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])};function addFieldsToParent(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)if(!e.fieldsArray[t].parent)e.parent.add(e.fieldsArray[t])}OneOf.prototype.add=function add(e){if(!(e instanceof i))throw TypeError("field must be a Field");if(e.parent&&e.parent!==this.parent)e.parent.remove(e);this.oneof.push(e.name);this.fieldsArray.push(e);e.partOf=this;addFieldsToParent(this);return this};OneOf.prototype.remove=function remove(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);this.fieldsArray.splice(t,1);t=this.oneof.indexOf(e.name);if(t>-1)this.oneof.splice(t,1);e.partOf=null;return this};OneOf.prototype.onAdd=function onAdd(e){n.prototype.onAdd.call(this,e);var t=this;for(var r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);if(i&&!i.partOf){i.partOf=t;t.fieldsArray.push(i)}}addFieldsToParent(this)};OneOf.prototype.onRemove=function onRemove(e){for(var t=0,r;t<this.fieldsArray.length;++t)if((r=this.fieldsArray[t]).parent)r.parent.remove(r);n.prototype.onRemove.call(this,e)};OneOf.d=function decorateOneOf(){var e=new Array(arguments.length),t=0;while(t<arguments.length)e[t]=arguments[t++];return function oneOfDecorator(t,r){s.decorateType(t.constructor).add(new OneOf(r,e));Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},36347:(e,t,r)=>{"use strict";e.exports=parse;parse.filename=null;parse.defaults={keepCase:false};var n=r(11298),i=r(62485),s=r(43300),o=r(78125),a=r(96493),c=r(95389),u=r(9691),d=r(35315),p=r(53527),m=r(49621),y=r(13682);var g=/^[1-9][0-9]*$/,b=/^-?[1-9][0-9]*$/,v=/^0[x][0-9a-fA-F]+$/,w=/^-?0[x][0-9a-fA-F]+$/,_=/^0[0-7]+$/,C=/^-?0[0-7]+$/,P=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,O=/^[a-zA-Z_][a-zA-Z_0-9]*$/,E=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,I=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function parse(e,t,r){if(!(t instanceof i)){r=t;t=new i}if(!r)r=parse.defaults;var k=r.preferTrailingComment||false;var T=n(e,r.alternateCommentMode||false),x=T.next,R=T.push,B=T.peek,N=T.skip,j=T.cmnt;var L=true,D,U,F,K,V=false;var H=t;var q=r.keepCase?function(e){return e}:y.camelCase;function illegal(e,t,r){var n=parse.filename;if(!r)parse.filename=null;return Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+T.line+")")}function readString(){var e=[],t;do{if((t=x())!=='"'&&t!=="'")throw illegal(t);e.push(x());N(t);t=B()}while(t==='"'||t==="'");return e.join("")}function readValue(e){var t=x();switch(t){case"'":case'"':R(t);return readString();case"true":case"TRUE":return true;case"false":case"FALSE":return false}try{return parseNumber(t,true)}catch(r){if(e&&E.test(t))return t;throw illegal(t,"value")}}function readRanges(e,t){var r,n;do{if(t&&((r=B())==='"'||r==="'"))e.push(readString());else e.push([n=parseId(x()),N("to",true)?parseId(x()):n])}while(N(",",true));var i={options:undefined};i.setOption=function(e,t){if(this.options===undefined)this.options={};this.options[e]=t};ifBlock(i,(function parseRange_block(e){if(e==="option"){parseOption(i,e);N(";")}else throw illegal(e)}),(function parseRange_line(){parseInlineOptions(i)}))}function parseNumber(e,t){var r=1;if(e.charAt(0)==="-"){r=-1;e=e.substring(1)}switch(e){case"inf":case"INF":case"Inf":return r*Infinity;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(g.test(e))return r*parseInt(e,10);if(v.test(e))return r*parseInt(e,16);if(_.test(e))return r*parseInt(e,8);if(P.test(e))return r*parseFloat(e);throw illegal(e,"number",t)}function parseId(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&e.charAt(0)==="-")throw illegal(e,"id");if(b.test(e))return parseInt(e,10);if(w.test(e))return parseInt(e,16);if(C.test(e))return parseInt(e,8);throw illegal(e,"id")}function parsePackage(){if(D!==undefined)throw illegal("package");D=x();if(!E.test(D))throw illegal(D,"name");H=H.define(D);N(";")}function parseImport(){var e=B();var t;switch(e){case"weak":t=F||(F=[]);x();break;case"public":x();default:t=U||(U=[]);break}e=readString();N(";");t.push(e)}function parseSyntax(){N("=");K=readString();V=K==="proto3";if(!V&&K!=="proto2")throw illegal(K,"syntax");t.setOption("syntax",K);N(";")}function parseCommon(e,t){switch(t){case"option":parseOption(e,t);N(";");return true;case"message":parseType(e,t);return true;case"enum":parseEnum(e,t);return true;case"service":parseService(e,t);return true;case"extend":parseExtension(e,t);return true}return false}function ifBlock(e,t,r){var n=T.line;if(e){if(typeof e.comment!=="string"){e.comment=j()}e.filename=parse.filename}if(N("{",true)){var i;while((i=x())!=="}")t(i);N(";",true)}else{if(r)r();N(";");if(e&&(typeof e.comment!=="string"||k))e.comment=j(n)||e.comment}}function parseType(e,t){if(!O.test(t=x()))throw illegal(t,"type name");var r=new s(t);ifBlock(r,(function parseType_block(e){if(parseCommon(r,e))return;switch(e){case"map":parseMapField(r,e);break;case"required":case"repeated":parseField(r,e);break;case"optional":if(V){parseField(r,"proto3_optional")}else{parseField(r,"optional")}break;case"oneof":parseOneOf(r,e);break;case"extensions":readRanges(r.extensions||(r.extensions=[]));break;case"reserved":readRanges(r.reserved||(r.reserved=[]),true);break;default:if(!V||!E.test(e))throw illegal(e);R(e);parseField(r,"optional");break}}));e.add(r)}function parseField(e,t,r){var n=x();if(n==="group"){parseGroup(e,t);return}while(n.endsWith(".")||B().startsWith(".")){n+=x()}if(!E.test(n))throw illegal(n,"type");var i=x();if(!O.test(i))throw illegal(i,"name");i=q(i);N("=");var s=new o(i,parseId(x()),n,t,r);ifBlock(s,(function parseField_block(e){if(e==="option"){parseOption(s,e);N(";")}else throw illegal(e)}),(function parseField_line(){parseInlineOptions(s)}));if(t==="proto3_optional"){var a=new c("_"+i);s.setOption("proto3_optional",true);a.add(s);e.add(a)}else{e.add(s)}if(!V&&s.repeated&&(m.packed[n]!==undefined||m.basic[n]===undefined))s.setOption("packed",false,true)}function parseGroup(e,t){var r=x();if(!O.test(r))throw illegal(r,"name");var n=y.lcFirst(r);if(r===n)r=y.ucFirst(r);N("=");var i=parseId(x());var a=new s(r);a.group=true;var c=new o(n,i,r,t);c.filename=parse.filename;ifBlock(a,(function parseGroup_block(e){switch(e){case"option":parseOption(a,e);N(";");break;case"required":case"repeated":parseField(a,e);break;case"optional":if(V){parseField(a,"proto3_optional")}else{parseField(a,"optional")}break;case"message":parseType(a,e);break;case"enum":parseEnum(a,e);break;default:throw illegal(e)}}));e.add(a).add(c)}function parseMapField(e){N("<");var t=x();if(m.mapKey[t]===undefined)throw illegal(t,"type");N(",");var r=x();if(!E.test(r))throw illegal(r,"type");N(">");var n=x();if(!O.test(n))throw illegal(n,"name");N("=");var i=new a(q(n),parseId(x()),t,r);ifBlock(i,(function parseMapField_block(e){if(e==="option"){parseOption(i,e);N(";")}else throw illegal(e)}),(function parseMapField_line(){parseInlineOptions(i)}));e.add(i)}function parseOneOf(e,t){if(!O.test(t=x()))throw illegal(t,"name");var r=new c(q(t));ifBlock(r,(function parseOneOf_block(e){if(e==="option"){parseOption(r,e);N(";")}else{R(e);parseField(r,"optional")}}));e.add(r)}function parseEnum(e,t){if(!O.test(t=x()))throw illegal(t,"name");var r=new u(t);ifBlock(r,(function parseEnum_block(e){switch(e){case"option":parseOption(r,e);N(";");break;case"reserved":readRanges(r.reserved||(r.reserved=[]),true);break;default:parseEnumValue(r,e)}}));e.add(r)}function parseEnumValue(e,t){if(!O.test(t))throw illegal(t,"name");N("=");var r=parseId(x(),true),n={options:undefined};n.setOption=function(e,t){if(this.options===undefined)this.options={};this.options[e]=t};ifBlock(n,(function parseEnumValue_block(e){if(e==="option"){parseOption(n,e);N(";")}else throw illegal(e)}),(function parseEnumValue_line(){parseInlineOptions(n)}));e.add(t,r,n.comment,n.options)}function parseOption(e,t){var r=N("(",true);if(!E.test(t=x()))throw illegal(t,"name");var n=t;var i=n;var s;if(r){N(")");n="("+n+")";i=n;t=B();if(I.test(t)){s=t.slice(1);n+=t;x()}}N("=");var o=parseOptionValue(e,n);setParsedOption(e,i,o,s)}function parseOptionValue(e,t){if(N("{",true)){var r={};while(!N("}",true)){if(!O.test(W=x())){throw illegal(W,"name")}if(W===null){throw illegal(W,"end of input")}var n;var i=W;N(":",true);if(B()==="{")n=parseOptionValue(e,t+"."+W);else if(B()==="["){n=[];var s;if(N("[",true)){do{s=readValue(true);n.push(s)}while(N(",",true));N("]");if(typeof s!=="undefined"){setOption(e,t+"."+W,s)}}}else{n=readValue(true);setOption(e,t+"."+W,n)}var o=r[i];if(o)n=[].concat(o).concat(n);r[i]=n;N(",",true);N(";",true)}return r}var a=readValue(true);setOption(e,t,a);return a}function setOption(e,t,r){if(e.setOption)e.setOption(t,r)}function setParsedOption(e,t,r,n){if(e.setParsedOption)e.setParsedOption(t,r,n)}function parseInlineOptions(e){if(N("[",true)){do{parseOption(e,"option")}while(N(",",true));N("]")}return e}function parseService(e,t){if(!O.test(t=x()))throw illegal(t,"service name");var r=new d(t);ifBlock(r,(function parseService_block(e){if(parseCommon(r,e))return;if(e==="rpc")parseMethod(r,e);else throw illegal(e)}));e.add(r)}function parseMethod(e,t){var r=j();var n=t;if(!O.test(t=x()))throw illegal(t,"name");var i=t,s,o,a,c;N("(");if(N("stream",true))o=true;if(!E.test(t=x()))throw illegal(t);s=t;N(")");N("returns");N("(");if(N("stream",true))c=true;if(!E.test(t=x()))throw illegal(t);a=t;N(")");var u=new p(i,n,s,a,o,c);u.comment=r;ifBlock(u,(function parseMethod_block(e){if(e==="option"){parseOption(u,e);N(";")}else throw illegal(e)}));e.add(u)}function parseExtension(e,t){if(!E.test(t=x()))throw illegal(t,"reference");var r=t;ifBlock(null,(function parseExtension_block(t){switch(t){case"required":case"repeated":parseField(e,t,r);break;case"optional":if(V){parseField(e,"proto3_optional",r)}else{parseField(e,"optional",r)}break;default:if(!V||!E.test(t))throw illegal(t);R(t);parseField(e,"optional",r);break}}))}var W;while((W=x())!==null){switch(W){case"package":if(!L)throw illegal(W);parsePackage();break;case"import":if(!L)throw illegal(W);parseImport();break;case"syntax":if(!L)throw illegal(W);parseSyntax();break;case"option":parseOption(H,W);N(";");break;default:if(parseCommon(H,W)){L=false;continue}throw illegal(W)}}parse.filename=null;return{package:D,imports:U,weakImports:F,syntax:K,root:t}}},25959:(e,t,r)=>{"use strict";e.exports=Reader;var n=r(17289);var i;var s=n.LongBits,o=n.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e;this.pos=0;this.len=e.length}var a=typeof Uint8Array!=="undefined"?function create_typed_array(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function create_array(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")};var c=function create(){return n.Buffer?function create_buffer_setup(e){return(Reader.create=function create_buffer(e){return n.Buffer.isBuffer(e)?new i(e):a(e)})(e)}:a};Reader.create=c();Reader.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice;Reader.prototype.uint32=function read_uint32_setup(){var e=4294967295;return function read_uint32(){e=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len){this.pos=this.len;throw indexOutOfRange(this,10)}return e}}();Reader.prototype.int32=function read_int32(){return this.uint32()|0};Reader.prototype.sint32=function read_sint32(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var e=new s(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}Reader.prototype.bool=function read_bool(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader.prototype.fixed32=function read_fixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader.prototype.sfixed32=function read_sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new s(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.prototype.float=function read_float(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=n.float.readFloatLE(this.buf,this.pos);this.pos+=4;return e};Reader.prototype.double=function read_double(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return e};Reader.prototype.bytes=function read_bytes(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);this.pos+=e;if(Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var i=n.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)};Reader.prototype.string=function read_string(){var e=this.bytes();return o.read(e,0,e.length)};Reader.prototype.skip=function skip(e){if(typeof e==="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else{do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(this.buf[this.pos++]&128)}return this};Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((e=this.uint32()&7)!==4){this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader._configure=function(e){i=e;Reader.create=c();i._configure();var t=n.Long?"toLong":"toNumber";n.merge(Reader.prototype,{int64:function read_int64(){return readLongVarint.call(this)[t](false)},uint64:function read_uint64(){return readLongVarint.call(this)[t](true)},sint64:function read_sint64(){return readLongVarint.call(this).zzDecode()[t](false)},fixed64:function read_fixed64(){return readFixed64.call(this)[t](true)},sfixed64:function read_sfixed64(){return readFixed64.call(this)[t](false)}})}},46019:(e,t,r)=>{"use strict";e.exports=BufferReader;var n=r(25959);(BufferReader.prototype=Object.create(n.prototype)).constructor=BufferReader;var i=r(17289);function BufferReader(e){n.call(this,e)}BufferReader._configure=function(){if(i.Buffer)BufferReader.prototype._slice=i.Buffer.prototype.slice};BufferReader.prototype.string=function read_string_buffer(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure()},62485:(e,t,r)=>{"use strict";e.exports=Root;var n=r(22552);((Root.prototype=Object.create(n.prototype)).constructor=Root).className="Root";var i=r(78125),s=r(9691),o=r(95389),a=r(13682);var c,u,d;function Root(e){n.call(this,"",e);this.deferred=[];this.files=[]}Root.fromJSON=function fromJSON(e,t){if(!t)t=new Root;if(e.options)t.setOptions(e.options);return t.addJSON(e.nested)};Root.prototype.resolvePath=a.path.resolve;Root.prototype.fetch=a.fetch;function SYNC(){}Root.prototype.load=function load(e,t,r){if(typeof t==="function"){r=t;t=undefined}var n=this;if(!r)return a.asPromise(load,n,e,t);var i=r===SYNC;function finish(e,t){if(!r)return;if(i)throw e;var n=r;r=null;n(e,t)}function getBundledFileName(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in d)return r}return null}function process(e,r){try{if(a.isString(r)&&r.charAt(0)==="{")r=JSON.parse(r);if(!a.isString(r))n.setOptions(r.options).addJSON(r.nested);else{u.filename=e;var o=u(r,n,t),c,d=0;if(o.imports)for(;d<o.imports.length;++d)if(c=getBundledFileName(o.imports[d])||n.resolvePath(e,o.imports[d]))fetch(c);if(o.weakImports)for(d=0;d<o.weakImports.length;++d)if(c=getBundledFileName(o.weakImports[d])||n.resolvePath(e,o.weakImports[d]))fetch(c,true)}}catch(e){finish(e)}if(!i&&!s)finish(null,n)}function fetch(e,t){e=getBundledFileName(e)||e;if(n.files.indexOf(e)>-1)return;n.files.push(e);if(e in d){if(i)process(e,d[e]);else{++s;setTimeout((function(){--s;process(e,d[e])}))}return}if(i){var o;try{o=a.fs.readFileSync(e).toString("utf8")}catch(e){if(!t)finish(e);return}process(e,o)}else{++s;n.fetch(e,(function(i,o){--s;if(!r)return;if(i){if(!t)finish(i);else if(!s)finish(null,n);return}process(e,o)}))}}var s=0;if(a.isString(e))e=[e];for(var o=0,c;o<e.length;++o)if(c=n.resolvePath("",e[o]))fetch(c);if(i)return n;if(!s)finish(null,n);return undefined};Root.prototype.loadSync=function loadSync(e,t){if(!a.isNode)throw Error("not supported");return this.load(e,t,SYNC)};Root.prototype.resolveAll=function resolveAll(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function tryHandleExtension(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new i(t.fullName,t.id,t.type,t.rule,undefined,t.options);if(r.get(n.name)){return true}n.declaringField=t;t.extensionField=n;r.add(n);return true}return false}Root.prototype._handleAdd=function _handleAdd(e){if(e instanceof i){if(e.extend!==undefined&&!e.extensionField)if(!tryHandleExtension(this,e))this.deferred.push(e)}else if(e instanceof s){if(p.test(e.name))e.parent[e.name]=e.values}else if(!(e instanceof o)){if(e instanceof c)for(var t=0;t<this.deferred.length;)if(tryHandleExtension(this,this.deferred[t]))this.deferred.splice(t,1);else++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);if(p.test(e.name))e.parent[e.name]=e}};Root.prototype._handleRemove=function _handleRemove(e){if(e instanceof i){if(e.extend!==undefined){if(e.extensionField){e.extensionField.parent.remove(e.extensionField);e.extensionField=null}else{var t=this.deferred.indexOf(e);if(t>-1)this.deferred.splice(t,1)}}}else if(e instanceof s){if(p.test(e.name))delete e.parent[e.name]}else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);if(p.test(e.name))delete e.parent[e.name]}};Root._configure=function(e,t,r){c=e;u=t;d=r}},13396:e=>{"use strict";e.exports={}},1544:(e,t,r)=>{"use strict";var n=t;n.Service=r(43660)},43660:(e,t,r)=>{"use strict";e.exports=Service;var n=r(17289);(Service.prototype=Object.create(n.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function rpcCall(e,t,r,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return n.asPromise(rpcCall,o,e,t,r,i);if(!o.rpcImpl){setTimeout((function(){s(Error("already ended"))}),0);return undefined}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function rpcCallback(t,n){if(t){o.emit("error",t,e);return s(t)}if(n===null){o.end(true);return undefined}if(!(n instanceof r)){try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){o.emit("error",t,e);return s(t)}}o.emit("data",n,e);return s(null,n)}))}catch(t){o.emit("error",t,e);setTimeout((function(){s(t)}),0);return undefined}};Service.prototype.end=function end(e){if(this.rpcImpl){if(!e)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},35315:(e,t,r)=>{"use strict";e.exports=Service;var n=r(22552);((Service.prototype=Object.create(n.prototype)).constructor=Service).className="Service";var i=r(53527),s=r(13682),o=r(1544);function Service(e,t){n.call(this,e,t);this.methods={};this._methodsArray=null}Service.fromJSON=function fromJSON(e,t){var r=new Service(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));if(t.nested)r.addJSON(t.nested);r.comment=t.comment;return r};Service.prototype.toJSON=function toJSON(e){var t=n.prototype.toJSON.call(this,e);var r=e?Boolean(e.keepComments):false;return s.toObject(["options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])};Object.defineProperty(Service.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}});function clearCache(e){e._methodsArray=null;return e}Service.prototype.get=function get(e){return this.methods[e]||n.prototype.get.call(this,e)};Service.prototype.resolveAll=function resolveAll(){var e=this.methodsArray;for(var t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)};Service.prototype.add=function add(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof i){this.methods[e.name]=e;e.parent=this;return clearCache(this)}return n.prototype.add.call(this,e)};Service.prototype.remove=function remove(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.methods[e.name];e.parent=null;return clearCache(this)}return n.prototype.remove.call(this,e)};Service.prototype.create=function create(e,t,r){var n=new o.Service(e,t,r);for(var i=0,a;i<this.methodsArray.length;++i){var c=s.lcFirst((a=this._methodsArray[i]).resolve().name).replace(/[^$\w_]/g,"");n[c]=s.codegen(["r","c"],s.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:a,q:a.resolvedRequestType.ctor,s:a.resolvedResponseType.ctor})}return n}},11298:e=>{"use strict";e.exports=tokenize;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g;var i=/^ *[*/]+ */,s=/^\s*\*?\/*/,o=/\n/g,a=/\s/,c=/\\(.?)/g;var u={0:"\0",r:"\r",n:"\n",t:"\t"};function unescape(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}}))}tokenize.unescape=unescape;function tokenize(e,c){e=e.toString();var u=0,d=e.length,p=1,m=0,y={};var g=[];var b=null;function illegal(e){return Error("illegal "+e+" (line "+p+")")}function readString(){var t=b==="'"?n:r;t.lastIndex=u-1;var i=t.exec(e);if(!i)throw illegal("string");u=t.lastIndex;push(b);b=null;return unescape(i[1])}function charAt(t){return e.charAt(t)}function setComment(t,r,n){var a={type:e.charAt(t++),lineEmpty:false,leading:n};var u;if(c){u=2}else{u=3}var d=t-u,g;do{if(--d<0||(g=e.charAt(d))==="\n"){a.lineEmpty=true;break}}while(g===" "||g==="\t");var b=e.substring(t,r).split(o);for(var v=0;v<b.length;++v)b[v]=b[v].replace(c?s:i,"").trim();a.text=b.join("\n").trim();y[p]=a;m=p}function isDoubleSlashCommentLine(t){var r=findEndOfLine(t);var n=e.substring(t,r);var i=/^\s*\/\//.test(n);return i}function findEndOfLine(e){var t=e;while(t<d&&charAt(t)!=="\n"){t++}return t}function next(){if(g.length>0)return g.shift();if(b)return readString();var r,n,i,s,o,m=u===0;do{if(u===d)return null;r=false;while(a.test(i=charAt(u))){if(i==="\n"){m=true;++p}if(++u===d)return null}if(charAt(u)==="/"){if(++u===d){throw illegal("comment")}if(charAt(u)==="/"){if(!c){o=charAt(s=u+1)==="/";while(charAt(++u)!=="\n"){if(u===d){return null}}++u;if(o){setComment(s,u-1,m);m=true}++p;r=true}else{s=u;o=false;if(isDoubleSlashCommentLine(u-1)){o=true;do{u=findEndOfLine(u);if(u===d){break}u++;if(!m){break}}while(isDoubleSlashCommentLine(u))}else{u=Math.min(d,findEndOfLine(u)+1)}if(o){setComment(s,u,m);m=true}p++;r=true}}else if((i=charAt(u))==="*"){s=u+1;o=c||charAt(s)==="*";do{if(i==="\n"){++p}if(++u===d){throw illegal("comment")}n=i;i=charAt(u)}while(n!=="*"||i!=="/");++u;if(o){setComment(s,u-2,m);m=true}r=true}else{return"/"}}}while(r);var y=u;t.lastIndex=0;var v=t.test(charAt(y++));if(!v)while(y<d&&!t.test(charAt(y)))++y;var w=e.substring(u,u=y);if(w==='"'||w==="'")b=w;return w}function push(e){g.push(e)}function peek(){if(!g.length){var e=next();if(e===null)return null;push(e)}return g[0]}function skip(e,t){var r=peek(),n=r===e;if(n){next();return true}if(!t)throw illegal("token '"+r+"', '"+e+"' expected");return false}function cmnt(e){var t=null;var r;if(e===undefined){r=y[p-1];delete y[p-1];if(r&&(c||r.type==="*"||r.lineEmpty)){t=r.leading?r.text:null}}else{if(m<e){peek()}r=y[e];delete y[e];if(r&&!r.lineEmpty&&(c||r.type==="/")){t=r.leading?null:r.text}}return t}return Object.defineProperty({next:next,peek:peek,push:push,skip:skip,cmnt:cmnt},"line",{get:function(){return p}})}},43300:(e,t,r)=>{"use strict";e.exports=Type;var n=r(22552);((Type.prototype=Object.create(n.prototype)).constructor=Type).className="Type";var i=r(9691),s=r(95389),o=r(78125),a=r(96493),c=r(35315),u=r(4014),d=r(25959),p=r(44064),m=r(13682),y=r(61005),g=r(21710),b=r(18425),v=r(83025),w=r(42234);function Type(e,t){n.call(this,e,t);this.fields={};this.oneofs=undefined;this.extensions=undefined;this.reserved=undefined;this.group=undefined;this._fieldsById=null;this._fieldsArray=null;this._oneofsArray=null;this._ctor=null}Object.defineProperties(Type.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=m.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=m.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Type.generateConstructor(this)())},set:function(e){var t=e.prototype;if(!(t instanceof u)){(e.prototype=new u).constructor=e;m.merge(e.prototype,t)}e.$type=e.prototype.$type=this;m.merge(e,u,true);this._ctor=e;var r=0;for(;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:m.oneOfGetter(this._oneofsArray[r].oneof),set:m.oneOfSetter(this._oneofsArray[r].oneof)};if(r)Object.defineProperties(e.prototype,n)}}});Type.generateConstructor=function generateConstructor(e){var t=m.codegen(["p"],e.name);for(var r=0,n;r<e.fieldsArray.length;++r)if((n=e._fieldsArray[r]).map)t("this%s={}",m.safeProp(n.name));else if(n.repeated)t("this%s=[]",m.safeProp(n.name));return t("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function clearCache(e){e._fieldsById=e._fieldsArray=e._oneofsArray=null;delete e.encode;delete e.decode;delete e.verify;return e}Type.fromJSON=function fromJSON(e,t){var r=new Type(e,t.options);r.extensions=t.extensions;r.reserved=t.reserved;var u=Object.keys(t.fields),d=0;for(;d<u.length;++d)r.add((typeof t.fields[u[d]].keyType!=="undefined"?a.fromJSON:o.fromJSON)(u[d],t.fields[u[d]]));if(t.oneofs)for(u=Object.keys(t.oneofs),d=0;d<u.length;++d)r.add(s.fromJSON(u[d],t.oneofs[u[d]]));if(t.nested)for(u=Object.keys(t.nested),d=0;d<u.length;++d){var p=t.nested[u[d]];r.add((p.id!==undefined?o.fromJSON:p.fields!==undefined?Type.fromJSON:p.values!==undefined?i.fromJSON:p.methods!==undefined?c.fromJSON:n.fromJSON)(u[d],p))}if(t.extensions&&t.extensions.length)r.extensions=t.extensions;if(t.reserved&&t.reserved.length)r.reserved=t.reserved;if(t.group)r.group=true;if(t.comment)r.comment=t.comment;return r};Type.prototype.toJSON=function toJSON(e){var t=n.prototype.toJSON.call(this,e);var r=e?Boolean(e.keepComments):false;return m.toObject(["options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])};Type.prototype.resolveAll=function resolveAll(){var e=this.fieldsArray,t=0;while(t<e.length)e[t++].resolve();var r=this.oneofsArray;t=0;while(t<r.length)r[t++].resolve();return n.prototype.resolveAll.call(this)};Type.prototype.get=function get(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};Type.prototype.add=function add(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);if(e.parent)e.parent.remove(e);this.fields[e.name]=e;e.message=this;e.onAdd(this);return clearCache(this)}if(e instanceof s){if(!this.oneofs)this.oneofs={};this.oneofs[e.name]=e;e.onAdd(this);return clearCache(this)}return n.prototype.add.call(this,e)};Type.prototype.remove=function remove(e){if(e instanceof o&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.fields[e.name];e.parent=null;e.onRemove(this);return clearCache(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.oneofs[e.name];e.parent=null;e.onRemove(this);return clearCache(this)}return n.prototype.remove.call(this,e)};Type.prototype.isReservedId=function isReservedId(e){return n.isReservedId(this.reserved,e)};Type.prototype.isReservedName=function isReservedName(e){return n.isReservedName(this.reserved,e)};Type.prototype.create=function create(e){return new this.ctor(e)};Type.prototype.setup=function setup(){var e=this.fullName,t=[];for(var r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=y(this)({Writer:p,types:t,util:m});this.decode=g(this)({Reader:d,types:t,util:m});this.verify=b(this)({types:t,util:m});this.fromObject=v.fromObject(this)({types:t,util:m});this.toObject=v.toObject(this)({types:t,util:m});var n=w[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject;this.fromObject=n.fromObject.bind(i);i.toObject=this.toObject;this.toObject=n.toObject.bind(i)}return this};Type.prototype.encode=function encode_setup(e,t){return this.setup().encode(e,t)};Type.prototype.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()};Type.prototype.decode=function decode_setup(e,t){return this.setup().decode(e,t)};Type.prototype.decodeDelimited=function decodeDelimited(e){if(!(e instanceof d))e=d.create(e);return this.decode(e,e.uint32())};Type.prototype.verify=function verify_setup(e){return this.setup().verify(e)};Type.prototype.fromObject=function fromObject(e){return this.setup().fromObject(e)};Type.prototype.toObject=function toObject(e,t){return this.setup().toObject(e,t)};Type.d=function decorateType(e){return function typeDecorator(t){m.decorateType(t,e)}}},49621:(e,t,r)=>{"use strict";var n=t;var i=r(13682);var s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function bake(e,t){var r=0,n={};t|=0;while(r<e.length)n[s[r+t]]=e[r++];return n}n.basic=bake([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);n.defaults=bake([0,0,0,0,0,0,0,0,0,0,0,0,false,"",i.emptyArray,null]);n.long=bake([0,0,0,1,1],7);n.mapKey=bake([0,0,0,5,5,0,0,0,1,1,0,2],2);n.packed=bake([1,5,0,0,0,5,5,0,0,0,1,1,0])},13682:(e,t,r)=>{"use strict";var n=e.exports=r(17289);var i=r(13396);var s,o;n.codegen=r(56809);n.fetch=r(99161);n.path=r(26660);n.fs=n.inquire("fs");n.toArray=function toArray(e){if(e){var t=Object.keys(e),r=new Array(t.length),n=0;while(n<t.length)r[n]=e[t[n++]];return r}return[]};n.toObject=function toObject(e){var t={},r=0;while(r<e.length){var n=e[r++],i=e[r++];if(i!==undefined)t[n]=i}return t};var a=/\\/g,c=/"/g;n.isReserved=function isReserved(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};n.safeProp=function safeProp(e){if(!/^[$\w_]+$/.test(e)||n.isReserved(e))return'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]';return"."+e};n.ucFirst=function ucFirst(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;n.camelCase=function camelCase(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))};n.compareFieldsById=function compareFieldsById(e,t){return e.id-t.id};n.decorateType=function decorateType(e,t){if(e.$type){if(t&&e.$type.name!==t){n.decorateRoot.remove(e.$type);e.$type.name=t;n.decorateRoot.add(e.$type)}return e.$type}if(!s)s=r(43300);var i=new s(t||e.name);n.decorateRoot.add(i);i.ctor=e;Object.defineProperty(e,"$type",{value:i,enumerable:false});Object.defineProperty(e.prototype,"$type",{value:i,enumerable:false});return i};var d=0;n.decorateEnum=function decorateEnum(e){if(e.$type)return e.$type;if(!o)o=r(9691);var t=new o("Enum"+d++,e);n.decorateRoot.add(t);Object.defineProperty(e,"$type",{value:t,enumerable:false});return t};n.setProperty=function setProperty(e,t,r){function setProp(e,t,r){var n=t.shift();if(n==="__proto__"||n==="prototype"){return e}if(t.length>0){e[n]=setProp(e[n]||{},t,r)}else{var i=e[n];if(i)r=[].concat(i).concat(r);e[n]=r}return e}if(typeof e!=="object")throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");t=t.split(".");return setProp(e,t,r)};Object.defineProperty(n,"decorateRoot",{get:function(){return i["decorated"]||(i["decorated"]=new(r(62485)))}})},87334:(e,t,r)=>{"use strict";e.exports=LongBits;var n=r(17289);function LongBits(e,t){this.lo=e>>>0;this.hi=t>>>0}var i=LongBits.zero=new LongBits(0,0);i.toNumber=function(){return 0};i.zzEncode=i.zzDecode=function(){return this};i.length=function(){return 1};var s=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function fromNumber(e){if(e===0)return i;var t=e<0;if(t)e=-e;var r=e>>>0,n=(e-r)/4294967296>>>0;if(t){n=~n>>>0;r=~r>>>0;if(++r>4294967295){r=0;if(++n>4294967295)n=0}}return new LongBits(r,n)};LongBits.from=function from(e){if(typeof e==="number")return LongBits.fromNumber(e);if(n.isString(e)){if(n.Long)e=n.Long.fromString(e);else return LongBits.fromNumber(parseInt(e,10))}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):i};LongBits.prototype.toNumber=function toNumber(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;if(!t)r=r+1>>>0;return-(t+r*4294967296)}return this.lo+this.hi*4294967296};LongBits.prototype.toLong=function toLong(e){return n.Long?new n.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;LongBits.fromHash=function fromHash(e){if(e===s)return i;return new LongBits((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)};LongBits.prototype.toHash=function toHash(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits.prototype.zzEncode=function zzEncode(){var e=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0;this.lo=(this.lo<<1^e)>>>0;return this};LongBits.prototype.zzDecode=function zzDecode(){var e=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0;this.hi=(this.hi>>>1^e)>>>0;return this};LongBits.prototype.length=function length(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},17289:function(e,t,r){"use strict";var n=t;n.asPromise=r(65494);n.base64=r(63020);n.EventEmitter=r(58076);n.float=r(95735);n.inquire=r(148);n.utf8=r(21697);n.pool=r(76084);n.LongBits=r(87334);n.isNode=Boolean(typeof global!=="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node);n.global=n.isNode&&global||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||this;n.emptyArray=Object.freeze?Object.freeze([]):[];n.emptyObject=Object.freeze?Object.freeze({}):{};n.isInteger=Number.isInteger||function isInteger(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e};n.isString=function isString(e){return typeof e==="string"||e instanceof String};n.isObject=function isObject(e){return e&&typeof e==="object"};n.isset=n.isSet=function isSet(e,t){var r=e[t];if(r!=null&&e.hasOwnProperty(t))return typeof r!=="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0;return false};n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();n._Buffer_from=null;n._Buffer_allocUnsafe=null;n.newBuffer=function newBuffer(e){return typeof e==="number"?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):typeof Uint8Array==="undefined"?e:new Uint8Array(e)};n.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long");n.key2Re=/^true|false|0|1$/;n.key32Re=/^-?(?:0|[1-9][0-9]*)$/;n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;n.longToHash=function longToHash(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash};n.longFromHash=function longFromHash(e,t){var r=n.LongBits.fromHash(e);if(n.Long)return n.Long.fromBits(r.lo,r.hi,t);return r.toNumber(Boolean(t))};function merge(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)if(e[n[i]]===undefined||!r)e[n[i]]=t[n[i]];return e}n.merge=merge;n.lcFirst=function lcFirst(e){return e.charAt(0).toLowerCase()+e.substring(1)};function newError(e){function CustomError(e,t){if(!(this instanceof CustomError))return new CustomError(e,t);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,CustomError);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(t)merge(this,t)}CustomError.prototype=Object.create(Error.prototype,{constructor:{value:CustomError,writable:true,enumerable:false,configurable:true},name:{get:function get(){return e},set:undefined,enumerable:false,configurable:true},toString:{value:function value(){return this.name+": "+this.message},writable:true,enumerable:false,configurable:true}});return CustomError}n.newError=newError;n.ProtocolError=newError("ProtocolError");n.oneOfGetter=function getOneOf(e){var t={};for(var r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(t[e[r]]===1&&this[e[r]]!==undefined&&this[e[r]]!==null)return e[r]}};n.oneOfSetter=function setOneOf(e){return function(t){for(var r=0;r<e.length;++r)if(e[r]!==t)delete this[e[r]]}};n.toJSONOptions={longs:String,enums:String,bytes:String,json:true};n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function Buffer_from(t,r){return new e(t,r)};n._Buffer_allocUnsafe=e.allocUnsafe||function Buffer_allocUnsafe(t){return new e(t)}}},18425:(e,t,r)=>{"use strict";e.exports=verifier;var n=r(9691),i=r(13682);function invalid(e,t){return e.name+": "+t+(e.repeated&&t!=="array"?"[]":e.map&&t!=="object"?"{k:"+e.keyType+"}":"")+" expected"}function genVerifyValue(e,t,r,i){if(t.resolvedType){if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",invalid(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),o=0;o<s.length;++o)e("case %i:",t.resolvedType.values[s[o]]);e("break")("}")}else{e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}")}}else{switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",invalid(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",invalid(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",invalid(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",invalid(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",invalid(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",invalid(t,"buffer"));break}}return e}function genVerifyKey(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",invalid(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",invalid(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",invalid(t,"boolean key"));break}return e}function verifier(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected");var r=e.oneofsArray,n={};if(r.length)t("var p={}");for(var s=0;s<e.fieldsArray.length;++s){var o=e._fieldsArray[s].resolve(),a="m"+i.safeProp(o.name);if(o.optional)t("if(%s!=null&&m.hasOwnProperty(%j)){",a,o.name);if(o.map){t("if(!util.isObject(%s))",a)("return%j",invalid(o,"object"))("var k=Object.keys(%s)",a)("for(var i=0;i<k.length;++i){");genVerifyKey(t,o,"k[i]");genVerifyValue(t,o,s,a+"[k[i]]")("}")}else if(o.repeated){t("if(!Array.isArray(%s))",a)("return%j",invalid(o,"array"))("for(var i=0;i<%s.length;++i){",a);genVerifyValue(t,o,s,a+"[i]")("}")}else{if(o.partOf){var c=i.safeProp(o.partOf.name);if(n[o.partOf.name]===1)t("if(p%s===1)",c)("return%j",o.partOf.name+": multiple values");n[o.partOf.name]=1;t("p%s=1",c)}genVerifyValue(t,o,s,a)}if(o.optional)t("}")}return t("return null")}},42234:(e,t,r)=>{"use strict";var n=t;var i=r(4014);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1);var r=this.lookup(t);if(r){var n=e["@type"].charAt(0)==="."?e["@type"].slice(1):e["@type"];if(n.indexOf("/")===-1){n="/"+n}return this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/";var n="";var s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1);n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(s);if(o)e=o.decode(e.value)}if(!(e instanceof this.ctor)&&e instanceof i){var a=e.$type.toObject(e,t);var c=e.$type.fullName[0]==="."?e.$type.fullName.slice(1):e.$type.fullName;if(n===""){n=r}s=n+c;a["@type"]=s;return a}return this.toObject(e,t)}}},44064:(e,t,r)=>{"use strict";e.exports=Writer;var n=r(17289);var i;var s=n.LongBits,o=n.base64,a=n.utf8;function Op(e,t,r){this.fn=e;this.len=t;this.next=undefined;this.val=r}function noop(){}function State(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function Writer(){this.len=0;this.head=new Op(noop,0,0);this.tail=this.head;this.states=null}var c=function create(){return n.Buffer?function create_buffer_setup(){return(Writer.create=function create_buffer(){return new i})()}:function create_array(){return new Writer}};Writer.create=c();Writer.alloc=function alloc(e){return new n.Array(e)};if(n.Array!==Array)Writer.alloc=n.pool(Writer.alloc,n.Array.prototype.subarray);Writer.prototype._push=function push(e,t,r){this.tail=this.tail.next=new Op(e,t,r);this.len+=t;return this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){while(e>127){t[r++]=e&127|128;e>>>=7}t[r]=e}function VarintOp(e,t){this.len=e;this.next=undefined;this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer.prototype.uint32=function write_uint32(e){this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len;return this};Writer.prototype.int32=function write_int32(e){return e<0?this._push(writeVarint64,10,s.fromNumber(e)):this.uint32(e)};Writer.prototype.sint32=function write_sint32(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(e,t,r){while(e.hi){t[r++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[r++]=e.lo&127|128;e.lo=e.lo>>>7}t[r++]=e.lo}Writer.prototype.uint64=function write_uint64(e){var t=s.from(e);return this._push(writeVarint64,t.length(),t)};Writer.prototype.int64=Writer.prototype.uint64;Writer.prototype.sint64=function write_sint64(e){var t=s.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer.prototype.bool=function write_bool(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}Writer.prototype.fixed32=function write_fixed32(e){return this._push(writeFixed32,4,e>>>0)};Writer.prototype.sfixed32=Writer.prototype.fixed32;Writer.prototype.fixed64=function write_fixed64(e){var t=s.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer.prototype.sfixed64=Writer.prototype.fixed64;Writer.prototype.float=function write_float(e){return this._push(n.float.writeFloatLE,4,e)};Writer.prototype.double=function write_double(e){return this._push(n.float.writeDoubleLE,8,e)};var u=n.Array.prototype.set?function writeBytes_set(e,t,r){t.set(e,r)}:function writeBytes_for(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function write_bytes(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(n.isString(e)){var r=Writer.alloc(t=o.length(e));o.decode(e,r,0);e=r}return this.uint32(t)._push(u,t,e)};Writer.prototype.string=function write_string(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(writeByte,1,0)};Writer.prototype.fork=function fork(){this.states=new State(this);this.head=this.tail=new Op(noop,0,0);this.len=0;return this};Writer.prototype.reset=function reset(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new Op(noop,0,0);this.len=0}return this};Writer.prototype.ldelim=function ldelim(){var e=this.head,t=this.tail,r=this.len;this.reset().uint32(r);if(r){this.tail.next=e.next;this.tail=t;this.len+=r}return this};Writer.prototype.finish=function finish(){var e=this.head.next,t=this.constructor.alloc(this.len),r=0;while(e){e.fn(e.val,t,r);r+=e.len;e=e.next}return t};Writer._configure=function(e){i=e;Writer.create=c();i._configure()}},53861:(e,t,r)=>{"use strict";e.exports=BufferWriter;var n=r(44064);(BufferWriter.prototype=Object.create(n.prototype)).constructor=BufferWriter;var i=r(17289);function BufferWriter(){n.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=i._Buffer_allocUnsafe;BufferWriter.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&i.Buffer.prototype.set.name==="set"?function writeBytesBuffer_set(e,t,r){t.set(e,r)}:function writeBytesBuffer_copy(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}};BufferWriter.prototype.bytes=function write_bytes_buffer(e){if(i.isString(e))e=i._Buffer_from(e,"base64");var t=e.length>>>0;this.uint32(t);if(t)this._push(BufferWriter.writeBytesBuffer,t,e);return this};function writeStringBuffer(e,t,r){if(e.length<40)i.utf8.write(e,t,r);else if(t.utf8Write)t.utf8Write(e,r);else t.write(e,r)}BufferWriter.prototype.string=function write_string_buffer(e){var t=i.Buffer.byteLength(e);this.uint32(t);if(t)this._push(writeStringBuffer,t,e);return this};BufferWriter._configure()},69185:(e,t)=>{"use strict";
/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const r="[object ArrayBuffer]";class BufferSourceConverter{static isArrayBuffer(e){return Object.prototype.toString.call(e)===r}static toArrayBuffer(e){if(this.isArrayBuffer(e)){return e}if(e.byteLength===e.buffer.byteLength){return e.buffer}if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength){return e.buffer}return this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t){return e}if(this.isArrayBuffer(e)){return new t(e)}if(this.isArrayBufferView(e)){return new t(e.buffer,e.byteOffset,e.byteLength)}throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const r=BufferSourceConverter.toUint8Array(e);const n=BufferSourceConverter.toUint8Array(t);if(r.length!==n.byteLength){return false}for(let e=0;e<r.length;e++){if(r[e]!==n[e]){return false}}return true}static concat(...e){let t;if(Array.isArray(e[0])&&!(e[1]instanceof Function)){t=e[0]}else if(Array.isArray(e[0])&&e[1]instanceof Function){t=e[0]}else{if(e[e.length-1]instanceof Function){t=e.slice(0,e.length-1)}else{t=e}}let r=0;for(const e of t){r+=e.byteLength}const n=new Uint8Array(r);let i=0;for(const e of t){const t=this.toUint8Array(e);n.set(t,i);i+=t.length}if(e[e.length-1]instanceof Function){return this.toView(n,e[e.length-1])}return n.buffer}}const n="string";const i=/^[0-9a-f]+$/i;const s=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;const o=/^[a-zA-Z0-9-_]+$/;class Utf8Converter{static fromString(e){const t=unescape(encodeURIComponent(e));const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++){r[e]=t.charCodeAt(e)}return r.buffer}static toString(e){const t=BufferSourceConverter.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}const n=decodeURIComponent(escape(r));return n}}class Utf16Converter{static toString(e,t=false){const r=BufferSourceConverter.toArrayBuffer(e);const n=new DataView(r);let i="";for(let e=0;e<r.byteLength;e+=2){const r=n.getUint16(e,t);i+=String.fromCharCode(r)}return i}static fromString(e,t=false){const r=new ArrayBuffer(e.length*2);const n=new DataView(r);for(let r=0;r<e.length;r++){n.setUint16(r*2,e.charCodeAt(r),t)}return r}}class Convert{static isHex(e){return typeof e===n&&i.test(e)}static isBase64(e){return typeof e===n&&s.test(e)}static isBase64Url(e){return typeof e===n&&o.test(e)}static ToString(e,t="utf8"){const r=BufferSourceConverter.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return Utf16Converter.toString(r,true);case"utf16":case"utf16be":return Utf16Converter.toString(r);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e){return new ArrayBuffer(0)}switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Utf16Converter.fromString(e,true);case"utf16":case"utf16be":return Utf16Converter.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=BufferSourceConverter.toUint8Array(e);if(typeof btoa!=="undefined"){const e=this.ToString(t,"binary");return btoa(e)}else{return Buffer.from(t).toString("base64")}}static FromBase64(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!Convert.isBase64(t)){throw new TypeError("Argument 'base64Text' is not Base64 encoded")}if(typeof atob!=="undefined"){return this.FromBinary(atob(t))}else{return new Uint8Array(Buffer.from(t,"base64")).buffer}}static FromBase64Url(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!Convert.isBase64Url(t)){throw new TypeError("Argument 'base64url' is not Base64Url encoded")}return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=Convert.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return Utf8Converter.fromString(e);case"utf16":case"utf16be":return Utf16Converter.fromString(e);case"utf16le":case"usc2":return Utf16Converter.fromString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=Convert.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return Utf8Converter.toString(e);case"utf16":case"utf16be":return Utf16Converter.toString(e);case"utf16le":case"usc2":return Utf16Converter.toString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length;const r=new Uint8Array(t);for(let n=0;n<t;n++){r[n]=e.charCodeAt(n)}return r.buffer}static ToBinary(e){const t=BufferSourceConverter.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}return r}static ToHex(e){const t=BufferSourceConverter.toUint8Array(e);let r="";const n=t.length;for(let e=0;e<n;e++){const n=t[e];if(n<16){r+="0"}r+=n.toString(16)}return r}static FromHex(e){let t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!Convert.isHex(t)){throw new TypeError("Argument 'hexString' is not HEX encoded")}if(t.length%2){t=`0${t}`}const r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e=e+2){const n=t.slice(e,e+2);r[e/2]=parseInt(n,16)}return r.buffer}static ToUtf16String(e,t=false){return Utf16Converter.toString(e,t)}static FromUtf16String(e,t=false){return Utf16Converter.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4){for(let r=0;r<t;r++){e+="="}}return e}static formatString(e){return(e===null||e===void 0?void 0:e.replace(/[\n\r\t ]/g,""))||""}}Convert.DEFAULT_UTF8_ENCODING="utf8";function assign(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){r[e]=t[e]}}return r}function combine(...e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t));const r=new Uint8Array(t);let n=0;e.map((e=>new Uint8Array(e))).forEach((e=>{for(const t of e){r[n++]=t}}));return r.buffer}function isEqual(e,t){if(!(e&&t)){return false}if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++){if(r[t]!==n[t]){return false}}return true}t.BufferSourceConverter=BufferSourceConverter;t.Convert=Convert;t.assign=assign;t.combine=combine;t.isEqual=isEqual},33940:(e,t)=>{"use strict";
/*!
 Copyright (c) Peculiar Ventures, LLC
*/Object.defineProperty(t,"__esModule",{value:true});function getUTCDate(e){return new Date(e.getTime()+e.getTimezoneOffset()*6e4)}function getParametersValue(e,t,r){var n;if(e instanceof Object===false){return r}return(n=e[t])!==null&&n!==void 0?n:r}function bufferToHexCodes(e,t=0,r=e.byteLength-t,n=false){let i="";for(const s of new Uint8Array(e,t,r)){const e=s.toString(16).toUpperCase();if(e.length===1){i+="0"}i+=e;if(n){i+=" "}}return i.trim()}function checkBufferParams(e,t,r,n){if(!(t instanceof ArrayBuffer)){e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"';return false}if(!t.byteLength){e.error="Wrong parameter: inputBuffer has zero length";return false}if(r<0){e.error="Wrong parameter: inputOffset less than zero";return false}if(n<0){e.error="Wrong parameter: inputLength less than zero";return false}if(t.byteLength-r-n<0){e.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return false}return true}function utilFromBase(e,t){let r=0;if(e.length===1){return e[0]}for(let n=e.length-1;n>=0;n--){r+=e[e.length-1-n]*Math.pow(2,t*n)}return r}function utilToBase(e,t,r=-1){const n=r;let i=e;let s=0;let o=Math.pow(2,t);for(let r=1;r<8;r++){if(e<o){let e;if(n<0){e=new ArrayBuffer(r);s=r}else{if(n<r){return new ArrayBuffer(0)}e=new ArrayBuffer(n);s=n}const o=new Uint8Array(e);for(let e=r-1;e>=0;e--){const r=Math.pow(2,e*t);o[s-e-1]=Math.floor(i/r);i-=o[s-e-1]*r}return e}o*=Math.pow(2,t)}return new ArrayBuffer(0)}function utilConcatBuf(...e){let t=0;let r=0;for(const r of e){t+=r.byteLength}const n=new ArrayBuffer(t);const i=new Uint8Array(n);for(const t of e){i.set(new Uint8Array(t),r);r+=t.byteLength}return n}function utilConcatView(...e){let t=0;let r=0;for(const r of e){t+=r.length}const n=new ArrayBuffer(t);const i=new Uint8Array(n);for(const t of e){i.set(t,r);r+=t.length}return i}function utilDecodeTC(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=e[0]===255&&e[1]&128;const r=e[0]===0&&(e[1]&128)===0;if(t||r){this.warnings.push("Needlessly long format")}}const t=new ArrayBuffer(this.valueHex.byteLength);const r=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++){r[e]=0}r[0]=e[0]&128;const n=utilFromBase(r,8);const i=new ArrayBuffer(this.valueHex.byteLength);const s=new Uint8Array(i);for(let t=0;t<this.valueHex.byteLength;t++){s[t]=e[t]}s[0]&=127;const o=utilFromBase(s,8);return o-n}function utilEncodeTC(e){const t=e<0?e*-1:e;let r=128;for(let n=1;n<8;n++){if(t<=r){if(e<0){const e=r-t;const i=utilToBase(e,8,n);const s=new Uint8Array(i);s[0]|=128;return i}let i=utilToBase(t,8,n);let s=new Uint8Array(i);if(s[0]&128){const e=i.slice(0);const t=new Uint8Array(e);i=new ArrayBuffer(i.byteLength+1);s=new Uint8Array(i);for(let r=0;r<e.byteLength;r++){s[r+1]=t[r]}s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function isEqualBuffer(e,t){if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let e=0;e<r.length;e++){if(r[e]!==n[e]){return false}}return true}function padNumber(e,t){const r=e.toString(10);if(t<r.length){return""}const n=t-r.length;const i=new Array(n);for(let e=0;e<n;e++){i[e]="0"}const s=i.join("");return s.concat(r)}const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function toBase64(e,t=false,i=false,s=false){let o=0;let a=0;let c=0;let u="";const d=t?n:r;if(s){let t=0;for(let r=0;r<e.length;r++){if(e.charCodeAt(r)!==0){t=r;break}}e=e.slice(t)}while(o<e.length){const t=e.charCodeAt(o++);if(o>=e.length){a=1}const r=e.charCodeAt(o++);if(o>=e.length){c=1}const n=e.charCodeAt(o++);const s=t>>2;const p=(t&3)<<4|r>>4;let m=(r&15)<<2|n>>6;let y=n&63;if(a===1){m=y=64}else{if(c===1){y=64}}if(i){if(m===64){u+=`${d.charAt(s)}${d.charAt(p)}`}else{if(y===64){u+=`${d.charAt(s)}${d.charAt(p)}${d.charAt(m)}`}else{u+=`${d.charAt(s)}${d.charAt(p)}${d.charAt(m)}${d.charAt(y)}`}}}else{u+=`${d.charAt(s)}${d.charAt(p)}${d.charAt(m)}${d.charAt(y)}`}}return u}function fromBase64(e,t=false,i=false){const s=t?n:r;function indexOf(e){for(let t=0;t<64;t++){if(s.charAt(t)===e)return t}return 64}function test(e){return e===64?0:e}let o=0;let a="";while(o<e.length){const t=indexOf(e.charAt(o++));const r=o>=e.length?0:indexOf(e.charAt(o++));const n=o>=e.length?0:indexOf(e.charAt(o++));const i=o>=e.length?0:indexOf(e.charAt(o++));const s=test(t)<<2|test(r)>>4;const c=(test(r)&15)<<4|test(n)>>2;const u=(test(n)&3)<<6|test(i);a+=String.fromCharCode(s);if(n!==64){a+=String.fromCharCode(c)}if(i!==64){a+=String.fromCharCode(u)}}if(i){const e=a.length;let t=-1;for(let r=e-1;r>=0;r--){if(a.charCodeAt(r)!==0){t=r;break}}if(t!==-1){a=a.slice(0,t+1)}else{a=""}}return a}function arrayBufferToString(e){let t="";const r=new Uint8Array(e);for(const e of r){t+=String.fromCharCode(e)}return t}function stringToArrayBuffer(e){const t=e.length;const r=new ArrayBuffer(t);const n=new Uint8Array(r);for(let r=0;r<t;r++){n[r]=e.charCodeAt(r)}return r}const i=Math.log(2);function nearestPowerOf2(e){const t=Math.log(e)/i;const r=Math.floor(t);const n=Math.round(t);return r===n?r:n}function clearProps(e,t){for(const r of t){delete e[r]}}t.arrayBufferToString=arrayBufferToString;t.bufferToHexCodes=bufferToHexCodes;t.checkBufferParams=checkBufferParams;t.clearProps=clearProps;t.fromBase64=fromBase64;t.getParametersValue=getParametersValue;t.getUTCDate=getUTCDate;t.isEqualBuffer=isEqualBuffer;t.nearestPowerOf2=nearestPowerOf2;t.padNumber=padNumber;t.stringToArrayBuffer=stringToArrayBuffer;t.toBase64=toBase64;t.utilConcatBuf=utilConcatBuf;t.utilConcatView=utilConcatView;t.utilDecodeTC=utilDecodeTC;t.utilEncodeTC=utilEncodeTC;t.utilFromBase=utilFromBase;t.utilToBase=utilToBase},5370:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RingApi=void 0;const i=r(17060);const s=r(78758);const o=r(37284);const a=r(83449);const c=r(50394);const u=r(94569);const d=r(33956);const p=r(75917);const m=r(6350);const y=r(39839);const g=n(r(55061));const b=r(1321);const v=n(r(54129));class RingApi extends y.Subscribed{constructor(e){super();this.options=e;this.restClient=new i.RingRestClient(this.options);this.onRefreshTokenUpdated=this.restClient.onRefreshTokenUpdated.asObservable();if(e.debug){(0,p.enableDebug)()}const{locationIds:t,ffmpegPath:r}=e;if(t&&!t.length){(0,p.logError)('Your Ring config has `"locationIds": []`, which means no locations will be used and no devices will be found.')}if(r){(0,m.setFfmpegPath)(r)}}async fetchRingDevices(){const{doorbots:e,chimes:t,authorized_doorbots:r,stickup_cams:n,base_stations:s,beams_bridges:a,other:c}=await this.restClient.request({url:(0,i.clientApi)("ring_devices")}),u=[],d=[],p=[],m=[];c.forEach((e=>{switch(e.kind){case o.RingDeviceType.OnvifCamera:u.push(e);break;case o.RingDeviceType.IntercomHandsetAudio:d.push(e);break;case o.RingDeviceType.ThirdPartyGarageDoorOpener:p.push(e);break;default:m.push(e);break}}));return{doorbots:e,chimes:t,authorizedDoorbots:r,stickupCams:n,allCameras:[...e,...n,...r,...u],baseStations:s,beamBridges:a,onvifCameras:u,thirdPartyGarageDoorOpeners:p,intercoms:d,unknownDevices:m}}listenForDeviceUpdates(e,t,r){const{cameraStatusPollingSeconds:n}=this.options;if(!n){return}const i=[...e,...t,...r],s=(0,u.merge)(...i.map((e=>e.onRequestUpdate))),o=new u.Subject,a=n?o.pipe((0,d.debounceTime)(n*1e3)):u.EMPTY,c=e.reduce(((e,t)=>{e[t.id]=t;return e}),{}),p=t.reduce(((e,t)=>{e[t.id]=t;return e}),{}),m=r.reduce(((e,t)=>{e[t.id]=t;return e}),{});if(!e.length&&!t.length&&!r.length){return}this.addSubscriptions((0,u.merge)(s,a).pipe((0,d.throttleTime)(500),(0,d.switchMap)((()=>this.fetchRingDevices().catch((()=>null))))).subscribe((e=>{o.next(null);if(!e){return}e.allCameras.forEach((e=>{const t=c[e.id];if(t){t.updateData(e)}}));e.chimes.forEach((e=>{const t=p[e.id];if(t){t.updateData(e)}}));e.intercoms.forEach((e=>{const t=m[e.id];if(t){t.updateData(e)}}))})));if(n){o.next(null)}}async registerPushReceiver(e,t){const r=this.restClient._internalOnly_pushNotificationCredentials?.config&&this.restClient._internalOnly_pushNotificationCredentials,n=new g.default({firebase:{apiKey:"AIzaSyCv-hdFBmmdBBJadNy-TFwB-xN_H5m3Bk8",projectId:"ring-17770",messagingSenderId:"876313859327",appId:"1:876313859327:android:e10ec6ddb3c81f39"},credentials:r,debug:false}),s={},sendToDevice=(e,t)=>{s[e]?.processPushNotification(t)},a=new u.Subject;for(const t of e){s[t.id]=t}for(const e of t){s[e.id]=e}n.onCredentialsChanged((({newCredentials:e})=>{this.restClient._internalOnly_pushNotificationCredentials=e;a.next(e.fcm.token)}));this.addSubscriptions((0,u.combineLatest)([a,this.restClient.onSession.pipe((0,d.startWith)(undefined))]).subscribe((async([e])=>{try{await this.restClient.request({url:(0,i.clientApi)("device"),method:"PATCH",json:{device:{metadata:{...this.restClient.baseSessionMetadata,pn_dict_version:"2.0.0",pn_service:"fcm"},os:"android",push_notification_token:e}}})}catch(e){(0,p.logError)(e)}})));try{await n.connect()}catch(e){(0,p.logError)("Failed to connect push notification receiver");(0,p.logError)(e)}const c=Date.now();n.onNotification((({message:e})=>{if(Date.now()-c<2e3){(0,p.logInfo)("Ignoring push notification received in first two seconds after starting up");return}try{const t={};for(const r in e.data){try{t[r]=(0,v.default)({storeAsString:true}).parse(e.data[r])}catch{t[r]=e.data[r]}}const r=t;if("android_config"in r){const t=r.data?.device?.id;if(t){sendToDevice(t,r)}const n=r.android_config.category;if(n!==o.PushNotificationAction.Ding&&n!==o.PushNotificationAction.Motion&&n!==o.PushNotificationAction.IntercomDing){(0,p.logDebug)("Received v2 push notification with unknown category: "+n);(0,p.logDebug)(JSON.stringify(e))}}else if("data"in r&&"gcmData"in r.data&&"alarm_meta"in r.data.gcmData){const e=r.data.gcmData.alarm_meta.device_zid;if(e){sendToDevice(e,r)}}else{(0,p.logDebug)("Received push notification in unknown format");(0,p.logDebug)(JSON.stringify(e));return}}catch(e){(0,p.logError)(e)}}));if(r&&r?.fcm?.token===this.restClient._internalOnly_pushNotificationCredentials?.fcm?.token){a.next(r.fcm.token)}}async fetchRawLocations(){const{user_locations:e}=await this.restClient.request({url:(0,i.deviceApi)("locations")});if(!e){throw new Error("The Ring account which you used to generate a refresh token does not have any associated locations.  Please use an account that has access to at least one location.")}return e}fetchAmazonKeyLocks(){return this.restClient.request({url:"https://api.ring.com/integrations/amazonkey/v2/devices/lock_associations"})}async fetchAndBuildLocations(){const e=await this.fetchRawLocations(),{authorizedDoorbots:t,chimes:r,doorbots:n,allCameras:i,baseStations:o,beamBridges:u,intercoms:d}=await this.fetchRingDevices(),m=[...o,...u].map((e=>e.location_id)),y=i.map((e=>new a.RingCamera(e,n.includes(e)||t.includes(e)||e.kind.startsWith("doorbell"),this.restClient,this.options.avoidSnapshotBatteryDrain||false))),g=r.map((e=>new c.RingChime(e,this.restClient))),v=d.map((e=>new b.RingIntercom(e,this.restClient))),w=e.filter((e=>!Array.isArray(this.options.locationIds)||this.options.locationIds.includes(e.location_id))).map((e=>new s.Location(e,y.filter((t=>t.data.location_id===e.location_id)),g.filter((t=>t.data.location_id===e.location_id)),v.filter((t=>t.data.location_id===e.location_id)),{hasHubs:m.includes(e.location_id),hasAlarmBaseStation:o.some((t=>t.location_id===e.location_id)),locationModePollingSeconds:this.options.locationModePollingSeconds},this.restClient)));this.listenForDeviceUpdates(y,g,v);this.registerPushReceiver(y,v).catch((e=>{(0,p.logError)(e)}));return w}getLocations(){if(!this.locationsPromise){this.locationsPromise=this.fetchAndBuildLocations()}return this.locationsPromise}async getCameras(){const e=await this.getLocations();return e.reduce(((e,t)=>[...e,...t.cameras]),[])}getProfile(){return this.restClient.request({url:(0,i.clientApi)("profile")})}disconnect(){this.unsubscribe();if(!this.locationsPromise){return}this.getLocations().then((e=>e.forEach((e=>e.disconnect())))).catch((e=>{(0,p.logError)(e)}));this.restClient.clearTimeouts();(0,p.clearTimeouts)()}}t.RingApi=RingApi},6350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setFfmpegPath=setFfmpegPath;t.getFfmpegPath=getFfmpegPath;let r;function setFfmpegPath(e){r=e}function getFfmpegPath(){return r}},47359:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(5370),t);i(r(78758),t);i(r(83449),t);i(r(50394),t);i(r(86195),t);i(r(1321),t);i(r(37284),t)},78758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Location=void 0;const n=r(66944);const i=r(94569);const s=r(33956);const o=r(75917);const a=r(37284);const c=r(17060);const u=r(83449);const d=r(86195);const p=r(39839);const m="DeviceInfoDocGetList";function flattenDeviceData(e){return Object.assign({},e.general&&e.general.v2,e.device&&e.device.v1)}class Location extends p.Subscribed{constructor(e,t,r,n,a,c){super();this.locationDetails=e;this.cameras=t;this.chimes=r;this.intercoms=n;this.options=a;this.restClient=c;this.seq=1;this.onMessage=new i.Subject;this.onDataUpdate=new i.Subject;this.onDeviceDataUpdate=this.onDataUpdate.pipe((0,s.filter)((e=>e.datatype==="DeviceInfoDocType"&&Boolean(e.body))),(0,s.concatMap)((e=>e.body)),(0,s.map)(flattenDeviceData));this.onDeviceList=this.onMessage.pipe((0,s.filter)((e=>e.msg===m)));this.onDevices=this.onDeviceList.pipe((0,s.scan)(((e,{body:t,src:r})=>{if(!t){return e}if(!this.receivedAssetDeviceLists.includes(r)){this.receivedAssetDeviceLists.push(r)}return t.reduce(((e,t)=>{const n=flattenDeviceData(t),i=e.find((e=>e.zid===n.zid));if(i){i.updateData(n);return e}return[...e,new d.RingDevice(n,this,r)]}),e)}),[]),(0,s.distinctUntilChanged)(((e,t)=>e.length===t.length)),(0,s.filter)((()=>Boolean(this.assets&&this.assets.every((e=>this.receivedAssetDeviceLists.includes(e.uuid)))))),(0,s.shareReplay)(1));this.onSessionInfo=this.onDataUpdate.pipe((0,s.filter)((e=>e.msg==="SessionInfo")),(0,s.map)((e=>e.body)));this.onConnected=new i.BehaviorSubject(false);this.onLocationMode=new i.ReplaySubject(1);this.onLocationModeRequested=new i.Subject;this.reconnecting=false;this.disconnected=false;this.receivedAssetDeviceLists=[];this.offlineAssets=[];this.hasHubs=this.options.hasHubs;this.hasAlarmBaseStation=this.options.hasAlarmBaseStation;this.addSubscriptions(this.onDevices.subscribe(),this.onSessionInfo.subscribe((e=>{e.forEach((({connectionStatus:e,assetUuid:t})=>{const r=this.offlineAssets.includes(t),n=this.assets&&this.assets.find((e=>e.uuid===t));if(!n){return}if(e==="online"){if(r){this.requestList(m,t).catch((()=>{}));this.offlineAssets=this.offlineAssets.filter((e=>e!==t));(0,o.logInfo)(`Ring ${n.kind} ${t} has come back online`)}}else if(!r){(0,o.logError)(`Ring ${n.kind} ${t} is offline or on cellular backup.  Waiting for status to change`);this.offlineAssets.push(t)}}))})));if(!a.hasAlarmBaseStation&&a.locationModePollingSeconds){this.addSubscriptions((0,i.merge)(this.onLocationModeRequested,this.onLocationMode).pipe((0,s.debounceTime)(a.locationModePollingSeconds*1e3)).subscribe((()=>this.getLocationMode())));this.getLocationMode().catch(o.logError)}}get id(){return this.locationId}get locationId(){return this.locationDetails.location_id}get name(){return this.locationDetails.name}async createConnection(){if(this.disconnected){return Promise.resolve({disconnected:true})}(0,o.logInfo)("Creating location socket.io connection - "+this.name);if(process.version.startsWith("v15.")){(0,o.logError)("Node 15 is not currently supported by the Ring client. Please install the latest Node 14 instead. May not be able to fetch devices from Ring Alarm and Smart Lighting Hubs on this version of node.")}const{assets:e,ticket:t,host:r}=await this.restClient.request({url:(0,c.appApi)("clap/tickets?locationID="+this.id)}),i=e.filter(a.isWebSocketSupportedAsset);this.assets=i;this.receivedAssetDeviceLists.length=0;this.offlineAssets.length=0;if(!i.length){const e=`No assets (alarm hubs or beam bridges) found for location ${this.name} - ${this.id}`;(0,o.logError)(e);throw new Error(e)}const s=(0,n.connect)(`wss://${r}/?authcode=${t}&ack=false&EIO=3`,{transports:["websocket"]}),reconnect=()=>{if(this.reconnecting&&this.connectionPromise){return this.connectionPromise}this.onConnected.next(false);if(!this.disconnected){(0,o.logInfo)("Reconnecting location socket.io connection")}this.reconnecting=true;s.close();return this.connectionPromise=(0,o.delay)(1e3).then((()=>this.createConnection()))};this.reconnecting=false;s.on("DataUpdate",(e=>{if(e.datatype==="HubDisconnectionEventType"){(0,o.logInfo)("Location connection told to reconnect");return reconnect()}this.onDataUpdate.next(e)}));s.on("message",(e=>this.onMessage.next(e)));s.on("error",reconnect);s.on("disconnect",reconnect);return new Promise(((t,r)=>{s.once("connect",(()=>{t(s);this.onConnected.next(true);(0,o.logInfo)("Ring connected to socket.io server");e.forEach((e=>this.requestList(m,e.uuid)))}));s.once("error",r)})).catch(reconnect)}getConnection(){if(!this.hasHubs){return Promise.reject(new Error(`Location ${this.name} does not have any hubs`))}if(this.connectionPromise){return this.connectionPromise}return this.connectionPromise=this.createConnection()}async sendMessage(e){const t=await this.getConnection();e.seq=this.seq++;t.emit("message",e)}async sendCommandToSecurityPanel(e,t){const r=await this.getSecurityPanel();r.sendCommand(e,t)}async setAlarmMode(e,t){const r=await this.getSecurityPanel(),n=(0,i.firstValueFrom)(r.onData.pipe((0,s.skip)(1)));await this.sendCommandToSecurityPanel("security-panel.switch-mode",{mode:e,bypass:t});const o=await n;if(o.mode!==e){throw new Error(`Failed to set alarm mode to "${e}".  Sensors may require bypass, which can only be done in the Ring app.`)}}async getAlarmMode(){const e=await this.getSecurityPanel();return e.data.mode}soundSiren(){return this.sendCommandToSecurityPanel("security-panel.sound-siren")}silenceSiren(){return this.sendCommandToSecurityPanel("security-panel.silence-siren")}setLightGroup(e,t,r=60){return this.restClient.request({method:"POST",url:`https://api.ring.com/groups/v1/locations/${this.id}/groups/${e}/devices`,json:{lights_on:{duration_seconds:r,enabled:t}}})}getNextMessageOfType(e,t){return(0,i.firstValueFrom)(this.onMessage.pipe((0,s.filter)((r=>r.msg===e&&r.src===t)),(0,s.map)((e=>e.body))))}requestList(e,t){return this.sendMessage({msg:e,dst:t})}async getList(e,t){await this.requestList(e,t);return this.getNextMessageOfType(e,t)}async getDevices(){if(!this.hasHubs){return Promise.resolve([])}if(!this.connectionPromise){await this.getConnection()}return(0,i.firstValueFrom)(this.onDevices)}getRoomList(e){return this.getList("RoomGetList",e)}async getSecurityPanel(){if(this.securityPanel){return this.securityPanel}const e=await this.getDevices(),t=e.find((e=>e.data.deviceType===a.RingDeviceType.SecurityPanel));if(!t){throw new Error(`Could not find a security panel for location ${this.name} - ${this.id}`)}return this.securityPanel=t}disarm(){return this.setAlarmMode("none")}armHome(e){return this.setAlarmMode("some",e)}armAway(e){return this.setAlarmMode("all",e)}getHistory(e={}){e.maxLevel=e.maxLevel||50;return this.restClient.request({url:(0,c.appApi)(`rs/history${(0,u.getSearchQueryString)({accountId:this.id,...e})}`)})}getCameraEvents(e={}){return this.restClient.request({url:(0,c.clientApi)(`locations/${this.id}/events${(0,u.getSearchQueryString)(e)}`)})}getAccountMonitoringStatus(){return this.restClient.request({url:(0,c.appApi)("rs/monitoring/accounts/"+this.id)})}triggerAlarm(e){const t=Date.now(),r=(0,o.generateUuid)(),n=this.assets&&this.assets.find((e=>e.kind==="base_station_v1"));if(!n){throw new Error("Cannot dispatch panic events without an alarm base station")}return this.restClient.request({method:"POST",url:(0,c.appApi)(`rs/monitoring/accounts/${this.id}/assets/${n.uuid}/userAlarm`),json:{alarmSessionUuid:r,currentTsMs:t,eventOccurredTime:t,signalType:e}})}triggerBurglarAlarm(){return this.triggerAlarm(a.DispatchSignalType.Burglar)}triggerFireAlarm(){return this.triggerAlarm(a.DispatchSignalType.Fire)}async getLocationMode(){this.onLocationModeRequested.next(null);const e=await this.restClient.request({method:"GET",url:(0,c.appApi)(`mode/location/${this.id}`)});this.onLocationMode.next(e.mode);return e}async setLocationMode(e){const t=await this.restClient.request({method:"POST",url:(0,c.appApi)(`mode/location/${this.id}`),json:{mode:e}});this.onLocationMode.next(t.mode);return t}async disableLocationModes(){await this.restClient.request({method:"DELETE",url:(0,c.appApi)(`mode/location/${this.id}/settings`)});this.onLocationMode.next("disabled")}async enableLocationModes(){const e=await this.restClient.request({method:"POST",url:(0,c.appApi)(`mode/location/${this.id}/settings/setup`)});await this.getLocationMode();return e}getLocationModeSettings(){return this.restClient.request({method:"GET",url:(0,c.appApi)(`mode/location/${this.id}/settings`)})}setLocationModeSettings(e){return this.restClient.request({method:"POST",url:(0,c.appApi)(`mode/location/${this.id}/settings`),json:e})}getLocationModeSharing(){return this.restClient.request({method:"GET",url:(0,c.appApi)(`mode/location/${this.id}/sharing`)})}setLocationModeSharing(e){return this.restClient.request({method:"POST",url:(0,c.appApi)(`mode/location/${this.id}/sharing`),json:{sharedUsersEnabled:e}})}async supportsLocationModeSwitching(){if(this.hasAlarmBaseStation||!this.cameras.length){return false}const e=await this.getLocationMode(),{mode:t,readOnly:r}=e;(0,o.logDebug)("Location Mode: "+JSON.stringify(e));return!r&&!a.disabledLocationModes.includes(t)}disconnect(){this.disconnected=true;this.unsubscribe();this.cameras.forEach((e=>e.disconnect()));this.getDevices().then((e=>{e.forEach((e=>e.disconnect()))})).catch(o.logError);if(this.connectionPromise){this.connectionPromise.then((e=>e.close())).catch(o.logError)}}}t.Location=Location},17060:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RingRestClient=void 0;t.clientApi=clientApi;t.deviceApi=deviceApi;t.commandsApi=commandsApi;t.appApi=appApi;const i=r(75917);const s=r(94569);const o=n(r(39491));const a={responseType:"json",method:"GET",timeout:2e4},c={7050:"NO_ASSET",7019:"ASSET_OFFLINE",7061:"ASSET_CELL_BACKUP",7062:"UPDATING",7063:"MAINTENANCE"},u="https://api.ring.com/clients_api/",d="https://api.ring.com/devices/v1/",p="https://api.ring.com/commands/v1/",m="https://prd-api-us.prd.rings.solutions/api/v1/",y=11;function clientApi(e){return u+e}function deviceApi(e){return d+e}function commandsApi(e){return p+e}function appApi(e){return m+e}async function responseToError(e){const t=new Error;t.response={headers:e.headers,status:e.status,body:null};try{const r=await e.text();try{t.response.body=JSON.parse(r)}catch(e){t.response.body=r}}catch(e){}return t}async function requestWithRetry(e){try{if(e.json||e.responseType==="json"){e.headers={...e.headers,"Content-Type":"application/json",Accept:"application/json"};if(e.json){e.body=JSON.stringify(e.json)}delete e.json}const t={...a,...e};if(t.timeout&&!t.signal){t.signal=AbortSignal.timeout(t.timeout)}const r=await fetch(t.url,t),n=r.headers;if(!r.ok){const e=await responseToError(r);throw e}let i;if(t.responseType==="buffer"){const e=await r.arrayBuffer();i=Buffer.from(e)}else{const e=await r.text();try{i=JSON.parse(e)}catch(t){i=e}}if(i!==null&&typeof i==="object"){const e=n.get("date");if(e){i.responseTimestamp=new Date(e).getTime()}const t=n.get("x-time-millis");if(t){i.timeMillis=Number(t)}}return i}catch(t){if(!t.response&&!e.allowNoResponse){(0,i.logError)(`Failed to reach Ring server at ${e.url}.  ${t.message}.  Trying again in 5 seconds...`);if(t.message.includes("NGHTTP2_ENHANCE_YOUR_CALM")){(0,i.logError)(`There is a known issue with your current NodeJS version (${process.version}).  Please see https://github.com/dgreif/ring/wiki/NGHTTP2_ENHANCE_YOUR_CALM-Error for details`)}(0,i.logDebug)(t);await(0,i.delay)(5e3);return requestWithRetry(e)}throw t}}function parseAuthConfig(e){if(!e){return}try{const t=JSON.parse((0,i.fromBase64)(e));(0,o.default)(t);(0,o.default)(t.rt);return t}catch(t){return{rt:e}}}class RingRestClient{clearPreviousAuth(){this._authPromise=undefined}get authPromise(){if(!this._authPromise){const e=this.getAuth();this._authPromise=e;e.then((({expires_in:t})=>{const r=setTimeout((()=>{if(this._authPromise===e){this.clearPreviousAuth()}}),((t||3600)-60)*1e3);this.timeouts.push(r)})).catch((()=>{}))}return this._authPromise}constructor(e){this.authOptions=e;this.refreshToken="refreshToken"in this.authOptions?this.authOptions.refreshToken:undefined;this.authConfig=parseAuthConfig(this.refreshToken);this.hardwareIdPromise=this.authConfig?.hid||(0,i.getHardwareId)(this.authOptions.systemId);this.timeouts=[];this.sessionPromise=undefined;this.using2fa=false;this.onRefreshTokenUpdated=new s.ReplaySubject(1);this.onSession=new s.ReplaySubject(1);this.baseSessionMetadata={api_version:y,device_model:this.authOptions.controlCenterDisplayName??"ring-client-api"}}getGrantData(e){if(this.authConfig?.rt&&!e){return{grant_type:"refresh_token",refresh_token:this.authConfig.rt}}const{authOptions:t}=this;if("email"in t){return{grant_type:"password",password:t.password,username:t.email}}throw new Error("Refresh token is not valid.  Unable to authenticate with Ring servers.  See https://github.com/dgreif/ring/wiki/Refresh-Tokens")}async getAuth(e){const t=this.getGrantData(e);try{const r=await this.hardwareIdPromise,n=await requestWithRetry({url:"https://oauth.ring.com/oauth/token",json:{client_id:"ring_official_android",scope:"client",...t},method:"POST",headers:{"2fa-support":"true","2fa-code":e||"",hardware_id:r,"User-Agent":"android:com.ringapp"}}),s=this.refreshToken;this.authConfig={...this.authConfig,rt:n.refresh_token,hid:r};this.refreshToken=(0,i.toBase64)(JSON.stringify(this.authConfig));this.onRefreshTokenUpdated.next({oldRefreshToken:s,newRefreshToken:this.refreshToken});return{...n,refresh_token:this.refreshToken}}catch(e){if(t.refresh_token){this.refreshToken=undefined;this.authConfig=undefined;(0,i.logError)(e);return this.getAuth()}const r=e.response||{},n=r.body||{},s="error"in n&&typeof n.error==="string"?n.error:"";if(r.status===412||r.status===400&&s.startsWith("Verification Code")){this.using2fa=true;if(r.status===400){this.promptFor2fa="Invalid 2fa code entered.  Please try again.";throw new Error(s)}if("tsv_state"in n){const{tsv_state:e,phone:t}=n,r=e==="totp"?"from your authenticator app":`sent to ${t} via ${e}`;this.promptFor2fa=`Please enter the code ${r}`}else{this.promptFor2fa="Please enter the code sent to your text/email"}throw new Error("Your Ring account is configured to use 2-factor authentication (2fa).  See https://github.com/dgreif/ring/wiki/Refresh-Tokens for details.")}const o="refreshToken"in this.authOptions?"refresh token is":"email and password are",a="Failed to fetch oauth token from Ring. "+("error_description"in n&&n.error_description==="too many requests from dependency service"?"You have requested too many 2fa codes.  Ring limits 2fa to 10 codes within 10 minutes.  Please try again in 10 minutes.":`Verify that your ${o} correct.`)+` (error: ${s})`;(0,i.logError)(e.response||e);(0,i.logError)(a);throw new Error(a)}}async fetchNewSession(e){return requestWithRetry({url:clientApi("session"),json:{device:{hardware_id:await this.hardwareIdPromise,metadata:this.baseSessionMetadata,os:"android"}},method:"POST",headers:{authorization:`Bearer ${e.access_token}`}})}getSession(){return this.authPromise.then((async e=>{try{const t=await this.fetchNewSession(e);this.onSession.next(t);return t}catch(e){const t=e.response||{};if(t.status===401){await this.refreshAuth();return this.getSession()}if(t.status===429){const t=e.response.headers.get("retry-after"),r=isNaN(t)?200:Number.parseInt(t,10);(0,i.logError)(`Session response rate limited. Waiting to retry after ${r} seconds`);await(0,i.delay)((r+1)*1e3);(0,i.logInfo)("Retrying session request");return this.getSession()}throw e}}))}async refreshAuth(){this.clearPreviousAuth();await this.authPromise}refreshSession(){this.sessionPromise=this.getSession();this.sessionPromise.finally((()=>{const e=setTimeout((()=>{this.refreshSession()}),12*60*60*1e3);this.timeouts.push(e)})).catch((e=>(0,i.logError)(e)))}async request(e){const t=await this.hardwareIdPromise,r=e.url,n=this.sessionPromise;try{await n;const r=await this.authPromise;return await requestWithRetry({...e,headers:{...e.headers,authorization:`Bearer ${r.access_token}`,hardware_id:t,"User-Agent":"android:com.ringapp"}})}catch(s){const o=s.response||{};if(o.status===401){await this.refreshAuth();return this.request(e)}if(o.status===504){await(0,i.delay)(5e3);return this.request(e)}if(o.status===404&&o.body&&Array.isArray(o.body.errors)){const t=o.body.errors,n=t.map((e=>c[e])).filter((e=>e)).join(", ");if(n){(0,i.logError)(`http request failed.  ${r} returned errors: (${n}).  Trying again in 20 seconds`);await(0,i.delay)(2e4);return this.request(e)}(0,i.logError)(`http request failed.  ${r} returned unknown errors: (${(0,i.stringify)(t)}).`)}if(o.status===404&&r.startsWith(u)){(0,i.logError)("404 from endpoint "+r);if(o.body?.error?.includes(t)){(0,i.logError)("Session hardware_id not found.  Creating a new session and trying again.");if(this.sessionPromise===n){this.refreshSession()}return this.request(e)}throw new Error("Not found with response: "+(0,i.stringify)(o.body))}if(o.status){(0,i.logError)(`Request to ${r} failed with status ${o.status}. Response body: ${(0,i.stringify)(o.body)}`)}else if(!e.allowNoResponse){(0,i.logError)(`Request to ${r} failed:`);(0,i.logError)(s)}throw s}}getCurrentAuth(){return this.authPromise}clearTimeouts(){this.timeouts.forEach(clearTimeout)}get _internalOnly_pushNotificationCredentials(){return this.authConfig?.pnc}set _internalOnly_pushNotificationCredentials(e){if(!this.refreshToken||!this.authConfig){throw new Error("Cannot set push notification credentials without a refresh token")}const t=this.refreshToken;this.authConfig={...this.authConfig,pnc:e};const r=(0,i.toBase64)(JSON.stringify(this.authConfig));if(r===t){return}this.refreshToken=r;this.onRefreshTokenUpdated.next({oldRefreshToken:t,newRefreshToken:r})}}t.RingRestClient=RingRestClient},83449:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RingCamera=void 0;t.getBatteryLevel=getBatteryLevel;t.getSearchQueryString=getSearchQueryString;t.cleanSnapshotUuid=cleanSnapshotUuid;const n=r(37284);const i=r(17060);const s=r(94569);const o=r(33956);const a=r(75917);const c=r(39839);const u=r(58976);const d=r(52172);const p=r(58162);const m=15,y=24*60*60*1e3;function parseBatteryLife(e){if(e===null||e===undefined){return null}const t=typeof e==="number"?e:Number.parseFloat(e);if(isNaN(t)){return null}return t}function getStartOfToday(){return new Date((new Date).toLocaleDateString()).getTime()}function getEndOfToday(){return getStartOfToday()+y-1}function getBatteryLevel(e){const t=[parseBatteryLife(e.battery_life),parseBatteryLife(e.battery_life_2)].filter((e=>e!==null)),{health:r}=e;if(!t.length||r&&!r.battery_percentage&&!r.battery_present&&!r.second_battery_percentage){return null}return Math.min(...t)}function getSearchQueryString(e){const t=Object.entries(e).map((([e,t])=>{if(t===undefined){return""}if(e==="olderThanId"){e="pagination_key"}return`${e}=${t}`})).filter((e=>e)).join("&");return t.length?`?${t}`:""}function cleanSnapshotUuid(e){if(!e){return e}return e.replace(/:.*$/,"")}class RingCamera extends c.Subscribed{constructor(e,t,r,i){super();this.initialData=e;this.isDoorbot=t;this.restClient=r;this.avoidSnapshotBatteryDrain=i;this.onRequestUpdate=new s.Subject;this.onNewNotification=new s.Subject;this.onActiveNotifications=new s.BehaviorSubject([]);this.onDoorbellPressed=this.onNewNotification.pipe((0,o.filter)((e=>e.android_config.category===n.PushNotificationAction.Ding)),(0,o.share)());this.onMotionDetected=this.onActiveNotifications.pipe((0,o.map)((e=>e.some((e=>e.android_config.category===n.PushNotificationAction.Motion)))),(0,o.distinctUntilChanged)(),(0,o.share)({connector:()=>new s.ReplaySubject(1),resetOnError:false,resetOnComplete:false,resetOnRefCountZero:false}));this.onMotionStarted=this.onMotionDetected.pipe((0,o.filter)((e=>e)),(0,o.map)((()=>null)),(0,o.share)());this.lastSnapshotTimestamp=0;this.lastSnapshotTimestampLocal=0;this.fetchingSnapshot=false;this.id=this.initialData.id;this.deviceType=this.initialData.kind;this.model=n.RingCameraModel[this.initialData.kind]||"Unknown Model";this.onData=new s.BehaviorSubject(this.initialData);this.hasLight=this.initialData.led_status!==undefined;this.hasSiren=this.initialData.siren_status!==undefined;this.onBatteryLevel=this.onData.pipe((0,o.map)((e=>{if(!("battery_life"in e)){return null}return getBatteryLevel(e)})),(0,o.distinctUntilChanged)());this.onInHomeDoorbellStatus=this.onData.pipe((0,o.map)((({settings:{chime_settings:e}})=>Boolean(e?.enable))),(0,o.distinctUntilChanged)());this.addSubscriptions(this.restClient.onSession.pipe((0,o.startWith)(undefined),(0,o.throttleTime)(1e3)).subscribe((()=>{this.subscribeToDingEvents().catch((t=>{(0,a.logError)("Failed to subscribe "+e.description+" to ding events");(0,a.logError)(t)}));this.subscribeToMotionEvents().catch((t=>{(0,a.logError)("Failed to subscribe "+e.description+" to motion events");(0,a.logError)(t)}))})))}updateData(e){this.onData.next(e)}requestUpdate(){this.onRequestUpdate.next(null)}get data(){return this.onData.getValue()}get name(){return this.data.description}get activeNotifications(){return this.onActiveNotifications.getValue()}get latestNotification(){const e=this.activeNotifications;return e[e.length-1]}get latestNotificationSnapshotUuid(){const e=this.latestNotification;return e?.img?.snapshot_uuid}get batteryLevel(){if(!("battery_life"in this.data)){return null}return getBatteryLevel(this.data)}get hasBattery(){return this.batteryLevel!==null}get hasLowBattery(){return this.data.alerts.battery==="low"}get isCharging(){if(!("external_connection"in this.data)){return false}return this.data.external_connection}get operatingOnBattery(){return this.hasBattery&&this.data.settings.power_mode!=="wired"}get isOffline(){return this.data.alerts.connection==="offline"}get isRingEdgeEnabled(){return this.data.settings.sheila_settings.local_storage_enabled===true}get hasInHomeDoorbell(){const{chime_settings:e}=this.data.settings;return this.isDoorbot&&Boolean(e&&[n.DoorbellType.Mechanical,n.DoorbellType.Digital].includes(e.type))}doorbotUrl(e=""){return(0,i.clientApi)(`doorbots/${this.id}/${e}`)}deviceUrl(e=""){return(0,i.deviceApi)(`devices/${this.id}/${e}`)}async setLight(e){if(!this.hasLight){return false}const t=e?"on":"off";await this.restClient.request({method:"PUT",url:this.doorbotUrl("floodlight_light_"+t)});this.updateData({...this.data,led_status:t});return true}async setSiren(e){if(!this.hasSiren){return false}await this.restClient.request({method:"PUT",url:this.doorbotUrl("siren_"+(e?"on":"off"))});const t=e?1:0;this.updateData({...this.data,siren_status:{seconds_remaining:t}});return true}async setSettings(e){await this.restClient.request({method:"PUT",url:this.doorbotUrl(),json:{doorbot:{settings:e}}});this.requestUpdate()}async setDeviceSettings(e){const t=await this.restClient.request({method:"PATCH",url:this.deviceUrl("settings"),json:e});this.requestUpdate();return t}getDeviceSettings(){return this.restClient.request({method:"GET",url:this.deviceUrl("settings")})}async setInHomeDoorbell(e){if(!this.hasInHomeDoorbell){return false}await this.setSettings({chime_settings:{enable:e}});return true}async getHealth(){const e=await this.restClient.request({url:this.doorbotUrl("health")});return e.device_health}async createStreamingConnection(e){const t=await this.restClient.request({method:"POST",url:(0,i.appApi)("clap/ticket/request/signalsocket")}).catch((e=>{throw e}));return new u.WebrtcConnection(t.ticket,this,e)}async startLiveCall(e={}){const t=await this.createStreamingConnection(e);return new d.StreamingSession(this,t)}removeDingById(e){const t=this.activeNotifications,r=t.filter((({data:t})=>t.event.ding.id!==e));this.onActiveNotifications.next(r)}processPushNotification(e){if(!("android_config"in e)||!("event"in e.data)||!("ding"in e.data?.event)){return}const t=this.activeNotifications,r=e.data.event.ding.id;this.onActiveNotifications.next(t.filter((e=>e.data.event.ding.id!==r)).concat([e]));this.onNewNotification.next(e);setTimeout((()=>{this.removeDingById(r)}),65*1e3)}getEvents(e={}){return this.restClient.request({url:(0,i.clientApi)(`locations/${this.data.location_id}/devices/${this.id}/events${getSearchQueryString(e)}`)})}videoSearch({dateFrom:e,dateTo:t,order:r="asc"}={dateFrom:getStartOfToday(),dateTo:getEndOfToday()}){return this.restClient.request({url:(0,i.clientApi)(`video_search/history?doorbot_id=${this.id}&date_from=${e}&date_to=${t}&order=${r}&api_version=11&includes%5B%5D=pva`)})}getPeriodicalFootage({startAtMs:e,endAtMs:t}={startAtMs:getStartOfToday(),endAtMs:getEndOfToday()}){return this.restClient.request({url:`https://api.ring.com/recordings/public/footages/${this.id}?start_at_ms=${e}&end_at_ms=${t}&kinds=online_periodical&kinds=offline_periodical`})}async getRecordingUrl(e,{transcoded:t=false}={}){const r=t?"recording":"share/play",n=await this.restClient.request({url:(0,i.clientApi)(`dings/${e}/${r}?disable_redirect=true`)});return n.url}isTimestampInLifeTime(e){return e<this.snapshotLifeTime}get snapshotsAreBlocked(){return this.data.settings.motion_detection_enabled===false}get snapshotLifeTime(){return this.avoidSnapshotBatteryDrain&&this.operatingOnBattery?600*1e3:10*1e3}get currentTimestampAge(){return Date.now()-this.lastSnapshotTimestampLocal}get hasSnapshotWithinLifetime(){return this.isTimestampInLifeTime(this.currentTimestampAge)}checkIfSnapshotsAreBlocked(){if(this.snapshotsAreBlocked){throw new Error(`Motion detection is disabled for ${this.name}, which prevents snapshots from this camera.  This can be caused by Modes settings or by turning off the Record Motion setting.`)}if(this.isOffline){throw new Error(`Cannot fetch snapshot for ${this.name} because it is offline`)}}shouldUseExistingSnapshotPromise(){if(this.fetchingSnapshot){return true}if(this.hasSnapshotWithinLifetime){(0,a.logDebug)(`Snapshot for ${this.name} is still within its life time (${this.currentTimestampAge/1e3}s old)`);return true}if(!this.avoidSnapshotBatteryDrain||!this.operatingOnBattery){return false}}async getSnapshot({uuid:e}={}){if(this.lastSnapshotPromise&&this.shouldUseExistingSnapshotPromise()){return this.lastSnapshotPromise}this.checkIfSnapshotsAreBlocked();this.lastSnapshotPromise=Promise.race([this.getNextSnapshot(e?{uuid:e}:{afterMs:this.lastSnapshotTimestamp,force:true}),(0,a.delay)(m*1e3).then((()=>{const e=this.operatingOnBattery?".  This is normal behavior since this camera is unable to capture snapshots while streaming":"";throw new Error(`Snapshot for ${this.name} (${this.deviceType} - ${this.model}) failed to refresh after ${m} seconds${e}`)}))]);try{await this.lastSnapshotPromise}catch(e){this.lastSnapshotPromise=undefined;throw e}this.fetchingSnapshot=false;return this.lastSnapshotPromise}async getNextSnapshot({afterMs:e,maxWaitMs:t,force:r,uuid:n}){const i=await this.restClient.request({url:`https://app-snaps.ring.com/snapshots/next/${this.id}${(0,a.buildSearchString)({"after-ms":e,"max-wait-ms":t,extras:r?"force":undefined,uuid:cleanSnapshotUuid(n)})}`,responseType:"buffer",headers:{accept:"image/jpeg"},allowNoResponse:true}),{responseTimestamp:s,timeMillis:o}=i,c=Math.abs(s-o);this.lastSnapshotTimestamp=o;this.lastSnapshotTimestampLocal=Date.now()-c;return i}getSnapshotByUuid(e){return this.restClient.request({url:(0,i.clientApi)("snapshots/uuid?uuid="+cleanSnapshotUuid(e)),responseType:"buffer",headers:{accept:"image/jpeg"}})}async recordToFile(e,t=30){const r=await this.streamVideo({output:["-t",t.toString(),e]});await(0,s.firstValueFrom)(r.onCallEnded)}async streamVideo(e){const t=await this.startLiveCall();await t.startTranscoding(e);return t}createSimpleWebRtcSession(){return new p.SimpleWebRtcSession(this,this.restClient)}subscribeToDingEvents(){return this.restClient.request({method:"POST",url:this.doorbotUrl("subscribe")})}unsubscribeFromDingEvents(){return this.restClient.request({method:"POST",url:this.doorbotUrl("unsubscribe")})}subscribeToMotionEvents(){return this.restClient.request({method:"POST",url:this.doorbotUrl("motions_subscribe")})}unsubscribeFromMotionEvents(){return this.restClient.request({method:"POST",url:this.doorbotUrl("motions_unsubscribe")})}disconnect(){this.unsubscribe()}}t.RingCamera=RingCamera},50394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RingChime=void 0;const n=r(37284);const i=r(17060);const s=r(94569);const o=["ding_audio_id","ding_audio_user_id","motion_audio_id","motion_audio_user_id"];class RingChime{constructor(e,t){this.initialData=e;this.restClient=t;this.onRequestUpdate=new s.Subject;this.id=this.initialData.id;this.deviceType=this.initialData.kind;this.model=n.ChimeModel[this.deviceType]||"Chime";this.onData=new s.BehaviorSubject(this.initialData)}updateData(e){this.onData.next(e)}requestUpdate(){this.onRequestUpdate.next(null)}get data(){return this.onData.getValue()}get name(){return this.data.description}get description(){return this.data.description}get volume(){return this.data.settings.volume}getRingtones(){return this.restClient.request({url:(0,i.clientApi)("ringtones")})}async getRingtoneByDescription(e,t){const r=await this.getRingtones(),n=r.audios.find((r=>r.available&&r.description===e&&r.kind===t));if(!n){throw new Error("Requested ringtone not found")}return n}chimeUrl(e=""){return(0,i.clientApi)(`chimes/${this.id}/${e}`)}playSound(e){return this.restClient.request({url:this.chimeUrl("play_sound"),method:"POST",json:{kind:e}})}async snooze(e){await this.restClient.request({url:this.chimeUrl("do_not_disturb"),method:"POST",json:{time:e}});this.requestUpdate()}async clearSnooze(){await this.restClient.request({url:this.chimeUrl("do_not_disturb"),method:"POST"});this.requestUpdate()}async updateChime(e){await this.restClient.request({url:this.chimeUrl(),method:"PUT",json:{chime:e}});this.requestUpdate();return Object.keys(e.settings||{}).some((e=>o.includes(e)))}setVolume(e){if(e<0||e>11){throw new Error(`Volume for ${this.name} must be between 0 and 11, got ${e}`)}return this.updateChime({settings:{volume:e}})}async getHealth(){const e=await this.restClient.request({url:(0,i.clientApi)(`chimes/${this.id}/health`)});return e.device_health}}t.RingChime=RingChime},86195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RingDevice=void 0;const n=r(94569);const i=r(37284);const s=r(33956);const o=r(39839);const a=r(75917);class RingDevice extends o.Subscribed{constructor(e,t,r){super();this.initialData=e;this.location=t;this.assetId=r;this.onData=new n.BehaviorSubject(this.initialData);this.zid=this.initialData.zid;this.id=this.zid;this.deviceType=this.initialData.deviceType;this.categoryId=this.initialData.categoryId;this.onComponentDevices=this.location.onDevices.pipe((0,s.map)((e=>e.filter((({data:e})=>e.parentZid===this.id)))));this.addSubscriptions(t.onDeviceDataUpdate.pipe((0,s.filter)((e=>e.zid===this.zid))).subscribe((e=>this.updateData(e))))}updateData(e){this.onData.next(Object.assign({},this.data,e))}get data(){return this.onData.getValue()}get name(){return this.data.name}get supportsVolume(){return i.deviceTypesWithVolume.includes(this.data.deviceType)&&this.data.volume!==undefined}setVolume(e){if(isNaN(e)||e<0||e>1){throw new Error("Volume must be between 0 and 1")}if(!this.supportsVolume){throw new Error(`Volume can only be set on ${i.deviceTypesWithVolume.join(", ")}`)}return this.setInfo({device:{v1:{volume:e}}})}setInfo(e){return this.location.sendMessage({msg:"DeviceInfoSet",datatype:"DeviceInfoSetType",dst:this.assetId,body:[{zid:this.zid,...e}]})}sendCommand(e,t={}){this.setInfo({command:{v1:[{commandType:e,data:t}]}}).catch(a.logError)}toString(){return this.toJSON()}toJSON(){return JSON.stringify({data:this.data},null,2)}disconnect(){this.unsubscribe()}}t.RingDevice=RingDevice},1321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RingIntercom=void 0;const n=r(37284);const i=r(17060);const s=r(94569);const o=r(33956);const a=r(83449);const c=r(75917);class RingIntercom{constructor(e,t){this.initialData=e;this.restClient=t;this.onRequestUpdate=new s.Subject;this.onDing=new s.Subject;this.onUnlocked=new s.Subject;this.id=this.initialData.id;this.deviceType=this.initialData.kind;this.onData=new s.BehaviorSubject(this.initialData);this.onBatteryLevel=this.onData.pipe((0,o.map)((e=>(0,a.getBatteryLevel)(e))),(0,o.distinctUntilChanged)());if(!e.subscribed){this.subscribeToDingEvents().catch((t=>{(0,c.logError)("Failed to subscribe "+e.description+" to ding events");(0,c.logError)(t)}))}}updateData(e){this.onData.next(e)}requestUpdate(){this.onRequestUpdate.next(null)}get data(){return this.onData.getValue()}get name(){return this.data.description}get isOffline(){return this.data.alerts.connection==="offline"}get batteryLevel(){return(0,a.getBatteryLevel)(this.data)}unlock(){return this.restClient.request({method:"PUT",url:(0,i.commandsApi)(`devices/${this.id}/device_rpc`),json:{command_name:"device_rpc",request:{jsonrpc:"2.0",method:"unlock_door",params:{door_id:0,user_id:0}}}})}doorbotUrl(e=""){return(0,i.clientApi)(`doorbots/${this.id}/${e}`)}subscribeToDingEvents(){return this.restClient.request({method:"POST",url:this.doorbotUrl("subscribe")})}unsubscribeFromDingEvents(){return this.restClient.request({method:"POST",url:this.doorbotUrl("unsubscribe")})}processPushNotification(e){if("android_config"in e&&e.android_config.category===n.PushNotificationAction.IntercomDing){this.onDing.next()}else if("gcmData"in e.data&&e.data.gcmData.action===n.PushNotificationAction.IntercomUnlock){this.onUnlocked.next()}}}t.RingIntercom=RingIntercom},37284:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.disabledLocationModes=t.DispatchSignalType=t.PushNotificationAction=t.NotificationDetectionType=t.DoorbellType=t.ChimeModel=t.deviceTypesWithVolume=t.allAlarmStates=t.RingCameraModel=t.RingCameraKind=t.RingDeviceCategory=t.RingDeviceType=void 0;t.isWebSocketSupportedAsset=isWebSocketSupportedAsset;var r;(function(e){e["BaseStation"]="hub.redsky";e["BaseStationPro"]="hub.kili";e["Keypad"]="security-keypad";e["SecurityPanel"]="security-panel";e["ContactSensor"]="sensor.contact";e["MotionSensor"]="sensor.motion";e["FloodFreezeSensor"]="sensor.flood-freeze";e["FreezeSensor"]="sensor.freeze";e["TemperatureSensor"]="sensor.temperature";e["WaterSensor"]="sensor.water";e["TiltSensor"]="sensor.tilt";e["GlassbreakSensor"]="sensor.glassbreak";e["RangeExtender"]="range-extender.zwave";e["ZigbeeAdapter"]="adapter.zigbee";e["AccessCodeVault"]="access-code.vault";e["AccessCode"]="access-code";e["SmokeAlarm"]="alarm.smoke";e["CoAlarm"]="alarm.co";e["SmokeCoListener"]="listener.smoke-co";e["MultiLevelSwitch"]="switch.multilevel";e["Fan"]="switch.multilevel";e["MultiLevelBulb"]="switch.multilevel.bulb";e["Switch"]="switch";e["BeamsMotionSensor"]="motion-sensor.beams";e["BeamsSwitch"]="switch.beams";e["BeamsMultiLevelSwitch"]="switch.multilevel.beams";e["BeamsLightGroupSwitch"]="group.light-group.beams";e["BeamsTransformerSwitch"]="switch.transformer.beams";e["BeamsDevice"]="device.beams";e["RetrofitBridge"]="bridge.flatline";e["RetrofitZone"]="sensor.zone";e["Thermostat"]="temperature-control.thermostat";e["Sensor"]="sensor";e["RingNetAdapter"]="adapter.ringnet";e["CodeVault"]="access-code.vault";e["SecurityAccessCode"]="access-code";e["ZWaveAdapter"]="adapter.zwave";e["ZWaveExtender"]="range-extender.zwave";e["PanicButton"]="security-panic";e["UnknownZWave"]="unknown.zwave";e["OnvifCamera"]="onvif_camera";e["ThirdPartyGarageDoorOpener"]="third_party_gdo";e["IntercomHandsetAudio"]="intercom_handset_audio";e["WaterValve"]="valve.water"})(r||(t.RingDeviceType=r={}));var n;(function(e){e[e["Outlets"]=1]="Outlets";e[e["Lights"]=2]="Lights";e[e["Sensors"]=5]="Sensors";e[e["Appliances"]=7]="Appliances";e[e["Locks"]=10]="Locks";e[e["Thermostats"]=11]="Thermostats";e[e["Cameras"]=12]="Cameras";e[e["Alarms"]=15]="Alarms";e[e["Fans"]=17]="Fans";e[e["Security"]=22]="Security";e[e["Unknown"]=29]="Unknown";e[e["SensorsMotion"]=30]="SensorsMotion";e[e["Controller"]=31]="Controller";e[e["RangeExtenders"]=32]="RangeExtenders";e[e["Keypads"]=33]="Keypads";e[e["Sirens"]=34]="Sirens";e[e["PanicButtons"]=35]="PanicButtons";e[e["WaterValves"]=37]="WaterValves"})(n||(t.RingDeviceCategory=n={}));var i;(function(e){e["doorbot"]="doorbot";e["doorbell"]="doorbell";e["doorbell_v3"]="doorbell_v3";e["doorbell_v4"]="doorbell_v4";e["doorbell_v5"]="doorbell_v5";e["doorbell_oyster"]="doorbell_oyster";e["doorbell_portal"]="doorbell_portal";e["doorbell_scallop"]="doorbell_scallop";e["doorbell_scallop_lite"]="doorbell_scallop_lite";e["doorbell_graham_cracker"]="doorbell_graham_cracker";e["lpd_v1"]="lpd_v1";e["lpd_v2"]="lpd_v2";e["lpd_v4"]="lpd_v4";e["jbox_v1"]="jbox_v1";e["stickup_cam"]="stickup_cam";e["stickup_cam_v3"]="stickup_cam_v3";e["stickup_cam_elite"]="stickup_cam_elite";e["stickup_cam_longfin"]="stickup_cam_longfin";e["stickup_cam_lunar"]="stickup_cam_lunar";e["spotlightw_v2"]="spotlightw_v2";e["hp_cam_v1"]="hp_cam_v1";e["hp_cam_v2"]="hp_cam_v2";e["stickup_cam_v4"]="stickup_cam_v4";e["floodlight_v1"]="floodlight_v1";e["floodlight_v2"]="floodlight_v2";e["floodlight_pro"]="floodlight_pro";e["cocoa_camera"]="cocoa_camera";e["cocoa_doorbell"]="cocoa_doorbell";e["cocoa_floodlight"]="cocoa_floodlight";e["cocoa_spotlight"]="cocoa_spotlight";e["stickup_cam_mini"]="stickup_cam_mini";e["onvif_camera"]="onvif_camera"})(i||(t.RingCameraKind=i={}));t.RingCameraModel={doorbot:"Doorbell",doorbell:"Doorbell",doorbell_v3:"Doorbell",doorbell_v4:"Doorbell 2",doorbell_v5:"Doorbell 2",doorbell_oyster:"Doorbell 4",doorbell_portal:"Door View Cam",doorbell_scallop:"Doorbell 3 Plus",doorbell_scallop_lite:"Doorbell 3",doorbell_graham_cracker:"Doorbell Wired",lpd_v1:"Doorbell Pro",lpd_v2:"Doorbell Pro",lpd_v4:"Doorbell Pro 2",jbox_v1:"Doorbell Elite",stickup_cam:"Stick Up Cam",stickup_cam_v3:"Stick Up Cam",stickup_cam_elite:"Stick Up Cam",stickup_cam_longfin:"Spotlight Cam Pro",stickup_cam_lunar:"Stick Up Cam",spotlightw_v2:"Spotlight Cam",hp_cam_v1:"Floodlight Cam",hp_cam_v2:"Spotlight Cam",stickup_cam_v4:"Spotlight Cam",floodlight_v1:"Floodlight Cam",floodlight_v2:"Floodlight Cam",floodlight_pro:"Floodlight Pro",cocoa_camera:"Stick Up Cam",cocoa_doorbell:"Doorbell Gen 2",cocoa_floodlight:"Floodlight Cam Plus",cocoa_spotlight:"Spotlight Cam Plus",stickup_cam_mini:"Indoor Cam",onvif_camera:"ONVIF Camera"};t.allAlarmStates=["burglar-alarm","entry-delay","fire-alarm","co-alarm","panic","user-verified-burglar-alarm","user-verified-co-or-fire-alarm","burglar-accelerated-alarm","fire-accelerated-alarm"];t.deviceTypesWithVolume=[r.BaseStation,r.Keypad];t.ChimeModel={chime:"Chime",chime_pro:"Chime Pro",chime_v2:"Chime v2",chime_pro_v2:"Chime Pro v2"};var s;(function(e){e[e["Mechanical"]=0]="Mechanical";e[e["Digital"]=1]="Digital";e[e["None"]=2]="None"})(s||(t.DoorbellType=s={}));var o;(function(e){e["Human"]="human";e["Loitering"]="loitering";e["Motion"]="motion";e["OtherMotion"]="other_motion";e["NotAvailable"]="null";e["StreamBroken"]="stream_broken"})(o||(t.NotificationDetectionType=o={}));var a;(function(e){e["Ding"]="com.ring.pn.live-event.ding";e["Motion"]="com.ring.pn.live-event.motion";e["IntercomDing"]="com.ring.pn.live-event.intercom";e["IntercomUnlock"]="com.ring.push.INTERCOM_UNLOCK_FROM_APP";e["AlarmModeNone"]="com.ring.push.HANDLE_NEW_SECURITY_PANEL_MODE_NONE_NOTICE";e["AlarmModeSome"]="com.ring.push.HANDLE_NEW_SECURITY_PANEL_MODE_SOME_NOTICE";e["AlarmSoundSiren"]="com.ring.push.HANDLE_NEW_USER_SOUND_SIREN";e["AlarmSilenceSiren"]="com.ring.push.HANDLE_NEW_NON_ALARM_SIREN_SILENCED"})(a||(t.PushNotificationAction=a={}));var c;(function(e){e["Burglar"]="user-verified-burglar-xa";e["Fire"]="user-verified-fire-xa"})(c||(t.DispatchSignalType=c={}));t.disabledLocationModes=["disabled","unset"];function isWebSocketSupportedAsset({kind:e}){return e.startsWith("base_station")||e.startsWith("beams_bridge")}},10616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WeriftPeerConnection=void 0;const n=r(91240);const i=r(94569);const s=r(75917);const o=r(39839);const a=["stun:stun.kinesisvideo.us-east-1.amazonaws.com:443","stun:stun.kinesisvideo.us-east-2.amazonaws.com:443","stun:stun.kinesisvideo.us-west-2.amazonaws.com:443","stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"];class WeriftPeerConnection extends o.Subscribed{constructor(){super();this.onAudioRtp=new i.Subject;this.onAudioRtcp=new i.Subject;this.onVideoRtp=new i.Subject;this.onVideoRtcp=new i.Subject;this.onIceCandidate=new i.Subject;this.onConnectionState=new i.ReplaySubject(1);this.returnAudioTrack=new n.MediaStreamTrack({kind:"audio"});this.onRequestKeyFrame=new i.Subject;const e=this.pc=new n.RTCPeerConnection({codecs:{audio:[new n.RTCRtpCodecParameters({mimeType:"audio/opus",clockRate:48e3,channels:2}),new n.RTCRtpCodecParameters({mimeType:"audio/PCMU",clockRate:8e3,channels:1,payloadType:0})],video:[new n.RTCRtpCodecParameters({mimeType:"video/H264",clockRate:9e4,rtcpFeedback:[{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"},{type:"goog-remb"}],parameters:"packetization-mode=1;profile-level-id=640029;level-asymmetry-allowed=1"}),new n.RTCRtpCodecParameters({mimeType:"video/rtx",clockRate:9e4})]},iceServers:a.map((e=>({urls:e}))),iceTransportPolicy:"all",bundlePolicy:"disable"}),t=e.addTransceiver(this.returnAudioTrack,{direction:"sendrecv"}),r=e.addTransceiver("video",{direction:"recvonly"});t.onTrack.subscribe((e=>{e.onReceiveRtp.subscribe((e=>{this.onAudioRtp.next(e)}));e.onReceiveRtcp.subscribe((e=>{this.onAudioRtcp.next(e)}));e.onReceiveRtp.once((()=>{(0,s.logDebug)("received first audio packet")}))}));r.onTrack.subscribe((e=>{e.onReceiveRtp.subscribe((e=>{this.onVideoRtp.next(e)}));e.onReceiveRtcp.subscribe((e=>{this.onVideoRtcp.next(e)}));e.onReceiveRtp.once((()=>{(0,s.logDebug)("received first video packet");this.addSubscriptions((0,i.merge)(this.onRequestKeyFrame,(0,i.interval)(4e3)).subscribe((()=>{r.receiver.sendRtcpPLI(e.ssrc).catch((e=>(0,s.logError)(e)))})));this.requestKeyFrame()}))}));this.pc.onIceCandidate.subscribe((e=>{this.onIceCandidate.next(e)}));e.iceConnectionStateChange.subscribe((()=>{(0,s.logInfo)(`iceConnectionStateChange: ${e.iceConnectionState}`);if(e.iceConnectionState==="closed"){this.onConnectionState.next("closed")}}));e.connectionStateChange.subscribe((()=>{(0,s.logInfo)(`connectionStateChange: ${e.connectionState}`);this.onConnectionState.next(e.connectionState)}))}async createOffer(){const e=await this.pc.createOffer();await this.pc.setLocalDescription(e);return e}async acceptAnswer(e){await this.pc.setRemoteDescription(e)}addIceCandidate(e){return this.pc.addIceCandidate(e)}requestKeyFrame(){this.onRequestKeyFrame.next()}close(){this.pc.close().catch(s.logError);this.unsubscribe()}}t.WeriftPeerConnection=WeriftPeerConnection},58162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SimpleWebRtcSession=void 0;const n=r(75917);function liveViewUrl(e){return`https://api.ring.com/integrations/v1/liveview/${e}`}class SimpleWebRtcSession{constructor(e,t){this.camera=e;this.restClient=t;this.sessionId=(0,n.generateUuid)()}async start(e){const t=await this.restClient.request({method:"POST",url:liveViewUrl("start"),json:{session_id:this.sessionId,device_id:this.camera.id,sdp:e,protocol:"webrtc"}});return t.sdp}async end(){const e=await this.restClient.request({method:"POST",url:liveViewUrl("end"),json:{session_id:this.sessionId}});return e}async activateCameraSpeaker(){await this.restClient.request({method:"PATCH",url:liveViewUrl("options"),json:{session_id:this.sessionId,actions:["turn_off_stealth_mode"]}})}}t.SimpleWebRtcSession=SimpleWebRtcSession},52172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StreamingSession=void 0;const n=r(91240);const i=r(16453);const s=r(94569);const o=r(6350);const a=r(75917);const c=r(33956);const u=r(39839);function getCleanSdp(e,t){return e.split("\nm=").slice(1).map((e=>"m="+e)).filter((e=>t||!e.startsWith("m=video"))).join("\n")}class StreamingSession extends u.Subscribed{constructor(e,t){super();this.camera=e;this.connection=t;this.onCallEnded=new s.ReplaySubject(1);this.onUsingOpus=new s.ReplaySubject(1);this.onVideoRtp=new s.Subject;this.onAudioRtp=new s.Subject;this.audioSplitter=new i.RtpSplitter;this.videoSplitter=new i.RtpSplitter;this.returnAudioSplitter=new i.RtpSplitter;this.cameraSpeakerActivated=false;this.hasEnded=false;this.bindToConnection(t)}bindToConnection(e){this.addSubscriptions(e.onAudioRtp.subscribe(this.onAudioRtp),e.onVideoRtp.subscribe(this.onVideoRtp),e.onCallAnswered.subscribe((e=>{this.onUsingOpus.next(e.toLocaleLowerCase().includes(" opus/"))})),e.onCallEnded.subscribe((()=>this.callEnded())))}activate(){this.requestKeyFrame()}activateCameraSpeaker(){if(this.cameraSpeakerActivated||this.hasEnded){return}this.cameraSpeakerActivated=true;this.connection.activateCameraSpeaker()}async reservePort(e=0){const t=await(0,i.reservePorts)({count:e+1});return t[0]}get isUsingOpus(){return(0,s.firstValueFrom)(this.onUsingOpus.pipe((0,c.mergeWith)(this.connection.onError.pipe((0,c.map)((e=>{throw e}))))))}async startTranscoding(e){if(this.hasEnded){return}const t=await this.reservePort(1),r=await this.reservePort(1),n=e.video!==false,u=await Promise.race([(0,s.firstValueFrom)(this.connection.onCallAnswered),(0,s.firstValueFrom)(this.onCallEnded)]);if(!u){(0,a.logDebug)("Call ended before answered");return}const d=await this.isUsingOpus,p=["-hide_banner","-protocol_whitelist","pipe,udp,rtp,file,crypto",...d?["-acodec","libopus"]:[],"-f","sdp",...e.input||[],"-i","pipe:"],m=getCleanSdp(u,n).replace(/m=audio \d+/,`m=audio ${r}`).replace(/m=video \d+/,`m=video ${t}`),y=new i.FfmpegProcess({ffmpegArgs:p.concat(...e.audio||["-acodec","aac"],...n?e.video||["-vcodec","copy"]:[],...e.output||[]),ffmpegPath:(0,o.getFfmpegPath)(),stdoutCallback:e.stdoutCallback,exitCallback:()=>this.callEnded(),logLabel:`From Ring (${this.camera.name})`,logger:{error:a.logError,info:a.logDebug}});this.addSubscriptions(this.onAudioRtp.pipe((0,c.concatMap)((e=>this.audioSplitter.send(e.serialize(),{port:r})))).subscribe());if(n){this.addSubscriptions(this.onVideoRtp.pipe((0,c.concatMap)((e=>this.videoSplitter.send(e.serialize(),{port:t})))).subscribe())}this.onCallEnded.pipe((0,c.take)(1)).subscribe((()=>y.stop()));y.writeStdin(m);this.requestKeyFrame()}async transcodeReturnAudio(e){if(this.hasEnded){return}const t=new i.RtpSplitter((({message:e})=>{const t=n.RtpPacket.deSerialize(e);this.connection.sendAudioPacket(t);return null})),r=await this.isUsingOpus,s=new i.FfmpegProcess({ffmpegArgs:["-hide_banner","-protocol_whitelist","pipe,udp,rtp,file,crypto","-re","-i",...e.input,"-acodec",...r?["libopus","-ac",2,"-ar","48k"]:["pcm_mulaw","-ac",1,"-ar","8k"],"-flags","+global_header","-f","rtp",`rtp://127.0.0.1:${await t.portPromise}`],ffmpegPath:(0,o.getFfmpegPath)(),exitCallback:()=>this.callEnded(),logLabel:`Return Audio (${this.camera.name})`,logger:{error:a.logError,info:a.logDebug}});this.onCallEnded.pipe((0,c.take)(1)).subscribe((()=>s.stop()))}callEnded(){if(this.hasEnded){return}this.hasEnded=true;this.unsubscribe();this.onCallEnded.next();this.connection.stop();this.audioSplitter.close();this.videoSplitter.close();this.returnAudioSplitter.close()}stop(){this.callEnded()}sendAudioPacket(e){if(this.hasEnded){return}this.connection.sendAudioPacket(e)}requestKeyFrame(){this.connection.requestKeyFrame()}}t.StreamingSession=StreamingSession},58976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WebrtcConnection=void 0;const n=r(97438);const i=r(94569);const s=r(33956);const o=r(75917);const a=r(10616);const c=r(39839);class WebrtcConnection extends c.Subscribed{constructor(e,t,r){super();this.camera=t;this.onSessionId=new i.ReplaySubject(1);this.onOfferSent=new i.ReplaySubject(1);this.dialogId=(0,o.generateUuid)();this.onCameraConnected=new i.ReplaySubject(1);this.onCallAnswered=new i.ReplaySubject(1);this.onCallEnded=new i.ReplaySubject(1);this.onError=new i.ReplaySubject(1);this.onMessage=new i.ReplaySubject;this.sessionId=null;this.hasEnded=false;this.ws=new n.WebSocket(`wss://api.prod.signalling.ring.devices.a2z.com:443/ws?api_version=4.0&auth_type=ring_solutions&client_id=ring_site-${(0,o.generateUuid)()}&token=${e}`,{headers:{"User-Agent":"android:com.ringapp"}});if(r.createPeerConnection){this.pc=r.createPeerConnection();this.onAudioRtp=new i.Subject;this.onVideoRtp=new i.Subject}else{const e=new a.WeriftPeerConnection;this.pc=e;this.onAudioRtp=e.onAudioRtp;this.onVideoRtp=e.onVideoRtp}this.onWsOpen=(0,i.fromEvent)(this.ws,"open");const c=(0,i.fromEvent)(this.ws,"message"),u=(0,i.fromEvent)(this.ws,"error"),d=(0,i.fromEvent)(this.ws,"close");this.addSubscriptions(c.pipe((0,s.concatMap)((e=>{const t=JSON.parse(e.data);this.onMessage.next(t);return this.handleMessage(t).catch((e=>{if(e instanceof Error&&e.message.includes("negotiate codecs failed")){e=new Error("Failed to negotiate codecs.  This is a known issue with Ring cameras.  Please see https://github.com/dgreif/ring/wiki/Streaming-Legacy-Mode")}this.onError.next(e);throw e}))}))).subscribe(),u.subscribe((e=>{(0,o.logError)(e);this.callEnded()})),d.subscribe((()=>{this.callEnded()})),this.pc.onConnectionState.subscribe((e=>{if(e==="failed"){(0,o.logError)("Stream connection failed");this.callEnded()}if(e==="closed"){(0,o.logDebug)("Stream connection closed");this.callEnded()}})),this.onError.subscribe((e=>{(0,o.logError)(e);this.callEnded()})),this.onWsOpen.subscribe((()=>{const e=t.isRingEdgeEnabled?"Ring Edge":"Cloud";(0,o.logDebug)(`WebSocket connected for ${t.name} (${e})`);this.initiateCall().catch((e=>{(0,o.logError)(e);this.callEnded()}))})),(0,i.interval)(5e3).subscribe((()=>{this.sendSessionMessage("ping")})),this.pc.onIceCandidate.subscribe((async e=>{await(0,i.firstValueFrom)(this.onOfferSent);this.sendMessage({method:"ice",dialog_id:this.dialogId,body:{doorbot_id:t.id,ice:e.candidate,mlineindex:e.sdpMLineIndex}})})))}async initiateCall(){const{sdp:e}=await this.pc.createOffer();this.sendMessage({method:"live_view",dialog_id:this.dialogId,body:{doorbot_id:this.camera.id,stream_options:{audio_enabled:true,video_enabled:true},sdp:e}});this.onOfferSent.next()}async handleMessage(e){if(e.body.doorbot_id!==this.camera.id){return}if(["session_created","session_started"].includes(e.method)&&"session_id"in e.body&&!this.sessionId){this.sessionId=e.body.session_id;this.onSessionId.next(this.sessionId)}if(e.body.session_id&&e.body.session_id!==this.sessionId){return}switch(e.method){case"session_created":case"session_started":return;case"sdp":await this.pc.acceptAnswer(e.body);this.onCallAnswered.next(e.body.sdp);this.activate();return;case"ice":await this.pc.addIceCandidate({candidate:e.body.ice,sdpMLineIndex:e.body.mlineindex});return;case"pong":return;case"notification":const{text:t}=e.body;if(t==="camera_connected"){this.onCameraConnected.next();return}else if(t==="PeerConnectionState::kConnecting"||t==="PeerConnectionState::kConnected"){return}break;case"close":(0,o.logError)("Video stream closed");(0,o.logError)(e.body);this.callEnded();return}(0,o.logError)("UNKNOWN MESSAGE");(0,o.logError)(e)}sendSessionMessage(e,t={}){const sendSessionMessage=r=>{const n={method:e,dialog_id:this.dialogId,body:{...t,doorbot_id:this.camera.id,session_id:r}};this.sendMessage(n)};if(this.sessionId){sendSessionMessage(this.sessionId)}else{this.addSubscriptions(this.onSessionId.pipe((0,s.take)(1)).subscribe(sendSessionMessage))}}sendMessage(e){if(this.hasEnded){return}this.ws.send(JSON.stringify(e))}sendAudioPacket(e){if(this.hasEnded){return}if(this.pc instanceof a.WeriftPeerConnection){this.pc.returnAudioTrack.writeRtp(e)}else{throw new Error("Cannot send audio packets to a custom peer connection implementation")}}activate(){(0,o.logInfo)("Activating Session");this.sendSessionMessage("activate_session");this.sendSessionMessage("stream_options",{audio_enabled:true,video_enabled:true})}activateCameraSpeaker(){this.addSubscriptions(this.onCameraConnected.pipe((0,s.take)(1)).subscribe((()=>{this.sendSessionMessage("camera_options",{stealth_mode:false})})))}callEnded(){if(this.hasEnded){return}try{this.sendMessage({reason:{code:0,text:""},method:"close"});this.ws.close()}catch(e){}this.hasEnded=true;this.unsubscribe();this.onCallEnded.next();this.pc.close()}stop(){this.callEnded()}requestKeyFrame(){this.pc.requestKeyFrame?.()}}t.WebrtcConnection=WebrtcConnection},39839:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Subscribed=void 0;class Subscribed{constructor(){this.subscriptions=[]}addSubscriptions(...e){this.subscriptions.push(...e)}unsubscribe(){this.subscriptions.forEach((e=>e.unsubscribe()))}}t.Subscribed=Subscribed},75917:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.clearTimeouts=clearTimeouts;t.delay=delay;t.logDebug=logDebug;t.logInfo=logInfo;t.logError=logError;t.useLogger=useLogger;t.enableDebug=enableDebug;t.generateUuid=generateUuid;t.getHardwareId=getHardwareId;t.requestInput=requestInput;t.stringify=stringify;t.mapAsync=mapAsync;t.randomInteger=randomInteger;t.randomString=randomString;t.fromBase64=fromBase64;t.toBase64=toBase64;t.buildSearchString=buildSearchString;const i=n(r(69565));const s=r(67885);const o=r(14521);const a=r(50593);const c=r(48587);const u=n(r(32549));const d=(0,i.default)("ring"),p="e53ffdc0-e91d-4ce1-bec2-df939d94739d";let m={logInfo(e){d(e)},logError(e){d((0,s.red)(e))}},y=false;const g=new Set;function clearTimeouts(){g.forEach((e=>{clearTimeout(e)}))}function delay(e){return new Promise((t=>{const r=setTimeout((()=>{g.delete(r);t(undefined)}),e);g.add(r)}))}function logDebug(e){if(y){m.logInfo(e)}}function logInfo(...e){m.logInfo(...e)}function logError(e){m.logError(e)}function useLogger(e){m=e}function enableDebug(){y=true}function generateUuid(e){if(e){return(0,a.v5)(e,p)}return(0,a.v4)()}async function getHardwareId(e){if(e){return generateUuid(e)}const t="-1",{os:r}=await Promise.race([(0,c.uuid)(),delay(5e3).then((()=>({os:t})))]);if(r===t){logError("Request for system uuid timed out.  Falling back to random session id");return(0,a.v4)()}if(r==="-"){logError("Unable to get system uuid.  Falling back to random session id");return(0,a.v4)()}return generateUuid(r)}async function requestInput(e){const t=(0,o.createInterface)({input:process.stdin,output:process.stdout}),r=await new Promise((r=>{t.question(e,r)}));t.close();return r.trim()}function stringify(e){if(typeof e==="string"){return e}if(typeof e==="object"&&Buffer.isBuffer(e)){return e.toString()}return JSON.stringify(e)+""}function mapAsync(e,t){return Promise.all(e.map((e=>t(e))))}function randomInteger(){return Math.floor(Math.random()*99999999)+1e5}function randomString(e){const t=generateUuid();return t.replace(/-/g,"").substring(0,e).toLowerCase()}function logPushReceiver(...e){try{if(e[0].toString().includes("ECONNRESET")){return}}catch(e){}logDebug("[Push Receiver]");logDebug(e[0])}u.default.error=logPushReceiver;function fromBase64(e){const t=Buffer.from(e,"base64");return t.toString("ascii")}function toBase64(e){const t=Buffer.from(e);return t.toString("base64")}function buildSearchString(e){return"?"+Object.entries(e).filter((([,e])=>e!==undefined&&e!==null)).map((([e,t])=>`${e}=${t}`)).join("&")}},27922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EventDisposer=t.Event=void 0;class Event{constructor(){Object.defineProperty(this,"event",{enumerable:true,configurable:true,writable:true,value:{stack:[],promiseStack:[],eventId:0}});Object.defineProperty(this,"ended",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"onended",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onerror",{enumerable:true,configurable:true,writable:true,value:e=>{}});Object.defineProperty(this,"execute",{enumerable:true,configurable:true,writable:true,value:(...e)=>{if(this.ended)throw new Error("event completed");for(const t of this.event.stack){t.execute(...e)}(async()=>{for(const t of this.event.promiseStack){await t.execute(...e)}})().catch((e=>{this.onerror(e)}))}});Object.defineProperty(this,"complete",{enumerable:true,configurable:true,writable:true,value:()=>{if(this.ended)throw new Error("event completed");for(let e of this.event.stack){if(e.complete)e.complete()}this.allUnsubscribe();this.ended=true;if(this.onended){this.onended();this.onended=undefined}}});Object.defineProperty(this,"error",{enumerable:true,configurable:true,writable:true,value:e=>{if(this.ended)throw new Error("event completed");for(let t of this.event.stack){if(t.error)t.error(e)}this.allUnsubscribe()}});Object.defineProperty(this,"allUnsubscribe",{enumerable:true,configurable:true,writable:true,value:()=>{if(this.ended)throw new Error("event completed");this.event={stack:[],promiseStack:[],eventId:0}}});Object.defineProperty(this,"subscribe",{enumerable:true,configurable:true,writable:true,value:(e,t,r)=>{if(this.ended)throw new Error("event completed");const n=this.event.eventId;this.event.stack.push({execute:e,id:n,complete:t,error:r});this.event.eventId++;const unSubscribe=()=>{this.event.stack=this.event.stack.filter((e=>e.id!==n&&e))};const disposer=e=>{e.push(unSubscribe)};return{unSubscribe:unSubscribe,disposer:disposer}}});Object.defineProperty(this,"queuingSubscribe",{enumerable:true,configurable:true,writable:true,value:(e,t,r)=>{if(this.ended)throw new Error("event completed");const n=this.event.eventId;this.event.promiseStack.push({execute:e,id:n,complete:t,error:r});this.event.eventId++;const unSubscribe=()=>{this.event.stack=this.event.stack.filter((e=>e.id!==n&&e))};const disposer=e=>{e.push(unSubscribe)};return{unSubscribe:unSubscribe,disposer:disposer}}});Object.defineProperty(this,"once",{enumerable:true,configurable:true,writable:true,value:(e,t,r)=>{const n=this.subscribe(((...t)=>{n.unSubscribe();e(...t)}),t,r)}});Object.defineProperty(this,"watch",{enumerable:true,configurable:true,writable:true,value:(e,t)=>new Promise(((r,n)=>{const i=t&&setTimeout((()=>{n("Event watch timeout")}),t);const{unSubscribe:s}=this.subscribe(((...t)=>{const n=e(...t);if(n){if(i)clearTimeout(i);s();r(t)}}))}))});Object.defineProperty(this,"asPromise",{enumerable:true,configurable:true,writable:true,value:e=>new Promise(((t,r)=>{const n=e&&setTimeout((()=>{r("Event asPromise timeout")}),e);this.once(((...e)=>{if(n)clearTimeout(n);t(e)}),(()=>{if(n)clearTimeout(n);t([])}),(e=>{if(n)clearTimeout(n);r(e)}))}))})}get returnTrigger(){const{execute:e,error:t,complete:r}=this;return{execute:e,error:t,complete:r}}get returnListener(){const{subscribe:e,once:t,asPromise:r}=this;return{subscribe:e,once:t,asPromise:r}}get length(){return this.event.stack.length}}t.Event=Event;class EventDisposer{constructor(){Object.defineProperty(this,"_disposer",{enumerable:true,configurable:true,writable:true,value:[]})}push(e){this._disposer.push(e)}dispose(){this._disposer.forEach((e=>e()));this._disposer=[]}}t.EventDisposer=EventDisposer},37261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Buffer=void 0;const n=r(27922);function Buffer(e,t){const r=new n.Event;const i=[];let s=false;t.subscribe(((...t)=>{if(!s&&i.length===e){i.forEach((e=>r.execute(...e)));s=true}if(s){r.execute(...t)}else{i.push(t)}}));const{subscribe:o,asPromise:a,once:c}=r;return{subscribe:o,asPromise:a,once:c}}t.Buffer=Buffer},67597:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(27922);function Pack(){let e=[];const event=()=>{const t=new n.Event;e.push(t);return t};const finishAll=()=>{e.forEach((e=>e.allUnsubscribe()));e=[]};return{event:event,finishAll:finishAll}}t["default"]=Pack},92272:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const i=n(r(36094));class Wait{constructor(){Object.defineProperty(this,"candidates",{enumerable:true,configurable:true,writable:true,value:{}})}exist(e){return Object.keys(this.candidates).includes(e)}delete(e){delete this.candidates[e]}async create(e,t){if(this.exist(e)){return{exist:this.candidates[e]}}else{const r=new i.default;this.candidates[e]=r;const n=await t();r.execute(...n);this.delete(e);return{result:n}}}}t["default"]=Wait},36094:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});const s=r(27922);t["default"]=s.Event;i(r(27922),t);i(r(67597),t);i(r(92272),t);i(r(37261),t)},94569:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.interval=t.iif=t.generate=t.fromEventPattern=t.fromEvent=t.from=t.forkJoin=t.empty=t.defer=t.connectable=t.concat=t.combineLatest=t.bindNodeCallback=t.bindCallback=t.UnsubscriptionError=t.TimeoutError=t.SequenceError=t.ObjectUnsubscribedError=t.NotFoundError=t.EmptyError=t.ArgumentOutOfRangeError=t.firstValueFrom=t.lastValueFrom=t.isObservable=t.identity=t.noop=t.pipe=t.NotificationKind=t.Notification=t.Subscriber=t.Subscription=t.Scheduler=t.VirtualAction=t.VirtualTimeScheduler=t.animationFrameScheduler=t.animationFrame=t.queueScheduler=t.queue=t.asyncScheduler=t.async=t.asapScheduler=t.asap=t.AsyncSubject=t.ReplaySubject=t.BehaviorSubject=t.Subject=t.animationFrames=t.observable=t.ConnectableObservable=t.Observable=void 0;t.filter=t.expand=t.exhaustMap=t.exhaustAll=t.exhaust=t.every=t.endWith=t.elementAt=t.distinctUntilKeyChanged=t.distinctUntilChanged=t.distinct=t.dematerialize=t.delayWhen=t.delay=t.defaultIfEmpty=t.debounceTime=t.debounce=t.count=t.connect=t.concatWith=t.concatMapTo=t.concatMap=t.concatAll=t.combineLatestWith=t.combineLatestAll=t.combineAll=t.catchError=t.bufferWhen=t.bufferToggle=t.bufferTime=t.bufferCount=t.buffer=t.auditTime=t.audit=t.config=t.NEVER=t.EMPTY=t.scheduled=t.zip=t.using=t.timer=t.throwError=t.range=t.race=t.partition=t.pairs=t.onErrorResumeNext=t.of=t.never=t.merge=void 0;t.switchMap=t.switchAll=t.subscribeOn=t.startWith=t.skipWhile=t.skipUntil=t.skipLast=t.skip=t.single=t.shareReplay=t.share=t.sequenceEqual=t.scan=t.sampleTime=t.sample=t.refCount=t.retryWhen=t.retry=t.repeatWhen=t.repeat=t.reduce=t.raceWith=t.publishReplay=t.publishLast=t.publishBehavior=t.publish=t.pluck=t.pairwise=t.onErrorResumeNextWith=t.observeOn=t.multicast=t.min=t.mergeWith=t.mergeScan=t.mergeMapTo=t.mergeMap=t.flatMap=t.mergeAll=t.max=t.materialize=t.mapTo=t.map=t.last=t.isEmpty=t.ignoreElements=t.groupBy=t.first=t.findIndex=t.find=t.finalize=void 0;t.zipWith=t.zipAll=t.withLatestFrom=t.windowWhen=t.windowToggle=t.windowTime=t.windowCount=t.window=t.toArray=t.timestamp=t.timeoutWith=t.timeout=t.timeInterval=t.throwIfEmpty=t.throttleTime=t.throttle=t.tap=t.takeWhile=t.takeUntil=t.takeLast=t.take=t.switchScan=t.switchMapTo=void 0;var s=r(45480);Object.defineProperty(t,"Observable",{enumerable:true,get:function(){return s.Observable}});var o=r(41312);Object.defineProperty(t,"ConnectableObservable",{enumerable:true,get:function(){return o.ConnectableObservable}});var a=r(48618);Object.defineProperty(t,"observable",{enumerable:true,get:function(){return a.observable}});var c=r(69750);Object.defineProperty(t,"animationFrames",{enumerable:true,get:function(){return c.animationFrames}});var u=r(6755);Object.defineProperty(t,"Subject",{enumerable:true,get:function(){return u.Subject}});var d=r(68872);Object.defineProperty(t,"BehaviorSubject",{enumerable:true,get:function(){return d.BehaviorSubject}});var p=r(79886);Object.defineProperty(t,"ReplaySubject",{enumerable:true,get:function(){return p.ReplaySubject}});var m=r(58042);Object.defineProperty(t,"AsyncSubject",{enumerable:true,get:function(){return m.AsyncSubject}});var y=r(83323);Object.defineProperty(t,"asap",{enumerable:true,get:function(){return y.asap}});Object.defineProperty(t,"asapScheduler",{enumerable:true,get:function(){return y.asapScheduler}});var g=r(7362);Object.defineProperty(t,"async",{enumerable:true,get:function(){return g.async}});Object.defineProperty(t,"asyncScheduler",{enumerable:true,get:function(){return g.asyncScheduler}});var b=r(70150);Object.defineProperty(t,"queue",{enumerable:true,get:function(){return b.queue}});Object.defineProperty(t,"queueScheduler",{enumerable:true,get:function(){return b.queueScheduler}});var v=r(49372);Object.defineProperty(t,"animationFrame",{enumerable:true,get:function(){return v.animationFrame}});Object.defineProperty(t,"animationFrameScheduler",{enumerable:true,get:function(){return v.animationFrameScheduler}});var w=r(39769);Object.defineProperty(t,"VirtualTimeScheduler",{enumerable:true,get:function(){return w.VirtualTimeScheduler}});Object.defineProperty(t,"VirtualAction",{enumerable:true,get:function(){return w.VirtualAction}});var _=r(93892);Object.defineProperty(t,"Scheduler",{enumerable:true,get:function(){return _.Scheduler}});var C=r(20557);Object.defineProperty(t,"Subscription",{enumerable:true,get:function(){return C.Subscription}});var P=r(82761);Object.defineProperty(t,"Subscriber",{enumerable:true,get:function(){return P.Subscriber}});var O=r(68687);Object.defineProperty(t,"Notification",{enumerable:true,get:function(){return O.Notification}});Object.defineProperty(t,"NotificationKind",{enumerable:true,get:function(){return O.NotificationKind}});var E=r(84056);Object.defineProperty(t,"pipe",{enumerable:true,get:function(){return E.pipe}});var I=r(95573);Object.defineProperty(t,"noop",{enumerable:true,get:function(){return I.noop}});var k=r(31393);Object.defineProperty(t,"identity",{enumerable:true,get:function(){return k.identity}});var T=r(31817);Object.defineProperty(t,"isObservable",{enumerable:true,get:function(){return T.isObservable}});var x=r(17058);Object.defineProperty(t,"lastValueFrom",{enumerable:true,get:function(){return x.lastValueFrom}});var R=r(61868);Object.defineProperty(t,"firstValueFrom",{enumerable:true,get:function(){return R.firstValueFrom}});var B=r(40314);Object.defineProperty(t,"ArgumentOutOfRangeError",{enumerable:true,get:function(){return B.ArgumentOutOfRangeError}});var N=r(52219);Object.defineProperty(t,"EmptyError",{enumerable:true,get:function(){return N.EmptyError}});var j=r(70604);Object.defineProperty(t,"NotFoundError",{enumerable:true,get:function(){return j.NotFoundError}});var L=r(49638);Object.defineProperty(t,"ObjectUnsubscribedError",{enumerable:true,get:function(){return L.ObjectUnsubscribedError}});var D=r(74856);Object.defineProperty(t,"SequenceError",{enumerable:true,get:function(){return D.SequenceError}});var U=r(85192);Object.defineProperty(t,"TimeoutError",{enumerable:true,get:function(){return U.TimeoutError}});var F=r(86162);Object.defineProperty(t,"UnsubscriptionError",{enumerable:true,get:function(){return F.UnsubscriptionError}});var K=r(1347);Object.defineProperty(t,"bindCallback",{enumerable:true,get:function(){return K.bindCallback}});var V=r(36842);Object.defineProperty(t,"bindNodeCallback",{enumerable:true,get:function(){return V.bindNodeCallback}});var H=r(44058);Object.defineProperty(t,"combineLatest",{enumerable:true,get:function(){return H.combineLatest}});var q=r(61132);Object.defineProperty(t,"concat",{enumerable:true,get:function(){return q.concat}});var W=r(81607);Object.defineProperty(t,"connectable",{enumerable:true,get:function(){return W.connectable}});var z=r(31182);Object.defineProperty(t,"defer",{enumerable:true,get:function(){return z.defer}});var $=r(88008);Object.defineProperty(t,"empty",{enumerable:true,get:function(){return $.empty}});var G=r(11361);Object.defineProperty(t,"forkJoin",{enumerable:true,get:function(){return G.forkJoin}});var J=r(97095);Object.defineProperty(t,"from",{enumerable:true,get:function(){return J.from}});var X=r(95961);Object.defineProperty(t,"fromEvent",{enumerable:true,get:function(){return X.fromEvent}});var Y=r(50328);Object.defineProperty(t,"fromEventPattern",{enumerable:true,get:function(){return Y.fromEventPattern}});var Q=r(16614);Object.defineProperty(t,"generate",{enumerable:true,get:function(){return Q.generate}});var ee=r(12107);Object.defineProperty(t,"iif",{enumerable:true,get:function(){return ee.iif}});var te=r(93610);Object.defineProperty(t,"interval",{enumerable:true,get:function(){return te.interval}});var re=r(41509);Object.defineProperty(t,"merge",{enumerable:true,get:function(){return re.merge}});var ne=r(3333);Object.defineProperty(t,"never",{enumerable:true,get:function(){return ne.never}});var ie=r(50498);Object.defineProperty(t,"of",{enumerable:true,get:function(){return ie.of}});var se=r(79997);Object.defineProperty(t,"onErrorResumeNext",{enumerable:true,get:function(){return se.onErrorResumeNext}});var oe=r(19108);Object.defineProperty(t,"pairs",{enumerable:true,get:function(){return oe.pairs}});var ae=r(71864);Object.defineProperty(t,"partition",{enumerable:true,get:function(){return ae.partition}});var ce=r(16882);Object.defineProperty(t,"race",{enumerable:true,get:function(){return ce.race}});var ue=r(79234);Object.defineProperty(t,"range",{enumerable:true,get:function(){return ue.range}});var le=r(95050);Object.defineProperty(t,"throwError",{enumerable:true,get:function(){return le.throwError}});var fe=r(53129);Object.defineProperty(t,"timer",{enumerable:true,get:function(){return fe.timer}});var de=r(96014);Object.defineProperty(t,"using",{enumerable:true,get:function(){return de.using}});var pe=r(92308);Object.defineProperty(t,"zip",{enumerable:true,get:function(){return pe.zip}});var he=r(36832);Object.defineProperty(t,"scheduled",{enumerable:true,get:function(){return he.scheduled}});var me=r(88008);Object.defineProperty(t,"EMPTY",{enumerable:true,get:function(){return me.EMPTY}});var ye=r(3333);Object.defineProperty(t,"NEVER",{enumerable:true,get:function(){return ye.NEVER}});i(r(6539),t);var ge=r(83748);Object.defineProperty(t,"config",{enumerable:true,get:function(){return ge.config}});var be=r(24058);Object.defineProperty(t,"audit",{enumerable:true,get:function(){return be.audit}});var ve=r(82270);Object.defineProperty(t,"auditTime",{enumerable:true,get:function(){return ve.auditTime}});var Se=r(90815);Object.defineProperty(t,"buffer",{enumerable:true,get:function(){return Se.buffer}});var we=r(45132);Object.defineProperty(t,"bufferCount",{enumerable:true,get:function(){return we.bufferCount}});var _e=r(76294);Object.defineProperty(t,"bufferTime",{enumerable:true,get:function(){return _e.bufferTime}});var Ce=r(16492);Object.defineProperty(t,"bufferToggle",{enumerable:true,get:function(){return Ce.bufferToggle}});var Pe=r(41134);Object.defineProperty(t,"bufferWhen",{enumerable:true,get:function(){return Pe.bufferWhen}});var Oe=r(76243);Object.defineProperty(t,"catchError",{enumerable:true,get:function(){return Oe.catchError}});var Ee=r(5749);Object.defineProperty(t,"combineAll",{enumerable:true,get:function(){return Ee.combineAll}});var Ae=r(6290);Object.defineProperty(t,"combineLatestAll",{enumerable:true,get:function(){return Ae.combineLatestAll}});var Ie=r(37372);Object.defineProperty(t,"combineLatestWith",{enumerable:true,get:function(){return Ie.combineLatestWith}});var ke=r(83038);Object.defineProperty(t,"concatAll",{enumerable:true,get:function(){return ke.concatAll}});var Te=r(53219);Object.defineProperty(t,"concatMap",{enumerable:true,get:function(){return Te.concatMap}});var xe=r(79311);Object.defineProperty(t,"concatMapTo",{enumerable:true,get:function(){return xe.concatMapTo}});var Re=r(34486);Object.defineProperty(t,"concatWith",{enumerable:true,get:function(){return Re.concatWith}});var Be=r(68699);Object.defineProperty(t,"connect",{enumerable:true,get:function(){return Be.connect}});var Ne=r(75609);Object.defineProperty(t,"count",{enumerable:true,get:function(){return Ne.count}});var je=r(29749);Object.defineProperty(t,"debounce",{enumerable:true,get:function(){return je.debounce}});var Le=r(94111);Object.defineProperty(t,"debounceTime",{enumerable:true,get:function(){return Le.debounceTime}});var De=r(17558);Object.defineProperty(t,"defaultIfEmpty",{enumerable:true,get:function(){return De.defaultIfEmpty}});var Me=r(48974);Object.defineProperty(t,"delay",{enumerable:true,get:function(){return Me.delay}});var Ue=r(66673);Object.defineProperty(t,"delayWhen",{enumerable:true,get:function(){return Ue.delayWhen}});var Fe=r(17927);Object.defineProperty(t,"dematerialize",{enumerable:true,get:function(){return Fe.dematerialize}});var Ke=r(43772);Object.defineProperty(t,"distinct",{enumerable:true,get:function(){return Ke.distinct}});var Ve=r(67787);Object.defineProperty(t,"distinctUntilChanged",{enumerable:true,get:function(){return Ve.distinctUntilChanged}});var He=r(49969);Object.defineProperty(t,"distinctUntilKeyChanged",{enumerable:true,get:function(){return He.distinctUntilKeyChanged}});var qe=r(82007);Object.defineProperty(t,"elementAt",{enumerable:true,get:function(){return qe.elementAt}});var We=r(79339);Object.defineProperty(t,"endWith",{enumerable:true,get:function(){return We.endWith}});var ze=r(46184);Object.defineProperty(t,"every",{enumerable:true,get:function(){return ze.every}});var $e=r(75659);Object.defineProperty(t,"exhaust",{enumerable:true,get:function(){return $e.exhaust}});var Ge=r(6906);Object.defineProperty(t,"exhaustAll",{enumerable:true,get:function(){return Ge.exhaustAll}});var Je=r(44181);Object.defineProperty(t,"exhaustMap",{enumerable:true,get:function(){return Je.exhaustMap}});var Xe=r(58940);Object.defineProperty(t,"expand",{enumerable:true,get:function(){return Xe.expand}});var Ye=r(47778);Object.defineProperty(t,"filter",{enumerable:true,get:function(){return Ye.filter}});var Ze=r(94634);Object.defineProperty(t,"finalize",{enumerable:true,get:function(){return Ze.finalize}});var Qe=r(40644);Object.defineProperty(t,"find",{enumerable:true,get:function(){return Qe.find}});var et=r(32947);Object.defineProperty(t,"findIndex",{enumerable:true,get:function(){return et.findIndex}});var tt=r(58448);Object.defineProperty(t,"first",{enumerable:true,get:function(){return tt.first}});var rt=r(19447);Object.defineProperty(t,"groupBy",{enumerable:true,get:function(){return rt.groupBy}});var nt=r(59816);Object.defineProperty(t,"ignoreElements",{enumerable:true,get:function(){return nt.ignoreElements}});var it=r(95173);Object.defineProperty(t,"isEmpty",{enumerable:true,get:function(){return it.isEmpty}});var st=r(73588);Object.defineProperty(t,"last",{enumerable:true,get:function(){return st.last}});var ot=r(30784);Object.defineProperty(t,"map",{enumerable:true,get:function(){return ot.map}});var at=r(8517);Object.defineProperty(t,"mapTo",{enumerable:true,get:function(){return at.mapTo}});var ct=r(42251);Object.defineProperty(t,"materialize",{enumerable:true,get:function(){return ct.materialize}});var ut=r(5750);Object.defineProperty(t,"max",{enumerable:true,get:function(){return ut.max}});var ft=r(12130);Object.defineProperty(t,"mergeAll",{enumerable:true,get:function(){return ft.mergeAll}});var dt=r(8149);Object.defineProperty(t,"flatMap",{enumerable:true,get:function(){return dt.flatMap}});var pt=r(34960);Object.defineProperty(t,"mergeMap",{enumerable:true,get:function(){return pt.mergeMap}});var ht=r(17180);Object.defineProperty(t,"mergeMapTo",{enumerable:true,get:function(){return ht.mergeMapTo}});var mt=r(33608);Object.defineProperty(t,"mergeScan",{enumerable:true,get:function(){return mt.mergeScan}});var yt=r(21209);Object.defineProperty(t,"mergeWith",{enumerable:true,get:function(){return yt.mergeWith}});var bt=r(64569);Object.defineProperty(t,"min",{enumerable:true,get:function(){return bt.min}});var vt=r(93185);Object.defineProperty(t,"multicast",{enumerable:true,get:function(){return vt.multicast}});var St=r(90002);Object.defineProperty(t,"observeOn",{enumerable:true,get:function(){return St.observeOn}});var wt=r(40542);Object.defineProperty(t,"onErrorResumeNextWith",{enumerable:true,get:function(){return wt.onErrorResumeNextWith}});var _t=r(25574);Object.defineProperty(t,"pairwise",{enumerable:true,get:function(){return _t.pairwise}});var Ct=r(15522);Object.defineProperty(t,"pluck",{enumerable:true,get:function(){return Ct.pluck}});var Pt=r(69263);Object.defineProperty(t,"publish",{enumerable:true,get:function(){return Pt.publish}});var Ot=r(25424);Object.defineProperty(t,"publishBehavior",{enumerable:true,get:function(){return Ot.publishBehavior}});var Et=r(31679);Object.defineProperty(t,"publishLast",{enumerable:true,get:function(){return Et.publishLast}});var At=r(10509);Object.defineProperty(t,"publishReplay",{enumerable:true,get:function(){return At.publishReplay}});var It=r(46194);Object.defineProperty(t,"raceWith",{enumerable:true,get:function(){return It.raceWith}});var kt=r(35951);Object.defineProperty(t,"reduce",{enumerable:true,get:function(){return kt.reduce}});var Tt=r(20109);Object.defineProperty(t,"repeat",{enumerable:true,get:function(){return Tt.repeat}});var xt=r(6426);Object.defineProperty(t,"repeatWhen",{enumerable:true,get:function(){return xt.repeatWhen}});var Rt=r(86479);Object.defineProperty(t,"retry",{enumerable:true,get:function(){return Rt.retry}});var Bt=r(99299);Object.defineProperty(t,"retryWhen",{enumerable:true,get:function(){return Bt.retryWhen}});var Nt=r(39543);Object.defineProperty(t,"refCount",{enumerable:true,get:function(){return Nt.refCount}});var jt=r(36681);Object.defineProperty(t,"sample",{enumerable:true,get:function(){return jt.sample}});var Lt=r(5546);Object.defineProperty(t,"sampleTime",{enumerable:true,get:function(){return Lt.sampleTime}});var Dt=r(25110);Object.defineProperty(t,"scan",{enumerable:true,get:function(){return Dt.scan}});var Mt=r(94086);Object.defineProperty(t,"sequenceEqual",{enumerable:true,get:function(){return Mt.sequenceEqual}});var Ut=r(91686);Object.defineProperty(t,"share",{enumerable:true,get:function(){return Ut.share}});var Ft=r(37934);Object.defineProperty(t,"shareReplay",{enumerable:true,get:function(){return Ft.shareReplay}});var Kt=r(96611);Object.defineProperty(t,"single",{enumerable:true,get:function(){return Kt.single}});var Vt=r(34719);Object.defineProperty(t,"skip",{enumerable:true,get:function(){return Vt.skip}});var Ht=r(12967);Object.defineProperty(t,"skipLast",{enumerable:true,get:function(){return Ht.skipLast}});var qt=r(77924);Object.defineProperty(t,"skipUntil",{enumerable:true,get:function(){return qt.skipUntil}});var Wt=r(84978);Object.defineProperty(t,"skipWhile",{enumerable:true,get:function(){return Wt.skipWhile}});var zt=r(45013);Object.defineProperty(t,"startWith",{enumerable:true,get:function(){return zt.startWith}});var $t=r(42972);Object.defineProperty(t,"subscribeOn",{enumerable:true,get:function(){return $t.subscribeOn}});var Gt=r(13969);Object.defineProperty(t,"switchAll",{enumerable:true,get:function(){return Gt.switchAll}});var Jt=r(74723);Object.defineProperty(t,"switchMap",{enumerable:true,get:function(){return Jt.switchMap}});var Xt=r(59788);Object.defineProperty(t,"switchMapTo",{enumerable:true,get:function(){return Xt.switchMapTo}});var Yt=r(94088);Object.defineProperty(t,"switchScan",{enumerable:true,get:function(){return Yt.switchScan}});var Zt=r(10476);Object.defineProperty(t,"take",{enumerable:true,get:function(){return Zt.take}});var Qt=r(17615);Object.defineProperty(t,"takeLast",{enumerable:true,get:function(){return Qt.takeLast}});var er=r(7385);Object.defineProperty(t,"takeUntil",{enumerable:true,get:function(){return er.takeUntil}});var tr=r(85245);Object.defineProperty(t,"takeWhile",{enumerable:true,get:function(){return tr.takeWhile}});var rr=r(29874);Object.defineProperty(t,"tap",{enumerable:true,get:function(){return rr.tap}});var nr=r(38466);Object.defineProperty(t,"throttle",{enumerable:true,get:function(){return nr.throttle}});var ir=r(96937);Object.defineProperty(t,"throttleTime",{enumerable:true,get:function(){return ir.throttleTime}});var sr=r(38054);Object.defineProperty(t,"throwIfEmpty",{enumerable:true,get:function(){return sr.throwIfEmpty}});var ar=r(40808);Object.defineProperty(t,"timeInterval",{enumerable:true,get:function(){return ar.timeInterval}});var cr=r(85192);Object.defineProperty(t,"timeout",{enumerable:true,get:function(){return cr.timeout}});var ur=r(13313);Object.defineProperty(t,"timeoutWith",{enumerable:true,get:function(){return ur.timeoutWith}});var lr=r(13625);Object.defineProperty(t,"timestamp",{enumerable:true,get:function(){return lr.timestamp}});var fr=r(94966);Object.defineProperty(t,"toArray",{enumerable:true,get:function(){return fr.toArray}});var dr=r(20460);Object.defineProperty(t,"window",{enumerable:true,get:function(){return dr.window}});var pr=r(82054);Object.defineProperty(t,"windowCount",{enumerable:true,get:function(){return pr.windowCount}});var hr=r(56068);Object.defineProperty(t,"windowTime",{enumerable:true,get:function(){return hr.windowTime}});var mr=r(13996);Object.defineProperty(t,"windowToggle",{enumerable:true,get:function(){return mr.windowToggle}});var yr=r(13343);Object.defineProperty(t,"windowWhen",{enumerable:true,get:function(){return yr.windowWhen}});var gr=r(79755);Object.defineProperty(t,"withLatestFrom",{enumerable:true,get:function(){return gr.withLatestFrom}});var br=r(97263);Object.defineProperty(t,"zipAll",{enumerable:true,get:function(){return br.zipAll}});var vr=r(24219);Object.defineProperty(t,"zipWith",{enumerable:true,get:function(){return vr.zipWith}})},58042:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsyncSubject=void 0;var i=r(6755);var s=function(e){n(AsyncSubject,e);function AsyncSubject(){var t=e!==null&&e.apply(this,arguments)||this;t._value=null;t._hasValue=false;t._isComplete=false;return t}AsyncSubject.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t._hasValue,i=t._value,s=t.thrownError,o=t.isStopped,a=t._isComplete;if(r){e.error(s)}else if(o||a){n&&e.next(i);e.complete()}};AsyncSubject.prototype.next=function(e){if(!this.isStopped){this._value=e;this._hasValue=true}};AsyncSubject.prototype.complete=function(){var t=this,r=t._hasValue,n=t._value,i=t._isComplete;if(!i){this._isComplete=true;r&&e.prototype.next.call(this,n);e.prototype.complete.call(this)}};return AsyncSubject}(i.Subject);t.AsyncSubject=s},68872:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.BehaviorSubject=void 0;var i=r(6755);var s=function(e){n(BehaviorSubject,e);function BehaviorSubject(t){var r=e.call(this)||this;r._value=t;return r}Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:false,configurable:true});BehaviorSubject.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);!r.closed&&t.next(this._value);return r};BehaviorSubject.prototype.getValue=function(){var e=this,t=e.hasError,r=e.thrownError,n=e._value;if(t){throw r}this._throwIfClosed();return n};BehaviorSubject.prototype.next=function(t){e.prototype.next.call(this,this._value=t)};return BehaviorSubject}(i.Subject);t.BehaviorSubject=s},68687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.observeNotification=t.Notification=t.NotificationKind=void 0;var n=r(88008);var i=r(50498);var s=r(95050);var o=r(18969);var a;(function(e){e["NEXT"]="N";e["ERROR"]="E";e["COMPLETE"]="C"})(a=t.NotificationKind||(t.NotificationKind={}));var c=function(){function Notification(e,t,r){this.kind=e;this.value=t;this.error=r;this.hasValue=e==="N"}Notification.prototype.observe=function(e){return observeNotification(this,e)};Notification.prototype.do=function(e,t,r){var n=this,i=n.kind,s=n.value,o=n.error;return i==="N"?e===null||e===void 0?void 0:e(s):i==="E"?t===null||t===void 0?void 0:t(o):r===null||r===void 0?void 0:r()};Notification.prototype.accept=function(e,t,r){var n;return o.isFunction((n=e)===null||n===void 0?void 0:n.next)?this.observe(e):this.do(e,t,r)};Notification.prototype.toObservable=function(){var e=this,t=e.kind,r=e.value,o=e.error;var a=t==="N"?i.of(r):t==="E"?s.throwError((function(){return o})):t==="C"?n.EMPTY:0;if(!a){throw new TypeError("Unexpected notification kind "+t)}return a};Notification.createNext=function(e){return new Notification("N",e)};Notification.createError=function(e){return new Notification("E",undefined,e)};Notification.createComplete=function(){return Notification.completeNotification};Notification.completeNotification=new Notification("C");return Notification}();t.Notification=c;function observeNotification(e,t){var r,n,i;var s=e,o=s.kind,a=s.value,c=s.error;if(typeof o!=="string"){throw new TypeError('Invalid notification, missing "kind"')}o==="N"?(r=t.next)===null||r===void 0?void 0:r.call(t,a):o==="E"?(n=t.error)===null||n===void 0?void 0:n.call(t,c):(i=t.complete)===null||i===void 0?void 0:i.call(t)}t.observeNotification=observeNotification},18948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createNotification=t.nextNotification=t.errorNotification=t.COMPLETE_NOTIFICATION=void 0;t.COMPLETE_NOTIFICATION=function(){return createNotification("C",undefined,undefined)}();function errorNotification(e){return createNotification("E",undefined,e)}t.errorNotification=errorNotification;function nextNotification(e){return createNotification("N",e,undefined)}t.nextNotification=nextNotification;function createNotification(e,t,r){return{kind:e,value:t,error:r}}t.createNotification=createNotification},45480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Observable=void 0;var n=r(82761);var i=r(20557);var s=r(48618);var o=r(84056);var a=r(83748);var c=r(18969);var u=r(97713);var d=function(){function Observable(e){if(e){this._subscribe=e}}Observable.prototype.lift=function(e){var t=new Observable;t.source=this;t.operator=e;return t};Observable.prototype.subscribe=function(e,t,r){var i=this;var s=isSubscriber(e)?e:new n.SafeSubscriber(e,t,r);u.errorContext((function(){var e=i,t=e.operator,r=e.source;s.add(t?t.call(s,r):r?i._subscribe(s):i._trySubscribe(s))}));return s};Observable.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}};Observable.prototype.forEach=function(e,t){var r=this;t=getPromiseCtor(t);return new t((function(t,i){var s=new n.SafeSubscriber({next:function(t){try{e(t)}catch(e){i(e);s.unsubscribe()}},error:i,complete:t});r.subscribe(s)}))};Observable.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)};Observable.prototype[s.observable]=function(){return this};Observable.prototype.pipe=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return o.pipeFromArray(e)(this)};Observable.prototype.toPromise=function(e){var t=this;e=getPromiseCtor(e);return new e((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))};Observable.create=function(e){return new Observable(e)};return Observable}();t.Observable=d;function getPromiseCtor(e){var t;return(t=e!==null&&e!==void 0?e:a.config.Promise)!==null&&t!==void 0?t:Promise}function isObserver(e){return e&&c.isFunction(e.next)&&c.isFunction(e.error)&&c.isFunction(e.complete)}function isSubscriber(e){return e&&e instanceof n.Subscriber||isObserver(e)&&i.isSubscription(e)}},79886:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.ReplaySubject=void 0;var i=r(6755);var s=r(97480);var o=function(e){n(ReplaySubject,e);function ReplaySubject(t,r,n){if(t===void 0){t=Infinity}if(r===void 0){r=Infinity}if(n===void 0){n=s.dateTimestampProvider}var i=e.call(this)||this;i._bufferSize=t;i._windowTime=r;i._timestampProvider=n;i._buffer=[];i._infiniteTimeWindow=true;i._infiniteTimeWindow=r===Infinity;i._bufferSize=Math.max(1,t);i._windowTime=Math.max(1,r);return i}ReplaySubject.prototype.next=function(t){var r=this,n=r.isStopped,i=r._buffer,s=r._infiniteTimeWindow,o=r._timestampProvider,a=r._windowTime;if(!n){i.push(t);!s&&i.push(o.now()+a)}this._trimBuffer();e.prototype.next.call(this,t)};ReplaySubject.prototype._subscribe=function(e){this._throwIfClosed();this._trimBuffer();var t=this._innerSubscribe(e);var r=this,n=r._infiniteTimeWindow,i=r._buffer;var s=i.slice();for(var o=0;o<s.length&&!e.closed;o+=n?1:2){e.next(s[o])}this._checkFinalizedStatuses(e);return t};ReplaySubject.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,r=e._timestampProvider,n=e._buffer,i=e._infiniteTimeWindow;var s=(i?1:2)*t;t<Infinity&&s<n.length&&n.splice(0,n.length-s);if(!i){var o=r.now();var a=0;for(var c=1;c<n.length&&n[c]<=o;c+=2){a=c}a&&n.splice(0,a+1)}};return ReplaySubject}(i.Subject);t.ReplaySubject=o},93892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Scheduler=void 0;var n=r(97480);var i=function(){function Scheduler(e,t){if(t===void 0){t=Scheduler.now}this.schedulerActionCtor=e;this.now=t}Scheduler.prototype.schedule=function(e,t,r){if(t===void 0){t=0}return new this.schedulerActionCtor(this,e).schedule(r,t)};Scheduler.now=n.dateTimestampProvider.now;return Scheduler}();t.Scheduler=i},6755:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.AnonymousSubject=t.Subject=void 0;var s=r(45480);var o=r(20557);var a=r(49638);var c=r(14610);var u=r(97713);var d=function(e){n(Subject,e);function Subject(){var t=e.call(this)||this;t.closed=false;t.currentObservers=null;t.observers=[];t.isStopped=false;t.hasError=false;t.thrownError=null;return t}Subject.prototype.lift=function(e){var t=new p(this,this);t.operator=e;return t};Subject.prototype._throwIfClosed=function(){if(this.closed){throw new a.ObjectUnsubscribedError}};Subject.prototype.next=function(e){var t=this;u.errorContext((function(){var r,n;t._throwIfClosed();if(!t.isStopped){if(!t.currentObservers){t.currentObservers=Array.from(t.observers)}try{for(var s=i(t.currentObservers),o=s.next();!o.done;o=s.next()){var a=o.value;a.next(e)}}catch(e){r={error:e}}finally{try{if(o&&!o.done&&(n=s.return))n.call(s)}finally{if(r)throw r.error}}}}))};Subject.prototype.error=function(e){var t=this;u.errorContext((function(){t._throwIfClosed();if(!t.isStopped){t.hasError=t.isStopped=true;t.thrownError=e;var r=t.observers;while(r.length){r.shift().error(e)}}}))};Subject.prototype.complete=function(){var e=this;u.errorContext((function(){e._throwIfClosed();if(!e.isStopped){e.isStopped=true;var t=e.observers;while(t.length){t.shift().complete()}}}))};Subject.prototype.unsubscribe=function(){this.isStopped=this.closed=true;this.observers=this.currentObservers=null};Object.defineProperty(Subject.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:false,configurable:true});Subject.prototype._trySubscribe=function(t){this._throwIfClosed();return e.prototype._trySubscribe.call(this,t)};Subject.prototype._subscribe=function(e){this._throwIfClosed();this._checkFinalizedStatuses(e);return this._innerSubscribe(e)};Subject.prototype._innerSubscribe=function(e){var t=this;var r=this,n=r.hasError,i=r.isStopped,s=r.observers;if(n||i){return o.EMPTY_SUBSCRIPTION}this.currentObservers=null;s.push(e);return new o.Subscription((function(){t.currentObservers=null;c.arrRemove(s,e)}))};Subject.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t.thrownError,i=t.isStopped;if(r){e.error(n)}else if(i){e.complete()}};Subject.prototype.asObservable=function(){var e=new s.Observable;e.source=this;return e};Subject.create=function(e,t){return new p(e,t)};return Subject}(s.Observable);t.Subject=d;var p=function(e){n(AnonymousSubject,e);function AnonymousSubject(t,r){var n=e.call(this)||this;n.destination=t;n.source=r;return n}AnonymousSubject.prototype.next=function(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0?void 0:r.call(t,e)};AnonymousSubject.prototype.error=function(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0?void 0:r.call(t,e)};AnonymousSubject.prototype.complete=function(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0?void 0:t.call(e)};AnonymousSubject.prototype._subscribe=function(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:o.EMPTY_SUBSCRIPTION};return AnonymousSubject}(d);t.AnonymousSubject=p},82761:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.EMPTY_OBSERVER=t.SafeSubscriber=t.Subscriber=void 0;var i=r(18969);var s=r(20557);var o=r(83748);var a=r(95154);var c=r(95573);var u=r(18948);var d=r(13774);var p=r(97713);var m=function(e){n(Subscriber,e);function Subscriber(r){var n=e.call(this)||this;n.isStopped=false;if(r){n.destination=r;if(s.isSubscription(r)){r.add(n)}}else{n.destination=t.EMPTY_OBSERVER}return n}Subscriber.create=function(e,t,r){return new b(e,t,r)};Subscriber.prototype.next=function(e){if(this.isStopped){handleStoppedNotification(u.nextNotification(e),this)}else{this._next(e)}};Subscriber.prototype.error=function(e){if(this.isStopped){handleStoppedNotification(u.errorNotification(e),this)}else{this.isStopped=true;this._error(e)}};Subscriber.prototype.complete=function(){if(this.isStopped){handleStoppedNotification(u.COMPLETE_NOTIFICATION,this)}else{this.isStopped=true;this._complete()}};Subscriber.prototype.unsubscribe=function(){if(!this.closed){this.isStopped=true;e.prototype.unsubscribe.call(this);this.destination=null}};Subscriber.prototype._next=function(e){this.destination.next(e)};Subscriber.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}};Subscriber.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};return Subscriber}(s.Subscription);t.Subscriber=m;var y=Function.prototype.bind;function bind(e,t){return y.call(e,t)}var g=function(){function ConsumerObserver(e){this.partialObserver=e}ConsumerObserver.prototype.next=function(e){var t=this.partialObserver;if(t.next){try{t.next(e)}catch(e){handleUnhandledError(e)}}};ConsumerObserver.prototype.error=function(e){var t=this.partialObserver;if(t.error){try{t.error(e)}catch(e){handleUnhandledError(e)}}else{handleUnhandledError(e)}};ConsumerObserver.prototype.complete=function(){var e=this.partialObserver;if(e.complete){try{e.complete()}catch(e){handleUnhandledError(e)}}};return ConsumerObserver}();var b=function(e){n(SafeSubscriber,e);function SafeSubscriber(t,r,n){var s=e.call(this)||this;var a;if(i.isFunction(t)||!t){a={next:t!==null&&t!==void 0?t:undefined,error:r!==null&&r!==void 0?r:undefined,complete:n!==null&&n!==void 0?n:undefined}}else{var c;if(s&&o.config.useDeprecatedNextContext){c=Object.create(t);c.unsubscribe=function(){return s.unsubscribe()};a={next:t.next&&bind(t.next,c),error:t.error&&bind(t.error,c),complete:t.complete&&bind(t.complete,c)}}else{a=t}}s.destination=new g(a);return s}return SafeSubscriber}(m);t.SafeSubscriber=b;function handleUnhandledError(e){if(o.config.useDeprecatedSynchronousErrorHandling){p.captureError(e)}else{a.reportUnhandledError(e)}}function defaultErrorHandler(e){throw e}function handleStoppedNotification(e,t){var r=o.config.onStoppedNotification;r&&d.timeoutProvider.setTimeout((function(){return r(e,t)}))}t.EMPTY_OBSERVER={closed:true,next:c.noop,error:defaultErrorHandler,complete:c.noop}},20557:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var i=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var s=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.isSubscription=t.EMPTY_SUBSCRIPTION=t.Subscription=void 0;var o=r(18969);var a=r(86162);var c=r(14610);var u=function(){function Subscription(e){this.initialTeardown=e;this.closed=false;this._parentage=null;this._finalizers=null}Subscription.prototype.unsubscribe=function(){var e,t,r,c;var u;if(!this.closed){this.closed=true;var d=this._parentage;if(d){this._parentage=null;if(Array.isArray(d)){try{for(var p=n(d),m=p.next();!m.done;m=p.next()){var y=m.value;y.remove(this)}}catch(t){e={error:t}}finally{try{if(m&&!m.done&&(t=p.return))t.call(p)}finally{if(e)throw e.error}}}else{d.remove(this)}}var g=this.initialTeardown;if(o.isFunction(g)){try{g()}catch(e){u=e instanceof a.UnsubscriptionError?e.errors:[e]}}var b=this._finalizers;if(b){this._finalizers=null;try{for(var v=n(b),w=v.next();!w.done;w=v.next()){var _=w.value;try{execFinalizer(_)}catch(e){u=u!==null&&u!==void 0?u:[];if(e instanceof a.UnsubscriptionError){u=s(s([],i(u)),i(e.errors))}else{u.push(e)}}}}catch(e){r={error:e}}finally{try{if(w&&!w.done&&(c=v.return))c.call(v)}finally{if(r)throw r.error}}}if(u){throw new a.UnsubscriptionError(u)}}};Subscription.prototype.add=function(e){var t;if(e&&e!==this){if(this.closed){execFinalizer(e)}else{if(e instanceof Subscription){if(e.closed||e._hasParent(this)){return}e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}};Subscription.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)};Subscription.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e};Subscription.prototype._removeParent=function(e){var t=this._parentage;if(t===e){this._parentage=null}else if(Array.isArray(t)){c.arrRemove(t,e)}};Subscription.prototype.remove=function(e){var t=this._finalizers;t&&c.arrRemove(t,e);if(e instanceof Subscription){e._removeParent(this)}};Subscription.EMPTY=function(){var e=new Subscription;e.closed=true;return e}();return Subscription}();t.Subscription=u;t.EMPTY_SUBSCRIPTION=u.EMPTY;function isSubscription(e){return e instanceof u||e&&"closed"in e&&o.isFunction(e.remove)&&o.isFunction(e.add)&&o.isFunction(e.unsubscribe)}t.isSubscription=isSubscription;function execFinalizer(e){if(o.isFunction(e)){e()}else{e.unsubscribe()}}},83748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.config=void 0;t.config={onUnhandledError:null,onStoppedNotification:null,Promise:undefined,useDeprecatedSynchronousErrorHandling:false,useDeprecatedNextContext:false}},61868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.firstValueFrom=void 0;var n=r(52219);var i=r(82761);function firstValueFrom(e,t){var r=typeof t==="object";return new Promise((function(s,o){var a=new i.SafeSubscriber({next:function(e){s(e);a.unsubscribe()},error:o,complete:function(){if(r){s(t.defaultValue)}else{o(new n.EmptyError)}}});e.subscribe(a)}))}t.firstValueFrom=firstValueFrom},17058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.lastValueFrom=void 0;var n=r(52219);function lastValueFrom(e,t){var r=typeof t==="object";return new Promise((function(i,s){var o=false;var a;e.subscribe({next:function(e){a=e;o=true},error:s,complete:function(){if(o){i(a)}else if(r){i(t.defaultValue)}else{s(new n.EmptyError)}}})}))}t.lastValueFrom=lastValueFrom},41312:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.ConnectableObservable=void 0;var i=r(45480);var s=r(20557);var o=r(39543);var a=r(40822);var c=r(74135);var u=function(e){n(ConnectableObservable,e);function ConnectableObservable(t,r){var n=e.call(this)||this;n.source=t;n.subjectFactory=r;n._subject=null;n._refCount=0;n._connection=null;if(c.hasLift(t)){n.lift=t.lift}return n}ConnectableObservable.prototype._subscribe=function(e){return this.getSubject().subscribe(e)};ConnectableObservable.prototype.getSubject=function(){var e=this._subject;if(!e||e.isStopped){this._subject=this.subjectFactory()}return this._subject};ConnectableObservable.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null;e===null||e===void 0?void 0:e.unsubscribe()};ConnectableObservable.prototype.connect=function(){var e=this;var t=this._connection;if(!t){t=this._connection=new s.Subscription;var r=this.getSubject();t.add(this.source.subscribe(a.createOperatorSubscriber(r,undefined,(function(){e._teardown();r.complete()}),(function(t){e._teardown();r.error(t)}),(function(){return e._teardown()}))));if(t.closed){this._connection=null;t=s.Subscription.EMPTY}}return t};ConnectableObservable.prototype.refCount=function(){return o.refCount()(this)};return ConnectableObservable}(i.Observable);t.ConnectableObservable=u},1347:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.bindCallback=void 0;var n=r(11306);function bindCallback(e,t,r){return n.bindCallbackInternals(false,e,t,r)}t.bindCallback=bindCallback},11306:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.bindCallbackInternals=void 0;var s=r(38676);var o=r(45480);var a=r(42972);var c=r(58890);var u=r(90002);var d=r(58042);function bindCallbackInternals(e,t,r,p){if(r){if(s.isScheduler(r)){p=r}else{return function(){var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}return bindCallbackInternals(e,t,p).apply(this,n).pipe(c.mapOneOrManyArgs(r))}}}if(p){return function(){var r=[];for(var n=0;n<arguments.length;n++){r[n]=arguments[n]}return bindCallbackInternals(e,t).apply(this,r).pipe(a.subscribeOn(p),u.observeOn(p))}}return function(){var r=this;var s=[];for(var a=0;a<arguments.length;a++){s[a]=arguments[a]}var c=new d.AsyncSubject;var u=true;return new o.Observable((function(o){var a=c.subscribe(o);if(u){u=false;var d=false;var p=false;t.apply(r,i(i([],n(s)),[function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}if(e){var n=t.shift();if(n!=null){c.error(n);return}}c.next(1<t.length?t:t[0]);p=true;if(d){c.complete()}}]));if(p){c.complete()}d=true}return a}))}}t.bindCallbackInternals=bindCallbackInternals},36842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.bindNodeCallback=void 0;var n=r(11306);function bindNodeCallback(e,t,r){return n.bindCallbackInternals(true,e,t,r)}t.bindNodeCallback=bindNodeCallback},44058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.combineLatestInit=t.combineLatest=void 0;var n=r(45480);var i=r(30260);var s=r(97095);var o=r(31393);var a=r(58890);var c=r(38829);var u=r(45298);var d=r(40822);var p=r(86731);function combineLatest(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=c.popScheduler(e);var d=c.popResultSelector(e);var p=i.argsArgArrayOrObject(e),m=p.args,y=p.keys;if(m.length===0){return s.from([],r)}var g=new n.Observable(combineLatestInit(m,r,y?function(e){return u.createObject(y,e)}:o.identity));return d?g.pipe(a.mapOneOrManyArgs(d)):g}t.combineLatest=combineLatest;function combineLatestInit(e,t,r){if(r===void 0){r=o.identity}return function(n){maybeSchedule(t,(function(){var i=e.length;var o=new Array(i);var a=i;var c=i;var _loop_1=function(i){maybeSchedule(t,(function(){var u=s.from(e[i],t);var p=false;u.subscribe(d.createOperatorSubscriber(n,(function(e){o[i]=e;if(!p){p=true;c--}if(!c){n.next(r(o.slice()))}}),(function(){if(!--a){n.complete()}})))}),n)};for(var u=0;u<i;u++){_loop_1(u)}}),n)}}t.combineLatestInit=combineLatestInit;function maybeSchedule(e,t,r){if(e){p.executeSchedule(r,e,t)}else{t()}}},61132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concat=void 0;var n=r(83038);var i=r(38829);var s=r(97095);function concat(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return n.concatAll()(s.from(e,i.popScheduler(e)))}t.concat=concat},81607:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.connectable=void 0;var n=r(6755);var i=r(45480);var s=r(31182);var o={connector:function(){return new n.Subject},resetOnDisconnect:true};function connectable(e,t){if(t===void 0){t=o}var r=null;var n=t.connector,a=t.resetOnDisconnect,c=a===void 0?true:a;var u=n();var d=new i.Observable((function(e){return u.subscribe(e)}));d.connect=function(){if(!r||r.closed){r=s.defer((function(){return e})).subscribe(u);if(c){r.add((function(){return u=n()}))}}return r};return d}t.connectable=connectable},31182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.defer=void 0;var n=r(45480);var i=r(87422);function defer(e){return new n.Observable((function(t){i.innerFrom(e()).subscribe(t)}))}t.defer=defer},69750:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.animationFrames=void 0;var n=r(45480);var i=r(85163);var s=r(10622);function animationFrames(e){return e?animationFramesFactory(e):o}t.animationFrames=animationFrames;function animationFramesFactory(e){return new n.Observable((function(t){var r=e||i.performanceTimestampProvider;var n=r.now();var o=0;var run=function(){if(!t.closed){o=s.animationFrameProvider.requestAnimationFrame((function(i){o=0;var s=r.now();t.next({timestamp:e?s:i,elapsed:s-n});run()}))}};run();return function(){if(o){s.animationFrameProvider.cancelAnimationFrame(o)}}}))}var o=animationFramesFactory()},88008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.empty=t.EMPTY=void 0;var n=r(45480);t.EMPTY=new n.Observable((function(e){return e.complete()}));function empty(e){return e?emptyScheduled(e):t.EMPTY}t.empty=empty;function emptyScheduled(e){return new n.Observable((function(t){return e.schedule((function(){return t.complete()}))}))}},11361:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.forkJoin=void 0;var n=r(45480);var i=r(30260);var s=r(87422);var o=r(38829);var a=r(40822);var c=r(58890);var u=r(45298);function forkJoin(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=o.popResultSelector(e);var d=i.argsArgArrayOrObject(e),p=d.args,m=d.keys;var y=new n.Observable((function(e){var t=p.length;if(!t){e.complete();return}var r=new Array(t);var n=t;var i=t;var _loop_1=function(t){var o=false;s.innerFrom(p[t]).subscribe(a.createOperatorSubscriber(e,(function(e){if(!o){o=true;i--}r[t]=e}),(function(){return n--}),undefined,(function(){if(!n||!o){if(!i){e.next(m?u.createObject(m,r):r)}e.complete()}})))};for(var o=0;o<t;o++){_loop_1(o)}}));return r?y.pipe(c.mapOneOrManyArgs(r)):y}t.forkJoin=forkJoin},97095:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.from=void 0;var n=r(36832);var i=r(87422);function from(e,t){return t?n.scheduled(e,t):i.innerFrom(e)}t.from=from},95961:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:true});t.fromEvent=void 0;var i=r(87422);var s=r(45480);var o=r(34960);var a=r(54781);var c=r(18969);var u=r(58890);var d=["addListener","removeListener"];var p=["addEventListener","removeEventListener"];var m=["on","off"];function fromEvent(e,t,r,y){if(c.isFunction(r)){y=r;r=undefined}if(y){return fromEvent(e,t,r).pipe(u.mapOneOrManyArgs(y))}var g=n(isEventTarget(e)?p.map((function(n){return function(i){return e[n](t,i,r)}})):isNodeStyleEventEmitter(e)?d.map(toCommonHandlerRegistry(e,t)):isJQueryStyleEventEmitter(e)?m.map(toCommonHandlerRegistry(e,t)):[],2),b=g[0],v=g[1];if(!b){if(a.isArrayLike(e)){return o.mergeMap((function(e){return fromEvent(e,t,r)}))(i.innerFrom(e))}}if(!b){throw new TypeError("Invalid event target")}return new s.Observable((function(e){var handler=function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}return e.next(1<t.length?t:t[0])};b(handler);return function(){return v(handler)}}))}t.fromEvent=fromEvent;function toCommonHandlerRegistry(e,t){return function(r){return function(n){return e[r](t,n)}}}function isNodeStyleEventEmitter(e){return c.isFunction(e.addListener)&&c.isFunction(e.removeListener)}function isJQueryStyleEventEmitter(e){return c.isFunction(e.on)&&c.isFunction(e.off)}function isEventTarget(e){return c.isFunction(e.addEventListener)&&c.isFunction(e.removeEventListener)}},50328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.fromEventPattern=void 0;var n=r(45480);var i=r(18969);var s=r(58890);function fromEventPattern(e,t,r){if(r){return fromEventPattern(e,t).pipe(s.mapOneOrManyArgs(r))}return new n.Observable((function(r){var handler=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return r.next(e.length===1?e[0]:e)};var n=e(handler);return i.isFunction(t)?function(){return t(handler,n)}:undefined}))}t.fromEventPattern=fromEventPattern},2145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.fromSubscribable=void 0;var n=r(45480);function fromSubscribable(e){return new n.Observable((function(t){return e.subscribe(t)}))}t.fromSubscribable=fromSubscribable},16614:function(e,t,r){"use strict";var n=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e];i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};Object.defineProperty(t,"__esModule",{value:true});t.generate=void 0;var i=r(31393);var s=r(38676);var o=r(31182);var a=r(32596);function generate(e,t,r,c,u){var d,p;var m;var y;if(arguments.length===1){d=e,y=d.initialState,t=d.condition,r=d.iterate,p=d.resultSelector,m=p===void 0?i.identity:p,u=d.scheduler}else{y=e;if(!c||s.isScheduler(c)){m=i.identity;u=c}else{m=c}}function gen(){var e;return n(this,(function(n){switch(n.label){case 0:e=y;n.label=1;case 1:if(!(!t||t(e)))return[3,4];return[4,m(e)];case 2:n.sent();n.label=3;case 3:e=r(e);return[3,1];case 4:return[2]}}))}return o.defer(u?function(){return a.scheduleIterable(gen(),u)}:gen)}t.generate=generate},12107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.iif=void 0;var n=r(31182);function iif(e,t,r){return n.defer((function(){return e()?t:r}))}t.iif=iif},87422:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var i=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e];i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};var s=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof o==="function"?o(e):e[Symbol.iterator](),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(t){r[t]=e[t]&&function(r){return new Promise((function(n,i){r=e[t](r),settle(n,i,r.done,r.value)}))}}function settle(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}};var o=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.fromReadableStreamLike=t.fromAsyncIterable=t.fromIterable=t.fromPromise=t.fromArrayLike=t.fromInteropObservable=t.innerFrom=void 0;var a=r(54781);var c=r(53646);var u=r(45480);var d=r(2834);var p=r(92783);var m=r(23165);var y=r(73220);var g=r(86559);var b=r(18969);var v=r(95154);var w=r(48618);function innerFrom(e){if(e instanceof u.Observable){return e}if(e!=null){if(d.isInteropObservable(e)){return fromInteropObservable(e)}if(a.isArrayLike(e)){return fromArrayLike(e)}if(c.isPromise(e)){return fromPromise(e)}if(p.isAsyncIterable(e)){return fromAsyncIterable(e)}if(y.isIterable(e)){return fromIterable(e)}if(g.isReadableStreamLike(e)){return fromReadableStreamLike(e)}}throw m.createInvalidObservableTypeError(e)}t.innerFrom=innerFrom;function fromInteropObservable(e){return new u.Observable((function(t){var r=e[w.observable]();if(b.isFunction(r.subscribe)){return r.subscribe(t)}throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}t.fromInteropObservable=fromInteropObservable;function fromArrayLike(e){return new u.Observable((function(t){for(var r=0;r<e.length&&!t.closed;r++){t.next(e[r])}t.complete()}))}t.fromArrayLike=fromArrayLike;function fromPromise(e){return new u.Observable((function(t){e.then((function(e){if(!t.closed){t.next(e);t.complete()}}),(function(e){return t.error(e)})).then(null,v.reportUnhandledError)}))}t.fromPromise=fromPromise;function fromIterable(e){return new u.Observable((function(t){var r,n;try{for(var i=o(e),s=i.next();!s.done;s=i.next()){var a=s.value;t.next(a);if(t.closed){return}}}catch(e){r={error:e}}finally{try{if(s&&!s.done&&(n=i.return))n.call(i)}finally{if(r)throw r.error}}t.complete()}))}t.fromIterable=fromIterable;function fromAsyncIterable(e){return new u.Observable((function(t){process(e,t).catch((function(e){return t.error(e)}))}))}t.fromAsyncIterable=fromAsyncIterable;function fromReadableStreamLike(e){return fromAsyncIterable(g.readableStreamLikeToAsyncGenerator(e))}t.fromReadableStreamLike=fromReadableStreamLike;function process(e,t){var r,o;var a,c;return n(this,void 0,void 0,(function(){var n,u;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,11]);r=s(e);i.label=1;case 1:return[4,r.next()];case 2:if(!(o=i.sent(),!o.done))return[3,4];n=o.value;t.next(n);if(t.closed){return[2]}i.label=3;case 3:return[3,1];case 4:return[3,11];case 5:u=i.sent();a={error:u};return[3,11];case 6:i.trys.push([6,,9,10]);if(!(o&&!o.done&&(c=r.return)))return[3,8];return[4,c.call(r)];case 7:i.sent();i.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:t.complete();return[2]}}))}))}},93610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.interval=void 0;var n=r(7362);var i=r(53129);function interval(e,t){if(e===void 0){e=0}if(t===void 0){t=n.asyncScheduler}if(e<0){e=0}return i.timer(e,e,t)}t.interval=interval},41509:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.merge=void 0;var n=r(12130);var i=r(87422);var s=r(88008);var o=r(38829);var a=r(97095);function merge(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=o.popScheduler(e);var c=o.popNumber(e,Infinity);var u=e;return!u.length?s.EMPTY:u.length===1?i.innerFrom(u[0]):n.mergeAll(c)(a.from(u,r))}t.merge=merge},3333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.never=t.NEVER=void 0;var n=r(45480);var i=r(95573);t.NEVER=new n.Observable(i.noop);function never(){return t.NEVER}t.never=never},50498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.of=void 0;var n=r(38829);var i=r(97095);function of(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=n.popScheduler(e);return i.from(e,r)}t.of=of},79997:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.onErrorResumeNext=void 0;var n=r(45480);var i=r(13189);var s=r(40822);var o=r(95573);var a=r(87422);function onErrorResumeNext(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=i.argsOrArgArray(e);return new n.Observable((function(e){var t=0;var subscribeNext=function(){if(t<r.length){var n=void 0;try{n=a.innerFrom(r[t++])}catch(e){subscribeNext();return}var i=new s.OperatorSubscriber(e,undefined,o.noop,o.noop);n.subscribe(i);i.add(subscribeNext)}else{e.complete()}};subscribeNext()}))}t.onErrorResumeNext=onErrorResumeNext},19108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.pairs=void 0;var n=r(97095);function pairs(e,t){return n.from(Object.entries(e),t)}t.pairs=pairs},71864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.partition=void 0;var n=r(86291);var i=r(47778);var s=r(87422);function partition(e,t,r){return[i.filter(t,r)(s.innerFrom(e)),i.filter(n.not(t,r))(s.innerFrom(e))]}t.partition=partition},16882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.raceInit=t.race=void 0;var n=r(45480);var i=r(87422);var s=r(13189);var o=r(40822);function race(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}e=s.argsOrArgArray(e);return e.length===1?i.innerFrom(e[0]):new n.Observable(raceInit(e))}t.race=race;function raceInit(e){return function(t){var r=[];var _loop_1=function(n){r.push(i.innerFrom(e[n]).subscribe(o.createOperatorSubscriber(t,(function(e){if(r){for(var i=0;i<r.length;i++){i!==n&&r[i].unsubscribe()}r=null}t.next(e)}))))};for(var n=0;r&&!t.closed&&n<e.length;n++){_loop_1(n)}}}t.raceInit=raceInit},79234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.range=void 0;var n=r(45480);var i=r(88008);function range(e,t,r){if(t==null){t=e;e=0}if(t<=0){return i.EMPTY}var s=t+e;return new n.Observable(r?function(t){var n=e;return r.schedule((function(){if(n<s){t.next(n++);this.schedule()}else{t.complete()}}))}:function(t){var r=e;while(r<s&&!t.closed){t.next(r++)}t.complete()})}t.range=range},95050:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throwError=void 0;var n=r(45480);var i=r(18969);function throwError(e,t){var r=i.isFunction(e)?e:function(){return e};var init=function(e){return e.error(r())};return new n.Observable(t?function(e){return t.schedule(init,0,e)}:init)}t.throwError=throwError},53129:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.timer=void 0;var n=r(45480);var i=r(7362);var s=r(38676);var o=r(61611);function timer(e,t,r){if(e===void 0){e=0}if(r===void 0){r=i.async}var a=-1;if(t!=null){if(s.isScheduler(t)){r=t}else{a=t}}return new n.Observable((function(t){var n=o.isValidDate(e)?+e-r.now():e;if(n<0){n=0}var i=0;return r.schedule((function(){if(!t.closed){t.next(i++);if(0<=a){this.schedule(undefined,a)}else{t.complete()}}}),n)}))}t.timer=timer},96014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.using=void 0;var n=r(45480);var i=r(87422);var s=r(88008);function using(e,t){return new n.Observable((function(r){var n=e();var o=t(n);var a=o?i.innerFrom(o):s.EMPTY;a.subscribe(r);return function(){if(n){n.unsubscribe()}}}))}t.using=using},92308:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.zip=void 0;var s=r(45480);var o=r(87422);var a=r(13189);var c=r(88008);var u=r(40822);var d=r(38829);function zip(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=d.popResultSelector(e);var p=a.argsOrArgArray(e);return p.length?new s.Observable((function(e){var t=p.map((function(){return[]}));var s=p.map((function(){return false}));e.add((function(){t=s=null}));var _loop_1=function(a){o.innerFrom(p[a]).subscribe(u.createOperatorSubscriber(e,(function(o){t[a].push(o);if(t.every((function(e){return e.length}))){var c=t.map((function(e){return e.shift()}));e.next(r?r.apply(void 0,i([],n(c))):c);if(t.some((function(e,t){return!e.length&&s[t]}))){e.complete()}}}),(function(){s[a]=true;!t[a].length&&e.complete()})))};for(var a=0;!e.closed&&a<p.length;a++){_loop_1(a)}return function(){t=s=null}})):c.EMPTY}t.zip=zip},40822:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.OperatorSubscriber=t.createOperatorSubscriber=void 0;var i=r(82761);function createOperatorSubscriber(e,t,r,n,i){return new s(e,t,r,n,i)}t.createOperatorSubscriber=createOperatorSubscriber;var s=function(e){n(OperatorSubscriber,e);function OperatorSubscriber(t,r,n,i,s,o){var a=e.call(this,t)||this;a.onFinalize=s;a.shouldUnsubscribe=o;a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next;a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error;a._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete;return a}OperatorSubscriber.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this);!r&&((t=this.onFinalize)===null||t===void 0?void 0:t.call(this))}};return OperatorSubscriber}(i.Subscriber);t.OperatorSubscriber=s},24058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.audit=void 0;var n=r(74135);var i=r(87422);var s=r(40822);function audit(e){return n.operate((function(t,r){var n=false;var o=null;var a=null;var c=false;var endDuration=function(){a===null||a===void 0?void 0:a.unsubscribe();a=null;if(n){n=false;var e=o;o=null;r.next(e)}c&&r.complete()};var cleanupDuration=function(){a=null;c&&r.complete()};t.subscribe(s.createOperatorSubscriber(r,(function(t){n=true;o=t;if(!a){i.innerFrom(e(t)).subscribe(a=s.createOperatorSubscriber(r,endDuration,cleanupDuration))}}),(function(){c=true;(!n||!a||a.closed)&&r.complete()})))}))}t.audit=audit},82270:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.auditTime=void 0;var n=r(7362);var i=r(24058);var s=r(53129);function auditTime(e,t){if(t===void 0){t=n.asyncScheduler}return i.audit((function(){return s.timer(e,t)}))}t.auditTime=auditTime},90815:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.buffer=void 0;var n=r(74135);var i=r(95573);var s=r(40822);var o=r(87422);function buffer(e){return n.operate((function(t,r){var n=[];t.subscribe(s.createOperatorSubscriber(r,(function(e){return n.push(e)}),(function(){r.next(n);r.complete()})));o.innerFrom(e).subscribe(s.createOperatorSubscriber(r,(function(){var e=n;n=[];r.next(e)}),i.noop));return function(){n=null}}))}t.buffer=buffer},45132:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.bufferCount=void 0;var i=r(74135);var s=r(40822);var o=r(14610);function bufferCount(e,t){if(t===void 0){t=null}t=t!==null&&t!==void 0?t:e;return i.operate((function(r,i){var a=[];var c=0;r.subscribe(s.createOperatorSubscriber(i,(function(r){var s,u,d,p;var m=null;if(c++%t===0){a.push([])}try{for(var y=n(a),g=y.next();!g.done;g=y.next()){var b=g.value;b.push(r);if(e<=b.length){m=m!==null&&m!==void 0?m:[];m.push(b)}}}catch(e){s={error:e}}finally{try{if(g&&!g.done&&(u=y.return))u.call(y)}finally{if(s)throw s.error}}if(m){try{for(var v=n(m),w=v.next();!w.done;w=v.next()){var b=w.value;o.arrRemove(a,b);i.next(b)}}catch(e){d={error:e}}finally{try{if(w&&!w.done&&(p=v.return))p.call(v)}finally{if(d)throw d.error}}}}),(function(){var e,t;try{for(var r=n(a),s=r.next();!s.done;s=r.next()){var o=s.value;i.next(o)}}catch(t){e={error:t}}finally{try{if(s&&!s.done&&(t=r.return))t.call(r)}finally{if(e)throw e.error}}i.complete()}),undefined,(function(){a=null})))}))}t.bufferCount=bufferCount},76294:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.bufferTime=void 0;var i=r(20557);var s=r(74135);var o=r(40822);var a=r(14610);var c=r(7362);var u=r(38829);var d=r(86731);function bufferTime(e){var t,r;var p=[];for(var m=1;m<arguments.length;m++){p[m-1]=arguments[m]}var y=(t=u.popScheduler(p))!==null&&t!==void 0?t:c.asyncScheduler;var g=(r=p[0])!==null&&r!==void 0?r:null;var b=p[1]||Infinity;return s.operate((function(t,r){var s=[];var c=false;var emit=function(e){var t=e.buffer,n=e.subs;n.unsubscribe();a.arrRemove(s,e);r.next(t);c&&startBuffer()};var startBuffer=function(){if(s){var t=new i.Subscription;r.add(t);var n=[];var o={buffer:n,subs:t};s.push(o);d.executeSchedule(t,y,(function(){return emit(o)}),e)}};if(g!==null&&g>=0){d.executeSchedule(r,y,startBuffer,g,true)}else{c=true}startBuffer();var u=o.createOperatorSubscriber(r,(function(e){var t,r;var i=s.slice();try{for(var o=n(i),a=o.next();!a.done;a=o.next()){var c=a.value;var u=c.buffer;u.push(e);b<=u.length&&emit(c)}}catch(e){t={error:e}}finally{try{if(a&&!a.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}}),(function(){while(s===null||s===void 0?void 0:s.length){r.next(s.shift().buffer)}u===null||u===void 0?void 0:u.unsubscribe();r.complete();r.unsubscribe()}),undefined,(function(){return s=null}));t.subscribe(u)}))}t.bufferTime=bufferTime},16492:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.bufferToggle=void 0;var i=r(20557);var s=r(74135);var o=r(87422);var a=r(40822);var c=r(95573);var u=r(14610);function bufferToggle(e,t){return s.operate((function(r,s){var d=[];o.innerFrom(e).subscribe(a.createOperatorSubscriber(s,(function(e){var r=[];d.push(r);var n=new i.Subscription;var emitBuffer=function(){u.arrRemove(d,r);s.next(r);n.unsubscribe()};n.add(o.innerFrom(t(e)).subscribe(a.createOperatorSubscriber(s,emitBuffer,c.noop)))}),c.noop));r.subscribe(a.createOperatorSubscriber(s,(function(e){var t,r;try{for(var i=n(d),s=i.next();!s.done;s=i.next()){var o=s.value;o.push(e)}}catch(e){t={error:e}}finally{try{if(s&&!s.done&&(r=i.return))r.call(i)}finally{if(t)throw t.error}}}),(function(){while(d.length>0){s.next(d.shift())}s.complete()})))}))}t.bufferToggle=bufferToggle},41134:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.bufferWhen=void 0;var n=r(74135);var i=r(95573);var s=r(40822);var o=r(87422);function bufferWhen(e){return n.operate((function(t,r){var n=null;var a=null;var openBuffer=function(){a===null||a===void 0?void 0:a.unsubscribe();var t=n;n=[];t&&r.next(t);o.innerFrom(e()).subscribe(a=s.createOperatorSubscriber(r,openBuffer,i.noop))};openBuffer();t.subscribe(s.createOperatorSubscriber(r,(function(e){return n===null||n===void 0?void 0:n.push(e)}),(function(){n&&r.next(n);r.complete()}),undefined,(function(){return n=a=null})))}))}t.bufferWhen=bufferWhen},76243:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.catchError=void 0;var n=r(87422);var i=r(40822);var s=r(74135);function catchError(e){return s.operate((function(t,r){var s=null;var o=false;var a;s=t.subscribe(i.createOperatorSubscriber(r,undefined,undefined,(function(i){a=n.innerFrom(e(i,catchError(e)(t)));if(s){s.unsubscribe();s=null;a.subscribe(r)}else{o=true}})));if(o){s.unsubscribe();s=null;a.subscribe(r)}}))}t.catchError=catchError},5749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.combineAll=void 0;var n=r(6290);t.combineAll=n.combineLatestAll},21357:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.combineLatest=void 0;var s=r(44058);var o=r(74135);var a=r(13189);var c=r(58890);var u=r(84056);var d=r(38829);function combineLatest(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=d.popResultSelector(e);return r?u.pipe(combineLatest.apply(void 0,i([],n(e))),c.mapOneOrManyArgs(r)):o.operate((function(t,r){s.combineLatestInit(i([t],n(a.argsOrArgArray(e))))(r)}))}t.combineLatest=combineLatest},6290:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.combineLatestAll=void 0;var n=r(44058);var i=r(86455);function combineLatestAll(e){return i.joinAllInternals(n.combineLatest,e)}t.combineLatestAll=combineLatestAll},37372:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.combineLatestWith=void 0;var s=r(21357);function combineLatestWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return s.combineLatest.apply(void 0,i([],n(e)))}t.combineLatestWith=combineLatestWith},78826:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.concat=void 0;var s=r(74135);var o=r(83038);var a=r(38829);var c=r(97095);function concat(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=a.popScheduler(e);return s.operate((function(t,s){o.concatAll()(c.from(i([t],n(e)),r)).subscribe(s)}))}t.concat=concat},83038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concatAll=void 0;var n=r(12130);function concatAll(){return n.mergeAll(1)}t.concatAll=concatAll},53219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concatMap=void 0;var n=r(34960);var i=r(18969);function concatMap(e,t){return i.isFunction(t)?n.mergeMap(e,t,1):n.mergeMap(e,1)}t.concatMap=concatMap},79311:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concatMapTo=void 0;var n=r(53219);var i=r(18969);function concatMapTo(e,t){return i.isFunction(t)?n.concatMap((function(){return e}),t):n.concatMap((function(){return e}))}t.concatMapTo=concatMapTo},34486:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.concatWith=void 0;var s=r(78826);function concatWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return s.concat.apply(void 0,i([],n(e)))}t.concatWith=concatWith},68699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.connect=void 0;var n=r(6755);var i=r(87422);var s=r(74135);var o=r(2145);var a={connector:function(){return new n.Subject}};function connect(e,t){if(t===void 0){t=a}var r=t.connector;return s.operate((function(t,n){var s=r();i.innerFrom(e(o.fromSubscribable(s))).subscribe(n);n.add(t.subscribe(s))}))}t.connect=connect},75609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.count=void 0;var n=r(35951);function count(e){return n.reduce((function(t,r,n){return!e||e(r,n)?t+1:t}),0)}t.count=count},29749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.debounce=void 0;var n=r(74135);var i=r(95573);var s=r(40822);var o=r(87422);function debounce(e){return n.operate((function(t,r){var n=false;var a=null;var c=null;var emit=function(){c===null||c===void 0?void 0:c.unsubscribe();c=null;if(n){n=false;var e=a;a=null;r.next(e)}};t.subscribe(s.createOperatorSubscriber(r,(function(t){c===null||c===void 0?void 0:c.unsubscribe();n=true;a=t;c=s.createOperatorSubscriber(r,emit,i.noop);o.innerFrom(e(t)).subscribe(c)}),(function(){emit();r.complete()}),undefined,(function(){a=c=null})))}))}t.debounce=debounce},94111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.debounceTime=void 0;var n=r(7362);var i=r(74135);var s=r(40822);function debounceTime(e,t){if(t===void 0){t=n.asyncScheduler}return i.operate((function(r,n){var i=null;var o=null;var a=null;var emit=function(){if(i){i.unsubscribe();i=null;var e=o;o=null;n.next(e)}};function emitWhenIdle(){var r=a+e;var s=t.now();if(s<r){i=this.schedule(undefined,r-s);n.add(i);return}emit()}r.subscribe(s.createOperatorSubscriber(n,(function(r){o=r;a=t.now();if(!i){i=t.schedule(emitWhenIdle,e);n.add(i)}}),(function(){emit();n.complete()}),undefined,(function(){o=i=null})))}))}t.debounceTime=debounceTime},17558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.defaultIfEmpty=void 0;var n=r(74135);var i=r(40822);function defaultIfEmpty(e){return n.operate((function(t,r){var n=false;t.subscribe(i.createOperatorSubscriber(r,(function(e){n=true;r.next(e)}),(function(){if(!n){r.next(e)}r.complete()})))}))}t.defaultIfEmpty=defaultIfEmpty},48974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.delay=void 0;var n=r(7362);var i=r(66673);var s=r(53129);function delay(e,t){if(t===void 0){t=n.asyncScheduler}var r=s.timer(e,t);return i.delayWhen((function(){return r}))}t.delay=delay},66673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.delayWhen=void 0;var n=r(61132);var i=r(10476);var s=r(59816);var o=r(8517);var a=r(34960);var c=r(87422);function delayWhen(e,t){if(t){return function(r){return n.concat(t.pipe(i.take(1),s.ignoreElements()),r.pipe(delayWhen(e)))}}return a.mergeMap((function(t,r){return c.innerFrom(e(t,r)).pipe(i.take(1),o.mapTo(t))}))}t.delayWhen=delayWhen},17927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.dematerialize=void 0;var n=r(68687);var i=r(74135);var s=r(40822);function dematerialize(){return i.operate((function(e,t){e.subscribe(s.createOperatorSubscriber(t,(function(e){return n.observeNotification(e,t)})))}))}t.dematerialize=dematerialize},43772:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.distinct=void 0;var n=r(74135);var i=r(40822);var s=r(95573);var o=r(87422);function distinct(e,t){return n.operate((function(r,n){var a=new Set;r.subscribe(i.createOperatorSubscriber(n,(function(t){var r=e?e(t):t;if(!a.has(r)){a.add(r);n.next(t)}})));t&&o.innerFrom(t).subscribe(i.createOperatorSubscriber(n,(function(){return a.clear()}),s.noop))}))}t.distinct=distinct},67787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.distinctUntilChanged=void 0;var n=r(31393);var i=r(74135);var s=r(40822);function distinctUntilChanged(e,t){if(t===void 0){t=n.identity}e=e!==null&&e!==void 0?e:defaultCompare;return i.operate((function(r,n){var i;var o=true;r.subscribe(s.createOperatorSubscriber(n,(function(r){var s=t(r);if(o||!e(i,s)){o=false;i=s;n.next(r)}})))}))}t.distinctUntilChanged=distinctUntilChanged;function defaultCompare(e,t){return e===t}},49969:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.distinctUntilKeyChanged=void 0;var n=r(67787);function distinctUntilKeyChanged(e,t){return n.distinctUntilChanged((function(r,n){return t?t(r[e],n[e]):r[e]===n[e]}))}t.distinctUntilKeyChanged=distinctUntilKeyChanged},82007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.elementAt=void 0;var n=r(40314);var i=r(47778);var s=r(38054);var o=r(17558);var a=r(10476);function elementAt(e,t){if(e<0){throw new n.ArgumentOutOfRangeError}var r=arguments.length>=2;return function(c){return c.pipe(i.filter((function(t,r){return r===e})),a.take(1),r?o.defaultIfEmpty(t):s.throwIfEmpty((function(){return new n.ArgumentOutOfRangeError})))}}t.elementAt=elementAt},79339:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.endWith=void 0;var s=r(61132);var o=r(50498);function endWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return function(t){return s.concat(t,o.of.apply(void 0,i([],n(e))))}}t.endWith=endWith},46184:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.every=void 0;var n=r(74135);var i=r(40822);function every(e,t){return n.operate((function(r,n){var s=0;r.subscribe(i.createOperatorSubscriber(n,(function(i){if(!e.call(t,i,s++,r)){n.next(false);n.complete()}}),(function(){n.next(true);n.complete()})))}))}t.every=every},75659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exhaust=void 0;var n=r(6906);t.exhaust=n.exhaustAll},6906:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exhaustAll=void 0;var n=r(44181);var i=r(31393);function exhaustAll(){return n.exhaustMap(i.identity)}t.exhaustAll=exhaustAll},44181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exhaustMap=void 0;var n=r(30784);var i=r(87422);var s=r(74135);var o=r(40822);function exhaustMap(e,t){if(t){return function(r){return r.pipe(exhaustMap((function(r,s){return i.innerFrom(e(r,s)).pipe(n.map((function(e,n){return t(r,e,s,n)})))})))}}return s.operate((function(t,r){var n=0;var s=null;var a=false;t.subscribe(o.createOperatorSubscriber(r,(function(t){if(!s){s=o.createOperatorSubscriber(r,undefined,(function(){s=null;a&&r.complete()}));i.innerFrom(e(t,n++)).subscribe(s)}}),(function(){a=true;!s&&r.complete()})))}))}t.exhaustMap=exhaustMap},58940:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.expand=void 0;var n=r(74135);var i=r(14795);function expand(e,t,r){if(t===void 0){t=Infinity}t=(t||0)<1?Infinity:t;return n.operate((function(n,s){return i.mergeInternals(n,s,e,t,undefined,true,r)}))}t.expand=expand},47778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.filter=void 0;var n=r(74135);var i=r(40822);function filter(e,t){return n.operate((function(r,n){var s=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){return e.call(t,r,s++)&&n.next(r)})))}))}t.filter=filter},94634:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.finalize=void 0;var n=r(74135);function finalize(e){return n.operate((function(t,r){try{t.subscribe(r)}finally{r.add(e)}}))}t.finalize=finalize},40644:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createFind=t.find=void 0;var n=r(74135);var i=r(40822);function find(e,t){return n.operate(createFind(e,t,"value"))}t.find=find;function createFind(e,t,r){var n=r==="index";return function(r,s){var o=0;r.subscribe(i.createOperatorSubscriber(s,(function(i){var a=o++;if(e.call(t,i,a,r)){s.next(n?a:i);s.complete()}}),(function(){s.next(n?-1:undefined);s.complete()})))}}t.createFind=createFind},32947:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.findIndex=void 0;var n=r(74135);var i=r(40644);function findIndex(e,t){return n.operate(i.createFind(e,t,"index"))}t.findIndex=findIndex},58448:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.first=void 0;var n=r(52219);var i=r(47778);var s=r(10476);var o=r(17558);var a=r(38054);var c=r(31393);function first(e,t){var r=arguments.length>=2;return function(u){return u.pipe(e?i.filter((function(t,r){return e(t,r,u)})):c.identity,s.take(1),r?o.defaultIfEmpty(t):a.throwIfEmpty((function(){return new n.EmptyError})))}}t.first=first},8149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.flatMap=void 0;var n=r(34960);t.flatMap=n.mergeMap},19447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.groupBy=void 0;var n=r(45480);var i=r(87422);var s=r(6755);var o=r(74135);var a=r(40822);function groupBy(e,t,r,c){return o.operate((function(o,u){var d;if(!t||typeof t==="function"){d=t}else{r=t.duration,d=t.element,c=t.connector}var p=new Map;var notify=function(e){p.forEach(e);e(u)};var handleError=function(e){return notify((function(t){return t.error(e)}))};var m=0;var y=false;var g=new a.OperatorSubscriber(u,(function(t){try{var n=e(t);var o=p.get(n);if(!o){p.set(n,o=c?c():new s.Subject);var m=createGroupedObservable(n,o);u.next(m);if(r){var y=a.createOperatorSubscriber(o,(function(){o.complete();y===null||y===void 0?void 0:y.unsubscribe()}),undefined,undefined,(function(){return p.delete(n)}));g.add(i.innerFrom(r(m)).subscribe(y))}}o.next(d?d(t):t)}catch(e){handleError(e)}}),(function(){return notify((function(e){return e.complete()}))}),handleError,(function(){return p.clear()}),(function(){y=true;return m===0}));o.subscribe(g);function createGroupedObservable(e,t){var r=new n.Observable((function(e){m++;var r=t.subscribe(e);return function(){r.unsubscribe();--m===0&&y&&g.unsubscribe()}}));r.key=e;return r}}))}t.groupBy=groupBy},59816:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ignoreElements=void 0;var n=r(74135);var i=r(40822);var s=r(95573);function ignoreElements(){return n.operate((function(e,t){e.subscribe(i.createOperatorSubscriber(t,s.noop))}))}t.ignoreElements=ignoreElements},95173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isEmpty=void 0;var n=r(74135);var i=r(40822);function isEmpty(){return n.operate((function(e,t){e.subscribe(i.createOperatorSubscriber(t,(function(){t.next(false);t.complete()}),(function(){t.next(true);t.complete()})))}))}t.isEmpty=isEmpty},86455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.joinAllInternals=void 0;var n=r(31393);var i=r(58890);var s=r(84056);var o=r(34960);var a=r(94966);function joinAllInternals(e,t){return s.pipe(a.toArray(),o.mergeMap((function(t){return e(t)})),t?i.mapOneOrManyArgs(t):n.identity)}t.joinAllInternals=joinAllInternals},73588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.last=void 0;var n=r(52219);var i=r(47778);var s=r(17615);var o=r(38054);var a=r(17558);var c=r(31393);function last(e,t){var r=arguments.length>=2;return function(u){return u.pipe(e?i.filter((function(t,r){return e(t,r,u)})):c.identity,s.takeLast(1),r?a.defaultIfEmpty(t):o.throwIfEmpty((function(){return new n.EmptyError})))}}t.last=last},30784:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.map=void 0;var n=r(74135);var i=r(40822);function map(e,t){return n.operate((function(r,n){var s=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){n.next(e.call(t,r,s++))})))}))}t.map=map},8517:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapTo=void 0;var n=r(30784);function mapTo(e){return n.map((function(){return e}))}t.mapTo=mapTo},42251:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.materialize=void 0;var n=r(68687);var i=r(74135);var s=r(40822);function materialize(){return i.operate((function(e,t){e.subscribe(s.createOperatorSubscriber(t,(function(e){t.next(n.Notification.createNext(e))}),(function(){t.next(n.Notification.createComplete());t.complete()}),(function(e){t.next(n.Notification.createError(e));t.complete()})))}))}t.materialize=materialize},5750:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.max=void 0;var n=r(35951);var i=r(18969);function max(e){return n.reduce(i.isFunction(e)?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t})}t.max=max},69433:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.merge=void 0;var s=r(74135);var o=r(13189);var a=r(12130);var c=r(38829);var u=r(97095);function merge(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=c.popScheduler(e);var d=c.popNumber(e,Infinity);e=o.argsOrArgArray(e);return s.operate((function(t,s){a.mergeAll(d)(u.from(i([t],n(e)),r)).subscribe(s)}))}t.merge=merge},12130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeAll=void 0;var n=r(34960);var i=r(31393);function mergeAll(e){if(e===void 0){e=Infinity}return n.mergeMap(i.identity,e)}t.mergeAll=mergeAll},14795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeInternals=void 0;var n=r(87422);var i=r(86731);var s=r(40822);function mergeInternals(e,t,r,o,a,c,u,d){var p=[];var m=0;var y=0;var g=false;var checkComplete=function(){if(g&&!p.length&&!m){t.complete()}};var outerNext=function(e){return m<o?doInnerSub(e):p.push(e)};var doInnerSub=function(e){c&&t.next(e);m++;var d=false;n.innerFrom(r(e,y++)).subscribe(s.createOperatorSubscriber(t,(function(e){a===null||a===void 0?void 0:a(e);if(c){outerNext(e)}else{t.next(e)}}),(function(){d=true}),undefined,(function(){if(d){try{m--;var _loop_1=function(){var e=p.shift();if(u){i.executeSchedule(t,u,(function(){return doInnerSub(e)}))}else{doInnerSub(e)}};while(p.length&&m<o){_loop_1()}checkComplete()}catch(e){t.error(e)}}})))};e.subscribe(s.createOperatorSubscriber(t,outerNext,(function(){g=true;checkComplete()})));return function(){d===null||d===void 0?void 0:d()}}t.mergeInternals=mergeInternals},34960:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeMap=void 0;var n=r(30784);var i=r(87422);var s=r(74135);var o=r(14795);var a=r(18969);function mergeMap(e,t,r){if(r===void 0){r=Infinity}if(a.isFunction(t)){return mergeMap((function(r,s){return n.map((function(e,n){return t(r,e,s,n)}))(i.innerFrom(e(r,s)))}),r)}else if(typeof t==="number"){r=t}return s.operate((function(t,n){return o.mergeInternals(t,n,e,r)}))}t.mergeMap=mergeMap},17180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeMapTo=void 0;var n=r(34960);var i=r(18969);function mergeMapTo(e,t,r){if(r===void 0){r=Infinity}if(i.isFunction(t)){return n.mergeMap((function(){return e}),t,r)}if(typeof t==="number"){r=t}return n.mergeMap((function(){return e}),r)}t.mergeMapTo=mergeMapTo},33608:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeScan=void 0;var n=r(74135);var i=r(14795);function mergeScan(e,t,r){if(r===void 0){r=Infinity}return n.operate((function(n,s){var o=t;return i.mergeInternals(n,s,(function(t,r){return e(o,t,r)}),r,(function(e){o=e}),false,undefined,(function(){return o=null}))}))}t.mergeScan=mergeScan},21209:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.mergeWith=void 0;var s=r(69433);function mergeWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return s.merge.apply(void 0,i([],n(e)))}t.mergeWith=mergeWith},64569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.min=void 0;var n=r(35951);var i=r(18969);function min(e){return n.reduce(i.isFunction(e)?function(t,r){return e(t,r)<0?t:r}:function(e,t){return e<t?e:t})}t.min=min},93185:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.multicast=void 0;var n=r(41312);var i=r(18969);var s=r(68699);function multicast(e,t){var r=i.isFunction(e)?e:function(){return e};if(i.isFunction(t)){return s.connect(t,{connector:r})}return function(e){return new n.ConnectableObservable(e,r)}}t.multicast=multicast},90002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.observeOn=void 0;var n=r(86731);var i=r(74135);var s=r(40822);function observeOn(e,t){if(t===void 0){t=0}return i.operate((function(r,i){r.subscribe(s.createOperatorSubscriber(i,(function(r){return n.executeSchedule(i,e,(function(){return i.next(r)}),t)}),(function(){return n.executeSchedule(i,e,(function(){return i.complete()}),t)}),(function(r){return n.executeSchedule(i,e,(function(){return i.error(r)}),t)})))}))}t.observeOn=observeOn},40542:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.onErrorResumeNext=t.onErrorResumeNextWith=void 0;var s=r(13189);var o=r(79997);function onErrorResumeNextWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=s.argsOrArgArray(e);return function(e){return o.onErrorResumeNext.apply(void 0,i([e],n(r)))}}t.onErrorResumeNextWith=onErrorResumeNextWith;t.onErrorResumeNext=onErrorResumeNextWith},25574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.pairwise=void 0;var n=r(74135);var i=r(40822);function pairwise(){return n.operate((function(e,t){var r;var n=false;e.subscribe(i.createOperatorSubscriber(t,(function(e){var i=r;r=e;n&&t.next([i,e]);n=true})))}))}t.pairwise=pairwise},76063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.partition=void 0;var n=r(86291);var i=r(47778);function partition(e,t){return function(r){return[i.filter(e,t)(r),i.filter(n.not(e,t))(r)]}}t.partition=partition},15522:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.pluck=void 0;var n=r(30784);function pluck(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=e.length;if(r===0){throw new Error("list of properties cannot be empty.")}return n.map((function(t){var n=t;for(var i=0;i<r;i++){var s=n===null||n===void 0?void 0:n[e[i]];if(typeof s!=="undefined"){n=s}else{return undefined}}return n}))}t.pluck=pluck},69263:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.publish=void 0;var n=r(6755);var i=r(93185);var s=r(68699);function publish(e){return e?function(t){return s.connect(e)(t)}:function(e){return i.multicast(new n.Subject)(e)}}t.publish=publish},25424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.publishBehavior=void 0;var n=r(68872);var i=r(41312);function publishBehavior(e){return function(t){var r=new n.BehaviorSubject(e);return new i.ConnectableObservable(t,(function(){return r}))}}t.publishBehavior=publishBehavior},31679:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.publishLast=void 0;var n=r(58042);var i=r(41312);function publishLast(){return function(e){var t=new n.AsyncSubject;return new i.ConnectableObservable(e,(function(){return t}))}}t.publishLast=publishLast},10509:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.publishReplay=void 0;var n=r(79886);var i=r(93185);var s=r(18969);function publishReplay(e,t,r,o){if(r&&!s.isFunction(r)){o=r}var a=s.isFunction(r)?r:undefined;return function(r){return i.multicast(new n.ReplaySubject(e,t,o),a)(r)}}t.publishReplay=publishReplay},86186:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.race=void 0;var s=r(13189);var o=r(46194);function race(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return o.raceWith.apply(void 0,i([],n(s.argsOrArgArray(e))))}t.race=race},46194:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.raceWith=void 0;var s=r(16882);var o=r(74135);var a=r(31393);function raceWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return!e.length?a.identity:o.operate((function(t,r){s.raceInit(i([t],n(e)))(r)}))}t.raceWith=raceWith},35951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.reduce=void 0;var n=r(34850);var i=r(74135);function reduce(e,t){return i.operate(n.scanInternals(e,t,arguments.length>=2,false,true))}t.reduce=reduce},39543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.refCount=void 0;var n=r(74135);var i=r(40822);function refCount(){return n.operate((function(e,t){var r=null;e._refCount++;var n=i.createOperatorSubscriber(t,undefined,undefined,undefined,(function(){if(!e||e._refCount<=0||0<--e._refCount){r=null;return}var n=e._connection;var i=r;r=null;if(n&&(!i||n===i)){n.unsubscribe()}t.unsubscribe()}));e.subscribe(n);if(!n.closed){r=e.connect()}}))}t.refCount=refCount},20109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.repeat=void 0;var n=r(88008);var i=r(74135);var s=r(40822);var o=r(87422);var a=r(53129);function repeat(e){var t;var r=Infinity;var c;if(e!=null){if(typeof e==="object"){t=e.count,r=t===void 0?Infinity:t,c=e.delay}else{r=e}}return r<=0?function(){return n.EMPTY}:i.operate((function(e,t){var n=0;var i;var resubscribe=function(){i===null||i===void 0?void 0:i.unsubscribe();i=null;if(c!=null){var e=typeof c==="number"?a.timer(c):o.innerFrom(c(n));var r=s.createOperatorSubscriber(t,(function(){r.unsubscribe();subscribeToSource()}));e.subscribe(r)}else{subscribeToSource()}};var subscribeToSource=function(){var o=false;i=e.subscribe(s.createOperatorSubscriber(t,undefined,(function(){if(++n<r){if(i){resubscribe()}else{o=true}}else{t.complete()}})));if(o){resubscribe()}};subscribeToSource()}))}t.repeat=repeat},6426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.repeatWhen=void 0;var n=r(87422);var i=r(6755);var s=r(74135);var o=r(40822);function repeatWhen(e){return s.operate((function(t,r){var s;var a=false;var c;var u=false;var d=false;var checkComplete=function(){return d&&u&&(r.complete(),true)};var getCompletionSubject=function(){if(!c){c=new i.Subject;n.innerFrom(e(c)).subscribe(o.createOperatorSubscriber(r,(function(){if(s){subscribeForRepeatWhen()}else{a=true}}),(function(){u=true;checkComplete()})))}return c};var subscribeForRepeatWhen=function(){d=false;s=t.subscribe(o.createOperatorSubscriber(r,undefined,(function(){d=true;!checkComplete()&&getCompletionSubject().next()})));if(a){s.unsubscribe();s=null;a=false;subscribeForRepeatWhen()}};subscribeForRepeatWhen()}))}t.repeatWhen=repeatWhen},86479:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.retry=void 0;var n=r(74135);var i=r(40822);var s=r(31393);var o=r(53129);var a=r(87422);function retry(e){if(e===void 0){e=Infinity}var t;if(e&&typeof e==="object"){t=e}else{t={count:e}}var r=t.count,c=r===void 0?Infinity:r,u=t.delay,d=t.resetOnSuccess,p=d===void 0?false:d;return c<=0?s.identity:n.operate((function(e,t){var r=0;var n;var subscribeForRetry=function(){var s=false;n=e.subscribe(i.createOperatorSubscriber(t,(function(e){if(p){r=0}t.next(e)}),undefined,(function(e){if(r++<c){var resub_1=function(){if(n){n.unsubscribe();n=null;subscribeForRetry()}else{s=true}};if(u!=null){var d=typeof u==="number"?o.timer(u):a.innerFrom(u(e,r));var p=i.createOperatorSubscriber(t,(function(){p.unsubscribe();resub_1()}),(function(){t.complete()}));d.subscribe(p)}else{resub_1()}}else{t.error(e)}})));if(s){n.unsubscribe();n=null;subscribeForRetry()}};subscribeForRetry()}))}t.retry=retry},99299:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.retryWhen=void 0;var n=r(87422);var i=r(6755);var s=r(74135);var o=r(40822);function retryWhen(e){return s.operate((function(t,r){var s;var a=false;var c;var subscribeForRetryWhen=function(){s=t.subscribe(o.createOperatorSubscriber(r,undefined,undefined,(function(t){if(!c){c=new i.Subject;n.innerFrom(e(c)).subscribe(o.createOperatorSubscriber(r,(function(){return s?subscribeForRetryWhen():a=true})))}if(c){c.next(t)}})));if(a){s.unsubscribe();s=null;a=false;subscribeForRetryWhen()}};subscribeForRetryWhen()}))}t.retryWhen=retryWhen},36681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sample=void 0;var n=r(87422);var i=r(74135);var s=r(95573);var o=r(40822);function sample(e){return i.operate((function(t,r){var i=false;var a=null;t.subscribe(o.createOperatorSubscriber(r,(function(e){i=true;a=e})));n.innerFrom(e).subscribe(o.createOperatorSubscriber(r,(function(){if(i){i=false;var e=a;a=null;r.next(e)}}),s.noop))}))}t.sample=sample},5546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sampleTime=void 0;var n=r(7362);var i=r(36681);var s=r(93610);function sampleTime(e,t){if(t===void 0){t=n.asyncScheduler}return i.sample(s.interval(e,t))}t.sampleTime=sampleTime},25110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scan=void 0;var n=r(74135);var i=r(34850);function scan(e,t){return n.operate(i.scanInternals(e,t,arguments.length>=2,true))}t.scan=scan},34850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scanInternals=void 0;var n=r(40822);function scanInternals(e,t,r,i,s){return function(o,a){var c=r;var u=t;var d=0;o.subscribe(n.createOperatorSubscriber(a,(function(t){var r=d++;u=c?e(u,t,r):(c=true,t);i&&a.next(u)}),s&&function(){c&&a.next(u);a.complete()}))}}t.scanInternals=scanInternals},94086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sequenceEqual=void 0;var n=r(74135);var i=r(40822);var s=r(87422);function sequenceEqual(e,t){if(t===void 0){t=function(e,t){return e===t}}return n.operate((function(r,n){var o=createState();var a=createState();var emit=function(e){n.next(e);n.complete()};var createSubscriber=function(e,r){var s=i.createOperatorSubscriber(n,(function(n){var i=r.buffer,s=r.complete;if(i.length===0){s?emit(false):e.buffer.push(n)}else{!t(n,i.shift())&&emit(false)}}),(function(){e.complete=true;var t=r.complete,n=r.buffer;t&&emit(n.length===0);s===null||s===void 0?void 0:s.unsubscribe()}));return s};r.subscribe(createSubscriber(o,a));s.innerFrom(e).subscribe(createSubscriber(a,o))}))}t.sequenceEqual=sequenceEqual;function createState(){return{buffer:[],complete:false}}},91686:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.share=void 0;var s=r(87422);var o=r(6755);var a=r(82761);var c=r(74135);function share(e){if(e===void 0){e={}}var t=e.connector,r=t===void 0?function(){return new o.Subject}:t,n=e.resetOnError,i=n===void 0?true:n,u=e.resetOnComplete,d=u===void 0?true:u,p=e.resetOnRefCountZero,m=p===void 0?true:p;return function(e){var t;var n;var o;var u=0;var p=false;var y=false;var cancelReset=function(){n===null||n===void 0?void 0:n.unsubscribe();n=undefined};var reset=function(){cancelReset();t=o=undefined;p=y=false};var resetAndUnsubscribe=function(){var e=t;reset();e===null||e===void 0?void 0:e.unsubscribe()};return c.operate((function(e,c){u++;if(!y&&!p){cancelReset()}var g=o=o!==null&&o!==void 0?o:r();c.add((function(){u--;if(u===0&&!y&&!p){n=handleReset(resetAndUnsubscribe,m)}}));g.subscribe(c);if(!t&&u>0){t=new a.SafeSubscriber({next:function(e){return g.next(e)},error:function(e){y=true;cancelReset();n=handleReset(reset,i,e);g.error(e)},complete:function(){p=true;cancelReset();n=handleReset(reset,d);g.complete()}});s.innerFrom(e).subscribe(t)}}))(e)}}t.share=share;function handleReset(e,t){var r=[];for(var o=2;o<arguments.length;o++){r[o-2]=arguments[o]}if(t===true){e();return}if(t===false){return}var c=new a.SafeSubscriber({next:function(){c.unsubscribe();e()}});return s.innerFrom(t.apply(void 0,i([],n(r)))).subscribe(c)}},37934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.shareReplay=void 0;var n=r(79886);var i=r(91686);function shareReplay(e,t,r){var s,o,a;var c;var u=false;if(e&&typeof e==="object"){s=e.bufferSize,c=s===void 0?Infinity:s,o=e.windowTime,t=o===void 0?Infinity:o,a=e.refCount,u=a===void 0?false:a,r=e.scheduler}else{c=e!==null&&e!==void 0?e:Infinity}return i.share({connector:function(){return new n.ReplaySubject(c,t,r)},resetOnError:true,resetOnComplete:false,resetOnRefCountZero:u})}t.shareReplay=shareReplay},96611:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.single=void 0;var n=r(52219);var i=r(74856);var s=r(70604);var o=r(74135);var a=r(40822);function single(e){return o.operate((function(t,r){var o=false;var c;var u=false;var d=0;t.subscribe(a.createOperatorSubscriber(r,(function(n){u=true;if(!e||e(n,d++,t)){o&&r.error(new i.SequenceError("Too many matching values"));o=true;c=n}}),(function(){if(o){r.next(c);r.complete()}else{r.error(u?new s.NotFoundError("No matching values"):new n.EmptyError)}})))}))}t.single=single},34719:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.skip=void 0;var n=r(47778);function skip(e){return n.filter((function(t,r){return e<=r}))}t.skip=skip},12967:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.skipLast=void 0;var n=r(31393);var i=r(74135);var s=r(40822);function skipLast(e){return e<=0?n.identity:i.operate((function(t,r){var n=new Array(e);var i=0;t.subscribe(s.createOperatorSubscriber(r,(function(t){var s=i++;if(s<e){n[s]=t}else{var o=s%e;var a=n[o];n[o]=t;r.next(a)}})));return function(){n=null}}))}t.skipLast=skipLast},77924:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.skipUntil=void 0;var n=r(74135);var i=r(40822);var s=r(87422);var o=r(95573);function skipUntil(e){return n.operate((function(t,r){var n=false;var a=i.createOperatorSubscriber(r,(function(){a===null||a===void 0?void 0:a.unsubscribe();n=true}),o.noop);s.innerFrom(e).subscribe(a);t.subscribe(i.createOperatorSubscriber(r,(function(e){return n&&r.next(e)})))}))}t.skipUntil=skipUntil},84978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.skipWhile=void 0;var n=r(74135);var i=r(40822);function skipWhile(e){return n.operate((function(t,r){var n=false;var s=0;t.subscribe(i.createOperatorSubscriber(r,(function(t){return(n||(n=!e(t,s++)))&&r.next(t)})))}))}t.skipWhile=skipWhile},45013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.startWith=void 0;var n=r(61132);var i=r(38829);var s=r(74135);function startWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=i.popScheduler(e);return s.operate((function(t,i){(r?n.concat(e,t,r):n.concat(e,t)).subscribe(i)}))}t.startWith=startWith},42972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.subscribeOn=void 0;var n=r(74135);function subscribeOn(e,t){if(t===void 0){t=0}return n.operate((function(r,n){n.add(e.schedule((function(){return r.subscribe(n)}),t))}))}t.subscribeOn=subscribeOn},13969:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.switchAll=void 0;var n=r(74723);var i=r(31393);function switchAll(){return n.switchMap(i.identity)}t.switchAll=switchAll},74723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.switchMap=void 0;var n=r(87422);var i=r(74135);var s=r(40822);function switchMap(e,t){return i.operate((function(r,i){var o=null;var a=0;var c=false;var checkComplete=function(){return c&&!o&&i.complete()};r.subscribe(s.createOperatorSubscriber(i,(function(r){o===null||o===void 0?void 0:o.unsubscribe();var c=0;var u=a++;n.innerFrom(e(r,u)).subscribe(o=s.createOperatorSubscriber(i,(function(e){return i.next(t?t(r,e,u,c++):e)}),(function(){o=null;checkComplete()})))}),(function(){c=true;checkComplete()})))}))}t.switchMap=switchMap},59788:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.switchMapTo=void 0;var n=r(74723);var i=r(18969);function switchMapTo(e,t){return i.isFunction(t)?n.switchMap((function(){return e}),t):n.switchMap((function(){return e}))}t.switchMapTo=switchMapTo},94088:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.switchScan=void 0;var n=r(74723);var i=r(74135);function switchScan(e,t){return i.operate((function(r,i){var s=t;n.switchMap((function(t,r){return e(s,t,r)}),(function(e,t){return s=t,t}))(r).subscribe(i);return function(){s=null}}))}t.switchScan=switchScan},10476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.take=void 0;var n=r(88008);var i=r(74135);var s=r(40822);function take(e){return e<=0?function(){return n.EMPTY}:i.operate((function(t,r){var n=0;t.subscribe(s.createOperatorSubscriber(r,(function(t){if(++n<=e){r.next(t);if(e<=n){r.complete()}}})))}))}t.take=take},17615:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.takeLast=void 0;var i=r(88008);var s=r(74135);var o=r(40822);function takeLast(e){return e<=0?function(){return i.EMPTY}:s.operate((function(t,r){var i=[];t.subscribe(o.createOperatorSubscriber(r,(function(t){i.push(t);e<i.length&&i.shift()}),(function(){var e,t;try{for(var s=n(i),o=s.next();!o.done;o=s.next()){var a=o.value;r.next(a)}}catch(t){e={error:t}}finally{try{if(o&&!o.done&&(t=s.return))t.call(s)}finally{if(e)throw e.error}}r.complete()}),undefined,(function(){i=null})))}))}t.takeLast=takeLast},7385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.takeUntil=void 0;var n=r(74135);var i=r(40822);var s=r(87422);var o=r(95573);function takeUntil(e){return n.operate((function(t,r){s.innerFrom(e).subscribe(i.createOperatorSubscriber(r,(function(){return r.complete()}),o.noop));!r.closed&&t.subscribe(r)}))}t.takeUntil=takeUntil},85245:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.takeWhile=void 0;var n=r(74135);var i=r(40822);function takeWhile(e,t){if(t===void 0){t=false}return n.operate((function(r,n){var s=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){var i=e(r,s++);(i||t)&&n.next(r);!i&&n.complete()})))}))}t.takeWhile=takeWhile},29874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tap=void 0;var n=r(18969);var i=r(74135);var s=r(40822);var o=r(31393);function tap(e,t,r){var a=n.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return a?i.operate((function(e,t){var r;(r=a.subscribe)===null||r===void 0?void 0:r.call(a);var n=true;e.subscribe(s.createOperatorSubscriber(t,(function(e){var r;(r=a.next)===null||r===void 0?void 0:r.call(a,e);t.next(e)}),(function(){var e;n=false;(e=a.complete)===null||e===void 0?void 0:e.call(a);t.complete()}),(function(e){var r;n=false;(r=a.error)===null||r===void 0?void 0:r.call(a,e);t.error(e)}),(function(){var e,t;if(n){(e=a.unsubscribe)===null||e===void 0?void 0:e.call(a)}(t=a.finalize)===null||t===void 0?void 0:t.call(a)})))})):o.identity}t.tap=tap},38466:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throttle=void 0;var n=r(74135);var i=r(40822);var s=r(87422);function throttle(e,t){return n.operate((function(r,n){var o=t!==null&&t!==void 0?t:{},a=o.leading,c=a===void 0?true:a,u=o.trailing,d=u===void 0?false:u;var p=false;var m=null;var y=null;var g=false;var endThrottling=function(){y===null||y===void 0?void 0:y.unsubscribe();y=null;if(d){send();g&&n.complete()}};var cleanupThrottling=function(){y=null;g&&n.complete()};var startThrottle=function(t){return y=s.innerFrom(e(t)).subscribe(i.createOperatorSubscriber(n,endThrottling,cleanupThrottling))};var send=function(){if(p){p=false;var e=m;m=null;n.next(e);!g&&startThrottle(e)}};r.subscribe(i.createOperatorSubscriber(n,(function(e){p=true;m=e;!(y&&!y.closed)&&(c?send():startThrottle(e))}),(function(){g=true;!(d&&p&&y&&!y.closed)&&n.complete()})))}))}t.throttle=throttle},96937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throttleTime=void 0;var n=r(7362);var i=r(38466);var s=r(53129);function throttleTime(e,t,r){if(t===void 0){t=n.asyncScheduler}var o=s.timer(e,t);return i.throttle((function(){return o}),r)}t.throttleTime=throttleTime},38054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throwIfEmpty=void 0;var n=r(52219);var i=r(74135);var s=r(40822);function throwIfEmpty(e){if(e===void 0){e=defaultErrorFactory}return i.operate((function(t,r){var n=false;t.subscribe(s.createOperatorSubscriber(r,(function(e){n=true;r.next(e)}),(function(){return n?r.complete():r.error(e())})))}))}t.throwIfEmpty=throwIfEmpty;function defaultErrorFactory(){return new n.EmptyError}},40808:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeInterval=t.timeInterval=void 0;var n=r(7362);var i=r(74135);var s=r(40822);function timeInterval(e){if(e===void 0){e=n.asyncScheduler}return i.operate((function(t,r){var n=e.now();t.subscribe(s.createOperatorSubscriber(r,(function(t){var i=e.now();var s=i-n;n=i;r.next(new o(t,s))})))}))}t.timeInterval=timeInterval;var o=function(){function TimeInterval(e,t){this.value=e;this.interval=t}return TimeInterval}();t.TimeInterval=o},85192:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.timeout=t.TimeoutError=void 0;var n=r(7362);var i=r(61611);var s=r(74135);var o=r(87422);var a=r(78726);var c=r(40822);var u=r(86731);t.TimeoutError=a.createErrorClass((function(e){return function TimeoutErrorImpl(t){if(t===void 0){t=null}e(this);this.message="Timeout has occurred";this.name="TimeoutError";this.info=t}}));function timeout(e,t){var r=i.isValidDate(e)?{first:e}:typeof e==="number"?{each:e}:e,a=r.first,d=r.each,p=r.with,m=p===void 0?timeoutErrorFactory:p,y=r.scheduler,g=y===void 0?t!==null&&t!==void 0?t:n.asyncScheduler:y,b=r.meta,v=b===void 0?null:b;if(a==null&&d==null){throw new TypeError("No timeout provided.")}return s.operate((function(e,t){var r;var n;var i=null;var s=0;var startTimer=function(e){n=u.executeSchedule(t,g,(function(){try{r.unsubscribe();o.innerFrom(m({meta:v,lastValue:i,seen:s})).subscribe(t)}catch(e){t.error(e)}}),e)};r=e.subscribe(c.createOperatorSubscriber(t,(function(e){n===null||n===void 0?void 0:n.unsubscribe();s++;t.next(i=e);d>0&&startTimer(d)}),undefined,undefined,(function(){if(!(n===null||n===void 0?void 0:n.closed)){n===null||n===void 0?void 0:n.unsubscribe()}i=null})));!s&&startTimer(a!=null?typeof a==="number"?a:+a-g.now():d)}))}t.timeout=timeout;function timeoutErrorFactory(e){throw new t.TimeoutError(e)}},13313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.timeoutWith=void 0;var n=r(7362);var i=r(61611);var s=r(85192);function timeoutWith(e,t,r){var o;var a;var c;r=r!==null&&r!==void 0?r:n.async;if(i.isValidDate(e)){o=e}else if(typeof e==="number"){a=e}if(t){c=function(){return t}}else{throw new TypeError("No observable provided to switch to")}if(o==null&&a==null){throw new TypeError("No timeout provided.")}return s.timeout({first:o,each:a,scheduler:r,with:c})}t.timeoutWith=timeoutWith},13625:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.timestamp=void 0;var n=r(97480);var i=r(30784);function timestamp(e){if(e===void 0){e=n.dateTimestampProvider}return i.map((function(t){return{value:t,timestamp:e.now()}}))}t.timestamp=timestamp},94966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toArray=void 0;var n=r(35951);var i=r(74135);var arrReducer=function(e,t){return e.push(t),e};function toArray(){return i.operate((function(e,t){n.reduce(arrReducer,[])(e).subscribe(t)}))}t.toArray=toArray},20460:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.window=void 0;var n=r(6755);var i=r(74135);var s=r(40822);var o=r(95573);var a=r(87422);function window(e){return i.operate((function(t,r){var i=new n.Subject;r.next(i.asObservable());var errorHandler=function(e){i.error(e);r.error(e)};t.subscribe(s.createOperatorSubscriber(r,(function(e){return i===null||i===void 0?void 0:i.next(e)}),(function(){i.complete();r.complete()}),errorHandler));a.innerFrom(e).subscribe(s.createOperatorSubscriber(r,(function(){i.complete();r.next(i=new n.Subject)}),o.noop,errorHandler));return function(){i===null||i===void 0?void 0:i.unsubscribe();i=null}}))}t.window=window},82054:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.windowCount=void 0;var i=r(6755);var s=r(74135);var o=r(40822);function windowCount(e,t){if(t===void 0){t=0}var r=t>0?t:e;return s.operate((function(t,s){var a=[new i.Subject];var c=[];var u=0;s.next(a[0].asObservable());t.subscribe(o.createOperatorSubscriber(s,(function(t){var o,c;try{for(var d=n(a),p=d.next();!p.done;p=d.next()){var m=p.value;m.next(t)}}catch(e){o={error:e}}finally{try{if(p&&!p.done&&(c=d.return))c.call(d)}finally{if(o)throw o.error}}var y=u-e+1;if(y>=0&&y%r===0){a.shift().complete()}if(++u%r===0){var g=new i.Subject;a.push(g);s.next(g.asObservable())}}),(function(){while(a.length>0){a.shift().complete()}s.complete()}),(function(e){while(a.length>0){a.shift().error(e)}s.error(e)}),(function(){c=null;a=null})))}))}t.windowCount=windowCount},56068:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.windowTime=void 0;var n=r(6755);var i=r(7362);var s=r(20557);var o=r(74135);var a=r(40822);var c=r(14610);var u=r(38829);var d=r(86731);function windowTime(e){var t,r;var p=[];for(var m=1;m<arguments.length;m++){p[m-1]=arguments[m]}var y=(t=u.popScheduler(p))!==null&&t!==void 0?t:i.asyncScheduler;var g=(r=p[0])!==null&&r!==void 0?r:null;var b=p[1]||Infinity;return o.operate((function(t,r){var i=[];var o=false;var closeWindow=function(e){var t=e.window,r=e.subs;t.complete();r.unsubscribe();c.arrRemove(i,e);o&&startWindow()};var startWindow=function(){if(i){var t=new s.Subscription;r.add(t);var o=new n.Subject;var a={window:o,subs:t,seen:0};i.push(a);r.next(o.asObservable());d.executeSchedule(t,y,(function(){return closeWindow(a)}),e)}};if(g!==null&&g>=0){d.executeSchedule(r,y,startWindow,g,true)}else{o=true}startWindow();var loop=function(e){return i.slice().forEach(e)};var terminate=function(e){loop((function(t){var r=t.window;return e(r)}));e(r);r.unsubscribe()};t.subscribe(a.createOperatorSubscriber(r,(function(e){loop((function(t){t.window.next(e);b<=++t.seen&&closeWindow(t)}))}),(function(){return terminate((function(e){return e.complete()}))}),(function(e){return terminate((function(t){return t.error(e)}))})));return function(){i=null}}))}t.windowTime=windowTime},13996:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.windowToggle=void 0;var i=r(6755);var s=r(20557);var o=r(74135);var a=r(87422);var c=r(40822);var u=r(95573);var d=r(14610);function windowToggle(e,t){return o.operate((function(r,o){var p=[];var handleError=function(e){while(0<p.length){p.shift().error(e)}o.error(e)};a.innerFrom(e).subscribe(c.createOperatorSubscriber(o,(function(e){var r=new i.Subject;p.push(r);var n=new s.Subscription;var closeWindow=function(){d.arrRemove(p,r);r.complete();n.unsubscribe()};var m;try{m=a.innerFrom(t(e))}catch(e){handleError(e);return}o.next(r.asObservable());n.add(m.subscribe(c.createOperatorSubscriber(o,closeWindow,u.noop,handleError)))}),u.noop));r.subscribe(c.createOperatorSubscriber(o,(function(e){var t,r;var i=p.slice();try{for(var s=n(i),o=s.next();!o.done;o=s.next()){var a=o.value;a.next(e)}}catch(e){t={error:e}}finally{try{if(o&&!o.done&&(r=s.return))r.call(s)}finally{if(t)throw t.error}}}),(function(){while(0<p.length){p.shift().complete()}o.complete()}),handleError,(function(){while(0<p.length){p.shift().unsubscribe()}})))}))}t.windowToggle=windowToggle},13343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.windowWhen=void 0;var n=r(6755);var i=r(74135);var s=r(40822);var o=r(87422);function windowWhen(e){return i.operate((function(t,r){var i;var a;var handleError=function(e){i.error(e);r.error(e)};var openWindow=function(){a===null||a===void 0?void 0:a.unsubscribe();i===null||i===void 0?void 0:i.complete();i=new n.Subject;r.next(i.asObservable());var t;try{t=o.innerFrom(e())}catch(e){handleError(e);return}t.subscribe(a=s.createOperatorSubscriber(r,openWindow,openWindow,handleError))};openWindow();t.subscribe(s.createOperatorSubscriber(r,(function(e){return i.next(e)}),(function(){i.complete();r.complete()}),handleError,(function(){a===null||a===void 0?void 0:a.unsubscribe();i=null})))}))}t.windowWhen=windowWhen},79755:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.withLatestFrom=void 0;var s=r(74135);var o=r(40822);var a=r(87422);var c=r(31393);var u=r(95573);var d=r(38829);function withLatestFrom(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=d.popResultSelector(e);return s.operate((function(t,s){var d=e.length;var p=new Array(d);var m=e.map((function(){return false}));var y=false;var _loop_1=function(t){a.innerFrom(e[t]).subscribe(o.createOperatorSubscriber(s,(function(e){p[t]=e;if(!y&&!m[t]){m[t]=true;(y=m.every(c.identity))&&(m=null)}}),u.noop))};for(var g=0;g<d;g++){_loop_1(g)}t.subscribe(o.createOperatorSubscriber(s,(function(e){if(y){var t=i([e],n(p));s.next(r?r.apply(void 0,i([],n(t))):t)}})))}))}t.withLatestFrom=withLatestFrom},11407:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.zip=void 0;var s=r(92308);var o=r(74135);function zip(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return o.operate((function(t,r){s.zip.apply(void 0,i([t],n(e))).subscribe(r)}))}t.zip=zip},97263:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.zipAll=void 0;var n=r(92308);var i=r(86455);function zipAll(e){return i.joinAllInternals(n.zip,e)}t.zipAll=zipAll},24219:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.zipWith=void 0;var s=r(11407);function zipWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return s.zip.apply(void 0,i([],n(e)))}t.zipWith=zipWith},25838:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleArray=void 0;var n=r(45480);function scheduleArray(e,t){return new n.Observable((function(r){var n=0;return t.schedule((function(){if(n===e.length){r.complete()}else{r.next(e[n++]);if(!r.closed){this.schedule()}}}))}))}t.scheduleArray=scheduleArray},46333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleAsyncIterable=void 0;var n=r(45480);var i=r(86731);function scheduleAsyncIterable(e,t){if(!e){throw new Error("Iterable cannot be null")}return new n.Observable((function(r){i.executeSchedule(r,t,(function(){var n=e[Symbol.asyncIterator]();i.executeSchedule(r,t,(function(){n.next().then((function(e){if(e.done){r.complete()}else{r.next(e.value)}}))}),0,true)}))}))}t.scheduleAsyncIterable=scheduleAsyncIterable},32596:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleIterable=void 0;var n=r(45480);var i=r(95907);var s=r(18969);var o=r(86731);function scheduleIterable(e,t){return new n.Observable((function(r){var n;o.executeSchedule(r,t,(function(){n=e[i.iterator]();o.executeSchedule(r,t,(function(){var e;var t;var i;try{e=n.next(),t=e.value,i=e.done}catch(e){r.error(e);return}if(i){r.complete()}else{r.next(t)}}),0,true)}));return function(){return s.isFunction(n===null||n===void 0?void 0:n.return)&&n.return()}}))}t.scheduleIterable=scheduleIterable},36205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleObservable=void 0;var n=r(87422);var i=r(90002);var s=r(42972);function scheduleObservable(e,t){return n.innerFrom(e).pipe(s.subscribeOn(t),i.observeOn(t))}t.scheduleObservable=scheduleObservable},66414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.schedulePromise=void 0;var n=r(87422);var i=r(90002);var s=r(42972);function schedulePromise(e,t){return n.innerFrom(e).pipe(s.subscribeOn(t),i.observeOn(t))}t.schedulePromise=schedulePromise},46204:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleReadableStreamLike=void 0;var n=r(46333);var i=r(86559);function scheduleReadableStreamLike(e,t){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(e),t)}t.scheduleReadableStreamLike=scheduleReadableStreamLike},36832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduled=void 0;var n=r(36205);var i=r(66414);var s=r(25838);var o=r(32596);var a=r(46333);var c=r(2834);var u=r(53646);var d=r(54781);var p=r(73220);var m=r(92783);var y=r(23165);var g=r(86559);var b=r(46204);function scheduled(e,t){if(e!=null){if(c.isInteropObservable(e)){return n.scheduleObservable(e,t)}if(d.isArrayLike(e)){return s.scheduleArray(e,t)}if(u.isPromise(e)){return i.schedulePromise(e,t)}if(m.isAsyncIterable(e)){return a.scheduleAsyncIterable(e,t)}if(p.isIterable(e)){return o.scheduleIterable(e,t)}if(g.isReadableStreamLike(e)){return b.scheduleReadableStreamLike(e,t)}}throw y.createInvalidObservableTypeError(e)}t.scheduled=scheduled},66689:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.Action=void 0;var i=r(20557);var s=function(e){n(Action,e);function Action(t,r){return e.call(this)||this}Action.prototype.schedule=function(e,t){if(t===void 0){t=0}return this};return Action}(i.Subscription);t.Action=s},54275:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AnimationFrameAction=void 0;var i=r(81426);var s=r(10622);var o=function(e){n(AnimationFrameAction,e);function AnimationFrameAction(t,r){var n=e.call(this,t,r)||this;n.scheduler=t;n.work=r;return n}AnimationFrameAction.prototype.requestAsyncId=function(t,r,n){if(n===void 0){n=0}if(n!==null&&n>0){return e.prototype.requestAsyncId.call(this,t,r,n)}t.actions.push(this);return t._scheduled||(t._scheduled=s.animationFrameProvider.requestAnimationFrame((function(){return t.flush(undefined)})))};AnimationFrameAction.prototype.recycleAsyncId=function(t,r,n){var i;if(n===void 0){n=0}if(n!=null?n>0:this.delay>0){return e.prototype.recycleAsyncId.call(this,t,r,n)}var o=t.actions;if(r!=null&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==r){s.animationFrameProvider.cancelAnimationFrame(r);t._scheduled=undefined}return undefined};return AnimationFrameAction}(i.AsyncAction);t.AnimationFrameAction=o},87430:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AnimationFrameScheduler=void 0;var i=r(7782);var s=function(e){n(AnimationFrameScheduler,e);function AnimationFrameScheduler(){return e!==null&&e.apply(this,arguments)||this}AnimationFrameScheduler.prototype.flush=function(e){this._active=true;var t=this._scheduled;this._scheduled=undefined;var r=this.actions;var n;e=e||r.shift();do{if(n=e.execute(e.state,e.delay)){break}}while((e=r[0])&&e.id===t&&r.shift());this._active=false;if(n){while((e=r[0])&&e.id===t&&r.shift()){e.unsubscribe()}throw n}};return AnimationFrameScheduler}(i.AsyncScheduler);t.AnimationFrameScheduler=s},30981:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsapAction=void 0;var i=r(81426);var s=r(95133);var o=function(e){n(AsapAction,e);function AsapAction(t,r){var n=e.call(this,t,r)||this;n.scheduler=t;n.work=r;return n}AsapAction.prototype.requestAsyncId=function(t,r,n){if(n===void 0){n=0}if(n!==null&&n>0){return e.prototype.requestAsyncId.call(this,t,r,n)}t.actions.push(this);return t._scheduled||(t._scheduled=s.immediateProvider.setImmediate(t.flush.bind(t,undefined)))};AsapAction.prototype.recycleAsyncId=function(t,r,n){var i;if(n===void 0){n=0}if(n!=null?n>0:this.delay>0){return e.prototype.recycleAsyncId.call(this,t,r,n)}var o=t.actions;if(r!=null&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==r){s.immediateProvider.clearImmediate(r);if(t._scheduled===r){t._scheduled=undefined}}return undefined};return AsapAction}(i.AsyncAction);t.AsapAction=o},32068:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsapScheduler=void 0;var i=r(7782);var s=function(e){n(AsapScheduler,e);function AsapScheduler(){return e!==null&&e.apply(this,arguments)||this}AsapScheduler.prototype.flush=function(e){this._active=true;var t=this._scheduled;this._scheduled=undefined;var r=this.actions;var n;e=e||r.shift();do{if(n=e.execute(e.state,e.delay)){break}}while((e=r[0])&&e.id===t&&r.shift());this._active=false;if(n){while((e=r[0])&&e.id===t&&r.shift()){e.unsubscribe()}throw n}};return AsapScheduler}(i.AsyncScheduler);t.AsapScheduler=s},81426:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsyncAction=void 0;var i=r(66689);var s=r(30499);var o=r(14610);var a=function(e){n(AsyncAction,e);function AsyncAction(t,r){var n=e.call(this,t,r)||this;n.scheduler=t;n.work=r;n.pending=false;return n}AsyncAction.prototype.schedule=function(e,t){var r;if(t===void 0){t=0}if(this.closed){return this}this.state=e;var n=this.id;var i=this.scheduler;if(n!=null){this.id=this.recycleAsyncId(i,n,t)}this.pending=true;this.delay=t;this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,t);return this};AsyncAction.prototype.requestAsyncId=function(e,t,r){if(r===void 0){r=0}return s.intervalProvider.setInterval(e.flush.bind(e,this),r)};AsyncAction.prototype.recycleAsyncId=function(e,t,r){if(r===void 0){r=0}if(r!=null&&this.delay===r&&this.pending===false){return t}if(t!=null){s.intervalProvider.clearInterval(t)}return undefined};AsyncAction.prototype.execute=function(e,t){if(this.closed){return new Error("executing a cancelled action")}this.pending=false;var r=this._execute(e,t);if(r){return r}else if(this.pending===false&&this.id!=null){this.id=this.recycleAsyncId(this.scheduler,this.id,null)}};AsyncAction.prototype._execute=function(e,t){var r=false;var n;try{this.work(e)}catch(e){r=true;n=e?e:new Error("Scheduled action threw falsy error")}if(r){this.unsubscribe();return n}};AsyncAction.prototype.unsubscribe=function(){if(!this.closed){var t=this,r=t.id,n=t.scheduler;var i=n.actions;this.work=this.state=this.scheduler=null;this.pending=false;o.arrRemove(i,this);if(r!=null){this.id=this.recycleAsyncId(n,r,null)}this.delay=null;e.prototype.unsubscribe.call(this)}};return AsyncAction}(i.Action);t.AsyncAction=a},7782:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsyncScheduler=void 0;var i=r(93892);var s=function(e){n(AsyncScheduler,e);function AsyncScheduler(t,r){if(r===void 0){r=i.Scheduler.now}var n=e.call(this,t,r)||this;n.actions=[];n._active=false;return n}AsyncScheduler.prototype.flush=function(e){var t=this.actions;if(this._active){t.push(e);return}var r;this._active=true;do{if(r=e.execute(e.state,e.delay)){break}}while(e=t.shift());this._active=false;if(r){while(e=t.shift()){e.unsubscribe()}throw r}};return AsyncScheduler}(i.Scheduler);t.AsyncScheduler=s},30003:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.QueueAction=void 0;var i=r(81426);var s=function(e){n(QueueAction,e);function QueueAction(t,r){var n=e.call(this,t,r)||this;n.scheduler=t;n.work=r;return n}QueueAction.prototype.schedule=function(t,r){if(r===void 0){r=0}if(r>0){return e.prototype.schedule.call(this,t,r)}this.delay=r;this.state=t;this.scheduler.flush(this);return this};QueueAction.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)};QueueAction.prototype.requestAsyncId=function(t,r,n){if(n===void 0){n=0}if(n!=null&&n>0||n==null&&this.delay>0){return e.prototype.requestAsyncId.call(this,t,r,n)}t.flush(this);return 0};return QueueAction}(i.AsyncAction);t.QueueAction=s},43104:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.QueueScheduler=void 0;var i=r(7782);var s=function(e){n(QueueScheduler,e);function QueueScheduler(){return e!==null&&e.apply(this,arguments)||this}return QueueScheduler}(i.AsyncScheduler);t.QueueScheduler=s},39769:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.VirtualAction=t.VirtualTimeScheduler=void 0;var i=r(81426);var s=r(20557);var o=r(7782);var a=function(e){n(VirtualTimeScheduler,e);function VirtualTimeScheduler(t,r){if(t===void 0){t=c}if(r===void 0){r=Infinity}var n=e.call(this,t,(function(){return n.frame}))||this;n.maxFrames=r;n.frame=0;n.index=-1;return n}VirtualTimeScheduler.prototype.flush=function(){var e=this,t=e.actions,r=e.maxFrames;var n;var i;while((i=t[0])&&i.delay<=r){t.shift();this.frame=i.delay;if(n=i.execute(i.state,i.delay)){break}}if(n){while(i=t.shift()){i.unsubscribe()}throw n}};VirtualTimeScheduler.frameTimeFactor=10;return VirtualTimeScheduler}(o.AsyncScheduler);t.VirtualTimeScheduler=a;var c=function(e){n(VirtualAction,e);function VirtualAction(t,r,n){if(n===void 0){n=t.index+=1}var i=e.call(this,t,r)||this;i.scheduler=t;i.work=r;i.index=n;i.active=true;i.index=t.index=n;return i}VirtualAction.prototype.schedule=function(t,r){if(r===void 0){r=0}if(Number.isFinite(r)){if(!this.id){return e.prototype.schedule.call(this,t,r)}this.active=false;var n=new VirtualAction(this.scheduler,this.work);this.add(n);return n.schedule(t,r)}else{return s.Subscription.EMPTY}};VirtualAction.prototype.requestAsyncId=function(e,t,r){if(r===void 0){r=0}this.delay=e.frame+r;var n=e.actions;n.push(this);n.sort(VirtualAction.sortActions);return 1};VirtualAction.prototype.recycleAsyncId=function(e,t,r){if(r===void 0){r=0}return undefined};VirtualAction.prototype._execute=function(t,r){if(this.active===true){return e.prototype._execute.call(this,t,r)}};VirtualAction.sortActions=function(e,t){if(e.delay===t.delay){if(e.index===t.index){return 0}else if(e.index>t.index){return 1}else{return-1}}else if(e.delay>t.delay){return 1}else{return-1}};return VirtualAction}(i.AsyncAction);t.VirtualAction=c},49372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.animationFrame=t.animationFrameScheduler=void 0;var n=r(54275);var i=r(87430);t.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction);t.animationFrame=t.animationFrameScheduler},10622:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.animationFrameProvider=void 0;var s=r(20557);t.animationFrameProvider={schedule:function(e){var r=requestAnimationFrame;var n=cancelAnimationFrame;var i=t.animationFrameProvider.delegate;if(i){r=i.requestAnimationFrame;n=i.cancelAnimationFrame}var o=r((function(t){n=undefined;e(t)}));return new s.Subscription((function(){return n===null||n===void 0?void 0:n(o)}))},requestAnimationFrame:function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var s=t.animationFrameProvider.delegate;return((s===null||s===void 0?void 0:s.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(e)))},cancelAnimationFrame:function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var s=t.animationFrameProvider.delegate;return((s===null||s===void 0?void 0:s.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(e)))},delegate:undefined}},83323:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.asap=t.asapScheduler=void 0;var n=r(30981);var i=r(32068);t.asapScheduler=new i.AsapScheduler(n.AsapAction);t.asap=t.asapScheduler},7362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.async=t.asyncScheduler=void 0;var n=r(81426);var i=r(7782);t.asyncScheduler=new i.AsyncScheduler(n.AsyncAction);t.async=t.asyncScheduler},97480:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.dateTimestampProvider=void 0;t.dateTimestampProvider={now:function(){return(t.dateTimestampProvider.delegate||Date).now()},delegate:undefined}},95133:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.immediateProvider=void 0;var s=r(7614);var o=s.Immediate.setImmediate,a=s.Immediate.clearImmediate;t.immediateProvider={setImmediate:function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var s=t.immediateProvider.delegate;return((s===null||s===void 0?void 0:s.setImmediate)||o).apply(void 0,i([],n(e)))},clearImmediate:function(e){var r=t.immediateProvider.delegate;return((r===null||r===void 0?void 0:r.clearImmediate)||a)(e)},delegate:undefined}},30499:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var n=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.intervalProvider=void 0;t.intervalProvider={setInterval:function(e,i){var s=[];for(var o=2;o<arguments.length;o++){s[o-2]=arguments[o]}var a=t.intervalProvider.delegate;if(a===null||a===void 0?void 0:a.setInterval){return a.setInterval.apply(a,n([e,i],r(s)))}return setInterval.apply(void 0,n([e,i],r(s)))},clearInterval:function(e){var r=t.intervalProvider.delegate;return((r===null||r===void 0?void 0:r.clearInterval)||clearInterval)(e)},delegate:undefined}},85163:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.performanceTimestampProvider=void 0;t.performanceTimestampProvider={now:function(){return(t.performanceTimestampProvider.delegate||performance).now()},delegate:undefined}},70150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.queue=t.queueScheduler=void 0;var n=r(30003);var i=r(43104);t.queueScheduler=new i.QueueScheduler(n.QueueAction);t.queue=t.queueScheduler},13774:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var n=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.timeoutProvider=void 0;t.timeoutProvider={setTimeout:function(e,i){var s=[];for(var o=2;o<arguments.length;o++){s[o-2]=arguments[o]}var a=t.timeoutProvider.delegate;if(a===null||a===void 0?void 0:a.setTimeout){return a.setTimeout.apply(a,n([e,i],r(s)))}return setTimeout.apply(void 0,n([e,i],r(s)))},clearTimeout:function(e){var r=t.timeoutProvider.delegate;return((r===null||r===void 0?void 0:r.clearTimeout)||clearTimeout)(e)},delegate:undefined}},95907:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.iterator=t.getSymbolIterator=void 0;function getSymbolIterator(){if(typeof Symbol!=="function"||!Symbol.iterator){return"@@iterator"}return Symbol.iterator}t.getSymbolIterator=getSymbolIterator;t.iterator=getSymbolIterator()},48618:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.observable=void 0;t.observable=function(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}()},6539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},40314:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ArgumentOutOfRangeError=void 0;var n=r(78726);t.ArgumentOutOfRangeError=n.createErrorClass((function(e){return function ArgumentOutOfRangeErrorImpl(){e(this);this.name="ArgumentOutOfRangeError";this.message="argument out of range"}}))},52219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EmptyError=void 0;var n=r(78726);t.EmptyError=n.createErrorClass((function(e){return function EmptyErrorImpl(){e(this);this.name="EmptyError";this.message="no elements in sequence"}}))},7614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TestTools=t.Immediate=void 0;var r=1;var n;var i={};function findAndClearHandle(e){if(e in i){delete i[e];return true}return false}t.Immediate={setImmediate:function(e){var t=r++;i[t]=true;if(!n){n=Promise.resolve()}n.then((function(){return findAndClearHandle(t)&&e()}));return t},clearImmediate:function(e){findAndClearHandle(e)}};t.TestTools={pending:function(){return Object.keys(i).length}}},70604:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NotFoundError=void 0;var n=r(78726);t.NotFoundError=n.createErrorClass((function(e){return function NotFoundErrorImpl(t){e(this);this.name="NotFoundError";this.message=t}}))},49638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ObjectUnsubscribedError=void 0;var n=r(78726);t.ObjectUnsubscribedError=n.createErrorClass((function(e){return function ObjectUnsubscribedErrorImpl(){e(this);this.name="ObjectUnsubscribedError";this.message="object unsubscribed"}}))},74856:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SequenceError=void 0;var n=r(78726);t.SequenceError=n.createErrorClass((function(e){return function SequenceErrorImpl(t){e(this);this.name="SequenceError";this.message=t}}))},86162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.UnsubscriptionError=void 0;var n=r(78726);t.UnsubscriptionError=n.createErrorClass((function(e){return function UnsubscriptionErrorImpl(t){e(this);this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"";this.name="UnsubscriptionError";this.errors=t}}))},38829:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.popNumber=t.popScheduler=t.popResultSelector=void 0;var n=r(18969);var i=r(38676);function last(e){return e[e.length-1]}function popResultSelector(e){return n.isFunction(last(e))?e.pop():undefined}t.popResultSelector=popResultSelector;function popScheduler(e){return i.isScheduler(last(e))?e.pop():undefined}t.popScheduler=popScheduler;function popNumber(e,t){return typeof last(e)==="number"?e.pop():t}t.popNumber=popNumber},30260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.argsArgArrayOrObject=void 0;var r=Array.isArray;var n=Object.getPrototypeOf,i=Object.prototype,s=Object.keys;function argsArgArrayOrObject(e){if(e.length===1){var t=e[0];if(r(t)){return{args:t,keys:null}}if(isPOJO(t)){var n=s(t);return{args:n.map((function(e){return t[e]})),keys:n}}}return{args:e,keys:null}}t.argsArgArrayOrObject=argsArgArrayOrObject;function isPOJO(e){return e&&typeof e==="object"&&n(e)===i}},13189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.argsOrArgArray=void 0;var r=Array.isArray;function argsOrArgArray(e){return e.length===1&&r(e[0])?e[0]:e}t.argsOrArgArray=argsOrArgArray},14610:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.arrRemove=void 0;function arrRemove(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}t.arrRemove=arrRemove},78726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createErrorClass=void 0;function createErrorClass(e){var _super=function(e){Error.call(e);e.stack=(new Error).stack};var t=e(_super);t.prototype=Object.create(Error.prototype);t.prototype.constructor=t;return t}t.createErrorClass=createErrorClass},45298:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createObject=void 0;function createObject(e,t){return e.reduce((function(e,r,n){return e[r]=t[n],e}),{})}t.createObject=createObject},97713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.captureError=t.errorContext=void 0;var n=r(83748);var i=null;function errorContext(e){if(n.config.useDeprecatedSynchronousErrorHandling){var t=!i;if(t){i={errorThrown:false,error:null}}e();if(t){var r=i,s=r.errorThrown,o=r.error;i=null;if(s){throw o}}}else{e()}}t.errorContext=errorContext;function captureError(e){if(n.config.useDeprecatedSynchronousErrorHandling&&i){i.errorThrown=true;i.error=e}}t.captureError=captureError},86731:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.executeSchedule=void 0;function executeSchedule(e,t,r,n,i){if(n===void 0){n=0}if(i===void 0){i=false}var s=t.schedule((function(){r();if(i){e.add(this.schedule(null,n))}else{this.unsubscribe()}}),n);e.add(s);if(!i){return s}}t.executeSchedule=executeSchedule},31393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.identity=void 0;function identity(e){return e}t.identity=identity},54781:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isArrayLike=void 0;t.isArrayLike=function(e){return e&&typeof e.length==="number"&&typeof e!=="function"}},92783:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isAsyncIterable=void 0;var n=r(18969);function isAsyncIterable(e){return Symbol.asyncIterator&&n.isFunction(e===null||e===void 0?void 0:e[Symbol.asyncIterator])}t.isAsyncIterable=isAsyncIterable},61611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isValidDate=void 0;function isValidDate(e){return e instanceof Date&&!isNaN(e)}t.isValidDate=isValidDate},18969:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isFunction=void 0;function isFunction(e){return typeof e==="function"}t.isFunction=isFunction},2834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isInteropObservable=void 0;var n=r(48618);var i=r(18969);function isInteropObservable(e){return i.isFunction(e[n.observable])}t.isInteropObservable=isInteropObservable},73220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isIterable=void 0;var n=r(95907);var i=r(18969);function isIterable(e){return i.isFunction(e===null||e===void 0?void 0:e[n.iterator])}t.isIterable=isIterable},31817:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isObservable=void 0;var n=r(45480);var i=r(18969);function isObservable(e){return!!e&&(e instanceof n.Observable||i.isFunction(e.lift)&&i.isFunction(e.subscribe))}t.isObservable=isObservable},53646:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPromise=void 0;var n=r(18969);function isPromise(e){return n.isFunction(e===null||e===void 0?void 0:e.then)}t.isPromise=isPromise},86559:function(e,t,r){"use strict";var n=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e];i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};var i=this&&this.__await||function(e){return this instanceof i?(this.v=e,this):new i(e)};var s=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,o=[];return s={},verb("next"),verb("throw"),verb("return"),s[Symbol.asyncIterator]=function(){return this},s;function verb(e){if(n[e])s[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||resume(e,t)}))}}function resume(e,t){try{step(n[e](t))}catch(e){settle(o[0][3],e)}}function step(e){e.value instanceof i?Promise.resolve(e.value.v).then(fulfill,reject):settle(o[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),o.shift(),o.length)resume(o[0][0],o[0][1])}};Object.defineProperty(t,"__esModule",{value:true});t.isReadableStreamLike=t.readableStreamLikeToAsyncGenerator=void 0;var o=r(18969);function readableStreamLikeToAsyncGenerator(e){return s(this,arguments,(function readableStreamLikeToAsyncGenerator_1(){var t,r,s,o;return n(this,(function(n){switch(n.label){case 0:t=e.getReader();n.label=1;case 1:n.trys.push([1,,9,10]);n.label=2;case 2:if(false){}return[4,i(t.read())];case 3:r=n.sent(),s=r.value,o=r.done;if(!o)return[3,5];return[4,i(void 0)];case 4:return[2,n.sent()];case 5:return[4,i(s)];case 6:return[4,n.sent()];case 7:n.sent();return[3,2];case 8:return[3,10];case 9:t.releaseLock();return[7];case 10:return[2]}}))}))}t.readableStreamLikeToAsyncGenerator=readableStreamLikeToAsyncGenerator;function isReadableStreamLike(e){return o.isFunction(e===null||e===void 0?void 0:e.getReader)}t.isReadableStreamLike=isReadableStreamLike},38676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isScheduler=void 0;var n=r(18969);function isScheduler(e){return e&&n.isFunction(e.schedule)}t.isScheduler=isScheduler},74135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.operate=t.hasLift=void 0;var n=r(18969);function hasLift(e){return n.isFunction(e===null||e===void 0?void 0:e.lift)}t.hasLift=hasLift;function operate(e){return function(t){if(hasLift(t)){return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}))}throw new TypeError("Unable to lift unknown Observable type")}}t.operate=operate},58890:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.mapOneOrManyArgs=void 0;var s=r(30784);var o=Array.isArray;function callOrApply(e,t){return o(t)?e.apply(void 0,i([],n(t))):e(t)}function mapOneOrManyArgs(e){return s.map((function(t){return callOrApply(e,t)}))}t.mapOneOrManyArgs=mapOneOrManyArgs},95573:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.noop=void 0;function noop(){}t.noop=noop},86291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.not=void 0;function not(e,t){return function(r,n){return!e.call(t,r,n)}}t.not=not},84056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.pipeFromArray=t.pipe=void 0;var n=r(31393);function pipe(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return pipeFromArray(e)}t.pipe=pipe;function pipeFromArray(e){if(e.length===0){return n.identity}if(e.length===1){return e[0]}return function piped(t){return e.reduce((function(e,t){return t(e)}),t)}}t.pipeFromArray=pipeFromArray},95154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.reportUnhandledError=void 0;var n=r(83748);var i=r(13774);function reportUnhandledError(e){i.timeoutProvider.setTimeout((function(){var t=n.config.onUnhandledError;if(t){t(e)}else{throw e}}))}t.reportUnhandledError=reportUnhandledError},23165:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createInvalidObservableTypeError=void 0;function createInvalidObservableTypeError(e){return new TypeError("You provided "+(e!==null&&typeof e==="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}t.createInvalidObservableTypeError=createInvalidObservableTypeError},33956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeAll=t.merge=t.max=t.materialize=t.mapTo=t.map=t.last=t.isEmpty=t.ignoreElements=t.groupBy=t.first=t.findIndex=t.find=t.finalize=t.filter=t.expand=t.exhaustMap=t.exhaustAll=t.exhaust=t.every=t.endWith=t.elementAt=t.distinctUntilKeyChanged=t.distinctUntilChanged=t.distinct=t.dematerialize=t.delayWhen=t.delay=t.defaultIfEmpty=t.debounceTime=t.debounce=t.count=t.connect=t.concatWith=t.concatMapTo=t.concatMap=t.concatAll=t.concat=t.combineLatestWith=t.combineLatest=t.combineLatestAll=t.combineAll=t.catchError=t.bufferWhen=t.bufferToggle=t.bufferTime=t.bufferCount=t.buffer=t.auditTime=t.audit=void 0;t.timeInterval=t.throwIfEmpty=t.throttleTime=t.throttle=t.tap=t.takeWhile=t.takeUntil=t.takeLast=t.take=t.switchScan=t.switchMapTo=t.switchMap=t.switchAll=t.subscribeOn=t.startWith=t.skipWhile=t.skipUntil=t.skipLast=t.skip=t.single=t.shareReplay=t.share=t.sequenceEqual=t.scan=t.sampleTime=t.sample=t.refCount=t.retryWhen=t.retry=t.repeatWhen=t.repeat=t.reduce=t.raceWith=t.race=t.publishReplay=t.publishLast=t.publishBehavior=t.publish=t.pluck=t.partition=t.pairwise=t.onErrorResumeNext=t.observeOn=t.multicast=t.min=t.mergeWith=t.mergeScan=t.mergeMapTo=t.mergeMap=t.flatMap=void 0;t.zipWith=t.zipAll=t.zip=t.withLatestFrom=t.windowWhen=t.windowToggle=t.windowTime=t.windowCount=t.window=t.toArray=t.timestamp=t.timeoutWith=t.timeout=void 0;var n=r(24058);Object.defineProperty(t,"audit",{enumerable:true,get:function(){return n.audit}});var i=r(82270);Object.defineProperty(t,"auditTime",{enumerable:true,get:function(){return i.auditTime}});var s=r(90815);Object.defineProperty(t,"buffer",{enumerable:true,get:function(){return s.buffer}});var o=r(45132);Object.defineProperty(t,"bufferCount",{enumerable:true,get:function(){return o.bufferCount}});var a=r(76294);Object.defineProperty(t,"bufferTime",{enumerable:true,get:function(){return a.bufferTime}});var c=r(16492);Object.defineProperty(t,"bufferToggle",{enumerable:true,get:function(){return c.bufferToggle}});var u=r(41134);Object.defineProperty(t,"bufferWhen",{enumerable:true,get:function(){return u.bufferWhen}});var d=r(76243);Object.defineProperty(t,"catchError",{enumerable:true,get:function(){return d.catchError}});var p=r(5749);Object.defineProperty(t,"combineAll",{enumerable:true,get:function(){return p.combineAll}});var m=r(6290);Object.defineProperty(t,"combineLatestAll",{enumerable:true,get:function(){return m.combineLatestAll}});var y=r(21357);Object.defineProperty(t,"combineLatest",{enumerable:true,get:function(){return y.combineLatest}});var g=r(37372);Object.defineProperty(t,"combineLatestWith",{enumerable:true,get:function(){return g.combineLatestWith}});var b=r(78826);Object.defineProperty(t,"concat",{enumerable:true,get:function(){return b.concat}});var v=r(83038);Object.defineProperty(t,"concatAll",{enumerable:true,get:function(){return v.concatAll}});var w=r(53219);Object.defineProperty(t,"concatMap",{enumerable:true,get:function(){return w.concatMap}});var _=r(79311);Object.defineProperty(t,"concatMapTo",{enumerable:true,get:function(){return _.concatMapTo}});var C=r(34486);Object.defineProperty(t,"concatWith",{enumerable:true,get:function(){return C.concatWith}});var P=r(68699);Object.defineProperty(t,"connect",{enumerable:true,get:function(){return P.connect}});var O=r(75609);Object.defineProperty(t,"count",{enumerable:true,get:function(){return O.count}});var E=r(29749);Object.defineProperty(t,"debounce",{enumerable:true,get:function(){return E.debounce}});var I=r(94111);Object.defineProperty(t,"debounceTime",{enumerable:true,get:function(){return I.debounceTime}});var k=r(17558);Object.defineProperty(t,"defaultIfEmpty",{enumerable:true,get:function(){return k.defaultIfEmpty}});var T=r(48974);Object.defineProperty(t,"delay",{enumerable:true,get:function(){return T.delay}});var x=r(66673);Object.defineProperty(t,"delayWhen",{enumerable:true,get:function(){return x.delayWhen}});var R=r(17927);Object.defineProperty(t,"dematerialize",{enumerable:true,get:function(){return R.dematerialize}});var B=r(43772);Object.defineProperty(t,"distinct",{enumerable:true,get:function(){return B.distinct}});var N=r(67787);Object.defineProperty(t,"distinctUntilChanged",{enumerable:true,get:function(){return N.distinctUntilChanged}});var j=r(49969);Object.defineProperty(t,"distinctUntilKeyChanged",{enumerable:true,get:function(){return j.distinctUntilKeyChanged}});var L=r(82007);Object.defineProperty(t,"elementAt",{enumerable:true,get:function(){return L.elementAt}});var D=r(79339);Object.defineProperty(t,"endWith",{enumerable:true,get:function(){return D.endWith}});var U=r(46184);Object.defineProperty(t,"every",{enumerable:true,get:function(){return U.every}});var F=r(75659);Object.defineProperty(t,"exhaust",{enumerable:true,get:function(){return F.exhaust}});var K=r(6906);Object.defineProperty(t,"exhaustAll",{enumerable:true,get:function(){return K.exhaustAll}});var V=r(44181);Object.defineProperty(t,"exhaustMap",{enumerable:true,get:function(){return V.exhaustMap}});var H=r(58940);Object.defineProperty(t,"expand",{enumerable:true,get:function(){return H.expand}});var q=r(47778);Object.defineProperty(t,"filter",{enumerable:true,get:function(){return q.filter}});var W=r(94634);Object.defineProperty(t,"finalize",{enumerable:true,get:function(){return W.finalize}});var z=r(40644);Object.defineProperty(t,"find",{enumerable:true,get:function(){return z.find}});var $=r(32947);Object.defineProperty(t,"findIndex",{enumerable:true,get:function(){return $.findIndex}});var G=r(58448);Object.defineProperty(t,"first",{enumerable:true,get:function(){return G.first}});var J=r(19447);Object.defineProperty(t,"groupBy",{enumerable:true,get:function(){return J.groupBy}});var X=r(59816);Object.defineProperty(t,"ignoreElements",{enumerable:true,get:function(){return X.ignoreElements}});var Y=r(95173);Object.defineProperty(t,"isEmpty",{enumerable:true,get:function(){return Y.isEmpty}});var Q=r(73588);Object.defineProperty(t,"last",{enumerable:true,get:function(){return Q.last}});var ee=r(30784);Object.defineProperty(t,"map",{enumerable:true,get:function(){return ee.map}});var te=r(8517);Object.defineProperty(t,"mapTo",{enumerable:true,get:function(){return te.mapTo}});var re=r(42251);Object.defineProperty(t,"materialize",{enumerable:true,get:function(){return re.materialize}});var ne=r(5750);Object.defineProperty(t,"max",{enumerable:true,get:function(){return ne.max}});var ie=r(69433);Object.defineProperty(t,"merge",{enumerable:true,get:function(){return ie.merge}});var se=r(12130);Object.defineProperty(t,"mergeAll",{enumerable:true,get:function(){return se.mergeAll}});var oe=r(8149);Object.defineProperty(t,"flatMap",{enumerable:true,get:function(){return oe.flatMap}});var ae=r(34960);Object.defineProperty(t,"mergeMap",{enumerable:true,get:function(){return ae.mergeMap}});var ce=r(17180);Object.defineProperty(t,"mergeMapTo",{enumerable:true,get:function(){return ce.mergeMapTo}});var ue=r(33608);Object.defineProperty(t,"mergeScan",{enumerable:true,get:function(){return ue.mergeScan}});var le=r(21209);Object.defineProperty(t,"mergeWith",{enumerable:true,get:function(){return le.mergeWith}});var fe=r(64569);Object.defineProperty(t,"min",{enumerable:true,get:function(){return fe.min}});var de=r(93185);Object.defineProperty(t,"multicast",{enumerable:true,get:function(){return de.multicast}});var pe=r(90002);Object.defineProperty(t,"observeOn",{enumerable:true,get:function(){return pe.observeOn}});var he=r(40542);Object.defineProperty(t,"onErrorResumeNext",{enumerable:true,get:function(){return he.onErrorResumeNext}});var me=r(25574);Object.defineProperty(t,"pairwise",{enumerable:true,get:function(){return me.pairwise}});var ye=r(76063);Object.defineProperty(t,"partition",{enumerable:true,get:function(){return ye.partition}});var ge=r(15522);Object.defineProperty(t,"pluck",{enumerable:true,get:function(){return ge.pluck}});var be=r(69263);Object.defineProperty(t,"publish",{enumerable:true,get:function(){return be.publish}});var ve=r(25424);Object.defineProperty(t,"publishBehavior",{enumerable:true,get:function(){return ve.publishBehavior}});var Se=r(31679);Object.defineProperty(t,"publishLast",{enumerable:true,get:function(){return Se.publishLast}});var we=r(10509);Object.defineProperty(t,"publishReplay",{enumerable:true,get:function(){return we.publishReplay}});var _e=r(86186);Object.defineProperty(t,"race",{enumerable:true,get:function(){return _e.race}});var Ce=r(46194);Object.defineProperty(t,"raceWith",{enumerable:true,get:function(){return Ce.raceWith}});var Pe=r(35951);Object.defineProperty(t,"reduce",{enumerable:true,get:function(){return Pe.reduce}});var Oe=r(20109);Object.defineProperty(t,"repeat",{enumerable:true,get:function(){return Oe.repeat}});var Ee=r(6426);Object.defineProperty(t,"repeatWhen",{enumerable:true,get:function(){return Ee.repeatWhen}});var Ae=r(86479);Object.defineProperty(t,"retry",{enumerable:true,get:function(){return Ae.retry}});var Ie=r(99299);Object.defineProperty(t,"retryWhen",{enumerable:true,get:function(){return Ie.retryWhen}});var ke=r(39543);Object.defineProperty(t,"refCount",{enumerable:true,get:function(){return ke.refCount}});var Te=r(36681);Object.defineProperty(t,"sample",{enumerable:true,get:function(){return Te.sample}});var xe=r(5546);Object.defineProperty(t,"sampleTime",{enumerable:true,get:function(){return xe.sampleTime}});var Re=r(25110);Object.defineProperty(t,"scan",{enumerable:true,get:function(){return Re.scan}});var Be=r(94086);Object.defineProperty(t,"sequenceEqual",{enumerable:true,get:function(){return Be.sequenceEqual}});var Ne=r(91686);Object.defineProperty(t,"share",{enumerable:true,get:function(){return Ne.share}});var je=r(37934);Object.defineProperty(t,"shareReplay",{enumerable:true,get:function(){return je.shareReplay}});var Le=r(96611);Object.defineProperty(t,"single",{enumerable:true,get:function(){return Le.single}});var De=r(34719);Object.defineProperty(t,"skip",{enumerable:true,get:function(){return De.skip}});var Me=r(12967);Object.defineProperty(t,"skipLast",{enumerable:true,get:function(){return Me.skipLast}});var Ue=r(77924);Object.defineProperty(t,"skipUntil",{enumerable:true,get:function(){return Ue.skipUntil}});var Fe=r(84978);Object.defineProperty(t,"skipWhile",{enumerable:true,get:function(){return Fe.skipWhile}});var Ke=r(45013);Object.defineProperty(t,"startWith",{enumerable:true,get:function(){return Ke.startWith}});var Ve=r(42972);Object.defineProperty(t,"subscribeOn",{enumerable:true,get:function(){return Ve.subscribeOn}});var He=r(13969);Object.defineProperty(t,"switchAll",{enumerable:true,get:function(){return He.switchAll}});var qe=r(74723);Object.defineProperty(t,"switchMap",{enumerable:true,get:function(){return qe.switchMap}});var We=r(59788);Object.defineProperty(t,"switchMapTo",{enumerable:true,get:function(){return We.switchMapTo}});var ze=r(94088);Object.defineProperty(t,"switchScan",{enumerable:true,get:function(){return ze.switchScan}});var $e=r(10476);Object.defineProperty(t,"take",{enumerable:true,get:function(){return $e.take}});var Ge=r(17615);Object.defineProperty(t,"takeLast",{enumerable:true,get:function(){return Ge.takeLast}});var Je=r(7385);Object.defineProperty(t,"takeUntil",{enumerable:true,get:function(){return Je.takeUntil}});var Xe=r(85245);Object.defineProperty(t,"takeWhile",{enumerable:true,get:function(){return Xe.takeWhile}});var Ye=r(29874);Object.defineProperty(t,"tap",{enumerable:true,get:function(){return Ye.tap}});var Ze=r(38466);Object.defineProperty(t,"throttle",{enumerable:true,get:function(){return Ze.throttle}});var Qe=r(96937);Object.defineProperty(t,"throttleTime",{enumerable:true,get:function(){return Qe.throttleTime}});var et=r(38054);Object.defineProperty(t,"throwIfEmpty",{enumerable:true,get:function(){return et.throwIfEmpty}});var tt=r(40808);Object.defineProperty(t,"timeInterval",{enumerable:true,get:function(){return tt.timeInterval}});var rt=r(85192);Object.defineProperty(t,"timeout",{enumerable:true,get:function(){return rt.timeout}});var nt=r(13313);Object.defineProperty(t,"timeoutWith",{enumerable:true,get:function(){return nt.timeoutWith}});var it=r(13625);Object.defineProperty(t,"timestamp",{enumerable:true,get:function(){return it.timestamp}});var st=r(94966);Object.defineProperty(t,"toArray",{enumerable:true,get:function(){return st.toArray}});var ot=r(20460);Object.defineProperty(t,"window",{enumerable:true,get:function(){return ot.window}});var at=r(82054);Object.defineProperty(t,"windowCount",{enumerable:true,get:function(){return at.windowCount}});var ct=r(56068);Object.defineProperty(t,"windowTime",{enumerable:true,get:function(){return ct.windowTime}});var ut=r(13996);Object.defineProperty(t,"windowToggle",{enumerable:true,get:function(){return ut.windowToggle}});var ft=r(13343);Object.defineProperty(t,"windowWhen",{enumerable:true,get:function(){return ft.windowWhen}});var dt=r(79755);Object.defineProperty(t,"withLatestFrom",{enumerable:true,get:function(){return dt.withLatestFrom}});var pt=r(11407);Object.defineProperty(t,"zip",{enumerable:true,get:function(){return pt.zip}});var ht=r(97263);Object.defineProperty(t,"zipAll",{enumerable:true,get:function(){return ht.zipAll}});var mt=r(24219);Object.defineProperty(t,"zipWith",{enumerable:true,get:function(){return mt.zipWith}})},78586:(e,t,r)=>{
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(14300);var i=n.Buffer;function copyProps(e,t){for(var r in e){t[r]=e[r]}}if(i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow){e.exports=n}else{copyProps(n,t);t.Buffer=SafeBuffer}function SafeBuffer(e,t,r){return i(e,t,r)}SafeBuffer.prototype=Object.create(i.prototype);copyProps(i,SafeBuffer);SafeBuffer.from=function(e,t,r){if(typeof e==="number"){throw new TypeError("Argument must not be a number")}return i(e,t,r)};SafeBuffer.alloc=function(e,t,r){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}var n=i(e);if(t!==undefined){if(typeof r==="string"){n.fill(t,r)}else{n.fill(t)}}else{n.fill(0)}return n};SafeBuffer.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return i(e)};SafeBuffer.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return n.SlowBuffer(e)}},15774:(e,t,r)=>{const n=Symbol("SemVer ANY");class Comparator{static get ANY(){return n}constructor(e,t){t=i(t);if(e instanceof Comparator){if(e.loose===!!t.loose){return e}else{e=e.value}}e=e.trim().split(/\s+/).join(" ");c("comparator",e,t);this.options=t;this.loose=!!t.loose;this.parse(e);if(this.semver===n){this.value=""}else{this.value=this.operator+this.semver.version}c("comp",this)}parse(e){const t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR];const r=e.match(t);if(!r){throw new TypeError(`Invalid comparator: ${e}`)}this.operator=r[1]!==undefined?r[1]:"";if(this.operator==="="){this.operator=""}if(!r[2]){this.semver=n}else{this.semver=new u(r[2],this.options.loose)}}toString(){return this.value}test(e){c("Comparator.test",e,this.options.loose);if(this.semver===n||e===n){return true}if(typeof e==="string"){try{e=new u(e,this.options)}catch(e){return false}}return a(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Comparator)){throw new TypeError("a Comparator is required")}if(this.operator===""){if(this.value===""){return true}return new d(e.value,t).test(this.value)}else if(e.operator===""){if(e.value===""){return true}return new d(this.value,t).test(e.semver)}t=i(t);if(t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")){return false}if(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))){return false}if(this.operator.startsWith(">")&&e.operator.startsWith(">")){return true}if(this.operator.startsWith("<")&&e.operator.startsWith("<")){return true}if(this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")){return true}if(a(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")){return true}if(a(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")){return true}return false}}e.exports=Comparator;const i=r(83512);const{safeRe:s,t:o}=r(6974);const a=r(2831);const c=r(70871);const u=r(25168);const d=r(41899)},41899:(e,t,r)=>{const n=/\s+/g;class Range{constructor(e,t){t=o(t);if(e instanceof Range){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{return new Range(e.raw,t)}}if(e instanceof a){this.raw=e.value;this.set=[[e]];this.formatted=undefined;return this}this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;this.raw=e.trim().replace(n," ");this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length));if(!this.set.length){throw new TypeError(`Invalid SemVer Range: ${this.raw}`)}if(this.set.length>1){const e=this.set[0];this.set=this.set.filter((e=>!isNullSet(e[0])));if(this.set.length===0){this.set=[e]}else if(this.set.length>1){for(const e of this.set){if(e.length===1&&isAny(e[0])){this.set=[e];break}}}}this.formatted=undefined}get range(){if(this.formatted===undefined){this.formatted="";for(let e=0;e<this.set.length;e++){if(e>0){this.formatted+="||"}const t=this.set[e];for(let e=0;e<t.length;e++){if(e>0){this.formatted+=" "}this.formatted+=t[e].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=(this.options.includePrerelease&&b)|(this.options.loose&&v);const r=t+":"+e;const n=s.get(r);if(n){return n}const i=this.options.loose;const o=i?d[p.HYPHENRANGELOOSE]:d[p.HYPHENRANGE];e=e.replace(o,hyphenReplace(this.options.includePrerelease));c("hyphen replace",e);e=e.replace(d[p.COMPARATORTRIM],m);c("comparator trim",e);e=e.replace(d[p.TILDETRIM],y);c("tilde trim",e);e=e.replace(d[p.CARETTRIM],g);c("caret trim",e);let u=e.split(" ").map((e=>parseComparator(e,this.options))).join(" ").split(/\s+/).map((e=>replaceGTE0(e,this.options)));if(i){u=u.filter((e=>{c("loose invalid filter",e,this.options);return!!e.match(d[p.COMPARATORLOOSE])}))}c("range list",u);const w=new Map;const _=u.map((e=>new a(e,this.options)));for(const e of _){if(isNullSet(e)){return[e]}w.set(e.value,e)}if(w.size>1&&w.has("")){w.delete("")}const C=[...w.values()];s.set(r,C);return C}intersects(e,t){if(!(e instanceof Range)){throw new TypeError("a Range is required")}return this.set.some((r=>isSatisfiable(r,t)&&e.set.some((e=>isSatisfiable(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e){return false}if(typeof e==="string"){try{e=new u(e,this.options)}catch(e){return false}}for(let t=0;t<this.set.length;t++){if(testSet(this.set[t],e,this.options)){return true}}return false}}e.exports=Range;const i=r(26941);const s=new i;const o=r(83512);const a=r(15774);const c=r(70871);const u=r(25168);const{safeRe:d,t:p,comparatorTrimReplace:m,tildeTrimReplace:y,caretTrimReplace:g}=r(6974);const{FLAG_INCLUDE_PRERELEASE:b,FLAG_LOOSE:v}=r(16447);const isNullSet=e=>e.value==="<0.0.0-0";const isAny=e=>e.value==="";const isSatisfiable=(e,t)=>{let r=true;const n=e.slice();let i=n.pop();while(r&&n.length){r=n.every((e=>i.intersects(e,t)));i=n.pop()}return r};const parseComparator=(e,t)=>{c("comp",e,t);e=replaceCarets(e,t);c("caret",e);e=replaceTildes(e,t);c("tildes",e);e=replaceXRanges(e,t);c("xrange",e);e=replaceStars(e,t);c("stars",e);return e};const isX=e=>!e||e.toLowerCase()==="x"||e==="*";const replaceTildes=(e,t)=>e.trim().split(/\s+/).map((e=>replaceTilde(e,t))).join(" ");const replaceTilde=(e,t)=>{const r=t.loose?d[p.TILDELOOSE]:d[p.TILDE];return e.replace(r,((t,r,n,i,s)=>{c("tilde",e,t,r,n,i,s);let o;if(isX(r)){o=""}else if(isX(n)){o=`>=${r}.0.0 <${+r+1}.0.0-0`}else if(isX(i)){o=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`}else if(s){c("replaceTilde pr",s);o=`>=${r}.${n}.${i}-${s} <${r}.${+n+1}.0-0`}else{o=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`}c("tilde return",o);return o}))};const replaceCarets=(e,t)=>e.trim().split(/\s+/).map((e=>replaceCaret(e,t))).join(" ");const replaceCaret=(e,t)=>{c("caret",e,t);const r=t.loose?d[p.CARETLOOSE]:d[p.CARET];const n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,s,o)=>{c("caret",e,t,r,i,s,o);let a;if(isX(r)){a=""}else if(isX(i)){a=`>=${r}.0.0${n} <${+r+1}.0.0-0`}else if(isX(s)){if(r==="0"){a=`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`}else{a=`>=${r}.${i}.0${n} <${+r+1}.0.0-0`}}else if(o){c("replaceCaret pr",o);if(r==="0"){if(i==="0"){a=`>=${r}.${i}.${s}-${o} <${r}.${i}.${+s+1}-0`}else{a=`>=${r}.${i}.${s}-${o} <${r}.${+i+1}.0-0`}}else{a=`>=${r}.${i}.${s}-${o} <${+r+1}.0.0-0`}}else{c("no pr");if(r==="0"){if(i==="0"){a=`>=${r}.${i}.${s}${n} <${r}.${i}.${+s+1}-0`}else{a=`>=${r}.${i}.${s}${n} <${r}.${+i+1}.0-0`}}else{a=`>=${r}.${i}.${s} <${+r+1}.0.0-0`}}c("caret return",a);return a}))};const replaceXRanges=(e,t)=>{c("replaceXRanges",e,t);return e.split(/\s+/).map((e=>replaceXRange(e,t))).join(" ")};const replaceXRange=(e,t)=>{e=e.trim();const r=t.loose?d[p.XRANGELOOSE]:d[p.XRANGE];return e.replace(r,((r,n,i,s,o,a)=>{c("xRange",e,r,n,i,s,o,a);const u=isX(i);const d=u||isX(s);const p=d||isX(o);const m=p;if(n==="="&&m){n=""}a=t.includePrerelease?"-0":"";if(u){if(n===">"||n==="<"){r="<0.0.0-0"}else{r="*"}}else if(n&&m){if(d){s=0}o=0;if(n===">"){n=">=";if(d){i=+i+1;s=0;o=0}else{s=+s+1;o=0}}else if(n==="<="){n="<";if(d){i=+i+1}else{s=+s+1}}if(n==="<"){a="-0"}r=`${n+i}.${s}.${o}${a}`}else if(d){r=`>=${i}.0.0${a} <${+i+1}.0.0-0`}else if(p){r=`>=${i}.${s}.0${a} <${i}.${+s+1}.0-0`}c("xRange return",r);return r}))};const replaceStars=(e,t)=>{c("replaceStars",e,t);return e.trim().replace(d[p.STAR],"")};const replaceGTE0=(e,t)=>{c("replaceGTE0",e,t);return e.trim().replace(d[t.includePrerelease?p.GTE0PRE:p.GTE0],"")};const hyphenReplace=e=>(t,r,n,i,s,o,a,c,u,d,p,m)=>{if(isX(n)){r=""}else if(isX(i)){r=`>=${n}.0.0${e?"-0":""}`}else if(isX(s)){r=`>=${n}.${i}.0${e?"-0":""}`}else if(o){r=`>=${r}`}else{r=`>=${r}${e?"-0":""}`}if(isX(u)){c=""}else if(isX(d)){c=`<${+u+1}.0.0-0`}else if(isX(p)){c=`<${u}.${+d+1}.0-0`}else if(m){c=`<=${u}.${d}.${p}-${m}`}else if(e){c=`<${u}.${d}.${+p+1}-0`}else{c=`<=${c}`}return`${r} ${c}`.trim()};const testSet=(e,t,r)=>{for(let r=0;r<e.length;r++){if(!e[r].test(t)){return false}}if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++){c(e[r].semver);if(e[r].semver===a.ANY){continue}if(e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch){return true}}}return false}return true}},25168:(e,t,r)=>{const n=r(70871);const{MAX_LENGTH:i,MAX_SAFE_INTEGER:s}=r(16447);const{safeRe:o,t:a}=r(6974);const c=r(83512);const{compareIdentifiers:u}=r(3261);class SemVer{constructor(e,t){t=c(t);if(e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{e=e.version}}else if(typeof e!=="string"){throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`)}if(e.length>i){throw new TypeError(`version is longer than ${i} characters`)}n("SemVer",e,t);this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!r){throw new TypeError(`Invalid Version: ${e}`)}this.raw=e;this.major=+r[1];this.minor=+r[2];this.patch=+r[3];if(this.major>s||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>s||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>s||this.patch<0){throw new TypeError("Invalid patch version")}if(!r[4]){this.prerelease=[]}else{this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<s){return t}}return e}))}this.build=r[5]?r[5].split("."):[];this.format()}format(){this.version=`${this.major}.${this.minor}.${this.patch}`;if(this.prerelease.length){this.version+=`-${this.prerelease.join(".")}`}return this.version}toString(){return this.version}compare(e){n("SemVer.compare",this.version,this.options,e);if(!(e instanceof SemVer)){if(typeof e==="string"&&e===this.version){return 0}e=new SemVer(e,this.options)}if(e.version===this.version){return 0}return this.compareMain(e)||this.comparePre(e)}compareMain(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}return u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}if(this.prerelease.length&&!e.prerelease.length){return-1}else if(!this.prerelease.length&&e.prerelease.length){return 1}else if(!this.prerelease.length&&!e.prerelease.length){return 0}let t=0;do{const r=this.prerelease[t];const i=e.prerelease[t];n("prerelease compare",t,r,i);if(r===undefined&&i===undefined){return 0}else if(i===undefined){return 1}else if(r===undefined){return-1}else if(r===i){continue}else{return u(r,i)}}while(++t)}compareBuild(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}let t=0;do{const r=this.build[t];const i=e.build[t];n("build compare",t,r,i);if(r===undefined&&i===undefined){return 0}else if(i===undefined){return 1}else if(r===undefined){return-1}else if(r===i){continue}else{return u(r,i)}}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0;this.inc("patch",t,r);this.inc("pre",t,r);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",t,r)}this.inc("pre",t,r);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&r===false){throw new Error("invalid increment argument: identifier is empty")}if(this.prerelease.length===0){this.prerelease=[e]}else{let n=this.prerelease.length;while(--n>=0){if(typeof this.prerelease[n]==="number"){this.prerelease[n]++;n=-2}}if(n===-1){if(t===this.prerelease.join(".")&&r===false){throw new Error("invalid increment argument: identifier already exists")}this.prerelease.push(e)}}if(t){let n=[t,e];if(r===false){n=[t]}if(u(this.prerelease[0],t)===0){if(isNaN(this.prerelease[1])){this.prerelease=n}}else{this.prerelease=n}}break}default:throw new Error(`invalid increment argument: ${e}`)}this.raw=this.format();if(this.build.length){this.raw+=`+${this.build.join(".")}`}return this}}e.exports=SemVer},23102:(e,t,r)=>{const n=r(11424);const clean=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};e.exports=clean},2831:(e,t,r)=>{const n=r(25438);const i=r(17732);const s=r(12670);const o=r(46179);const a=r(33414);const c=r(41364);const cmp=(e,t,r,u)=>{switch(t){case"===":if(typeof e==="object"){e=e.version}if(typeof r==="object"){r=r.version}return e===r;case"!==":if(typeof e==="object"){e=e.version}if(typeof r==="object"){r=r.version}return e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return i(e,r,u);case">":return s(e,r,u);case">=":return o(e,r,u);case"<":return a(e,r,u);case"<=":return c(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}};e.exports=cmp},97496:(e,t,r)=>{const n=r(25168);const i=r(11424);const{safeRe:s,t:o}=r(6974);const coerce=(e,t)=>{if(e instanceof n){return e}if(typeof e==="number"){e=String(e)}if(typeof e!=="string"){return null}t=t||{};let r=null;if(!t.rtl){r=e.match(t.includePrerelease?s[o.COERCEFULL]:s[o.COERCE])}else{const n=t.includePrerelease?s[o.COERCERTLFULL]:s[o.COERCERTL];let i;while((i=n.exec(e))&&(!r||r.index+r[0].length!==e.length)){if(!r||i.index+i[0].length!==r.index+r[0].length){r=i}n.lastIndex=i.index+i[1].length+i[2].length}n.lastIndex=-1}if(r===null){return null}const a=r[2];const c=r[3]||"0";const u=r[4]||"0";const d=t.includePrerelease&&r[5]?`-${r[5]}`:"";const p=t.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${a}.${c}.${u}${d}${p}`,t)};e.exports=coerce},29158:(e,t,r)=>{const n=r(25168);const compareBuild=(e,t,r)=>{const i=new n(e,r);const s=new n(t,r);return i.compare(s)||i.compareBuild(s)};e.exports=compareBuild},82913:(e,t,r)=>{const n=r(72358);const compareLoose=(e,t)=>n(e,t,true);e.exports=compareLoose},72358:(e,t,r)=>{const n=r(25168);const compare=(e,t,r)=>new n(e,r).compare(new n(t,r));e.exports=compare},25972:(e,t,r)=>{const n=r(11424);const diff=(e,t)=>{const r=n(e,null,true);const i=n(t,null,true);const s=r.compare(i);if(s===0){return null}const o=s>0;const a=o?r:i;const c=o?i:r;const u=!!a.prerelease.length;const d=!!c.prerelease.length;if(d&&!u){if(!c.patch&&!c.minor){return"major"}if(a.patch){return"patch"}if(a.minor){return"minor"}return"major"}const p=u?"pre":"";if(r.major!==i.major){return p+"major"}if(r.minor!==i.minor){return p+"minor"}if(r.patch!==i.patch){return p+"patch"}return"prerelease"};e.exports=diff},25438:(e,t,r)=>{const n=r(72358);const eq=(e,t,r)=>n(e,t,r)===0;e.exports=eq},12670:(e,t,r)=>{const n=r(72358);const gt=(e,t,r)=>n(e,t,r)>0;e.exports=gt},46179:(e,t,r)=>{const n=r(72358);const gte=(e,t,r)=>n(e,t,r)>=0;e.exports=gte},71604:(e,t,r)=>{const n=r(25168);const inc=(e,t,r,i,s)=>{if(typeof r==="string"){s=i;i=r;r=undefined}try{return new n(e instanceof n?e.version:e,r).inc(t,i,s).version}catch(e){return null}};e.exports=inc},33414:(e,t,r)=>{const n=r(72358);const lt=(e,t,r)=>n(e,t,r)<0;e.exports=lt},41364:(e,t,r)=>{const n=r(72358);const lte=(e,t,r)=>n(e,t,r)<=0;e.exports=lte},72158:(e,t,r)=>{const n=r(25168);const major=(e,t)=>new n(e,t).major;e.exports=major},38497:(e,t,r)=>{const n=r(25168);const minor=(e,t)=>new n(e,t).minor;e.exports=minor},17732:(e,t,r)=>{const n=r(72358);const neq=(e,t,r)=>n(e,t,r)!==0;e.exports=neq},11424:(e,t,r)=>{const n=r(25168);const parse=(e,t,r=false)=>{if(e instanceof n){return e}try{return new n(e,t)}catch(e){if(!r){return null}throw e}};e.exports=parse},69236:(e,t,r)=>{const n=r(25168);const patch=(e,t)=>new n(e,t).patch;e.exports=patch},20593:(e,t,r)=>{const n=r(11424);const prerelease=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null};e.exports=prerelease},41246:(e,t,r)=>{const n=r(72358);const rcompare=(e,t,r)=>n(t,e,r);e.exports=rcompare},5006:(e,t,r)=>{const n=r(29158);const rsort=(e,t)=>e.sort(((e,r)=>n(r,e,t)));e.exports=rsort},27764:(e,t,r)=>{const n=r(41899);const satisfies=(e,t,r)=>{try{t=new n(t,r)}catch(e){return false}return t.test(e)};e.exports=satisfies},63972:(e,t,r)=>{const n=r(29158);const sort=(e,t)=>e.sort(((e,r)=>n(e,r,t)));e.exports=sort},67767:(e,t,r)=>{const n=r(11424);const valid=(e,t)=>{const r=n(e,t);return r?r.version:null};e.exports=valid},510:(e,t,r)=>{const n=r(6974);const i=r(16447);const s=r(25168);const o=r(3261);const a=r(11424);const c=r(67767);const u=r(23102);const d=r(71604);const p=r(25972);const m=r(72158);const y=r(38497);const g=r(69236);const b=r(20593);const v=r(72358);const w=r(41246);const _=r(82913);const C=r(29158);const P=r(63972);const O=r(5006);const E=r(12670);const I=r(33414);const k=r(25438);const T=r(17732);const x=r(46179);const R=r(41364);const B=r(2831);const N=r(97496);const j=r(15774);const L=r(41899);const D=r(27764);const U=r(24908);const F=r(36917);const K=r(45790);const V=r(52478);const H=r(92903);const q=r(63261);const W=r(39528);const z=r(75844);const $=r(83817);const G=r(449);const J=r(53192);e.exports={parse:a,valid:c,clean:u,inc:d,diff:p,major:m,minor:y,patch:g,prerelease:b,compare:v,rcompare:w,compareLoose:_,compareBuild:C,sort:P,rsort:O,gt:E,lt:I,eq:k,neq:T,gte:x,lte:R,cmp:B,coerce:N,Comparator:j,Range:L,satisfies:D,toComparators:U,maxSatisfying:F,minSatisfying:K,minVersion:V,validRange:H,outside:q,gtr:W,ltr:z,intersects:$,simplifyRange:G,subset:J,SemVer:s,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},16447:e=>{const t="2.0.0";const r=256;const n=Number.MAX_SAFE_INTEGER||9007199254740991;const i=16;const s=r-6;const o=["major","premajor","minor","preminor","patch","prepatch","prerelease"];e.exports={MAX_LENGTH:r,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:o,SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},70871:e=>{const t=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},3261:e=>{const t=/^[0-9]+$/;const compareIdentifiers=(e,r)=>{const n=t.test(e);const i=t.test(r);if(n&&i){e=+e;r=+r}return e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};const rcompareIdentifiers=(e,t)=>compareIdentifiers(t,e);e.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:rcompareIdentifiers}},26941:e=>{class LRUCache{constructor(){this.max=1e3;this.map=new Map}get(e){const t=this.map.get(e);if(t===undefined){return undefined}else{this.map.delete(e);this.map.set(e,t);return t}}delete(e){return this.map.delete(e)}set(e,t){const r=this.delete(e);if(!r&&t!==undefined){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}e.exports=LRUCache},83512:e=>{const t=Object.freeze({loose:true});const r=Object.freeze({});const parseOptions=e=>{if(!e){return r}if(typeof e!=="object"){return t}return e};e.exports=parseOptions},6974:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:s}=r(16447);const o=r(70871);t=e.exports={};const a=t.re=[];const c=t.safeRe=[];const u=t.src=[];const d=t.t={};let p=0;const m="[a-zA-Z0-9-]";const y=[["\\s",1],["\\d",s],[m,i]];const makeSafeRegex=e=>{for(const[t,r]of y){e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`)}return e};const createToken=(e,t,r)=>{const n=makeSafeRegex(t);const i=p++;o(e,i,t);d[e]=i;u[i]=t;a[i]=new RegExp(t,r?"g":undefined);c[i]=new RegExp(n,r?"g":undefined)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*");createToken("NUMERICIDENTIFIERLOOSE","\\d+");createToken("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`);createToken("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.`+`(${u[d.NUMERICIDENTIFIER]})\\.`+`(${u[d.NUMERICIDENTIFIER]})`);createToken("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.`+`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.`+`(${u[d.NUMERICIDENTIFIERLOOSE]})`);createToken("PRERELEASEIDENTIFIER",`(?:${u[d.NUMERICIDENTIFIER]}|${u[d.NONNUMERICIDENTIFIER]})`);createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NUMERICIDENTIFIERLOOSE]}|${u[d.NONNUMERICIDENTIFIER]})`);createToken("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`);createToken("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`);createToken("BUILDIDENTIFIER",`${m}+`);createToken("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`);createToken("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`);createToken("FULL",`^${u[d.FULLPLAIN]}$`);createToken("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`);createToken("LOOSE",`^${u[d.LOOSEPLAIN]}$`);createToken("GTLT","((?:<|>)?=?)");createToken("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);createToken("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`);createToken("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})`+`(?:\\.(${u[d.XRANGEIDENTIFIER]})`+`(?:\\.(${u[d.XRANGEIDENTIFIER]})`+`(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?`+`)?)?`);createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})`+`(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?`+`)?)?`);createToken("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`);createToken("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`);createToken("COERCEPLAIN",`${"(^|[^\\d])"+"(\\d{1,"}${n}})`+`(?:\\.(\\d{1,${n}}))?`+`(?:\\.(\\d{1,${n}}))?`);createToken("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`);createToken("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?`+`(?:$|[^\\d])`);createToken("COERCERTL",u[d.COERCE],true);createToken("COERCERTLFULL",u[d.COERCEFULL],true);createToken("LONETILDE","(?:~>?)");createToken("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,true);t.tildeTrimReplace="$1~";createToken("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`);createToken("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`);createToken("LONECARET","(?:\\^)");createToken("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,true);t.caretTrimReplace="$1^";createToken("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`);createToken("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`);createToken("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`);createToken("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`);createToken("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,true);t.comparatorTrimReplace="$1$2$3";createToken("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})`+`\\s+-\\s+`+`(${u[d.XRANGEPLAIN]})`+`\\s*$`);createToken("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})`+`\\s+-\\s+`+`(${u[d.XRANGEPLAINLOOSE]})`+`\\s*$`);createToken("STAR","(<|>)?=?\\s*\\*");createToken("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");createToken("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},39528:(e,t,r)=>{const n=r(63261);const gtr=(e,t,r)=>n(e,t,">",r);e.exports=gtr},83817:(e,t,r)=>{const n=r(41899);const intersects=(e,t,r)=>{e=new n(e,r);t=new n(t,r);return e.intersects(t,r)};e.exports=intersects},75844:(e,t,r)=>{const n=r(63261);const ltr=(e,t,r)=>n(e,t,"<",r);e.exports=ltr},36917:(e,t,r)=>{const n=r(25168);const i=r(41899);const maxSatisfying=(e,t,r)=>{let s=null;let o=null;let a=null;try{a=new i(t,r)}catch(e){return null}e.forEach((e=>{if(a.test(e)){if(!s||o.compare(e)===-1){s=e;o=new n(s,r)}}}));return s};e.exports=maxSatisfying},45790:(e,t,r)=>{const n=r(25168);const i=r(41899);const minSatisfying=(e,t,r)=>{let s=null;let o=null;let a=null;try{a=new i(t,r)}catch(e){return null}e.forEach((e=>{if(a.test(e)){if(!s||o.compare(e)===1){s=e;o=new n(s,r)}}}));return s};e.exports=minSatisfying},52478:(e,t,r)=>{const n=r(25168);const i=r(41899);const s=r(12670);const minVersion=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r)){return r}r=new n("0.0.0-0");if(e.test(r)){return r}r=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let o=null;i.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":if(t.prerelease.length===0){t.patch++}else{t.prerelease.push(0)}t.raw=t.format();case"":case">=":if(!o||s(t,o)){o=t}break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}));if(o&&(!r||s(r,o))){r=o}}if(r&&e.test(r)){return r}return null};e.exports=minVersion},63261:(e,t,r)=>{const n=r(25168);const i=r(15774);const{ANY:s}=i;const o=r(41899);const a=r(27764);const c=r(12670);const u=r(33414);const d=r(41364);const p=r(46179);const outside=(e,t,r,m)=>{e=new n(e,m);t=new o(t,m);let y,g,b,v,w;switch(r){case">":y=c;g=d;b=u;v=">";w=">=";break;case"<":y=u;g=p;b=c;v="<";w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,m)){return false}for(let r=0;r<t.set.length;++r){const n=t.set[r];let o=null;let a=null;n.forEach((e=>{if(e.semver===s){e=new i(">=0.0.0")}o=o||e;a=a||e;if(y(e.semver,o.semver,m)){o=e}else if(b(e.semver,a.semver,m)){a=e}}));if(o.operator===v||o.operator===w){return false}if((!a.operator||a.operator===v)&&g(e,a.semver)){return false}else if(a.operator===w&&b(e,a.semver)){return false}}return true};e.exports=outside},449:(e,t,r)=>{const n=r(27764);const i=r(72358);e.exports=(e,t,r)=>{const s=[];let o=null;let a=null;const c=e.sort(((e,t)=>i(e,t,r)));for(const e of c){const i=n(e,t,r);if(i){a=e;if(!o){o=e}}else{if(a){s.push([o,a])}a=null;o=null}}if(o){s.push([o,null])}const u=[];for(const[e,t]of s){if(e===t){u.push(e)}else if(!t&&e===c[0]){u.push("*")}else if(!t){u.push(`>=${e}`)}else if(e===c[0]){u.push(`<=${t}`)}else{u.push(`${e} - ${t}`)}}const d=u.join(" || ");const p=typeof t.raw==="string"?t.raw:String(t);return d.length<p.length?d:t}},53192:(e,t,r)=>{const n=r(41899);const i=r(15774);const{ANY:s}=i;const o=r(27764);const a=r(72358);const subset=(e,t,r={})=>{if(e===t){return true}e=new n(e,r);t=new n(t,r);let i=false;e:for(const n of e.set){for(const e of t.set){const t=simpleSubset(n,e,r);i=i||t!==null;if(t){continue e}}if(i){return false}}return true};const c=[new i(">=0.0.0-0")];const u=[new i(">=0.0.0")];const simpleSubset=(e,t,r)=>{if(e===t){return true}if(e.length===1&&e[0].semver===s){if(t.length===1&&t[0].semver===s){return true}else if(r.includePrerelease){e=c}else{e=u}}if(t.length===1&&t[0].semver===s){if(r.includePrerelease){return true}else{t=u}}const n=new Set;let i,d;for(const t of e){if(t.operator===">"||t.operator===">="){i=higherGT(i,t,r)}else if(t.operator==="<"||t.operator==="<="){d=lowerLT(d,t,r)}else{n.add(t.semver)}}if(n.size>1){return null}let p;if(i&&d){p=a(i.semver,d.semver,r);if(p>0){return null}else if(p===0&&(i.operator!==">="||d.operator!=="<=")){return null}}for(const e of n){if(i&&!o(e,String(i),r)){return null}if(d&&!o(e,String(d),r)){return null}for(const n of t){if(!o(e,String(n),r)){return false}}return true}let m,y;let g,b;let v=d&&!r.includePrerelease&&d.semver.prerelease.length?d.semver:false;let w=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:false;if(v&&v.prerelease.length===1&&d.operator==="<"&&v.prerelease[0]===0){v=false}for(const e of t){b=b||e.operator===">"||e.operator===">=";g=g||e.operator==="<"||e.operator==="<=";if(i){if(w){if(e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===w.major&&e.semver.minor===w.minor&&e.semver.patch===w.patch){w=false}}if(e.operator===">"||e.operator===">="){m=higherGT(i,e,r);if(m===e&&m!==i){return false}}else if(i.operator===">="&&!o(i.semver,String(e),r)){return false}}if(d){if(v){if(e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch){v=false}}if(e.operator==="<"||e.operator==="<="){y=lowerLT(d,e,r);if(y===e&&y!==d){return false}}else if(d.operator==="<="&&!o(d.semver,String(e),r)){return false}}if(!e.operator&&(d||i)&&p!==0){return false}}if(i&&g&&!d&&p!==0){return false}if(d&&b&&!i&&p!==0){return false}if(w||v){return false}return true};const higherGT=(e,t,r)=>{if(!e){return t}const n=a(e.semver,t.semver,r);return n>0?e:n<0?t:t.operator===">"&&e.operator===">="?t:e};const lowerLT=(e,t,r)=>{if(!e){return t}const n=a(e.semver,t.semver,r);return n<0?e:n>0?t:t.operator==="<"&&e.operator==="<="?t:e};e.exports=subset},24908:(e,t,r)=>{const n=r(41899);const toComparators=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));e.exports=toComparators},92903:(e,t,r)=>{const n=r(41899);const validRange=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}};e.exports=validRange},22421:(e,t,r)=>{"use strict";const n=r(94523);e.exports=(e="")=>{const t=e.match(n);if(!t){return null}const[r,i]=t[0].replace(/#! ?/,"").split(" ");const s=r.split("/").pop();if(s==="env"){return i}return i?`${s} ${i}`:s}},94523:e=>{"use strict";e.exports=/^#!(.*)/},794:(e,t,r)=>{var n=global.process;const processOk=function(e){return e&&typeof e==="object"&&typeof e.removeListener==="function"&&typeof e.emit==="function"&&typeof e.reallyExit==="function"&&typeof e.listeners==="function"&&typeof e.kill==="function"&&typeof e.pid==="number"&&typeof e.on==="function"};if(!processOk(n)){e.exports=function(){return function(){}}}else{var i=r(39491);var s=r(47761);var o=/^win/i.test(n.platform);var a=r(82361);if(typeof a!=="function"){a=a.EventEmitter}var c;if(n.__signal_exit_emitter__){c=n.__signal_exit_emitter__}else{c=n.__signal_exit_emitter__=new a;c.count=0;c.emitted={}}if(!c.infinite){c.setMaxListeners(Infinity);c.infinite=true}e.exports=function(e,t){if(!processOk(global.process)){return function(){}}i.equal(typeof e,"function","a callback must be provided for exit handler");if(m===false){y()}var r="exit";if(t&&t.alwaysLast){r="afterexit"}var remove=function(){c.removeListener(r,e);if(c.listeners("exit").length===0&&c.listeners("afterexit").length===0){u()}};c.on(r,e);return remove};var u=function unload(){if(!m||!processOk(global.process)){return}m=false;s.forEach((function(e){try{n.removeListener(e,p[e])}catch(e){}}));n.emit=v;n.reallyExit=g;c.count-=1};e.exports.unload=u;var d=function emit(e,t,r){if(c.emitted[e]){return}c.emitted[e]=true;c.emit(e,t,r)};var p={};s.forEach((function(e){p[e]=function listener(){if(!processOk(global.process)){return}var t=n.listeners(e);if(t.length===c.count){u();d("exit",null,e);d("afterexit",null,e);if(o&&e==="SIGHUP"){e="SIGINT"}n.kill(n.pid,e)}}}));e.exports.signals=function(){return s};var m=false;var y=function load(){if(m||!processOk(global.process)){return}m=true;c.count+=1;s=s.filter((function(e){try{n.on(e,p[e]);return true}catch(e){return false}}));n.emit=w;n.reallyExit=b};e.exports.load=y;var g=n.reallyExit;var b=function processReallyExit(e){if(!processOk(global.process)){return}n.exitCode=e||0;d("exit",n.exitCode,null);d("afterexit",n.exitCode,null);g.call(n,n.exitCode)};var v=n.emit;var w=function processEmit(e,t){if(e==="exit"&&processOk(global.process)){if(t!==undefined){n.exitCode=t}var r=v.apply(this,arguments);d("exit",n.exitCode,null);d("afterexit",n.exitCode,null);return r}else{return v.apply(this,arguments)}}}},47761:e=>{e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];if(process.platform!=="win32"){e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT")}if(process.platform==="linux"){e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")}},66944:(e,t,r)=>{var n=r(45416);var i=r(86847);var s=r(26393);var o=r(69926)("socket.io-client");e.exports=t=lookup;var a=t.managers={};function lookup(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var r=n(e);var i=r.source;var c=r.id;var u=r.path;var d=a[c]&&u in a[c].nsps;var p=t.forceNew||t["force new connection"]||false===t.multiplex||d;var m;if(p){o("ignoring socket cache for %s",i);m=s(i,t)}else{if(!a[c]){o("new io instance for %s",i);a[c]=s(i,t)}m=a[c]}if(r.query&&!t.query){t.query=r.query}return m.socket(r.path,t)}t.protocol=i.protocol;t.connect=lookup;t.Manager=r(26393);t.Socket=r(88211)},26393:(e,t,r)=>{var n=r(47729);var i=r(88211);var s=r(40138);var o=r(86847);var a=r(88297);var c=r(83508);var u=r(69926)("socket.io-client:manager");var d=r(42094);var p=r(22065);var m=Object.prototype.hasOwnProperty;e.exports=Manager;function Manager(e,t){if(!(this instanceof Manager))return new Manager(e,t);if(e&&"object"===typeof e){t=e;e=undefined}t=t||{};t.path=t.path||"/socket.io";this.nsps={};this.subs=[];this.opts=t;this.reconnection(t.reconnection!==false);this.reconnectionAttempts(t.reconnectionAttempts||Infinity);this.reconnectionDelay(t.reconnectionDelay||1e3);this.reconnectionDelayMax(t.reconnectionDelayMax||5e3);this.randomizationFactor(t.randomizationFactor||.5);this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==t.timeout?2e4:t.timeout);this.readyState="closed";this.uri=e;this.connecting=[];this.lastPing=null;this.encoding=false;this.packetBuffer=[];var r=t.parser||o;this.encoder=new r.Encoder;this.decoder=new r.Decoder;this.autoConnect=t.autoConnect!==false;if(this.autoConnect)this.open()}Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps){if(m.call(this.nsps,e)){this.nsps[e].emit.apply(this.nsps[e],arguments)}}};Manager.prototype.updateSocketIds=function(){for(var e in this.nsps){if(m.call(this.nsps,e)){this.nsps[e].id=this.generateId(e)}}};Manager.prototype.generateId=function(e){return(e==="/"?"":e+"#")+this.engine.id};s(Manager.prototype);Manager.prototype.reconnection=function(e){if(!arguments.length)return this._reconnection;this._reconnection=!!e;return this};Manager.prototype.reconnectionAttempts=function(e){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=e;return this};Manager.prototype.reconnectionDelay=function(e){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=e;this.backoff&&this.backoff.setMin(e);return this};Manager.prototype.randomizationFactor=function(e){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=e;this.backoff&&this.backoff.setJitter(e);return this};Manager.prototype.reconnectionDelayMax=function(e){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=e;this.backoff&&this.backoff.setMax(e);return this};Manager.prototype.timeout=function(e){if(!arguments.length)return this._timeout;this._timeout=e;return this};Manager.prototype.maybeReconnectOnOpen=function(){if(!this.reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect()}};Manager.prototype.open=Manager.prototype.connect=function(e,t){u("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;u("opening %s",this.uri);this.engine=n(this.uri,this.opts);var r=this.engine;var i=this;this.readyState="opening";this.skipReconnect=false;var s=a(r,"open",(function(){i.onopen();e&&e()}));var o=a(r,"error",(function(t){u("connect_error");i.cleanup();i.readyState="closed";i.emitAll("connect_error",t);if(e){var r=new Error("Connection error");r.data=t;e(r)}else{i.maybeReconnectOnOpen()}}));if(false!==this._timeout){var c=this._timeout;u("connect attempt will timeout after %d",c);if(c===0){s.destroy()}var d=setTimeout((function(){u("connect attempt timed out after %d",c);s.destroy();r.close();r.emit("error","timeout");i.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(d)}})}this.subs.push(s);this.subs.push(o);return this};Manager.prototype.onopen=function(){u("open");this.cleanup();this.readyState="open";this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata")));this.subs.push(a(e,"ping",c(this,"onping")));this.subs.push(a(e,"pong",c(this,"onpong")));this.subs.push(a(e,"error",c(this,"onerror")));this.subs.push(a(e,"close",c(this,"onclose")));this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))};Manager.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Manager.prototype.ondata=function(e){this.decoder.add(e)};Manager.prototype.ondecoded=function(e){this.emit("packet",e)};Manager.prototype.onerror=function(e){u("error",e);this.emitAll("error",e)};Manager.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new i(this,e,t);this.nsps[e]=r;var n=this;r.on("connecting",onConnecting);r.on("connect",(function(){r.id=n.generateId(e)}));if(this.autoConnect){onConnecting()}}function onConnecting(){if(!~d(n.connecting,r)){n.connecting.push(r)}}return r};Manager.prototype.destroy=function(e){var t=d(this.connecting,e);if(~t)this.connecting.splice(t,1);if(this.connecting.length)return;this.close()};Manager.prototype.packet=function(e){u("writing packet %j",e);var t=this;if(e.query&&e.type===0)e.nsp+="?"+e.query;if(!t.encoding){t.encoding=true;this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++){t.engine.write(r[n],e.options)}t.encoding=false;t.processPacketQueue()}))}else{t.packetBuffer.push(e)}};Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}};Manager.prototype.cleanup=function(){u("cleanup");var e=this.subs.length;for(var t=0;t<e;t++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[];this.encoding=false;this.lastPing=null;this.decoder.destroy()};Manager.prototype.close=Manager.prototype.disconnect=function(){u("disconnect");this.skipReconnect=true;this.reconnecting=false;if("opening"===this.readyState){this.cleanup()}this.backoff.reset();this.readyState="closed";if(this.engine)this.engine.close()};Manager.prototype.onclose=function(e){u("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",e);if(this._reconnection&&!this.skipReconnect){this.reconnect()}};Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts){u("reconnect failed");this.backoff.reset();this.emitAll("reconnect_failed");this.reconnecting=false}else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t);this.reconnecting=true;var r=setTimeout((function(){if(e.skipReconnect)return;u("attempting reconnect");e.emitAll("reconnect_attempt",e.backoff.attempts);e.emitAll("reconnecting",e.backoff.attempts);if(e.skipReconnect)return;e.open((function(t){if(t){u("reconnect attempt error");e.reconnecting=false;e.reconnect();e.emitAll("reconnect_error",t.data)}else{u("reconnect success");e.onreconnect()}}))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}};Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=false;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",e)}},88297:e=>{e.exports=on;function on(e,t,r){e.on(t,r);return{destroy:function(){e.removeListener(t,r)}}}},88211:(e,t,r)=>{var n=r(86847);var i=r(40138);var s=r(1160);var o=r(88297);var a=r(83508);var c=r(69926)("socket.io-client:socket");var u=r(58175);var d=r(27030);e.exports=t=Socket;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};var m=i.prototype.emit;function Socket(e,t,r){this.io=e;this.nsp=t;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=false;this.disconnected=true;this.flags={};if(r&&r.query){this.query=r.query}if(this.io.autoConnect)this.open()}i(Socket.prototype);Socket.prototype.subEvents=function(){if(this.subs)return;var e=this.io;this.subs=[o(e,"open",a(this,"onopen")),o(e,"packet",a(this,"onpacket")),o(e,"close",a(this,"onclose"))]};Socket.prototype.open=Socket.prototype.connect=function(){if(this.connected)return this;this.subEvents();if(!this.io.reconnecting)this.io.open();if("open"===this.io.readyState)this.onopen();this.emit("connecting");return this};Socket.prototype.send=function(){var e=s(arguments);e.unshift("message");this.emit.apply(this,e);return this};Socket.prototype.emit=function(e){if(p.hasOwnProperty(e)){m.apply(this,arguments);return this}var t=s(arguments);var r={type:(this.flags.binary!==undefined?this.flags.binary:d(t))?n.BINARY_EVENT:n.EVENT,data:t};r.options={};r.options.compress=!this.flags||false!==this.flags.compress;if("function"===typeof t[t.length-1]){c("emitting packet with ack id %d",this.ids);this.acks[this.ids]=t.pop();r.id=this.ids++}if(this.connected){this.packet(r)}else{this.sendBuffer.push(r)}this.flags={};return this};Socket.prototype.packet=function(e){e.nsp=this.nsp;this.io.packet(e)};Socket.prototype.onopen=function(){c("transport is open - connecting");if("/"!==this.nsp){if(this.query){var e=typeof this.query==="object"?u.encode(this.query):this.query;c("sending connect packet with query %s",e);this.packet({type:n.CONNECT,query:e})}else{this.packet({type:n.CONNECT})}}};Socket.prototype.onclose=function(e){c("close (%s)",e);this.connected=false;this.disconnected=true;delete this.id;this.emit("disconnect",e)};Socket.prototype.onpacket=function(e){var t=e.nsp===this.nsp;var r=e.type===n.ERROR&&e.nsp==="/";if(!t&&!r)return;switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(e);break;case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:this.onack(e);break;case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data);break}};Socket.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t);if(null!=e.id){c("attaching ack callback to event");t.push(this.ack(e.id))}if(this.connected){m.apply(this,t)}else{this.receiveBuffer.push(t)}};Socket.prototype.ack=function(e){var t=this;var r=false;return function(){if(r)return;r=true;var i=s(arguments);c("sending ack %j",i);t.packet({type:d(i)?n.BINARY_ACK:n.ACK,id:e,data:i})}};Socket.prototype.onack=function(e){var t=this.acks[e.id];if("function"===typeof t){c("calling ack %s with %j",e.id,e.data);t.apply(this,e.data);delete this.acks[e.id]}else{c("bad ack %s",e.id)}};Socket.prototype.onconnect=function(){this.connected=true;this.disconnected=false;this.emitBuffered();this.emit("connect")};Socket.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++){m.apply(this,this.receiveBuffer[e])}this.receiveBuffer=[];for(e=0;e<this.sendBuffer.length;e++){this.packet(this.sendBuffer[e])}this.sendBuffer=[]};Socket.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};Socket.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++){this.subs[e].destroy()}this.subs=null}this.io.destroy(this)};Socket.prototype.close=Socket.prototype.disconnect=function(){if(this.connected){c("performing disconnect (%s)",this.nsp);this.packet({type:n.DISCONNECT})}this.destroy();if(this.connected){this.onclose("io client disconnect")}return this};Socket.prototype.compress=function(e){this.flags.compress=e;return this};Socket.prototype.binary=function(e){this.flags.binary=e;return this}},45416:(e,t,r)=>{var n=r(81505);var i=r(69926)("socket.io-client:url");e.exports=url;function url(e,t){var r=e;t=t||typeof location!=="undefined"&&location;if(null==e)e=t.protocol+"//"+t.host;if("string"===typeof e){if("/"===e.charAt(0)){if("/"===e.charAt(1)){e=t.protocol+e}else{e=t.host+e}}if(!/^(https?|wss?):\/\//.test(e)){i("protocol-less url %s",e);if("undefined"!==typeof t){e=t.protocol+"//"+e}else{e="https://"+e}}i("parse %s",e);r=n(e)}if(!r.port){if(/^(http|ws)$/.test(r.protocol)){r.port="80"}else if(/^(http|ws)s$/.test(r.protocol)){r.port="443"}}r.path=r.path||"/";var s=r.host.indexOf(":")!==-1;var o=s?"["+r.host+"]":r.host;r.id=r.protocol+"://"+o+":"+r.port;r.href=r.protocol+"://"+o+(t&&t.port===r.port?"":":"+r.port);return r}},58801:(e,t,r)=>{t=e.exports=r(30011);t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function formatArgs(e){var r=this.useColors;e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff);if(!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0;var s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){if("%%"===e)return;i++;if("%c"===e){s=i}}));e.splice(s,0,n)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{if(null==e){t.storage.removeItem("debug")}else{t.storage.debug=e}}catch(e){}}function load(){var e;try{e=t.storage.debug}catch(e){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}t.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},30011:(e,t,r)=>{t=e.exports=createDebug.debug=createDebug["default"]=createDebug;t.coerce=coerce;t.disable=disable;t.enable=enable;t.enabled=enabled;t.humanize=r(17220);t.instances=[];t.names=[];t.skips=[];t.formatters={};function selectColor(e){var r=0,n;for(n in e){r=(r<<5)-r+e.charCodeAt(n);r|=0}return t.colors[Math.abs(r)%t.colors.length]}function createDebug(e){var r;function debug(){if(!debug.enabled)return;var e=debug;var n=+new Date;var i=n-(r||n);e.diff=i;e.prev=r;e.curr=n;r=n;var s=new Array(arguments.length);for(var o=0;o<s.length;o++){s[o]=arguments[o]}s[0]=t.coerce(s[0]);if("string"!==typeof s[0]){s.unshift("%O")}var a=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if(r==="%%")return r;a++;var i=t.formatters[n];if("function"===typeof i){var o=s[a];r=i.call(e,o);s.splice(a,1);a--}return r}));t.formatArgs.call(e,s);var c=debug.log||t.log||console.log.bind(console);c.apply(e,s)}debug.namespace=e;debug.enabled=t.enabled(e);debug.useColors=t.useColors();debug.color=selectColor(e);debug.destroy=destroy;if("function"===typeof t.init){t.init(debug)}t.instances.push(debug);return debug}function destroy(){var e=t.instances.indexOf(this);if(e!==-1){t.instances.splice(e,1);return true}else{return false}}function enable(e){t.save(e);t.names=[];t.skips=[];var r;var n=(typeof e==="string"?e:"").split(/[\s,]+/);var i=n.length;for(r=0;r<i;r++){if(!n[r])continue;e=n[r].replace(/\*/g,".*?");if(e[0]==="-"){t.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{t.names.push(new RegExp("^"+e+"$"))}}for(r=0;r<t.instances.length;r++){var s=t.instances[r];s.enabled=t.enabled(s.namespace)}}function disable(){t.enable("")}function enabled(e){if(e[e.length-1]==="*"){return true}var r,n;for(r=0,n=t.skips.length;r<n;r++){if(t.skips[r].test(e)){return false}}for(r=0,n=t.names.length;r<n;r++){if(t.names[r].test(e)){return true}}return false}function coerce(e){if(e instanceof Error)return e.stack||e.message;return e}},69926:(e,t,r)=>{if(typeof process==="undefined"||process.type==="renderer"){e.exports=r(58801)}else{e.exports=r(2715)}},2715:(e,t,r)=>{var n=r(76224);var i=r(73837);t=e.exports=r(30011);t.init=init;t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.colors=[6,2,3,4,5,1];try{var s=r(68337);if(s&&s.level>=2){t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(e){}t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}));var n=process.env[t];if(/^(yes|on|true|enabled)$/i.test(n))n=true;else if(/^(no|off|false|disabled)$/i.test(n))n=false;else if(n==="null")n=null;else n=Number(n);e[r]=n;return e}),{});function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)}t.formatters.o=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")};t.formatters.O=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts)};function formatArgs(e){var r=this.namespace;var n=this.useColors;if(n){var i=this.color;var s="[3"+(i<8?i:"8;5;"+i);var o="  "+s+";1m"+r+" "+"[0m";e[0]=o+e[0].split("\n").join("\n"+o);e.push(s+"m+"+t.humanize(this.diff)+"[0m")}else{e[0]=getDate()+r+" "+e[0]}}function getDate(){if(t.inspectOpts.hideDate){return""}else{return(new Date).toISOString()+" "}}function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")}function save(e){if(null==e){delete process.env.DEBUG}else{process.env.DEBUG=e}}function load(){return process.env.DEBUG}function init(e){e.inspectOpts={};var r=Object.keys(t.inspectOpts);for(var n=0;n<r.length;n++){e.inspectOpts[r[n]]=t.inspectOpts[r[n]]}}t.enable(load())},17220:e=>{var t=1e3;var r=t*60;var n=r*60;var i=n*24;var s=i*365.25;e.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return parse(e)}else if(r==="number"&&isNaN(e)===false){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!o){return}var a=parseFloat(o[1]);var c=(o[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return undefined}}function fmtShort(e){if(e>=i){return Math.round(e/i)+"d"}if(e>=n){return Math.round(e/n)+"h"}if(e>=r){return Math.round(e/r)+"m"}if(e>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){return plural(e,i,"day")||plural(e,n,"hour")||plural(e,r,"minute")||plural(e,t,"second")||e+" ms"}function plural(e,t,r){if(e<t){return}if(e<t*1.5){return Math.floor(e/t)+" "+r}return Math.ceil(e/t)+" "+r+"s"}},11969:(e,t,r)=>{var n=r(31534);var i=r(42144);var s=Object.prototype.toString;var o=typeof Blob==="function"||typeof Blob!=="undefined"&&s.call(Blob)==="[object BlobConstructor]";var a=typeof File==="function"||typeof File!=="undefined"&&s.call(File)==="[object FileConstructor]";t.deconstructPacket=function(e){var t=[];var r=e.data;var n=e;n.data=_deconstructPacket(r,t);n.attachments=t.length;return{packet:n,buffers:t}};function _deconstructPacket(e,t){if(!e)return e;if(i(e)){var r={_placeholder:true,num:t.length};t.push(e);return r}else if(n(e)){var s=new Array(e.length);for(var o=0;o<e.length;o++){s[o]=_deconstructPacket(e[o],t)}return s}else if(typeof e==="object"&&!(e instanceof Date)){var s={};for(var a in e){s[a]=_deconstructPacket(e[a],t)}return s}return e}t.reconstructPacket=function(e,t){e.data=_reconstructPacket(e.data,t);e.attachments=undefined;return e};function _reconstructPacket(e,t){if(!e)return e;if(e&&e._placeholder===true){var r=typeof e.num==="number"&&e.num>=0&&e.num<t.length;if(r){return t[e.num]}else{throw new Error("illegal attachments")}}else if(n(e)){for(var i=0;i<e.length;i++){e[i]=_reconstructPacket(e[i],t)}}else if(typeof e==="object"){for(var s in e){e[s]=_reconstructPacket(e[s],t)}}return e}t.removeBlobs=function(e,t){function _removeBlobs(e,c,u){if(!e)return e;if(o&&e instanceof Blob||a&&e instanceof File){r++;var d=new FileReader;d.onload=function(){if(u){u[c]=this.result}else{s=this.result}if(!--r){t(s)}};d.readAsArrayBuffer(e)}else if(n(e)){for(var p=0;p<e.length;p++){_removeBlobs(e[p],p,e)}}else if(typeof e==="object"&&!i(e)){for(var m in e){_removeBlobs(e[m],m,e)}}}var r=0;var s=e;_removeBlobs(s);if(!r){t(s)}}},86847:(e,t,r)=>{var n=r(27627)("socket.io-parser");var i=r(40138);var s=r(11969);var o=r(31534);var a=r(42144);t.protocol=4;t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"];t.CONNECT=0;t.DISCONNECT=1;t.EVENT=2;t.ACK=3;t.ERROR=4;t.BINARY_EVENT=5;t.BINARY_ACK=6;t.Encoder=Encoder;t.Decoder=Decoder;function Encoder(){}var c=t.ERROR+'"encode error"';Encoder.prototype.encode=function(e,r){n("encoding packet %j",e);if(t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type){encodeAsBinary(e,r)}else{var i=encodeAsString(e);r([i])}};function encodeAsString(e){var r=""+e.type;if(t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type){r+=e.attachments+"-"}if(e.nsp&&"/"!==e.nsp){r+=e.nsp+","}if(null!=e.id){r+=e.id}if(null!=e.data){var i=tryStringify(e.data);if(i!==false){r+=i}else{return c}}n("encoded %j as %s",e,r);return r}function tryStringify(e){try{return JSON.stringify(e)}catch(e){return false}}function encodeAsBinary(e,t){function writeEncoding(e){var r=s.deconstructPacket(e);var n=encodeAsString(r.packet);var i=r.buffers;i.unshift(n);t(i)}s.removeBlobs(e,writeEncoding)}function Decoder(){this.reconstructor=null}i(Decoder.prototype);Decoder.prototype.add=function(e){var r;if(typeof e==="string"){if(this.reconstructor){throw new Error("got plaintext data when reconstructing a packet")}r=decodeString(e);if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){this.reconstructor=new BinaryReconstructor(r);if(this.reconstructor.reconPack.attachments===0){this.emit("decoded",r)}}else{this.emit("decoded",r)}}else if(a(e)||e.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{r=this.reconstructor.takeBinaryData(e);if(r){this.reconstructor=null;this.emit("decoded",r)}}}else{throw new Error("Unknown type: "+e)}};function isPayloadValid(e,t){switch(e){case 0:return typeof t==="object";case 1:return t===undefined;case 4:return typeof t==="string"||typeof t==="object";case 2:case 5:return o(t)&&(typeof t[0]==="string"||typeof t[0]==="number");case 3:case 6:return o(t)}}function decodeString(e){var r=0;var i={type:Number(e.charAt(0))};if(null==t.types[i.type]){return error("unknown packet type "+i.type)}if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){var s=r+1;while(e.charAt(++r)!=="-"&&r!=e.length){}var o=e.substring(s,r);if(o!=Number(o)||e.charAt(r)!=="-"){throw new Error("Illegal attachments")}i.attachments=Number(o)}if("/"===e.charAt(r+1)){var s=r+1;while(++r){var a=e.charAt(r);if(","===a)break;if(r===e.length)break}i.nsp=e.substring(s,r)}else{i.nsp="/"}var c=e.charAt(r+1);if(""!==c&&Number(c)==c){var s=r+1;while(++r){var a=e.charAt(r);if(null==a||Number(a)!=a){--r;break}if(r===e.length)break}i.id=Number(e.substring(s,r+1))}if(e.charAt(++r)){var u=tryParse(e.substr(r));if(isPayloadValid(i.type,u)){i.data=u}else{throw new Error("invalid payload")}}n("decoded %s as %j",e,i);return i}function tryParse(e){try{return JSON.parse(e)}catch(e){return false}}Decoder.prototype.destroy=function(){if(this.reconstructor){this.reconstructor.finishedReconstruction()}};function BinaryReconstructor(e){this.reconPack=e;this.buffers=[]}BinaryReconstructor.prototype.takeBinaryData=function(e){this.buffers.push(e);if(this.buffers.length===this.reconPack.attachments){var t=s.reconstructPacket(this.reconPack,this.buffers);this.finishedReconstruction();return t}return null};BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]};function error(e){return{type:t.ERROR,data:"parser error: "+e}}},42144:e=>{e.exports=isBuf;var t=typeof Buffer==="function"&&typeof Buffer.isBuffer==="function";var r=typeof ArrayBuffer==="function";var isView=function(e){return typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function isBuf(e){return t&&Buffer.isBuffer(e)||r&&(e instanceof ArrayBuffer||isView(e))}},89814:(e,t,r)=>{t=e.exports=r(21738);t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function formatArgs(e){var r=this.useColors;e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff);if(!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0;var s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){if("%%"===e)return;i++;if("%c"===e){s=i}}));e.splice(s,0,n)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{if(null==e){t.storage.removeItem("debug")}else{t.storage.debug=e}}catch(e){}}function load(){var e;try{e=t.storage.debug}catch(e){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}t.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},21738:(e,t,r)=>{t=e.exports=createDebug.debug=createDebug["default"]=createDebug;t.coerce=coerce;t.disable=disable;t.enable=enable;t.enabled=enabled;t.humanize=r(88309);t.instances=[];t.names=[];t.skips=[];t.formatters={};function selectColor(e){var r=0,n;for(n in e){r=(r<<5)-r+e.charCodeAt(n);r|=0}return t.colors[Math.abs(r)%t.colors.length]}function createDebug(e){var r;function debug(){if(!debug.enabled)return;var e=debug;var n=+new Date;var i=n-(r||n);e.diff=i;e.prev=r;e.curr=n;r=n;var s=new Array(arguments.length);for(var o=0;o<s.length;o++){s[o]=arguments[o]}s[0]=t.coerce(s[0]);if("string"!==typeof s[0]){s.unshift("%O")}var a=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if(r==="%%")return r;a++;var i=t.formatters[n];if("function"===typeof i){var o=s[a];r=i.call(e,o);s.splice(a,1);a--}return r}));t.formatArgs.call(e,s);var c=debug.log||t.log||console.log.bind(console);c.apply(e,s)}debug.namespace=e;debug.enabled=t.enabled(e);debug.useColors=t.useColors();debug.color=selectColor(e);debug.destroy=destroy;if("function"===typeof t.init){t.init(debug)}t.instances.push(debug);return debug}function destroy(){var e=t.instances.indexOf(this);if(e!==-1){t.instances.splice(e,1);return true}else{return false}}function enable(e){t.save(e);t.names=[];t.skips=[];var r;var n=(typeof e==="string"?e:"").split(/[\s,]+/);var i=n.length;for(r=0;r<i;r++){if(!n[r])continue;e=n[r].replace(/\*/g,".*?");if(e[0]==="-"){t.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{t.names.push(new RegExp("^"+e+"$"))}}for(r=0;r<t.instances.length;r++){var s=t.instances[r];s.enabled=t.enabled(s.namespace)}}function disable(){t.enable("")}function enabled(e){if(e[e.length-1]==="*"){return true}var r,n;for(r=0,n=t.skips.length;r<n;r++){if(t.skips[r].test(e)){return false}}for(r=0,n=t.names.length;r<n;r++){if(t.names[r].test(e)){return true}}return false}function coerce(e){if(e instanceof Error)return e.stack||e.message;return e}},27627:(e,t,r)=>{if(typeof process==="undefined"||process.type==="renderer"){e.exports=r(89814)}else{e.exports=r(48146)}},48146:(e,t,r)=>{var n=r(76224);var i=r(73837);t=e.exports=r(21738);t.init=init;t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.colors=[6,2,3,4,5,1];try{var s=r(68337);if(s&&s.level>=2){t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(e){}t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}));var n=process.env[t];if(/^(yes|on|true|enabled)$/i.test(n))n=true;else if(/^(no|off|false|disabled)$/i.test(n))n=false;else if(n==="null")n=null;else n=Number(n);e[r]=n;return e}),{});function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)}t.formatters.o=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")};t.formatters.O=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts)};function formatArgs(e){var r=this.namespace;var n=this.useColors;if(n){var i=this.color;var s="[3"+(i<8?i:"8;5;"+i);var o="  "+s+";1m"+r+" "+"[0m";e[0]=o+e[0].split("\n").join("\n"+o);e.push(s+"m+"+t.humanize(this.diff)+"[0m")}else{e[0]=getDate()+r+" "+e[0]}}function getDate(){if(t.inspectOpts.hideDate){return""}else{return(new Date).toISOString()+" "}}function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")}function save(e){if(null==e){delete process.env.DEBUG}else{process.env.DEBUG=e}}function load(){return process.env.DEBUG}function init(e){e.inspectOpts={};var r=Object.keys(t.inspectOpts);for(var n=0;n<r.length;n++){e.inspectOpts[r[n]]=t.inspectOpts[r[n]]}}t.enable(load())},88309:e=>{var t=1e3;var r=t*60;var n=r*60;var i=n*24;var s=i*365.25;e.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return parse(e)}else if(r==="number"&&isNaN(e)===false){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!o){return}var a=parseFloat(o[1]);var c=(o[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return undefined}}function fmtShort(e){if(e>=i){return Math.round(e/i)+"d"}if(e>=n){return Math.round(e/n)+"h"}if(e>=r){return Math.round(e/r)+"m"}if(e>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){return plural(e,i,"day")||plural(e,n,"hour")||plural(e,r,"minute")||plural(e,t,"second")||e+" ms"}function plural(e,t,r){if(e<t){return}if(e<t*1.5){return Math.floor(e/t)+" "+r}return Math.ceil(e/t)+" "+r+"s"}},69162:e=>{"use strict";e.exports=e=>{const t=typeof e==="string"?"\n":"\n".charCodeAt();const r=typeof e==="string"?"\r":"\r".charCodeAt();if(e[e.length-1]===t){e=e.slice(0,e.length-1)}if(e[e.length-1]===r){e=e.slice(0,e.length-1)}return e}},43389:(e,t,r)=>{"use strict";const n=r(32081).exec;const i=r(32081).execSync;const s=r(79494);let o=process.platform;const a=o==="linux"||o==="android";const c=o==="darwin";const u=o==="win32";const d=o==="freebsd";const p=o==="openbsd";const m=o==="netbsd";const y=o==="sunos";function parseAudioType(e,t,r){e=e.toLowerCase();let n="";if(e.indexOf("input")>=0){n="Microphone"}if(e.indexOf("display audio")>=0){n="Speaker"}if(e.indexOf("speak")>=0){n="Speaker"}if(e.indexOf("laut")>=0){n="Speaker"}if(e.indexOf("loud")>=0){n="Speaker"}if(e.indexOf("head")>=0){n="Headset"}if(e.indexOf("mic")>=0){n="Microphone"}if(e.indexOf("mikr")>=0){n="Microphone"}if(e.indexOf("phone")>=0){n="Phone"}if(e.indexOf("controll")>=0){n="Controller"}if(e.indexOf("line o")>=0){n="Line Out"}if(e.indexOf("digital o")>=0){n="Digital Out"}if(e.indexOf("smart sound technology")>=0){n="Digital Signal Processor"}if(e.indexOf("high definition audio")>=0){n="Sound Driver"}if(!n&&r){n="Speaker"}else if(!n&&t){n="Microphone"}return n}function getLinuxAudioPci(){let e="lspci -v 2>/dev/null";let t=[];try{const r=i(e,s.execOptsLinux).toString().split("\n\n");r.forEach((e=>{const r=e.split("\n");if(r&&r.length&&r[0].toLowerCase().indexOf("audio")>=0){const e={};e.slotId=r[0].split(" ")[0];e.driver=s.getValue(r,"Kernel driver in use",":",true)||s.getValue(r,"Kernel modules",":",true);t.push(e)}}));return t}catch(e){return t}}function parseLinuxAudioPciMM(e,t){const r={};const n=s.getValue(e,"Slot");const i=t.filter((function(e){return e.slotId===n}));r.id=n;r.name=s.getValue(e,"SDevice");r.manufacturer=s.getValue(e,"SVendor");r.revision=s.getValue(e,"Rev");r.driver=i&&i.length===1&&i[0].driver?i[0].driver:"";r.default=null;r.channel="PCIe";r.type=parseAudioType(r.name,null,null);r.in=null;r.out=null;r.status="online";return r}function parseDarwinChannel(e){let t="";if(e.indexOf("builtin")>=0){t="Built-In"}if(e.indexOf("extern")>=0){t="Audio-Jack"}if(e.indexOf("hdmi")>=0){t="HDMI"}if(e.indexOf("displayport")>=0){t="Display-Port"}if(e.indexOf("usb")>=0){t="USB"}if(e.indexOf("pci")>=0){t="PCIe"}return t}function parseDarwinAudio(e,t){const r={};const n=((e.coreaudio_device_transport||"")+" "+(e._name||"")).toLowerCase();r.id=t;r.name=e._name;r.manufacturer=e.coreaudio_device_manufacturer;r.revision=null;r.driver=null;r.default=!!(e.coreaudio_default_audio_input_device||"")||!!(e.coreaudio_default_audio_output_device||"");r.channel=parseDarwinChannel(n);r.type=parseAudioType(r.name,!!(e.coreaudio_device_input||""),!!(e.coreaudio_device_output||""));r.in=!!(e.coreaudio_device_input||"");r.out=!!(e.coreaudio_device_output||"");r.status="online";return r}function parseWindowsAudio(e){const t={};const r=s.getValue(e,"StatusInfo",":");t.id=s.getValue(e,"DeviceID",":");t.name=s.getValue(e,"name",":");t.manufacturer=s.getValue(e,"manufacturer",":");t.revision=null;t.driver=null;t.default=null;t.channel=null;t.type=parseAudioType(t.name,null,null);t.in=null;t.out=null;t.status=r;return t}function audio(e){return new Promise((t=>{process.nextTick((()=>{let r=[];if(a||d||p||m){let i="lspci -vmm 2>/dev/null";n(i,(function(n,i){if(!n){const e=getLinuxAudioPci();const t=i.toString().split("\n\n");t.forEach((t=>{const n=t.split("\n");if(s.getValue(n,"class",":",true).toLowerCase().indexOf("audio")>=0){const t=parseLinuxAudioPciMM(n,e);r.push(t)}}))}if(e){e(r)}t(r)}))}if(c){let i="system_profiler SPAudioDataType -json";n(i,(function(n,i){if(!n){try{const e=JSON.parse(i.toString());if(e.SPAudioDataType&&e.SPAudioDataType.length&&e.SPAudioDataType[0]&&e.SPAudioDataType[0]["_items"]&&e.SPAudioDataType[0]["_items"].length){for(let t=0;t<e.SPAudioDataType[0]["_items"].length;t++){const n=parseDarwinAudio(e.SPAudioDataType[0]["_items"][t],t);r.push(n)}}}catch(e){s.noop()}}if(e){e(r)}t(r)}))}if(u){s.powerShell("Get-CimInstance Win32_SoundDevice | select DeviceID,StatusInfo,Name,Manufacturer | fl").then(((n,i)=>{if(!i){const e=n.toString().split(/\n\s*\n/);e.forEach((e=>{const t=e.split("\n");if(s.getValue(t,"name",":")){r.push(parseWindowsAudio(t))}}))}if(e){e(r)}t(r)}))}if(y){t(null)}}))}))}t.audio=audio},84779:(e,t,r)=>{"use strict";const n=r(32081).exec;const i=r(57147);const s=r(79494);let o=process.platform;const a=o==="linux"||o==="android";const c=o==="darwin";const u=o==="win32";const d=o==="freebsd";const p=o==="openbsd";const m=o==="netbsd";const y=o==="sunos";function parseWinBatteryPart(e,t,r){const n={};let i=s.getValue(e,"BatteryStatus",":").trim();if(i>=0){const o=i?parseInt(i):0;n.status=o;n.hasBattery=true;n.maxCapacity=r||parseInt(s.getValue(e,"DesignCapacity",":")||0);n.designedCapacity=parseInt(s.getValue(e,"DesignCapacity",":")||t);n.voltage=parseInt(s.getValue(e,"DesignVoltage",":")||0)/1e3;n.capacityUnit="mWh";n.percent=parseInt(s.getValue(e,"EstimatedChargeRemaining",":")||0);n.currentCapacity=parseInt(n.maxCapacity*n.percent/100);n.isCharging=o>=6&&o<=9||o===11||o!==3&&o!==1&&n.percent<100;n.acConnected=n.isCharging||o===2;n.model=s.getValue(e,"DeviceID",":")}else{n.status=-1}return n}e.exports=function(e){return new Promise((t=>{process.nextTick((()=>{let r={hasBattery:false,cycleCount:0,isCharging:false,designedCapacity:0,maxCapacity:0,currentCapacity:0,voltage:0,capacityUnit:"",percent:0,timeRemaining:null,acConnected:true,type:"",model:"",manufacturer:"",serial:""};if(a){let n="";if(i.existsSync("/sys/class/power_supply/BAT1/uevent")){n="/sys/class/power_supply/BAT1/"}else if(i.existsSync("/sys/class/power_supply/BAT0/uevent")){n="/sys/class/power_supply/BAT0/"}let o=false;let a="";if(i.existsSync("/sys/class/power_supply/AC/online")){a="/sys/class/power_supply/AC/online"}else if(i.existsSync("/sys/class/power_supply/AC0/online")){a="/sys/class/power_supply/AC0/online"}if(a){const e=i.readFileSync(a);o=e.toString().trim()==="1"}if(n){i.readFile(n+"uevent",(function(n,i){if(!n){let n=i.toString().split("\n");r.isCharging=s.getValue(n,"POWER_SUPPLY_STATUS","=").toLowerCase()==="charging";r.acConnected=o||r.isCharging;r.voltage=parseInt("0"+s.getValue(n,"POWER_SUPPLY_VOLTAGE_NOW","="),10)/1e6;r.capacityUnit=r.voltage?"mWh":"mAh";r.cycleCount=parseInt("0"+s.getValue(n,"POWER_SUPPLY_CYCLE_COUNT","="),10);r.maxCapacity=Math.round(parseInt("0"+s.getValue(n,"POWER_SUPPLY_CHARGE_FULL","=",true,true),10)/1e3*(r.voltage||1));const a=parseInt("0"+s.getValue(n,"POWER_SUPPLY_VOLTAGE_MIN_DESIGN","="),10)/1e6;r.designedCapacity=Math.round(parseInt("0"+s.getValue(n,"POWER_SUPPLY_CHARGE_FULL_DESIGN","=",true,true),10)/1e3*(a||r.voltage||1));r.currentCapacity=Math.round(parseInt("0"+s.getValue(n,"POWER_SUPPLY_CHARGE_NOW","="),10)/1e3*(r.voltage||1));if(!r.maxCapacity){r.maxCapacity=parseInt("0"+s.getValue(n,"POWER_SUPPLY_ENERGY_FULL","=",true,true),10)/1e3;r.designedCapacity=parseInt("0"+s.getValue(n,"POWER_SUPPLY_ENERGY_FULL_DESIGN","=",true,true),10)/1e3|r.maxCapacity;r.currentCapacity=parseInt("0"+s.getValue(n,"POWER_SUPPLY_ENERGY_NOW","="),10)/1e3}const c=s.getValue(n,"POWER_SUPPLY_CAPACITY","=");const u=parseInt("0"+s.getValue(n,"POWER_SUPPLY_ENERGY_NOW","="),10);const d=parseInt("0"+s.getValue(n,"POWER_SUPPLY_POWER_NOW","="),10);const p=parseInt("0"+s.getValue(n,"POWER_SUPPLY_CURRENT_NOW","="),10);const m=parseInt("0"+s.getValue(n,"POWER_SUPPLY_CHARGE_NOW","="),10);r.percent=parseInt("0"+c,10);if(r.maxCapacity&&r.currentCapacity){r.hasBattery=true;if(!c){r.percent=100*r.currentCapacity/r.maxCapacity}}if(r.isCharging){r.hasBattery=true}if(u&&d){r.timeRemaining=Math.floor(u/d*60)}else if(p&&m){r.timeRemaining=Math.floor(m/p*60)}else if(p&&r.currentCapacity){r.timeRemaining=Math.floor(r.currentCapacity/p*60)}r.type=s.getValue(n,"POWER_SUPPLY_TECHNOLOGY","=");r.model=s.getValue(n,"POWER_SUPPLY_MODEL_NAME","=");r.manufacturer=s.getValue(n,"POWER_SUPPLY_MANUFACTURER","=");r.serial=s.getValue(n,"POWER_SUPPLY_SERIAL_NUMBER","=");if(e){e(r)}t(r)}else{if(e){e(r)}t(r)}}))}else{if(e){e(r)}t(r)}}if(d||p||m){n("sysctl -i hw.acpi.battery hw.acpi.acline",(function(n,i){let o=i.toString().split("\n");const a=parseInt("0"+s.getValue(o,"hw.acpi.battery.units"),10);const c=parseInt("0"+s.getValue(o,"hw.acpi.battery.life"),10);r.hasBattery=a>0;r.cycleCount=null;r.isCharging=s.getValue(o,"hw.acpi.acline")!=="1";r.acConnected=r.isCharging;r.maxCapacity=null;r.currentCapacity=null;r.capacityUnit="unknown";r.percent=a?c:null;if(e){e(r)}t(r)}))}if(c){n('ioreg -n AppleSmartBattery -r | egrep "CycleCount|IsCharging|DesignCapacity|MaxCapacity|CurrentCapacity|BatterySerialNumber|TimeRemaining|Voltage"; pmset -g batt | grep %',(function(n,i){if(i){let e=i.toString().replace(/ +/g,"").replace(/"+/g,"").replace(/-/g,"").split("\n");r.cycleCount=parseInt("0"+s.getValue(e,"cyclecount","="),10);r.voltage=parseInt("0"+s.getValue(e,"voltage","="),10)/1e3;r.capacityUnit=r.voltage?"mWh":"mAh";r.maxCapacity=Math.round(parseInt("0"+s.getValue(e,"applerawmaxcapacity","="),10)*(r.voltage||1));r.currentCapacity=Math.round(parseInt("0"+s.getValue(e,"applerawcurrentcapacity","="),10)*(r.voltage||1));r.designedCapacity=Math.round(parseInt("0"+s.getValue(e,"DesignCapacity","="),10)*(r.voltage||1));r.manufacturer="Apple";r.serial=s.getValue(e,"BatterySerialNumber","=");let t=null;const n=s.getValue(e,"internal","Battery");let o=n.split(";");if(o&&o[0]){let e=o[0].split("\t");if(e&&e[1]){t=parseFloat(e[1].trim().replace(/%/g,""))}}if(o&&o[1]){r.isCharging=o[1].trim()==="charging";r.acConnected=o[1].trim()!=="discharging"}else{r.isCharging=s.getValue(e,"ischarging","=").toLowerCase()==="yes";r.acConnected=r.isCharging}if(r.maxCapacity&&r.currentCapacity){r.hasBattery=true;r.type="Li-ion";r.percent=t!==null?t:Math.round(100*r.currentCapacity/r.maxCapacity);if(!r.isCharging){r.timeRemaining=parseInt("0"+s.getValue(e,"TimeRemaining","="),10)}}}if(e){e(r)}t(r)}))}if(y){if(e){e(r)}t(r)}if(u){try{const n=[];n.push(s.powerShell("Get-CimInstance Win32_Battery | select BatteryStatus, DesignCapacity, DesignVoltage, EstimatedChargeRemaining, DeviceID | fl"));n.push(s.powerShell("(Get-WmiObject -Class BatteryStaticData -Namespace ROOT/WMI).DesignedCapacity"));n.push(s.powerShell("(Get-CimInstance -Class BatteryFullChargedCapacity -Namespace ROOT/WMI).FullChargedCapacity"));s.promiseAll(n).then((n=>{if(n){let e=n.results[0].split(/\n\s*\n/);let t=[];const hasValue=e=>/\S/.test(e);for(let r=0;r<e.length;r++){if(hasValue(e[r])&&(!t.length||!hasValue(e[r-1]))){t.push([])}if(hasValue(e[r])){t[t.length-1].push(e[r])}}let i=n.results[1].split("\r\n").filter((e=>e));let o=n.results[2].split("\r\n").filter((e=>e));if(t.length){let e=false;let n=[];for(let a=0;a<t.length;a++){let c=t[a][0].split("\r\n");const u=i&&i.length>=a+1&&i[a]?s.toInt(i[a]):0;const d=o&&o.length>=a+1&&o[a]?s.toInt(o[a]):0;const p=parseWinBatteryPart(c,u,d);if(!e&&p.status>0&&p.status!==10){r.hasBattery=p.hasBattery;r.maxCapacity=p.maxCapacity;r.designedCapacity=p.designedCapacity;r.voltage=p.voltage;r.capacityUnit=p.capacityUnit;r.percent=p.percent;r.currentCapacity=p.currentCapacity;r.isCharging=p.isCharging;r.acConnected=p.acConnected;r.model=p.model;e=true}else if(p.status!==-1){n.push({hasBattery:p.hasBattery,maxCapacity:p.maxCapacity,designedCapacity:p.designedCapacity,voltage:p.voltage,capacityUnit:p.capacityUnit,percent:p.percent,currentCapacity:p.currentCapacity,isCharging:p.isCharging,timeRemaining:null,acConnected:p.acConnected,model:p.model,type:"",manufacturer:"",serial:""})}}if(!e&&n.length){r=n[0];n.shift()}if(n.length){r.additionalBatteries=n}}}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}}))}))}},61648:(e,t,r)=>{"use strict";const n=r(32081).exec;const i=r(32081).execSync;const s=r(71017);const o=r(79494);const a=r(57147);let c=process.platform;const u=c==="linux"||c==="android";const d=c==="darwin";const p=c==="win32";const m=c==="freebsd";const y=c==="openbsd";const g=c==="netbsd";const b=c==="sunos";function parseBluetoothType(e){let t="";if(e.indexOf("keyboard")>=0){t="Keyboard"}if(e.indexOf("mouse")>=0){t="Mouse"}if(e.indexOf("trackpad")>=0){t="Trackpad"}if(e.indexOf("speaker")>=0){t="Speaker"}if(e.indexOf("headset")>=0){t="Headset"}if(e.indexOf("phone")>=0){t="Phone"}if(e.indexOf("macbook")>=0){t="Computer"}if(e.indexOf("imac")>=0){t="Computer"}if(e.indexOf("ipad")>=0){t="Tablet"}if(e.indexOf("watch")>=0){t="Watch"}if(e.indexOf("headphone")>=0){t="Headset"}return t}function parseBluetoothManufacturer(e){let t=e.split(" ")[0];e=e.toLowerCase();if(e.indexOf("apple")>=0){t="Apple"}if(e.indexOf("ipad")>=0){t="Apple"}if(e.indexOf("imac")>=0){t="Apple"}if(e.indexOf("iphone")>=0){t="Apple"}if(e.indexOf("magic mouse")>=0){t="Apple"}if(e.indexOf("magic track")>=0){t="Apple"}if(e.indexOf("macbook")>=0){t="Apple"}return t}function parseLinuxBluetoothInfo(e,t,r){const n={};n.device=null;n.name=o.getValue(e,"name","=");n.manufacturer=null;n.macDevice=t;n.macHost=r;n.batteryPercent=null;n.type=parseBluetoothType(n.name.toLowerCase());n.connected=false;return n}function parseDarwinBluetoothDevices(e,t){const r={};const n=((e.device_minorClassOfDevice_string||e.device_majorClassOfDevice_string||e.device_minorType||"")+(e.device_name||"")).toLowerCase();r.device=e.device_services||"";r.name=e.device_name||"";r.manufacturer=e.device_manufacturer||parseBluetoothManufacturer(e.device_name||"")||"";r.macDevice=(e.device_addr||e.device_address||"").toLowerCase().replace(/-/g,":");r.macHost=t;r.batteryPercent=e.device_batteryPercent||null;r.type=parseBluetoothType(n);r.connected=e.device_isconnected==="attrib_Yes"||false;return r}function parseWindowsBluetooth(e){const t={};t.device=null;t.name=o.getValue(e,"name",":");t.manufacturer=o.getValue(e,"manufacturer",":");t.macDevice=null;t.macHost=null;t.batteryPercent=null;t.type=parseBluetoothType(t.name.toLowerCase());t.connected=null;return t}function bluetoothDevices(e){return new Promise((t=>{process.nextTick((()=>{let r=[];if(u){const n=o.getFilesInPath("/var/lib/bluetooth/");n.forEach((e=>{const t=s.basename(e);const n=e.split("/");const i=n.length>=6?n[n.length-2]:null;const o=n.length>=7?n[n.length-3]:null;if(t==="info"){const t=a.readFileSync(e,{encoding:"utf8"}).split("\n");r.push(parseLinuxBluetoothInfo(t,i,o))}}));try{const e=i("hcitool con",o.execOptsLinux).toString().toLowerCase();for(let t=0;t<r.length;t++){if(r[t].macDevice&&r[t].macDevice.length>10&&e.indexOf(r[t].macDevice.toLowerCase())>=0){r[t].connected=true}}}catch(e){o.noop()}if(e){e(r)}t(r)}if(d){let i="system_profiler SPBluetoothDataType -json";n(i,(function(n,i){if(!n){try{const e=JSON.parse(i.toString());if(e.SPBluetoothDataType&&e.SPBluetoothDataType.length&&e.SPBluetoothDataType[0]&&e.SPBluetoothDataType[0]["device_title"]&&e.SPBluetoothDataType[0]["device_title"].length){let t=null;if(e.SPBluetoothDataType[0]["local_device_title"]&&e.SPBluetoothDataType[0].local_device_title.general_address){t=e.SPBluetoothDataType[0].local_device_title.general_address.toLowerCase().replace(/-/g,":")}e.SPBluetoothDataType[0]["device_title"].forEach((e=>{const n=e;const i=Object.keys(n);if(i&&i.length===1){const e=n[i[0]];e.device_name=i[0];const s=parseDarwinBluetoothDevices(e,t);r.push(s)}}))}if(e.SPBluetoothDataType&&e.SPBluetoothDataType.length&&e.SPBluetoothDataType[0]&&e.SPBluetoothDataType[0]["device_connected"]&&e.SPBluetoothDataType[0]["device_connected"].length){const t=e.SPBluetoothDataType[0].controller_properties&&e.SPBluetoothDataType[0].controller_properties.controller_address?e.SPBluetoothDataType[0].controller_properties.controller_address.toLowerCase().replace(/-/g,":"):null;e.SPBluetoothDataType[0]["device_connected"].forEach((e=>{const n=e;const i=Object.keys(n);if(i&&i.length===1){const e=n[i[0]];e.device_name=i[0];e.device_isconnected="attrib_Yes";const s=parseDarwinBluetoothDevices(e,t);r.push(s)}}))}if(e.SPBluetoothDataType&&e.SPBluetoothDataType.length&&e.SPBluetoothDataType[0]&&e.SPBluetoothDataType[0]["device_not_connected"]&&e.SPBluetoothDataType[0]["device_not_connected"].length){const t=e.SPBluetoothDataType[0].controller_properties&&e.SPBluetoothDataType[0].controller_properties.controller_address?e.SPBluetoothDataType[0].controller_properties.controller_address.toLowerCase().replace(/-/g,":"):null;e.SPBluetoothDataType[0]["device_not_connected"].forEach((e=>{const n=e;const i=Object.keys(n);if(i&&i.length===1){const e=n[i[0]];e.device_name=i[0];e.device_isconnected="attrib_No";const s=parseDarwinBluetoothDevices(e,t);r.push(s)}}))}}catch(e){o.noop()}}if(e){e(r)}t(r)}))}if(p){o.powerShell("Get-CimInstance Win32_PNPEntity | select PNPClass, Name, Manufacturer | fl").then(((n,i)=>{if(!i){const e=n.toString().split(/\n\s*\n/);e.forEach((e=>{if(o.getValue(e.split("\n"),"PNPClass",":")==="Bluetooth"){r.push(parseWindowsBluetooth(e.split("\n")))}}))}if(e){e(r)}t(r)}))}if(m||g||y||b){t(null)}}))}))}t.bluetoothDevices=bluetoothDevices},65068:(e,t,r)=>{"use strict";const n=r(22037);const i=r(32081).exec;const s=r(32081).execSync;const o=r(57147);const a=r(79494);let c=process.platform;const u=c==="linux"||c==="android";const d=c==="darwin";const p=c==="win32";const m=c==="freebsd";const y=c==="openbsd";const g=c==="netbsd";const b=c==="sunos";let v=0;let w={user:0,nice:0,system:0,idle:0,irq:0,steal:0,guest:0,load:0,tick:0,ms:0,currentLoad:0,currentLoadUser:0,currentLoadSystem:0,currentLoadNice:0,currentLoadIdle:0,currentLoadIrq:0,currentLoadSteal:0,currentLoadGuest:0,rawCurrentLoad:0,rawCurrentLoadUser:0,rawCurrentLoadSystem:0,rawCurrentLoadNice:0,rawCurrentLoadIdle:0,rawCurrentLoadIrq:0,rawCurrentLoadSteal:0,rawCurrentLoadGuest:0};let _=[];let C=0;const P={8346:"1.8",8347:"1.9",8350:"2.0",8354:"2.2","8356|SE":"2.4",8356:"2.3",8360:"2.5",2372:"2.1",2373:"2.1",2374:"2.2",2376:"2.3",2377:"2.3",2378:"2.4",2379:"2.4",2380:"2.5",2381:"2.5",2382:"2.6",2384:"2.7",2386:"2.8",2387:"2.8",2389:"2.9",2393:"3.1",8374:"2.2",8376:"2.3",8378:"2.4",8379:"2.4",8380:"2.5",8381:"2.5",8382:"2.6",8384:"2.7",8386:"2.8",8387:"2.8",8389:"2.9",8393:"3.1","2419EE":"1.8","2423HE":"2.0","2425HE":"2.1",2427:"2.2",2431:"2.4",2435:"2.6","2439SE":"2.8","8425HE":"2.1",8431:"2.4",8435:"2.6","8439SE":"2.8",4122:"2.2",4130:"2.6","4162EE":"1.7","4164EE":"1.8","4170HE":"2.1","4174HE":"2.3","4176HE":"2.4",4180:"2.6",4184:"2.8","6124HE":"1.8","6128HE":"2.0","6132HE":"2.2",6128:"2.0",6134:"2.3",6136:"2.4",6140:"2.6","6164HE":"1.7","6166HE":"1.8",6168:"1.9",6172:"2.1",6174:"2.2",6176:"2.3","6176SE":"2.3","6180SE":"2.5",3250:"2.5",3260:"2.7",3280:"2.4",4226:"2.7",4228:"2.8",4230:"2.9",4234:"3.1",4238:"3.3",4240:"3.4",4256:"1.6",4274:"2.5",4276:"2.6",4280:"2.8",4284:"3.0",6204:"3.3",6212:"2.6",6220:"3.0",6234:"2.4",6238:"2.6","6262HE":"1.6",6272:"2.1",6274:"2.2",6276:"2.3",6278:"2.4","6282SE":"2.6","6284SE":"2.7",6308:"3.5",6320:"2.8",6328:"3.2","6338P":"2.3",6344:"2.6",6348:"2.8",6366:"1.8","6370P":"2.0",6376:"2.3",6378:"2.4",6380:"2.5",6386:"2.8","FX|4100":"3.6","FX|4120":"3.9","FX|4130":"3.8","FX|4150":"3.8","FX|4170":"4.2","FX|6100":"3.3","FX|6120":"3.6","FX|6130":"3.6","FX|6200":"3.8","FX|8100":"2.8","FX|8120":"3.1","FX|8140":"3.2","FX|8150":"3.6","FX|8170":"3.9","FX|4300":"3.8","FX|4320":"4.0","FX|4350":"4.2","FX|6300":"3.5","FX|6350":"3.9","FX|8300":"3.3","FX|8310":"3.4","FX|8320":"3.5","FX|8350":"4.0","FX|8370":"4.0","FX|9370":"4.4","FX|9590":"4.7","FX|8320E":"3.2","FX|8370E":"3.3",1200:"3.1","Pro 1200":"3.1","1300X":"3.5","Pro 1300":"3.5",1400:"3.2","1500X":"3.5","Pro 1500":"3.5",1600:"3.2","1600X":"3.6","Pro 1600":"3.2",1700:"3.0","Pro 1700":"3.0","1700X":"3.4","Pro 1700X":"3.4","1800X":"3.6","1900X":"3.8",1920:"3.2","1920X":"3.5","1950X":"3.4","200GE":"3.2","Pro 200GE":"3.2","220GE":"3.4","240GE":"3.5","3000G":"3.5","300GE":"3.4","3050GE":"3.4","2200G":"3.5","Pro 2200G":"3.5","2200GE":"3.2","Pro 2200GE":"3.2","2400G":"3.6","Pro 2400G":"3.6","2400GE":"3.2","Pro 2400GE":"3.2","Pro 200U":"2.3","300U":"2.4","2200U":"2.5","3200U":"2.6","2300U":"2.0","Pro 2300U":"2.0","2500U":"2.0","Pro 2500U":"2.2","2600H":"3.2","2700U":"2.0","Pro 2700U":"2.2","2800H":"3.3",7351:"2.4","7351P":"2.4",7401:"2.0","7401P":"2.0","7551P":"2.0",7551:"2.0",7251:"2.1",7261:"2.5",7281:"2.1",7301:"2.2",7371:"3.1",7451:"2.3",7501:"2.0",7571:"2.2",7601:"2.2",V1500B:"2.2",V1780B:"3.35",V1202B:"2.3",V1404I:"2.0",V1605B:"2.0",V1756B:"3.25",V1807B:"3.35",3101:"2.1",3151:"2.7",3201:"1.5",3251:"2.5",3255:"2.5",3301:"2.0",3351:"1.9",3401:"1.85",3451:"2.15","1200|AF":"3.1","2300X":"3.5","2500X":"3.6",2600:"3.4","2600E":"3.1","1600|AF":"3.2","2600X":"3.6",2700:"3.2","2700E":"2.8","Pro 2700":"3.2","2700X":"3.7","Pro 2700X":"3.6","2920X":"3.5","2950X":"3.5","2970WX":"3.0","2990WX":"3.0","Pro 300GE":"3.4","Pro 3125GE":"3.4","3150G":"3.5","Pro 3150G":"3.5","3150GE":"3.3","Pro 3150GE":"3.3","3200G":"3.6","Pro 3200G":"3.6","3200GE":"3.3","Pro 3200GE":"3.3","3350G":"3.6","Pro 3350G":"3.6","3350GE":"3.3","Pro 3350GE":"3.3","3400G":"3.7","Pro 3400G":"3.7","3400GE":"3.3","Pro 3400GE":"3.3","3300U":"2.1","PRO 3300U":"2.1","3450U":"2.1","3500U":"2.1","PRO 3500U":"2.1","3500C":"2.1","3550H":"2.1","3580U":"2.1","3700U":"2.3","PRO 3700U":"2.3","3700C":"2.3","3750H":"2.3","3780U":"2.3",3100:"3.6","3300X":"3.8",3500:"3.6","3500X":"3.6",3600:"3.6","Pro 3600":"3.6","3600X":"3.8","3600XT":"3.8","Pro 3700":"3.6","3700X":"3.6","3800X":"3.9","3800XT":"3.9",3900:"3.1","Pro 3900":"3.1","3900X":"3.8","3900XT":"3.8","3950X":"3.5","3960X":"3.8","3970X":"3.7","3990X":"2.9","3945WX":"4.0","3955WX":"3.9","3975WX":"3.5","3995WX":"2.7","4300GE":"3.5","Pro 4300GE":"3.5","4300G":"3.8","Pro 4300G":"3.8","4600GE":"3.3","Pro 4650GE":"3.3","4600G":"3.7","Pro 4650G":"3.7","4700GE":"3.1","Pro 4750GE":"3.1","4700G":"3.6","Pro 4750G":"3.6","4300U":"2.7","4450U":"2.5","Pro 4450U":"2.5","4500U":"2.3","4600U":"2.1","PRO 4650U":"2.1","4680U":"2.1","4600HS":"3.0","4600H":"3.0","4700U":"2.0","PRO 4750U":"1.7","4800U":"1.8","4800HS":"2.9","4800H":"2.9","4900HS":"3.0","4900H":"3.3","5300U":"2.6","5500U":"2.1","5700U":"1.8","7232P":"3.1","7302P":"3.0","7402P":"2.8","7502P":"2.5","7702P":"2.0",7252:"3.1",7262:"3.2",7272:"2.9",7282:"2.8",7302:"3.0",7352:"2.3",7402:"2.8",7452:"2.35",7502:"2.5",7532:"2.4",7542:"2.9",7552:"2.2",7642:"2.3",7662:"2.0",7702:"2.0",7742:"2.25","7H12":"2.6","7F32":"3.7","7F52":"3.5","7F72":"3.2","7773X":"2.2",7763:"2.45",7713:"2.0","7713P":"2.0",7663:"2.0",7643:"2.3","7573X":"2.8","75F3":"2.95",7543:"2.8","7543P":"2.8",7513:"2.6","7473X":"2.8",7453:"2.75","74F3":"3.2",7443:"2.85","7443P":"2.85",7413:"2.65","7373X":"3.05","73F3":"3.5",7343:"3.2",7313:"3.0","7313P":"3.0","72F3":"3.7","5600X":"3.7","5800X":"3.8","5900X":"3.7","5950X":"3.4","5945WX":"4.1","5955WX":"4.0","5965WX":"3.8","5975WX":"3.6","5995WX":"2.7","7960X":"4.2","7970X":"4.0","7980X":"3.2","7965WX":"4.2","7975WX":"4.0","7985WX":"3.2","7995WX":"2.5",9754:"2.25","9754S":"2.25",9734:"2.2","9684X":"2.55","9384X":"3.1","9184X":"3.55","9654P":"2.4",9654:"2.4",9634:"2.25","9554P":"3.1",9554:"3.1",9534:"2.45","9474F":"3.6","9454P":"2.75",9454:"2.75","9374F":"3.85","9354P":"3.25",9354:"3.25",9334:"2.7","9274F":"4.05",9254:"2.9",9224:"2.5","9174F":"4.1",9124:"3.0"};const O={1:"Other",2:"Unknown",3:"Daughter Board",4:"ZIF Socket",5:"Replacement/Piggy Back",6:"None",7:"LIF Socket",8:"Slot 1",9:"Slot 2",10:"370 Pin Socket",11:"Slot A",12:"Slot M",13:"423",14:"A (Socket 462)",15:"478",16:"754",17:"940",18:"939",19:"mPGA604",20:"LGA771",21:"LGA775",22:"S1",23:"AM2",24:"F (1207)",25:"LGA1366",26:"G34",27:"AM3",28:"C32",29:"LGA1156",30:"LGA1567",31:"PGA988A",32:"BGA1288",33:"rPGA988B",34:"BGA1023",35:"BGA1224",36:"LGA1155",37:"LGA1356",38:"LGA2011",39:"FS1",40:"FS2",41:"FM1",42:"FM2",43:"LGA2011-3",44:"LGA1356-3",45:"LGA1150",46:"BGA1168",47:"BGA1234",48:"BGA1364",49:"AM4",50:"LGA1151",51:"BGA1356",52:"BGA1440",53:"BGA1515",54:"LGA3647-1",55:"SP3",56:"SP3r2",57:"LGA2066",58:"BGA1392",59:"BGA1510",60:"BGA1528",61:"LGA4189",62:"LGA1200",63:"LGA4677",64:"LGA1700",65:"BGA1744",66:"BGA1781",67:"BGA1211",68:"BGA2422",69:"LGA1211",70:"LGA2422",71:"LGA5773",72:"BGA5773"};const E={LGA1150:"i7-5775C i3-4340 i3-4170 G3250 i3-4160T i3-4160 E3-1231 G3258 G3240 i7-4790S i7-4790K i7-4790 i5-4690K i5-4690 i5-4590T i5-4590S i5-4590 i5-4460 i3-4360 i3-4150 G1820 G3420 G3220 i7-4771 i5-4440 i3-4330 i3-4130T i3-4130 E3-1230 i7-4770S i7-4770K i7-4770 i5-4670K i5-4670 i5-4570T i5-4570S i5-4570 i5-4430",LGA1151:"i9-9900KS E-2288G E-2224 G5420 i9-9900T i9-9900 i7-9700T i7-9700F i7-9700E i7-9700 i5-9600 i5-9500T i5-9500F i5-9500 i5-9400T i3-9350K i3-9300 i3-9100T i3-9100F i3-9100 G4930 i9-9900KF i7-9700KF i5-9600KF i5-9400F i5-9400 i3-9350KF i9-9900K i7-9700K i5-9600K G5500 G5400 i7-8700T i7-8086K i5-8600 i5-8500T i5-8500 i5-8400T i3-8300 i3-8100T G4900 i7-8700K i7-8700 i5-8600K i5-8400 i3-8350K i3-8100 E3-1270 G4600 G4560 i7-7700T i7-7700K i7-7700 i5-7600K i5-7600 i5-7500T i5-7500 i5-7400 i3-7350K i3-7300 i3-7100T i3-7100 G3930 G3900 G4400 i7-6700T i7-6700K i7-6700 i5-6600K i5-6600 i5-6500T i5-6500 i5-6400T i5-6400 i3-6300 i3-6100T i3-6100 E3-1270 E3-1270 T4500 T4400",1155:"G440 G460 G465 G470 G530T G540T G550T G1610T G1620T G530 G540 G1610 G550 G1620 G555 G1630 i3-2100T i3-2120T i3-3220T i3-3240T i3-3250T i3-2100 i3-2105 i3-2102 i3-3210 i3-3220 i3-2125 i3-2120 i3-3225 i3-2130 i3-3245 i3-3240 i3-3250 i5-3570T i5-2500T i5-2400S i5-2405S i5-2390T i5-3330S i5-2500S i5-3335S i5-2300 i5-3450S i5-3340S i5-3470S i5-3475S i5-3470T i5-2310 i5-3550S i5-2320 i5-3330 i5-3350P i5-3450 i5-2400 i5-3340 i5-3570S i5-2380P i5-2450P i5-3470 i5-2500K i5-3550 i5-2500 i5-3570 i5-3570K i5-2550K i7-3770T i7-2600S i7-3770S i7-2600K i7-2600 i7-3770 i7-3770K i7-2700K G620T G630T G640T G2020T G645T G2100T G2030T G622 G860T G620 G632 G2120T G630 G640 G2010 G840 G2020 G850 G645 G2030 G860 G2120 G870 G2130 G2140 E3-1220L E3-1220L E3-1260L E3-1265L E3-1220 E3-1225 E3-1220 E3-1235 E3-1225 E3-1230 E3-1230 E3-1240 E3-1245 E3-1270 E3-1275 E3-1240 E3-1245 E3-1270 E3-1280 E3-1275 E3-1290 E3-1280 E3-1290"};function getSocketTypesByName(e){let t="";for(const r in E){const n=E[r].split(" ");n.forEach((n=>{if(e.indexOf(n)>=0){t=r}}))}return t}function cpuManufacturer(e){let t=e;e=e.toLowerCase();if(e.indexOf("intel")>=0){t="Intel"}if(e.indexOf("amd")>=0){t="AMD"}if(e.indexOf("qemu")>=0){t="QEMU"}if(e.indexOf("hygon")>=0){t="Hygon"}if(e.indexOf("centaur")>=0){t="WinChip/Via"}if(e.indexOf("vmware")>=0){t="VMware"}if(e.indexOf("Xen")>=0){t="Xen Hypervisor"}if(e.indexOf("tcg")>=0){t="QEMU"}if(e.indexOf("apple")>=0){t="Apple"}return t}function cpuBrandManufacturer(e){e.brand=e.brand.replace(/\(R\)+/g,"®").replace(/\s+/g," ").trim();e.brand=e.brand.replace(/\(TM\)+/g,"™").replace(/\s+/g," ").trim();e.brand=e.brand.replace(/\(C\)+/g,"©").replace(/\s+/g," ").trim();e.brand=e.brand.replace(/CPU+/g,"").replace(/\s+/g," ").trim();e.manufacturer=cpuManufacturer(e.brand);let t=e.brand.split(" ");t.shift();e.brand=t.join(" ");return e}function getAMDSpeed(e){let t="0";for(let r in P){if({}.hasOwnProperty.call(P,r)){let n=r.split("|");let i=0;n.forEach((t=>{if(e.indexOf(t)>-1){i++}}));if(i===n.length){t=P[r]}}}return parseFloat(t)}function getCpu(){return new Promise((e=>{process.nextTick((()=>{const t="unknown";let r={manufacturer:t,brand:t,vendor:"",family:"",model:"",stepping:"",revision:"",voltage:"",speed:0,speedMin:0,speedMax:0,governor:"",cores:a.cores(),physicalCores:a.cores(),performanceCores:a.cores(),efficiencyCores:0,processors:1,socket:"",flags:"",virtualization:false,cache:{}};cpuFlags().then((t=>{r.flags=t;r.virtualization=t.indexOf("vmx")>-1||t.indexOf("svm")>-1;if(d){i("sysctl machdep.cpu hw.cpufrequency_max hw.cpufrequency_min hw.packages hw.physicalcpu_max hw.ncpu hw.tbfrequency hw.cpufamily hw.cpusubfamily",(function(t,i){let o=i.toString().split("\n");const c=a.getValue(o,"machdep.cpu.brand_string");const u=c.split("@");r.brand=u[0].trim();const d=u[1]?u[1].trim():"0";r.speed=parseFloat(d.replace(/GHz+/g,""));let p=a.getValue(o,"hw.tbfrequency")/1e9;p=p<.1?p*100:p;r.speed=r.speed===0?p:r.speed;v=r.speed;r=cpuBrandManufacturer(r);r.speedMin=a.getValue(o,"hw.cpufrequency_min")?a.getValue(o,"hw.cpufrequency_min")/1e9:r.speed;r.speedMax=a.getValue(o,"hw.cpufrequency_max")?a.getValue(o,"hw.cpufrequency_max")/1e9:r.speed;r.vendor=a.getValue(o,"machdep.cpu.vendor")||"Apple";r.family=a.getValue(o,"machdep.cpu.family")||a.getValue(o,"hw.cpufamily");r.model=a.getValue(o,"machdep.cpu.model");r.stepping=a.getValue(o,"machdep.cpu.stepping")||a.getValue(o,"hw.cpusubfamily");r.virtualization=true;const m=a.getValue(o,"hw.packages");const y=a.getValue(o,"hw.physicalcpu_max");const g=a.getValue(o,"hw.ncpu");if(n.arch()==="arm64"){r.socket="SOC";try{const e=s("ioreg -c IOPlatformDevice -d 3 -r | grep cluster-type").toString().split("\n");const t=e.filter((e=>e.indexOf('"E"')>=0)).length;const n=e.filter((e=>e.indexOf('"P"')>=0)).length;r.efficiencyCores=t;r.performanceCores=n}catch(e){a.noop()}}if(m){r.processors=parseInt(m)||1}if(y&&g){r.cores=parseInt(g)||a.cores();r.physicalCores=parseInt(y)||a.cores()}cpuCache().then((t=>{r.cache=t;e(r)}))}))}if(u){let t="";let s=[];if(n.cpus()[0]&&n.cpus()[0].model){t=n.cpus()[0].model}i('export LC_ALL=C; lscpu; echo -n "Governor: "; cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor 2>/dev/null; echo; unset LC_ALL',(function(n,c){if(!n){s=c.toString().split("\n")}t=a.getValue(s,"model name")||t;t=a.getValue(s,"bios model name")||t;const u=t.split("@");r.brand=u[0].trim();r.speed=u[1]?parseFloat(u[1].trim()):0;if(r.speed===0&&(r.brand.indexOf("AMD")>-1||r.brand.toLowerCase().indexOf("ryzen")>-1)){r.speed=getAMDSpeed(r.brand)}if(r.speed===0){const e=getCpuCurrentSpeedSync();if(e.avg!==0){r.speed=e.avg}}v=r.speed;r.speedMin=Math.round(parseFloat(a.getValue(s,"cpu min mhz").replace(/,/g,"."))/10)/100;r.speedMax=Math.round(parseFloat(a.getValue(s,"cpu max mhz").replace(/,/g,"."))/10)/100;r=cpuBrandManufacturer(r);r.vendor=cpuManufacturer(a.getValue(s,"vendor id"));r.family=a.getValue(s,"cpu family");r.model=a.getValue(s,"model:");r.stepping=a.getValue(s,"stepping");r.revision=a.getValue(s,"cpu revision");r.cache.l1d=a.getValue(s,"l1d cache");if(r.cache.l1d){r.cache.l1d=parseInt(r.cache.l1d)*(r.cache.l1d.indexOf("M")!==-1?1024*1024:r.cache.l1d.indexOf("K")!==-1?1024:1)}r.cache.l1i=a.getValue(s,"l1i cache");if(r.cache.l1i){r.cache.l1i=parseInt(r.cache.l1i)*(r.cache.l1i.indexOf("M")!==-1?1024*1024:r.cache.l1i.indexOf("K")!==-1?1024:1)}r.cache.l2=a.getValue(s,"l2 cache");if(r.cache.l2){r.cache.l2=parseInt(r.cache.l2)*(r.cache.l2.indexOf("M")!==-1?1024*1024:r.cache.l2.indexOf("K")!==-1?1024:1)}r.cache.l3=a.getValue(s,"l3 cache");if(r.cache.l3){r.cache.l3=parseInt(r.cache.l3)*(r.cache.l3.indexOf("M")!==-1?1024*1024:r.cache.l3.indexOf("K")!==-1?1024:1)}const d=a.getValue(s,"thread(s) per core")||"1";const p=a.getValue(s,"socket(s)")||"1";const m=parseInt(d,10);const y=parseInt(p,10)||1;const g=parseInt(a.getValue(s,"core(s) per socket"),10);r.physicalCores=g?g*y:r.cores/m;r.performanceCores=m>1?r.cores-r.physicalCores:r.cores;r.efficiencyCores=m>1?r.cores-m*r.performanceCores:0;r.processors=y;r.governor=a.getValue(s,"governor")||"";if(r.vendor==="ARM"){const e=o.readFileSync("/proc/cpuinfo").toString().split("\n");const t=a.decodePiCpuinfo(e);if(t.model.toLowerCase().indexOf("raspberry")>=0){r.family=r.manufacturer;r.manufacturer=t.manufacturer;r.brand=t.processor;r.revision=t.revisionCode;r.socket="SOC"}}let b=[];i('export LC_ALL=C; dmidecode –t 4 2>/dev/null | grep "Upgrade: Socket"; unset LC_ALL',(function(t,n){b=n.toString().split("\n");if(b&&b.length){r.socket=a.getValue(b,"Upgrade").replace("Socket","").trim()||r.socket}e(r)}))}))}if(m||y||g){let t="";let s=[];if(n.cpus()[0]&&n.cpus()[0].model){t=n.cpus()[0].model}i("export LC_ALL=C; dmidecode -t 4; dmidecode -t 7 unset LC_ALL",(function(n,i){let o=[];if(!n){const e=i.toString().split("# dmidecode");const t=e.length>1?e[1]:"";o=e.length>2?e[2].split("Cache Information"):[];s=t.split("\n")}r.brand=t.split("@")[0].trim();r.speed=t.split("@")[1]?parseFloat(t.split("@")[1].trim()):0;if(r.speed===0&&(r.brand.indexOf("AMD")>-1||r.brand.toLowerCase().indexOf("ryzen")>-1)){r.speed=getAMDSpeed(r.brand)}if(r.speed===0){const e=getCpuCurrentSpeedSync();if(e.avg!==0){r.speed=e.avg}}v=r.speed;r.speedMin=r.speed;r.speedMax=Math.round(parseFloat(a.getValue(s,"max speed").replace(/Mhz/g,""))/10)/100;r=cpuBrandManufacturer(r);r.vendor=cpuManufacturer(a.getValue(s,"manufacturer"));let c=a.getValue(s,"signature");c=c.split(",");for(let e=0;e<c.length;e++){c[e]=c[e].trim()}r.family=a.getValue(c,"Family"," ",true);r.model=a.getValue(c,"Model"," ",true);r.stepping=a.getValue(c,"Stepping"," ",true);r.revision="";const u=parseFloat(a.getValue(s,"voltage"));r.voltage=isNaN(u)?"":u.toFixed(2);for(let e=0;e<o.length;e++){s=o[e].split("\n");let t=a.getValue(s,"Socket Designation").toLowerCase().replace(" ","-").split("-");t=t.length?t[0]:"";const n=a.getValue(s,"Installed Size").split(" ");let i=parseInt(n[0],10);const c=n.length>1?n[1]:"kb";i=i*(c==="kb"?1024:c==="mb"?1024*1024:c==="gb"?1024*1024*1024:1);if(t){if(t==="l1"){r.cache[t+"d"]=i/2;r.cache[t+"i"]=i/2}else{r.cache[t]=i}}}r.socket=a.getValue(s,"Upgrade").replace("Socket","").trim();const d=a.getValue(s,"thread count").trim();const p=a.getValue(s,"core count").trim();if(p&&d){r.cores=parseInt(d,10);r.physicalCores=parseInt(p,10)}e(r)}))}if(b){e(r)}if(p){try{const t=[];t.push(a.powerShell("Get-CimInstance Win32_processor | select Name, Revision, L2CacheSize, L3CacheSize, Manufacturer, MaxClockSpeed, Description, UpgradeMethod, Caption, NumberOfLogicalProcessors, NumberOfCores | fl"));t.push(a.powerShell("Get-CimInstance Win32_CacheMemory | select CacheType,InstalledSize,Level | fl"));t.push(a.powerShell("(Get-CimInstance Win32_ComputerSystem).HypervisorPresent"));Promise.all(t).then((t=>{let n=t[0].split("\r\n");let i=a.getValue(n,"name",":")||"";if(i.indexOf("@")>=0){r.brand=i.split("@")[0].trim();r.speed=i.split("@")[1]?parseFloat(i.split("@")[1].trim()):0;v=r.speed}else{r.brand=i.trim();r.speed=0}r=cpuBrandManufacturer(r);r.revision=a.getValue(n,"revision",":");r.vendor=a.getValue(n,"manufacturer",":");r.speedMax=Math.round(parseFloat(a.getValue(n,"maxclockspeed",":").replace(/,/g,"."))/10)/100;if(r.speed===0&&(r.brand.indexOf("AMD")>-1||r.brand.toLowerCase().indexOf("ryzen")>-1)){r.speed=getAMDSpeed(r.brand)}if(r.speed===0){r.speed=r.speedMax}r.speedMin=r.speed;let s=a.getValue(n,"description",":").split(" ");for(let e=0;e<s.length;e++){if(s[e].toLowerCase().startsWith("family")&&e+1<s.length&&s[e+1]){r.family=s[e+1]}if(s[e].toLowerCase().startsWith("model")&&e+1<s.length&&s[e+1]){r.model=s[e+1]}if(s[e].toLowerCase().startsWith("stepping")&&e+1<s.length&&s[e+1]){r.stepping=s[e+1]}}const o=a.getValue(n,"UpgradeMethod",":");if(O[o]){r.socket=O[o]}const c=getSocketTypesByName(i);if(c){r.socket=c}const u=a.countLines(n,"Caption");const d=a.getValue(n,"NumberOfLogicalProcessors",":");const p=a.getValue(n,"NumberOfCores",":");if(u){r.processors=parseInt(u)||1}if(p&&d){r.cores=parseInt(d)||a.cores();r.physicalCores=parseInt(p)||a.cores()}if(u>1){r.cores=r.cores*u;r.physicalCores=r.physicalCores*u}r.cache=parseWinCache(t[0],t[1]);const m=t[2]?t[2].toString().toLowerCase():"";r.virtualization=m.indexOf("true")!==-1;e(r)}))}catch(t){e(r)}}}))}))}))}function cpu(e){return new Promise((t=>{process.nextTick((()=>{getCpu().then((r=>{if(e){e(r)}t(r)}))}))}))}t.cpu=cpu;function getCpuCurrentSpeedSync(){let e=n.cpus();let t=999999999;let r=0;let i=0;let s=[];if(e&&e.length){for(let n in e){if({}.hasOwnProperty.call(e,n)){let o=e[n].speed>100?(e[n].speed+1)/1e3:e[n].speed/10;i=i+o;if(o>r){r=o}if(o<t){t=o}s.push(parseFloat(o.toFixed(2)))}}i=i/e.length;return{min:parseFloat(t.toFixed(2)),max:parseFloat(r.toFixed(2)),avg:parseFloat(i.toFixed(2)),cores:s}}else{return{min:0,max:0,avg:0,cores:s}}}function cpuCurrentSpeed(e){return new Promise((t=>{process.nextTick((()=>{let r=getCpuCurrentSpeedSync();if(r.avg===0&&v!==0){const e=parseFloat(v);r={min:e,max:e,avg:e,cores:[]}}if(e){e(r)}t(r)}))}))}t.cpuCurrentSpeed=cpuCurrentSpeed;function cpuTemperature(e){return new Promise((t=>{process.nextTick((()=>{let n={main:null,cores:[],max:null,socket:[],chipset:null};if(u){try{const e='cat /sys/class/thermal/thermal_zone*/type  2>/dev/null; echo "-----"; cat /sys/class/thermal/thermal_zone*/temp 2>/dev/null;';const t=s(e,a.execOptsLinux).toString().split("-----\n");if(t.length===2){const e=t[0].split("\n");const r=t[1].split("\n");for(let t=0;t<e.length;t++){const i=e[t].trim();if(i.startsWith("acpi")&&r[t]){n.socket.push(Math.round(parseInt(r[t],10)/100)/10)}if(i.startsWith("pch")&&r[t]){n.chipset=Math.round(parseInt(r[t],10)/100)/10}}}}catch(e){a.noop()}const r='for mon in /sys/class/hwmon/hwmon*; do for label in "$mon"/temp*_label; do if [ -f $label ]; then value=${label%_*}_input; echo $(cat "$label")___$(cat "$value"); fi; done; done;';try{i(r,(function(r,s){s=s.toString();const a=s.toLowerCase().indexOf("tdie");if(a!==-1){s=s.substring(a)}let c=s.split("\n");let u=0;c.forEach((e=>{const t=e.split("___");const r=t[0];const i=t.length>1&&t[1]?t[1]:"0";if(i&&r&&r.toLowerCase()==="tctl"){u=n.main=Math.round(parseInt(i,10)/100)/10}if(i&&(r===undefined||r&&r.toLowerCase().startsWith("core"))){n.cores.push(Math.round(parseInt(i,10)/100)/10)}else if(i&&r&&n.main===null&&(r.toLowerCase().indexOf("package")>=0||r.toLowerCase().indexOf("physical")>=0||r.toLowerCase()==="tccd1")){n.main=Math.round(parseInt(i,10)/100)/10}}));if(u&&n.main===null){n.main=u}if(n.cores.length>0){if(n.main===null){n.main=Math.round(n.cores.reduce(((e,t)=>e+t),0)/n.cores.length)}let e=Math.max.apply(Math,n.cores);n.max=e>n.main?e:n.main}if(n.main!==null){if(n.max===null){n.max=n.main}if(e){e(n)}t(n);return}i("sensors",(function(r,s){if(!r){let r=s.toString().split("\n");let i=null;let o=true;let a="";r.forEach((function(e){if(e.trim()===""){o=true}else if(o){if(e.trim().toLowerCase().startsWith("acpi")){a="acpi"}if(e.trim().toLowerCase().startsWith("pch")){a="pch"}if(e.trim().toLowerCase().startsWith("core")){a="core"}o=false}let t=/[+-]([^°]*)/g;let r=e.match(t);let s=e.split(":")[0].toUpperCase();if(a==="acpi"){if(s.indexOf("TEMP")!==-1){n.socket.push(parseFloat(r))}}else if(a==="pch"){if(s.indexOf("TEMP")!==-1&&!n.chipset){n.chipset=parseFloat(r)}}if(s.indexOf("PHYSICAL")!==-1||s.indexOf("PACKAGE")!==-1){n.main=parseFloat(r)}if(s.indexOf("CORE ")!==-1){n.cores.push(parseFloat(r))}if(s.indexOf("TDIE")!==-1&&i===null){i=parseFloat(r)}}));if(n.cores.length>0){n.main=Math.round(n.cores.reduce(((e,t)=>e+t),0)/n.cores.length);let e=Math.max.apply(Math,n.cores);n.max=e>n.main?e:n.main}else{if(n.main===null&&i!==null){n.main=i;n.max=i}}if(n.main!==null||n.max!==null){if(e){e(n)}t(n);return}}o.stat("/sys/class/thermal/thermal_zone0/temp",(function(r){if(r===null){o.readFile("/sys/class/thermal/thermal_zone0/temp",(function(r,i){if(!r){let e=i.toString().split("\n");if(e.length>0){n.main=parseFloat(e[0])/1e3;n.max=n.main}}if(e){e(n)}t(n)}))}else{i("/opt/vc/bin/vcgencmd measure_temp",(function(r,i){if(!r){let e=i.toString().split("\n");if(e.length>0&&e[0].indexOf("=")){n.main=parseFloat(e[0].split("=")[1]);n.max=n.main}}if(e){e(n)}t(n)}))}}))}))}))}catch(r){if(e){e(n)}t(n)}}if(m||y||g){i("sysctl dev.cpu | grep temp",(function(r,i){if(!r){let e=i.toString().split("\n");let t=0;e.forEach((function(e){const r=e.split(":");if(r.length>1){const e=parseFloat(r[1].replace(",","."));if(e>n.max){n.max=e}t=t+e;n.cores.push(e)}}));if(n.cores.length){n.main=Math.round(t/n.cores.length*100)/100}}if(e){e(n)}t(n)}))}if(d){let i=null;try{i=r(26183)}catch(e){i=null}if(i){n=i.cpuTemperature();if(n.main){n.main=Math.round(n.main*100)/100}if(n.max){n.max=Math.round(n.max*100)/100}if(n.cores&&n.cores.length){for(let e=0;e<n.cores.length;e++){n.cores[e]=Math.round(n.cores[e]*100)/100}}}if(e){e(n)}t(n)}if(b){if(e){e(n)}t(n)}if(p){try{a.powerShell('Get-CimInstance MSAcpi_ThermalZoneTemperature -Namespace "root/wmi" | Select CurrentTemperature').then(((r,i)=>{if(!i){let e=0;let t=r.split("\r\n").filter((e=>e.trim()!=="")).filter(((e,t)=>t>0));t.forEach((function(t){let r=(parseInt(t,10)-2732)/10;if(!isNaN(r)){e=e+r;if(r>n.max){n.max=r}n.cores.push(r)}}));if(n.cores.length){n.main=e/n.cores.length}}if(e){e(n)}t(n)}))}catch(r){if(e){e(n)}t(n)}}}))}))}t.cpuTemperature=cpuTemperature;function cpuFlags(e){return new Promise((t=>{process.nextTick((()=>{let r="";if(p){try{i('reg query "HKEY_LOCAL_MACHINE\\HARDWARE\\DESCRIPTION\\System\\CentralProcessor\\0" /v FeatureSet',a.execOptsWin,(function(n,i){if(!n){let e=i.split("0x").pop().trim();let t=parseInt(e,16).toString(2);let n="0".repeat(32-t.length)+t;let s=["fpu","vme","de","pse","tsc","msr","pae","mce","cx8","apic","","sep","mtrr","pge","mca","cmov","pat","pse-36","psn","clfsh","","ds","acpi","mmx","fxsr","sse","sse2","ss","htt","tm","ia64","pbe"];for(let e=0;e<s.length;e++){if(n[e]==="1"&&s[e]!==""){r+=" "+s[e]}}r=r.trim().toLowerCase()}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}if(u){try{i("export LC_ALL=C; lscpu; unset LC_ALL",(function(n,i){if(!n){let e=i.toString().split("\n");e.forEach((function(e){if(e.split(":")[0].toUpperCase().indexOf("FLAGS")!==-1){r=e.split(":")[1].trim().toLowerCase()}}))}if(!r){o.readFile("/proc/cpuinfo",(function(n,i){if(!n){let e=i.toString().split("\n");r=a.getValue(e,"features",":",true).toLowerCase()}if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}))}catch(n){if(e){e(r)}t(r)}}if(m||y||g){i("export LC_ALL=C; dmidecode -t 4 2>/dev/null; unset LC_ALL",(function(n,i){let s=[];if(!n){let e=i.toString().split("\tFlags:");const t=e.length>1?e[1].split("\tVersion:")[0].split("\n"):[];t.forEach((function(e){let t=(e.indexOf("(")?e.split("(")[0].toLowerCase():"").trim().replace(/\t/g,"");if(t){s.push(t)}}))}r=s.join(" ").trim().toLowerCase();if(e){e(r)}t(r)}))}if(d){i("sysctl machdep.cpu.features",(function(n,i){if(!n){let e=i.toString().split("\n");if(e.length>0&&e[0].indexOf("machdep.cpu.features:")!==-1){r=e[0].split(":")[1].trim().toLowerCase()}}if(e){e(r)}t(r)}))}if(b){if(e){e(r)}t(r)}}))}))}t.cpuFlags=cpuFlags;function cpuCache(e){return new Promise((t=>{process.nextTick((()=>{let r={l1d:null,l1i:null,l2:null,l3:null};if(u){try{i("export LC_ALL=C; lscpu; unset LC_ALL",(function(n,i){if(!n){let e=i.toString().split("\n");e.forEach((function(e){let t=e.split(":");if(t[0].toUpperCase().indexOf("L1D CACHE")!==-1){r.l1d=parseInt(t[1].trim())*(t[1].indexOf("M")!==-1?1024*1024:t[1].indexOf("K")!==-1?1024:1)}if(t[0].toUpperCase().indexOf("L1I CACHE")!==-1){r.l1i=parseInt(t[1].trim())*(t[1].indexOf("M")!==-1?1024*1024:t[1].indexOf("K")!==-1?1024:1)}if(t[0].toUpperCase().indexOf("L2 CACHE")!==-1){r.l2=parseInt(t[1].trim())*(t[1].indexOf("M")!==-1?1024*1024:t[1].indexOf("K")!==-1?1024:1)}if(t[0].toUpperCase().indexOf("L3 CACHE")!==-1){r.l3=parseInt(t[1].trim())*(t[1].indexOf("M")!==-1?1024*1024:t[1].indexOf("K")!==-1?1024:1)}}))}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}if(m||y||g){i("export LC_ALL=C; dmidecode -t 7 2>/dev/null; unset LC_ALL",(function(n,i){let s=[];if(!n){const e=i.toString();s=e.split("Cache Information");s.shift()}for(let e=0;e<s.length;e++){const t=s[e].split("\n");let n=a.getValue(t,"Socket Designation").toLowerCase().replace(" ","-").split("-");n=n.length?n[0]:"";const i=a.getValue(t,"Installed Size").split(" ");let o=parseInt(i[0],10);const c=i.length>1?i[1]:"kb";o=o*(c==="kb"?1024:c==="mb"?1024*1024:c==="gb"?1024*1024*1024:1);if(n){if(n==="l1"){r.cache[n+"d"]=o/2;r.cache[n+"i"]=o/2}else{r.cache[n]=o}}}if(e){e(r)}t(r)}))}if(d){i("sysctl hw.l1icachesize hw.l1dcachesize hw.l2cachesize hw.l3cachesize",(function(n,i){if(!n){let e=i.toString().split("\n");e.forEach((function(e){let t=e.split(":");if(t[0].toLowerCase().indexOf("hw.l1icachesize")!==-1){r.l1d=parseInt(t[1].trim())*(t[1].indexOf("K")!==-1?1024:1)}if(t[0].toLowerCase().indexOf("hw.l1dcachesize")!==-1){r.l1i=parseInt(t[1].trim())*(t[1].indexOf("K")!==-1?1024:1)}if(t[0].toLowerCase().indexOf("hw.l2cachesize")!==-1){r.l2=parseInt(t[1].trim())*(t[1].indexOf("K")!==-1?1024:1)}if(t[0].toLowerCase().indexOf("hw.l3cachesize")!==-1){r.l3=parseInt(t[1].trim())*(t[1].indexOf("K")!==-1?1024:1)}}))}if(e){e(r)}t(r)}))}if(b){if(e){e(r)}t(r)}if(p){try{const n=[];n.push(a.powerShell("Get-CimInstance Win32_processor | select L2CacheSize, L3CacheSize | fl"));n.push(a.powerShell("Get-CimInstance Win32_CacheMemory | select CacheType,InstalledSize,Level | fl"));Promise.all(n).then((n=>{r=parseWinCache(n[0],n[1]);if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}}))}))}function parseWinCache(e,t){let r={l1d:null,l1i:null,l2:null,l3:null};let n=e.split("\r\n");r.l1d=0;r.l1i=0;r.l2=a.getValue(n,"l2cachesize",":");r.l3=a.getValue(n,"l3cachesize",":");if(r.l2){r.l2=parseInt(r.l2,10)*1024}else{r.l2=0}if(r.l3){r.l3=parseInt(r.l3,10)*1024}else{r.l3=0}const i=t.split(/\n\s*\n/);let s=0;let o=0;let c=0;i.forEach((function(e){const t=e.split("\r\n");const n=a.getValue(t,"CacheType");const i=a.getValue(t,"Level");const u=a.getValue(t,"InstalledSize");if(i==="3"&&n==="3"){r.l1i=r.l1i+parseInt(u,10)*1024}if(i==="3"&&n==="4"){r.l1d=r.l1d+parseInt(u,10)*1024}if(i==="3"&&n==="5"){s=parseInt(u,10)/2;o=parseInt(u,10)/2}if(i==="4"&&n==="5"){c=c+parseInt(u,10)*1024}}));if(!r.l1i&&!r.l1d){r.l1i=s;r.l1d=o}if(c){r.l2=c}return r}t.cpuCache=cpuCache;function getLoad(){return new Promise((e=>{process.nextTick((()=>{let t=n.loadavg().map((function(e){return e/a.cores()}));let r=parseFloat(Math.max.apply(Math,t).toFixed(2));let i={};let o=Date.now()-w.ms;if(o>=200){w.ms=Date.now();const e=n.cpus().map((function(e){e.times.steal=0;e.times.guest=0;return e}));let t=0;let o=0;let c=0;let d=0;let p=0;let m=0;let y=0;let g=[];C=e&&e.length?e.length:0;if(u){try{const t=s("cat /proc/stat 2>/dev/null | grep cpu",a.execOptsLinux).toString().split("\n");if(t.length>1){t.shift();if(t.length===e.length){for(let r=0;r<t.length;r++){let n=t[r].split(" ");if(n.length>=10){const t=parseFloat(n[8])||0;const i=parseFloat(n[9])||0;e[r].times.steal=t;e[r].times.guest=i}}}}}catch(e){a.noop()}}for(let r=0;r<C;r++){const n=e[r].times;t+=n.user;o+=n.sys;c+=n.nice;p+=n.idle;d+=n.irq;m+=n.steal||0;y+=n.guest||0;let i=_&&_[r]&&_[r].totalTick?_[r].totalTick:0;let s=_&&_[r]&&_[r].totalLoad?_[r].totalLoad:0;let a=_&&_[r]&&_[r].user?_[r].user:0;let u=_&&_[r]&&_[r].sys?_[r].sys:0;let b=_&&_[r]&&_[r].nice?_[r].nice:0;let v=_&&_[r]&&_[r].idle?_[r].idle:0;let w=_&&_[r]&&_[r].irq?_[r].irq:0;let C=_&&_[r]&&_[r].steal?_[r].steal:0;let P=_&&_[r]&&_[r].guest?_[r].guest:0;_[r]=n;_[r].totalTick=_[r].user+_[r].sys+_[r].nice+_[r].irq+_[r].steal+_[r].guest+_[r].idle;_[r].totalLoad=_[r].user+_[r].sys+_[r].nice+_[r].irq+_[r].steal+_[r].guest;_[r].currentTick=_[r].totalTick-i;_[r].load=_[r].totalLoad-s;_[r].loadUser=_[r].user-a;_[r].loadSystem=_[r].sys-u;_[r].loadNice=_[r].nice-b;_[r].loadIdle=_[r].idle-v;_[r].loadIrq=_[r].irq-w;_[r].loadSteal=_[r].steal-C;_[r].loadGuest=_[r].guest-P;g[r]={};g[r].load=_[r].load/_[r].currentTick*100;g[r].loadUser=_[r].loadUser/_[r].currentTick*100;g[r].loadSystem=_[r].loadSystem/_[r].currentTick*100;g[r].loadNice=_[r].loadNice/_[r].currentTick*100;g[r].loadIdle=_[r].loadIdle/_[r].currentTick*100;g[r].loadIrq=_[r].loadIrq/_[r].currentTick*100;g[r].loadSteal=_[r].loadSteal/_[r].currentTick*100;g[r].loadGuest=_[r].loadGuest/_[r].currentTick*100;g[r].rawLoad=_[r].load;g[r].rawLoadUser=_[r].loadUser;g[r].rawLoadSystem=_[r].loadSystem;g[r].rawLoadNice=_[r].loadNice;g[r].rawLoadIdle=_[r].loadIdle;g[r].rawLoadIrq=_[r].loadIrq;g[r].rawLoadSteal=_[r].loadSteal;g[r].rawLoadGuest=_[r].loadGuest}let b=t+o+c+d+m+y+p;let v=t+o+c+d+m+y;let P=b-w.tick;i={avgLoad:r,currentLoad:(v-w.load)/P*100,currentLoadUser:(t-w.user)/P*100,currentLoadSystem:(o-w.system)/P*100,currentLoadNice:(c-w.nice)/P*100,currentLoadIdle:(p-w.idle)/P*100,currentLoadIrq:(d-w.irq)/P*100,currentLoadSteal:(m-w.steal)/P*100,currentLoadGuest:(y-w.guest)/P*100,rawCurrentLoad:v-w.load,rawCurrentLoadUser:t-w.user,rawCurrentLoadSystem:o-w.system,rawCurrentLoadNice:c-w.nice,rawCurrentLoadIdle:p-w.idle,rawCurrentLoadIrq:d-w.irq,rawCurrentLoadSteal:m-w.steal,rawCurrentLoadGuest:y-w.guest,cpus:g};w={user:t,nice:c,system:o,idle:p,irq:d,steal:m,guest:y,tick:b,load:v,ms:w.ms,currentLoad:i.currentLoad,currentLoadUser:i.currentLoadUser,currentLoadSystem:i.currentLoadSystem,currentLoadNice:i.currentLoadNice,currentLoadIdle:i.currentLoadIdle,currentLoadIrq:i.currentLoadIrq,currentLoadSteal:i.currentLoadSteal,currentLoadGuest:i.currentLoadGuest,rawCurrentLoad:i.rawCurrentLoad,rawCurrentLoadUser:i.rawCurrentLoadUser,rawCurrentLoadSystem:i.rawCurrentLoadSystem,rawCurrentLoadNice:i.rawCurrentLoadNice,rawCurrentLoadIdle:i.rawCurrentLoadIdle,rawCurrentLoadIrq:i.rawCurrentLoadIrq,rawCurrentLoadSteal:i.rawCurrentLoadSteal,rawCurrentLoadGuest:i.rawCurrentLoadGuest}}else{let e=[];for(let t=0;t<C;t++){e[t]={};e[t].load=_[t].load/_[t].currentTick*100;e[t].loadUser=_[t].loadUser/_[t].currentTick*100;e[t].loadSystem=_[t].loadSystem/_[t].currentTick*100;e[t].loadNice=_[t].loadNice/_[t].currentTick*100;e[t].loadIdle=_[t].loadIdle/_[t].currentTick*100;e[t].loadIrq=_[t].loadIrq/_[t].currentTick*100;e[t].rawLoad=_[t].load;e[t].rawLoadUser=_[t].loadUser;e[t].rawLoadSystem=_[t].loadSystem;e[t].rawLoadNice=_[t].loadNice;e[t].rawLoadIdle=_[t].loadIdle;e[t].rawLoadIrq=_[t].loadIrq;e[t].rawLoadSteal=_[t].loadSteal;e[t].rawLoadGuest=_[t].loadGuest}i={avgLoad:r,currentLoad:w.currentLoad,currentLoadUser:w.currentLoadUser,currentLoadSystem:w.currentLoadSystem,currentLoadNice:w.currentLoadNice,currentLoadIdle:w.currentLoadIdle,currentLoadIrq:w.currentLoadIrq,currentLoadSteal:w.currentLoadSteal,currentLoadGuest:w.currentLoadGuest,rawCurrentLoad:w.rawCurrentLoad,rawCurrentLoadUser:w.rawCurrentLoadUser,rawCurrentLoadSystem:w.rawCurrentLoadSystem,rawCurrentLoadNice:w.rawCurrentLoadNice,rawCurrentLoadIdle:w.rawCurrentLoadIdle,rawCurrentLoadIrq:w.rawCurrentLoadIrq,rawCurrentLoadSteal:w.rawCurrentLoadSteal,rawCurrentLoadGuest:w.rawCurrentLoadGuest,cpus:e}}e(i)}))}))}function currentLoad(e){return new Promise((t=>{process.nextTick((()=>{getLoad().then((r=>{if(e){e(r)}t(r)}))}))}))}t.currentLoad=currentLoad;function getFullLoad(){return new Promise((e=>{process.nextTick((()=>{const t=n.cpus();let r=0;let i=0;let s=0;let o=0;let a=0;let c=0;if(t&&t.length){for(let e=0,n=t.length;e<n;e++){const n=t[e].times;r+=n.user;i+=n.sys;s+=n.nice;o+=n.irq;a+=n.idle}let e=a+o+s+i+r;c=(e-a)/e*100}e(c)}))}))}function fullLoad(e){return new Promise((t=>{process.nextTick((()=>{getFullLoad().then((r=>{if(e){e(r)}t(r)}))}))}))}t.fullLoad=fullLoad},12781:(e,t,r)=>{"use strict";const n=r(79494);const i=r(82152);let s=process.platform;const o=s==="win32";let a={};let c;let u=0;function dockerInfo(e){return new Promise((t=>{process.nextTick((()=>{if(!c){c=new i}const r={};c.getInfo((n=>{r.id=n.ID;r.containers=n.Containers;r.containersRunning=n.ContainersRunning;r.containersPaused=n.ContainersPaused;r.containersStopped=n.ContainersStopped;r.images=n.Images;r.driver=n.Driver;r.memoryLimit=n.MemoryLimit;r.swapLimit=n.SwapLimit;r.kernelMemory=n.KernelMemory;r.cpuCfsPeriod=n.CpuCfsPeriod;r.cpuCfsQuota=n.CpuCfsQuota;r.cpuShares=n.CPUShares;r.cpuSet=n.CPUSet;r.ipv4Forwarding=n.IPv4Forwarding;r.bridgeNfIptables=n.BridgeNfIptables;r.bridgeNfIp6tables=n.BridgeNfIp6tables;r.debug=n.Debug;r.nfd=n.NFd;r.oomKillDisable=n.OomKillDisable;r.ngoroutines=n.NGoroutines;r.systemTime=n.SystemTime;r.loggingDriver=n.LoggingDriver;r.cgroupDriver=n.CgroupDriver;r.nEventsListener=n.NEventsListener;r.kernelVersion=n.KernelVersion;r.operatingSystem=n.OperatingSystem;r.osType=n.OSType;r.architecture=n.Architecture;r.ncpu=n.NCPU;r.memTotal=n.MemTotal;r.dockerRootDir=n.DockerRootDir;r.httpProxy=n.HttpProxy;r.httpsProxy=n.HttpsProxy;r.noProxy=n.NoProxy;r.name=n.Name;r.labels=n.Labels;r.experimentalBuild=n.ExperimentalBuild;r.serverVersion=n.ServerVersion;r.clusterStore=n.ClusterStore;r.clusterAdvertise=n.ClusterAdvertise;r.defaultRuntime=n.DefaultRuntime;r.liveRestoreEnabled=n.LiveRestoreEnabled;r.isolation=n.Isolation;r.initBinary=n.InitBinary;r.productLicense=n.ProductLicense;if(e){e(r)}t(r)}))}))}))}t.dockerInfo=dockerInfo;function dockerImages(e,t){if(n.isFunction(e)&&!t){t=e;e=false}if(typeof e==="string"&&e==="true"){e=true}if(typeof e!=="boolean"&&e!==undefined){e=false}e=e||false;let r=[];return new Promise((n=>{process.nextTick((()=>{if(!c){c=new i}const s=[];c.listImages(e,(e=>{let i={};try{i=e;if(i&&Object.prototype.toString.call(i)==="[object Array]"&&i.length>0){i.forEach((function(e){if(e.Names&&Object.prototype.toString.call(e.Names)==="[object Array]"&&e.Names.length>0){e.Name=e.Names[0].replace(/^\/|\/$/g,"")}s.push(dockerImagesInspect(e.Id.trim(),e))}));if(s.length){Promise.all(s).then((e=>{if(t){t(e)}n(e)}))}else{if(t){t(r)}n(r)}}else{if(t){t(r)}n(r)}}catch(e){if(t){t(r)}n(r)}}))}))}))}function dockerImagesInspect(e,t){return new Promise((r=>{process.nextTick((()=>{e=e||"";if(typeof e!=="string"){return r()}const s=(n.isPrototypePolluted()?"":n.sanitizeShellString(e,true)).trim();if(s){if(!c){c=new i}c.inspectImage(s.trim(),(e=>{try{r({id:t.Id,container:e.Container,comment:e.Comment,os:e.Os,architecture:e.Architecture,parent:e.Parent,dockerVersion:e.DockerVersion,size:e.Size,sharedSize:t.SharedSize,virtualSize:e.VirtualSize,author:e.Author,created:e.Created?Math.round(new Date(e.Created).getTime()/1e3):0,containerConfig:e.ContainerConfig?e.ContainerConfig:{},graphDriver:e.GraphDriver?e.GraphDriver:{},repoDigests:e.RepoDigests?e.RepoDigests:{},repoTags:e.RepoTags?e.RepoTags:{},config:e.Config?e.Config:{},rootFS:e.RootFS?e.RootFS:{}})}catch(e){r()}}))}else{r()}}))}))}t.dockerImages=dockerImages;function dockerContainers(e,t){function inContainers(e,t){let r=e.filter((e=>e.Id&&e.Id===t));return r.length>0}if(n.isFunction(e)&&!t){t=e;e=false}if(typeof e==="string"&&e==="true"){e=true}if(typeof e!=="boolean"&&e!==undefined){e=false}e=e||false;let r=[];return new Promise((n=>{process.nextTick((()=>{if(!c){c=new i}const s=[];c.listContainers(e,(e=>{let i={};try{i=e;if(i&&Object.prototype.toString.call(i)==="[object Array]"&&i.length>0){for(let e in a){if({}.hasOwnProperty.call(a,e)){if(!inContainers(i,e)){delete a[e]}}}i.forEach((function(e){if(e.Names&&Object.prototype.toString.call(e.Names)==="[object Array]"&&e.Names.length>0){e.Name=e.Names[0].replace(/^\/|\/$/g,"")}s.push(dockerContainerInspect(e.Id.trim(),e))}));if(s.length){Promise.all(s).then((e=>{if(t){t(e)}n(e)}))}else{if(t){t(r)}n(r)}}else{if(t){t(r)}n(r)}}catch(e){for(let e in a){if({}.hasOwnProperty.call(a,e)){if(!inContainers(i,e)){delete a[e]}}}if(t){t(r)}n(r)}}))}))}))}function dockerContainerInspect(e,t){return new Promise((r=>{process.nextTick((()=>{e=e||"";if(typeof e!=="string"){return r()}const s=(n.isPrototypePolluted()?"":n.sanitizeShellString(e,true)).trim();if(s){if(!c){c=new i}c.getInspect(s.trim(),(e=>{try{r({id:t.Id,name:t.Name,image:t.Image,imageID:t.ImageID,command:t.Command,created:t.Created,started:e.State&&e.State.StartedAt?Math.round(new Date(e.State.StartedAt).getTime()/1e3):0,finished:e.State&&e.State.FinishedAt&&!e.State.FinishedAt.startsWith("0001-01-01")?Math.round(new Date(e.State.FinishedAt).getTime()/1e3):0,createdAt:e.Created?e.Created:"",startedAt:e.State&&e.State.StartedAt?e.State.StartedAt:"",finishedAt:e.State&&e.State.FinishedAt&&!e.State.FinishedAt.startsWith("0001-01-01")?e.State.FinishedAt:"",state:t.State,restartCount:e.RestartCount||0,platform:e.Platform||"",driver:e.Driver||"",ports:t.Ports,mounts:t.Mounts})}catch(e){r()}}))}else{r()}}))}))}t.dockerContainers=dockerContainers;function docker_calcCPUPercent(e,t){if(!o){let r=0;let n=e.cpu_usage.total_usage-t.cpu_usage.total_usage;let i=e.system_cpu_usage-t.system_cpu_usage;if(i>0&&n>0){if(t.online_cpus){r=n/i*t.online_cpus*100}else{r=n/i*e.cpu_usage.percpu_usage.length*100}}return r}else{let r=n.nanoSeconds();let i=0;if(u>0){let n=r-u;let s=e.cpu_usage.total_usage-t.cpu_usage.total_usage;if(n>0){i=100*s/n}}u=r;return i}}function docker_calcNetworkIO(e){let t;let r;for(let n in e){if(!{}.hasOwnProperty.call(e,n)){continue}let i=e[n];t=+i.rx_bytes;r=+i.tx_bytes}return{rx:t,wx:r}}function docker_calcBlockIO(e){let t={r:0,w:0};if(e&&e.io_service_bytes_recursive&&Object.prototype.toString.call(e.io_service_bytes_recursive)==="[object Array]"&&e.io_service_bytes_recursive.length>0){e.io_service_bytes_recursive.forEach((function(e){if(e.op&&e.op.toLowerCase()==="read"&&e.value){t.r+=e.value}if(e.op&&e.op.toLowerCase()==="write"&&e.value){t.w+=e.value}}))}return t}function dockerContainerStats(e,t){let r=[];return new Promise((i=>{process.nextTick((()=>{if(n.isFunction(e)&&!t){t=e;r=["*"]}else{e=e||"*";if(typeof e!=="string"){if(t){t([])}return i([])}let s="";s.__proto__.toLowerCase=n.stringToLower;s.__proto__.replace=n.stringReplace;s.__proto__.trim=n.stringTrim;s=e;s=s.trim();if(s!=="*"){s="";const t=(n.isPrototypePolluted()?"":n.sanitizeShellString(e,true)).trim();const r=n.mathMin(t.length,2e3);for(let e=0;e<=r;e++){if(t[e]!==undefined){t[e].__proto__.toLowerCase=n.stringToLower;const r=t[e].toLowerCase();if(r&&r[0]&&!r[1]){s=s+r[0]}}}}s=s.trim().toLowerCase().replace(/,+/g,"|");r=s.split("|")}const s=[];const o=[];if(r.length&&r[0].trim()==="*"){r=[];dockerContainers().then((e=>{for(let t of e){r.push(t.id.substring(0,12))}if(r.length){dockerContainerStats(r.join(",")).then((e=>{if(t){t(e)}i(e)}))}else{if(t){t(s)}i(s)}}))}else{for(let e of r){o.push(dockerContainerStatsSingle(e.trim()))}if(o.length){Promise.all(o).then((e=>{if(t){t(e)}i(e)}))}else{if(t){t(s)}i(s)}}}))}))}function dockerContainerStatsSingle(e){e=e||"";let t={id:e,memUsage:0,memLimit:0,memPercent:0,cpuPercent:0,pids:0,netIO:{rx:0,wx:0},blockIO:{r:0,w:0},restartCount:0,cpuStats:{},precpuStats:{},memoryStats:{},networks:{}};return new Promise((r=>{process.nextTick((()=>{if(e){if(!c){c=new i}c.getInspect(e,(i=>{try{c.getStats(e,(e=>{try{let r=e;if(!r.message){if(e.id){t.id=e.id}t.memUsage=r.memory_stats&&r.memory_stats.usage?r.memory_stats.usage:0;t.memLimit=r.memory_stats&&r.memory_stats.limit?r.memory_stats.limit:0;t.memPercent=r.memory_stats&&r.memory_stats.usage&&r.memory_stats.limit?r.memory_stats.usage/r.memory_stats.limit*100:0;t.cpuPercent=r.cpu_stats&&r.precpu_stats?docker_calcCPUPercent(r.cpu_stats,r.precpu_stats):0;t.pids=r.pids_stats&&r.pids_stats.current?r.pids_stats.current:0;t.restartCount=i.RestartCount?i.RestartCount:0;if(r.networks){t.netIO=docker_calcNetworkIO(r.networks)}if(r.blkio_stats){t.blockIO=docker_calcBlockIO(r.blkio_stats)}t.cpuStats=r.cpu_stats?r.cpu_stats:{};t.precpuStats=r.precpu_stats?r.precpu_stats:{};t.memoryStats=r.memory_stats?r.memory_stats:{};t.networks=r.networks?r.networks:{}}}catch(e){n.noop()}r(t)}))}catch(e){n.noop()}}))}else{r(t)}}))}))}t.dockerContainerStats=dockerContainerStats;function dockerContainerProcesses(e,t){let r=[];return new Promise((s=>{process.nextTick((()=>{e=e||"";if(typeof e!=="string"){return s(r)}const o=(n.isPrototypePolluted()?"":n.sanitizeShellString(e,true)).trim();if(o){if(!c){c=new i}c.getProcesses(o,(e=>{try{if(e&&e.Titles&&e.Processes){let t=e.Titles.map((function(e){return e.toUpperCase()}));let n=t.indexOf("PID");let i=t.indexOf("PPID");let s=t.indexOf("PGID");let o=t.indexOf("VSZ");let a=t.indexOf("TIME");let c=t.indexOf("ELAPSED");let u=t.indexOf("NI");let d=t.indexOf("RUSER");let p=t.indexOf("USER");let m=t.indexOf("RGROUP");let y=t.indexOf("GROUP");let g=t.indexOf("STAT");let b=t.indexOf("RSS");let v=t.indexOf("COMMAND");e.Processes.forEach((e=>{r.push({pidHost:n>=0?e[n]:"",ppid:i>=0?e[i]:"",pgid:s>=0?e[s]:"",user:p>=0?e[p]:"",ruser:d>=0?e[d]:"",group:y>=0?e[y]:"",rgroup:m>=0?e[m]:"",stat:g>=0?e[g]:"",time:a>=0?e[a]:"",elapsed:c>=0?e[c]:"",nice:u>=0?e[u]:"",rss:b>=0?e[b]:"",vsz:o>=0?e[o]:"",command:v>=0?e[v]:""})}))}}catch(e){n.noop()}if(t){t(r)}s(r)}))}else{if(t){t(r)}s(r)}}))}))}t.dockerContainerProcesses=dockerContainerProcesses;function dockerVolumes(e){let t=[];return new Promise((r=>{process.nextTick((()=>{if(!c){c=new i}c.listVolumes((n=>{let i={};try{i=n;if(i&&i.Volumes&&Object.prototype.toString.call(i.Volumes)==="[object Array]"&&i.Volumes.length>0){i.Volumes.forEach((function(e){t.push({name:e.Name,driver:e.Driver,labels:e.Labels,mountpoint:e.Mountpoint,options:e.Options,scope:e.Scope,created:e.CreatedAt?Math.round(new Date(e.CreatedAt).getTime()/1e3):0})}));if(e){e(t)}r(t)}else{if(e){e(t)}r(t)}}catch(n){if(e){e(t)}r(t)}}))}))}))}t.dockerVolumes=dockerVolumes;function dockerAll(e){return new Promise((t=>{process.nextTick((()=>{dockerContainers(true).then((r=>{if(r&&Object.prototype.toString.call(r)==="[object Array]"&&r.length>0){let n=r.length;r.forEach((function(i){dockerContainerStats(i.id).then((s=>{i.memUsage=s[0].memUsage;i.memLimit=s[0].memLimit;i.memPercent=s[0].memPercent;i.cpuPercent=s[0].cpuPercent;i.pids=s[0].pids;i.netIO=s[0].netIO;i.blockIO=s[0].blockIO;i.cpuStats=s[0].cpuStats;i.precpuStats=s[0].precpuStats;i.memoryStats=s[0].memoryStats;i.networks=s[0].networks;dockerContainerProcesses(i.id).then((s=>{i.processes=s;n-=1;if(n===0){if(e){e(r)}t(r)}}))}))}))}else{if(e){e(r)}t(r)}}))}))}))}t.dockerAll=dockerAll},82152:(e,t,r)=>{"use strict";const n=r(41808);const i=r(22037).type()==="Windows_NT";const s=i?"//./pipe/docker_engine":"/var/run/docker.sock";class DockerSocket{getInfo(e){try{let t=n.createConnection({path:s});let r="";let i;t.on("connect",(()=>{t.write("GET http:/info HTTP/1.0\r\n\r\n")}));t.on("data",(e=>{r=r+e.toString()}));t.on("error",(()=>{t=false;e({})}));t.on("end",(()=>{let n=r.indexOf("\r\n\r\n");r=r.substring(n+4);t=false;try{i=JSON.parse(r);e(i)}catch(t){e({})}}))}catch(t){e({})}}listImages(e,t){try{let r=n.createConnection({path:s});let i="";let o;r.on("connect",(()=>{r.write("GET http:/images/json"+(e?"?all=1":"")+" HTTP/1.0\r\n\r\n")}));r.on("data",(e=>{i=i+e.toString()}));r.on("error",(()=>{r=false;t({})}));r.on("end",(()=>{let e=i.indexOf("\r\n\r\n");i=i.substring(e+4);r=false;try{o=JSON.parse(i);t(o)}catch(e){t({})}}))}catch(e){t({})}}inspectImage(e,t){e=e||"";if(e){try{let r=n.createConnection({path:s});let i="";let o;r.on("connect",(()=>{r.write("GET http:/images/"+e+"/json?stream=0 HTTP/1.0\r\n\r\n")}));r.on("data",(e=>{i=i+e.toString()}));r.on("error",(()=>{r=false;t({})}));r.on("end",(()=>{let e=i.indexOf("\r\n\r\n");i=i.substring(e+4);r=false;try{o=JSON.parse(i);t(o)}catch(e){t({})}}))}catch(e){t({})}}else{t({})}}listContainers(e,t){try{let r=n.createConnection({path:s});let i="";let o;r.on("connect",(()=>{r.write("GET http:/containers/json"+(e?"?all=1":"")+" HTTP/1.0\r\n\r\n")}));r.on("data",(e=>{i=i+e.toString()}));r.on("error",(()=>{r=false;t({})}));r.on("end",(()=>{let e=i.indexOf("\r\n\r\n");i=i.substring(e+4);r=false;try{o=JSON.parse(i);t(o)}catch(e){t({})}}))}catch(e){t({})}}getStats(e,t){e=e||"";if(e){try{let r=n.createConnection({path:s});let i="";let o;r.on("connect",(()=>{r.write("GET http:/containers/"+e+"/stats?stream=0 HTTP/1.0\r\n\r\n")}));r.on("data",(e=>{i=i+e.toString()}));r.on("error",(()=>{r=false;t({})}));r.on("end",(()=>{let e=i.indexOf("\r\n\r\n");i=i.substring(e+4);r=false;try{o=JSON.parse(i);t(o)}catch(e){t({})}}))}catch(e){t({})}}else{t({})}}getInspect(e,t){e=e||"";if(e){try{let r=n.createConnection({path:s});let i="";let o;r.on("connect",(()=>{r.write("GET http:/containers/"+e+"/json?stream=0 HTTP/1.0\r\n\r\n")}));r.on("data",(e=>{i=i+e.toString()}));r.on("error",(()=>{r=false;t({})}));r.on("end",(()=>{let e=i.indexOf("\r\n\r\n");i=i.substring(e+4);r=false;try{o=JSON.parse(i);t(o)}catch(e){t({})}}))}catch(e){t({})}}else{t({})}}getProcesses(e,t){e=e||"";if(e){try{let r=n.createConnection({path:s});let i="";let o;r.on("connect",(()=>{r.write("GET http:/containers/"+e+"/top?ps_args=-opid,ppid,pgid,vsz,time,etime,nice,ruser,user,rgroup,group,stat,rss,args HTTP/1.0\r\n\r\n")}));r.on("data",(e=>{i=i+e.toString()}));r.on("error",(()=>{r=false;t({})}));r.on("end",(()=>{let e=i.indexOf("\r\n\r\n");i=i.substring(e+4);r=false;try{o=JSON.parse(i);t(o)}catch(e){t({})}}))}catch(e){t({})}}else{t({})}}listVolumes(e){try{let t=n.createConnection({path:s});let r="";let i;t.on("connect",(()=>{t.write("GET http:/volumes HTTP/1.0\r\n\r\n")}));t.on("data",(e=>{r=r+e.toString()}));t.on("error",(()=>{t=false;e({})}));t.on("end",(()=>{let n=r.indexOf("\r\n\r\n");r=r.substring(n+4);t=false;try{i=JSON.parse(r);e(i)}catch(t){e({})}}))}catch(t){e({})}}}e.exports=DockerSocket},34290:(e,t,r)=>{"use strict";const n=r(79494);const i=r(57147);const s=r(32081).exec;const o=r(32081).execSync;const a=n.promisifySave(r(32081).exec);let c=process.platform;const u=c==="linux"||c==="android";const d=c==="darwin";const p=c==="win32";const m=c==="freebsd";const y=c==="openbsd";const g=c==="netbsd";const b=c==="sunos";let v={};let w={};function fsSize(e,t){if(n.isFunction(e)){t=e;e=""}let r=[];let i=[];function getmacOsFsType(e){if(!e.startsWith("/")){return"NFS"}const t=e.split("/");const n=t[t.length-1];const i=r.filter((e=>e.indexOf(n)>=0));if(i.length===1&&i[0].indexOf("APFS")>=0){return"APFS"}return"HFS"}function isLinuxTmpFs(e){const t=["rootfs","unionfs","squashfs","cramfs","initrd","initramfs","devtmpfs","tmpfs","udev","devfs","specfs","type","appimaged"];let r=false;t.forEach((t=>{if(e.toLowerCase().indexOf(t)>=0){r=true}}));return r}function filterLines(e){let t=e.toString().split("\n");t.shift();if(e.toString().toLowerCase().indexOf("filesystem")){let e=0;for(let r=0;r<t.length;r++){if(t[r]&&t[r].toLowerCase().startsWith("filesystem")){e=r}}for(let r=0;r<e;r++){t.shift()}}return t}function parseDf(e){let t=[];e.forEach((function(e){if(e!==""){e=e.replace(/ +/g," ").split(" ");if(e&&(e[0].startsWith("/")||e[6]&&e[6]==="/"||e[0].indexOf("/")>0||e[0].indexOf(":")===1||!d&&!isLinuxTmpFs(e[1]))){const r=e[0];const n=u||m||y||g?e[1]:getmacOsFsType(e[0]);const s=parseInt(u||m||y||g?e[2]:e[1])*1024;const o=parseInt(u||m||y||g?e[3]:e[2])*1024;const a=parseInt(u||m||y||g?e[4]:e[3])*1024;const c=parseFloat((100*(o/(o+a))).toFixed(2));let d=i&&Object.keys(i).length>0?i[r]||false:null;e.splice(0,u||m||y||g?6:5);const p=e.join(" ");if(!t.find((e=>e.fs===r&&e.type===n))){t.push({fs:r,type:n,size:s,used:o,available:a,use:c,mount:p,rw:d})}}}}));return t}return new Promise((a=>{process.nextTick((()=>{let c=[];if(u||m||y||g||d){let p="";r=[];i={};if(d){p="df -kP";try{r=o("diskutil list").toString().split("\n").filter((e=>!e.startsWith("/")&&e.indexOf(":")>0));o("mount").toString().split("\n").filter((e=>e.startsWith("/"))).forEach((e=>{i[e.split(" ")[0]]=e.toLowerCase().indexOf("read-only")===-1}))}catch(e){n.noop()}}if(u){try{p="export LC_ALL=C; df -lkPTx squashfs; unset LC_ALL";o("cat /proc/mounts 2>/dev/null",n.execOptsLinux).toString().split("\n").filter((e=>e.startsWith("/"))).forEach((e=>{i[e.split(" ")[0]]=i[e.split(" ")[0]]||false;if(e.toLowerCase().indexOf("/snap/")===-1){i[e.split(" ")[0]]=e.toLowerCase().indexOf("rw,")>=0||e.toLowerCase().indexOf(" rw ")>=0}}))}catch(e){n.noop()}}if(m||y||g){try{p="df -lkPT";o("mount").toString().split("\n").forEach((e=>{i[e.split(" ")[0]]=e.toLowerCase().indexOf("read-only")===-1}))}catch(e){n.noop()}}s(p,{maxBuffer:1024*1024},(function(r,n){let i=filterLines(n);c=parseDf(i);if(e){c=c.filter((t=>t.fs.toLowerCase().indexOf(e.toLowerCase())>=0||t.mount.toLowerCase().indexOf(e.toLowerCase())>=0))}if((!r||c.length)&&n.toString().trim()!==""){if(t){t(c)}a(c)}else{s("df -kPT",{maxBuffer:1024*1024},(function(e,r){if(!e){let e=filterLines(r);c=parseDf(e)}if(t){t(c)}a(c)}))}}))}if(b){if(t){t(c)}a(c)}if(p){try{const r=`Get-WmiObject Win32_logicaldisk | select Access,Caption,FileSystem,FreeSpace,Size ${e?"| where -property Caption -eq "+e:""} | fl`;n.powerShell(r).then(((e,r)=>{if(!r){let t=e.toString().split(/\n\s*\n/);t.forEach((function(e){let t=e.split("\r\n");const r=n.toInt(n.getValue(t,"size",":"));const i=n.toInt(n.getValue(t,"freespace",":"));const s=n.getValue(t,"caption",":");const o=n.getValue(t,"access",":");const a=o?n.toInt(o)!==1:null;if(r){c.push({fs:s,type:n.getValue(t,"filesystem",":"),size:r,used:r-i,available:i,use:parseFloat((100*(r-i)/r).toFixed(2)),mount:s,rw:a})}}))}if(t){t(c)}a(c)}))}catch(e){if(t){t(c)}a(c)}}}))}))}t.fsSize=fsSize;function fsOpenFiles(e){return new Promise((t=>{process.nextTick((()=>{const r={max:null,allocated:null,available:null};if(m||y||g||d){let i="sysctl -i kern.maxfiles kern.num_files kern.open_files";s(i,{maxBuffer:1024*1024},(function(i,s){if(!i){let e=s.toString().split("\n");r.max=parseInt(n.getValue(e,"kern.maxfiles",":"),10);r.allocated=parseInt(n.getValue(e,"kern.num_files",":"),10)||parseInt(n.getValue(e,"kern.open_files",":"),10);r.available=r.max-r.allocated}if(e){e(r)}t(r)}))}if(u){i.readFile("/proc/sys/fs/file-nr",(function(n,s){if(!n){let n=s.toString().split("\n");if(n[0]){const e=n[0].replace(/\s+/g," ").split(" ");if(e.length===3){r.allocated=parseInt(e[0],10);r.available=parseInt(e[1],10);r.max=parseInt(e[2],10);if(!r.available){r.available=r.max-r.allocated}}}if(e){e(r)}t(r)}else{i.readFile("/proc/sys/fs/file-max",(function(n,i){if(!n){let e=i.toString().split("\n");if(e[0]){r.max=parseInt(e[0],10)}}if(e){e(r)}t(r)}))}}))}if(b){if(e){e(null)}t(null)}if(p){if(e){e(null)}t(null)}}))}))}t.fsOpenFiles=fsOpenFiles;function parseBytes(e){return parseInt(e.substr(e.indexOf(" (")+2,e.indexOf(" Bytes)")-10))}function parseDevices(e){let t=[];let r=0;e.forEach((e=>{if(e.length>0){if(e[0]==="*"){r++}else{let n=e.split(":");if(n.length>1){if(!t[r]){t[r]={name:"",identifier:"",type:"disk",fsType:"",mount:"",size:0,physical:"HDD",uuid:"",label:"",model:"",serial:"",removable:false,protocol:"",group:"",device:""}}n[0]=n[0].trim().toUpperCase().replace(/ +/g,"");n[1]=n[1].trim();if("DEVICEIDENTIFIER"===n[0]){t[r].identifier=n[1]}if("DEVICENODE"===n[0]){t[r].name=n[1]}if("VOLUMENAME"===n[0]){if(n[1].indexOf("Not applicable")===-1){t[r].label=n[1]}}if("PROTOCOL"===n[0]){t[r].protocol=n[1]}if("DISKSIZE"===n[0]){t[r].size=parseBytes(n[1])}if("FILESYSTEMPERSONALITY"===n[0]){t[r].fsType=n[1]}if("MOUNTPOINT"===n[0]){t[r].mount=n[1]}if("VOLUMEUUID"===n[0]){t[r].uuid=n[1]}if("READ-ONLYMEDIA"===n[0]&&n[1]==="Yes"){t[r].physical="CD/DVD"}if("SOLIDSTATE"===n[0]&&n[1]==="Yes"){t[r].physical="SSD"}if("VIRTUAL"===n[0]){t[r].type="virtual"}if("REMOVABLEMEDIA"===n[0]){t[r].removable=n[1]==="Removable"}if("PARTITIONTYPE"===n[0]){t[r].type="part"}if("DEVICE/MEDIANAME"===n[0]){t[r].model=n[1]}}}}}));return t}function parseBlk(e){let t=[];e.filter((e=>e!=="")).forEach((e=>{try{e=decodeURIComponent(e.replace(/\\x/g,"%"));e=e.replace(/\\/g,"\\\\");let r=JSON.parse(e);t.push({name:r.name,type:r.type,fsType:r.fsType,mount:r.mountpoint,size:parseInt(r.size),physical:r.type==="disk"?r.rota==="0"?"SSD":"HDD":r.type==="rom"?"CD/DVD":"",uuid:r.uuid,label:r.label,model:(r.model||"").trim(),serial:r.serial,removable:r.rm==="1",protocol:r.tran,group:r.group||""})}catch(e){n.noop()}}));t=n.unique(t);t=n.sortByKey(t,["type","name"]);return t}function decodeMdabmData(e){const t=n.getValue(e,"md_level","=");const r=n.getValue(e,"md_name","=");const i=n.getValue(e,"md_uuid","=");const s=[];e.forEach((e=>{if(e.toLowerCase().startsWith("md_device_dev")&&e.toLowerCase().indexOf("/dev/")>0){s.push(e.split("/dev/")[1])}}));return{raid:t,label:r,uuid:i,members:s}}function raidMatchLinux(e){let t=e;try{e.forEach((e=>{if(e.type.startsWith("raid")){const r=o(`mdadm --export --detail /dev/${e.name}`,n.execOptsLinux).toString().split("\n");const i=decodeMdabmData(r);e.label=i.label;e.uuid=i.uuid;if(i.members&&i.members.length&&i.raid===e.type){t=t.map((t=>{if(t.fsType==="linux_raid_member"&&i.members.indexOf(t.name)>=0){t.group=e.name}return t}))}}}))}catch(e){n.noop()}return t}function getDevicesLinux(e){const t=[];e.forEach((e=>{if(e.type.startsWith("disk")){t.push(e.name)}}));return t}function matchDevicesLinux(e){let t=e;try{const r=getDevicesLinux(e);t=t.map((e=>{if(e.type.startsWith("part")||e.type.startsWith("disk")){r.forEach((t=>{if(e.name.startsWith(t)){e.device="/dev/"+t}}))}return e}))}catch(e){n.noop()}return t}function getDevicesMac(e){const t=[];e.forEach((e=>{if(e.type.startsWith("disk")){t.push({name:e.name,model:e.model,device:e.name})}if(e.type.startsWith("virtual")){let r="";t.forEach((t=>{if(t.model===e.model){r=t.device}}));if(r){t.push({name:e.name,model:e.model,device:r})}}}));return t}function matchDevicesMac(e){let t=e;try{const r=getDevicesMac(e);t=t.map((e=>{if(e.type.startsWith("part")||e.type.startsWith("disk")||e.type.startsWith("virtual")){r.forEach((t=>{if(e.name.startsWith(t.name)){e.device=t.device}}))}return e}))}catch(e){n.noop()}return t}function getDevicesWin(e){const t=[];e.forEach((e=>{const r=e.split("\r\n");const i=n.getValue(r,"DeviceID",":");let s=e.split("@{DeviceID=");if(s.length>1){s=s.slice(1);s.forEach((e=>{t.push({name:e.split(";")[0].toUpperCase(),device:i})}))}}));return t}function matchDevicesWin(e,t){const r=getDevicesWin(t);e.map((e=>{const t=r.filter((t=>t.name===e.name.toUpperCase()));if(t.length>0){e.device=t[0].device}return e}));return e}function blkStdoutToObject(e){return e.toString().replace(/NAME=/g,'{"name":').replace(/FSTYPE=/g,',"fsType":').replace(/TYPE=/g,',"type":').replace(/SIZE=/g,',"size":').replace(/MOUNTPOINT=/g,',"mountpoint":').replace(/UUID=/g,',"uuid":').replace(/ROTA=/g,',"rota":').replace(/RO=/g,',"ro":').replace(/RM=/g,',"rm":').replace(/TRAN=/g,',"tran":').replace(/SERIAL=/g,',"serial":').replace(/LABEL=/g,',"label":').replace(/MODEL=/g,',"model":').replace(/OWNER=/g,',"owner":').replace(/GROUP=/g,',"group":').replace(/\n/g,"}\n")}function blockDevices(e){return new Promise((t=>{process.nextTick((()=>{let r=[];if(u){s("lsblk -bPo NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,UUID,ROTA,RO,RM,TRAN,SERIAL,LABEL,MODEL,OWNER 2>/dev/null",{maxBuffer:1024*1024},(function(n,i){if(!n){let n=blkStdoutToObject(i).split("\n");r=parseBlk(n);r=raidMatchLinux(r);r=matchDevicesLinux(r);if(e){e(r)}t(r)}else{s("lsblk -bPo NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,UUID,ROTA,RO,RM,LABEL,MODEL,OWNER 2>/dev/null",{maxBuffer:1024*1024},(function(n,i){if(!n){let e=blkStdoutToObject(i).split("\n");r=parseBlk(e);r=raidMatchLinux(r)}if(e){e(r)}t(r)}))}}))}if(d){s("diskutil info -all",{maxBuffer:1024*1024},(function(n,i){if(!n){let e=i.toString().split("\n");r=parseDevices(e);r=matchDevicesMac(r)}if(e){e(r)}t(r)}))}if(b){if(e){e(r)}t(r)}if(p){let i=["Unknown","NoRoot","Removable","Local","Network","CD/DVD","RAM"];try{const s=[];s.push(n.powerShell("Get-CimInstance -ClassName Win32_LogicalDisk | select Caption,DriveType,Name,FileSystem,Size,VolumeSerialNumber,VolumeName | fl"));s.push(n.powerShell("Get-WmiObject -Class Win32_diskdrive | Select-Object -Property PNPDeviceId,DeviceID, Model, Size, @{L='Partitions'; E={$_.GetRelated('Win32_DiskPartition').GetRelated('Win32_LogicalDisk') | Select-Object -Property DeviceID, VolumeName, Size, FreeSpace}} | fl"));n.promiseAll(s).then((s=>{let o=s.results[0].toString().split(/\n\s*\n/);let a=s.results[1].toString().split(/\n\s*\n/);o.forEach((function(e){let t=e.split("\r\n");let s=n.getValue(t,"drivetype",":");if(s){r.push({name:n.getValue(t,"name",":"),identifier:n.getValue(t,"caption",":"),type:"disk",fsType:n.getValue(t,"filesystem",":").toLowerCase(),mount:n.getValue(t,"caption",":"),size:n.getValue(t,"size",":"),physical:s>=0&&s<=6?i[s]:i[0],uuid:n.getValue(t,"volumeserialnumber",":"),label:n.getValue(t,"volumename",":"),model:"",serial:n.getValue(t,"volumeserialnumber",":"),removable:s==="2",protocol:"",group:"",device:""})}}));r=matchDevicesWin(r,a);if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}if(m||y||g){if(e){e(null)}t(null)}}))}))}t.blockDevices=blockDevices;function calcFsSpeed(e,t){let r={rx:0,wx:0,tx:0,rx_sec:null,wx_sec:null,tx_sec:null,ms:0};if(v&&v.ms){r.rx=e;r.wx=t;r.tx=r.rx+r.wx;r.ms=Date.now()-v.ms;r.rx_sec=(r.rx-v.bytes_read)/(r.ms/1e3);r.wx_sec=(r.wx-v.bytes_write)/(r.ms/1e3);r.tx_sec=r.rx_sec+r.wx_sec;v.rx_sec=r.rx_sec;v.wx_sec=r.wx_sec;v.tx_sec=r.tx_sec;v.bytes_read=r.rx;v.bytes_write=r.wx;v.bytes_overall=r.rx+r.wx;v.ms=Date.now();v.last_ms=r.ms}else{r.rx=e;r.wx=t;r.tx=r.rx+r.wx;v.rx_sec=null;v.wx_sec=null;v.tx_sec=null;v.bytes_read=r.rx;v.bytes_write=r.wx;v.bytes_overall=r.rx+r.wx;v.ms=Date.now();v.last_ms=0}return r}function fsStats(e){return new Promise((t=>{process.nextTick((()=>{if(p||m||y||g||b){return t(null)}let r={rx:0,wx:0,tx:0,rx_sec:null,wx_sec:null,tx_sec:null,ms:0};let n=0;let i=0;if(v&&!v.ms||v&&v.ms&&Date.now()-v.ms>=500){if(u){s("lsblk -r 2>/dev/null | grep /",{maxBuffer:1024*1024},(function(o,a){if(!o){let o=a.toString().split("\n");let c=[];o.forEach((function(e){if(e!==""){e=e.trim().split(" ");if(c.indexOf(e[0])===-1){c.push(e[0])}}}));let u=c.join("|");s('cat /proc/diskstats | egrep "'+u+'"',{maxBuffer:1024*1024},(function(s,o){if(!s){let e=o.toString().split("\n");e.forEach((function(e){e=e.trim();if(e!==""){e=e.replace(/ +/g," ").split(" ");n+=parseInt(e[5])*512;i+=parseInt(e[9])*512}}));r=calcFsSpeed(n,i)}if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}))}if(d){s('ioreg -c IOBlockStorageDriver -k Statistics -r -w0 | sed -n "/IOBlockStorageDriver/,/Statistics/p" | grep "Statistics" | tr -cd "01234567890,\n"',{maxBuffer:1024*1024},(function(s,o){if(!s){let e=o.toString().split("\n");e.forEach((function(e){e=e.trim();if(e!==""){e=e.split(",");n+=parseInt(e[2]);i+=parseInt(e[9])}}));r=calcFsSpeed(n,i)}if(e){e(r)}t(r)}))}}else{r.ms=v.last_ms;r.rx=v.bytes_read;r.wx=v.bytes_write;r.tx=v.bytes_read+v.bytes_write;r.rx_sec=v.rx_sec;r.wx_sec=v.wx_sec;r.tx_sec=v.tx_sec;if(e){e(r)}t(r)}}))}))}t.fsStats=fsStats;function calcDiskIO(e,t,r,n,i){let s={rIO:0,wIO:0,tIO:0,rIO_sec:null,wIO_sec:null,tIO_sec:null,rWaitTime:0,wWaitTime:0,tWaitTime:0,rWaitPercent:null,wWaitPercent:null,tWaitPercent:null,ms:0};if(w&&w.ms){s.rIO=e;s.wIO=t;s.tIO=e+t;s.ms=Date.now()-w.ms;s.rIO_sec=(s.rIO-w.rIO)/(s.ms/1e3);s.wIO_sec=(s.wIO-w.wIO)/(s.ms/1e3);s.tIO_sec=s.rIO_sec+s.wIO_sec;s.rWaitTime=r;s.wWaitTime=n;s.tWaitTime=i;s.rWaitPercent=(s.rWaitTime-w.rWaitTime)*100/s.ms;s.wWaitPercent=(s.wWaitTime-w.wWaitTime)*100/s.ms;s.tWaitPercent=(s.tWaitTime-w.tWaitTime)*100/s.ms;w.rIO=e;w.wIO=t;w.rIO_sec=s.rIO_sec;w.wIO_sec=s.wIO_sec;w.tIO_sec=s.tIO_sec;w.rWaitTime=r;w.wWaitTime=n;w.tWaitTime=i;w.rWaitPercent=s.rWaitPercent;w.wWaitPercent=s.wWaitPercent;w.tWaitPercent=s.tWaitPercent;w.last_ms=s.ms;w.ms=Date.now()}else{s.rIO=e;s.wIO=t;s.tIO=e+t;s.rWaitTime=r;s.wWaitTime=n;s.tWaitTime=i;w.rIO=e;w.wIO=t;w.rIO_sec=null;w.wIO_sec=null;w.tIO_sec=null;w.rWaitTime=r;w.wWaitTime=n;w.tWaitTime=i;w.rWaitPercent=null;w.wWaitPercent=null;w.tWaitPercent=null;w.last_ms=0;w.ms=Date.now()}return s}function disksIO(e){return new Promise((t=>{process.nextTick((()=>{if(p){return t(null)}if(b){return t(null)}let r={rIO:0,wIO:0,tIO:0,rIO_sec:null,wIO_sec:null,tIO_sec:null,rWaitTime:0,wWaitTime:0,tWaitTime:0,rWaitPercent:null,wWaitPercent:null,tWaitPercent:null,ms:0};let n=0;let i=0;let o=0;let a=0;let c=0;if(w&&!w.ms||w&&w.ms&&Date.now()-w.ms>=500){if(u||m||y||g){let u='for mount in `lsblk 2>/dev/null | grep " disk " | sed "s/[│└─├]//g" | awk \'{$1=$1};1\' | cut -d " " -f 1 | sort -u`; do cat /sys/block/$mount/stat | sed -r "s/ +/;/g" | sed -r "s/^;//"; done';s(u,{maxBuffer:1024*1024},(function(s,u){if(!s){let s=u.split("\n");s.forEach((function(e){if(!e){return}let t=e.split(";");n+=parseInt(t[0]);i+=parseInt(t[4]);o+=parseInt(t[3]);a+=parseInt(t[7]);c+=parseInt(t[10])}));r=calcDiskIO(n,i,o,a,c);if(e){e(r)}t(r)}else{if(e){e(r)}t(r)}}))}if(d){s('ioreg -c IOBlockStorageDriver -k Statistics -r -w0 | sed -n "/IOBlockStorageDriver/,/Statistics/p" | grep "Statistics" | tr -cd "01234567890,\n"',{maxBuffer:1024*1024},(function(s,u){if(!s){let e=u.toString().split("\n");e.forEach((function(e){e=e.trim();if(e!==""){e=e.split(",");n+=parseInt(e[10]);i+=parseInt(e[0])}}));r=calcDiskIO(n,i,o,a,c)}if(e){e(r)}t(r)}))}}else{r.rIO=w.rIO;r.wIO=w.wIO;r.tIO=w.rIO+w.wIO;r.ms=w.last_ms;r.rIO_sec=w.rIO_sec;r.wIO_sec=w.wIO_sec;r.tIO_sec=w.tIO_sec;r.rWaitTime=w.rWaitTime;r.wWaitTime=w.wWaitTime;r.tWaitTime=w.tWaitTime;r.rWaitPercent=w.rWaitPercent;r.wWaitPercent=w.wWaitPercent;r.tWaitPercent=w.tWaitPercent;if(e){e(r)}t(r)}}))}))}t.disksIO=disksIO;function diskLayout(e){function getVendorFromModel(e){const t=[{pattern:"WESTERN.*",manufacturer:"Western Digital"},{pattern:"^WDC.*",manufacturer:"Western Digital"},{pattern:"WD.*",manufacturer:"Western Digital"},{pattern:"TOSHIBA.*",manufacturer:"Toshiba"},{pattern:"HITACHI.*",manufacturer:"Hitachi"},{pattern:"^IC.*",manufacturer:"Hitachi"},{pattern:"^HTS.*",manufacturer:"Hitachi"},{pattern:"SANDISK.*",manufacturer:"SanDisk"},{pattern:"KINGSTON.*",manufacturer:"Kingston Technology"},{pattern:"^SONY.*",manufacturer:"Sony"},{pattern:"TRANSCEND.*",manufacturer:"Transcend"},{pattern:"SAMSUNG.*",manufacturer:"Samsung"},{pattern:"^ST(?!I\\ ).*",manufacturer:"Seagate"},{pattern:"^STI\\ .*",manufacturer:"SimpleTech"},{pattern:"^D...-.*",manufacturer:"IBM"},{pattern:"^IBM.*",manufacturer:"IBM"},{pattern:"^FUJITSU.*",manufacturer:"Fujitsu"},{pattern:"^MP.*",manufacturer:"Fujitsu"},{pattern:"^MK.*",manufacturer:"Toshiba"},{pattern:"MAXTO.*",manufacturer:"Maxtor"},{pattern:"PIONEER.*",manufacturer:"Pioneer"},{pattern:"PHILIPS.*",manufacturer:"Philips"},{pattern:"QUANTUM.*",manufacturer:"Quantum Technology"},{pattern:"FIREBALL.*",manufacturer:"Quantum Technology"},{pattern:"^VBOX.*",manufacturer:"VirtualBox"},{pattern:"CORSAIR.*",manufacturer:"Corsair Components"},{pattern:"CRUCIAL.*",manufacturer:"Crucial"},{pattern:"ECM.*",manufacturer:"ECM"},{pattern:"INTEL.*",manufacturer:"INTEL"},{pattern:"EVO.*",manufacturer:"Samsung"},{pattern:"APPLE.*",manufacturer:"Apple"}];let r="";if(e){e=e.toUpperCase();t.forEach((t=>{const n=RegExp(t.pattern);if(n.test(e)){r=t.manufacturer}}))}return r}return new Promise((t=>{process.nextTick((()=>{const commitResult=r=>{for(let e=0;e<r.length;e++){delete r[e].BSDName}if(e){e(r)}t(r)};let r=[];let i="";if(u){let e="";s("export LC_ALL=C; lsblk -ablJO 2>/dev/null; unset LC_ALL",{maxBuffer:1024*1024},(function(t,a){if(!t){try{const t=a.toString().trim();let s=[];try{const e=JSON.parse(t);if(e&&{}.hasOwnProperty.call(e,"blockdevices")){s=e.blockdevices.filter((e=>e.type==="disk"&&e.size>0&&(e.model!==null||e.mountpoint===null&&e.label===null&&e.fstype===null&&e.parttype===null&&e.path&&e.path.indexOf("/ram")!==0&&e.path.indexOf("/loop")!==0&&e["disc-max"]&&e["disc-max"]!==0)))}}catch(e){try{const e=o("export LC_ALL=C; lsblk -bPo NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,UUID,ROTA,RO,RM,LABEL,MODEL,OWNER,GROUP 2>/dev/null; unset LC_ALL",n.execOptsLinux).toString();let t=blkStdoutToObject(e).split("\n");const r=parseBlk(t);s=r.filter((e=>e.type==="disk"&&e.size>0&&(e.model!==null&&e.model!==""||e.mount===""&&e.label===""&&e.fsType==="")))}catch(e){n.noop()}}s.forEach((t=>{let s="";const a="/dev/"+t.name;const c=t.name;try{s=o("cat /sys/block/"+c+"/queue/rotational 2>/dev/null",n.execOptsLinux).toString().split("\n")[0]}catch(e){n.noop()}let u=t.tran?t.tran.toUpperCase().trim():"";if(u==="NVME"){s="2";u="PCIe"}r.push({device:a,type:s==="0"?"SSD":s==="1"?"HD":s==="2"?"NVMe":t.model&&t.model.indexOf("SSD")>-1?"SSD":t.model&&t.model.indexOf("NVM")>-1?"NVMe":"HD",name:t.model||"",vendor:getVendorFromModel(t.model)||(t.vendor?t.vendor.trim():""),size:t.size||0,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:t.rev?t.rev.trim():"",serialNum:t.serial?t.serial.trim():"",interfaceType:u,smartStatus:"unknown",temperature:null,BSDName:a});i+=`printf "\n${a}|"; smartctl -H ${a} | grep overall;`;e+=`${e?'printf ",";':""}smartctl -a -j ${a};`}))}catch(e){n.noop()}}if(e){s(e,{maxBuffer:1024*1024},(function(e,t){try{const e=JSON.parse(`[${t}]`);e.forEach((e=>{const t=e.smartctl.argv[e.smartctl.argv.length-1];for(let n=0;n<r.length;n++){if(r[n].BSDName===t){r[n].smartStatus=e.smart_status.passed?"Ok":e.smart_status.passed===false?"Predicted Failure":"unknown";if(e.temperature&&e.temperature.current){r[n].temperature=e.temperature.current}r[n].smartData=e}}}));commitResult(r)}catch(e){if(i){i=i+'printf "\n"';s(i,{maxBuffer:1024*1024},(function(e,t){let n=t.toString().split("\n");n.forEach((e=>{if(e){let t=e.split("|");if(t.length===2){let e=t[0];t[1]=t[1].trim();let n=t[1].split(":");if(n.length===2){n[1]=n[1].trim();let t=n[1].toLowerCase();for(let n=0;n<r.length;n++){if(r[n].BSDName===e){r[n].smartStatus=t==="passed"?"Ok":t==="failed!"?"Predicted Failure":"unknown"}}}}}}));commitResult(r)}))}else{commitResult(r)}}}))}else{commitResult(r)}}))}if(m||y||g){if(e){e(r)}t(r)}if(b){if(e){e(r)}t(r)}if(d){s("system_profiler SPSerialATADataType SPNVMeDataType SPUSBDataType",{maxBuffer:1024*1024},(function(o,a){if(!o){let o=a.toString().split("\n");let c=[];let u=[];let d=[];let p="SATA";o.forEach((e=>{if(e==="NVMExpress:"){p="NVMe"}else if(e==="USB:"){p="USB"}else if(e==="SATA/SATA Express:"){p="SATA"}else if(p==="SATA"){c.push(e)}else if(p==="NVMe"){u.push(e)}else if(p==="USB"){d.push(e)}}));try{let e=c.join("\n").split(" Physical Interconnect: ");e.shift();e.forEach((function(e){e="InterfaceType: "+e;let t=e.split("\n");const s=n.getValue(t,"Medium Type",":",true).trim();const o=n.getValue(t,"capacity",":",true).trim();const a=n.getValue(t,"BSD Name",":",true).trim();if(o){let e=0;if(o.indexOf("(")>=0){e=parseInt(o.match(/\(([^)]+)\)/)[1].replace(/\./g,"").replace(/,/g,"").replace(/\s/g,""))}if(!e){e=parseInt(o)}if(e){const o=n.getValue(t,"S.M.A.R.T. status",":",true).trim().toLowerCase();r.push({device:a,type:s.startsWith("Solid")?"SSD":"HD",name:n.getValue(t,"Model",":",true).trim(),vendor:getVendorFromModel(n.getValue(t,"Model",":",true).trim())||n.getValue(t,"Manufacturer",":",true),size:e,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:n.getValue(t,"Revision",":",true).trim(),serialNum:n.getValue(t,"Serial Number",":",true).trim(),interfaceType:n.getValue(t,"InterfaceType",":",true).trim(),smartStatus:o==="verified"?"OK":o||"unknown",temperature:null,BSDName:a});i=i+'printf "\n'+a+'|"; diskutil info /dev/'+a+" | grep SMART;"}}}))}catch(e){n.noop()}try{let e=u.join("\n").split("\n\n          Capacity:");e.shift();e.forEach((function(e){e="!Capacity: "+e;let t=e.split("\n");const s=n.getValue(t,"link width",":",true).trim();const o=n.getValue(t,"!capacity",":",true).trim();const a=n.getValue(t,"BSD Name",":",true).trim();if(o){let e=0;if(o.indexOf("(")>=0){e=parseInt(o.match(/\(([^)]+)\)/)[1].replace(/\./g,"").replace(/,/g,"").replace(/\s/g,""))}if(!e){e=parseInt(o)}if(e){const o=n.getValue(t,"S.M.A.R.T. status",":",true).trim().toLowerCase();r.push({device:a,type:"NVMe",name:n.getValue(t,"Model",":",true).trim(),vendor:getVendorFromModel(n.getValue(t,"Model",":",true).trim()),size:e,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:n.getValue(t,"Revision",":",true).trim(),serialNum:n.getValue(t,"Serial Number",":",true).trim(),interfaceType:("PCIe "+s).trim(),smartStatus:o==="verified"?"OK":o||"unknown",temperature:null,BSDName:a});i=i+'printf "\n'+a+'|"; diskutil info /dev/'+a+" | grep SMART;"}}}))}catch(e){n.noop()}try{let e=d.join("\n").replaceAll("Media:\n ","Model:").split("\n\n          Product ID:");e.shift();e.forEach((function(e){let t=e.split("\n");const s=n.getValue(t,"Capacity",":",true).trim();const o=n.getValue(t,"BSD Name",":",true).trim();if(s){let e=0;if(s.indexOf("(")>=0){e=parseInt(s.match(/\(([^)]+)\)/)[1].replace(/\./g,"").replace(/,/g,"").replace(/\s/g,""))}if(!e){e=parseInt(s)}if(e){const s=n.getValue(t,"S.M.A.R.T. status",":",true).trim().toLowerCase();r.push({device:o,type:"USB",name:n.getValue(t,"Model",":",true).trim().replaceAll(":",""),vendor:getVendorFromModel(n.getValue(t,"Model",":",true).trim()),size:e,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:n.getValue(t,"Revision",":",true).trim(),serialNum:n.getValue(t,"Serial Number",":",true).trim(),interfaceType:"USB",smartStatus:s==="verified"?"OK":s||"unknown",temperature:null,BSDName:o});i=i+'printf "\n'+o+'|"; diskutil info /dev/'+o+" | grep SMART;"}}}))}catch(e){n.noop()}if(i){i=i+'printf "\n"';s(i,{maxBuffer:1024*1024},(function(n,i){let s=i.toString().split("\n");s.forEach((e=>{if(e){let t=e.split("|");if(t.length===2){let e=t[0];t[1]=t[1].trim();let n=t[1].split(":");if(n.length===2){n[1]=n[1].trim();let t=n[1].toLowerCase();for(let n=0;n<r.length;n++){if(r[n].BSDName===e){r[n].smartStatus=t==="not supported"?"not supported":t==="verified"?"Ok":t==="failing"?"Predicted Failure":"unknown"}}}}}}));for(let e=0;e<r.length;e++){delete r[e].BSDName}if(e){e(r)}t(r)}))}else{for(let e=0;e<r.length;e++){delete r[e].BSDName}if(e){e(r)}t(r)}}}))}if(p){try{const i=[];i.push(n.powerShell("Get-CimInstance Win32_DiskDrive | select Caption,Size,Status,PNPDeviceId,DeviceId,BytesPerSector,TotalCylinders,TotalHeads,TotalSectors,TotalTracks,TracksPerCylinder,SectorsPerTrack,FirmwareRevision,SerialNumber,InterfaceType | fl"));i.push(n.powerShell("Get-PhysicalDisk | select BusType,MediaType,FriendlyName,Model,SerialNumber,Size | fl"));if(n.smartMonToolsInstalled()){try{const e=JSON.parse(o("smartctl --scan -j").toString());if(e&&e.devices&&e.devices.length>0){e.devices.forEach((e=>{i.push(a(`smartctl -j -a ${e.name}`,n.execOptsWin))}))}}catch(e){n.noop()}}n.promiseAll(i).then((i=>{let s=i.results[0].toString().split(/\n\s*\n/);s.forEach((function(e){let t=e.split("\r\n");const i=n.getValue(t,"Size",":").trim();const s=n.getValue(t,"Status",":").trim().toLowerCase();if(i){r.push({device:n.getValue(t,"DeviceId",":"),type:e.indexOf("SSD")>-1?"SSD":"HD",name:n.getValue(t,"Caption",":"),vendor:getVendorFromModel(n.getValue(t,"Caption",":",true).trim()),size:parseInt(i),bytesPerSector:parseInt(n.getValue(t,"BytesPerSector",":")),totalCylinders:parseInt(n.getValue(t,"TotalCylinders",":")),totalHeads:parseInt(n.getValue(t,"TotalHeads",":")),totalSectors:parseInt(n.getValue(t,"TotalSectors",":")),totalTracks:parseInt(n.getValue(t,"TotalTracks",":")),tracksPerCylinder:parseInt(n.getValue(t,"TracksPerCylinder",":")),sectorsPerTrack:parseInt(n.getValue(t,"SectorsPerTrack",":")),firmwareRevision:n.getValue(t,"FirmwareRevision",":").trim(),serialNum:n.getValue(t,"SerialNumber",":").trim(),interfaceType:n.getValue(t,"InterfaceType",":").trim(),smartStatus:s==="ok"?"Ok":s==="degraded"?"Degraded":s==="pred fail"?"Predicted Failure":"Unknown",temperature:null})}}));s=i.results[1].split(/\n\s*\n/);s.forEach((function(e){let t=e.split("\r\n");const i=n.getValue(t,"SerialNumber",":").trim();const s=n.getValue(t,"FriendlyName",":").trim().replace("Msft ","Microsoft");const o=n.getValue(t,"Size",":").trim();const a=n.getValue(t,"Model",":").trim();const c=n.getValue(t,"BusType",":").trim();let u=n.getValue(t,"MediaType",":").trim();if(u==="3"||u==="HDD"){u="HD"}if(u==="4"){u="SSD"}if(u==="5"){u="SCM"}if(u==="Unspecified"&&(a.toLowerCase().indexOf("virtual")>-1||a.toLowerCase().indexOf("vbox")>-1)){u="Virtual"}if(o){let e=n.findObjectByKey(r,"serialNum",i);if(e===-1||i===""){e=n.findObjectByKey(r,"name",s)}if(e!=-1){r[e].type=u;r[e].interfaceType=c}}}));i.results.shift();i.results.shift();if(i.results.length){i.results.forEach((e=>{try{const t=JSON.parse(e);if(t.serial_number){const e=t.serial_number;let i=n.findObjectByKey(r,"serialNum",e);if(i!=-1){r[i].smartStatus=t.smart_status&&t.smart_status.passed?"Ok":t.smart_status&&t.smart_status.passed===false?"Predicted Failure":"unknown";if(t.temperature&&t.temperature.current){r[i].temperature=t.temperature.current}r[i].smartData=t}}}catch(e){n.noop()}}))}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}}))}))}t.diskLayout=diskLayout},12084:(e,t,r)=>{"use strict";const n=r(57147);const i=r(32081).exec;const s=r(32081).execSync;const o=r(79494);let a=process.platform;let c="";const u=a==="linux"||a==="android";const d=a==="darwin";const p=a==="win32";const m=a==="freebsd";const y=a==="openbsd";const g=a==="netbsd";const b=a==="sunos";let v=0;let w=0;let _=0;let C=0;const P={"-2":"UNINITIALIZED","-1":"OTHER",0:"HD15",1:"SVIDEO",2:"Composite video",3:"Component video",4:"DVI",5:"HDMI",6:"LVDS",8:"D_JPN",9:"SDI",10:"DP",11:"DP embedded",12:"UDI",13:"UDI embedded",14:"SDTVDONGLE",15:"MIRACAST",2147483648:"INTERNAL"};function getVendorFromModel(e){const t=[{pattern:"^LG.+",manufacturer:"LG"},{pattern:"^BENQ.+",manufacturer:"BenQ"},{pattern:"^ASUS.+",manufacturer:"Asus"},{pattern:"^DELL.+",manufacturer:"Dell"},{pattern:"^SAMSUNG.+",manufacturer:"Samsung"},{pattern:"^VIEWSON.+",manufacturer:"ViewSonic"},{pattern:"^SONY.+",manufacturer:"Sony"},{pattern:"^ACER.+",manufacturer:"Acer"},{pattern:"^AOC.+",manufacturer:"AOC Monitors"},{pattern:"^HP.+",manufacturer:"HP"},{pattern:"^EIZO.?",manufacturer:"Eizo"},{pattern:"^PHILIPS.?",manufacturer:"Philips"},{pattern:"^IIYAMA.?",manufacturer:"Iiyama"},{pattern:"^SHARP.?",manufacturer:"Sharp"},{pattern:"^NEC.?",manufacturer:"NEC"},{pattern:"^LENOVO.?",manufacturer:"Lenovo"},{pattern:"COMPAQ.?",manufacturer:"Compaq"},{pattern:"APPLE.?",manufacturer:"Apple"},{pattern:"INTEL.?",manufacturer:"Intel"},{pattern:"AMD.?",manufacturer:"AMD"},{pattern:"NVIDIA.?",manufacturer:"NVDIA"}];let r="";if(e){e=e.toUpperCase();t.forEach((t=>{const n=RegExp(t.pattern);if(n.test(e)){r=t.manufacturer}}))}return r}function getVendorFromId(e){const t={610:"Apple","1e6d":"LG","10ac":"DELL","4dd9":"Sony","38a3":"NEC"};return t[e]||""}function vendorToId(e){let t="";e=(e||"").toLowerCase();if(e.indexOf("apple")>=0){t="0x05ac"}else if(e.indexOf("nvidia")>=0){t="0x10de"}else if(e.indexOf("intel")>=0){t="0x8086"}else if(e.indexOf("ati")>=0||e.indexOf("amd")>=0){t="0x1002"}return t}function getMetalVersion(e){const t={spdisplays_mtlgpufamilymac1:"mac1",spdisplays_mtlgpufamilymac2:"mac2",spdisplays_mtlgpufamilyapple1:"apple1",spdisplays_mtlgpufamilyapple2:"apple2",spdisplays_mtlgpufamilyapple3:"apple3",spdisplays_mtlgpufamilyapple4:"apple4",spdisplays_mtlgpufamilyapple5:"apple5",spdisplays_mtlgpufamilyapple6:"apple6",spdisplays_mtlgpufamilyapple7:"apple7",spdisplays_metalfeaturesetfamily11:"family1_v1",spdisplays_metalfeaturesetfamily12:"family1_v2",spdisplays_metalfeaturesetfamily13:"family1_v3",spdisplays_metalfeaturesetfamily14:"family1_v4",spdisplays_metalfeaturesetfamily21:"family2_v1"};return t[e]||""}function graphics(e){function parseLinesDarwin(e){const t={controllers:[],displays:[]};try{e.forEach((function(e){const r=(e.sppci_bus||"").indexOf("builtin")>-1?"Built-In":(e.sppci_bus||"").indexOf("pcie")>-1?"PCIe":"";const n=(parseInt(e.spdisplays_vram||"",10)||0)*((e.spdisplays_vram||"").indexOf("GB")>-1?1024:1);const i=(parseInt(e.spdisplays_vram_shared||"",10)||0)*((e.spdisplays_vram_shared||"").indexOf("GB")>-1?1024:1);let s=getMetalVersion(e.spdisplays_metal||e.spdisplays_metalfamily||"");t.controllers.push({vendor:getVendorFromModel(e.spdisplays_vendor||"")||e.spdisplays_vendor||"",model:e.sppci_model||"",bus:r,vramDynamic:r==="Built-In",vram:n||i||null,deviceId:e["spdisplays_device-id"]||"",vendorId:e["spdisplays_vendor-id"]||vendorToId((e["spdisplays_vendor"]||"")+(e.sppci_model||"")),external:e.sppci_device_type==="spdisplays_egpu",cores:e["sppci_cores"]||null,metalVersion:s});if(e.spdisplays_ndrvs&&e.spdisplays_ndrvs.length){e.spdisplays_ndrvs.forEach((function(e){const r=e["spdisplays_connection_type"]||"";const n=(e["_spdisplays_resolution"]||"").split("@");const i=n[0].split("x");const s=(e["_spdisplays_pixels"]||"").split("x");const o=e["spdisplays_depth"]||"";const a=e["_spdisplays_display-serial-number"]||e["_spdisplays_display-serial-number2"]||null;t.displays.push({vendor:getVendorFromId(e["_spdisplays_display-vendor-id"]||"")||getVendorFromModel(e["_name"]||""),vendorId:e["_spdisplays_display-vendor-id"]||"",model:e["_name"]||"",productionYear:e["_spdisplays_display-year"]||null,serial:a!=="0"?a:null,displayId:e["_spdisplays_displayID"]||null,main:e["spdisplays_main"]?e["spdisplays_main"]==="spdisplays_yes":false,builtin:(e["spdisplays_display_type"]||"").indexOf("built-in")>-1,connection:r.indexOf("_internal")>-1?"Internal":r.indexOf("_displayport")>-1?"Display Port":r.indexOf("_hdmi")>-1?"HDMI":null,sizeX:null,sizeY:null,pixelDepth:o==="CGSThirtyBitColor"?30:o==="CGSThirtytwoBitColor"?32:o==="CGSTwentyfourBitColor"?24:null,resolutionX:s.length>1?parseInt(s[0],10):null,resolutionY:s.length>1?parseInt(s[1],10):null,currentResX:i.length>1?parseInt(i[0],10):null,currentResY:i.length>1?parseInt(i[1],10):null,positionX:0,positionY:0,currentRefreshRate:n.length>1?parseInt(n[1],10):null})}))}}));return t}catch(e){return t}}function parseLinesLinuxControllers(e){let t=[];let r={vendor:"",subVendor:"",model:"",bus:"",busAddress:"",vram:null,vramDynamic:false,pciID:""};let n=false;let i=[];try{i=s('export LC_ALL=C; dmidecode -t 9 2>/dev/null; unset LC_ALL | grep "Bus Address: "',o.execOptsLinux).toString().split("\n");for(let e=0;e<i.length;e++){i[e]=i[e].replace("Bus Address:","").replace("0000:","").trim()}i=i.filter((function(e){return e!=null&&e}))}catch(e){o.noop()}let a=1;e.forEach((s=>{let o="";if(a<e.length&&e[a]){o=e[a];if(o.indexOf(":")>0){o=o.split(":")[1]}}if(""!==s.trim()){if(" "!==s[0]&&"\t"!==s[0]){let e=i.indexOf(s.split(" ")[0])>=0;let a=s.toLowerCase().indexOf(" vga ");let c=s.toLowerCase().indexOf("3d controller");if(a!==-1||c!==-1){if(c!==-1&&a===-1){a=c}if(r.vendor||r.model||r.bus||r.vram!==null||r.vramDynamic){t.push(r);r={vendor:"",model:"",bus:"",busAddress:"",vram:null,vramDynamic:false}}const u=s.split(" ")[0];if(/[\da-fA-F]{2}:[\da-fA-F]{2}\.[\da-fA-F]/.test(u)){r.busAddress=u}n=true;let d=s.search(/\[[0-9a-f]{4}:[0-9a-f]{4}]|$/);let p=s.substr(a,d-a).split(":");r.busAddress=s.substr(0,a).trim();if(p.length>1){p[1]=p[1].trim();if(p[1].toLowerCase().indexOf("corporation")>=0){r.vendor=p[1].substr(0,p[1].toLowerCase().indexOf("corporation")+11).trim();r.model=p[1].substr(p[1].toLowerCase().indexOf("corporation")+11,200).split("(")[0].trim();r.bus=i.length>0&&e?"PCIe":"Onboard";r.vram=null;r.vramDynamic=false}else if(p[1].toLowerCase().indexOf(" inc.")>=0){if((p[1].match(/]/g)||[]).length>1){r.vendor=p[1].substr(0,p[1].toLowerCase().indexOf("]")+1).trim();r.model=p[1].substr(p[1].toLowerCase().indexOf("]")+1,200).trim().split("(")[0].trim()}else{r.vendor=p[1].substr(0,p[1].toLowerCase().indexOf(" inc.")+5).trim();r.model=p[1].substr(p[1].toLowerCase().indexOf(" inc.")+5,200).trim().split("(")[0].trim()}r.bus=i.length>0&&e?"PCIe":"Onboard";r.vram=null;r.vramDynamic=false}else if(p[1].toLowerCase().indexOf(" ltd.")>=0){if((p[1].match(/]/g)||[]).length>1){r.vendor=p[1].substr(0,p[1].toLowerCase().indexOf("]")+1).trim();r.model=p[1].substr(p[1].toLowerCase().indexOf("]")+1,200).trim().split("(")[0].trim()}else{r.vendor=p[1].substr(0,p[1].toLowerCase().indexOf(" ltd.")+5).trim();r.model=p[1].substr(p[1].toLowerCase().indexOf(" ltd.")+5,200).trim().split("(")[0].trim()}}if(r.model&&o.indexOf(r.model)!==-1){const e=o.split(r.model)[0].trim();if(e){r.subVendor=e}}}}else{n=false}}if(n){let e=s.split(":");if(e.length>1&&e[0].replace(/ +/g,"").toLowerCase().indexOf("devicename")!==-1&&e[1].toLowerCase().indexOf("onboard")!==-1){r.bus="Onboard"}if(e.length>1&&e[0].replace(/ +/g,"").toLowerCase().indexOf("region")!==-1&&e[1].toLowerCase().indexOf("memory")!==-1){let t=e[1].split("=");if(t.length>1){r.vram=parseInt(t[1])}}}}a++}));if(r.vendor||r.model||r.bus||r.busAddress||r.vram!==null||r.vramDynamic){t.push(r)}return t}function parseLinesLinuxClinfo(e,t){const r=/\[([^\]]+)\]\s+(\w+)\s+(.*)/;const n=t.reduce(((e,t)=>{const n=r.exec(t.trim());if(n){if(!e[n[1]]){e[n[1]]={}}e[n[1]][n[2]]=n[3]}return e}),{});for(let t in n){const r=n[t];if(r["CL_DEVICE_TYPE"]==="CL_DEVICE_TYPE_GPU"){let t;if(r["CL_DEVICE_TOPOLOGY_AMD"]){const e=r["CL_DEVICE_TOPOLOGY_AMD"].match(/[a-zA-Z0-9]+:\d+\.\d+/);if(e){t=e[0]}}else if(r["CL_DEVICE_PCI_BUS_ID_NV"]&&r["CL_DEVICE_PCI_SLOT_ID_NV"]){const e=parseInt(r["CL_DEVICE_PCI_BUS_ID_NV"]);const n=parseInt(r["CL_DEVICE_PCI_SLOT_ID_NV"]);if(!isNaN(e)&&!isNaN(n)){const r=e&255;const i=n>>3&255;const s=n&7;t=`${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}.${s}`}}if(t){let n=e.find((e=>e.busAddress===t));if(!n){n={vendor:"",model:"",bus:"",busAddress:t,vram:null,vramDynamic:false};e.push(n)}n.vendor=r["CL_DEVICE_VENDOR"];if(r["CL_DEVICE_BOARD_NAME_AMD"]){n.model=r["CL_DEVICE_BOARD_NAME_AMD"]}else{n.model=r["CL_DEVICE_NAME"]}const i=parseInt(r["CL_DEVICE_GLOBAL_MEM_SIZE"]);if(!isNaN(i)){n.vram=Math.round(i/1024/1024)}}}}return e}function getNvidiaSmi(){if(c){return c}if(p){try{const e=o.WINDIR+"\\System32\\DriverStore\\FileRepository";const t=n.readdirSync(e).filter((t=>n.readdirSync([e,t].join("/")).includes("nvidia-smi.exe")));const r=t.reduce(((t,r)=>{const i=n.statSync([e,t,"nvidia-smi.exe"].join("/"));const s=n.statSync([e,r,"nvidia-smi.exe"].join("/"));return i.ctimeMs>s.ctimeMs?t:r}));if(r){c=[e,r,"nvidia-smi.exe"].join("/")}}catch(e){o.noop()}}else if(u){c="nvidia-smi"}return c}function nvidiaSmi(e){const t=getNvidiaSmi();e=e||o.execOptsWin;if(t){const r="--query-gpu=driver_version,pci.sub_device_id,name,pci.bus_id,fan.speed,memory.total,memory.used,memory.free,utilization.gpu,utilization.memory,temperature.gpu,temperature.memory,power.draw,power.limit,clocks.gr,clocks.mem --format=csv,noheader,nounits";const n=t+" "+r+(u?"  2>/dev/null":"");if(u){e.stdio=["pipe","pipe","ignore"]}try{const t=s(n,e).toString();return t}catch(e){o.noop()}}return""}function nvidiaDevices(){function safeParseNumber(e){if([null,undefined].includes(e)){return e}return parseFloat(e)}const e=nvidiaSmi();if(!e){return[]}const t=e.split("\n").filter(Boolean);let r=t.map((e=>{const t=e.split(", ").map((e=>e.includes("N/A")?undefined:e));if(t.length===16){return{driverVersion:t[0],subDeviceId:t[1],name:t[2],pciBus:t[3],fanSpeed:safeParseNumber(t[4]),memoryTotal:safeParseNumber(t[5]),memoryUsed:safeParseNumber(t[6]),memoryFree:safeParseNumber(t[7]),utilizationGpu:safeParseNumber(t[8]),utilizationMemory:safeParseNumber(t[9]),temperatureGpu:safeParseNumber(t[10]),temperatureMemory:safeParseNumber(t[11]),powerDraw:safeParseNumber(t[12]),powerLimit:safeParseNumber(t[13]),clockCore:safeParseNumber(t[14]),clockMemory:safeParseNumber(t[15])}}else{return{}}}));r=r.filter((e=>"pciBus"in e));return r}function mergeControllerNvidia(e,t){if(t.driverVersion){e.driverVersion=t.driverVersion}if(t.subDeviceId){e.subDeviceId=t.subDeviceId}if(t.name){e.name=t.name}if(t.pciBus){e.pciBus=t.pciBus}if(t.fanSpeed){e.fanSpeed=t.fanSpeed}if(t.memoryTotal){e.memoryTotal=t.memoryTotal;e.vram=t.memoryTotal;e.vramDynamic=false}if(t.memoryUsed){e.memoryUsed=t.memoryUsed}if(t.memoryFree){e.memoryFree=t.memoryFree}if(t.utilizationGpu){e.utilizationGpu=t.utilizationGpu}if(t.utilizationMemory){e.utilizationMemory=t.utilizationMemory}if(t.temperatureGpu){e.temperatureGpu=t.temperatureGpu}if(t.temperatureMemory){e.temperatureMemory=t.temperatureMemory}if(t.powerDraw){e.powerDraw=t.powerDraw}if(t.powerLimit){e.powerLimit=t.powerLimit}if(t.clockCore){e.clockCore=t.clockCore}if(t.clockMemory){e.clockMemory=t.clockMemory}return e}function parseLinesLinuxEdid(e){let t={vendor:"",model:"",deviceName:"",main:false,builtin:false,connection:"",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:null,resolutionY:null,currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null};let r=108;if(e.substr(r,6)==="000000"){r+=36}if(e.substr(r,6)==="000000"){r+=36}if(e.substr(r,6)==="000000"){r+=36}if(e.substr(r,6)==="000000"){r+=36}t.resolutionX=parseInt("0x0"+e.substr(r+8,1)+e.substr(r+4,2));t.resolutionY=parseInt("0x0"+e.substr(r+14,1)+e.substr(r+10,2));t.sizeX=parseInt("0x0"+e.substr(r+28,1)+e.substr(r+24,2));t.sizeY=parseInt("0x0"+e.substr(r+29,1)+e.substr(r+26,2));r=e.indexOf("000000fc00");if(r>=0){let n=e.substr(r+10,26);if(n.indexOf("0a")!==-1){n=n.substr(0,n.indexOf("0a"))}try{if(n.length>2){t.model=n.match(/.{1,2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join("")}}catch(e){o.noop()}}else{t.model=""}return t}function parseLinesLinuxDisplays(e,t){let r=[];let n={vendor:"",model:"",deviceName:"",main:false,builtin:false,connection:"",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:null,resolutionY:null,currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null};let i=false;let s=false;let a="";let c=0;for(let u=1;u<e.length;u++){if(""!==e[u].trim()){if(" "!==e[u][0]&&"\t"!==e[u][0]&&e[u].toLowerCase().indexOf(" connected ")!==-1){if(n.model||n.main||n.builtin||n.connection||n.sizeX!==null||n.pixelDepth!==null||n.resolutionX!==null){r.push(n);n={vendor:"",model:"",main:false,builtin:false,connection:"",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:null,resolutionY:null,currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null}}let t=e[u].split(" ");n.connection=t[0];n.main=e[u].toLowerCase().indexOf(" primary ")>=0;n.builtin=t[0].toLowerCase().indexOf("edp")>=0}if(i){if(e[u].search(/\S|$/)>c){a+=e[u].toLowerCase().trim()}else{let e=parseLinesLinuxEdid(a);n.vendor=e.vendor;n.model=e.model;n.resolutionX=e.resolutionX;n.resolutionY=e.resolutionY;n.sizeX=e.sizeX;n.sizeY=e.sizeY;n.pixelDepth=t;i=false}}if(e[u].toLowerCase().indexOf("edid:")>=0){i=true;c=e[u].search(/\S|$/)}if(e[u].toLowerCase().indexOf("*current")>=0){const t=e[u].split("(");if(t&&t.length>1&&t[0].indexOf("x")>=0){const e=t[0].trim().split("x");n.currentResX=o.toInt(e[0]);n.currentResY=o.toInt(e[1])}s=true}if(s&&e[u].toLowerCase().indexOf("clock")>=0&&e[u].toLowerCase().indexOf("hz")>=0&&e[u].toLowerCase().indexOf("v: height")>=0){const t=e[u].split("clock");if(t&&t.length>1&&t[1].toLowerCase().indexOf("hz")>=0){n.currentRefreshRate=o.toInt(t[1])}s=false}}}if(n.model||n.main||n.builtin||n.connection||n.sizeX!==null||n.pixelDepth!==null||n.resolutionX!==null){r.push(n)}return r}return new Promise((t=>{process.nextTick((()=>{let r={controllers:[],displays:[]};if(d){let n="system_profiler -xml -detailLevel full SPDisplaysDataType";i(n,(function(n,i){if(!n){try{const e=i.toString();r=parseLinesDarwin(o.plistParser(e)[0]._items)}catch(e){o.noop()}try{i=s('defaults read /Library/Preferences/com.apple.windowserver.plist 2>/dev/null;defaults read /Library/Preferences/com.apple.windowserver.displays.plist 2>/dev/null; echo ""',{maxBuffer:1024*2e4});const e=(i||"").toString();const t=o.plistReader(e);if(t["DisplayAnyUserSets"]&&t["DisplayAnyUserSets"]["Configs"]&&t["DisplayAnyUserSets"]["Configs"][0]&&t["DisplayAnyUserSets"]["Configs"][0]["DisplayConfig"]){const e=t["DisplayAnyUserSets"]["Configs"][0]["DisplayConfig"];let n=0;e.forEach((e=>{if(e["CurrentInfo"]&&e["CurrentInfo"]["OriginX"]!==undefined&&r.displays&&r.displays[n]){r.displays[n].positionX=e["CurrentInfo"]["OriginX"]}if(e["CurrentInfo"]&&e["CurrentInfo"]["OriginY"]!==undefined&&r.displays&&r.displays[n]){r.displays[n].positionY=e["CurrentInfo"]["OriginY"]}n++}))}if(t["DisplayAnyUserSets"]&&t["DisplayAnyUserSets"].length>0&&t["DisplayAnyUserSets"][0].length>0&&t["DisplayAnyUserSets"][0][0]["DisplayID"]){const e=t["DisplayAnyUserSets"][0];let n=0;e.forEach((e=>{if("OriginX"in e&&r.displays&&r.displays[n]){r.displays[n].positionX=e["OriginX"]}if("OriginY"in e&&r.displays&&r.displays[n]){r.displays[n].positionY=e["OriginY"]}if(e["Mode"]&&e["Mode"]["BitsPerPixel"]!==undefined&&r.displays&&r.displays[n]){r.displays[n].pixelDepth=e["Mode"]["BitsPerPixel"]}n++}))}}catch(e){o.noop()}}if(e){e(r)}t(r)}))}if(u){if(o.isRaspberry()&&o.isRaspbian()){let n="fbset -s | grep 'mode \"'; vcgencmd get_mem gpu; tvservice -s; tvservice -n;";i(n,(function(n,i){let s=i.toString().split("\n");if(s.length>3&&s[0].indexOf('mode "')>=-1&&s[2].indexOf("0x12000a")>-1){const e=s[0].replace("mode","").replace(/"/g,"").trim().split("x");if(e.length===2){r.displays.push({vendor:"",model:o.getValue(s,"device_name","="),main:true,builtin:false,connection:"HDMI",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:parseInt(e[0],10),resolutionY:parseInt(e[1],10),currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null})}}if(s.length>1&&i.toString().indexOf("gpu=")>=-1){r.controllers.push({vendor:"Broadcom",model:o.getRpiGpu(),bus:"",vram:o.getValue(s,"gpu","=").replace("M",""),vramDynamic:true})}if(e){e(r)}t(r)}))}else{let n="lspci -vvv  2>/dev/null";i(n,(function(n,s){if(!n){let e=s.toString().split("\n");r.controllers=parseLinesLinuxControllers(e);const t=nvidiaDevices();r.controllers=r.controllers.map((e=>mergeControllerNvidia(e,t.find((t=>t.pciBus.toLowerCase().endsWith(e.busAddress.toLowerCase())))||{})))}let o="clinfo --raw";i(o,(function(n,s){if(!n){let e=s.toString().split("\n");r.controllers=parseLinesLinuxClinfo(r.controllers,e)}let o="xdpyinfo 2>/dev/null | grep 'depth of root window' | awk '{ print $5 }'";i(o,(function(n,s){let o=0;if(!n){let e=s.toString().split("\n");o=parseInt(e[0])||0}let a="xrandr --verbose 2>/dev/null";i(a,(function(n,i){if(!n){let e=i.toString().split("\n");r.displays=parseLinesLinuxDisplays(e,o)}if(e){e(r)}t(r)}))}))}))}))}}if(m||y||g){if(e){e(null)}t(null)}if(b){if(e){e(null)}t(null)}if(p){try{const n=[];n.push(o.powerShell("Get-CimInstance win32_VideoController | fl *"));n.push(o.powerShell('gp "HKLM:\\SYSTEM\\ControlSet001\\Control\\Class\\{4d36e968-e325-11ce-bfc1-08002be10318}\\*" -ErrorAction SilentlyContinue | where MatchingDeviceId $null -NE | select MatchingDeviceId,HardwareInformation.qwMemorySize | fl'));n.push(o.powerShell("Get-CimInstance win32_desktopmonitor | fl *"));n.push(o.powerShell("Get-CimInstance -Namespace root\\wmi -ClassName WmiMonitorBasicDisplayParams | fl"));n.push(o.powerShell("Add-Type -AssemblyName System.Windows.Forms; [System.Windows.Forms.Screen]::AllScreens"));n.push(o.powerShell("Get-CimInstance -Namespace root\\wmi -ClassName WmiMonitorConnectionParams | fl"));n.push(o.powerShell('gwmi WmiMonitorID -Namespace root\\wmi | ForEach-Object {(($_.ManufacturerName -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.ProductCodeID -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.UserFriendlyName -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.SerialNumberID -notmatch 0 | foreach {[char]$_}) -join "") + "|" + $_.InstanceName}'));const i=nvidiaDevices();Promise.all(n).then((n=>{let s=n[0].replace(/\r/g,"").split(/\n\s*\n/);let o=n[1].replace(/\r/g,"").split(/\n\s*\n/);r.controllers=parseLinesWindowsControllers(s,o);r.controllers=r.controllers.map((e=>{if(e.vendor.toLowerCase()==="nvidia"){return mergeControllerNvidia(e,i.find((t=>{let r=(e.subDeviceId||"").toLowerCase();const n=t.subDeviceId.split("x");let i=n.length>1?n[1].toLowerCase():n[0].toLowerCase();const s=Math.abs(r.length-i.length);if(r.length>i.length){for(let e=0;e<s;e++){i="0"+i}}else if(r.length<i.length){for(let e=0;e<s;e++){r="0"+r}}return r===i}))||{})}else{return e}}));let a=n[2].replace(/\r/g,"").split(/\n\s*\n/);if(a[0].trim()===""){a.shift()}if(a.length&&a[a.length-1].trim()===""){a.pop()}let c=n[3].replace(/\r/g,"").split("Active ");c.shift();let u=n[4].replace(/\r/g,"").split("BitsPerPixel ");u.shift();let d=n[5].replace(/\r/g,"").split(/\n\s*\n/);d.shift();const p=n[6].replace(/\r/g,"").split(/\n/);let m=[];p.forEach((e=>{const t=e.split("|");if(t.length===5){m.push({vendor:t[0],code:t[1],model:t[2],serial:t[3],instanceId:t[4]})}}));r.displays=parseLinesWindowsDisplaysPowershell(u,c,a,d,m);if(r.displays.length===1){if(v){r.displays[0].resolutionX=v;if(!r.displays[0].currentResX){r.displays[0].currentResX=v}}if(w){r.displays[0].resolutionY=w;if(r.displays[0].currentResY===0){r.displays[0].currentResY=w}}if(_){r.displays[0].pixelDepth=_}}r.displays=r.displays.map((e=>{if(C&&!e.currentRefreshRate){e.currentRefreshRate=C}return e}));if(e){e(r)}t(r)})).catch((()=>{if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}}))}));function parseLinesWindowsControllers(e,t){const r={};for(const e in t){if({}.hasOwnProperty.call(t,e)){if(t[e].trim()!==""){const n=t[e].trim().split("\n");const i=o.getValue(n,"MatchingDeviceId").match(/PCI\\(VEN_[0-9A-F]{4})&(DEV_[0-9A-F]{4})(?:&(SUBSYS_[0-9A-F]{8}))?(?:&(REV_[0-9A-F]{2}))?/i);if(i){const e=parseInt(o.getValue(n,"HardwareInformation.qwMemorySize"));if(!isNaN(e)){let t=i[1].toUpperCase()+"&"+i[2].toUpperCase();if(i[3]){t+="&"+i[3].toUpperCase()}if(i[4]){t+="&"+i[4].toUpperCase()}r[t]=e}}}}}let n=[];for(let t in e){if({}.hasOwnProperty.call(e,t)){if(e[t].trim()!==""){let i=e[t].trim().split("\n");let s=o.getValue(i,"PNPDeviceID",":").match(/PCI\\(VEN_[0-9A-F]{4})&(DEV_[0-9A-F]{4})(?:&(SUBSYS_[0-9A-F]{8}))?(?:&(REV_[0-9A-F]{2}))?/i);let a=null;let c=null;if(s){a=s[3]||"";if(a){a=a.split("_")[1]}if(c==null&&s[3]&&s[4]){const e=s[1].toUpperCase()+"&"+s[2].toUpperCase()+"&"+s[3].toUpperCase()+"&"+s[4].toUpperCase();if({}.hasOwnProperty.call(r,e)){c=r[e]}}if(c==null&&s[3]){const e=s[1].toUpperCase()+"&"+s[2].toUpperCase()+"&"+s[3].toUpperCase();if({}.hasOwnProperty.call(r,e)){c=r[e]}}if(c==null&&s[4]){const e=s[1].toUpperCase()+"&"+s[2].toUpperCase()+"&"+s[4].toUpperCase();if({}.hasOwnProperty.call(r,e)){c=r[e]}}if(c==null){const e=s[1].toUpperCase()+"&"+s[2].toUpperCase();if({}.hasOwnProperty.call(r,e)){c=r[e]}}}n.push({vendor:o.getValue(i,"AdapterCompatibility",":"),model:o.getValue(i,"name",":"),bus:o.getValue(i,"PNPDeviceID",":").startsWith("PCI")?"PCI":"",vram:(c==null?o.toInt(o.getValue(i,"AdapterRAM",":")):c)/1024/1024,vramDynamic:o.getValue(i,"VideoMemoryType",":")==="2",subDeviceId:a});v=o.toInt(o.getValue(i,"CurrentHorizontalResolution",":"))||v;w=o.toInt(o.getValue(i,"CurrentVerticalResolution",":"))||w;C=o.toInt(o.getValue(i,"CurrentRefreshRate",":"))||C;_=o.toInt(o.getValue(i,"CurrentBitsPerPixel",":"))||_}}}return n}function parseLinesWindowsDisplaysPowershell(e,t,r,n,i){let s=[];let a="";let c="";let u="";let d=0;let p=0;if(r&&r.length){let e=r[0].split("\n");a=o.getValue(e,"MonitorManufacturer",":");c=o.getValue(e,"Name",":");u=o.getValue(e,"PNPDeviceID",":").replace(/&amp;/g,"&").toLowerCase();d=o.toInt(o.getValue(e,"ScreenWidth",":"));p=o.toInt(o.getValue(e,"ScreenHeight",":"))}for(let r=0;r<e.length;r++){if(e[r].trim()!==""){e[r]="BitsPerPixel "+e[r];t[r]="Active "+t[r];if(n.length===0||n[r]===undefined){n[r]="Unknown"}let d=e[r].split("\n");let p=t[r].split("\n");let m=n[r].split("\n");const y=o.getValue(d,"BitsPerPixel");const g=o.getValue(d,"Bounds").replace("{","").replace("}","").replace(/=/g,":").split(",");const b=o.getValue(d,"Primary");const v=o.getValue(p,"MaxHorizontalImageSize");const w=o.getValue(p,"MaxVerticalImageSize");const _=o.getValue(p,"InstanceName").toLowerCase();const C=o.getValue(m,"VideoOutputTechnology");const O=o.getValue(d,"DeviceName");let E="";let I="";i.forEach((e=>{if(e.instanceId.toLowerCase().startsWith(_)&&a.startsWith("(")&&c.startsWith("PnP")){E=e.vendor;I=e.model}}));s.push({vendor:_.startsWith(u)&&E===""?a:E,model:_.startsWith(u)&&I===""?c:I,deviceName:O,main:b.toLowerCase()==="true",builtin:C==="2147483648",connection:C&&P[C]?P[C]:"",resolutionX:o.toInt(o.getValue(g,"Width",":")),resolutionY:o.toInt(o.getValue(g,"Height",":")),sizeX:v?parseInt(v,10):null,sizeY:w?parseInt(w,10):null,pixelDepth:y,currentResX:o.toInt(o.getValue(g,"Width",":")),currentResY:o.toInt(o.getValue(g,"Height",":")),positionX:o.toInt(o.getValue(g,"X",":")),positionY:o.toInt(o.getValue(g,"Y",":"))})}}if(e.length===0){s.push({vendor:a,model:c,main:true,sizeX:null,sizeY:null,resolutionX:d,resolutionY:p,pixelDepth:null,currentResX:d,currentResY:p,positionX:0,positionY:0})}return s}}t.graphics=graphics},48587:(e,t,r)=>{"use strict";const n=r(83435).i8;const i=r(79494);const s=r(97026);const o=r(13027);const a=r(65068);const c=r(4962);const u=r(84779);const d=r(12084);const p=r(34290);const m=r(94238);const y=r(49956);const g=r(70609);const b=r(5433);const v=r(43620);const w=r(12781);const _=r(84311);const C=r(69846);const P=r(39928);const O=r(43389);const E=r(61648);let I=process.platform;const k=I==="win32";const T=I==="freebsd";const x=I==="openbsd";const R=I==="netbsd";const B=I==="sunos";if(k){i.getCodepage()}function version(){return n}function getStaticData(e){return new Promise((t=>{process.nextTick((()=>{let r={};r.version=version();Promise.all([s.system(),s.bios(),s.baseboard(),s.chassis(),o.osInfo(),o.uuid(),o.versions(),a.cpu(),a.cpuFlags(),d.graphics(),m.networkInterfaces(),c.memLayout(),p.diskLayout()]).then((n=>{r.system=n[0];r.bios=n[1];r.baseboard=n[2];r.chassis=n[3];r.os=n[4];r.uuid=n[5];r.versions=n[6];r.cpu=n[7];r.cpu.flags=n[8];r.graphics=n[9];r.net=n[10];r.memLayout=n[11];r.diskLayout=n[12];if(e){e(r)}t(r)}))}))}))}function getDynamicData(e,t,r){if(i.isFunction(t)){r=t;t=""}if(i.isFunction(e)){r=e;e=""}return new Promise((n=>{process.nextTick((()=>{t=t||m.getDefaultNetworkInterface();e=e||"";let i=function(){let e=15;if(k){e=13}if(T||x||R){e=11}if(B){e=6}return function(){if(--e===0){if(r){r(s)}n(s)}}}();let s={};s.time=o.time();s.node=process.versions.node;s.v8=process.versions.v8;a.cpuCurrentSpeed().then((e=>{s.cpuCurrentSpeed=e;i()}));b.users().then((e=>{s.users=e;i()}));g.processes().then((e=>{s.processes=e;i()}));a.currentLoad().then((e=>{s.currentLoad=e;i()}));if(!B){a.cpuTemperature().then((e=>{s.temp=e;i()}))}if(!x&&!T&&!R&&!B){m.networkStats(t).then((e=>{s.networkStats=e;i()}))}if(!B){m.networkConnections().then((e=>{s.networkConnections=e;i()}))}c.mem().then((e=>{s.mem=e;i()}));if(!B){u().then((e=>{s.battery=e;i()}))}if(!B){g.services(e).then((e=>{s.services=e;i()}))}if(!B){p.fsSize().then((e=>{s.fsSize=e;i()}))}if(!k&&!x&&!T&&!R&&!B){p.fsStats().then((e=>{s.fsStats=e;i()}))}if(!k&&!x&&!T&&!R&&!B){p.disksIO().then((e=>{s.disksIO=e;i()}))}if(!x&&!T&&!R&&!B){y.wifiNetworks().then((e=>{s.wifiNetworks=e;i()}))}v.inetLatency().then((e=>{s.inetLatency=e;i()}))}))}))}function getAllData(e,t,r){return new Promise((n=>{process.nextTick((()=>{let s={};if(t&&i.isFunction(t)&&!r){r=t;t=""}if(e&&i.isFunction(e)&&!t&&!r){r=e;e="";t=""}getStaticData().then((i=>{s=i;getDynamicData(e,t).then((e=>{for(let t in e){if({}.hasOwnProperty.call(e,t)){s[t]=e[t]}}if(r){r(s)}n(s)}))}))}))}))}function get(e,r){return new Promise((n=>{process.nextTick((()=>{const i=Object.keys(e).filter((e=>({}.hasOwnProperty.call(t,e)))).map((r=>{const n=e[r].substring(e[r].lastIndexOf("(")+1,e[r].lastIndexOf(")"));let i=r.indexOf(")")>=0?r.split(")")[1].trim():r;i=r.indexOf("|")>=0?r.split("|")[0].trim():i;if(n){return t[i](n)}else{return t[i]("")}}));Promise.all(i).then((i=>{const s={};let o=0;for(let r in e){if({}.hasOwnProperty.call(e,r)&&{}.hasOwnProperty.call(t,r)&&i.length>o){if(e[r]==="*"||e[r]==="all"){s[r]=i[o]}else{let t=e[r];let n="";let a=[];if(t.indexOf(")")>=0){t=t.split(")")[1].trim()}if(t.indexOf("|")>=0){n=t.split("|")[1].trim();a=n.split(":");t=t.split("|")[0].trim()}t=t.replace(/,/g," ").replace(/ +/g," ").split(" ");if(i[o]){if(Array.isArray(i[o])){const e=[];i[o].forEach((r=>{let i={};if(t.length===1&&(t[0]==="*"||t[0]==="all")){i=r}else{t.forEach((e=>{if({}.hasOwnProperty.call(r,e)){i[e]=r[e]}}))}if(n&&a.length===2){if({}.hasOwnProperty.call(i,a[0].trim())){const t=i[a[0].trim()];if(typeof t=="number"){if(t===parseFloat(a[1].trim())){e.push(i)}}else if(typeof t=="string"){if(t.toLowerCase()===a[1].trim().toLowerCase()){e.push(i)}}}}else{e.push(i)}}));s[r]=e}else{const e={};t.forEach((t=>{if({}.hasOwnProperty.call(i[o],t)){e[t]=i[o][t]}}));s[r]=e}}else{s[r]={}}}o++}}if(r){r(s)}n(s)}))}))}))}function observe(e,t,r){let n=null;const i=setInterval((()=>{get(e).then((e=>{if(JSON.stringify(n)!==JSON.stringify(e)){n=Object.assign({},e);r(e)}}))}),t);return i}t.version=version;t.system=s.system;t.bios=s.bios;t.baseboard=s.baseboard;t.chassis=s.chassis;t.time=o.time;t.osInfo=o.osInfo;t.versions=o.versions;t.shell=o.shell;t.uuid=o.uuid;t.cpu=a.cpu;t.cpuFlags=a.cpuFlags;t.cpuCache=a.cpuCache;t.cpuCurrentSpeed=a.cpuCurrentSpeed;t.cpuTemperature=a.cpuTemperature;t.currentLoad=a.currentLoad;t.fullLoad=a.fullLoad;t.mem=c.mem;t.memLayout=c.memLayout;t.battery=u;t.graphics=d.graphics;t.fsSize=p.fsSize;t.fsOpenFiles=p.fsOpenFiles;t.blockDevices=p.blockDevices;t.fsStats=p.fsStats;t.disksIO=p.disksIO;t.diskLayout=p.diskLayout;t.networkInterfaceDefault=m.networkInterfaceDefault;t.networkGatewayDefault=m.networkGatewayDefault;t.networkInterfaces=m.networkInterfaces;t.networkStats=m.networkStats;t.networkConnections=m.networkConnections;t.wifiNetworks=y.wifiNetworks;t.wifiInterfaces=y.wifiInterfaces;t.wifiConnections=y.wifiConnections;t.services=g.services;t.processes=g.processes;t.processLoad=g.processLoad;t.users=b.users;t.inetChecksite=v.inetChecksite;t.inetLatency=v.inetLatency;t.dockerInfo=w.dockerInfo;t.dockerImages=w.dockerImages;t.dockerContainers=w.dockerContainers;t.dockerContainerStats=w.dockerContainerStats;t.dockerContainerProcesses=w.dockerContainerProcesses;t.dockerVolumes=w.dockerVolumes;t.dockerAll=w.dockerAll;t.vboxInfo=_.vboxInfo;t.printer=C.printer;t.usb=P.usb;t.audio=O.audio;t.bluetoothDevices=E.bluetoothDevices;t.getStaticData=getStaticData;t.getDynamicData=getDynamicData;t.getAllData=getAllData;t.get=get;t.observe=observe;t.powerShellStart=i.powerShellStart;t.powerShellRelease=i.powerShellRelease},43620:(e,t,r)=>{"use strict";const n=r(79494);let i=process.platform;const s=i==="linux"||i==="android";const o=i==="darwin";const a=i==="win32";const c=i==="freebsd";const u=i==="openbsd";const d=i==="netbsd";const p=i==="sunos";function inetChecksite(e,t){return new Promise((i=>{process.nextTick((()=>{let m={url:e,ok:false,status:404,ms:null};if(typeof e!=="string"){if(t){t(m)}return i(m)}let y="";const g=n.sanitizeShellString(e,true);const b=n.mathMin(g.length,2e3);for(let e=0;e<=b;e++){if(g[e]!==undefined){g[e].__proto__.toLowerCase=n.stringToLower;const t=g[e].toLowerCase();if(t&&t[0]&&!t[1]&&t[0].length===1){y=y+t[0]}}}m.url=y;try{if(y&&!n.isPrototypePolluted()){y.__proto__.startsWith=n.stringStartWith;if(y.startsWith("file:")||y.startsWith("gopher:")||y.startsWith("telnet:")||y.startsWith("mailto:")||y.startsWith("news:")||y.startsWith("nntp:")){if(t){t(m)}return i(m)}let e=Date.now();if(s||c||u||d||o||p){let r=["-I","--connect-timeout","5","-m","5"];r.push(y);let s="curl";n.execSafe(s,r).then((r=>{const n=r.split("\n");let s=n[0]&&n[0].indexOf(" ")>=0?parseInt(n[0].split(" ")[1],10):404;m.status=s||404;m.ok=s===200||s===301||s===302||s===304;m.ms=m.ok?Date.now()-e:null;if(t){t(m)}i(m)}))}if(a){const n=y.startsWith("https:")?r(95687):r(13685);try{n.get(y,(r=>{const n=r.statusCode;m.status=n||404;m.ok=n===200||n===301||n===302||n===304;if(n!==200){r.resume();m.ms=m.ok?Date.now()-e:null;if(t){t(m)}i(m)}else{r.on("data",(()=>{}));r.on("end",(()=>{m.ms=m.ok?Date.now()-e:null;if(t){t(m)}i(m)}))}})).on("error",(()=>{if(t){t(m)}i(m)}))}catch(e){if(t){t(m)}i(m)}}}else{if(t){t(m)}i(m)}}catch(e){if(t){t(m)}i(m)}}))}))}t.inetChecksite=inetChecksite;function inetLatency(e,t){if(n.isFunction(e)&&!t){t=e;e=""}e=e||"8.8.8.8";return new Promise((r=>{process.nextTick((()=>{if(typeof e!=="string"){if(t){t(null)}return r(null)}let i="";const m=(n.isPrototypePolluted()?"8.8.8.8":n.sanitizeShellString(e,true)).trim();const y=n.mathMin(m.length,2e3);for(let e=0;e<=y;e++){if(!(m[e]===undefined)){m[e].__proto__.toLowerCase=n.stringToLower;const t=m[e].toLowerCase();if(t&&t[0]&&!t[1]){i=i+t[0]}}}i.__proto__.startsWith=n.stringStartWith;if(i.startsWith("file:")||i.startsWith("gopher:")||i.startsWith("telnet:")||i.startsWith("mailto:")||i.startsWith("news:")||i.startsWith("nntp:")){if(t){t(null)}return r(null)}let g;if(s||c||u||d||o){if(s){g=["-c","2","-w","3",i]}if(c||u||d){g=["-c","2","-t","3",i]}if(o){g=["-c2","-t3",i]}n.execSafe("ping",g).then((e=>{let n=null;if(e){const t=e.split("\n").filter((e=>e.indexOf("rtt")>=0||e.indexOf("round-trip")>=0||e.indexOf("avg")>=0)).join("\n");const r=t.split("=");if(r.length>1){const e=r[1].split("/");if(e.length>1){n=parseFloat(e[1])}}}if(t){t(n)}r(n)}))}if(p){const e=["-s","-a",i,"56","2"];const s="avg";n.execSafe("ping",e,{timeout:3e3}).then((e=>{let n=null;if(e){const t=e.split("\n").filter((e=>e.indexOf(s)>=0)).join("\n");const r=t.split("=");if(r.length>1){const e=r[1].split("/");if(e.length>1){n=parseFloat(e[1].replace(",","."))}}}if(t){t(n)}r(n)}))}if(a){let e=null;try{const s=[i,"-n","1"];n.execSafe("ping",s,n.execOptsWin).then((n=>{if(n){let t=n.split("\r\n");t.shift();t.forEach((function(t){if((t.toLowerCase().match(/ms/g)||[]).length===3){let r=t.replace(/ +/g," ").split(" ");if(r.length>6){e=parseFloat(r[r.length-1])}}}))}if(t){t(e)}r(e)}))}catch(n){if(t){t(e)}r(e)}}}))}))}t.inetLatency=inetLatency},4962:(e,t,r)=>{"use strict";const n=r(22037);const i=r(32081).exec;const s=r(32081).execSync;const o=r(79494);const a=r(57147);let c=process.platform;const u=c==="linux"||c==="android";const d=c==="darwin";const p=c==="win32";const m=c==="freebsd";const y=c==="openbsd";const g=c==="netbsd";const b=c==="sunos";const v={"0x014F":"Transcend Information","0x2C00":"Micron Technology Inc.","0x802C":"Micron Technology Inc.","0x80AD":"Hynix Semiconductor Inc.","0x80CE":"Samsung Electronics Inc.","0xAD00":"Hynix Semiconductor Inc.","0xCE00":"Samsung Electronics Inc.","0x02FE":"Elpida","0x5105":"Qimonda AG i. In.","0x8551":"Qimonda AG i. In.","0x859B":"Crucial","0x04CD":"G-Skill"};const w={"017A":"Apacer","0198":"HyperX","029E":"Corsair","04CB":"A-DATA","04CD":"G-Skill","059B":"Crucial","00CE":"Samsung",1315:"Crucial","014F":"Transcend Information","2C00":"Micron Technology Inc.","802C":"Micron Technology Inc.","80AD":"Hynix Semiconductor Inc.","80CE":"Samsung Electronics Inc.",AD00:"Hynix Semiconductor Inc.",CE00:"Samsung Electronics Inc.","02FE":"Elpida",5105:"Qimonda AG i. In.",8551:"Qimonda AG i. In.","859B":"Crucial"};function mem(e){return new Promise((t=>{process.nextTick((()=>{let r={total:n.totalmem(),free:n.freemem(),used:n.totalmem()-n.freemem(),active:n.totalmem()-n.freemem(),available:n.freemem(),buffers:0,cached:0,slab:0,buffcache:0,swaptotal:0,swapused:0,swapfree:0,writeback:null,dirty:null};if(u){try{a.readFile("/proc/meminfo",(function(i,s){if(!i){const e=s.toString().split("\n");r.total=parseInt(o.getValue(e,"memtotal"),10);r.total=r.total?r.total*1024:n.totalmem();r.free=parseInt(o.getValue(e,"memfree"),10);r.free=r.free?r.free*1024:n.freemem();r.used=r.total-r.free;r.buffers=parseInt(o.getValue(e,"buffers"),10);r.buffers=r.buffers?r.buffers*1024:0;r.cached=parseInt(o.getValue(e,"cached"),10);r.cached=r.cached?r.cached*1024:0;r.slab=parseInt(o.getValue(e,"slab"),10);r.slab=r.slab?r.slab*1024:0;r.buffcache=r.buffers+r.cached+r.slab;let t=parseInt(o.getValue(e,"memavailable"),10);r.available=t?t*1024:r.free+r.buffcache;r.active=r.total-r.available;r.swaptotal=parseInt(o.getValue(e,"swaptotal"),10);r.swaptotal=r.swaptotal?r.swaptotal*1024:0;r.swapfree=parseInt(o.getValue(e,"swapfree"),10);r.swapfree=r.swapfree?r.swapfree*1024:0;r.swapused=r.swaptotal-r.swapfree;r.writeback=parseInt(o.getValue(e,"writeback"),10);r.writeback=r.writeback?r.writeback*1024:0;r.dirty=parseInt(o.getValue(e,"dirty"),10);r.dirty=r.dirty?r.dirty*1024:0}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}if(m||y||g){try{i("/sbin/sysctl hw.realmem hw.physmem vm.stats.vm.v_page_count vm.stats.vm.v_wire_count vm.stats.vm.v_active_count vm.stats.vm.v_inactive_count vm.stats.vm.v_cache_count vm.stats.vm.v_free_count vm.stats.vm.v_page_size",(function(n,i){if(!n){let e=i.toString().split("\n");const t=parseInt(o.getValue(e,"vm.stats.vm.v_page_size"),10);const n=parseInt(o.getValue(e,"vm.stats.vm.v_inactive_count"),10)*t;const s=parseInt(o.getValue(e,"vm.stats.vm.v_cache_count"),10)*t;r.total=parseInt(o.getValue(e,"hw.realmem"),10);if(isNaN(r.total)){r.total=parseInt(o.getValue(e,"hw.physmem"),10)}r.free=parseInt(o.getValue(e,"vm.stats.vm.v_free_count"),10)*t;r.buffcache=n+s;r.available=r.buffcache+r.free;r.active=r.total-r.free-r.buffcache;r.swaptotal=0;r.swapfree=0;r.swapused=0}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}if(b){if(e){e(r)}t(r)}if(d){let n=4096;try{let e=o.toInt(s("sysctl -n vm.pagesize").toString());n=e||n}catch(e){o.noop()}try{i('vm_stat 2>/dev/null | grep "Pages active"',(function(s,o){if(!s){let e=o.toString().split("\n");r.active=parseInt(e[0].split(":")[1],10)*n;r.buffcache=r.used-r.active;r.available=r.free+r.buffcache}i("sysctl -n vm.swapusage 2>/dev/null",(function(n,i){if(!n){let e=i.toString().split("\n");if(e.length>0){let t=e[0].replace(/,/g,".").replace(/M/g,"");let n=t.trim().split("  ");n.forEach((e=>{if(e.toLowerCase().indexOf("total")!==-1){r.swaptotal=parseFloat(e.split("=")[1].trim())*1024*1024}if(e.toLowerCase().indexOf("used")!==-1){r.swapused=parseFloat(e.split("=")[1].trim())*1024*1024}if(e.toLowerCase().indexOf("free")!==-1){r.swapfree=parseFloat(e.split("=")[1].trim())*1024*1024}}))}}if(e){e(r)}t(r)}))}))}catch(n){if(e){e(r)}t(r)}}if(p){let n=0;let i=0;try{o.powerShell("Get-CimInstance Win32_PageFileUsage | Select AllocatedBaseSize, CurrentUsage").then(((s,o)=>{if(!o){let e=s.split("\r\n").filter((e=>e.trim()!=="")).filter(((e,t)=>t>0));e.forEach((function(e){if(e!==""){e=e.trim().split(/\s\s+/);n=n+(parseInt(e[0],10)||0);i=i+(parseInt(e[1],10)||0)}}))}r.swaptotal=n*1024*1024;r.swapused=i*1024*1024;r.swapfree=r.swaptotal-r.swapused;if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}}))}))}t.mem=mem;function memLayout(e){function getManufacturerDarwin(e){if({}.hasOwnProperty.call(v,e)){return v[e]}return e}function getManufacturerLinux(e){const t=e.replace("0x","").toUpperCase();if(t.length===4&&{}.hasOwnProperty.call(w,t)){return w[t]}return e}return new Promise((t=>{process.nextTick((()=>{let r=[];if(u||m||y||g){i('export LC_ALL=C; dmidecode -t memory 2>/dev/null | grep -iE "Size:|Type|Speed|Manufacturer|Form Factor|Locator|Memory Device|Serial Number|Voltage|Part Number"; unset LC_ALL',(function(i,a){if(!i){let e=a.toString().split("Memory Device");e.shift();e.forEach((function(e){let t=e.split("\n");const n=o.getValue(t,"Size");const i=n.indexOf("GB")>=0?parseInt(n,10)*1024*1024*1024:parseInt(n,10)*1024*1024;let s=o.getValue(t,"Bank Locator");if(s.toLowerCase().indexOf("bad")>=0){s=""}if(parseInt(o.getValue(t,"Size"),10)>0){const e=o.toInt(o.getValue(t,"Total Width"));const n=o.toInt(o.getValue(t,"Data Width"));r.push({size:i,bank:s,type:o.getValue(t,"Type:"),ecc:n&&e?e>n:false,clockSpeed:o.getValue(t,"Configured Clock Speed:")?parseInt(o.getValue(t,"Configured Clock Speed:"),10):o.getValue(t,"Speed:")?parseInt(o.getValue(t,"Speed:"),10):null,formFactor:o.getValue(t,"Form Factor:"),manufacturer:getManufacturerLinux(o.getValue(t,"Manufacturer:")),partNum:o.getValue(t,"Part Number:"),serialNum:o.getValue(t,"Serial Number:"),voltageConfigured:parseFloat(o.getValue(t,"Configured Voltage:"))||null,voltageMin:parseFloat(o.getValue(t,"Minimum Voltage:"))||null,voltageMax:parseFloat(o.getValue(t,"Maximum Voltage:"))||null})}else{r.push({size:0,bank:s,type:"Empty",ecc:null,clockSpeed:0,formFactor:o.getValue(t,"Form Factor:"),partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null})}}))}if(!r.length){r.push({size:n.totalmem(),bank:"",type:"",ecc:null,clockSpeed:0,formFactor:"",partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null});try{let e=s("cat /proc/cpuinfo 2>/dev/null",o.execOptsLinux);let t=e.toString().split("\n");let n=o.getValue(t,"hardware",":",true).toUpperCase();let i=o.getValue(t,"revision",":",true).toLowerCase();if(n==="BCM2835"||n==="BCM2708"||n==="BCM2709"||n==="BCM2835"||n==="BCM2837"){const n={0:400,1:450,2:450,3:3200};r[0].type="LPDDR2";r[0].type=i&&i[2]&&i[2]==="3"?"LPDDR4":r[0].type;r[0].ecc=false;r[0].clockSpeed=i&&i[2]&&n[i[2]]||400;r[0].clockSpeed=i&&i[4]&&i[4]==="d"?500:r[0].clockSpeed;r[0].formFactor="SoC";e=s("vcgencmd get_config sdram_freq 2>/dev/null",o.execOptsLinux);t=e.toString().split("\n");let a=parseInt(o.getValue(t,"sdram_freq","=",true),10)||0;if(a){r[0].clockSpeed=a}e=s("vcgencmd measure_volts sdram_p 2>/dev/null",o.execOptsLinux);t=e.toString().split("\n");let c=parseFloat(o.getValue(t,"volt","=",true))||0;if(c){r[0].voltageConfigured=c;r[0].voltageMin=c;r[0].voltageMax=c}}}catch(e){o.noop()}}if(e){e(r)}t(r)}))}if(d){i("system_profiler SPMemoryDataType",(function(n,i){if(!n){const e=i.toString().split("\n");const t=o.getValue(e,"ecc",":",true).toLowerCase();let n=i.toString().split("        BANK ");let s=true;if(n.length===1){n=i.toString().split("        DIMM");s=false}n.shift();n.forEach((function(e){let n=e.split("\n");const i=(s?"BANK ":"DIMM")+n[0].trim().split("/")[0];const a=parseInt(o.getValue(n,"          Size"));if(a){r.push({size:a*1024*1024*1024,bank:i,type:o.getValue(n,"          Type:"),ecc:t?t==="enabled":null,clockSpeed:parseInt(o.getValue(n,"          Speed:"),10),formFactor:"",manufacturer:getManufacturerDarwin(o.getValue(n,"          Manufacturer:")),partNum:o.getValue(n,"          Part Number:"),serialNum:o.getValue(n,"          Serial Number:"),voltageConfigured:null,voltageMin:null,voltageMax:null})}else{r.push({size:0,bank:i,type:"Empty",ecc:null,clockSpeed:0,formFactor:"",manufacturer:"",partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null})}}))}if(!r.length){const e=i.toString().split("\n");const t=parseInt(o.getValue(e,"      Memory:"));const n=o.getValue(e,"      Type:");if(t&&n){r.push({size:t*1024*1024*1024,bank:"0",type:n,ecc:false,clockSpeed:0,formFactor:"",manufacturer:"Apple",partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null})}}if(e){e(r)}t(r)}))}if(b){if(e){e(r)}t(r)}if(p){const n="Unknown|Other|DRAM|Synchronous DRAM|Cache DRAM|EDO|EDRAM|VRAM|SRAM|RAM|ROM|FLASH|EEPROM|FEPROM|EPROM|CDRAM|3DRAM|SDRAM|SGRAM|RDRAM|DDR|DDR2|DDR2 FB-DIMM|Reserved|DDR3|FBD2|DDR4|LPDDR|LPDDR2|LPDDR3|LPDDR4|Logical non-volatile device|HBM|HBM2|DDR5|LPDDR5".split("|");const i="Unknown|Other|SIP|DIP|ZIP|SOJ|Proprietary|SIMM|DIMM|TSOP|PGA|RIMM|SODIMM|SRIMM|SMD|SSMP|QFP|TQFP|SOIC|LCC|PLCC|BGA|FPBGA|LGA".split("|");try{o.powerShell("Get-CimInstance Win32_PhysicalMemory | select DataWidth,TotalWidth,Capacity,BankLabel,MemoryType,SMBIOSMemoryType,ConfiguredClockSpeed,FormFactor,Manufacturer,PartNumber,SerialNumber,ConfiguredVoltage,MinVoltage,MaxVoltage,Tag | fl").then(((s,a)=>{if(!a){let e=s.toString().split(/\n\s*\n/);e.shift();e.forEach((function(e){let t=e.split("\r\n");const s=o.toInt(o.getValue(t,"DataWidth",":"));const a=o.toInt(o.getValue(t,"TotalWidth",":"));const c=parseInt(o.getValue(t,"Capacity",":"),10)||0;const u=o.getValue(t,"Tag",":");const d=o.splitByNumber(u);if(c){r.push({size:c,bank:o.getValue(t,"BankLabel",":")+(d[1]?"/"+d[1]:""),type:n[parseInt(o.getValue(t,"MemoryType",":"),10)||parseInt(o.getValue(t,"SMBIOSMemoryType",":"),10)],ecc:s&&a?a>s:false,clockSpeed:parseInt(o.getValue(t,"ConfiguredClockSpeed",":"),10)||parseInt(o.getValue(t,"Speed",":"),10)||0,formFactor:i[parseInt(o.getValue(t,"FormFactor",":"),10)||0],manufacturer:o.getValue(t,"Manufacturer",":"),partNum:o.getValue(t,"PartNumber",":"),serialNum:o.getValue(t,"SerialNumber",":"),voltageConfigured:(parseInt(o.getValue(t,"ConfiguredVoltage",":"),10)||0)/1e3,voltageMin:(parseInt(o.getValue(t,"MinVoltage",":"),10)||0)/1e3,voltageMax:(parseInt(o.getValue(t,"MaxVoltage",":"),10)||0)/1e3})}}))}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}}))}))}t.memLayout=memLayout},94238:(e,t,r)=>{"use strict";const n=r(22037);const i=r(32081).exec;const s=r(32081).execSync;const o=r(57147);const a=r(79494);let c=process.platform;const u=c==="linux"||c==="android";const d=c==="darwin";const p=c==="win32";const m=c==="freebsd";const y=c==="openbsd";const g=c==="netbsd";const b=c==="sunos";let v={};let w="";let _={};let C=[];let P=[];let O={};let E;function getDefaultNetworkInterface(){let e="";let t="";try{let r=n.networkInterfaces();let i=9999;for(let n in r){if({}.hasOwnProperty.call(r,n)){r[n].forEach((function(r){if(r&&r.internal===false){t=t||n;if(r.scopeid&&r.scopeid<i){e=n;i=r.scopeid}}}))}}e=e||t||"";if(p){let t="";const i="netstat -r";const o=s(i,a.execOptsWin);const c=o.toString().split(n.EOL);c.forEach((e=>{e=e.replace(/\s+/g," ").trim();if(e.indexOf("0.0.0.0 0.0.0.0")>-1&&!/[a-zA-Z]/.test(e)){const r=e.split(" ");if(r.length>=5){t=r[r.length-2]}}}));if(t){for(let n in r){if({}.hasOwnProperty.call(r,n)){r[n].forEach((function(r){if(r&&r.address&&r.address===t){e=n}}))}}}}if(u){let t="ip route 2> /dev/null | grep default";let r=s(t,a.execOptsLinux);let n=r.toString().split("\n")[0].split(/\s+/);if(n[0]==="none"&&n[5]){e=n[5]}else if(n[4]){e=n[4]}if(e.indexOf(":")>-1){e=e.split(":")[1].trim()}}if(d||m||y||g||b){let t="";if(u){t="ip route 2> /dev/null | grep default | awk '{print $5}'"}if(d){t="route -n get default 2>/dev/null | grep interface: | awk '{print $2}'"}if(m||y||g||b){t="route get 0.0.0.0 | grep interface:"}let r=s(t);e=r.toString().split("\n")[0];if(e.indexOf(":")>-1){e=e.split(":")[1].trim()}}}catch(e){a.noop()}if(e){w=e}return w}t.getDefaultNetworkInterface=getDefaultNetworkInterface;function getMacAddresses(){let e="";let t="";let r={};if(u||m||y||g){if(typeof E==="undefined"){try{const e=s("which ip",a.execOptsLinux).toString().split("\n");if(e.length&&e[0].indexOf(":")===-1&&e[0].indexOf("/")===0){E=e[0]}else{E=""}}catch(e){E=""}}try{const n="export LC_ALL=C; "+(E?E+" link show up":"/sbin/ifconfig")+"; unset LC_ALL";let i=s(n,a.execOptsLinux);const o=i.toString().split("\n");for(let n=0;n<o.length;n++){if(o[n]&&o[n][0]!==" "){if(E){let r=o[n+1].trim().split(" ");if(r[0]==="link/ether"){e=o[n].split(" ")[1];e=e.slice(0,e.length-1);t=r[1]}}else{e=o[n].split(" ")[0];t=o[n].split("HWaddr ")[1]}if(e&&t){r[e]=t.trim();e="";t=""}}}}catch(e){a.noop()}}if(d){try{const n="/sbin/ifconfig";let i=s(n);const o=i.toString().split("\n");for(let n=0;n<o.length;n++){if(o[n]&&o[n][0]!=="\t"&&o[n].indexOf(":")>0){e=o[n].split(":")[0]}else if(o[n].indexOf("\tether ")===0){t=o[n].split("\tether ")[1];if(e&&t){r[e]=t.trim();e="";t=""}}}}catch(e){a.noop()}}return r}function networkInterfaceDefault(e){return new Promise((t=>{process.nextTick((()=>{let r=getDefaultNetworkInterface();if(e){e(r)}t(r)}))}))}t.networkInterfaceDefault=networkInterfaceDefault;function parseLinesWindowsNics(e,t){let r=[];for(let n in e){if({}.hasOwnProperty.call(e,n)){if(e[n].trim()!==""){let i=e[n].trim().split("\r\n");let s=t&&t[n]?t[n].trim().split("\r\n"):[];let o=a.getValue(i,"NetEnabled",":");let c=a.getValue(i,"AdapterTypeID",":")==="9"?"wireless":"wired";let u=a.getValue(i,"Name",":").replace(/\]/g,")").replace(/\[/g,"(");let d=a.getValue(i,"NetConnectionID",":").replace(/\]/g,")").replace(/\[/g,"(");if(u.toLowerCase().indexOf("wi-fi")>=0||u.toLowerCase().indexOf("wireless")>=0){c="wireless"}if(o!==""){const e=parseInt(a.getValue(i,"speed",":").trim(),10)/1e6;r.push({mac:a.getValue(i,"MACAddress",":").toLowerCase(),dhcp:a.getValue(s,"dhcpEnabled",":").toLowerCase()==="true",name:u,iface:d,netEnabled:o==="TRUE",speed:isNaN(e)?null:e,operstate:a.getValue(i,"NetConnectionStatus",":")==="2"?"up":"down",type:c})}}}}return r}function getWindowsNics(){return new Promise((e=>{process.nextTick((()=>{let t="Get-CimInstance Win32_NetworkAdapter | fl *"+"; echo '#-#-#-#';";t+="Get-CimInstance Win32_NetworkAdapterConfiguration | fl DHCPEnabled"+"";try{a.powerShell(t).then((t=>{t=t.split("#-#-#-#");const r=(t[0]||"").split(/\n\s*\n/);const n=(t[1]||"").split(/\n\s*\n/);e(parseLinesWindowsNics(r,n))}))}catch(t){e([])}}))}))}function getWindowsDNSsuffixes(){let e={};let t={primaryDNS:"",exitCode:0,ifaces:[]};try{const r=s("ipconfig /all",a.execOptsWin);const n=r.split("\r\n\r\n");n.forEach(((r,n)=>{if(n==1){const e=r.split("\r\n").filter((e=>e.toUpperCase().includes("DNS")));const n=e[0].substring(e[0].lastIndexOf(":")+1);t.primaryDNS=n.trim();if(!t.primaryDNS){t.primaryDNS="Not defined"}}if(n>1){if(n%2==0){const t=r.substring(r.lastIndexOf(" ")+1).replace(":","");e.name=t}else{const n=r.split("\r\n").filter((e=>e.toUpperCase().includes("DNS")));const i=n[0].substring(n[0].lastIndexOf(":")+1);e.dnsSuffix=i.trim();t.ifaces.push(e);e={}}}}));return t}catch(e){return{primaryDNS:"",exitCode:0,ifaces:[]}}}function getWindowsIfaceDNSsuffix(e,t){let r="";const n=t+".";try{const t=e.filter((e=>n.includes(e.name+"."))).map((e=>e.dnsSuffix));if(t[0]){r=t[0]}if(!r){r=""}return r}catch(e){return"Unknown"}}function getWindowsWiredProfilesInformation(){try{const e=s("netsh lan show profiles",a.execOptsWin);const t=e.split("\r\nProfile on interface");return t}catch(e){if(e.status===1&&e.stdout.includes("AutoConfig")){return"Disabled"}return[]}}function getWindowsWirelessIfaceSSID(e){try{const t=s(`netsh wlan show  interface name="${e}" | findstr "SSID"`,a.execOptsWin);const r=t.split("\r\n").shift();const n=r.split(":").pop();return n}catch(e){return"Unknown"}}function getWindowsIEEE8021x(e,t,r){let n={state:"Unknown",protocol:"Unknown"};if(r==="Disabled"){n.state="Disabled";n.protocol="Not defined";return n}if(e=="wired"&&r.length>0){try{const e=r.find((e=>e.includes(t+"\r\n")));const i=e.split("\r\n");const s=i.find((e=>e.includes("802.1x")));if(s.includes("Disabled")){n.state="Disabled";n.protocol="Not defined"}else if(s.includes("Enabled")){const e=i.find((e=>e.includes("EAP")));n.protocol=e.split(":").pop();n.state="Enabled"}}catch(e){return n}}else if(e=="wireless"){let e="";let r="";try{const i=getWindowsWirelessIfaceSSID(t);if(i!=="Unknown"){e=s(`netsh wlan show profiles "${i}" | findstr "802.1X"`,a.execOptsWin);r=s(`netsh wlan show profiles "${i}" | findstr "EAP"`,a.execOptsWin)}if(e.includes(":")&&r.includes(":")){n.state=e.split(":").pop();n.protocol=r.split(":").pop()}}catch(e){if(e.status===1&&e.stdout.includes("AutoConfig")){n.state="Disabled";n.protocol="Not defined"}return n}}return n}function splitSectionsNics(e){const t=[];let r=[];e.forEach((function(e){if(!e.startsWith("\t")&&!e.startsWith(" ")){if(r.length){t.push(r);r=[]}}r.push(e)}));if(r.length){t.push(r)}return t}function parseLinesDarwinNics(e){let t=[];e.forEach((e=>{let r={iface:"",mtu:null,mac:"",ip6:"",ip4:"",speed:null,type:"",operstate:"",duplex:"",internal:false};const n=e[0];r.iface=n.split(":")[0].trim();let i=n.split("> mtu");r.mtu=i.length>1?parseInt(i[1],10):null;if(isNaN(r.mtu)){r.mtu=null}r.internal=i[0].toLowerCase().indexOf("loopback")>-1;e.forEach((e=>{if(e.trim().startsWith("ether ")){r.mac=e.split("ether ")[1].toLowerCase().trim()}if(e.trim().startsWith("inet6 ")&&!r.ip6){r.ip6=e.split("inet6 ")[1].toLowerCase().split("%")[0].split(" ")[0]}if(e.trim().startsWith("inet ")&&!r.ip4){r.ip4=e.split("inet ")[1].toLowerCase().split(" ")[0]}}));let s=a.getValue(e,"link rate");r.speed=s?parseFloat(s):null;if(r.speed===null){s=a.getValue(e,"uplink rate");r.speed=s?parseFloat(s):null;if(r.speed!==null&&s.toLowerCase().indexOf("gbps")>=0){r.speed=r.speed*1e3}}else{if(s.toLowerCase().indexOf("gbps")>=0){r.speed=r.speed*1e3}}r.type=a.getValue(e,"type").toLowerCase().indexOf("wi-fi")>-1?"wireless":"wired";const o=a.getValue(e,"status").toLowerCase();r.operstate=o==="active"?"up":o==="inactive"?"down":"unknown";r.duplex=a.getValue(e,"media").toLowerCase().indexOf("half-duplex")>-1?"half":"full";if(r.ip6||r.ip4||r.mac){t.push(r)}}));return t}function getDarwinNics(){const e="/sbin/ifconfig -v";try{const t=s(e,{maxBuffer:1024*2e4}).toString().split("\n");const r=splitSectionsNics(t);return parseLinesDarwinNics(r)}catch(e){return[]}}function getLinuxIfaceConnectionName(e){const t=`nmcli device status 2>/dev/null | grep ${e}`;try{const e=s(t,a.execOptsLinux).toString();const r=e.replace(/\s+/g," ").trim();const n=r.split(" ").slice(3);const i=n.join(" ");return i!="--"?i:""}catch(e){return""}}function checkLinuxDCHPInterfaces(e){let t=[];try{let r=`cat ${e} 2> /dev/null | grep 'iface\\|source'`;const n=s(r,a.execOptsLinux).toString().split("\n");n.forEach((e=>{const r=e.replace(/\s+/g," ").trim().split(" ");if(r.length>=4){if(e.toLowerCase().indexOf(" inet ")>=0&&e.toLowerCase().indexOf("dhcp")>=0){t.push(r[1])}}if(e.toLowerCase().includes("source")){let r=e.split(" ")[1];t=t.concat(checkLinuxDCHPInterfaces(r))}}))}catch(e){a.noop()}return t}function getLinuxDHCPNics(){let e="ip a 2> /dev/null";let t=[];try{const r=s(e,a.execOptsLinux).toString().split("\n");const n=splitSectionsNics(r);t=parseLinuxDHCPNics(n)}catch(e){a.noop()}try{t=checkLinuxDCHPInterfaces("/etc/network/interfaces")}catch(e){a.noop()}return t}function parseLinuxDHCPNics(e){const t=[];if(e&&e.length){e.forEach((e=>{if(e&&e.length){const r=e[0].split(":");if(r.length>2){for(let r of e){if(r.indexOf(" inet ")>=0&&r.indexOf(" dynamic ")>=0){const e=r.split(" ");const n=e[e.length-1].trim();t.push(n);break}}}}}))}return t}function getLinuxIfaceDHCPstatus(e,t,r){let n=false;if(t){const i=`nmcli connection show "${t}" 2>/dev/null | grep ipv4.method;`;try{const e=s(i,a.execOptsLinux).toString();const t=e.replace(/\s+/g," ").trim();let r=t.split(" ").slice(1).toString();switch(r){case"auto":n=true;break;default:n=false;break}return n}catch(t){return r.indexOf(e)>=0}}else{return r.indexOf(e)>=0}}function getDarwinIfaceDHCPstatus(e){let t=false;const r=`ipconfig getpacket "${e}" 2>/dev/null | grep lease_time;`;try{const e=s(r).toString().split("\n");if(e.length&&e[0].startsWith("lease_time")){t=true}}catch(e){a.noop()}return t}function getLinuxIfaceDNSsuffix(e){if(e){const t=`nmcli connection show "${e}" 2>/dev/null | grep ipv4.dns-search;`;try{const e=s(t,a.execOptsLinux).toString();const r=e.replace(/\s+/g," ").trim();const n=r.split(" ").slice(1).toString();return n=="--"?"Not defined":n}catch(e){return"Unknown"}}else{return"Unknown"}}function getLinuxIfaceIEEE8021xAuth(e){if(e){const t=`nmcli connection show "${e}" 2>/dev/null | grep 802-1x.eap;`;try{const e=s(t,a.execOptsLinux).toString();const r=e.replace(/\s+/g," ").trim();const n=r.split(" ").slice(1).toString();return n=="--"?"":n}catch(e){return"Not defined"}}else{return"Not defined"}}function getLinuxIfaceIEEE8021xState(e){if(e){if(e=="Not defined"){return"Disabled"}return"Enabled"}else{return"Unknown"}}function testVirtualNic(e,t,r){const n=["00:00:00:00:00:00","00:03:FF","00:05:69","00:0C:29","00:0F:4B","00:13:07","00:13:BE","00:15:5d","00:16:3E","00:1C:42","00:21:F6","00:24:0B","00:50:56","00:A0:B1","00:E0:C8","08:00:27","0A:00:27","18:92:2C","16:DF:49","3C:F3:92","54:52:00","FC:15:97"];if(r){return n.filter((e=>r.toUpperCase().toUpperCase().startsWith(e.substring(0,r.length)))).length>0||e.toLowerCase().indexOf(" virtual ")>-1||t.toLowerCase().indexOf(" virtual ")>-1||e.toLowerCase().indexOf("vethernet ")>-1||t.toLowerCase().indexOf("vethernet ")>-1||e.toLowerCase().startsWith("veth")||t.toLowerCase().startsWith("veth")||e.toLowerCase().startsWith("vboxnet")||t.toLowerCase().startsWith("vboxnet")}else{return false}}function networkInterfaces(e,t,r){if(typeof e==="string"){r=e;t=true;e=null}if(typeof e==="boolean"){t=e;e=null;r=""}if(typeof t==="undefined"){t=true}r=r||"";r=""+r;return new Promise((i=>{process.nextTick((()=>{let o=n.networkInterfaces();let c=[];let b=[];let v=[];let w=[];if(d||m||y||g){if(JSON.stringify(o)===JSON.stringify(_)&&!t){c=P;if(e){e(c)}i(c)}else{const t=getDefaultNetworkInterface();_=JSON.parse(JSON.stringify(o));b=getDarwinNics();b.forEach((e=>{if({}.hasOwnProperty.call(o,e.iface)){o[e.iface].forEach((function(t){if(t.family==="IPv4"||t.family===4){e.ip4subnet=t.netmask}if(t.family==="IPv6"||t.family===6){e.ip6subnet=t.netmask}}))}let r="";const n=a.isPrototypePolluted()?"---":a.sanitizeShellString(e.iface);const i=a.mathMin(n.length,2e3);for(let e=0;e<=i;e++){if(n[e]!==undefined){r=r+n[e]}}c.push({iface:e.iface,ifaceName:e.iface,default:e.iface===t,ip4:e.ip4,ip4subnet:e.ip4subnet||"",ip6:e.ip6,ip6subnet:e.ip6subnet||"",mac:e.mac,internal:e.internal,virtual:e.internal?false:testVirtualNic(e.iface,e.iface,e.mac),operstate:e.operstate,type:e.type,duplex:e.duplex,mtu:e.mtu,speed:e.speed,dhcp:getDarwinIfaceDHCPstatus(r),dnsSuffix:"",ieee8021xAuth:"",ieee8021xState:"",carrierChanges:0})}));P=c;if(r.toLowerCase().indexOf("default")>=0){c=c.filter((e=>e.default));if(c.length>0){c=c[0]}else{c=[]}}if(e){e(c)}i(c)}}if(u){if(JSON.stringify(o)===JSON.stringify(_)&&!t){c=P;if(e){e(c)}i(c)}else{_=JSON.parse(JSON.stringify(o));C=getLinuxDHCPNics();const t=getDefaultNetworkInterface();for(let e in o){let r="";let n="";let i="";let p="";let m="";let y="";let g="";let b=null;let v=0;let w=false;let _="";let P="";let E="";let I="";if({}.hasOwnProperty.call(o,e)){let k=e;o[e].forEach((function(t){if(t.family==="IPv4"||t.family===4){r=t.address;n=t.netmask}if(t.family==="IPv6"||t.family===6){if(!i||i.match(/^fe80::/i)){i=t.address;p=t.netmask}}m=t.mac;const s=parseInt(process.versions.node.split("."),10);if(m.indexOf("00:00:0")>-1&&(u||d)&&!t.internal&&s>=8&&s<=11){if(Object.keys(O).length===0){O=getMacAddresses()}m=O[e]||""}}));let T=e.split(":")[0].trim().toLowerCase();let x="";const R=a.isPrototypePolluted()?"---":a.sanitizeShellString(T);const B=a.mathMin(R.length,2e3);for(let e=0;e<=B;e++){if(R[e]!==undefined){x=x+R[e]}}const N=`echo -n "addr_assign_type: "; cat /sys/class/net/${x}/addr_assign_type 2>/dev/null; echo;\n            echo -n "address: "; cat /sys/class/net/${x}/address 2>/dev/null; echo;\n            echo -n "addr_len: "; cat /sys/class/net/${x}/addr_len 2>/dev/null; echo;\n            echo -n "broadcast: "; cat /sys/class/net/${x}/broadcast 2>/dev/null; echo;\n            echo -n "carrier: "; cat /sys/class/net/${x}/carrier 2>/dev/null; echo;\n            echo -n "carrier_changes: "; cat /sys/class/net/${x}/carrier_changes 2>/dev/null; echo;\n            echo -n "dev_id: "; cat /sys/class/net/${x}/dev_id 2>/dev/null; echo;\n            echo -n "dev_port: "; cat /sys/class/net/${x}/dev_port 2>/dev/null; echo;\n            echo -n "dormant: "; cat /sys/class/net/${x}/dormant 2>/dev/null; echo;\n            echo -n "duplex: "; cat /sys/class/net/${x}/duplex 2>/dev/null; echo;\n            echo -n "flags: "; cat /sys/class/net/${x}/flags 2>/dev/null; echo;\n            echo -n "gro_flush_timeout: "; cat /sys/class/net/${x}/gro_flush_timeout 2>/dev/null; echo;\n            echo -n "ifalias: "; cat /sys/class/net/${x}/ifalias 2>/dev/null; echo;\n            echo -n "ifindex: "; cat /sys/class/net/${x}/ifindex 2>/dev/null; echo;\n            echo -n "iflink: "; cat /sys/class/net/${x}/iflink 2>/dev/null; echo;\n            echo -n "link_mode: "; cat /sys/class/net/${x}/link_mode 2>/dev/null; echo;\n            echo -n "mtu: "; cat /sys/class/net/${x}/mtu 2>/dev/null; echo;\n            echo -n "netdev_group: "; cat /sys/class/net/${x}/netdev_group 2>/dev/null; echo;\n            echo -n "operstate: "; cat /sys/class/net/${x}/operstate 2>/dev/null; echo;\n            echo -n "proto_down: "; cat /sys/class/net/${x}/proto_down 2>/dev/null; echo;\n            echo -n "speed: "; cat /sys/class/net/${x}/speed 2>/dev/null; echo;\n            echo -n "tx_queue_len: "; cat /sys/class/net/${x}/tx_queue_len 2>/dev/null; echo;\n            echo -n "type: "; cat /sys/class/net/${x}/type 2>/dev/null; echo;\n            echo -n "wireless: "; cat /proc/net/wireless 2>/dev/null | grep ${x}; echo;\n            echo -n "wirelessspeed: "; iw dev ${x} link 2>&1 | grep bitrate; echo;`;let j=[];try{j=s(N,a.execOptsLinux).toString().split("\n");const e=getLinuxIfaceConnectionName(x);w=getLinuxIfaceDHCPstatus(x,e,C);_=getLinuxIfaceDNSsuffix(e);P=getLinuxIfaceIEEE8021xAuth(e);E=getLinuxIfaceIEEE8021xState(P)}catch(e){a.noop()}y=a.getValue(j,"duplex");y=y.startsWith("cat")?"":y;g=parseInt(a.getValue(j,"mtu"),10);let L=parseInt(a.getValue(j,"speed"),10);b=isNaN(L)?null:L;let D=a.getValue(j,"wirelessspeed").split("tx bitrate: ");if(b===null&&D.length===2){L=parseFloat(D[1]);b=isNaN(L)?null:L}v=parseInt(a.getValue(j,"carrier_changes"),10);const U=a.getValue(j,"operstate");I=U==="up"?a.getValue(j,"wireless").trim()?"wireless":"wired":"unknown";if(x==="lo"||x.startsWith("bond")){I="virtual"}let F=o[e]&&o[e][0]?o[e][0].internal:false;if(e.toLowerCase().indexOf("loopback")>-1||k.toLowerCase().indexOf("loopback")>-1){F=true}const K=F?false:testVirtualNic(e,k,m);c.push({iface:x,ifaceName:k,default:T===t,ip4:r,ip4subnet:n,ip6:i,ip6subnet:p,mac:m,internal:F,virtual:K,operstate:U,type:I,duplex:y,mtu:g,speed:b,dhcp:w,dnsSuffix:_,ieee8021xAuth:P,ieee8021xState:E,carrierChanges:v})}}P=c;if(r.toLowerCase().indexOf("default")>=0){c=c.filter((e=>e.default));if(c.length>0){c=c[0]}else{c=[]}}if(e){e(c)}i(c)}}if(p){if(JSON.stringify(o)===JSON.stringify(_)&&!t){c=P;if(e){e(c)}i(c)}else{_=JSON.parse(JSON.stringify(o));const t=getDefaultNetworkInterface();getWindowsNics().then((function(n){n.forEach((e=>{let t=false;Object.keys(o).forEach((r=>{if(!t){o[r].forEach((r=>{if(Object.keys(r).indexOf("mac")>=0){t=r["mac"]===e.mac}}))}}));if(!t){o[e.name]=[{mac:e.mac}]}}));w=getWindowsWiredProfilesInformation();v=getWindowsDNSsuffixes();for(let e in o){let r="";const i=a.isPrototypePolluted()?"---":a.sanitizeShellString(e);const s=a.mathMin(i.length,2e3);for(let e=0;e<=s;e++){if(i[e]!==undefined){r=r+i[e]}}let p=e;let m="";let y="";let g="";let b="";let _="";let C="";let P="";let E=null;let I=0;let k="down";let T=false;let x="";let R="";let B="";let N="";if({}.hasOwnProperty.call(o,e)){let i=e;o[e].forEach((function(t){if(t.family==="IPv4"||t.family===4){m=t.address;y=t.netmask}if(t.family==="IPv6"||t.family===6){if(!g||g.match(/^fe80::/i)){g=t.address;b=t.netmask}}_=t.mac;const r=parseInt(process.versions.node.split("."),10);if(_.indexOf("00:00:0")>-1&&(u||d)&&!t.internal&&r>=8&&r<=11){if(Object.keys(O).length===0){O=getMacAddresses()}_=O[e]||""}}));x=getWindowsIfaceDNSsuffix(v.ifaces,r);let s=false;n.forEach((e=>{if(e.mac===_&&!s){p=e.iface||p;i=e.name;T=e.dhcp;k=e.operstate;E=k==="up"?e.speed:0;N=e.type;s=true}}));if(e.toLowerCase().indexOf("wlan")>=0||i.toLowerCase().indexOf("wlan")>=0||i.toLowerCase().indexOf("802.11n")>=0||i.toLowerCase().indexOf("wireless")>=0||i.toLowerCase().indexOf("wi-fi")>=0||i.toLowerCase().indexOf("wifi")>=0){N="wireless"}const a=getWindowsIEEE8021x(N,r,w);R=a.protocol;B=a.state;let j=o[e]&&o[e][0]?o[e][0].internal:false;if(e.toLowerCase().indexOf("loopback")>-1||i.toLowerCase().indexOf("loopback")>-1){j=true}const L=j?false:testVirtualNic(e,i,_);c.push({iface:p,ifaceName:i,default:p===t,ip4:m,ip4subnet:y,ip6:g,ip6subnet:b,mac:_,internal:j,virtual:L,operstate:k,type:N,duplex:C,mtu:P,speed:E,dhcp:T,dnsSuffix:x,ieee8021xAuth:R,ieee8021xState:B,carrierChanges:I})}}P=c;if(r.toLowerCase().indexOf("default")>=0){c=c.filter((e=>e.default));if(c.length>0){c=c[0]}else{c=[]}}if(e){e(c)}i(c)}))}}}))}))}t.networkInterfaces=networkInterfaces;function calcNetworkSpeed(e,t,r,n,i,s,o,a){let c={iface:e,operstate:n,rx_bytes:t,rx_dropped:i,rx_errors:s,tx_bytes:r,tx_dropped:o,tx_errors:a,rx_sec:null,tx_sec:null,ms:0};if(v[e]&&v[e].ms){c.ms=Date.now()-v[e].ms;c.rx_sec=t-v[e].rx_bytes>=0?(t-v[e].rx_bytes)/(c.ms/1e3):0;c.tx_sec=r-v[e].tx_bytes>=0?(r-v[e].tx_bytes)/(c.ms/1e3):0;v[e].rx_bytes=t;v[e].tx_bytes=r;v[e].rx_sec=c.rx_sec;v[e].tx_sec=c.tx_sec;v[e].ms=Date.now();v[e].last_ms=c.ms;v[e].operstate=n}else{if(!v[e]){v[e]={}}v[e].rx_bytes=t;v[e].tx_bytes=r;v[e].rx_sec=null;v[e].tx_sec=null;v[e].ms=Date.now();v[e].last_ms=0;v[e].operstate=n}return c}function networkStats(e,t){let r=[];return new Promise((n=>{process.nextTick((()=>{if(a.isFunction(e)&&!t){t=e;r=[getDefaultNetworkInterface()]}else{if(typeof e!=="string"&&e!==undefined){if(t){t([])}return n([])}e=e||getDefaultNetworkInterface();e.__proto__.toLowerCase=a.stringToLower;e.__proto__.replace=a.stringReplace;e.__proto__.trim=a.stringTrim;e=e.trim().toLowerCase().replace(/,+/g,"|");r=e.split("|")}const i=[];const s=[];if(r.length&&r[0].trim()==="*"){r=[];networkInterfaces(false).then((e=>{for(let t of e){r.push(t.iface)}networkStats(r.join(",")).then((e=>{if(t){t(e)}n(e)}))}))}else{for(let e of r){s.push(networkStatsSingle(e.trim()))}if(s.length){Promise.all(s).then((e=>{if(t){t(e)}n(e)}))}else{if(t){t(i)}n(i)}}}))}))}function networkStatsSingle(e){function parseLinesWindowsPerfData(e){let t=[];for(let r in e){if({}.hasOwnProperty.call(e,r)){if(e[r].trim()!==""){let n=e[r].trim().split("\r\n");t.push({name:a.getValue(n,"Name",":").replace(/[()[\] ]+/g,"").replace(/#|\//g,"_").toLowerCase(),rx_bytes:parseInt(a.getValue(n,"BytesReceivedPersec",":"),10),rx_errors:parseInt(a.getValue(n,"PacketsReceivedErrors",":"),10),rx_dropped:parseInt(a.getValue(n,"PacketsReceivedDiscarded",":"),10),tx_bytes:parseInt(a.getValue(n,"BytesSentPersec",":"),10),tx_errors:parseInt(a.getValue(n,"PacketsOutboundErrors",":"),10),tx_dropped:parseInt(a.getValue(n,"PacketsOutboundDiscarded",":"),10)})}}}return t}return new Promise((t=>{process.nextTick((()=>{let r="";const n=a.isPrototypePolluted()?"---":a.sanitizeShellString(e);const s=a.mathMin(n.length,2e3);for(let e=0;e<=s;e++){if(n[e]!==undefined){r=r+n[e]}}let c={iface:r,operstate:"unknown",rx_bytes:0,rx_dropped:0,rx_errors:0,tx_bytes:0,tx_dropped:0,tx_errors:0,rx_sec:null,tx_sec:null,ms:0};let b="unknown";let w=0;let _=0;let C=0;let P=0;let O=0;let E=0;let I,k,T;if(!v[r]||v[r]&&!v[r].ms||v[r]&&v[r].ms&&Date.now()-v[r].ms>=500){if(u){if(o.existsSync("/sys/class/net/"+r)){I="cat /sys/class/net/"+r+"/operstate; "+"cat /sys/class/net/"+r+"/statistics/rx_bytes; "+"cat /sys/class/net/"+r+"/statistics/tx_bytes; "+"cat /sys/class/net/"+r+"/statistics/rx_dropped; "+"cat /sys/class/net/"+r+"/statistics/rx_errors; "+"cat /sys/class/net/"+r+"/statistics/tx_dropped; "+"cat /sys/class/net/"+r+"/statistics/tx_errors; ";i(I,(function(e,n){if(!e){k=n.toString().split("\n");b=k[0].trim();w=parseInt(k[1],10);_=parseInt(k[2],10);C=parseInt(k[3],10);P=parseInt(k[4],10);O=parseInt(k[5],10);E=parseInt(k[6],10);c=calcNetworkSpeed(r,w,_,b,C,P,O,E)}t(c)}))}else{t(c)}}if(m||y||g){I="netstat -ibndI "+r;i(I,(function(e,n){if(!e){k=n.toString().split("\n");for(let e=1;e<k.length;e++){const t=k[e].replace(/ +/g," ").split(" ");if(t&&t[0]&&t[7]&&t[10]){w=w+parseInt(t[7]);if(t[6].trim()!=="-"){C=C+parseInt(t[6])}if(t[5].trim()!=="-"){P=P+parseInt(t[5])}_=_+parseInt(t[10]);if(t[12].trim()!=="-"){O=O+parseInt(t[12])}if(t[9].trim()!=="-"){E=E+parseInt(t[9])}b="up"}}c=calcNetworkSpeed(r,w,_,b,C,P,O,E)}t(c)}))}if(d){I="ifconfig "+r+' | grep "status"';i(I,(function(e,n){c.operstate=(n.toString().split(":")[1]||"").trim();c.operstate=(c.operstate||"").toLowerCase();c.operstate=c.operstate==="active"?"up":c.operstate==="inactive"?"down":"unknown";I="netstat -bdI "+r;i(I,(function(e,n){if(!e){k=n.toString().split("\n");if(k.length>1&&k[1].trim()!==""){T=k[1].replace(/ +/g," ").split(" ");const e=T.length>11?1:0;w=parseInt(T[e+5]);C=parseInt(T[e+10]);P=parseInt(T[e+4]);_=parseInt(T[e+8]);O=parseInt(T[e+10]);E=parseInt(T[e+7]);c=calcNetworkSpeed(r,w,_,c.operstate,C,P,O,E)}}t(c)}))}))}if(p){let e=[];let n=r;a.powerShell("Get-CimInstance Win32_PerfRawData_Tcpip_NetworkInterface | select Name,BytesReceivedPersec,PacketsReceivedErrors,PacketsReceivedDiscarded,BytesSentPersec,PacketsOutboundErrors,PacketsOutboundDiscarded | fl").then(((i,s)=>{if(!s){const t=i.toString().split(/\n\s*\n/);e=parseLinesWindowsPerfData(t)}networkInterfaces(false).then((i=>{w=0;_=0;e.forEach((e=>{i.forEach((t=>{if((t.iface.toLowerCase()===r.toLowerCase()||t.mac.toLowerCase()===r.toLowerCase()||t.ip4.toLowerCase()===r.toLowerCase()||t.ip6.toLowerCase()===r.toLowerCase()||t.ifaceName.replace(/[()[\] ]+/g,"").replace(/#|\//g,"_").toLowerCase()===r.replace(/[()[\] ]+/g,"").replace("#","_").toLowerCase())&&t.ifaceName.replace(/[()[\] ]+/g,"").replace(/#|\//g,"_").toLowerCase()===e.name){n=t.iface;w=e.rx_bytes;C=e.rx_dropped;P=e.rx_errors;_=e.tx_bytes;O=e.tx_dropped;E=e.tx_errors;b=t.operstate}}))}));if(w&&_){c=calcNetworkSpeed(n,parseInt(w),parseInt(_),b,C,P,O,E)}t(c)}))}))}}else{c.rx_bytes=v[r].rx_bytes;c.tx_bytes=v[r].tx_bytes;c.rx_sec=v[r].rx_sec;c.tx_sec=v[r].tx_sec;c.ms=v[r].last_ms;c.operstate=v[r].operstate;t(c)}}))}))}t.networkStats=networkStats;function getProcessName(e,t){let r="";e.forEach((e=>{const n=e.split(" ");const i=parseInt(n[0],10)||-1;if(i===t){n.shift();r=n.join(" ").split(":")[0]}}));r=r.split(" -")[0];const n=r.split("/");return n[n.length-1]}function networkConnections(e){return new Promise((t=>{process.nextTick((()=>{let r=[];if(u||m||y||g){let n='export LC_ALL=C; netstat -tunap | grep "ESTABLISHED\\|SYN_SENT\\|SYN_RECV\\|FIN_WAIT1\\|FIN_WAIT2\\|TIME_WAIT\\|CLOSE\\|CLOSE_WAIT\\|LAST_ACK\\|LISTEN\\|CLOSING\\|UNKNOWN"; unset LC_ALL';if(m||y||g){n='export LC_ALL=C; netstat -na | grep "ESTABLISHED\\|SYN_SENT\\|SYN_RECV\\|FIN_WAIT1\\|FIN_WAIT2\\|TIME_WAIT\\|CLOSE\\|CLOSE_WAIT\\|LAST_ACK\\|LISTEN\\|CLOSING\\|UNKNOWN"; unset LC_ALL'}i(n,{maxBuffer:1024*2e4},(function(s,o){let a=o.toString().split("\n");if(!s&&(a.length>1||a[0]!="")){a.forEach((function(e){e=e.replace(/ +/g," ").split(" ");if(e.length>=7){let t=e[3];let n="";let i=e[3].split(":");if(i.length>1){n=i[i.length-1];i.pop();t=i.join(":")}let s=e[4];let o="";let a=e[4].split(":");if(a.length>1){o=a[a.length-1];a.pop();s=a.join(":")}let c=e[5];let u=e[6].split("/");if(c){r.push({protocol:e[0],localAddress:t,localPort:n,peerAddress:s,peerPort:o,state:c,pid:u[0]&&u[0]!=="-"?parseInt(u[0],10):null,process:u[1]?u[1].split(" ")[0].split(":")[0]:""})}}}));if(e){e(r)}t(r)}else{n='ss -tunap | grep "ESTAB\\|SYN-SENT\\|SYN-RECV\\|FIN-WAIT1\\|FIN-WAIT2\\|TIME-WAIT\\|CLOSE\\|CLOSE-WAIT\\|LAST-ACK\\|LISTEN\\|CLOSING"';i(n,{maxBuffer:1024*2e4},(function(n,i){if(!n){let e=i.toString().split("\n");e.forEach((function(e){e=e.replace(/ +/g," ").split(" ");if(e.length>=6){let t=e[4];let n="";let i=e[4].split(":");if(i.length>1){n=i[i.length-1];i.pop();t=i.join(":")}let s=e[5];let o="";let a=e[5].split(":");if(a.length>1){o=a[a.length-1];a.pop();s=a.join(":")}let c=e[1];if(c==="ESTAB"){c="ESTABLISHED"}if(c==="TIME-WAIT"){c="TIME_WAIT"}let u=null;let d="";if(e.length>=7&&e[6].indexOf("users:")>-1){let t=e[6].replace('users:(("',"").replace(/"/g,"").split(",");if(t.length>2){d=t[0].split(" ")[0].split(":")[0];u=parseInt(t[1],10)}}if(c){r.push({protocol:e[0],localAddress:t,localPort:n,peerAddress:s,peerPort:o,state:c,pid:u,process:d})}}}))}if(e){e(r)}t(r)}))}}))}if(d){let n='netstat -natvln | grep "tcp4\\|tcp6\\|udp4\\|udp6"';const s="ESTABLISHED|SYN_SENT|SYN_RECV|FIN_WAIT1|FIN_WAIT2|TIME_WAIT|CLOSE|CLOSE_WAIT|LAST_ACK|LISTEN|CLOSING|UNKNOWN";i(n,{maxBuffer:1024*2e4},(function(n,o){if(!n){i("ps -axo pid,command",{maxBuffer:1024*2e4},(function(n,i){let a=i.toString().split("\n");a=a.map((e=>e.trim().replace(/ +/g," ")));let c=o.toString().split("\n");c.forEach((function(e){e=e.replace(/ +/g," ").split(" ");if(e.length>=8){let t=e[3];let n="";let i=e[3].split(".");if(i.length>1){n=i[i.length-1];i.pop();t=i.join(".")}let o=e[4];let c="";let u=e[4].split(".");if(u.length>1){c=u[u.length-1];u.pop();o=u.join(".")}const d=s.indexOf(e[5])>=0;let p=d?e[5]:"UNKNOWN";let m=parseInt(e[8+(d?0:-1)],10);if(p){r.push({protocol:e[0],localAddress:t,localPort:n,peerAddress:o,peerPort:c,state:p,pid:m,process:getProcessName(a,m)})}}}));if(e){e(r)}t(r)}))}}))}if(p){let n="netstat -nao";try{i(n,a.execOptsWin,(function(n,i){if(!n){let n=i.toString().split("\r\n");n.forEach((function(e){e=e.trim().replace(/ +/g," ").split(" ");if(e.length>=4){let t=e[1];let n="";let i=e[1].split(":");if(i.length>1){n=i[i.length-1];i.pop();t=i.join(":")}t=t.replace(/\[/g,"").replace(/\]/g,"");let s=e[2];let o="";let c=e[2].split(":");if(c.length>1){o=c[c.length-1];c.pop();s=c.join(":")}s=s.replace(/\[/g,"").replace(/\]/g,"");let u=a.toInt(e[4]);let d=e[3];if(d==="HERGESTELLT"){d="ESTABLISHED"}if(d.startsWith("ABH")){d="LISTEN"}if(d==="SCHLIESSEN_WARTEN"){d="CLOSE_WAIT"}if(d==="WARTEND"){d="TIME_WAIT"}if(d==="SYN_GESENDET"){d="SYN_SENT"}if(d==="LISTENING"){d="LISTEN"}if(d==="SYN_RECEIVED"){d="SYN_RECV"}if(d==="FIN_WAIT_1"){d="FIN_WAIT1"}if(d==="FIN_WAIT_2"){d="FIN_WAIT2"}if(e[0].toLowerCase()!=="udp"&&d){r.push({protocol:e[0].toLowerCase(),localAddress:t,localPort:n,peerAddress:s,peerPort:o,state:d,pid:u,process:""})}else if(e[0].toLowerCase()==="udp"){r.push({protocol:e[0].toLowerCase(),localAddress:t,localPort:n,peerAddress:s,peerPort:o,state:"",pid:parseInt(e[3],10),process:""})}}}));if(e){e(r)}t(r)}}))}catch(n){if(e){e(r)}t(r)}}}))}))}t.networkConnections=networkConnections;function networkGatewayDefault(e){return new Promise((t=>{process.nextTick((()=>{let r="";if(u||m||y||g){let n="ip route get 1";try{i(n,{maxBuffer:1024*2e4},(function(n,i){if(!n){let n=i.toString().split("\n");const s=n&&n[0]?n[0]:"";let o=s.split(" via ");if(o&&o[1]){o=o[1].split(" ");r=o[0]}if(e){e(r)}t(r)}else{if(e){e(r)}t(r)}}))}catch(n){if(e){e(r)}t(r)}}if(d){let n="route -n get default";try{i(n,{maxBuffer:1024*2e4},(function(s,o){if(!s){const e=o.toString().split("\n").map((e=>e.trim()));r=a.getValue(e,"gateway")}if(!r){n="netstat -rn | awk '/default/ {print $2}'";i(n,{maxBuffer:1024*2e4},(function(n,i){const s=i.toString().split("\n").map((e=>e.trim()));r=s.find((e=>/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)));if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}))}catch(n){if(e){e(r)}t(r)}}if(p){try{i("netstat -r",a.execOptsWin,(function(i,s){const o=s.toString().split(n.EOL);o.forEach((e=>{e=e.replace(/\s+/g," ").trim();if(e.indexOf("0.0.0.0 0.0.0.0")>-1&&!/[a-zA-Z]/.test(e)){const t=e.split(" ");if(t.length>=5&&t[t.length-3].indexOf(".")>-1){r=t[t.length-3]}}}));if(!r){a.powerShell("Get-CimInstance -ClassName Win32_IP4RouteTable | Where-Object { $_.Destination -eq '0.0.0.0' -and $_.Mask -eq '0.0.0.0' }").then((n=>{let i=n.toString().split("\r\n");if(i.length>1&&!r){r=a.getValue(i,"NextHop");if(e){e(r)}t(r)}}))}else{if(e){e(r)}t(r)}}))}catch(n){if(e){e(r)}t(r)}}}))}))}t.networkGatewayDefault=networkGatewayDefault},13027:(e,t,r)=>{"use strict";const n=r(22037);const i=r(57147);const s=r(79494);const o=r(32081).exec;const a=r(32081).execSync;let c=process.platform;const u=c==="linux"||c==="android";const d=c==="darwin";const p=c==="win32";const m=c==="freebsd";const y=c==="openbsd";const g=c==="netbsd";const b=c==="sunos";function time(){let e=(new Date).toString().split(" ");return{current:Date.now(),uptime:n.uptime(),timezone:e.length>=7?e[5]:"",timezoneName:Intl?Intl.DateTimeFormat().resolvedOptions().timeZone:e.length>=7?e.slice(6).join(" ").replace(/\(/g,"").replace(/\)/g,""):""}}t.time=time;function getLogoFile(e){e=e||"";e=e.toLowerCase();let t=c;if(p){t="windows"}else if(e.indexOf("mac os")!==-1){t="apple"}else if(e.indexOf("arch")!==-1){t="arch"}else if(e.indexOf("centos")!==-1){t="centos"}else if(e.indexOf("coreos")!==-1){t="coreos"}else if(e.indexOf("debian")!==-1){t="debian"}else if(e.indexOf("deepin")!==-1){t="deepin"}else if(e.indexOf("elementary")!==-1){t="elementary"}else if(e.indexOf("fedora")!==-1){t="fedora"}else if(e.indexOf("gentoo")!==-1){t="gentoo"}else if(e.indexOf("mageia")!==-1){t="mageia"}else if(e.indexOf("mandriva")!==-1){t="mandriva"}else if(e.indexOf("manjaro")!==-1){t="manjaro"}else if(e.indexOf("mint")!==-1){t="mint"}else if(e.indexOf("mx")!==-1){t="mx"}else if(e.indexOf("openbsd")!==-1){t="openbsd"}else if(e.indexOf("freebsd")!==-1){t="freebsd"}else if(e.indexOf("opensuse")!==-1){t="opensuse"}else if(e.indexOf("pclinuxos")!==-1){t="pclinuxos"}else if(e.indexOf("puppy")!==-1){t="puppy"}else if(e.indexOf("raspbian")!==-1){t="raspbian"}else if(e.indexOf("reactos")!==-1){t="reactos"}else if(e.indexOf("redhat")!==-1){t="redhat"}else if(e.indexOf("slackware")!==-1){t="slackware"}else if(e.indexOf("sugar")!==-1){t="sugar"}else if(e.indexOf("steam")!==-1){t="steam"}else if(e.indexOf("suse")!==-1){t="suse"}else if(e.indexOf("mate")!==-1){t="ubuntu-mate"}else if(e.indexOf("lubuntu")!==-1){t="lubuntu"}else if(e.indexOf("xubuntu")!==-1){t="xubuntu"}else if(e.indexOf("ubuntu")!==-1){t="ubuntu"}else if(e.indexOf("solaris")!==-1){t="solaris"}else if(e.indexOf("tails")!==-1){t="tails"}else if(e.indexOf("feren")!==-1){t="ferenos"}else if(e.indexOf("robolinux")!==-1){t="robolinux"}else if(u&&e){t=e.toLowerCase().trim().replace(/\s+/g,"-")}return t}function getFQDN(){let e=n.hostname;if(u||d){try{const t=a("hostnamectl --json short 2>/dev/null",s.execOptsLinux);const r=JSON.parse(t.toString());e=r["StaticHostname"]}catch(t){try{const t=a("hostname -f 2>/dev/null",s.execOptsLinux);e=t.toString().split(n.EOL)[0]}catch(e){s.noop()}}}if(m||y||g){try{const t=a("hostname 2>/dev/null");e=t.toString().split(n.EOL)[0]}catch(e){s.noop()}}if(p){try{const t=a("echo %COMPUTERNAME%.%USERDNSDOMAIN%",s.execOptsWin);e=t.toString().replace(".%USERDNSDOMAIN%","").split(n.EOL)[0]}catch(e){s.noop()}}return e}function osInfo(e){return new Promise((t=>{process.nextTick((()=>{let r={platform:c==="win32"?"Windows":c,distro:"unknown",release:"unknown",codename:"",kernel:n.release(),arch:n.arch(),hostname:n.hostname(),fqdn:getFQDN(),codepage:"",logofile:"",serial:"",build:"",servicepack:"",uefi:false};if(u){o("cat /etc/*-release; cat /usr/lib/os-release; cat /etc/openwrt_release",(function(n,i){let o={};let a=i.toString().split("\n");a.forEach((function(e){if(e.indexOf("=")!==-1){o[e.split("=")[0].trim().toUpperCase()]=e.split("=")[1].trim()}}));r.distro=(o.DISTRIB_ID||o.NAME||"unknown").replace(/"/g,"");r.logofile=getLogoFile(r.distro);let c=(o.VERSION||"").replace(/"/g,"");let u=(o.DISTRIB_CODENAME||o.VERSION_CODENAME||"").replace(/"/g,"");const d=(o.PRETTY_NAME||"").replace(/"/g,"");if(d.indexOf(r.distro+" ")===0){c=d.replace(r.distro+" ","").trim()}if(c.indexOf("(")>=0){u=c.split("(")[1].replace(/[()]/g,"").trim();c=c.split("(")[0].trim()}r.release=(c||o.DISTRIB_RELEASE||o.VERSION_ID||"unknown").replace(/"/g,"");r.codename=u;r.codepage=s.getCodepage();r.build=(o.BUILD_ID||"").replace(/"/g,"").trim();isUefiLinux().then((n=>{r.uefi=n;uuid().then((n=>{r.serial=n.os;if(e){e(r)}t(r)}))}))}))}if(m||y||g){o("sysctl kern.ostype kern.osrelease kern.osrevision kern.hostuuid machdep.bootmethod kern.geom.confxml",(function(n,i){let o=i.toString().split("\n");const a=s.getValue(o,"kern.ostype");const c=getLogoFile(a);const u=s.getValue(o,"kern.osrelease").split("-")[0];const d=s.getValue(o,"kern.uuid");const p=s.getValue(o,"machdep.bootmethod");const m=i.toString().indexOf("<type>efi</type>")>=0;const y=p?p.toLowerCase().indexOf("uefi")>=0:m?m:null;r.distro=a||r.distro;r.logofile=c||r.logofile;r.release=u||r.release;r.serial=d||r.serial;r.codename="";r.codepage=s.getCodepage();r.uefi=y||null;if(e){e(r)}t(r)}))}if(d){o("sw_vers; sysctl kern.ostype kern.osrelease kern.osrevision kern.uuid",(function(n,i){let o=i.toString().split("\n");r.serial=s.getValue(o,"kern.uuid");r.distro=s.getValue(o,"ProductName");r.release=(s.getValue(o,"ProductVersion",":",true,true)+" "+s.getValue(o,"ProductVersionExtra",":",true,true)).trim();r.build=s.getValue(o,"BuildVersion");r.logofile=getLogoFile(r.distro);r.codename="macOS";r.codename=r.release.indexOf("10.4")>-1?"Mac OS X Tiger":r.codename;r.codename=r.release.indexOf("10.5")>-1?"Mac OS X Leopard":r.codename;r.codename=r.release.indexOf("10.6")>-1?"Mac OS X Snow Leopard":r.codename;r.codename=r.release.indexOf("10.7")>-1?"Mac OS X Lion":r.codename;r.codename=r.release.indexOf("10.8")>-1?"OS X Mountain Lion":r.codename;r.codename=r.release.indexOf("10.9")>-1?"OS X Mavericks":r.codename;r.codename=r.release.indexOf("10.10")>-1?"OS X Yosemite":r.codename;r.codename=r.release.indexOf("10.11")>-1?"OS X El Capitan":r.codename;r.codename=r.release.indexOf("10.12")>-1?"macOS Sierra":r.codename;r.codename=r.release.indexOf("10.13")>-1?"macOS High Sierra":r.codename;r.codename=r.release.indexOf("10.14")>-1?"macOS Mojave":r.codename;r.codename=r.release.indexOf("10.15")>-1?"macOS Catalina":r.codename;r.codename=r.release.startsWith("11.")?"macOS Big Sur":r.codename;r.codename=r.release.startsWith("12.")?"macOS Monterey":r.codename;r.codename=r.release.startsWith("13.")?"macOS Ventura":r.codename;r.codename=r.release.startsWith("14.")?"macOS Sonoma":r.codename;r.codename=r.release.startsWith("15.")?"macOS Sequoia":r.codename;r.uefi=true;r.codepage=s.getCodepage();if(e){e(r)}t(r)}))}if(b){r.release=r.kernel;o("uname -o",(function(n,i){let s=i.toString().split("\n");r.distro=s[0];r.logofile=getLogoFile(r.distro);if(e){e(r)}t(r)}))}if(p){r.logofile=getLogoFile();r.release=r.kernel;try{const n=[];n.push(s.powerShell("Get-CimInstance Win32_OperatingSystem | select Caption,SerialNumber,BuildNumber,ServicePackMajorVersion,ServicePackMinorVersion | fl"));n.push(s.powerShell("(Get-CimInstance Win32_ComputerSystem).HypervisorPresent"));n.push(s.powerShell("Add-Type -AssemblyName System.Windows.Forms; [System.Windows.Forms.SystemInformation]::TerminalServerSession"));s.promiseAll(n).then((n=>{let i=n.results[0]?n.results[0].toString().split("\r\n"):[""];r.distro=s.getValue(i,"Caption",":").trim();r.serial=s.getValue(i,"SerialNumber",":").trim();r.build=s.getValue(i,"BuildNumber",":").trim();r.servicepack=s.getValue(i,"ServicePackMajorVersion",":").trim()+"."+s.getValue(i,"ServicePackMinorVersion",":").trim();r.codepage=s.getCodepage();const o=n.results[1]?n.results[1].toString().toLowerCase():"";r.hypervisor=o.indexOf("true")!==-1;const a=n.results[2]?n.results[2].toString():"";r.remoteSession=a.toString().toLowerCase().indexOf("true")>=0;isUefiWindows().then((n=>{r.uefi=n;if(e){e(r)}t(r)}))}))}catch(n){if(e){e(r)}t(r)}}}))}))}t.osInfo=osInfo;function isUefiLinux(){return new Promise((e=>{process.nextTick((()=>{i.stat("/sys/firmware/efi",(function(t){if(!t){return e(true)}else{o('dmesg | grep -E "EFI v"',(function(t,r){if(!t){const t=r.toString().split("\n");return e(t.length>0)}return e(false)}))}}))}))}))}function isUefiWindows(){return new Promise((e=>{process.nextTick((()=>{try{o('findstr /C:"Detected boot environment" "%windir%\\Panther\\setupact.log"',s.execOptsWin,(function(t,r){if(!t){const t=r.toString().split("\n\r")[0];return e(t.toLowerCase().indexOf("efi")>=0)}else{o("echo %firmware_type%",s.execOptsWin,(function(t,r){if(!t){const t=r.toString()||"";return e(t.toLowerCase().indexOf("efi")>=0)}else{return e(false)}}))}}))}catch(t){return e(false)}}))}))}function versions(e,t){let r={kernel:n.release(),openssl:"",systemOpenssl:"",systemOpensslLib:"",node:process.versions.node,v8:process.versions.v8,npm:"",yarn:"",pm2:"",gulp:"",grunt:"",git:"",tsc:"",mysql:"",redis:"",mongodb:"",apache:"",nginx:"",php:"",docker:"",postfix:"",postgresql:"",perl:"",python:"",python3:"",pip:"",pip3:"",java:"",gcc:"",virtualbox:"",bash:"",zsh:"",fish:"",powershell:"",dotnet:""};function checkVersionParam(e){if(e==="*"){return{versions:r,counter:30}}if(!Array.isArray(e)){e=e.trim().toLowerCase().replace(/,+/g,"|").replace(/ /g,"|");e=e.split("|");const t={versions:{},counter:0};e.forEach((e=>{if(e){for(let n in r){if({}.hasOwnProperty.call(r,n)){if(n.toLowerCase()===e.toLowerCase()&&!{}.hasOwnProperty.call(t.versions,n)){t.versions[n]=r[n];if(n==="openssl"){t.versions.systemOpenssl="";t.versions.systemOpensslLib=""}if(!t.versions[n]){t.counter++}}}}}}));return t}}return new Promise((r=>{process.nextTick((()=>{if(s.isFunction(e)&&!t){t=e;e="*"}else{e=e||"*";if(typeof e!=="string"){if(t){t({})}return r({})}}const n=checkVersionParam(e);let c=n.counter;let m=function(){return function(){if(--c===0){if(t){t(n.versions)}r(n.versions)}}}();let y="";try{if({}.hasOwnProperty.call(n.versions,"openssl")){n.versions.openssl=process.versions.openssl;o("openssl version",(function(e,t){if(!e){let e=t.toString().split("\n")[0].trim();let r=e.split(" ");n.versions.systemOpenssl=r.length>0?r[1]:r[0];n.versions.systemOpensslLib=r.length>0?r[0]:"openssl"}m()}))}if({}.hasOwnProperty.call(n.versions,"npm")){o("npm -v",(function(e,t){if(!e){n.versions.npm=t.toString().split("\n")[0]}m()}))}if({}.hasOwnProperty.call(n.versions,"pm2")){y="pm2";if(p){y+=".cmd"}o(`${y} -v`,(function(e,t){if(!e){let e=t.toString().split("\n")[0].trim();if(!e.startsWith("[PM2]")){n.versions.pm2=e}}m()}))}if({}.hasOwnProperty.call(n.versions,"yarn")){o("yarn --version",(function(e,t){if(!e){n.versions.yarn=t.toString().split("\n")[0]}m()}))}if({}.hasOwnProperty.call(n.versions,"gulp")){y="gulp";if(p){y+=".cmd"}o(`${y} --version`,(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";n.versions.gulp=(e.toLowerCase().split("version")[1]||"").trim()}m()}))}if({}.hasOwnProperty.call(n.versions,"tsc")){y="tsc";if(p){y+=".cmd"}o(`${y} --version`,(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";n.versions.tsc=(e.toLowerCase().split("version")[1]||"").trim()}m()}))}if({}.hasOwnProperty.call(n.versions,"grunt")){y="grunt";if(p){y+=".cmd"}o(`${y} --version`,(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";n.versions.grunt=(e.toLowerCase().split("cli v")[1]||"").trim()}m()}))}if({}.hasOwnProperty.call(n.versions,"git")){if(d){const e=i.existsSync("/usr/local/Cellar/git")||i.existsSync("/opt/homebrew/bin/git");if(s.darwinXcodeExists()||e){o("git --version",(function(e,t){if(!e){let e=t.toString().split("\n")[0]||"";e=(e.toLowerCase().split("version")[1]||"").trim();n.versions.git=(e.split(" ")[0]||"").trim()}m()}))}else{m()}}else{o("git --version",(function(e,t){if(!e){let e=t.toString().split("\n")[0]||"";e=(e.toLowerCase().split("version")[1]||"").trim();n.versions.git=(e.split(" ")[0]||"").trim()}m()}))}}if({}.hasOwnProperty.call(n.versions,"apache")){o("apachectl -v 2>&1",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split(":");n.versions.apache=e.length>1?e[1].replace("Apache","").replace("/","").split("(")[0].trim():""}m()}))}if({}.hasOwnProperty.call(n.versions,"nginx")){o("nginx -v 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";n.versions.nginx=(e.toLowerCase().split("/")[1]||"").trim()}m()}))}if({}.hasOwnProperty.call(n.versions,"mysql")){o("mysql -V",(function(e,t){if(!e){let e=t.toString().split("\n")[0]||"";e=e.toLowerCase();if(e.indexOf(",")>-1){e=(e.split(",")[0]||"").trim();const t=e.split(" ");n.versions.mysql=(t[t.length-1]||"").trim()}else{if(e.indexOf(" ver ")>-1){e=e.split(" ver ")[1];n.versions.mysql=e.split(" ")[0]}}}m()}))}if({}.hasOwnProperty.call(n.versions,"php")){o("php -v",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";let r=e.split("(");if(r[0].indexOf("-")){r=r[0].split("-")}n.versions.php=r[0].replace(/[^0-9.]/g,"")}m()}))}if({}.hasOwnProperty.call(n.versions,"redis")){o("redis-server --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";const r=e.split(" ");n.versions.redis=s.getValue(r,"v","=",true)}m()}))}if({}.hasOwnProperty.call(n.versions,"docker")){o("docker --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";const r=e.split(" ");n.versions.docker=r.length>2&&r[2].endsWith(",")?r[2].slice(0,-1):""}m()}))}if({}.hasOwnProperty.call(n.versions,"postfix")){o("postconf -d | grep mail_version",(function(e,t){if(!e){const e=t.toString().split("\n")||[];n.versions.postfix=s.getValue(e,"mail_version","=",true)}m()}))}if({}.hasOwnProperty.call(n.versions,"mongodb")){o("mongod --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";n.versions.mongodb=(e.toLowerCase().split(",")[0]||"").replace(/[^0-9.]/g,"")}m()}))}if({}.hasOwnProperty.call(n.versions,"postgresql")){if(u){o("locate bin/postgres",(function(e,t){if(!e){const e=t.toString().split("\n").sort();if(e.length){o(e[e.length-1]+" -V",(function(e,t){if(!e){const e=t.toString().split("\n")[0].split(" ")||[];n.versions.postgresql=e.length?e[e.length-1]:""}m()}))}else{m()}}else{o("psql -V",(function(e,t){if(!e){const e=t.toString().split("\n")[0].split(" ")||[];n.versions.postgresql=e.length?e[e.length-1]:"";n.versions.postgresql=n.versions.postgresql.split("-")[0]}m()}))}}))}else{if(p){s.powerShell("Get-CimInstance Win32_Service | select caption | fl").then((e=>{let t=e.split(/\n\s*\n/);t.forEach((e=>{if(e.trim()!==""){let t=e.trim().split("\r\n");let r=s.getValue(t,"caption",":",true).toLowerCase();if(r.indexOf("postgresql")>-1){const e=r.split(" server ");if(e.length>1){n.versions.postgresql=e[1]}}}}));m()}))}else{o("postgres -V",(function(e,t){if(!e){const e=t.toString().split("\n")[0].split(" ")||[];n.versions.postgresql=e.length?e[e.length-1]:""}m()}))}}}if({}.hasOwnProperty.call(n.versions,"perl")){o("perl -v",(function(e,t){if(!e){const e=t.toString().split("\n")||"";while(e.length>0&&e[0].trim()===""){e.shift()}if(e.length>0){n.versions.perl=e[0].split("(").pop().split(")")[0].replace("v","")}}m()}))}if({}.hasOwnProperty.call(n.versions,"python")){if(d){try{const e=a("sw_vers");const t=e.toString().split("\n");const r=s.getValue(t,"ProductVersion",":");const c=i.existsSync("/usr/local/Cellar/python");const u=i.existsSync("/opt/homebrew/bin/python");if(s.darwinXcodeExists()&&s.semverCompare("12.0.1",r)<0||c||u){const e=c?"/usr/local/Cellar/python -V 2>&1":u?"/opt/homebrew/bin/python -V 2>&1":"python -V 2>&1";o(e,(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";n.versions.python=e.toLowerCase().replace("python","").trim()}m()}))}else{m()}}catch(e){m()}}else{o("python -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";n.versions.python=e.toLowerCase().replace("python","").trim()}m()}))}}if({}.hasOwnProperty.call(n.versions,"python3")){if(d){const e=i.existsSync("/usr/local/Cellar/python3")||i.existsSync("/opt/homebrew/bin/python3");if(s.darwinXcodeExists()||e){o("python3 -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";n.versions.python3=e.toLowerCase().replace("python","").trim()}m()}))}else{m()}}else{o("python3 -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";n.versions.python3=e.toLowerCase().replace("python","").trim()}m()}))}}if({}.hasOwnProperty.call(n.versions,"pip")){if(d){const e=i.existsSync("/usr/local/Cellar/pip")||i.existsSync("/opt/homebrew/bin/pip");if(s.darwinXcodeExists()||e){o("pip -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";const r=e.split(" ");n.versions.pip=r.length>=2?r[1]:""}m()}))}else{m()}}else{o("pip -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";const r=e.split(" ");n.versions.pip=r.length>=2?r[1]:""}m()}))}}if({}.hasOwnProperty.call(n.versions,"pip3")){if(d){const e=i.existsSync("/usr/local/Cellar/pip3")||i.existsSync("/opt/homebrew/bin/pip3");if(s.darwinXcodeExists()||e){o("pip3 -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";const r=e.split(" ");n.versions.pip3=r.length>=2?r[1]:""}m()}))}else{m()}}else{o("pip3 -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";const r=e.split(" ");n.versions.pip3=r.length>=2?r[1]:""}m()}))}}if({}.hasOwnProperty.call(n.versions,"java")){if(d){o("/usr/libexec/java_home -V 2>&1",(function(e,t){if(!e&&t.toString().toLowerCase().indexOf("no java runtime")===-1){o("java -version 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";const r=e.split('"');n.versions.java=r.length===3?r[1].trim():""}m()}))}else{m()}}))}else{o("java -version 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";const r=e.split('"');n.versions.java=r.length===3?r[1].trim():""}m()}))}}if({}.hasOwnProperty.call(n.versions,"gcc")){if(d&&s.darwinXcodeExists()||!d){o("gcc -dumpversion",(function(e,t){if(!e){n.versions.gcc=t.toString().split("\n")[0].trim()||""}if(n.versions.gcc.indexOf(".")>-1){m()}else{o("gcc --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0].trim();if(e.indexOf("gcc")>-1&&e.indexOf(")")>-1){const t=e.split(")");n.versions.gcc=t[1].trim()||n.versions.gcc}}m()}))}}))}else{m()}}if({}.hasOwnProperty.call(n.versions,"virtualbox")){o(s.getVboxmanage()+" -v 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";const r=e.split("r");n.versions.virtualbox=r[0]}m()}))}if({}.hasOwnProperty.call(n.versions,"bash")){o("bash --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0];const r=e.split(" version ");if(r.length>1){n.versions.bash=r[1].split(" ")[0].split("(")[0]}}m()}))}if({}.hasOwnProperty.call(n.versions,"zsh")){o("zsh --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0];const r=e.split("zsh ");if(r.length>1){n.versions.zsh=r[1].split(" ")[0]}}m()}))}if({}.hasOwnProperty.call(n.versions,"fish")){o("fish --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0];const r=e.split(" version ");if(r.length>1){n.versions.fish=r[1].split(" ")[0]}}m()}))}if({}.hasOwnProperty.call(n.versions,"powershell")){if(p){s.powerShell("$PSVersionTable").then((e=>{const t=e.toString().split("\n").map((e=>e.replace(/ +/g," ").replace(/ +/g,":")));n.versions.powershell=s.getValue(t,"psversion");m()}))}else{m()}}if({}.hasOwnProperty.call(n.versions,"dotnet")){if(p){s.powerShell('gci "HKLM:\\SOFTWARE\\Microsoft\\NET Framework Setup\\NDP" -recurse | gp -name Version,Release -EA 0 | where { $_.PSChildName -match "^(?!S)\\p{L}"} | select PSChildName, Version, Release').then((e=>{const t=e.toString().split("\r\n");let r="";t.forEach((e=>{e=e.replace(/ +/g," ");const t=e.split(" ");r=r||(t[0].toLowerCase().startsWith("client")&&t.length>2?t[1].trim():t[0].toLowerCase().startsWith("full")&&t.length>2?t[1].trim():"")}));n.versions.dotnet=r.trim();m()}))}else{m()}}}catch(e){if(t){t(n.versions)}r(n.versions)}}))}))}t.versions=versions;function shell(e){return new Promise((t=>{process.nextTick((()=>{if(p){t("cmd")}else{let r="";o("echo $SHELL",(function(n,i){if(!n){r=i.toString().split("\n")[0]}if(e){e(r)}t(r)}))}}))}))}t.shell=shell;function getUniqueMacAdresses(){let e=[];try{const t=n.networkInterfaces();for(let r in t){if({}.hasOwnProperty.call(t,r)){t[r].forEach((function(t){if(t&&t.mac&&t.mac!=="00:00:00:00:00:00"){const r=t.mac.toLowerCase();if(e.indexOf(r)===-1){e.push(r)}}}))}}e=e.sort((function(e,t){if(e<t){return-1}if(e>t){return 1}return 0}))}catch(t){e.push("00:00:00:00:00:00")}return e}function uuid(e){return new Promise((t=>{process.nextTick((()=>{let r={os:"",hardware:"",macs:getUniqueMacAdresses()};let n;if(d){o("system_profiler SPHardwareDataType -json",(function(n,i){if(!n){try{const e=JSON.parse(i.toString());if(e.SPHardwareDataType&&e.SPHardwareDataType.length>0){const t=e.SPHardwareDataType[0];r.os=t.platform_UUID.toLowerCase();r.hardware=t.serial_number}}catch(e){s.noop()}}if(e){e(r)}t(r)}))}if(u){const n=`echo -n "os: "; cat /var/lib/dbus/machine-id 2> /dev/null ||\ncat /etc/machine-id 2> /dev/null; echo;\necho -n "hardware: "; cat /sys/class/dmi/id/product_uuid 2> /dev/null; echo;`;o(n,(function(n,o){const a=o.toString().split("\n");r.os=s.getValue(a,"os").toLowerCase();r.hardware=s.getValue(a,"hardware").toLowerCase();if(!r.hardware){const e=i.readFileSync("/proc/cpuinfo",{encoding:"utf8"}).toString().split("\n");const t=s.getValue(e,"serial");r.hardware=t||""}if(e){e(r)}t(r)}))}if(m||y||g){o("sysctl -i kern.hostid kern.hostuuid",(function(n,i){const o=i.toString().split("\n");r.os=s.getValue(o,"kern.hostid",":").toLowerCase();r.hardware=s.getValue(o,"kern.hostuuid",":").toLowerCase();if(r.os.indexOf("unknown")>=0){r.os=""}if(r.hardware.indexOf("unknown")>=0){r.hardware=""}if(e){e(r)}t(r)}))}if(p){let i="%windir%\\System32";if(process.arch==="ia32"&&Object.prototype.hasOwnProperty.call(process.env,"PROCESSOR_ARCHITEW6432")){i="%windir%\\sysnative\\cmd.exe /c %windir%\\System32"}s.powerShell("Get-CimInstance Win32_ComputerSystemProduct | select UUID | fl").then((a=>{let c=a.split("\r\n");r.hardware=s.getValue(c,"uuid",":").toLowerCase();o(`${i}\\reg query "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography" /v MachineGuid`,s.execOptsWin,(function(i,s){n=s.toString().split("\n\r")[0].split("REG_SZ");r.os=n.length>1?n[1].replace(/\r+|\n+|\s+/gi,"").toLowerCase():"";if(e){e(r)}t(r)}))}))}}))}))}t.uuid=uuid},69846:(e,t,r)=>{"use strict";const n=r(32081).exec;const i=r(79494);let s=process.platform;const o=s==="linux"||s==="android";const a=s==="darwin";const c=s==="win32";const u=s==="freebsd";const d=s==="openbsd";const p=s==="netbsd";const m=s==="sunos";const y={1:"Other",2:"Unknown",3:"Idle",4:"Printing",5:"Warmup",6:"Stopped Printing",7:"Offline"};function parseLinuxCupsHeader(e){const t={};if(e&&e.length){if(e[0].indexOf(" CUPS v")>0){const r=e[0].split(" CUPS v");t.cupsVersion=r[1]}}return t}function parseLinuxCupsPrinter(e){const t={};const r=i.getValue(e,"PrinterId"," ");t.id=r?parseInt(r,10):null;t.name=i.getValue(e,"Info"," ");t.model=e.length>0&&e[0]?e[0].split(" ")[0]:"";t.uri=i.getValue(e,"DeviceURI"," ");t.uuid=i.getValue(e,"UUID"," ");t.status=i.getValue(e,"State"," ");t.local=i.getValue(e,"Location"," ").toLowerCase().startsWith("local");t.default=null;t.shared=i.getValue(e,"Shared"," ").toLowerCase().startsWith("yes");return t}function parseLinuxLpstatPrinter(e,t){const r={};r.id=t;r.name=i.getValue(e,"Description",":",true);r.model=e.length>0&&e[0]?e[0].split(" ")[0]:"";r.uri=null;r.uuid=null;r.status=e.length>0&&e[0]?e[0].indexOf(" idle")>0?"idle":e[0].indexOf(" printing")>0?"printing":"unknown":null;r.local=i.getValue(e,"Location",":",true).toLowerCase().startsWith("local");r.default=null;r.shared=i.getValue(e,"Shared"," ").toLowerCase().startsWith("yes");return r}function parseDarwinPrinters(e,t){const r={};const n=e.uri.split("/");r.id=t;r.name=e._name;r.model=n.length?n[n.length-1]:"";r.uri=e.uri;r.uuid=null;r.status=e.status;r.local=e.printserver==="local";r.default=e.default==="yes";r.shared=e.shared==="yes";return r}function parseWindowsPrinters(e,t){const r={};const n=parseInt(i.getValue(e,"PrinterStatus",":"),10);r.id=t;r.name=i.getValue(e,"name",":");r.model=i.getValue(e,"DriverName",":");r.uri=null;r.uuid=null;r.status=y[n]?y[n]:null;r.local=i.getValue(e,"Local",":").toUpperCase()==="TRUE";r.default=i.getValue(e,"Default",":").toUpperCase()==="TRUE";r.shared=i.getValue(e,"Shared",":").toUpperCase()==="TRUE";return r}function printer(e){return new Promise((t=>{process.nextTick((()=>{let r=[];if(o||u||d||p){let i="cat /etc/cups/printers.conf 2>/dev/null";n(i,(function(s,a){if(!s){const e=a.toString().split("<Printer ");const t=parseLinuxCupsHeader(e[0]);for(let n=1;n<e.length;n++){const i=parseLinuxCupsPrinter(e[n].split("\n"));if(i.name){i.engine="CUPS";i.engineVersion=t.cupsVersion;r.push(i)}}}if(r.length===0){if(o){i="export LC_ALL=C; lpstat -lp 2>/dev/null; unset LC_ALL";n(i,(function(e,t){const n=("\n"+t.toString()).split("\nprinter ");for(let e=1;e<n.length;e++){const t=parseLinuxLpstatPrinter(n[e].split("\n"),e);r.push(t)}}));if(e){e(r)}t(r)}else{if(e){e(r)}t(r)}}else{if(e){e(r)}t(r)}}))}if(a){let s="system_profiler SPPrintersDataType -json";n(s,(function(n,s){if(!n){try{const e=JSON.parse(s.toString());if(e.SPPrintersDataType&&e.SPPrintersDataType.length){for(let t=0;t<e.SPPrintersDataType.length;t++){const n=parseDarwinPrinters(e.SPPrintersDataType[t],t);r.push(n)}}}catch(e){i.noop()}}if(e){e(r)}t(r)}))}if(c){i.powerShell("Get-CimInstance Win32_Printer | select PrinterStatus,Name,DriverName,Local,Default,Shared | fl").then(((n,i)=>{if(!i){const e=n.toString().split(/\n\s*\n/);for(let t=0;t<e.length;t++){const n=parseWindowsPrinters(e[t].split("\n"),t);if(n.name||n.model){r.push(n)}}}if(e){e(r)}t(r)}))}if(m){t(null)}}))}))}t.printer=printer},70609:(e,t,r)=>{"use strict";const n=r(22037);const i=r(57147);const s=r(71017);const o=r(32081).exec;const a=r(32081).execSync;const c=r(79494);let u=process.platform;const d=u==="linux"||u==="android";const p=u==="darwin";const m=u==="win32";const y=u==="freebsd";const g=u==="openbsd";const b=u==="netbsd";const v=u==="sunos";const w={all:0,all_utime:0,all_stime:0,list:{},ms:0,result:{}};const _={all:0,all_utime:0,all_stime:0,list:{},ms:0,result:{}};const C={all:0,all_utime:0,all_stime:0,list:{},ms:0,result:{}};const P={0:"unknown",1:"other",2:"ready",3:"running",4:"blocked",5:"suspended blocked",6:"suspended ready",7:"terminated",8:"stopped",9:"growing"};function parseTimeUnix(e){let t=e;let r=e.replace(/ +/g," ").split(" ");if(r.length===5){t=r[4]+"-"+("0"+("JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC".indexOf(r[1].toUpperCase())/3+1)).slice(-2)+"-"+("0"+r[2]).slice(-2)+" "+r[3]}return t}function parseElapsedTime(e){let t=new Date;t=new Date(t.getTime()-t.getTimezoneOffset()*6e4);const r=e.split("-");const n=r.length-1;const i=n>0?parseInt(r[n-1]):0;const s=r[n].split(":");const o=s.length===3?parseInt(s[0]||0):0;const a=parseInt(s[s.length===3?1:0]||0);const u=parseInt(s[s.length===3?2:1]||0);const d=(((i*24+o)*60+a)*60+u)*1e3;let p=new Date(t.getTime());let m=p.toISOString().substring(0,10)+" "+p.toISOString().substring(11,19);try{p=new Date(t.getTime()-d);m=p.toISOString().substring(0,10)+" "+p.toISOString().substring(11,19)}catch(e){c.noop()}return m}function services(e,t){if(c.isFunction(e)&&!t){t=e;e=""}return new Promise((r=>{process.nextTick((()=>{if(typeof e!=="string"){if(t){t([])}return r([])}if(e){let n="";n.__proto__.toLowerCase=c.stringToLower;n.__proto__.replace=c.stringReplace;n.__proto__.trim=c.stringTrim;const i=c.sanitizeShellString(e);const s=c.mathMin(i.length,2e3);for(let e=0;e<=s;e++){if(i[e]!==undefined){n=n+i[e]}}n=n.trim().toLowerCase().replace(/, /g,"|").replace(/,+/g,"|");if(n===""){n="*"}if(c.isPrototypePolluted()&&n!=="*"){n="------"}let u=n.split("|");let v=[];let w=[];if(d||y||g||b||p){if((d||y||g||b)&&n==="*"){try{const e=a("systemctl --all --type=service --no-legend 2> /dev/null",c.execOptsLinux).toString().split("\n");u=[];for(const t of e){const e=t.split(".service")[0];if(e&&t.indexOf(" not-found ")===-1){u.push(e.trim())}}n=u.join("|")}catch(e){try{n="";const e=a("service --status-all 2> /dev/null",c.execOptsLinux).toString().split("\n");for(const t of e){const e=t.split("]");if(e.length===2){n+=(n!==""?"|":"")+e[1].trim()}}u=n.split("|")}catch(e){try{const e=a("ls /etc/init.d/ -m 2> /dev/null",c.execOptsLinux).toString().split("\n").join("");n="";if(e){const t=e.split(",");for(const e of t){const t=e.trim();if(t){n+=(n!==""?"|":"")+t}}u=n.split("|")}}catch(e){n="";u=[]}}}}if(p&&n==="*"){if(t){t(v)}r(v)}let e=p?["-caxo","pcpu,pmem,pid,command"]:["-axo","pcpu,pmem,pid,command"];if(n!==""&&u.length>0){c.execSafe("ps",e).then((n=>{if(n){let e=n.replace(/ +/g," ").replace(/,+/g,".").split("\n");u.forEach((function(t){let r;if(p){r=e.filter((function(e){return e.toLowerCase().indexOf(t)!==-1}))}else{r=e.filter((function(e){return e.toLowerCase().indexOf(" "+t.toLowerCase()+":")!==-1||e.toLowerCase().indexOf("/"+t.toLowerCase())!==-1}))}const n=[];for(const e of r){const t=e.trim().split(" ")[2];if(t){n.push(parseInt(t,10))}}v.push({name:t,running:r.length>0,startmode:"",pids:n,cpu:parseFloat(r.reduce((function(e,t){return e+parseFloat(t.trim().split(" ")[0])}),0).toFixed(2)),mem:parseFloat(r.reduce((function(e,t){return e+parseFloat(t.trim().split(" ")[1])}),0).toFixed(2))})}));if(d){let e='cat /proc/stat | grep "cpu "';for(let t in v){for(let r in v[t].pids){e+=";cat /proc/"+v[t].pids[r]+"/stat"}}o(e,{maxBuffer:1024*2e4},(function(e,n){let i=n.toString().split("\n");let s=parseProcStat(i.shift());let o={};let a={};i.forEach((e=>{a=calcProcStatLinux(e,s,_);if(a.pid){let e=-1;for(let t in v){for(let r in v[t].pids){if(parseInt(v[t].pids[r])===parseInt(a.pid)){e=t}}}if(e>=0){v[e].cpu+=a.cpuu+a.cpus}o[a.pid]={cpuu:a.cpuu,cpus:a.cpus,utime:a.utime,stime:a.stime,cutime:a.cutime,cstime:a.cstime}}}));_.all=s;_.list=Object.assign({},o);_.ms=Date.now()-_.ms;_.result=Object.assign({},v);if(t){t(v)}r(v)}))}else{if(t){t(v)}r(v)}}else{e=["-o","comm"];c.execSafe("ps",e).then((e=>{if(e){let n=e.replace(/ +/g," ").replace(/,+/g,".").split("\n");u.forEach((function(e){let t=n.filter((function(t){return t.indexOf(e)!==-1}));v.push({name:e,running:t.length>0,startmode:"",cpu:0,mem:0})}));if(t){t(v)}r(v)}else{u.forEach((function(e){v.push({name:e,running:false,startmode:"",cpu:0,mem:0})}));if(t){t(v)}r(v)}}))}}))}else{if(t){t(v)}r(v)}}if(m){try{let e="Get-CimInstance Win32_Service";if(u[0]!=="*"){e+=' -Filter "';u.forEach((t=>{e+=`Name='${t}' or `}));e=`${e.slice(0,-4)}"`}e+=" | select Name,Caption,Started,StartMode,ProcessId | fl";c.powerShell(e).then(((e,i)=>{if(!i){let i=e.split(/\n\s*\n/);i.forEach((e=>{if(e.trim()!==""){let t=e.trim().split("\r\n");let r=c.getValue(t,"Name",":",true).toLowerCase();let i=c.getValue(t,"Caption",":",true).toLowerCase();let s=c.getValue(t,"Started",":",true);let o=c.getValue(t,"StartMode",":",true);let a=c.getValue(t,"ProcessId",":",true);if(n==="*"||u.indexOf(r)>=0||u.indexOf(i)>=0){v.push({name:r,running:s.toLowerCase()==="true",startmode:o,pids:[a],cpu:0,mem:0});w.push(r);w.push(i)}}}));if(n!=="*"){let e=u.filter((function(e){return w.indexOf(e)===-1}));e.forEach((function(e){v.push({name:e,running:false,startmode:"",pids:[],cpu:0,mem:0})}))}if(t){t(v)}r(v)}else{u.forEach((function(e){v.push({name:e,running:false,startmode:"",cpu:0,mem:0})}));if(t){t(v)}r(v)}}))}catch(e){if(t){t(v)}r(v)}}}else{if(t){t([])}r([])}}))}))}t.services=services;function parseProcStat(e){let t=e.replace(/ +/g," ").split(" ");let r=t.length>=2?parseInt(t[1]):0;let n=t.length>=3?parseInt(t[2]):0;let i=t.length>=4?parseInt(t[3]):0;let s=t.length>=5?parseInt(t[4]):0;let o=t.length>=6?parseInt(t[5]):0;let a=t.length>=7?parseInt(t[6]):0;let c=t.length>=8?parseInt(t[7]):0;let u=t.length>=9?parseInt(t[8]):0;let d=t.length>=10?parseInt(t[9]):0;let p=t.length>=11?parseInt(t[10]):0;return r+n+i+s+o+a+c+u+d+p}function calcProcStatLinux(e,t,r){let n=e.replace(/ +/g," ").split(")");if(n.length>=2){let e=n[1].split(" ");if(e.length>=16){let i=parseInt(n[0].split(" ")[0]);let s=parseInt(e[12]);let o=parseInt(e[13]);let a=parseInt(e[14]);let c=parseInt(e[15]);let u=0;let d=0;if(r.all>0&&r.list[i]){u=(s+a-r.list[i].utime-r.list[i].cutime)/(t-r.all)*100;d=(o+c-r.list[i].stime-r.list[i].cstime)/(t-r.all)*100}else{u=(s+a)/t*100;d=(o+c)/t*100}return{pid:i,utime:s,stime:o,cutime:a,cstime:c,cpuu:u,cpus:d}}else{return{pid:0,utime:0,stime:0,cutime:0,cstime:0,cpuu:0,cpus:0}}}else{return{pid:0,utime:0,stime:0,cutime:0,cstime:0,cpuu:0,cpus:0}}}function calcProcStatWin(e,t,r){let n=0;let i=0;if(r.all>0&&r.list[e.pid]){n=(e.utime-r.list[e.pid].utime)/(t-r.all)*100;i=(e.stime-r.list[e.pid].stime)/(t-r.all)*100}else{n=e.utime/t*100;i=e.stime/t*100}return{pid:e.pid,utime:e.utime,stime:e.stime,cpuu:n>0?n:0,cpus:i>0?i:0}}function processes(e){let t=[];function getName(e){e=e||"";let t=e.split(" ")[0];if(t.substr(-1)===":"){t=t.substr(0,t.length-1)}if(t.substr(0,1)!=="["){let e=t.split("/");if(isNaN(parseInt(e[e.length-1]))){t=e[e.length-1]}else{t=e[0]}}return t}function parseLine(e){let r=0;let n=0;function checkColumn(i){r=n;if(t[i]){n=e.substring(t[i].to+r,1e4).indexOf(" ")}else{n=1e4}}checkColumn(0);const o=parseInt(e.substring(t[0].from+r,t[0].to+n));checkColumn(1);const a=parseInt(e.substring(t[1].from+r,t[1].to+n));checkColumn(2);const c=parseFloat(e.substring(t[2].from+r,t[2].to+n).replace(/,/g,"."));checkColumn(3);const u=parseFloat(e.substring(t[3].from+r,t[3].to+n).replace(/,/g,"."));checkColumn(4);const p=parseInt(e.substring(t[4].from+r,t[4].to+n));checkColumn(5);const m=parseInt(e.substring(t[5].from+r,t[5].to+n));checkColumn(6);const y=parseInt(e.substring(t[6].from+r,t[6].to+n));checkColumn(7);const g=parseInt(e.substring(t[7].from+r,t[7].to+n))||0;checkColumn(8);const b=!v?parseElapsedTime(e.substring(t[8].from+r,t[8].to+n).trim()):parseTimeUnix(e.substring(t[8].from+r,t[8].to+n).trim());checkColumn(9);let w=e.substring(t[9].from+r,t[9].to+n).trim();w=w[0]==="R"?"running":w[0]==="S"?"sleeping":w[0]==="T"?"stopped":w[0]==="W"?"paging":w[0]==="X"?"dead":w[0]==="Z"?"zombie":w[0]==="D"||w[0]==="U"?"blocked":"unknown";checkColumn(10);let _=e.substring(t[10].from+r,t[10].to+n).trim();if(_==="?"||_==="??"){_=""}checkColumn(11);const C=e.substring(t[11].from+r,t[11].to+n).trim();checkColumn(12);let P="";let O="";let E="";let I=e.substring(t[12].from+r,t[12].to+n).trim();if(I.substr(I.length-1)==="]"){I=I.slice(0,-1)}if(I.substr(0,1)==="["){O=I.substring(1)}else{const e=I.indexOf("(");const t=I.indexOf(")");const r=I.indexOf("/");const n=I.indexOf(":");if(e<t&&e<r&&r<t){O=I.split(" ")[0];O=O.replace(/:/g,"")}else{if(n>0&&(r===-1||r>3)){O=I.split(" ")[0];O=O.replace(/:/g,"")}else{let e=I.indexOf(" -");let t=I.indexOf(" /");e=e>=0?e:1e4;t=t>=0?t:1e4;const r=Math.min(e,t);let n=I.substr(0,r);const o=I.substr(r);const a=n.lastIndexOf("/");if(a>=0){P=n.substr(0,a);n=n.substr(a+1)}if(r===1e4&&n.indexOf(" ")>-1){const e=n.split(" ");if(i.existsSync(s.join(P,e[0]))){O=e.shift();E=(e.join(" ")+" "+o).trim()}else{O=n.trim();E=o.trim()}}else{O=n.trim();E=o.trim()}}}}return{pid:o,parentPid:a,name:d?getName(O):O,cpu:c,cpuu:0,cpus:0,mem:u,priority:p,memVsz:m,memRss:y,nice:g,started:b,state:w,tty:_,user:C,command:O,params:E,path:P}}function parseProcesses(e){let r=[];if(e.length>1){let n=e[0];t=c.parseHead(n,8);e.shift();e.forEach((function(e){if(e.trim()!==""){r.push(parseLine(e))}}))}return r}function parseProcesses2(e){function formatDateTime(e){const t=("0"+(e.getMonth()+1).toString()).slice(-2);const r=e.getFullYear().toString();const n=("0"+e.getDate().toString()).slice(-2);const i=("0"+e.getHours().toString()).slice(-2);const s=("0"+e.getMinutes().toString()).slice(-2);const o=("0"+e.getSeconds().toString()).slice(-2);return r+"-"+t+"-"+n+" "+i+":"+s+":"+o}function parseElapsed(e){let t="";if(e.indexOf("d")>=0){const r=e.split("d");t=formatDateTime(new Date(Date.now()-(r[0]*24+r[1]*1)*60*60*1e3))}else if(e.indexOf("h")>=0){const r=e.split("h");t=formatDateTime(new Date(Date.now()-(r[0]*60+r[1]*1)*60*1e3))}else if(e.indexOf(":")>=0){const r=e.split(":");t=formatDateTime(new Date(Date.now()-(r.length>1?(r[0]*60+r[1])*1e3:r[0]*1e3)))}return t}let t=[];e.forEach((function(e){if(e.trim()!==""){e=e.trim().replace(/ +/g," ").replace(/,+/g,".");const r=e.split(" ");const i=r.slice(9).join(" ");const s=parseFloat((1*parseInt(r[3])*1024/n.totalmem()).toFixed(1));const o=parseElapsed(r[5]);t.push({pid:parseInt(r[0]),parentPid:parseInt(r[1]),name:getName(i),cpu:0,cpuu:0,cpus:0,mem:s,priority:0,memVsz:parseInt(r[2]),memRss:parseInt(r[3]),nice:parseInt(r[4]),started:o,state:r[6]==="R"?"running":r[6]==="S"?"sleeping":r[6]==="T"?"stopped":r[6]==="W"?"paging":r[6]==="X"?"dead":r[6]==="Z"?"zombie":r[6]==="D"||r[6]==="U"?"blocked":"unknown",tty:r[7],user:r[8],command:i})}}));return t}return new Promise((t=>{process.nextTick((()=>{let r={all:0,running:0,blocked:0,sleeping:0,unknown:0,list:[]};let i="";if(w.ms&&Date.now()-w.ms>=500||w.ms===0){if(d||y||g||b||p||v){if(d){i="export LC_ALL=C; ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,etime:30,state:5,tty:15,user:20,command; unset LC_ALL"}if(y||g||b){i="export LC_ALL=C; ps -axo pid,ppid,pcpu,pmem,pri,vsz,rss,ni,etime,state,tty,user,command; unset LC_ALL"}if(p){i="ps -axo pid,ppid,pcpu,pmem,pri,vsz=temp_title_1,rss=temp_title_2,nice,etime=temp_title_3,state,tty,user,command -r"}if(v){i="ps -Ao pid,ppid,pcpu,pmem,pri,vsz,rss,nice,stime,s,tty,user,comm"}o(i,{maxBuffer:1024*2e4},(function(n,s){if(!n&&s.toString().trim()){r.list=parseProcesses(s.toString().split("\n")).slice();r.all=r.list.length;r.running=r.list.filter((function(e){return e.state==="running"})).length;r.blocked=r.list.filter((function(e){return e.state==="blocked"})).length;r.sleeping=r.list.filter((function(e){return e.state==="sleeping"})).length;if(d){i='cat /proc/stat | grep "cpu "';r.list.forEach((e=>{i+=";cat /proc/"+e.pid+"/stat"}));o(i,{maxBuffer:1024*2e4},(function(n,i){let s=i.toString().split("\n");let o=parseProcStat(s.shift());let a={};let c={};s.forEach((e=>{c=calcProcStatLinux(e,o,w);if(c.pid){let e=r.list.map((function(e){return e.pid})).indexOf(c.pid);if(e>=0){r.list[e].cpu=c.cpuu+c.cpus;r.list[e].cpuu=c.cpuu;r.list[e].cpus=c.cpus}a[c.pid]={cpuu:c.cpuu,cpus:c.cpus,utime:c.utime,stime:c.stime,cutime:c.cutime,cstime:c.cstime}}}));w.all=o;w.list=Object.assign({},a);w.ms=Date.now()-w.ms;w.result=Object.assign({},r);if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}else{i="ps -o pid,ppid,vsz,rss,nice,etime,stat,tty,user,comm";if(v){i="ps -o pid,ppid,vsz,rss,nice,etime,s,tty,user,comm"}o(i,{maxBuffer:1024*2e4},(function(n,i){if(!n){let n=i.toString().split("\n");n.shift();r.list=parseProcesses2(n).slice();r.all=r.list.length;r.running=r.list.filter((function(e){return e.state==="running"})).length;r.blocked=r.list.filter((function(e){return e.state==="blocked"})).length;r.sleeping=r.list.filter((function(e){return e.state==="sleeping"})).length;if(e){e(r)}t(r)}else{if(e){e(r)}t(r)}}))}}))}else if(m){try{c.powerShell('Get-CimInstance Win32_Process | select-Object ProcessId,ParentProcessId,ExecutionState,Caption,CommandLine,ExecutablePath,UserModeTime,KernelModeTime,WorkingSetSize,Priority,PageFileUsage, @{n="CreationDate";e={$_.CreationDate.ToString("yyyy-MM-dd HH:mm:ss")}} | fl').then(((i,s)=>{if(!s){let e=i.split(/\n\s*\n/);let t=[];let s=[];let o={};let a=0;let u=0;e.forEach((e=>{if(e.trim()!==""){let i=e.trim().split("\r\n");let o=parseInt(c.getValue(i,"ProcessId",":",true),10);let d=parseInt(c.getValue(i,"ParentProcessId",":",true),10);let p=c.getValue(i,"ExecutionState",":");let m=c.getValue(i,"Caption",":",true);let y=c.getValue(i,"CommandLine",":",true);let g=false;i.forEach((e=>{if(g&&e.toLowerCase().startsWith(" ")){y+=" "+e.trim()}else{g=false}if(e.toLowerCase().startsWith("commandline")){g=true}}));let b=c.getValue(i,"ExecutablePath",":",true);let v=parseInt(c.getValue(i,"UserModeTime",":",true),10);let w=parseInt(c.getValue(i,"KernelModeTime",":",true),10);let _=parseInt(c.getValue(i,"WorkingSetSize",":",true),10);a=a+v;u=u+w;r.all++;if(!p){r.unknown++}if(p==="3"){r.running++}if(p==="4"||p==="5"){r.blocked++}s.push({pid:o,utime:v,stime:w,cpu:0,cpuu:0,cpus:0});t.push({pid:o,parentPid:d,name:m,cpu:0,cpuu:0,cpus:0,mem:_/n.totalmem()*100,priority:parseInt(c.getValue(i,"Priority",":",true),10),memVsz:parseInt(c.getValue(i,"PageFileUsage",":",true),10),memRss:Math.floor(parseInt(c.getValue(i,"WorkingSetSize",":",true),10)/1024),nice:0,started:c.getValue(i,"CreationDate",":",true),state:!p?P[0]:P[p],tty:"",user:"",command:y||m,path:b,params:""})}}));r.sleeping=r.all-r.running-r.blocked-r.unknown;r.list=t;s.forEach((e=>{let t=calcProcStatWin(e,a+u,w);let n=r.list.map((function(e){return e.pid})).indexOf(t.pid);if(n>=0){r.list[n].cpu=t.cpuu+t.cpus;r.list[n].cpuu=t.cpuu;r.list[n].cpus=t.cpus}o[t.pid]={cpuu:t.cpuu,cpus:t.cpus,utime:t.utime,stime:t.stime}}));w.all=a+u;w.all_utime=a;w.all_stime=u;w.list=Object.assign({},o);w.ms=Date.now()-w.ms;w.result=Object.assign({},r)}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}else{if(e){e(r)}t(r)}}else{if(e){e(w.result)}t(w.result)}}))}))}t.processes=processes;function processLoad(e,t){if(c.isFunction(e)&&!t){t=e;e=""}return new Promise((r=>{process.nextTick((()=>{e=e||"";if(typeof e!=="string"){if(t){t([])}return r([])}let i="";i.__proto__.toLowerCase=c.stringToLower;i.__proto__.replace=c.stringReplace;i.__proto__.trim=c.stringTrim;const s=c.sanitizeShellString(e);const a=c.mathMin(s.length,2e3);for(let e=0;e<=a;e++){if(s[e]!==undefined){i=i+s[e]}}i=i.trim().toLowerCase().replace(/, /g,"|").replace(/,+/g,"|");if(i===""){i="*"}if(c.isPrototypePolluted()&&i!=="*"){i="------"}let u=i.split("|");let v=[];const w=c.isPrototypePolluted()?"":c.sanitizeShellString(e)||"*";if(w&&u.length&&u[0]!=="------"){if(m){try{c.powerShell("Get-CimInstance Win32_Process | select ProcessId,Caption,UserModeTime,KernelModeTime,WorkingSetSize | fl").then(((e,s)=>{if(!s){let s=e.split(/\n\s*\n/);let o=[];let a={};let d=0;let p=0;s.forEach((e=>{if(e.trim()!==""){let t=e.trim().split("\r\n");let r=parseInt(c.getValue(t,"ProcessId",":",true),10);let s=c.getValue(t,"Caption",":",true);let a=parseInt(c.getValue(t,"UserModeTime",":",true),10);let m=parseInt(c.getValue(t,"KernelModeTime",":",true),10);let y=parseInt(c.getValue(t,"WorkingSetSize",":",true),10);d=d+a;p=p+m;o.push({pid:r,name:s,utime:a,stime:m,cpu:0,cpuu:0,cpus:0,mem:y});let g="";let b=false;u.forEach((function(e){if(s.toLowerCase().indexOf(e.toLowerCase())>=0&&!b){b=true;g=e}}));if(i==="*"||b){let e=false;v.forEach((function(t){if(t.proc.toLowerCase()===g.toLowerCase()){t.pids.push(r);t.mem+=y/n.totalmem()*100;e=true}}));if(!e){v.push({proc:g,pid:r,pids:[r],cpu:0,mem:y/n.totalmem()*100})}}}}));if(i!=="*"){let e=u.filter((function(e){return o.filter((function(t){return t.name.toLowerCase().indexOf(e)>=0})).length===0}));e.forEach((function(e){v.push({proc:e,pid:null,pids:[],cpu:0,mem:0})}))}o.forEach((e=>{let t=calcProcStatWin(e,d+p,C);let r=-1;for(let e=0;e<v.length;e++){if(v[e].pid===t.pid||v[e].pids.indexOf(t.pid)>=0){r=e}}if(r>=0){v[r].cpu+=t.cpuu+t.cpus}a[t.pid]={cpuu:t.cpuu,cpus:t.cpus,utime:t.utime,stime:t.stime}}));C.all=d+p;C.all_utime=d;C.all_stime=p;C.list=Object.assign({},a);C.ms=Date.now()-C.ms;C.result=JSON.parse(JSON.stringify(v));if(t){t(v)}r(v)}}))}catch(e){if(t){t(v)}r(v)}}if(p||d||y||g||b){const e=["-axo","pid,ppid,pcpu,pmem,comm"];c.execSafe("ps",e).then((e=>{if(e){let n=[];let s=e.toString().split("\n").filter((function(e){if(i==="*"){return true}if(e.toLowerCase().indexOf("grep")!==-1){return false}let t=false;u.forEach((function(r){t=t||e.toLowerCase().indexOf(r.toLowerCase())>=0}));return t}));s.shift();s.forEach((function(e){let t=e.trim().replace(/ +/g," ").split(" ");if(t.length>4){const e=t[4].indexOf("/")>=0?t[4].substring(0,t[4].indexOf("/")):t[4];const r=d?e:t[4].substring(t[4].lastIndexOf("/")+1);n.push({name:r,pid:parseInt(t[0])||0,ppid:parseInt(t[1])||0,cpu:parseFloat(t[2].replace(",",".")),mem:parseFloat(t[3].replace(",","."))})}}));n.forEach((function(e){let t=-1;let r=false;let n=e.name;for(let r=0;r<v.length;r++){if(e.name.toLowerCase().indexOf(v[r].proc.toLowerCase())>=0){t=r}}u.forEach((function(t){if(e.name.toLowerCase().indexOf(t.toLowerCase())>=0&&!r){r=true;n=t}}));if(i==="*"||r){if(t<0){if(n){v.push({proc:n,pid:e.pid,pids:[e.pid],cpu:e.cpu,mem:e.mem})}}else{if(e.ppid<10){v[t].pid=e.pid}v[t].pids.push(e.pid);v[t].cpu+=e.cpu;v[t].mem+=e.mem}}}));if(i!=="*"){let e=u.filter((function(e){return n.filter((function(t){return t.name.toLowerCase().indexOf(e)>=0})).length===0}));e.forEach((function(e){v.push({proc:e,pid:null,pids:[],cpu:0,mem:0})}))}if(d){v.forEach((function(e){e.cpu=0}));let e='cat /proc/stat | grep "cpu "';for(let t in v){for(let r in v[t].pids){e+=";cat /proc/"+v[t].pids[r]+"/stat"}}o(e,{maxBuffer:1024*2e4},(function(e,n){let i=n.toString().split("\n");let s=parseProcStat(i.shift());let o={};let a={};i.forEach((e=>{a=calcProcStatLinux(e,s,C);if(a.pid){let e=-1;for(let t in v){if(v[t].pids.indexOf(a.pid)>=0){e=t}}if(e>=0){v[e].cpu+=a.cpuu+a.cpus}o[a.pid]={cpuu:a.cpuu,cpus:a.cpus,utime:a.utime,stime:a.stime,cutime:a.cutime,cstime:a.cstime}}}));v.forEach((function(e){e.cpu=Math.round(e.cpu*100)/100}));C.all=s;C.list=Object.assign({},o);C.ms=Date.now()-C.ms;C.result=Object.assign({},v);if(t){t(v)}r(v)}))}else{if(t){t(v)}r(v)}}else{if(t){t(v)}r(v)}}))}}}))}))}t.processLoad=processLoad},97026:(e,t,r)=>{"use strict";const n=r(57147);const i=r(22037);const s=r(79494);const o=r(32081).exec;const a=r(32081).execSync;const c=s.promisify(r(32081).exec);let u=process.platform;const d=u==="linux"||u==="android";const p=u==="darwin";const m=u==="win32";const y=u==="freebsd";const g=u==="openbsd";const b=u==="netbsd";const v=u==="sunos";function system(e){return new Promise((t=>{process.nextTick((()=>{let r={manufacturer:"",model:"Computer",version:"",serial:"-",uuid:"-",sku:"-",virtual:false};if(d||y||g||b){o("export LC_ALL=C; dmidecode -t system 2>/dev/null; unset LC_ALL",(function(o,c){let u=c.toString().split("\n");r.manufacturer=s.getValue(u,"manufacturer");r.model=s.getValue(u,"product name");r.version=s.getValue(u,"version");r.serial=s.getValue(u,"serial number");r.uuid=s.getValue(u,"uuid").toLowerCase();r.sku=s.getValue(u,"sku number");const d=`echo -n "product_name: "; cat /sys/devices/virtual/dmi/id/product_name 2>/dev/null; echo;\n            echo -n "product_serial: "; cat /sys/devices/virtual/dmi/id/product_serial 2>/dev/null; echo;\n            echo -n "product_uuid: "; cat /sys/devices/virtual/dmi/id/product_uuid 2>/dev/null; echo;\n            echo -n "product_version: "; cat /sys/devices/virtual/dmi/id/product_version 2>/dev/null; echo;\n            echo -n "sys_vendor: "; cat /sys/devices/virtual/dmi/id/sys_vendor 2>/dev/null; echo;`;try{u=a(d,s.execOptsLinux).toString().split("\n");r.manufacturer=r.manufacturer===""?s.getValue(u,"sys_vendor"):r.manufacturer;r.model=r.model===""?s.getValue(u,"product_name"):r.model;r.version=r.version===""?s.getValue(u,"product_version"):r.version;r.serial=r.serial===""?s.getValue(u,"product_serial"):r.serial;r.uuid=r.uuid===""?s.getValue(u,"product_uuid").toLowerCase():r.uuid}catch(e){s.noop()}if(!r.serial||r.serial.toLowerCase().indexOf("o.e.m.")!==-1){r.serial="-"}if(!r.manufacturer||r.manufacturer.toLowerCase().indexOf("o.e.m.")!==-1){r.manufacturer=""}if(!r.model||r.model.toLowerCase().indexOf("o.e.m.")!==-1){r.model="Computer"}if(!r.version||r.version.toLowerCase().indexOf("o.e.m.")!==-1){r.version=""}if(!r.sku||r.sku.toLowerCase().indexOf("o.e.m.")!==-1){r.sku="-"}if(r.model.toLowerCase()==="virtualbox"||r.model.toLowerCase()==="kvm"||r.model.toLowerCase()==="virtual machine"||r.model.toLowerCase()==="bochs"||r.model.toLowerCase().startsWith("vmware")||r.model.toLowerCase().startsWith("droplet")){r.virtual=true;switch(r.model.toLowerCase()){case"virtualbox":r.virtualHost="VirtualBox";break;case"vmware":r.virtualHost="VMware";break;case"kvm":r.virtualHost="KVM";break;case"bochs":r.virtualHost="bochs";break}}if(r.manufacturer.toLowerCase().startsWith("vmware")||r.manufacturer.toLowerCase()==="xen"){r.virtual=true;switch(r.manufacturer.toLowerCase()){case"vmware":r.virtualHost="VMware";break;case"xen":r.virtualHost="Xen";break}}if(!r.virtual){try{const e=a("ls -1 /dev/disk/by-id/ 2>/dev/null",s.execOptsLinux).toString();if(e.indexOf("_QEMU_")>=0){r.virtual=true;r.virtualHost="QEMU"}if(e.indexOf("_VBOX_")>=0){r.virtual=true;r.virtualHost="VirtualBox"}}catch(e){s.noop()}}if(!r.virtual&&(i.release().toLowerCase().indexOf("microsoft")>=0||i.release().toLowerCase().endsWith("wsl2"))){const e=parseFloat(i.release().toLowerCase());r.virtual=true;r.manufacturer="Microsoft";r.model="WSL";r.version=e<4.19?"1":"2"}if((y||g||b)&&!r.virtualHost){try{const e=a("dmidecode -t 4",s.execOptsLinux);const t=e.toString().split("\n");const n=s.getValue(t,"manufacturer",":",true);switch(n.toLowerCase()){case"virtualbox":r.virtualHost="VirtualBox";break;case"vmware":r.virtualHost="VMware";break;case"kvm":r.virtualHost="KVM";break;case"bochs":r.virtualHost="bochs";break}}catch(e){s.noop()}}if(n.existsSync("/.dockerenv")||n.existsSync("/.dockerinit")){r.model="Docker Container"}try{const e=a('dmesg 2>/dev/null | grep -iE "virtual|hypervisor" | grep -iE "vmware|qemu|kvm|xen" | grep -viE "Nested Virtualization|/virtual/"');let t=e.toString().split("\n");if(t.length>0){if(r.model==="Computer"){r.model="Virtual machine"}r.virtual=true;if(e.toString().toLowerCase().indexOf("vmware")>=0&&!r.virtualHost){r.virtualHost="VMware"}if(e.toString().toLowerCase().indexOf("qemu")>=0&&!r.virtualHost){r.virtualHost="QEMU"}if(e.toString().toLowerCase().indexOf("xen")>=0&&!r.virtualHost){r.virtualHost="Xen"}if(e.toString().toLowerCase().indexOf("kvm")>=0&&!r.virtualHost){r.virtualHost="KVM"}}}catch(e){s.noop()}if(r.manufacturer===""&&r.model==="Computer"&&r.version===""){n.readFile("/proc/cpuinfo",(function(n,i){if(!n){let e=i.toString().split("\n");r.model=s.getValue(e,"hardware",":",true).toUpperCase();r.version=s.getValue(e,"revision",":",true).toLowerCase();r.serial=s.getValue(e,"serial",":",true);const t=s.getValue(e,"model:",":",true);if((r.model==="BCM2835"||r.model==="BCM2708"||r.model==="BCM2709"||r.model==="BCM2710"||r.model==="BCM2711"||r.model==="BCM2836"||r.model==="BCM2837")&&t.toLowerCase().indexOf("raspberry")>=0){const t=s.decodePiCpuinfo(e);r.model=t.model;r.version=t.revisionCode;r.manufacturer="Raspberry Pi Foundation";r.raspberry={manufacturer:t.manufacturer,processor:t.processor,type:t.type,revision:t.revision}}}if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}))}if(p){o("ioreg -c IOPlatformExpertDevice -d 2",(function(n,i){if(!n){let e=i.toString().replace(/[<>"]/g,"").split("\n");const t=s.splitByNumber(s.getValue(e,"model","=",true));const n=s.getValue(e,"version","=",true);r.manufacturer=s.getValue(e,"manufacturer","=",true);r.model=n?s.getValue(e,"model","=",true):t[0];r.version=n||t[1];r.serial=s.getValue(e,"ioplatformserialnumber","=",true);r.uuid=s.getValue(e,"ioplatformuuid","=",true).toLowerCase();r.sku=s.getValue(e,"board-id","=",true)||s.getValue(e,"target-sub-type","=",true)}if(e){e(r)}t(r)}))}if(v){if(e){e(r)}t(r)}if(m){try{s.powerShell("Get-CimInstance Win32_ComputerSystemProduct | select Name,Vendor,Version,IdentifyingNumber,UUID | fl").then(((n,i)=>{if(!i){let i=n.split("\r\n");r.manufacturer=s.getValue(i,"vendor",":");r.model=s.getValue(i,"name",":");r.version=s.getValue(i,"version",":");r.serial=s.getValue(i,"identifyingnumber",":");r.uuid=s.getValue(i,"uuid",":").toLowerCase();const o=r.model.toLowerCase();if(o==="virtualbox"||o==="kvm"||o==="virtual machine"||o==="bochs"||o.startsWith("vmware")||o.startsWith("qemu")||o.startsWith("parallels")){r.virtual=true;if(o.startsWith("virtualbox")){r.virtualHost="VirtualBox"}if(o.startsWith("vmware")){r.virtualHost="VMware"}if(o.startsWith("kvm")){r.virtualHost="KVM"}if(o.startsWith("bochs")){r.virtualHost="bochs"}if(o.startsWith("qemu")){r.virtualHost="KVM"}if(o.startsWith("parallels")){r.virtualHost="Parallels"}}const a=r.manufacturer.toLowerCase();if(a.startsWith("vmware")||a.startsWith("qemu")||a==="xen"||a.startsWith("parallels")){r.virtual=true;if(a.startsWith("vmware")){r.virtualHost="VMware"}if(a.startsWith("xen")){r.virtualHost="Xen"}if(a.startsWith("qemu")){r.virtualHost="KVM"}if(a.startsWith("parallels")){r.virtualHost="Parallels"}}s.powerShell('Get-CimInstance MS_Systeminformation -Namespace "root/wmi" | select systemsku | fl ').then(((n,i)=>{if(!i){let e=n.split("\r\n");r.sku=s.getValue(e,"systemsku",":")}if(!r.virtual){s.powerShell("Get-CimInstance Win32_bios | select Version, SerialNumber, SMBIOSBIOSVersion").then(((n,i)=>{if(!i){let i=n.toString();if(i.indexOf("VRTUAL")>=0||i.indexOf("A M I ")>=0||i.indexOf("VirtualBox")>=0||i.indexOf("VMWare")>=0||i.indexOf("Xen")>=0||i.indexOf("Parallels")>=0){r.virtual=true;if(i.indexOf("VirtualBox")>=0&&!r.virtualHost){r.virtualHost="VirtualBox"}if(i.indexOf("VMware")>=0&&!r.virtualHost){r.virtualHost="VMware"}if(i.indexOf("Xen")>=0&&!r.virtualHost){r.virtualHost="Xen"}if(i.indexOf("VRTUAL")>=0&&!r.virtualHost){r.virtualHost="Hyper-V"}if(i.indexOf("A M I")>=0&&!r.virtualHost){r.virtualHost="Virtual PC"}if(i.indexOf("Parallels")>=0&&!r.virtualHost){r.virtualHost="Parallels"}}if(e){e(r)}t(r)}else{if(e){e(r)}t(r)}}))}else{if(e){e(r)}t(r)}}))}else{if(e){e(r)}t(r)}}))}catch(n){if(e){e(r)}t(r)}}}))}))}t.system=system;function cleanDefaults(e){const t=e.toLowerCase();if(t.indexOf("o.e.m.")===-1&&t.indexOf("default string")===-1&&t!=="default"){return e||""}return""}function bios(e){return new Promise((t=>{process.nextTick((()=>{let r={vendor:"",version:"",releaseDate:"",revision:""};let n="";if(d||y||g||b){if(process.arch==="arm"){n="cat /proc/cpuinfo | grep Serial"}else{n="export LC_ALL=C; dmidecode -t bios 2>/dev/null; unset LC_ALL"}o(n,(function(n,i){let o=i.toString().split("\n");r.vendor=s.getValue(o,"Vendor");r.version=s.getValue(o,"Version");let c=s.getValue(o,"Release Date");r.releaseDate=s.parseDateTime(c).date;r.revision=s.getValue(o,"BIOS Revision");r.serial=s.getValue(o,"SerialNumber");let u=s.getValue(o,"Currently Installed Language").split("|")[0];if(u){r.language=u}if(o.length&&i.toString().indexOf("Characteristics:")>=0){const e=[];o.forEach((t=>{if(t.indexOf(" is supported")>=0){const r=t.split(" is supported")[0].trim();e.push(r)}}));r.features=e}const d=`echo -n "bios_date: "; cat /sys/devices/virtual/dmi/id/bios_date 2>/dev/null; echo;\n            echo -n "bios_vendor: "; cat /sys/devices/virtual/dmi/id/bios_vendor 2>/dev/null; echo;\n            echo -n "bios_version: "; cat /sys/devices/virtual/dmi/id/bios_version 2>/dev/null; echo;`;try{o=a(d,s.execOptsLinux).toString().split("\n");r.vendor=!r.vendor?s.getValue(o,"bios_vendor"):r.vendor;r.version=!r.version?s.getValue(o,"bios_version"):r.version;c=s.getValue(o,"bios_date");r.releaseDate=!r.releaseDate?s.parseDateTime(c).date:r.releaseDate}catch(e){s.noop()}if(e){e(r)}t(r)}))}if(p){r.vendor="Apple Inc.";o("system_profiler SPHardwareDataType -json",(function(n,i){try{const e=JSON.parse(i.toString());if(e&&e.SPHardwareDataType&&e.SPHardwareDataType.length){let t=e.SPHardwareDataType[0].boot_rom_version;t=t?t.split("(")[0].trim():null;r.version=t}}catch(e){s.noop()}if(e){e(r)}t(r)}))}if(v){r.vendor="Sun Microsystems";if(e){e(r)}t(r)}if(m){try{s.powerShell('Get-CimInstance Win32_bios | select Description,Version,Manufacturer,@{n="ReleaseDate";e={$_.ReleaseDate.ToString("yyyy-MM-dd")}},BuildNumber,SerialNumber,SMBIOSBIOSVersion | fl').then(((n,i)=>{if(!i){let e=n.toString().split("\r\n");const t=s.getValue(e,"description",":");const i=s.getValue(e,"SMBIOSBIOSVersion",":");if(t.indexOf(" Version ")!==-1){r.vendor=t.split(" Version ")[0].trim();r.version=t.split(" Version ")[1].trim()}else if(t.indexOf(" Ver: ")!==-1){r.vendor=s.getValue(e,"manufacturer",":");r.version=t.split(" Ver: ")[1].trim()}else{r.vendor=s.getValue(e,"manufacturer",":");r.version=i||s.getValue(e,"version",":")}r.releaseDate=s.getValue(e,"releasedate",":");r.revision=s.getValue(e,"buildnumber",":");r.serial=cleanDefaults(s.getValue(e,"serialnumber",":"))}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}}))}))}t.bios=bios;function baseboard(e){return new Promise((t=>{process.nextTick((()=>{let r={manufacturer:"",model:"",version:"",serial:"-",assetTag:"-",memMax:null,memSlots:null};let o="";if(d||y||g||b){if(process.arch==="arm"){o="cat /proc/cpuinfo | grep Serial"}else{o="export LC_ALL=C; dmidecode -t 2 2>/dev/null; unset LC_ALL"}const u=[];u.push(c(o));u.push(c("export LC_ALL=C; dmidecode -t memory 2>/dev/null"));s.promiseAll(u).then((o=>{let c=o.results[0]?o.results[0].toString().split("\n"):[""];r.manufacturer=cleanDefaults(s.getValue(c,"Manufacturer"));r.model=cleanDefaults(s.getValue(c,"Product Name"));r.version=cleanDefaults(s.getValue(c,"Version"));r.serial=cleanDefaults(s.getValue(c,"Serial Number"));r.assetTag=cleanDefaults(s.getValue(c,"Asset Tag"));const u=`echo -n "board_asset_tag: "; cat /sys/devices/virtual/dmi/id/board_asset_tag 2>/dev/null; echo;\n            echo -n "board_name: "; cat /sys/devices/virtual/dmi/id/board_name 2>/dev/null; echo;\n            echo -n "board_serial: "; cat /sys/devices/virtual/dmi/id/board_serial 2>/dev/null; echo;\n            echo -n "board_vendor: "; cat /sys/devices/virtual/dmi/id/board_vendor 2>/dev/null; echo;\n            echo -n "board_version: "; cat /sys/devices/virtual/dmi/id/board_version 2>/dev/null; echo;`;try{c=a(u,s.execOptsLinux).toString().split("\n");r.manufacturer=cleanDefaults(!r.manufacturer?s.getValue(c,"board_vendor"):r.manufacturer);r.model=cleanDefaults(!r.model?s.getValue(c,"board_name"):r.model);r.version=cleanDefaults(!r.version?s.getValue(c,"board_version"):r.version);r.serial=cleanDefaults(!r.serial?s.getValue(c,"board_serial"):r.serial);r.assetTag=cleanDefaults(!r.assetTag?s.getValue(c,"board_asset_tag"):r.assetTag)}catch(e){s.noop()}c=o.results[1]?o.results[1].toString().split("\n"):[""];r.memMax=s.toInt(s.getValue(c,"Maximum Capacity"))*1024*1024*1024||null;r.memSlots=s.toInt(s.getValue(c,"Number Of Devices"))||null;let d="";try{d=n.readFileSync("/proc/cpuinfo").toString().split("\n")}catch(e){s.noop()}if(d){const e=s.getValue(d,"hardware");if(e.startsWith("BCM")){const e=s.decodePiCpuinfo(d);r.manufacturer=e.manufacturer;r.model="Raspberry Pi";r.serial=e.serial;r.version=e.type+" - "+e.revision;r.memMax=i.totalmem();r.memSlots=0}}if(e){e(r)}t(r)}))}if(p){const n=[];n.push(c("ioreg -c IOPlatformExpertDevice -d 2"));n.push(c("system_profiler SPMemoryDataType"));s.promiseAll(n).then((n=>{let o=n.results[0]?n.results[0].toString().replace(/[<>"]/g,"").split("\n"):[""];r.manufacturer=s.getValue(o,"manufacturer","=",true);r.model=s.getValue(o,"model","=",true);r.version=s.getValue(o,"version","=",true);r.serial=s.getValue(o,"ioplatformserialnumber","=",true);r.assetTag=s.getValue(o,"board-id","=",true);let a=n.results[1]?n.results[1].toString().split("        BANK "):[""];if(a.length===1){a=n.results[1]?n.results[1].toString().split("        DIMM"):[""]}a.shift();r.memSlots=a.length;if(i.arch()==="arm64"){r.memSlots=0;r.memMax=i.totalmem()}if(e){e(r)}t(r)}))}if(v){if(e){e(r)}t(r)}if(m){try{const n=[];const o=parseInt(i.release())>=10;const a=o?"MaxCapacityEx":"MaxCapacity";n.push(s.powerShell("Get-CimInstance Win32_baseboard | select Model,Manufacturer,Product,Version,SerialNumber,PartNumber,SKU | fl"));n.push(s.powerShell(`Get-CimInstance Win32_physicalmemoryarray | select ${a}, MemoryDevices | fl`));s.promiseAll(n).then((n=>{let i=n.results[0]?n.results[0].toString().split("\r\n"):[""];r.manufacturer=cleanDefaults(s.getValue(i,"manufacturer",":"));r.model=cleanDefaults(s.getValue(i,"model",":"));if(!r.model){r.model=cleanDefaults(s.getValue(i,"product",":"))}r.version=cleanDefaults(s.getValue(i,"version",":"));r.serial=cleanDefaults(s.getValue(i,"serialnumber",":"));r.assetTag=cleanDefaults(s.getValue(i,"partnumber",":"));if(!r.assetTag){r.assetTag=cleanDefaults(s.getValue(i,"sku",":"))}i=n.results[1]?n.results[1].toString().split("\r\n"):[""];r.memMax=s.toInt(s.getValue(i,a,":"))*(o?1024:1)||null;r.memSlots=s.toInt(s.getValue(i,"MemoryDevices",":"))||null;if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}}))}))}t.baseboard=baseboard;function macOsChassisType(e){e=e.toLowerCase();if(e.startsWith("macbookair")){return"Notebook"}if(e.startsWith("macbookpro")){return"Laptop"}if(e.startsWith("macbook")){return"Notebook"}if(e.startsWith("macmini")){return"Desktop"}if(e.startsWith("imac")){return"Desktop"}if(e.startsWith("macstudio")){return"Desktop"}if(e.startsWith("macpro")){return"Tower"}return"Other"}function chassis(e){const t=["Other","Unknown","Desktop","Low Profile Desktop","Pizza Box","Mini Tower","Tower","Portable","Laptop","Notebook","Hand Held","Docking Station","All in One","Sub Notebook","Space-Saving","Lunch Box","Main System Chassis","Expansion Chassis","SubChassis","Bus Expansion Chassis","Peripheral Chassis","Storage Chassis","Rack Mount Chassis","Sealed-Case PC","Multi-System Chassis","Compact PCI","Advanced TCA","Blade","Blade Enclosure","Tablet","Convertible","Detachable","IoT Gateway ","Embedded PC","Mini PC","Stick PC"];return new Promise((r=>{process.nextTick((()=>{let n={manufacturer:"",model:"",type:"",version:"",serial:"-",assetTag:"-",sku:""};if(d||y||g||b){const i=`echo -n "chassis_asset_tag: "; cat /sys/devices/virtual/dmi/id/chassis_asset_tag 2>/dev/null; echo;\n            echo -n "chassis_serial: "; cat /sys/devices/virtual/dmi/id/chassis_serial 2>/dev/null; echo;\n            echo -n "chassis_type: "; cat /sys/devices/virtual/dmi/id/chassis_type 2>/dev/null; echo;\n            echo -n "chassis_vendor: "; cat /sys/devices/virtual/dmi/id/chassis_vendor 2>/dev/null; echo;\n            echo -n "chassis_version: "; cat /sys/devices/virtual/dmi/id/chassis_version 2>/dev/null; echo;`;o(i,(function(i,o){let a=o.toString().split("\n");n.manufacturer=cleanDefaults(s.getValue(a,"chassis_vendor"));const c=parseInt(s.getValue(a,"chassis_type").replace(/\D/g,""));n.type=cleanDefaults(c&&!isNaN(c)&&c<t.length?t[c-1]:"");n.version=cleanDefaults(s.getValue(a,"chassis_version"));n.serial=cleanDefaults(s.getValue(a,"chassis_serial"));n.assetTag=cleanDefaults(s.getValue(a,"chassis_asset_tag"));if(e){e(n)}r(n)}))}if(p){o("ioreg -c IOPlatformExpertDevice -d 2",(function(t,i){if(!t){let e=i.toString().replace(/[<>"]/g,"").split("\n");const t=s.getValue(e,"model","=",true);const r=s.splitByNumber(t);const o=s.getValue(e,"version","=",true);n.manufacturer=s.getValue(e,"manufacturer","=",true);n.model=o?s.getValue(e,"model","=",true):r[0];n.type=macOsChassisType(n.model);n.version=o||t;n.serial=s.getValue(e,"ioplatformserialnumber","=",true);n.assetTag=s.getValue(e,"board-id","=",true)||s.getValue(e,"target-type","=",true);n.sku=s.getValue(e,"target-sub-type","=",true)}if(e){e(n)}r(n)}))}if(v){if(e){e(n)}r(n)}if(m){try{s.powerShell("Get-CimInstance Win32_SystemEnclosure | select Model,Manufacturer,ChassisTypes,Version,SerialNumber,PartNumber,SKU,SMBIOSAssetTag | fl").then(((i,o)=>{if(!o){let e=i.toString().split("\r\n");n.manufacturer=cleanDefaults(s.getValue(e,"manufacturer",":"));n.model=cleanDefaults(s.getValue(e,"model",":"));const r=parseInt(s.getValue(e,"ChassisTypes",":").replace(/\D/g,""));n.type=r&&!isNaN(r)&&r<t.length?t[r-1]:"";n.version=cleanDefaults(s.getValue(e,"version",":"));n.serial=cleanDefaults(s.getValue(e,"serialnumber",":"));n.assetTag=cleanDefaults(s.getValue(e,"partnumber",":"));if(!n.assetTag){n.assetTag=cleanDefaults(s.getValue(e,"SMBIOSAssetTag",":"))}n.sku=cleanDefaults(s.getValue(e,"sku",":"))}if(e){e(n)}r(n)}))}catch(t){if(e){e(n)}r(n)}}}))}))}t.chassis=chassis},39928:(e,t,r)=>{"use strict";const n=r(32081).exec;const i=r(79494);let s=process.platform;const o=s==="linux"||s==="android";const a=s==="darwin";const c=s==="win32";const u=s==="freebsd";const d=s==="openbsd";const p=s==="netbsd";const m=s==="sunos";function getLinuxUsbType(e,t){let r=e;const n=(t+" "+e).toLowerCase();if(n.indexOf("camera")>=0){r="Camera"}else if(n.indexOf("hub")>=0){r="Hub"}else if(n.indexOf("keybrd")>=0){r="Keyboard"}else if(n.indexOf("keyboard")>=0){r="Keyboard"}else if(n.indexOf("mouse")>=0){r="Mouse"}else if(n.indexOf("stora")>=0){r="Storage"}else if(n.indexOf("microp")>=0){r="Microphone"}else if(n.indexOf("headset")>=0){r="Audio"}else if(n.indexOf("audio")>=0){r="Audio"}return r}function parseLinuxUsb(e){const t={};const r=e.split("\n");if(r&&r.length&&r[0].indexOf("Device")>=0){const e=r[0].split(" ");t.bus=parseInt(e[0],10);if(e[2]){t.deviceId=parseInt(e[2],10)}else{t.deviceId=null}}else{t.bus=null;t.deviceId=null}const n=i.getValue(r,"idVendor"," ",true).trim();let s=n.split(" ");s.shift();const o=s.join(" ");const a=i.getValue(r,"idProduct"," ",true).trim();let c=a.split(" ");c.shift();const u=c.join(" ");const d=i.getValue(r,"bInterfaceClass"," ",true).trim();let p=d.split(" ");p.shift();const m=p.join(" ");const y=i.getValue(r,"iManufacturer"," ",true).trim();let g=y.split(" ");g.shift();const b=g.join(" ");const v=i.getValue(r,"iSerial"," ",true).trim();let w=v.split(" ");w.shift();const _=w.join(" ");t.id=(n.startsWith("0x")?n.split(" ")[0].substr(2,10):"")+":"+(a.startsWith("0x")?a.split(" ")[0].substr(2,10):"");t.name=u;t.type=getLinuxUsbType(m,u);t.removable=null;t.vendor=o;t.manufacturer=b;t.maxPower=i.getValue(r,"MaxPower"," ",true);t.serialNumber=_;return t}function getDarwinUsbType(e){let t="";if(e.indexOf("camera")>=0){t="Camera"}else if(e.indexOf("touch bar")>=0){t="Touch Bar"}else if(e.indexOf("controller")>=0){t="Controller"}else if(e.indexOf("headset")>=0){t="Audio"}else if(e.indexOf("keyboard")>=0){t="Keyboard"}else if(e.indexOf("trackpad")>=0){t="Trackpad"}else if(e.indexOf("sensor")>=0){t="Sensor"}else if(e.indexOf("bthusb")>=0){t="Bluetooth"}else if(e.indexOf("bth")>=0){t="Bluetooth"}else if(e.indexOf("rfcomm")>=0){t="Bluetooth"}else if(e.indexOf("usbhub")>=0){t="Hub"}else if(e.indexOf(" hub")>=0){t="Hub"}else if(e.indexOf("mouse")>=0){t="Mouse"}else if(e.indexOf("microp")>=0){t="Microphone"}else if(e.indexOf("removable")>=0){t="Storage"}return t}function parseDarwinUsb(e,t){const r={};r.id=t;e=e.replace(/ \|/g,"");e=e.trim();let n=e.split("\n");n.shift();try{for(let e=0;e<n.length;e++){n[e]=n[e].trim();n[e]=n[e].replace(/=/g,":");if(n[e]!=="{"&&n[e]!=="}"&&n[e+1]&&n[e+1].trim()!=="}"){n[e]=n[e]+","}n[e]=n[e].replace(":Yes,",':"Yes",');n[e]=n[e].replace(": Yes,",': "Yes",');n[e]=n[e].replace(": Yes",': "Yes"');n[e]=n[e].replace(":No,",':"No",');n[e]=n[e].replace(": No,",': "No",');n[e]=n[e].replace(": No",': "No"');n[e]=n[e].replace("((","").replace("))","");const t=/<(\w+)>/.exec(n[e]);if(t){const r=t[0];n[e]=n[e].replace(r,`"${r}"`)}}const e=JSON.parse(n.join("\n"));const t=(e["Built-In"]?e["Built-In"].toLowerCase()!=="yes":true)&&(e["non-removable"]?e["non-removable"].toLowerCase()==="no":true);r.bus=null;r.deviceId=null;r.id=e["USB Address"]||null;r.name=e["kUSBProductString"]||e["USB Product Name"]||null;r.type=getDarwinUsbType((e["kUSBProductString"]||e["USB Product Name"]||"").toLowerCase()+(t?" removable":""));r.removable=e["non-removable"]?e["non-removable"].toLowerCase()||""==="no":true;r.vendor=e["kUSBVendorString"]||e["USB Vendor Name"]||null;r.manufacturer=e["kUSBVendorString"]||e["USB Vendor Name"]||null;r.maxPower=null;r.serialNumber=e["kUSBSerialNumberString"]||null;if(r.name){return r}else{return null}}catch(e){return null}}function getWindowsUsbTypeCreation(e,t){let r="";if(t.indexOf("storage")>=0){r="Storage"}else if(t.indexOf("speicher")>=0){r="Storage"}else if(e.indexOf("usbhub")>=0){r="Hub"}else if(e.indexOf("storage")>=0){r="Storage"}else if(e.indexOf("usbcontroller")>=0){r="Controller"}else if(e.indexOf("keyboard")>=0){r="Keyboard"}else if(e.indexOf("pointing")>=0){r="Mouse"}else if(e.indexOf("microp")>=0){r="Microphone"}else if(e.indexOf("disk")>=0){r="Storage"}return r}function parseWindowsUsb(e,t){const r=getWindowsUsbTypeCreation(i.getValue(e,"CreationClassName",":").toLowerCase(),i.getValue(e,"name",":").toLowerCase());if(r){const n={};n.bus=null;n.deviceId=i.getValue(e,"deviceid",":");n.id=t;n.name=i.getValue(e,"name",":");n.type=r;n.removable=null;n.vendor=null;n.manufacturer=i.getValue(e,"Manufacturer",":");n.maxPower=null;n.serialNumber=null;return n}else{return null}}function usb(e){return new Promise((t=>{process.nextTick((()=>{let r=[];if(o){const i="export LC_ALL=C; lsusb -v 2>/dev/null; unset LC_ALL";n(i,{maxBuffer:1024*1024*128},(function(n,i){if(!n){const e=("\n\n"+i.toString()).split("\n\nBus ");for(let t=1;t<e.length;t++){const n=parseLinuxUsb(e[t]);r.push(n)}}if(e){e(r)}t(r)}))}if(a){let i="ioreg -p IOUSB -c AppleUSBRootHubDevice -w0 -l";n(i,{maxBuffer:1024*1024*128},(function(n,i){if(!n){const n=i.toString().split(" +-o ");for(let e=1;e<n.length;e++){const t=parseDarwinUsb(n[e]);if(t){r.push(t)}}if(e){e(r)}t(r)}if(e){e(r)}t(r)}))}if(c){i.powerShell('Get-CimInstance CIM_LogicalDevice | where { $_.Description -match "USB"} | select Name,CreationClassName,DeviceId,Manufacturer | fl').then(((n,i)=>{if(!i){const e=n.toString().split(/\n\s*\n/);for(let t=0;t<e.length;t++){const n=parseWindowsUsb(e[t].split("\n"),t);if(n&&r.filter((e=>e.deviceId===n.deviceId)).length===0){r.push(n)}}}if(e){e(r)}t(r)}))}if(m||u||d||p){t(null)}}))}))}t.usb=usb},5433:(e,t,r)=>{"use strict";const n=r(32081).exec;const i=r(79494);let s=process.platform;const o=s==="linux"||s==="android";const a=s==="darwin";const c=s==="win32";const u=s==="freebsd";const d=s==="openbsd";const p=s==="netbsd";const m=s==="sunos";function parseUsersLinux(e,t){let r=[];let n=[];let i={};let s=true;let o=[];let a=[];let c={};let u=true;e.forEach((function(e){if(e==="---"){u=false}else{let t=e.replace(/ +/g," ").split(" ");if(u){n.push({user:t[0],tty:t[1],date:t[2],time:t[3],ip:t&&t.length>4?t[4].replace(/\(/g,"").replace(/\)/g,""):""})}else{if(s){o=t;o.forEach((function(t){a.push(e.indexOf(t))}));s=false}else{i.user=e.substring(a[0],a[1]-1).trim();i.tty=e.substring(a[1],a[2]-1).trim();i.ip=e.substring(a[2],a[3]-1).replace(/\(/g,"").replace(/\)/g,"").trim();i.command=e.substring(a[7],1e3).trim();c=n.filter((function(e){return e.user.substring(0,8).trim()===i.user&&e.tty===i.tty}));if(c.length===1){r.push({user:c[0].user,tty:c[0].tty,date:c[0].date,time:c[0].time,ip:c[0].ip,command:i.command})}}}}}));if(r.length===0&&t===2){return n}else{return r}}function parseUsersDarwin(e){let t=[];let r=[];let n={};let i={};let s=true;e.forEach((function(e){if(e==="---"){s=false}else{let o=e.replace(/ +/g," ").split(" ");if(s){r.push({user:o[0],tty:o[1],date:""+(new Date).getFullYear()+"-"+("0"+("JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC".indexOf(o[2].toUpperCase())/3+1)).slice(-2)+"-"+("0"+o[3]).slice(-2),time:o[4]})}else{n.user=o[0];n.tty=o[1];n.ip=o[2]!=="-"?o[2]:"";n.command=o.slice(5,1e3).join(" ");i=r.filter((function(e){return e.user===n.user&&(e.tty.substring(3,1e3)===n.tty||e.tty===n.tty)}));if(i.length===1){t.push({user:i[0].user,tty:i[0].tty,date:i[0].date,time:i[0].time,ip:n.ip,command:n.command})}}}}));return t}function users(e){return new Promise((t=>{process.nextTick((()=>{let r=[];if(o){n('who --ips; echo "---"; w | tail -n +2',(function(i,s){if(!i){let i=s.toString().split("\n");r=parseUsersLinux(i,1);if(r.length===0){n('who; echo "---"; w | tail -n +2',(function(n,s){if(!n){i=s.toString().split("\n");r=parseUsersLinux(i,2)}if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}else{if(e){e(r)}t(r)}}))}if(u||d||p){n('who; echo "---"; w -ih',(function(n,i){if(!n){let e=i.toString().split("\n");r=parseUsersDarwin(e)}if(e){e(r)}t(r)}))}if(m){n('who; echo "---"; w -h',(function(n,i){if(!n){let e=i.toString().split("\n");r=parseUsersDarwin(e)}if(e){e(r)}t(r)}))}if(a){n('who; echo "---"; w -ih',(function(n,i){if(!n){let e=i.toString().split("\n");r=parseUsersDarwin(e)}if(e){e(r)}t(r)}))}if(c){try{let n='Get-CimInstance Win32_LogonSession | select LogonId,@{n="StartTime";e={$_.StartTime.ToString("yyyy-MM-dd HH:mm:ss")}} | fl'+"; echo '#-#-#-#';";n+="Get-CimInstance Win32_LoggedOnUser | select antecedent,dependent | fl "+"; echo '#-#-#-#';";n+="$process = (Get-CimInstance Win32_Process -Filter \"name = 'explorer.exe'\"); Invoke-CimMethod -InputObject $process[0] -MethodName GetOwner | select user, domain | fl; get-process -name explorer | select-object sessionid | fl; echo '#-#-#-#';";n+="query user";i.powerShell(n).then((n=>{if(n){n=n.split("#-#-#-#");let e=parseWinSessions((n[0]||"").split(/\n\s*\n/));let t=parseWinLoggedOn((n[1]||"").split(/\n\s*\n/));let i=parseWinUsersQuery((n[3]||"").split("\r\n"));let s=parseWinUsers((n[2]||"").split(/\n\s*\n/),i);for(let r in t){if({}.hasOwnProperty.call(t,r)){t[r].dateTime={}.hasOwnProperty.call(e,r)?e[r]:""}}s.forEach((e=>{let n="";for(let r in t){if({}.hasOwnProperty.call(t,r)){if(t[r].user===e.user&&(!n||n<t[r].dateTime)){n=t[r].dateTime}}}r.push({user:e.user,tty:e.tty,date:`${n.substring(0,10)}`,time:`${n.substring(11,19)}`,ip:"",command:""})}))}if(e){e(r)}t(r)}))}catch(n){if(e){e(r)}t(r)}}}))}))}function parseWinSessions(e){const t={};e.forEach((e=>{const r=e.split("\r\n");const n=i.getValue(r,"LogonId");const s=i.getValue(r,"starttime");if(n){t[n]=s}}));return t}function fuzzyMatch(e,t){e=e.toLowerCase();t=t.toLowerCase();let r=0;let n=e.length;if(t.length>n){n=t.length}for(let i=0;i<n;i++){const n=e[i]||"";const s=t[i]||"";if(n===s){r++}}return n>10?r/n>.9:n>0?r/n>.8:false}function parseWinUsers(e,t){const r=[];e.forEach((e=>{const n=e.split("\r\n");const s=i.getValue(n,"domain",":",true);const o=i.getValue(n,"user",":",true);const a=i.getValue(n,"sessionid",":",true);if(o){const e=t.filter((e=>fuzzyMatch(e.user,o)));r.push({domain:s,user:o,tty:e&&e[0]&&e[0].tty?e[0].tty:a})}}));return r}function parseWinLoggedOn(e){const t={};e.forEach((e=>{const r=e.split("\r\n");const n=i.getValue(r,"antecedent",":",true);let s=n.split("=");const o=s.length>2?s[1].split(",")[0].replace(/"/g,"").trim():"";const a=s.length>2?s[2].replace(/"/g,"").replace(/\)/g,"").trim():"";const c=i.getValue(r,"dependent",":",true);s=c.split("=");const u=s.length>1?s[1].replace(/"/g,"").replace(/\)/g,"").trim():"";if(u){t[u]={domain:a,user:o}}}));return t}function parseWinUsersQuery(e){e=e.filter((e=>e));let t=[];const r=e[0];const n=[];if(r){const i=r[0]===" "?1:0;n.push(i-1);let s=0;for(let e=i+1;e<r.length;e++){if(r[e]===" "&&(r[e-1]===" "||r[e-1]===".")){s=e}else{if(s){n.push(s);s=0}}}for(let r=1;r<e.length;r++){if(e[r].trim()){const i=e[r].substring(n[0]+1,n[1]).trim()||"";const s=e[r].substring(n[1]+1,n[2]-2).trim()||"";t.push({user:i,tty:s})}}}return t}t.users=users},79494:(e,t,r)=>{"use strict";const n=r(22037);const i=r(57147);const s=r(71017);const o=r(32081).spawn;const a=r(32081).exec;const c=r(32081).execSync;const u=r(73837);let d=process.platform;const p=d==="linux"||d==="android";const m=d==="darwin";const y=d==="win32";const g=d==="freebsd";const b=d==="openbsd";const v=d==="netbsd";let w=0;let _="";let C="";let P=null;let O=null;const E=process.env.WINDIR||"C:\\Windows";let I;let k="";let T=[];let x=false;const R="$OutputEncoding = [System.Console]::OutputEncoding = [System.Console]::InputEncoding = [System.Text.Encoding]::UTF8 ; ";const B="--###START###--";const N="--ERROR--";const j="--###ENDCMD###--";const L="--##ID##--";const D={windowsHide:true,maxBuffer:1024*2e4,encoding:"UTF-8",env:Object.assign({},process.env,{LANG:"en_US.UTF-8"})};const U={maxBuffer:1024*2e4,encoding:"UTF-8",stdio:["pipe","pipe","ignore"]};function toInt(e){let t=parseInt(e,10);if(isNaN(t)){t=0}return t}function splitByNumber(e){let t=false;let r="";let n="";for(const i of e){if(i>="0"&&i<="9"||t){t=true;r+=i}else{n+=i}}return[n,r]}const F=(new String).replace;const K=(new String).toLowerCase;const V=(new String).toString;const H=(new String).substr;const q=(new String).trim;const W=(new String).startsWith;const z=Math.min;function isFunction(e){let t={};return e&&t.toString.call(e)==="[object Function]"}function unique(e){let t=[];let r={};for(let n=0;n<e.length;n++){let i=Object.keys(e[n]);i.sort((function(e,t){return e-t}));let s="";for(let t=0;t<i.length;t++){s+=JSON.stringify(i[t]);s+=JSON.stringify(e[n][i[t]])}if(!{}.hasOwnProperty.call(r,s)){t.push(e[n]);r[s]=true}}return t}function sortByKey(e,t){return e.sort((function(e,r){let n="";let i="";t.forEach((function(t){n=n+e[t];i=i+r[t]}));return n<i?-1:n>i?1:0}))}function cores(){if(w===0){w=n.cpus().length}return w}function getValue(e,t,r,n,i){r=r||":";t=t.toLowerCase();n=n||false;i=i||false;let s="";e.some((e=>{let o=e.toLowerCase().replace(/\t/g,"");if(n){o=o.trim()}if(o.startsWith(t)&&(i?o.match(t+r)||o.match(t+" "+r):true)){const t=n?e.trim().split(r):e.split(r);if(t.length>=2){t.shift();s=t.join(r).trim();return true}}}));return s}function decodeEscapeSequence(e,t){t=t||16;return e.replace(/\\x([0-9A-Fa-f]{2})/g,(function(){return String.fromCharCode(parseInt(arguments[1],t))}))}function detectSplit(e){let t="";let r=0;e.split("").forEach((e=>{if(e>="0"&&e<="9"){if(r===1){r++}}else{if(r===0){r++}if(r===1){t+=e}}}));return t}function parseTime(e,t){t=t||"";e=e.toUpperCase();let r=0;let n=0;let i=detectSplit(e);let s=e.split(i);if(s.length>=2){if(s[2]){s[1]+=s[2]}let e=s[1]&&s[1].toLowerCase().indexOf("pm")>-1||s[1].toLowerCase().indexOf("p.m.")>-1||s[1].toLowerCase().indexOf("p. m.")>-1||s[1].toLowerCase().indexOf("n")>-1||s[1].toLowerCase().indexOf("ch")>-1||s[1].toLowerCase().indexOf("ös")>-1||t&&s[1].toLowerCase().indexOf(t)>-1;r=parseInt(s[0],10);n=parseInt(s[1],10);r=e&&r<12?r+12:r;return("0"+r).substr(-2)+":"+("0"+n).substr(-2)}}function parseDateTime(e,t){const r={date:"",time:""};t=t||{};let n=(t.dateFormat||"").toLowerCase();let i=t.pmDesignator||"";const s=e.split(" ");if(s[0]){if(s[0].indexOf("/")>=0){const t=s[0].split("/");if(t.length===3){if(t[0].length===4){r.date=t[0]+"-"+("0"+t[1]).substr(-2)+"-"+("0"+t[2]).substr(-2)}else if(t[2].length===2){if(n.indexOf("/d/")>-1||n.indexOf("/dd/")>-1){r.date="20"+t[2]+"-"+("0"+t[1]).substr(-2)+"-"+("0"+t[0]).substr(-2)}else{r.date="20"+t[2]+"-"+("0"+t[1]).substr(-2)+"-"+("0"+t[0]).substr(-2)}}else{const i=e.toLowerCase().indexOf("pm")>-1||e.toLowerCase().indexOf("p.m.")>-1||e.toLowerCase().indexOf("p. m.")>-1||e.toLowerCase().indexOf("am")>-1||e.toLowerCase().indexOf("a.m.")>-1||e.toLowerCase().indexOf("a. m.")>-1;if((i||n.indexOf("/d/")>-1||n.indexOf("/dd/")>-1)&&n.indexOf("dd/")!==0){r.date=t[2]+"-"+("0"+t[0]).substr(-2)+"-"+("0"+t[1]).substr(-2)}else{r.date=t[2]+"-"+("0"+t[1]).substr(-2)+"-"+("0"+t[0]).substr(-2)}}}}if(s[0].indexOf(".")>=0){const e=s[0].split(".");if(e.length===3){if(n.indexOf(".d.")>-1||n.indexOf(".dd.")>-1){r.date=e[2]+"-"+("0"+e[0]).substr(-2)+"-"+("0"+e[1]).substr(-2)}else{r.date=e[2]+"-"+("0"+e[1]).substr(-2)+"-"+("0"+e[0]).substr(-2)}}}if(s[0].indexOf("-")>=0){const e=s[0].split("-");if(e.length===3){r.date=e[0]+"-"+("0"+e[1]).substr(-2)+"-"+("0"+e[2]).substr(-2)}}}if(s[1]){s.shift();let e=s.join(" ");r.time=parseTime(e,i)}return r}function parseHead(e,t){let r=t>0;let n=1;let i=0;let s=0;let o=[];for(let a=0;a<e.length;a++){if(n<=t){if(/\s/.test(e[a])&&!r){s=a-1;o.push({from:i,to:s+1,cap:e.substring(i,s+1)});i=s+2;n++}r=e[a]===" "}else{if(!/\s/.test(e[a])&&r){s=a-1;if(i<s){o.push({from:i,to:s,cap:e.substring(i,s)})}i=s+1;n++}r=e[a]===" "}}s=5e3;o.push({from:i,to:s,cap:e.substring(i,s)});let a=o.length;for(let e=0;e<a;e++){if(o[e].cap.replace(/\s/g,"").length===0){if(e+1<a){o[e].to=o[e+1].to;o[e].cap=o[e].cap+o[e+1].cap;o.splice(e+1,1);a=a-1}}}return o}function findObjectByKey(e,t,r){for(let n=0;n<e.length;n++){if(e[n][t]===r){return n}}return-1}function getWmic(){if(n.type()==="Windows_NT"&&!_){_=E+"\\system32\\wbem\\wmic.exe";if(!i.existsSync(_)){try{const e=c("WHERE WMIC",D).toString().split("\r\n");if(e&&e.length){_=e[0]}else{_="wmic"}}catch(e){_="wmic"}}}return _}function wmic(e){return new Promise((t=>{process.nextTick((()=>{try{powerShell(getWmic()+" "+e).then((e=>{t(e,"")}))}catch(e){t("",e)}}))}))}function getVboxmanage(){return y?`"${process.env.VBOX_INSTALL_PATH||process.env.VBOX_MSI_INSTALL_PATH}\\VBoxManage.exe"`:"vboxmanage"}function powerShellProceedResults(e){let t="";let r;let n="";if(e.indexOf(B)>=0){r=e.split(B);const n=r[1].split(L);t=n[0];if(n.length>1){e=n.slice(1).join(L)}}if(e.indexOf(j)>=0){r=e.split(j);n=r[0]}let i=-1;for(let e=0;e<T.length;e++){if(T[e].id===t){i=e;T[e].callback(n)}}if(i>=0){T.splice(i,1)}}function powerShellStart(){if(!I){I=o("powershell.exe",["-NoProfile","-NoLogo","-InputFormat","Text","-NoExit","-Command","-"],{stdio:"pipe",windowsHide:true,maxBuffer:1024*2e4,encoding:"UTF-8",env:Object.assign({},process.env,{LANG:"en_US.UTF-8"})});if(I&&I.pid){x=true;I.stdout.on("data",(function(e){k=k+e.toString("utf8");if(e.indexOf(j)>=0){powerShellProceedResults(k);k=""}}));I.stderr.on("data",(function(){powerShellProceedResults(k+N)}));I.on("error",(function(){powerShellProceedResults(k+N)}));I.on("close",(function(){if(I){I.kill()}}))}}}function powerShellRelease(){try{if(I){I.stdin.write("exit"+n.EOL);I.stdin.end();x=false}}catch(e){if(I){I.kill()}}I=null}function powerShell(e){if(x){const t=Math.random().toString(36).substring(2,12);return new Promise((r=>{process.nextTick((()=>{function callback(e){r(e)}T.push({id:t,cmd:e,callback:callback,start:new Date});try{if(I&&I.pid){I.stdin.write(R+"echo "+B+t+L+"; "+n.EOL+e+n.EOL+"echo "+j+n.EOL)}}catch(e){r("")}}))}))}else{let t="";return new Promise((r=>{process.nextTick((()=>{try{const i=o("powershell.exe",["-NoProfile","-NoLogo","-InputFormat","Text","-NoExit","-ExecutionPolicy","Unrestricted","-Command","-"],{stdio:"pipe",windowsHide:true,maxBuffer:1024*2e4,encoding:"UTF-8",env:Object.assign({},process.env,{LANG:"en_US.UTF-8"})});if(i&&!i.pid){i.on("error",(function(){r(t)}))}if(i&&i.pid){i.stdout.on("data",(function(e){t=t+e.toString("utf8")}));i.stderr.on("data",(function(){i.kill();r(t)}));i.on("close",(function(){i.kill();r(t)}));i.on("error",(function(){i.kill();r(t)}));try{i.stdin.write(R+e+n.EOL);i.stdin.write("exit"+n.EOL);i.stdin.end()}catch(e){i.kill();r(t)}}else{r(t)}}catch(e){r(t)}}))}))}}function execSafe(e,t,r){let n="";r=r||{};return new Promise((i=>{process.nextTick((()=>{try{const s=o(e,t,r);if(s&&!s.pid){s.on("error",(function(){i(n)}))}if(s&&s.pid){s.stdout.on("data",(function(e){n+=e.toString()}));s.on("close",(function(){s.kill();i(n)}));s.on("error",(function(){s.kill();i(n)}))}else{i(n)}}catch(e){i(n)}}))}))}function getCodepage(){if(y){if(!C){try{const e=c("chcp",D);const t=e.toString().split("\r\n");const r=t[0].split(":");C=r.length>1?r[1].replace(".","").trim():""}catch(e){C="437"}}return C}if(p||m||g||b||v){if(!C){try{const e=c("echo $LANG",u.execOptsLinux);const t=e.toString().split("\r\n");const r=t[0].split(".");C=r.length>1?r[1].trim():"";if(!C){C="UTF-8"}}catch(e){C="UTF-8"}}return C}}function smartMonToolsInstalled(){if(P!==null){return P}P=false;if(y){try{const e=c("WHERE smartctl 2>nul",D).toString().split("\r\n");if(e&&e.length){P=e[0].indexOf(":\\")>=0}else{P=false}}catch(e){P=false}}if(p||m||g||b||v){try{const e=c("which smartctl 2>/dev/null",U).toString().split("\r\n");P=e.length>0}catch(e){u.noop()}}return P}function isRaspberry(){const e=["BCM2708","BCM2709","BCM2710","BCM2711","BCM2712","BCM2835","BCM2836","BCM2837","BCM2837B0"];let t=[];if(O!==null){t=O}else{try{t=i.readFileSync("/proc/cpuinfo",{encoding:"utf8"}).toString().split("\n");O=t}catch(e){return false}}const r=getValue(t,"hardware");return r&&e.indexOf(r)>-1}function isRaspbian(){let e=[];try{e=i.readFileSync("/etc/os-release",{encoding:"utf8"}).toString().split("\n")}catch(e){return false}const t=getValue(e,"id","=");return t&&t.indexOf("raspbian")>-1}function execWin(e,t,r){if(!r){r=t;t=D}let n="chcp 65001 > nul && cmd /C "+e+" && chcp "+C+" > nul";a(n,t,(function(e,t){r(e,t)}))}function darwinXcodeExists(){const e=i.existsSync("/Library/Developer/CommandLineTools/usr/bin/");const t=i.existsSync("/Applications/Xcode.app/Contents/Developer/Tools");const r=i.existsSync("/Library/Developer/Xcode/");return e||r||t}function nanoSeconds(){const e=process.hrtime();if(!Array.isArray(e)||e.length!==2){return 0}return+e[0]*1e9+ +e[1]}function countUniqueLines(e,t){t=t||"";const r=[];e.forEach((e=>{if(e.startsWith(t)){if(r.indexOf(e)===-1){r.push(e)}}}));return r.length}function countLines(e,t){t=t||"";const r=[];e.forEach((e=>{if(e.startsWith(t)){r.push(e)}}));return r.length}function sanitizeShellString(e,t){if(typeof t==="undefined"){t=false}const r=e||"";let n="";const i=z(r.length,2e3);for(let e=0;e<=i;e++){if(!(r[e]===undefined||r[e]===">"||r[e]==="<"||r[e]==="*"||r[e]==="?"||r[e]==="["||r[e]==="]"||r[e]==="|"||r[e]==="˚"||r[e]==="$"||r[e]===";"||r[e]==="&"||r[e]==="]"||r[e]==="#"||r[e]==="\\"||r[e]==="\t"||r[e]==="\n"||r[e]==="\r"||r[e]==="'"||r[e]==="`"||r[e]==='"'||r[e].length>1||t&&r[e]==="("||t&&r[e]===")"||t&&r[e]==="@"||t&&r[e]===" "||t&&r[e]=="{"||t&&r[e]==";"||t&&r[e]=="}")){n=n+r[e]}}return n}function isPrototypePolluted(){const e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let t=true;let r="";r.__proto__.replace=F;r.__proto__.toLowerCase=K;r.__proto__.toString=V;r.__proto__.substr=H;t=t||e.length!==62;const n=Date.now();if(typeof n==="number"&&n>16e11){const i=n%100+15;for(let n=0;n<i;n++){const n=Math.random()*61.99999999+1;const i=parseInt(Math.floor(n).toString(),10);const s=parseInt(n.toString().split(".")[0],10);const o=Math.random()*61.99999999+1;const a=parseInt(Math.floor(o).toString(),10);const c=parseInt(o.toString().split(".")[0],10);t=t&&n!==o;t=t&&i===s&&a===c;r+=e[i-1]}t=t&&r.length===i;let s=Math.random()*i*.9999999999;let o=r.substr(0,s)+" "+r.substr(s,2e3);o.__proto__.replace=F;let a=o.replace(/ /g,"");t=t&&r===a;s=Math.random()*i*.9999999999;o=r.substr(0,s)+"{"+r.substr(s,2e3);a=o.replace(/{/g,"");t=t&&r===a;s=Math.random()*i*.9999999999;o=r.substr(0,s)+"*"+r.substr(s,2e3);a=o.replace(/\*/g,"");t=t&&r===a;s=Math.random()*i*.9999999999;o=r.substr(0,s)+"$"+r.substr(s,2e3);a=o.replace(/\$/g,"");t=t&&r===a;const c=r.toLowerCase();t=t&&c.length===i&&c[i-1]&&!c[i];for(let e=0;e<i;e++){const n=r[e];n.__proto__.toLowerCase=K;const i=c?c[e]:"";const s=n.toLowerCase();t=t&&s[0]===i&&s[0]&&!s[1]}}return!t}function hex2bin(e){return("00000000"+parseInt(e,16).toString(2)).substr(-8)}function getFilesInPath(e){const t=i.lstatSync;const r=i.readdirSync;const n=s.join;function isDirectory(e){return t(e).isDirectory()}function isFile(e){return t(e).isFile()}function getDirectories(e){return r(e).map((function(t){return n(e,t)})).filter(isDirectory)}function getFiles(e){return r(e).map((function(t){return n(e,t)})).filter(isFile)}function getFilesRecursively(e){try{let t=getDirectories(e);let r=t.map((function(e){return getFilesRecursively(e)})).reduce((function(e,t){return e.concat(t)}),[]);return r.concat(getFiles(e))}catch(e){return[]}}if(i.existsSync(e)){return getFilesRecursively(e)}else{return[]}}function decodePiCpuinfo(e){if(O===null){O=e}const t={"0002":{type:"B",revision:"1.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0003":{type:"B",revision:"1.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0004":{type:"B",revision:"2.0",memory:256,manufacturer:"Sony UK",processor:"BCM2835"},"0005":{type:"B",revision:"2.0",memory:256,manufacturer:"Qisda",processor:"BCM2835"},"0006":{type:"B",revision:"2.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0007":{type:"A",revision:"2.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0008":{type:"A",revision:"2.0",memory:256,manufacturer:"Sony UK",processor:"BCM2835"},"0009":{type:"A",revision:"2.0",memory:256,manufacturer:"Qisda",processor:"BCM2835"},"000d":{type:"B",revision:"2.0",memory:512,manufacturer:"Egoman",processor:"BCM2835"},"000e":{type:"B",revision:"2.0",memory:512,manufacturer:"Sony UK",processor:"BCM2835"},"000f":{type:"B",revision:"2.0",memory:512,manufacturer:"Egoman",processor:"BCM2835"},"0010":{type:"B+",revision:"1.2",memory:512,manufacturer:"Sony UK",processor:"BCM2835"},"0011":{type:"CM1",revision:"1.0",memory:512,manufacturer:"Sony UK",processor:"BCM2835"},"0012":{type:"A+",revision:"1.1",memory:256,manufacturer:"Sony UK",processor:"BCM2835"},"0013":{type:"B+",revision:"1.2",memory:512,manufacturer:"Embest",processor:"BCM2835"},"0014":{type:"CM1",revision:"1.0",memory:512,manufacturer:"Embest",processor:"BCM2835"},"0015":{type:"A+",revision:"1.1",memory:256,manufacturer:"512MB\tEmbest",processor:"BCM2835"}};const r=["BCM2835","BCM2836","BCM2837","BCM2711","BCM2712"];const n=["Sony UK","Egoman","Embest","Sony Japan","Embest","Stadium"];const i={"00":"A","01":"B","02":"A+","03":"B+","04":"2B","05":"Alpha (early prototype)","06":"CM1","08":"3B","09":"Zero","0a":"CM3","0c":"Zero W","0d":"3B+","0e":"3A+","0f":"Internal use only",10:"CM3+",11:"4B",12:"Zero 2 W",13:"400",14:"CM4",15:"CM4S",17:"5"};const s=getValue(e,"revision",":",true);const o=getValue(e,"model:",":",true);const a=getValue(e,"serial",":",true);let c={};if({}.hasOwnProperty.call(t,s)){c={model:o,serial:a,revisionCode:s,memory:t[s].memory,manufacturer:t[s].manufacturer,processor:t[s].processor,type:t[s].type,revision:t[s].revision}}else{const t=("00000000"+getValue(e,"revision",":",true).toLowerCase()).substr(-8);const u=parseInt(hex2bin(t.substr(2,1)).substr(5,3),2)||0;const d=n[parseInt(t.substr(3,1),10)];const p=r[parseInt(t.substr(4,1),10)];const m=t.substr(5,2);c={model:o,serial:a,revisionCode:s,memory:256*Math.pow(2,u),manufacturer:d,processor:p,type:{}.hasOwnProperty.call(i,m)?i[m]:"",revision:"1."+t.substr(7,1)}}return c}function getRpiGpu(){let e=null;if(O!==null){e=O}else{try{e=i.readFileSync("/proc/cpuinfo",{encoding:"utf8"}).toString().split("\n");O=e}catch(e){return false}}const t=decodePiCpuinfo(e);if(t.type==="4B"||t.type==="CM4"||t.type==="CM4S"||t.type==="400"){return"VideoCore VI"}if(t.type==="5"){return"VideoCore VII"}return"VideoCore IV"}function promiseAll(e){const t=e.map((function(e){return new Promise((function(t){let r=new Array(2);e.then((function(e){r[0]=e})).catch((function(e){r[1]=e})).then((function(){t(r)}))}))}));const r=[];const n=[];return Promise.all(t).then((function(e){e.forEach((function(e){if(e[1]){r.push(e[1]);n.push(null)}else{r.push(null);n.push(e[0])}}));return{errors:r,results:n}}))}function promisify(e){return function(){const t=Array.prototype.slice.call(arguments);return new Promise((function(r,n){t.push((function(e,t){if(e){n(e)}else{r(t)}}));e.apply(null,t)}))}}function promisifySave(e){return function(){const t=Array.prototype.slice.call(arguments);return new Promise((function(r){t.push((function(e,t){r(t)}));e.apply(null,t)}))}}function linuxVersion(){let e="";if(p){try{e=c("uname -v",u.execOptsLinux).toString()}catch(t){e=""}}return e}function plistParser(e){const t=["array","dict","key","string","integer","date","real","data","boolean","arrayEmpty"];const r="<plist version";let n=e.indexOf(r);let i=e.length;while(e[n]!==">"&&n<i){n++}let s=0;let o=false;let a=false;let c=false;let u=[{tagStart:"",tagEnd:"",tagContent:"",key:"",data:null}];let d="";let p=e[n];while(n<i){d=p;if(n+1<i){p=e[n+1]}if(d==="<"){a=false;if(p==="/"){c=true}else if(u[s].tagStart){u[s].tagContent="";if(!u[s].data){u[s].data=u[s].tagStart==="array"?[]:{}}s++;u.push({tagStart:"",tagEnd:"",tagContent:"",key:null,data:null});o=true;a=false}else if(!o){o=true}}else if(d===">"){if(u[s].tagStart==="true/"){o=false;c=true;u[s].tagStart="";u[s].tagEnd="/boolean";u[s].data=true}if(u[s].tagStart==="false/"){o=false;c=true;u[s].tagStart="";u[s].tagEnd="/boolean";u[s].data=false}if(u[s].tagStart==="array/"){o=false;c=true;u[s].tagStart="";u[s].tagEnd="/arrayEmpty";u[s].data=[]}if(a){a=false}if(o){o=false;a=true;if(u[s].tagStart==="array"){u[s].data=[]}if(u[s].tagStart==="dict"){u[s].data={}}}if(c){c=false;if(u[s].tagEnd&&t.indexOf(u[s].tagEnd.substr(1))>=0){if(u[s].tagEnd==="/dict"||u[s].tagEnd==="/array"){if(s>1&&u[s-2].tagStart==="array"){u[s-2].data.push(u[s-1].data)}if(s>1&&u[s-2].tagStart==="dict"){u[s-2].data[u[s-1].key]=u[s-1].data}s--;u.pop();u[s].tagContent="";u[s].tagStart="";u[s].tagEnd=""}else{if(u[s].tagEnd==="/key"&&u[s].tagContent){u[s].key=u[s].tagContent}else{if(u[s].tagEnd==="/real"&&u[s].tagContent){u[s].data=parseFloat(u[s].tagContent)||0}if(u[s].tagEnd==="/integer"&&u[s].tagContent){u[s].data=parseInt(u[s].tagContent)||0}if(u[s].tagEnd==="/string"&&u[s].tagContent){u[s].data=u[s].tagContent||""}if(u[s].tagEnd==="/boolean"){u[s].data=u[s].tagContent||false}if(u[s].tagEnd==="/arrayEmpty"){u[s].data=u[s].tagContent||[]}if(s>0&&u[s-1].tagStart==="array"){u[s-1].data.push(u[s].data)}if(s>0&&u[s-1].tagStart==="dict"){u[s-1].data[u[s].key]=u[s].data}}u[s].tagContent="";u[s].tagStart="";u[s].tagEnd=""}}u[s].tagEnd="";o=false;a=false}}else{if(o){u[s].tagStart+=d}if(c){u[s].tagEnd+=d}if(a){u[s].tagContent+=d}}n++}return u[0].data}function strIsNumeric(e){return typeof e==="string"&&!isNaN(e)&&!isNaN(parseFloat(e))}function plistReader(e){const t=e.split("\n");for(let e=0;e<t.length;e++){if(t[e].indexOf(" = ")>=0){const r=t[e].split(" = ");r[0]=r[0].trim();if(!r[0].startsWith('"')){r[0]='"'+r[0]+'"'}r[1]=r[1].trim();if(r[1].indexOf('"')===-1&&r[1].endsWith(";")){const e=r[1].substring(0,r[1].length-1);if(!strIsNumeric(e)){r[1]=`"${e}";`}}if(r[1].indexOf('"')>=0&&r[1].endsWith(";")){const e=r[1].substring(0,r[1].length-1).replace(/"/g,"");if(strIsNumeric(e)){r[1]=`${e};`}}t[e]=r.join(" : ")}t[e]=t[e].replace(/\(/g,"[").replace(/\)/g,"]").replace(/;/g,",").trim();if(t[e].startsWith("}")&&t[e-1]&&t[e-1].endsWith(",")){t[e-1]=t[e-1].substring(0,t[e-1].length-1)}}e=t.join("");let r={};try{r=JSON.parse(e)}catch(e){noop()}return r}function semverCompare(e,t){let r=0;const n=e.split(".");const i=t.split(".");if(n[0]<i[0]){r=1}else if(n[0]>i[0]){r=-1}else if(n[0]===i[0]&&n.length>=2&&i.length>=2){if(n[1]<i[1]){r=1}else if(n[1]>i[1]){r=-1}else if(n[1]===i[1]){if(n.length>=3&&i.length>=3){if(n[2]<i[2]){r=1}else if(n[2]>i[2]){r=-1}}else if(i.length>=3){r=1}}}return r}function noop(){}t.toInt=toInt;t.splitByNumber=splitByNumber;t.execOptsWin=D;t.execOptsLinux=U;t.getCodepage=getCodepage;t.execWin=execWin;t.isFunction=isFunction;t.unique=unique;t.sortByKey=sortByKey;t.cores=cores;t.getValue=getValue;t.decodeEscapeSequence=decodeEscapeSequence;t.parseDateTime=parseDateTime;t.parseHead=parseHead;t.findObjectByKey=findObjectByKey;t.getWmic=getWmic;t.wmic=wmic;t.darwinXcodeExists=darwinXcodeExists;t.getVboxmanage=getVboxmanage;t.powerShell=powerShell;t.powerShellStart=powerShellStart;t.powerShellRelease=powerShellRelease;t.execSafe=execSafe;t.nanoSeconds=nanoSeconds;t.countUniqueLines=countUniqueLines;t.countLines=countLines;t.noop=noop;t.isRaspberry=isRaspberry;t.isRaspbian=isRaspbian;t.sanitizeShellString=sanitizeShellString;t.isPrototypePolluted=isPrototypePolluted;t.decodePiCpuinfo=decodePiCpuinfo;t.getRpiGpu=getRpiGpu;t.promiseAll=promiseAll;t.promisify=promisify;t.promisifySave=promisifySave;t.smartMonToolsInstalled=smartMonToolsInstalled;t.linuxVersion=linuxVersion;t.plistParser=plistParser;t.plistReader=plistReader;t.stringReplace=F;t.stringToLower=K;t.stringToString=V;t.stringSubstr=H;t.stringTrim=q;t.stringStartWith=W;t.mathMin=z;t.WINDIR=E;t.getFilesInPath=getFilesInPath;t.semverCompare=semverCompare},84311:(e,t,r)=>{"use strict";const n=r(22037);const i=r(32081).exec;const s=r(79494);function vboxInfo(e){let t=[];return new Promise((r=>{process.nextTick((()=>{try{i(s.getVboxmanage()+" list vms --long",(function(i,o){let a=(n.EOL+o.toString()).split(n.EOL+"Name:");a.shift();a.forEach((e=>{const r=("Name:"+e).split(n.EOL);const i=s.getValue(r,"State");const o=i.startsWith("running");const a=o?i.replace("running (since ","").replace(")","").trim():"";let c=0;try{if(o){const e=new Date(a);const t=e.getTimezoneOffset();c=Math.round((Date.now()-Date.parse(e))/1e3)+t*60}}catch(e){s.noop()}const u=!o?i.replace("powered off (since","").replace(")","").trim():"";let d=0;try{if(!o){const e=new Date(u);const t=e.getTimezoneOffset();d=Math.round((Date.now()-Date.parse(e))/1e3)+t*60}}catch(e){s.noop()}t.push({id:s.getValue(r,"UUID"),name:s.getValue(r,"Name"),running:o,started:a,runningSince:c,stopped:u,stoppedSince:d,guestOS:s.getValue(r,"Guest OS"),hardwareUUID:s.getValue(r,"Hardware UUID"),memory:parseInt(s.getValue(r,"Memory size","     "),10),vram:parseInt(s.getValue(r,"VRAM size"),10),cpus:parseInt(s.getValue(r,"Number of CPUs"),10),cpuExepCap:s.getValue(r,"CPU exec cap"),cpuProfile:s.getValue(r,"CPUProfile"),chipset:s.getValue(r,"Chipset"),firmware:s.getValue(r,"Firmware"),pageFusion:s.getValue(r,"Page Fusion")==="enabled",configFile:s.getValue(r,"Config file"),snapshotFolder:s.getValue(r,"Snapshot folder"),logFolder:s.getValue(r,"Log folder"),hpet:s.getValue(r,"HPET")==="enabled",pae:s.getValue(r,"PAE")==="enabled",longMode:s.getValue(r,"Long Mode")==="enabled",tripleFaultReset:s.getValue(r,"Triple Fault Reset")==="enabled",apic:s.getValue(r,"APIC")==="enabled",x2Apic:s.getValue(r,"X2APIC")==="enabled",acpi:s.getValue(r,"ACPI")==="enabled",ioApic:s.getValue(r,"IOAPIC")==="enabled",biosApicMode:s.getValue(r,"BIOS APIC mode"),bootMenuMode:s.getValue(r,"Boot menu mode"),bootDevice1:s.getValue(r,"Boot Device 1"),bootDevice2:s.getValue(r,"Boot Device 2"),bootDevice3:s.getValue(r,"Boot Device 3"),bootDevice4:s.getValue(r,"Boot Device 4"),timeOffset:s.getValue(r,"Time offset"),rtc:s.getValue(r,"RTC")})}));if(e){e(t)}r(t)}))}catch(n){if(e){e(t)}r(t)}}))}))}t.vboxInfo=vboxInfo},49956:(e,t,r)=>{"use strict";const n=r(22037);const i=r(32081).exec;const s=r(32081).execSync;const o=r(79494);let a=process.platform;const c=a==="linux"||a==="android";const u=a==="darwin";const d=a==="win32";function wifiDBFromQuality(e){const t=parseFloat(e);if(t<0){return 0}if(t>=100){return-50}return t/2-100}function wifiQualityFromDB(e){const t=2*(parseFloat(e)+100);return t<=100?t:100}const p={1:2412,2:2417,3:2422,4:2427,5:2432,6:2437,7:2442,8:2447,9:2452,10:2457,11:2462,12:2467,13:2472,14:2484,32:5160,34:5170,36:5180,38:5190,40:5200,42:5210,44:5220,46:5230,48:5240,50:5250,52:5260,54:5270,56:5280,58:5290,60:5300,62:5310,64:5320,68:5340,96:5480,100:5500,102:5510,104:5520,106:5530,108:5540,110:5550,112:5560,114:5570,116:5580,118:5590,120:5600,122:5610,124:5620,126:5630,128:5640,132:5660,134:5670,136:5680,138:5690,140:5700,142:5710,144:5720,149:5745,151:5755,153:5765,155:5775,157:5785,159:5795,161:5805,165:5825,169:5845,173:5865,183:4915,184:4920,185:4925,187:4935,188:4940,189:4945,192:4960,196:4980};function wifiFrequencyFromChannel(e){return{}.hasOwnProperty.call(p,e)?p[e]:null}function wifiChannelFromFrequencs(e){let t=0;for(let r in p){if({}.hasOwnProperty.call(p,r)){if(p[r]===e){t=o.toInt(r)}}}return t}function ifaceListLinux(){const e=[];const t="iw dev 2>/dev/null";try{const r=s(t,o.execOptsLinux).toString().split("\n").map((e=>e.trim())).join("\n");const n=r.split("\nInterface ");n.shift();n.forEach((t=>{const r=t.split("\n");const n=r[0];const i=o.toInt(o.getValue(r,"ifindex"," "));const s=o.getValue(r,"addr"," ");const a=o.toInt(o.getValue(r,"channel"," "));e.push({id:i,iface:n,mac:s,channel:a})}));return e}catch(t){try{const t=s("nmcli -t -f general,wifi-properties,wired-properties,interface-flags,capabilities,nsp device show 2>/dev/null",o.execOptsLinux).toString();const r=t.split("\n\n");let n=1;r.forEach((t=>{const r=t.split("\n");const i=o.getValue(r,"GENERAL.DEVICE");const s=o.getValue(r,"GENERAL.TYPE");const a=n++;const c=o.getValue(r,"GENERAL.HWADDR");const u="";if(s.toLowerCase()==="wifi"){e.push({id:a,iface:i,mac:c,channel:u})}}));return e}catch(e){return[]}}}function nmiDeviceLinux(e){const t=`nmcli -t -f general,wifi-properties,capabilities,ip4,ip6 device show ${e} 2>/dev/null`;try{const r=s(t,o.execOptsLinux).toString().split("\n");const n=o.getValue(r,"GENERAL.CONNECTION");return{iface:e,type:o.getValue(r,"GENERAL.TYPE"),vendor:o.getValue(r,"GENERAL.VENDOR"),product:o.getValue(r,"GENERAL.PRODUCT"),mac:o.getValue(r,"GENERAL.HWADDR").toLowerCase(),ssid:n!=="--"?n:null}}catch(e){return{}}}function nmiConnectionLinux(e){const t=`nmcli -t --show-secrets connection show ${e} 2>/dev/null`;try{const r=s(t,o.execOptsLinux).toString().split("\n");const n=o.getValue(r,"802-11-wireless.seen-bssids").toLowerCase();return{ssid:e!=="--"?e:null,uuid:o.getValue(r,"connection.uuid"),type:o.getValue(r,"connection.type"),autoconnect:o.getValue(r,"connection.autoconnect")==="yes",security:o.getValue(r,"802-11-wireless-security.key-mgmt"),bssid:n!=="--"?n:null}}catch(e){return{}}}function wpaConnectionLinux(e){if(!e){return{}}const t=`wpa_cli -i ${e} status 2>&1`;try{const e=s(t,o.execOptsLinux).toString().split("\n");const r=o.toInt(o.getValue(e,"freq","="));return{ssid:o.getValue(e,"ssid","="),uuid:o.getValue(e,"uuid","="),security:o.getValue(e,"key_mgmt","="),freq:r,channel:wifiChannelFromFrequencs(r),bssid:o.getValue(e,"bssid","=").toLowerCase()}}catch(e){return{}}}function getWifiNetworkListNmi(){const e=[];const t="nmcli -t -m multiline --fields active,ssid,bssid,mode,chan,freq,signal,security,wpa-flags,rsn-flags device wifi list 2>/dev/null";try{const r=s(t,o.execOptsLinux);const i=r.toString().split("ACTIVE:");i.shift();i.forEach((t=>{t="ACTIVE:"+t;const r=t.split(n.EOL);const i=o.getValue(r,"CHAN");const s=o.getValue(r,"FREQ").toLowerCase().replace("mhz","").trim();const a=o.getValue(r,"SECURITY").replace("(","").replace(")","");const c=o.getValue(r,"WPA-FLAGS").replace("(","").replace(")","");const u=o.getValue(r,"RSN-FLAGS").replace("(","").replace(")","");const d=o.getValue(r,"SIGNAL");e.push({ssid:o.getValue(r,"SSID"),bssid:o.getValue(r,"BSSID").toLowerCase(),mode:o.getValue(r,"MODE"),channel:i?parseInt(i,10):null,frequency:s?parseInt(s,10):null,signalLevel:wifiDBFromQuality(d),quality:d?parseInt(d,10):null,security:a&&a!=="none"?a.split(" "):[],wpaFlags:c&&c!=="none"?c.split(" "):[],rsnFlags:u&&u!=="none"?u.split(" "):[]})}));return e}catch(e){return[]}}function getWifiNetworkListIw(e){const t=[];try{let r=s(`export LC_ALL=C; iwlist ${e} scan 2>&1; unset LC_ALL`,o.execOptsLinux).toString().split("        Cell ");if(r[0].indexOf("resource busy")>=0){return-1}if(r.length>1){r.shift();r.forEach((e=>{const r=e.split("\n");const n=o.getValue(r,"channel",":",true);const i=r&&r.length&&r[0].indexOf("Address:")>=0?r[0].split("Address:")[1].trim().toLowerCase():"";const s=o.getValue(r,"mode",":",true);const a=o.getValue(r,"frequency",":",true);const c=o.getValue(r,"Quality","=",true);const u=c.toLowerCase().split("signal level=");const d=u.length>1?o.toInt(u[1]):0;const p=d?wifiQualityFromDB(d):0;const m=o.getValue(r,"essid",":",true);const y=e.indexOf(" WPA ")>=0;const g=e.indexOf("WPA2 ")>=0;const b=[];if(y){b.push("WPA")}if(g){b.push("WPA2")}const v=[];let w="";r.forEach((function(e){const t=e.trim().toLowerCase();if(t.indexOf("group cipher")>=0){if(w){v.push(w)}const e=t.split(":");if(e.length>1){w=e[1].trim().toUpperCase()}}if(t.indexOf("pairwise cipher")>=0){const e=t.split(":");if(e.length>1){if(e[1].indexOf("tkip")){w=w?"TKIP/"+w:"TKIP"}else if(e[1].indexOf("ccmp")){w=w?"CCMP/"+w:"CCMP"}else if(e[1].indexOf("proprietary")){w=w?"PROP/"+w:"PROP"}}}if(t.indexOf("authentication suites")>=0){const e=t.split(":");if(e.length>1){if(e[1].indexOf("802.1x")){w=w?"802.1x/"+w:"802.1x"}else if(e[1].indexOf("psk")){w=w?"PSK/"+w:"PSK"}}}}));if(w){v.push(w)}t.push({ssid:m,bssid:i,mode:s,channel:n?o.toInt(n):null,frequency:a?o.toInt(a.replace(".","")):null,signalLevel:d,quality:p,security:b,wpaFlags:v,rsnFlags:[]})}))}return t}catch(e){return-1}}function parseWifiDarwin(e){const t=[];if(e){e.forEach((function(e){const r=e.RSSI;let n=[];let i=[];let s=e.SSID_STR||"";if(e.WPA_IE){n.push("WPA");if(e.WPA_IE.IE_KEY_WPA_UCIPHERS){e.WPA_IE.IE_KEY_WPA_UCIPHERS.forEach((function(e){if(e===0&&i.indexOf("unknown/TKIP")===-1){i.push("unknown/TKIP")}if(e===2&&i.indexOf("PSK/TKIP")===-1){i.push("PSK/TKIP")}if(e===4&&i.indexOf("PSK/AES")===-1){i.push("PSK/AES")}}))}}if(e.RSN_IE){n.push("WPA2");if(e.RSN_IE.IE_KEY_RSN_UCIPHERS){e.RSN_IE.IE_KEY_RSN_UCIPHERS.forEach((function(e){if(e===0&&i.indexOf("unknown/TKIP")===-1){i.push("unknown/TKIP")}if(e===2&&i.indexOf("TKIP/TKIP")===-1){i.push("TKIP/TKIP")}if(e===4&&i.indexOf("PSK/AES")===-1){i.push("PSK/AES")}}))}}if(e.SSID&&s===""){try{s=Buffer.from(e.SSID,"base64").toString("utf8")}catch(e){o.noop()}}t.push({ssid:s,bssid:e.BSSID||"",mode:"",channel:e.CHANNEL,frequency:wifiFrequencyFromChannel(e.CHANNEL),signalLevel:r?parseInt(r,10):null,quality:wifiQualityFromDB(r),security:n,wpaFlags:i,rsnFlags:[]})}))}return t}function wifiNetworks(e){return new Promise((t=>{process.nextTick((()=>{let r=[];if(c){r=getWifiNetworkListNmi();if(r.length===0){try{const n=s("export LC_ALL=C; iwconfig 2>/dev/null; unset LC_ALL",o.execOptsLinux).toString().split("\n\n");let i="";n.forEach((e=>{if(e.indexOf("no wireless")===-1&&e.trim()!==""){i=e.split(" ")[0]}}));if(i){let n="";const s=o.isPrototypePolluted()?"---":o.sanitizeShellString(i,true);const a=o.mathMin(s.length,2e3);for(let e=0;e<=a;e++){if(s[e]!==undefined){n=n+s[e]}}const c=getWifiNetworkListIw(n);if(c===-1){setTimeout((function(n){const i=getWifiNetworkListIw(n);if(i!=-1){r=i}if(e){e(r)}t(r)}),4e3)}else{r=c;if(e){e(r)}t(r)}}else{if(e){e(r)}t(r)}}catch(n){if(e){e(r)}t(r)}}else{if(e){e(r)}t(r)}}else if(u){let n="/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -s -x";i(n,{maxBuffer:1024*4e4},(function(n,i){const s=i.toString();r=parseWifiDarwin(o.plistParser(s));if(e){e(r)}t(r)}))}else if(d){let i="netsh wlan show networks mode=Bssid";o.powerShell(i).then((i=>{const s=i.toString("utf8").split(n.EOL+n.EOL+"SSID ");s.shift();s.forEach((e=>{const t=e.split(n.EOL);if(t&&t.length>=8&&t[0].indexOf(":")>=0){const i=e.split(" BSSID");i.shift();i.forEach((e=>{const i=e.split(n.EOL);const s=i[0].split(":");s.shift();const o=s.join(":").trim().toLowerCase();const a=i[3].split(":").pop().trim();const c=i[1].split(":").pop().trim();r.push({ssid:t[0].split(":").pop().trim(),bssid:o,mode:"",channel:a?parseInt(a,10):null,frequency:wifiFrequencyFromChannel(a),signalLevel:wifiDBFromQuality(c),quality:c?parseInt(c,10):null,security:[t[2].split(":").pop().trim()],wpaFlags:[t[3].split(":").pop().trim()],rsnFlags:[]})}))}}));if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}))}))}t.wifiNetworks=wifiNetworks;function getVendor(e){e=e.toLowerCase();let t="";if(e.indexOf("intel")>=0){t="Intel"}else if(e.indexOf("realtek")>=0){t="Realtek"}else if(e.indexOf("qualcom")>=0){t="Qualcom"}else if(e.indexOf("broadcom")>=0){t="Broadcom"}else if(e.indexOf("cavium")>=0){t="Cavium"}else if(e.indexOf("cisco")>=0){t="Cisco"}else if(e.indexOf("marvel")>=0){t="Marvel"}else if(e.indexOf("zyxel")>=0){t="Zyxel"}else if(e.indexOf("melanox")>=0){t="Melanox"}else if(e.indexOf("d-link")>=0){t="D-Link"}else if(e.indexOf("tp-link")>=0){t="TP-Link"}else if(e.indexOf("asus")>=0){t="Asus"}else if(e.indexOf("linksys")>=0){t="Linksys"}return t}function formatBssid(e){e=e.replace(/</g,"").replace(/>/g,"").match(/.{1,2}/g)||[];return e.join(":")}function wifiConnections(e){return new Promise((t=>{process.nextTick((()=>{const r=[];if(c){const n=ifaceListLinux();const i=getWifiNetworkListNmi();n.forEach((e=>{let t="";const n=o.isPrototypePolluted()?"---":o.sanitizeShellString(e.iface,true);const s=o.mathMin(n.length,2e3);for(let e=0;e<=s;e++){if(n[e]!==undefined){t=t+n[e]}}const a=nmiDeviceLinux(t);const c=wpaConnectionLinux(t);const u=a.ssid||c.ssid;const d=i.filter((e=>e.ssid===u));let p="";const m=o.isPrototypePolluted()?"---":o.sanitizeShellString(u,true);const y=o.mathMin(m.length,2e3);for(let e=0;e<=y;e++){if(m[e]!==undefined){p=p+m[e]}}const g=nmiConnectionLinux(p);const b=d&&d.length&&d[0].channel?d[0].channel:c.channel?c.channel:null;const v=d&&d.length&&d[0].bssid?d[0].bssid:c.bssid?c.bssid:null;const w=d&&d.length&&d[0].signalLevel?d[0].signalLevel:null;if(u&&v){r.push({id:e.id,iface:e.iface,model:a.product,ssid:u,bssid:d&&d.length&&d[0].bssid?d[0].bssid:c.bssid?c.bssid:null,channel:b,frequency:b?wifiFrequencyFromChannel(b):null,type:g.type?g.type:"802.11",security:g.security?g.security:c.security?c.security:null,signalLevel:w,quality:wifiQualityFromDB(w),txRate:null})}}));if(e){e(r)}t(r)}else if(u){let n="system_profiler SPNetworkDataType";i(n,(function(s,a){const c=a.toString().split("\n\n    Wi-Fi:\n\n");if(c.length>1){const s=c[1].split("\n\n")[0].split("\n");const a=o.getValue(s,"BSD Device Name",":",true);const u=o.getValue(s,"hardware",":",true);n='/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I 2>/dev/null; echo "######" ; ioreg -n AppleBCMWLANSkywalkInterface -r 2>/dev/null';i(n,(function(n,i){const s=i.toString().split("######");const c=s[0].split("\n");let d=[];if(s[1].indexOf("  | {")>0&&s[1].indexOf("  | }")>s[1].indexOf("  | {")){d=s[1].split("  | {")[1].split("  | }")[0].replace(/ \| /g,"").replace(/"/g,"").split("\n")}if(c.length>10){const e=o.getValue(c,"ssid",":",true);const t=o.getValue(c,"bssid",":",true)||formatBssid(o.getValue(d,"IO80211BSSID","=",true));const n=o.getValue(c,"link auth",":",true);const i=o.getValue(c,"lastTxRate",":",true);const s=o.getValue(c,"channel",":",true).split(",")[0];const p="802.11";const m=o.toInt(o.getValue(c,"agrCtlRSSI",":",true));const y=m;if(e||t){r.push({id:"Wi-Fi",iface:a,model:u,ssid:e,bssid:t,channel:o.toInt(s),frequency:s?wifiFrequencyFromChannel(s):null,type:p,security:n,signalLevel:y,quality:wifiQualityFromDB(y),txRate:i})}}if(d.length>10){const e=o.getValue(d,"IO80211SSID","=",true);const t=formatBssid(o.getValue(d,"IO80211BSSID","=",true));const n="";const i=-1;const s=-1;const c=-1;const p=o.getValue(d,"IO80211Channel","=",true);const m="802.11";if((e||t)&&!r.length){r.push({id:"Wi-Fi",iface:a,model:u,ssid:e,bssid:t,channel:o.toInt(p),frequency:p?wifiFrequencyFromChannel(p):null,type:m,security:n,signalLevel:s,quality:c,txRate:i})}}if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}))}else if(d){let n="netsh wlan show interfaces";o.powerShell(n).then((function(n){const i=n.toString().split("\r\n");for(let e=0;e<i.length;e++){i[e]=i[e].trim()}const s=i.join("\r\n").split(":\r\n\r\n");s.shift();s.forEach((e=>{const t=e.split("\r\n");if(t.length>=5){const e=t[0].indexOf(":")>=0?t[0].split(":")[1].trim():"";const n=t[1].indexOf(":")>=0?t[1].split(":")[1].trim():"";const i=t[2].indexOf(":")>=0?t[2].split(":")[1].trim():"";const s=o.getValue(t,"SSID",":",true);const a=o.getValue(t,"BSSID",":",true);const c=o.getValue(t,"Signal",":",true);const u=wifiDBFromQuality(c);const d=o.getValue(t,"Radio type",":",true)||o.getValue(t,"Type de radio",":",true)||o.getValue(t,"Funktyp",":",true)||null;const p=o.getValue(t,"authentication",":",true)||o.getValue(t,"Authentification",":",true)||o.getValue(t,"Authentifizierung",":",true)||null;const m=o.getValue(t,"Channel",":",true)||o.getValue(t,"Canal",":",true)||o.getValue(t,"Kanal",":",true)||null;const y=o.getValue(t,"Transmit rate (mbps)",":",true)||o.getValue(t,"Transmission (mbit/s)",":",true)||o.getValue(t,"Empfangsrate (MBit/s)",":",true)||null;if(n&&i&&s&&a){r.push({id:i,iface:e,model:n,ssid:s,bssid:a,channel:o.toInt(m),frequency:m?wifiFrequencyFromChannel(m):null,type:d,security:p,signalLevel:u,quality:c?parseInt(c,10):null,txRate:o.toInt(y)||null})}}}));if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}))}))}t.wifiConnections=wifiConnections;function wifiInterfaces(e){return new Promise((t=>{process.nextTick((()=>{const r=[];if(c){const n=ifaceListLinux();n.forEach((e=>{const t=nmiDeviceLinux(e.iface);r.push({id:e.id,iface:e.iface,model:t.product?t.product:null,vendor:t.vendor?t.vendor:null,mac:e.mac})}));if(e){e(r)}t(r)}else if(u){let n="system_profiler SPNetworkDataType";i(n,(function(n,i){const s=i.toString().split("\n\n    Wi-Fi:\n\n");if(s.length>1){const e=s[1].split("\n\n")[0].split("\n");const t=o.getValue(e,"BSD Device Name",":",true);const n=o.getValue(e,"MAC Address",":",true);const i=o.getValue(e,"hardware",":",true);r.push({id:"Wi-Fi",iface:t,model:i,vendor:"",mac:n})}if(e){e(r)}t(r)}))}else if(d){let n="netsh wlan show interfaces";o.powerShell(n).then((function(n){const i=n.toString().split("\r\n");for(let e=0;e<i.length;e++){i[e]=i[e].trim()}const s=i.join("\r\n").split(":\r\n\r\n");s.shift();s.forEach((e=>{const t=e.split("\r\n");if(t.length>=5){const e=t[0].indexOf(":")>=0?t[0].split(":")[1].trim():"";const n=t[1].indexOf(":")>=0?t[1].split(":")[1].trim():"";const i=t[2].indexOf(":")>=0?t[2].split(":")[1].trim():"";const s=t[3].indexOf(":")>=0?t[3].split(":"):[];s.shift();const o=s.join(":").trim();const a=getVendor(n);if(e&&n&&i&&o){r.push({id:i,iface:e,model:n,vendor:a,mac:o})}}}));if(e){e(r)}t(r)}))}else{if(e){e(r)}t(r)}}))}))}t.wifiInterfaces=wifiInterfaces},81515:e=>{"use strict";var t=nextTickArgs;process.nextTick(upgrade,42);e.exports=thunky;function thunky(e){var r=run;return thunk;function thunk(e){r(e||noop)}function run(n){var i=[n];r=wait;e(done);function wait(e){i.push(e)}function done(e){var n=arguments;r=isError(e)?run:finished;while(i.length)finished(i.shift());function finished(e){t(apply,e,n)}}}}function isError(e){return Object.prototype.toString.call(e)==="[object Error]"}function noop(){}function apply(e,t){e.apply(null,t)}function upgrade(e){if(e===42)t=process.nextTick}function nextTickArgs(e,t,r){process.nextTick((function(){e(t,r)}))}},1160:e=>{e.exports=toArray;function toArray(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++){r[n-t]=e[n]}return r}},80516:e=>{var t;var r;var n;var i;var s;var o;var a;var c;var u;var d;var p;var m;var y;var g;var b;var v;var w;var _;var C;var P;var O;var E;var I;var k;var T;var x;var R;var B;var N;var j;var L;(function(t){var r=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(e){t(createExporter(r,createExporter(e)))}))}else if(true&&typeof e.exports==="object"){t(createExporter(r,createExporter(e.exports)))}else{t(createExporter(r))}function createExporter(e,t){if(e!==r){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(r,n){return e[r]=t?t(r,n):n}}})((function(e){var D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};t=function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");D(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)};r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};n=function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r};i=function(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s;return i>3&&s&&Object.defineProperty(t,r,s),s};s=function(e,t){return function(r,n){t(r,n,e)}};o=function(e,t,r,n,i,s){function accept(e){if(e!==void 0&&typeof e!=="function")throw new TypeError("Function expected");return e}var o=n.kind,a=o==="getter"?"get":o==="setter"?"set":"value";var c=!t&&e?n["static"]?e:e.prototype:null;var u=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{});var d,p=false;for(var m=r.length-1;m>=0;m--){var y={};for(var g in n)y[g]=g==="access"?{}:n[g];for(var g in n.access)y.access[g]=n.access[g];y.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(accept(e||null))};var b=(0,r[m])(o==="accessor"?{get:u.get,set:u.set}:u[a],y);if(o==="accessor"){if(b===void 0)continue;if(b===null||typeof b!=="object")throw new TypeError("Object expected");if(d=accept(b.get))u.get=d;if(d=accept(b.set))u.set=d;if(d=accept(b.init))i.unshift(d)}else if(d=accept(b)){if(o==="field")i.unshift(d);else u[a]=d}}if(c)Object.defineProperty(c,n.name,u);p=true};a=function(e,t,r){var n=arguments.length>2;for(var i=0;i<t.length;i++){r=n?t[i].call(e,r):t[i].call(e)}return n?r:void 0};c=function(e){return typeof e==="symbol"?e:"".concat(e)};u=function(e,t,r){if(typeof t==="symbol")t=t.description?"[".concat(t.description,"]"):"";return Object.defineProperty(e,"name",{configurable:true,value:r?"".concat(r," ",t):t})};d=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};p=function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};m=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return o.next=verb(0),o["throw"]=verb(1),o["return"]=verb(2),typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(r=0)),r)try{if(n=1,i&&(s=a[0]&2?i["return"]:a[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;if(i=0,s)a=[a[0]&2,s.value];switch(a[0]){case 0:case 1:s=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(a[0]===6&&r.label<s[1]){r.label=s[1];s=a;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(a);break}if(s[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};y=function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))N(t,e,r)};N=Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]};g=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};b=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};v=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e};w=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n};_=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++){if(s||!(n in t)){if(!s)s=Array.prototype.slice.call(t,0,n);s[n]=t[n]}}return e.concat(s||Array.prototype.slice.call(t))};C=function(e){return this instanceof C?(this.v=e,this):new C(e)};P=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator==="function"?AsyncIterator:Object).prototype),verb("next"),verb("throw"),verb("return",awaitReturn),i[Symbol.asyncIterator]=function(){return this},i;function awaitReturn(e){return function(t){return Promise.resolve(t).then(e,reject)}}function verb(e,t){if(n[e]){i[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||resume(e,t)}))};if(t)i[e]=t(i[e])}}function resume(e,t){try{step(n[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof C?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};O=function(e){var t,r;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:C(e[n](t)),done:false}:i?i(t):t}:i}};E=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof g==="function"?g(e):e[Symbol.iterator](),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(t){r[t]=e[t]&&function(r){return new Promise((function(n,i){r=e[t](r),settle(n,i,r.done,r.value)}))}}function settle(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}};I=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var U=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t};k=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))N(t,e,r);U(t,e);return t};T=function(e){return e&&e.__esModule?e:{default:e}};x=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)};R=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r};B=function(e,t){if(t===null||typeof t!=="object"&&typeof t!=="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e==="function"?t===e:e.has(t)};j=function(e,t,r){if(t!==null&&t!==void 0){if(typeof t!=="object"&&typeof t!=="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose];if(r)i=n}if(typeof n!=="function")throw new TypeError("Object not disposable.");if(i)n=function(){try{i.call(this)}catch(e){return Promise.reject(e)}};e.stack.push({value:t,dispose:n,async:r})}else if(r){e.stack.push({async:true})}return t};var F=typeof SuppressedError==="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};L=function(e){function fail(t){e.error=e.hasError?new F(t,e.error,"An error was suppressed during disposal."):t;e.hasError=true}var t,r=0;function next(){while(t=e.stack.pop()){try{if(!t.async&&r===1)return r=0,e.stack.push(t),Promise.resolve().then(next);if(t.dispose){var n=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(n).then(next,(function(e){fail(e);return next()}))}else r|=1}catch(e){fail(e)}}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return next()};e("__extends",t);e("__assign",r);e("__rest",n);e("__decorate",i);e("__param",s);e("__esDecorate",o);e("__runInitializers",a);e("__propKey",c);e("__setFunctionName",u);e("__metadata",d);e("__awaiter",p);e("__generator",m);e("__exportStar",y);e("__createBinding",N);e("__values",g);e("__read",b);e("__spread",v);e("__spreadArrays",w);e("__spreadArray",_);e("__await",C);e("__asyncGenerator",P);e("__asyncDelegator",O);e("__asyncValues",E);e("__makeTemplateObject",I);e("__importStar",k);e("__importDefault",T);e("__classPrivateFieldGet",x);e("__classPrivateFieldSet",R);e("__classPrivateFieldIn",B);e("__addDisposableResource",j);e("__disposeResources",L)}))},91127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(15247);const i=r(20834);const s=r(37534);const o=r(60531);function autoInjectable(){return function(e){const t=n.getParamInfo(e);return class extends e{constructor(...r){super(...r.concat(t.slice(r.length).map(((t,n)=>{try{if(s.isTokenDescriptor(t)){if(s.isTransformDescriptor(t)){return t.multiple?i.instance.resolve(t.transform).transform(i.instance.resolveAll(t.token),...t.transformArgs):i.instance.resolve(t.transform).transform(i.instance.resolve(t.token),...t.transformArgs)}else{return t.multiple?i.instance.resolveAll(t.token):i.instance.resolve(t.token)}}else if(s.isTransformDescriptor(t)){return i.instance.resolve(t.transform).transform(i.instance.resolve(t.token),...t.transformArgs)}return i.instance.resolve(t)}catch(t){const i=n+r.length;throw new Error(o.formatErrorCtor(e,i,t))}}))))}}}}t["default"]=autoInjectable},94794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(91127);Object.defineProperty(t,"autoInjectable",{enumerable:true,get:function(){return n.default}});var i=r(54427);Object.defineProperty(t,"inject",{enumerable:true,get:function(){return i.default}});var s=r(2955);Object.defineProperty(t,"injectable",{enumerable:true,get:function(){return s.default}});var o=r(58020);Object.defineProperty(t,"registry",{enumerable:true,get:function(){return o.default}});var a=r(73174);Object.defineProperty(t,"singleton",{enumerable:true,get:function(){return a.default}});var c=r(28117);Object.defineProperty(t,"injectAll",{enumerable:true,get:function(){return c.default}});var u=r(80334);Object.defineProperty(t,"injectAllWithTransform",{enumerable:true,get:function(){return u.default}});var d=r(13471);Object.defineProperty(t,"injectWithTransform",{enumerable:true,get:function(){return d.default}});var p=r(29895);Object.defineProperty(t,"scoped",{enumerable:true,get:function(){return p.default}})},80334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(15247);function injectAllWithTransform(e,t,...r){const i={token:e,multiple:true,transform:t,transformArgs:r};return n.defineInjectionTokenMetadata(i)}t["default"]=injectAllWithTransform},28117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(15247);function injectAll(e){const t={token:e,multiple:true};return n.defineInjectionTokenMetadata(t)}t["default"]=injectAll},13471:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(15247);function injectWithTransform(e,t,...r){return n.defineInjectionTokenMetadata(e,{transformToken:t,args:r})}t["default"]=injectWithTransform},54427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(15247);function inject(e){return n.defineInjectionTokenMetadata(e)}t["default"]=inject},2955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(15247);const i=r(20834);function injectable(){return function(e){i.typeInfo.set(e,n.getParamInfo(e))}}t["default"]=injectable},58020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(37371);const i=r(20834);function registry(e=[]){return function(t){e.forEach((e=>{var{token:t,options:r}=e,s=n.__rest(e,["token","options"]);return i.instance.register(t,s,r)}));return t}}t["default"]=registry},29895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(2955);const i=r(20834);function scoped(e,t){return function(r){n.default()(r);i.instance.register(t||r,r,{lifecycle:e})}}t["default"]=scoped},73174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(2955);const i=r(20834);function singleton(){return function(e){n.default()(e);i.instance.registerSingleton(e)}}t["default"]=singleton},20834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.instance=t.typeInfo=void 0;const n=r(37371);const i=r(73801);const s=r(96200);const o=r(37534);const a=r(18478);const c=r(26593);const u=r(35772);const d=r(60531);const p=r(10230);const m=r(85864);const y=r(1053);t.typeInfo=new Map;class InternalDependencyContainer{constructor(e){this.parent=e;this._registry=new a.default;this.interceptors=new y.default;this.disposed=false;this.disposables=new Set}register(e,t,r={lifecycle:c.default.Transient}){this.ensureNotDisposed();let n;if(!s.isProvider(t)){n={useClass:t}}else{n=t}if(i.isTokenProvider(n)){const t=[e];let r=n;while(r!=null){const e=r.useToken;if(t.includes(e)){throw new Error(`Token registration cycle detected! ${[...t,e].join(" -> ")}`)}t.push(e);const n=this._registry.get(e);if(n&&i.isTokenProvider(n.provider)){r=n.provider}else{r=null}}}if(r.lifecycle===c.default.Singleton||r.lifecycle==c.default.ContainerScoped||r.lifecycle==c.default.ResolutionScoped){if(i.isValueProvider(n)||i.isFactoryProvider(n)){throw new Error(`Cannot use lifecycle "${c.default[r.lifecycle]}" with ValueProviders or FactoryProviders`)}}this._registry.set(e,{provider:n,options:r});return this}registerType(e,t){this.ensureNotDisposed();if(i.isNormalToken(t)){return this.register(e,{useToken:t})}return this.register(e,{useClass:t})}registerInstance(e,t){this.ensureNotDisposed();return this.register(e,{useValue:t})}registerSingleton(e,t){this.ensureNotDisposed();if(i.isNormalToken(e)){if(i.isNormalToken(t)){return this.register(e,{useToken:t},{lifecycle:c.default.Singleton})}else if(t){return this.register(e,{useClass:t},{lifecycle:c.default.Singleton})}throw new Error('Cannot register a type name as a singleton without a "to" token')}let r=e;if(t&&!i.isNormalToken(t)){r=t}return this.register(e,{useClass:r},{lifecycle:c.default.Singleton})}resolve(e,t=new u.default){this.ensureNotDisposed();const r=this.getRegistration(e);if(!r&&i.isNormalToken(e)){throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}this.executePreResolutionInterceptor(e,"Single");if(r){const n=this.resolveRegistration(r,t);this.executePostResolutionInterceptor(e,n,"Single");return n}if(o.isConstructorToken(e)){const r=this.construct(e,t);this.executePostResolutionInterceptor(e,r,"Single");return r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,t){if(this.interceptors.preResolution.has(e)){const r=[];for(const n of this.interceptors.preResolution.getAll(e)){if(n.options.frequency!="Once"){r.push(n)}n.callback(e,t)}this.interceptors.preResolution.setAll(e,r)}}executePostResolutionInterceptor(e,t,r){if(this.interceptors.postResolution.has(e)){const n=[];for(const i of this.interceptors.postResolution.getAll(e)){if(i.options.frequency!="Once"){n.push(i)}i.callback(e,t,r)}this.interceptors.postResolution.setAll(e,n)}}resolveRegistration(e,t){this.ensureNotDisposed();if(e.options.lifecycle===c.default.ResolutionScoped&&t.scopedResolutions.has(e)){return t.scopedResolutions.get(e)}const r=e.options.lifecycle===c.default.Singleton;const n=e.options.lifecycle===c.default.ContainerScoped;const s=r||n;let o;if(i.isValueProvider(e.provider)){o=e.provider.useValue}else if(i.isTokenProvider(e.provider)){o=s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t)}else if(i.isClassProvider(e.provider)){o=s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t)}else if(i.isFactoryProvider(e.provider)){o=e.provider.useFactory(this)}else{o=this.construct(e.provider,t)}if(e.options.lifecycle===c.default.ResolutionScoped){t.scopedResolutions.set(e,o)}return o}resolveAll(e,t=new u.default){this.ensureNotDisposed();const r=this.getAllRegistrations(e);if(!r&&i.isNormalToken(e)){throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}this.executePreResolutionInterceptor(e,"All");if(r){const n=r.map((e=>this.resolveRegistration(e,t)));this.executePostResolutionInterceptor(e,n,"All");return n}const n=[this.construct(e,t)];this.executePostResolutionInterceptor(e,n,"All");return n}isRegistered(e,t=false){this.ensureNotDisposed();return this._registry.has(e)||t&&(this.parent||false)&&this.parent.isRegistered(e,true)}reset(){this.ensureNotDisposed();this._registry.clear();this.interceptors.preResolution.clear();this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(const[e,t]of this._registry.entries()){this._registry.setAll(e,t.filter((e=>!i.isValueProvider(e.provider))).map((e=>{e.instance=undefined;return e})))}}createChildContainer(){this.ensureNotDisposed();const e=new InternalDependencyContainer(this);for(const[t,r]of this._registry.entries()){if(r.some((({options:e})=>e.lifecycle===c.default.ContainerScoped))){e._registry.setAll(t,r.map((e=>{if(e.options.lifecycle===c.default.ContainerScoped){return{provider:e.provider,options:e.options}}return e})))}}return e}beforeResolution(e,t,r={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:t,options:r})}afterResolution(e,t,r={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:t,options:r})}dispose(){return n.__awaiter(this,void 0,void 0,(function*(){this.disposed=true;const e=[];this.disposables.forEach((t=>{const r=t.dispose();if(r){e.push(r)}}));yield Promise.all(e)}))}getRegistration(e){if(this.isRegistered(e)){return this._registry.get(e)}if(this.parent){return this.parent.getRegistration(e)}return null}getAllRegistrations(e){if(this.isRegistered(e)){return this._registry.getAll(e)}if(this.parent){return this.parent.getAllRegistrations(e)}return null}construct(e,r){if(e instanceof p.DelayedConstructor){return e.createProxy((e=>this.resolve(e,r)))}const n=(()=>{const n=t.typeInfo.get(e);if(!n||n.length===0){if(e.length===0){return new e}else{throw new Error(`TypeInfo not known for "${e.name}"`)}}const i=n.map(this.resolveParams(r,e));return new e(...i)})();if(m.isDisposable(n)){this.disposables.add(n)}return n}resolveParams(e,t){return(r,n)=>{try{if(o.isTokenDescriptor(r)){if(o.isTransformDescriptor(r)){return r.multiple?this.resolve(r.transform).transform(this.resolveAll(r.token),...r.transformArgs):this.resolve(r.transform).transform(this.resolve(r.token,e),...r.transformArgs)}else{return r.multiple?this.resolveAll(r.token):this.resolve(r.token,e)}}else if(o.isTransformDescriptor(r)){return this.resolve(r.transform,e).transform(this.resolve(r.token,e),...r.transformArgs)}return this.resolve(r,e)}catch(e){throw new Error(d.formatErrorCtor(t,n,e))}}}ensureNotDisposed(){if(this.disposed){throw new Error("This container has been disposed, you cannot interact with a disposed container")}}}t.instance=new InternalDependencyContainer;t["default"]=t.instance},60531:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.formatErrorCtor=void 0;function formatDependency(e,t){if(e===null){return`at position #${t}`}const r=e.split(",")[t].trim();return`"${r}" at position #${t}`}function composeErrorMessage(e,t,r="    "){return[e,...t.message.split("\n").map((e=>r+e))].join("\n")}function formatErrorCtor(e,t,r){const[,n=null]=e.toString().match(/constructor\(([\w, ]+)\)/)||[];const i=formatDependency(n,t);return composeErrorMessage(`Cannot inject the dependency ${i} of "${e.name}" constructor. Reason:`,r)}t.formatErrorCtor=formatErrorCtor},21283:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(87311);Object.defineProperty(t,"instanceCachingFactory",{enumerable:true,get:function(){return n.default}});var i=r(19855);Object.defineProperty(t,"instancePerContainerCachingFactory",{enumerable:true,get:function(){return i.default}});var s=r(28010);Object.defineProperty(t,"predicateAwareClassFactory",{enumerable:true,get:function(){return s.default}})},87311:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function instanceCachingFactory(e){let t;return r=>{if(t==undefined){t=e(r)}return t}}t["default"]=instanceCachingFactory},19855:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function instancePerContainerCachingFactory(e){const t=new WeakMap;return r=>{let n=t.get(r);if(n==undefined){n=e(r);t.set(r,n)}return n}}t["default"]=instancePerContainerCachingFactory},28010:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function predicateAwareClassFactory(e,t,r,n=true){let i;let s;return o=>{const a=e(o);if(!n||s!==a){if(s=a){i=o.resolve(t)}else{i=o.resolve(r)}}return i}}t["default"]=predicateAwareClassFactory},22728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(37371);if(typeof Reflect==="undefined"||!Reflect.getMetadata){throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`)}var i=r(17700);Object.defineProperty(t,"Lifecycle",{enumerable:true,get:function(){return i.Lifecycle}});n.__exportStar(r(94794),t);n.__exportStar(r(21283),t);n.__exportStar(r(73801),t);var s=r(10230);Object.defineProperty(t,"delay",{enumerable:true,get:function(){return s.delay}});var o=r(20834);Object.defineProperty(t,"container",{enumerable:true,get:function(){return o.instance}})},1053:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PostResolutionInterceptors=t.PreResolutionInterceptors=void 0;const n=r(28296);class PreResolutionInterceptors extends n.default{}t.PreResolutionInterceptors=PreResolutionInterceptors;class PostResolutionInterceptors extends n.default{}t.PostResolutionInterceptors=PostResolutionInterceptors;class Interceptors{constructor(){this.preResolution=new PreResolutionInterceptors;this.postResolution=new PostResolutionInterceptors}}t["default"]=Interceptors},10230:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.delay=t.DelayedConstructor=void 0;class DelayedConstructor{constructor(e){this.wrap=e;this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){const t={};let r=false;let n;const delayedObject=()=>{if(!r){n=e(this.wrap());r=true}return n};return new Proxy(t,this.createHandler(delayedObject))}createHandler(e){const t={};const install=r=>{t[r]=(...t)=>{t[0]=e();const n=Reflect[r];return n(...t)}};this.reflectMethods.forEach(install);return t}}t.DelayedConstructor=DelayedConstructor;function delay(e){if(typeof e==="undefined"){throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback")}return new DelayedConstructor(e)}t.delay=delay},34632:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isClassProvider=void 0;function isClassProvider(e){return!!e.useClass}t.isClassProvider=isClassProvider},53418:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isFactoryProvider=void 0;function isFactoryProvider(e){return!!e.useFactory}t.isFactoryProvider=isFactoryProvider},73801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(34632);Object.defineProperty(t,"isClassProvider",{enumerable:true,get:function(){return n.isClassProvider}});var i=r(53418);Object.defineProperty(t,"isFactoryProvider",{enumerable:true,get:function(){return i.isFactoryProvider}});var s=r(37534);Object.defineProperty(t,"isNormalToken",{enumerable:true,get:function(){return s.isNormalToken}});var o=r(40338);Object.defineProperty(t,"isTokenProvider",{enumerable:true,get:function(){return o.isTokenProvider}});var a=r(3553);Object.defineProperty(t,"isValueProvider",{enumerable:true,get:function(){return a.isValueProvider}})},37534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isConstructorToken=t.isTransformDescriptor=t.isTokenDescriptor=t.isNormalToken=void 0;const n=r(10230);function isNormalToken(e){return typeof e==="string"||typeof e==="symbol"}t.isNormalToken=isNormalToken;function isTokenDescriptor(e){return typeof e==="object"&&"token"in e&&"multiple"in e}t.isTokenDescriptor=isTokenDescriptor;function isTransformDescriptor(e){return typeof e==="object"&&"token"in e&&"transform"in e}t.isTransformDescriptor=isTransformDescriptor;function isConstructorToken(e){return typeof e==="function"||e instanceof n.DelayedConstructor}t.isConstructorToken=isConstructorToken},96200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isProvider=void 0;const n=r(34632);const i=r(3553);const s=r(40338);const o=r(53418);function isProvider(e){return n.isClassProvider(e)||i.isValueProvider(e)||s.isTokenProvider(e)||o.isFactoryProvider(e)}t.isProvider=isProvider},40338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isTokenProvider=void 0;function isTokenProvider(e){return!!e.useToken}t.isTokenProvider=isTokenProvider},3553:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isValueProvider=void 0;function isValueProvider(e){return e.useValue!=undefined}t.isValueProvider=isValueProvider},15247:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.defineInjectionTokenMetadata=t.getParamInfo=t.INJECTION_TOKEN_METADATA_KEY=void 0;t.INJECTION_TOKEN_METADATA_KEY="injectionTokens";function getParamInfo(e){const r=Reflect.getMetadata("design:paramtypes",e)||[];const n=Reflect.getOwnMetadata(t.INJECTION_TOKEN_METADATA_KEY,e)||{};Object.keys(n).forEach((e=>{r[+e]=n[e]}));return r}t.getParamInfo=getParamInfo;function defineInjectionTokenMetadata(e,r){return function(n,i,s){const o=Reflect.getOwnMetadata(t.INJECTION_TOKEN_METADATA_KEY,n)||{};o[s]=r?{token:e,transform:r.transformToken,transformArgs:r.args||[]}:e;Reflect.defineMetadata(t.INJECTION_TOKEN_METADATA_KEY,o,n)}}t.defineInjectionTokenMetadata=defineInjectionTokenMetadata},28296:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});class RegistryBase{constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){this.ensure(e);return this._registryMap.get(e)}get(e){this.ensure(e);const t=this._registryMap.get(e);return t[t.length-1]||null}set(e,t){this.ensure(e);this._registryMap.get(e).push(t)}setAll(e,t){this._registryMap.set(e,t)}has(e){this.ensure(e);return this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){if(!this._registryMap.has(e)){this._registryMap.set(e,[])}}}t["default"]=RegistryBase},18478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(28296);class Registry extends n.default{}t["default"]=Registry},35772:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});class ResolutionContext{constructor(){this.scopedResolutions=new Map}}t["default"]=ResolutionContext},85864:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isDisposable=void 0;function isDisposable(e){if(typeof e.dispose!=="function")return false;const t=e.dispose;if(t.length>0){return false}return true}t.isDisposable=isDisposable},17700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(26593);Object.defineProperty(t,"Lifecycle",{enumerable:true,get:function(){return n.default}})},26593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var r;(function(e){e[e["Transient"]=0]="Transient";e[e["Singleton"]=1]="Singleton";e[e["ResolutionScoped"]=2]="ResolutionScoped";e[e["ContainerScoped"]=3]="ContainerScoped"})(r||(r={}));t["default"]=r},37371:e=>{
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t;var r;var n;var i;var s;var o;var a;var c;var u;var d;var p;var m;var y;var g;var b;var v;var w;var _;var C;var P;var O;var E;var I;(function(t){var r=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(e){t(createExporter(r,createExporter(e)))}))}else if(true&&typeof e.exports==="object"){t(createExporter(r,createExporter(e.exports)))}else{t(createExporter(r))}function createExporter(e,t){if(e!==r){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(r,n){return e[r]=t?t(r,n):n}}})((function(e){var k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};t=function(e,t){k(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)};r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};n=function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r};i=function(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s;return i>3&&s&&Object.defineProperty(t,r,s),s};s=function(e,t){return function(r,n){t(r,n,e)}};o=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};a=function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};c=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e];i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};I=function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]};u=function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))t[r]=e[r]};d=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};p=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return s};m=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e};y=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n};g=function(e){return this instanceof g?(this.v=e,this):new g(e)};b=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(e){if(n[e])i[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||resume(e,t)}))}}function resume(e,t){try{step(n[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof g?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};v=function(e){var t,r;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:g(e[n](t)),done:n==="return"}:i?i(t):t}:i}};w=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof d==="function"?d(e):e[Symbol.iterator](),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(t){r[t]=e[t]&&function(r){return new Promise((function(n,i){r=e[t](r),settle(n,i,r.done,r.value)}))}}function settle(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}};_=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};C=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};P=function(e){return e&&e.__esModule?e:{default:e}};O=function(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e)};E=function(e,t,r){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}t.set(e,r);return r};e("__extends",t);e("__assign",r);e("__rest",n);e("__decorate",i);e("__param",s);e("__metadata",o);e("__awaiter",a);e("__generator",c);e("__exportStar",u);e("__createBinding",I);e("__values",d);e("__read",p);e("__spread",m);e("__spreadArrays",y);e("__await",g);e("__asyncGenerator",b);e("__asyncDelegator",v);e("__asyncValues",w);e("__makeTemplateObject",_);e("__importStar",C);e("__importDefault",P);e("__classPrivateFieldGet",O);e("__classPrivateFieldSet",E)}))},89162:(e,t,r)=>{"use strict";const{createSlicedTable:n}=r(42879);const i=r(81257);const s=n(2197175160);e.exports=crc32c;function crc32c(e){const t=Buffer.isBuffer(e)?e:Buffer.from(e);return(i(s,t,4294967295,0)^4294967295)>>>0}},45253:e=>{"use strict";e.exports=crc32;function crc32(e,t,r,n){let i=r;for(let r=n;r<t.length;r+=1){const n=t[r];i=e[0][(i^n)&255]^i>>>8}return i}},84273:(e,t,r)=>{"use strict";const n=r(45253);e.exports=crc32;function crc32(e,t,r,i){let s=i;let o=r;for(let r=s;r+4<t.length;r+=4){const n=t.readUInt32LE(r)^o;o=e[0][n>>>24&255]^e[1][n>>>16&255]^e[2][n>>>8&255]^e[3][n&255];s+=4}return n(e,t,o,s)}},81257:(e,t,r)=>{"use strict";const n=r(84273);e.exports=crc32;function crc32(e,t,r,i){let s=i;let o=r;for(let r=s;r+8<t.length;r+=8){const n=t.readUInt32LE(r)^o;const i=t.readUInt32LE(r+4);o=e[0][i>>>24&255]^e[1][i>>>16&255]^e[2][i>>>8&255]^e[3][i&255]^e[4][n>>>24&255]^e[5][n>>>16&255]^e[6][n>>>8&255]^e[7][n&255];s+=8}return n(e,t,o,s)}},42879:e=>{"use strict";e.exports={createTable:createTable,createSlicedTable:createSlicedTable};function createTable(e){const t=new Uint32Array(256);for(let r=0;r<t.length;r+=1){let n=r;for(let t=0;t<8;t+=1){n=n&1?n>>>1^e:n>>>1}t[r]=n}return t}function createSlicedTable(e){const t=new Array(8);const r=createTable(e);t[0]=r;for(let e=1;e<t.length;e+=1){t[e]=new Uint32Array(256);for(let r=0;r<256;r+=1){t[e][r]=t[e-1][r]>>>8^t[0][t[e-1][r]&255]}}return t}},77492:(e,t,r)=>{(function(e){"use strict";var gf=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r};var randombytes=function(){throw new Error("no PRNG")};var t=new Uint8Array(16);var n=new Uint8Array(32);n[0]=9;var i=gf(),s=gf([1]),o=gf([56129,1]),a=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(e,t,r,n){e[t]=r>>24&255;e[t+1]=r>>16&255;e[t+2]=r>>8&255;e[t+3]=r&255;e[t+4]=n>>24&255;e[t+5]=n>>16&255;e[t+6]=n>>8&255;e[t+7]=n&255}function vn(e,t,r,n,i){var s,o=0;for(s=0;s<i;s++)o|=e[t+s]^r[n+s];return(1&o-1>>>8)-1}function crypto_verify_16(e,t,r,n){return vn(e,t,r,n,16)}function crypto_verify_32(e,t,r,n){return vn(e,t,r,n,32)}function core_salsa20(e,t,r,n){var i=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,s=r[0]&255|(r[1]&255)<<8|(r[2]&255)<<16|(r[3]&255)<<24,o=r[4]&255|(r[5]&255)<<8|(r[6]&255)<<16|(r[7]&255)<<24,a=r[8]&255|(r[9]&255)<<8|(r[10]&255)<<16|(r[11]&255)<<24,c=r[12]&255|(r[13]&255)<<8|(r[14]&255)<<16|(r[15]&255)<<24,u=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,d=t[0]&255|(t[1]&255)<<8|(t[2]&255)<<16|(t[3]&255)<<24,p=t[4]&255|(t[5]&255)<<8|(t[6]&255)<<16|(t[7]&255)<<24,m=t[8]&255|(t[9]&255)<<8|(t[10]&255)<<16|(t[11]&255)<<24,y=t[12]&255|(t[13]&255)<<8|(t[14]&255)<<16|(t[15]&255)<<24,g=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,b=r[16]&255|(r[17]&255)<<8|(r[18]&255)<<16|(r[19]&255)<<24,v=r[20]&255|(r[21]&255)<<8|(r[22]&255)<<16|(r[23]&255)<<24,w=r[24]&255|(r[25]&255)<<8|(r[26]&255)<<16|(r[27]&255)<<24,_=r[28]&255|(r[29]&255)<<8|(r[30]&255)<<16|(r[31]&255)<<24,C=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24;var P=i,O=s,E=o,I=a,k=c,T=u,x=d,R=p,B=m,N=y,j=g,L=b,D=v,U=w,F=_,K=C,V;for(var H=0;H<20;H+=2){V=P+D|0;k^=V<<7|V>>>32-7;V=k+P|0;B^=V<<9|V>>>32-9;V=B+k|0;D^=V<<13|V>>>32-13;V=D+B|0;P^=V<<18|V>>>32-18;V=T+O|0;N^=V<<7|V>>>32-7;V=N+T|0;U^=V<<9|V>>>32-9;V=U+N|0;O^=V<<13|V>>>32-13;V=O+U|0;T^=V<<18|V>>>32-18;V=j+x|0;F^=V<<7|V>>>32-7;V=F+j|0;E^=V<<9|V>>>32-9;V=E+F|0;x^=V<<13|V>>>32-13;V=x+E|0;j^=V<<18|V>>>32-18;V=K+L|0;I^=V<<7|V>>>32-7;V=I+K|0;R^=V<<9|V>>>32-9;V=R+I|0;L^=V<<13|V>>>32-13;V=L+R|0;K^=V<<18|V>>>32-18;V=P+I|0;O^=V<<7|V>>>32-7;V=O+P|0;E^=V<<9|V>>>32-9;V=E+O|0;I^=V<<13|V>>>32-13;V=I+E|0;P^=V<<18|V>>>32-18;V=T+k|0;x^=V<<7|V>>>32-7;V=x+T|0;R^=V<<9|V>>>32-9;V=R+x|0;k^=V<<13|V>>>32-13;V=k+R|0;T^=V<<18|V>>>32-18;V=j+N|0;L^=V<<7|V>>>32-7;V=L+j|0;B^=V<<9|V>>>32-9;V=B+L|0;N^=V<<13|V>>>32-13;V=N+B|0;j^=V<<18|V>>>32-18;V=K+F|0;D^=V<<7|V>>>32-7;V=D+K|0;U^=V<<9|V>>>32-9;V=U+D|0;F^=V<<13|V>>>32-13;V=F+U|0;K^=V<<18|V>>>32-18}P=P+i|0;O=O+s|0;E=E+o|0;I=I+a|0;k=k+c|0;T=T+u|0;x=x+d|0;R=R+p|0;B=B+m|0;N=N+y|0;j=j+g|0;L=L+b|0;D=D+v|0;U=U+w|0;F=F+_|0;K=K+C|0;e[0]=P>>>0&255;e[1]=P>>>8&255;e[2]=P>>>16&255;e[3]=P>>>24&255;e[4]=O>>>0&255;e[5]=O>>>8&255;e[6]=O>>>16&255;e[7]=O>>>24&255;e[8]=E>>>0&255;e[9]=E>>>8&255;e[10]=E>>>16&255;e[11]=E>>>24&255;e[12]=I>>>0&255;e[13]=I>>>8&255;e[14]=I>>>16&255;e[15]=I>>>24&255;e[16]=k>>>0&255;e[17]=k>>>8&255;e[18]=k>>>16&255;e[19]=k>>>24&255;e[20]=T>>>0&255;e[21]=T>>>8&255;e[22]=T>>>16&255;e[23]=T>>>24&255;e[24]=x>>>0&255;e[25]=x>>>8&255;e[26]=x>>>16&255;e[27]=x>>>24&255;e[28]=R>>>0&255;e[29]=R>>>8&255;e[30]=R>>>16&255;e[31]=R>>>24&255;e[32]=B>>>0&255;e[33]=B>>>8&255;e[34]=B>>>16&255;e[35]=B>>>24&255;e[36]=N>>>0&255;e[37]=N>>>8&255;e[38]=N>>>16&255;e[39]=N>>>24&255;e[40]=j>>>0&255;e[41]=j>>>8&255;e[42]=j>>>16&255;e[43]=j>>>24&255;e[44]=L>>>0&255;e[45]=L>>>8&255;e[46]=L>>>16&255;e[47]=L>>>24&255;e[48]=D>>>0&255;e[49]=D>>>8&255;e[50]=D>>>16&255;e[51]=D>>>24&255;e[52]=U>>>0&255;e[53]=U>>>8&255;e[54]=U>>>16&255;e[55]=U>>>24&255;e[56]=F>>>0&255;e[57]=F>>>8&255;e[58]=F>>>16&255;e[59]=F>>>24&255;e[60]=K>>>0&255;e[61]=K>>>8&255;e[62]=K>>>16&255;e[63]=K>>>24&255}function core_hsalsa20(e,t,r,n){var i=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,s=r[0]&255|(r[1]&255)<<8|(r[2]&255)<<16|(r[3]&255)<<24,o=r[4]&255|(r[5]&255)<<8|(r[6]&255)<<16|(r[7]&255)<<24,a=r[8]&255|(r[9]&255)<<8|(r[10]&255)<<16|(r[11]&255)<<24,c=r[12]&255|(r[13]&255)<<8|(r[14]&255)<<16|(r[15]&255)<<24,u=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,d=t[0]&255|(t[1]&255)<<8|(t[2]&255)<<16|(t[3]&255)<<24,p=t[4]&255|(t[5]&255)<<8|(t[6]&255)<<16|(t[7]&255)<<24,m=t[8]&255|(t[9]&255)<<8|(t[10]&255)<<16|(t[11]&255)<<24,y=t[12]&255|(t[13]&255)<<8|(t[14]&255)<<16|(t[15]&255)<<24,g=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,b=r[16]&255|(r[17]&255)<<8|(r[18]&255)<<16|(r[19]&255)<<24,v=r[20]&255|(r[21]&255)<<8|(r[22]&255)<<16|(r[23]&255)<<24,w=r[24]&255|(r[25]&255)<<8|(r[26]&255)<<16|(r[27]&255)<<24,_=r[28]&255|(r[29]&255)<<8|(r[30]&255)<<16|(r[31]&255)<<24,C=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24;var P=i,O=s,E=o,I=a,k=c,T=u,x=d,R=p,B=m,N=y,j=g,L=b,D=v,U=w,F=_,K=C,V;for(var H=0;H<20;H+=2){V=P+D|0;k^=V<<7|V>>>32-7;V=k+P|0;B^=V<<9|V>>>32-9;V=B+k|0;D^=V<<13|V>>>32-13;V=D+B|0;P^=V<<18|V>>>32-18;V=T+O|0;N^=V<<7|V>>>32-7;V=N+T|0;U^=V<<9|V>>>32-9;V=U+N|0;O^=V<<13|V>>>32-13;V=O+U|0;T^=V<<18|V>>>32-18;V=j+x|0;F^=V<<7|V>>>32-7;V=F+j|0;E^=V<<9|V>>>32-9;V=E+F|0;x^=V<<13|V>>>32-13;V=x+E|0;j^=V<<18|V>>>32-18;V=K+L|0;I^=V<<7|V>>>32-7;V=I+K|0;R^=V<<9|V>>>32-9;V=R+I|0;L^=V<<13|V>>>32-13;V=L+R|0;K^=V<<18|V>>>32-18;V=P+I|0;O^=V<<7|V>>>32-7;V=O+P|0;E^=V<<9|V>>>32-9;V=E+O|0;I^=V<<13|V>>>32-13;V=I+E|0;P^=V<<18|V>>>32-18;V=T+k|0;x^=V<<7|V>>>32-7;V=x+T|0;R^=V<<9|V>>>32-9;V=R+x|0;k^=V<<13|V>>>32-13;V=k+R|0;T^=V<<18|V>>>32-18;V=j+N|0;L^=V<<7|V>>>32-7;V=L+j|0;B^=V<<9|V>>>32-9;V=B+L|0;N^=V<<13|V>>>32-13;V=N+B|0;j^=V<<18|V>>>32-18;V=K+F|0;D^=V<<7|V>>>32-7;V=D+K|0;U^=V<<9|V>>>32-9;V=U+D|0;F^=V<<13|V>>>32-13;V=F+U|0;K^=V<<18|V>>>32-18}e[0]=P>>>0&255;e[1]=P>>>8&255;e[2]=P>>>16&255;e[3]=P>>>24&255;e[4]=T>>>0&255;e[5]=T>>>8&255;e[6]=T>>>16&255;e[7]=T>>>24&255;e[8]=j>>>0&255;e[9]=j>>>8&255;e[10]=j>>>16&255;e[11]=j>>>24&255;e[12]=K>>>0&255;e[13]=K>>>8&255;e[14]=K>>>16&255;e[15]=K>>>24&255;e[16]=x>>>0&255;e[17]=x>>>8&255;e[18]=x>>>16&255;e[19]=x>>>24&255;e[20]=R>>>0&255;e[21]=R>>>8&255;e[22]=R>>>16&255;e[23]=R>>>24&255;e[24]=B>>>0&255;e[25]=B>>>8&255;e[26]=B>>>16&255;e[27]=B>>>24&255;e[28]=N>>>0&255;e[29]=N>>>8&255;e[30]=N>>>16&255;e[31]=N>>>24&255}function crypto_core_salsa20(e,t,r,n){core_salsa20(e,t,r,n)}function crypto_core_hsalsa20(e,t,r,n){core_hsalsa20(e,t,r,n)}var m=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(e,t,r,n,i,s,o){var a=new Uint8Array(16),c=new Uint8Array(64);var u,d;for(d=0;d<16;d++)a[d]=0;for(d=0;d<8;d++)a[d]=s[d];while(i>=64){crypto_core_salsa20(c,a,o,m);for(d=0;d<64;d++)e[t+d]=r[n+d]^c[d];u=1;for(d=8;d<16;d++){u=u+(a[d]&255)|0;a[d]=u&255;u>>>=8}i-=64;t+=64;n+=64}if(i>0){crypto_core_salsa20(c,a,o,m);for(d=0;d<i;d++)e[t+d]=r[n+d]^c[d]}return 0}function crypto_stream_salsa20(e,t,r,n,i){var s=new Uint8Array(16),o=new Uint8Array(64);var a,c;for(c=0;c<16;c++)s[c]=0;for(c=0;c<8;c++)s[c]=n[c];while(r>=64){crypto_core_salsa20(o,s,i,m);for(c=0;c<64;c++)e[t+c]=o[c];a=1;for(c=8;c<16;c++){a=a+(s[c]&255)|0;s[c]=a&255;a>>>=8}r-=64;t+=64}if(r>0){crypto_core_salsa20(o,s,i,m);for(c=0;c<r;c++)e[t+c]=o[c]}return 0}function crypto_stream(e,t,r,n,i){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,i,m);var o=new Uint8Array(8);for(var a=0;a<8;a++)o[a]=n[a+16];return crypto_stream_salsa20(e,t,r,o,s)}function crypto_stream_xor(e,t,r,n,i,s,o){var a=new Uint8Array(32);crypto_core_hsalsa20(a,s,o,m);var c=new Uint8Array(8);for(var u=0;u<8;u++)c[u]=s[u+16];return crypto_stream_salsa20_xor(e,t,r,n,i,c,a)}var poly1305=function(e){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var t,r,n,i,s,o,a,c;t=e[0]&255|(e[1]&255)<<8;this.r[0]=t&8191;r=e[2]&255|(e[3]&255)<<8;this.r[1]=(t>>>13|r<<3)&8191;n=e[4]&255|(e[5]&255)<<8;this.r[2]=(r>>>10|n<<6)&7939;i=e[6]&255|(e[7]&255)<<8;this.r[3]=(n>>>7|i<<9)&8191;s=e[8]&255|(e[9]&255)<<8;this.r[4]=(i>>>4|s<<12)&255;this.r[5]=s>>>1&8190;o=e[10]&255|(e[11]&255)<<8;this.r[6]=(s>>>14|o<<2)&8191;a=e[12]&255|(e[13]&255)<<8;this.r[7]=(o>>>11|a<<5)&8065;c=e[14]&255|(e[15]&255)<<8;this.r[8]=(a>>>8|c<<8)&8191;this.r[9]=c>>>5&127;this.pad[0]=e[16]&255|(e[17]&255)<<8;this.pad[1]=e[18]&255|(e[19]&255)<<8;this.pad[2]=e[20]&255|(e[21]&255)<<8;this.pad[3]=e[22]&255|(e[23]&255)<<8;this.pad[4]=e[24]&255|(e[25]&255)<<8;this.pad[5]=e[26]&255|(e[27]&255)<<8;this.pad[6]=e[28]&255|(e[29]&255)<<8;this.pad[7]=e[30]&255|(e[31]&255)<<8};poly1305.prototype.blocks=function(e,t,r){var n=this.fin?0:1<<11;var i,s,o,a,c,u,d,p,m;var y,g,b,v,w,_,C,P,O,E;var I=this.h[0],k=this.h[1],T=this.h[2],x=this.h[3],R=this.h[4],B=this.h[5],N=this.h[6],j=this.h[7],L=this.h[8],D=this.h[9];var U=this.r[0],F=this.r[1],K=this.r[2],V=this.r[3],H=this.r[4],q=this.r[5],W=this.r[6],z=this.r[7],$=this.r[8],G=this.r[9];while(r>=16){i=e[t+0]&255|(e[t+1]&255)<<8;I+=i&8191;s=e[t+2]&255|(e[t+3]&255)<<8;k+=(i>>>13|s<<3)&8191;o=e[t+4]&255|(e[t+5]&255)<<8;T+=(s>>>10|o<<6)&8191;a=e[t+6]&255|(e[t+7]&255)<<8;x+=(o>>>7|a<<9)&8191;c=e[t+8]&255|(e[t+9]&255)<<8;R+=(a>>>4|c<<12)&8191;B+=c>>>1&8191;u=e[t+10]&255|(e[t+11]&255)<<8;N+=(c>>>14|u<<2)&8191;d=e[t+12]&255|(e[t+13]&255)<<8;j+=(u>>>11|d<<5)&8191;p=e[t+14]&255|(e[t+15]&255)<<8;L+=(d>>>8|p<<8)&8191;D+=p>>>5|n;m=0;y=m;y+=I*U;y+=k*(5*G);y+=T*(5*$);y+=x*(5*z);y+=R*(5*W);m=y>>>13;y&=8191;y+=B*(5*q);y+=N*(5*H);y+=j*(5*V);y+=L*(5*K);y+=D*(5*F);m+=y>>>13;y&=8191;g=m;g+=I*F;g+=k*U;g+=T*(5*G);g+=x*(5*$);g+=R*(5*z);m=g>>>13;g&=8191;g+=B*(5*W);g+=N*(5*q);g+=j*(5*H);g+=L*(5*V);g+=D*(5*K);m+=g>>>13;g&=8191;b=m;b+=I*K;b+=k*F;b+=T*U;b+=x*(5*G);b+=R*(5*$);m=b>>>13;b&=8191;b+=B*(5*z);b+=N*(5*W);b+=j*(5*q);b+=L*(5*H);b+=D*(5*V);m+=b>>>13;b&=8191;v=m;v+=I*V;v+=k*K;v+=T*F;v+=x*U;v+=R*(5*G);m=v>>>13;v&=8191;v+=B*(5*$);v+=N*(5*z);v+=j*(5*W);v+=L*(5*q);v+=D*(5*H);m+=v>>>13;v&=8191;w=m;w+=I*H;w+=k*V;w+=T*K;w+=x*F;w+=R*U;m=w>>>13;w&=8191;w+=B*(5*G);w+=N*(5*$);w+=j*(5*z);w+=L*(5*W);w+=D*(5*q);m+=w>>>13;w&=8191;_=m;_+=I*q;_+=k*H;_+=T*V;_+=x*K;_+=R*F;m=_>>>13;_&=8191;_+=B*U;_+=N*(5*G);_+=j*(5*$);_+=L*(5*z);_+=D*(5*W);m+=_>>>13;_&=8191;C=m;C+=I*W;C+=k*q;C+=T*H;C+=x*V;C+=R*K;m=C>>>13;C&=8191;C+=B*F;C+=N*U;C+=j*(5*G);C+=L*(5*$);C+=D*(5*z);m+=C>>>13;C&=8191;P=m;P+=I*z;P+=k*W;P+=T*q;P+=x*H;P+=R*V;m=P>>>13;P&=8191;P+=B*K;P+=N*F;P+=j*U;P+=L*(5*G);P+=D*(5*$);m+=P>>>13;P&=8191;O=m;O+=I*$;O+=k*z;O+=T*W;O+=x*q;O+=R*H;m=O>>>13;O&=8191;O+=B*V;O+=N*K;O+=j*F;O+=L*U;O+=D*(5*G);m+=O>>>13;O&=8191;E=m;E+=I*G;E+=k*$;E+=T*z;E+=x*W;E+=R*q;m=E>>>13;E&=8191;E+=B*H;E+=N*V;E+=j*K;E+=L*F;E+=D*U;m+=E>>>13;E&=8191;m=(m<<2)+m|0;m=m+y|0;y=m&8191;m=m>>>13;g+=m;I=y;k=g;T=b;x=v;R=w;B=_;N=C;j=P;L=O;D=E;t+=16;r-=16}this.h[0]=I;this.h[1]=k;this.h[2]=T;this.h[3]=x;this.h[4]=R;this.h[5]=B;this.h[6]=N;this.h[7]=j;this.h[8]=L;this.h[9]=D};poly1305.prototype.finish=function(e,t){var r=new Uint16Array(10);var n,i,s,o;if(this.leftover){o=this.leftover;this.buffer[o++]=1;for(;o<16;o++)this.buffer[o]=0;this.fin=1;this.blocks(this.buffer,0,16)}n=this.h[1]>>>13;this.h[1]&=8191;for(o=2;o<10;o++){this.h[o]+=n;n=this.h[o]>>>13;this.h[o]&=8191}this.h[0]+=n*5;n=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=n;n=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=n;r[0]=this.h[0]+5;n=r[0]>>>13;r[0]&=8191;for(o=1;o<10;o++){r[o]=this.h[o]+n;n=r[o]>>>13;r[o]&=8191}r[9]-=1<<13;i=(n^1)-1;for(o=0;o<10;o++)r[o]&=i;i=~i;for(o=0;o<10;o++)this.h[o]=this.h[o]&i|r[o];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;s=this.h[0]+this.pad[0];this.h[0]=s&65535;for(o=1;o<8;o++){s=(this.h[o]+this.pad[o]|0)+(s>>>16)|0;this.h[o]=s&65535}e[t+0]=this.h[0]>>>0&255;e[t+1]=this.h[0]>>>8&255;e[t+2]=this.h[1]>>>0&255;e[t+3]=this.h[1]>>>8&255;e[t+4]=this.h[2]>>>0&255;e[t+5]=this.h[2]>>>8&255;e[t+6]=this.h[3]>>>0&255;e[t+7]=this.h[3]>>>8&255;e[t+8]=this.h[4]>>>0&255;e[t+9]=this.h[4]>>>8&255;e[t+10]=this.h[5]>>>0&255;e[t+11]=this.h[5]>>>8&255;e[t+12]=this.h[6]>>>0&255;e[t+13]=this.h[6]>>>8&255;e[t+14]=this.h[7]>>>0&255;e[t+15]=this.h[7]>>>8&255};poly1305.prototype.update=function(e,t,r){var n,i;if(this.leftover){i=16-this.leftover;if(i>r)i=r;for(n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];r-=i;t+=i;this.leftover+=i;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}if(r>=16){i=r-r%16;this.blocks(e,t,i);t+=i;r-=i}if(r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};function crypto_onetimeauth(e,t,r,n,i,s){var o=new poly1305(s);o.update(r,n,i);o.finish(e,t);return 0}function crypto_onetimeauth_verify(e,t,r,n,i,s){var o=new Uint8Array(16);crypto_onetimeauth(o,0,r,n,i,s);return crypto_verify_16(e,t,o,0)}function crypto_secretbox(e,t,r,n,i){var s;if(r<32)return-1;crypto_stream_xor(e,0,t,0,r,n,i);crypto_onetimeauth(e,16,e,32,r-32,e);for(s=0;s<16;s++)e[s]=0;return 0}function crypto_secretbox_open(e,t,r,n,i){var s;var o=new Uint8Array(32);if(r<32)return-1;crypto_stream(o,0,32,n,i);if(crypto_onetimeauth_verify(t,16,t,32,r-32,o)!==0)return-1;crypto_stream_xor(e,0,t,0,r,n,i);for(s=0;s<32;s++)e[s]=0;return 0}function set25519(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function car25519(e){var t,r,n=1;for(t=0;t<16;t++){r=e[t]+n+65535;n=Math.floor(r/65536);e[t]=r-n*65536}e[0]+=n-1+37*(n-1)}function sel25519(e,t,r){var n,i=~(r-1);for(var s=0;s<16;s++){n=i&(e[s]^t[s]);e[s]^=n;t[s]^=n}}function pack25519(e,t){var r,n,i;var s=gf(),o=gf();for(r=0;r<16;r++)o[r]=t[r];car25519(o);car25519(o);car25519(o);for(n=0;n<2;n++){s[0]=o[0]-65517;for(r=1;r<15;r++){s[r]=o[r]-65535-(s[r-1]>>16&1);s[r-1]&=65535}s[15]=o[15]-32767-(s[14]>>16&1);i=s[15]>>16&1;s[14]&=65535;sel25519(o,s,1-i)}for(r=0;r<16;r++){e[2*r]=o[r]&255;e[2*r+1]=o[r]>>8}}function neq25519(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);pack25519(r,e);pack25519(n,t);return crypto_verify_32(r,0,n,0)}function par25519(e){var t=new Uint8Array(32);pack25519(t,e);return t[0]&1}function unpack25519(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function A(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function Z(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function M(e,t,r){var n,i,s=0,o=0,a=0,c=0,u=0,d=0,p=0,m=0,y=0,g=0,b=0,v=0,w=0,_=0,C=0,P=0,O=0,E=0,I=0,k=0,T=0,x=0,R=0,B=0,N=0,j=0,L=0,D=0,U=0,F=0,K=0,V=r[0],H=r[1],q=r[2],W=r[3],z=r[4],$=r[5],G=r[6],J=r[7],X=r[8],Y=r[9],Q=r[10],ee=r[11],te=r[12],re=r[13],ne=r[14],ie=r[15];n=t[0];s+=n*V;o+=n*H;a+=n*q;c+=n*W;u+=n*z;d+=n*$;p+=n*G;m+=n*J;y+=n*X;g+=n*Y;b+=n*Q;v+=n*ee;w+=n*te;_+=n*re;C+=n*ne;P+=n*ie;n=t[1];o+=n*V;a+=n*H;c+=n*q;u+=n*W;d+=n*z;p+=n*$;m+=n*G;y+=n*J;g+=n*X;b+=n*Y;v+=n*Q;w+=n*ee;_+=n*te;C+=n*re;P+=n*ne;O+=n*ie;n=t[2];a+=n*V;c+=n*H;u+=n*q;d+=n*W;p+=n*z;m+=n*$;y+=n*G;g+=n*J;b+=n*X;v+=n*Y;w+=n*Q;_+=n*ee;C+=n*te;P+=n*re;O+=n*ne;E+=n*ie;n=t[3];c+=n*V;u+=n*H;d+=n*q;p+=n*W;m+=n*z;y+=n*$;g+=n*G;b+=n*J;v+=n*X;w+=n*Y;_+=n*Q;C+=n*ee;P+=n*te;O+=n*re;E+=n*ne;I+=n*ie;n=t[4];u+=n*V;d+=n*H;p+=n*q;m+=n*W;y+=n*z;g+=n*$;b+=n*G;v+=n*J;w+=n*X;_+=n*Y;C+=n*Q;P+=n*ee;O+=n*te;E+=n*re;I+=n*ne;k+=n*ie;n=t[5];d+=n*V;p+=n*H;m+=n*q;y+=n*W;g+=n*z;b+=n*$;v+=n*G;w+=n*J;_+=n*X;C+=n*Y;P+=n*Q;O+=n*ee;E+=n*te;I+=n*re;k+=n*ne;T+=n*ie;n=t[6];p+=n*V;m+=n*H;y+=n*q;g+=n*W;b+=n*z;v+=n*$;w+=n*G;_+=n*J;C+=n*X;P+=n*Y;O+=n*Q;E+=n*ee;I+=n*te;k+=n*re;T+=n*ne;x+=n*ie;n=t[7];m+=n*V;y+=n*H;g+=n*q;b+=n*W;v+=n*z;w+=n*$;_+=n*G;C+=n*J;P+=n*X;O+=n*Y;E+=n*Q;I+=n*ee;k+=n*te;T+=n*re;x+=n*ne;R+=n*ie;n=t[8];y+=n*V;g+=n*H;b+=n*q;v+=n*W;w+=n*z;_+=n*$;C+=n*G;P+=n*J;O+=n*X;E+=n*Y;I+=n*Q;k+=n*ee;T+=n*te;x+=n*re;R+=n*ne;B+=n*ie;n=t[9];g+=n*V;b+=n*H;v+=n*q;w+=n*W;_+=n*z;C+=n*$;P+=n*G;O+=n*J;E+=n*X;I+=n*Y;k+=n*Q;T+=n*ee;x+=n*te;R+=n*re;B+=n*ne;N+=n*ie;n=t[10];b+=n*V;v+=n*H;w+=n*q;_+=n*W;C+=n*z;P+=n*$;O+=n*G;E+=n*J;I+=n*X;k+=n*Y;T+=n*Q;x+=n*ee;R+=n*te;B+=n*re;N+=n*ne;j+=n*ie;n=t[11];v+=n*V;w+=n*H;_+=n*q;C+=n*W;P+=n*z;O+=n*$;E+=n*G;I+=n*J;k+=n*X;T+=n*Y;x+=n*Q;R+=n*ee;B+=n*te;N+=n*re;j+=n*ne;L+=n*ie;n=t[12];w+=n*V;_+=n*H;C+=n*q;P+=n*W;O+=n*z;E+=n*$;I+=n*G;k+=n*J;T+=n*X;x+=n*Y;R+=n*Q;B+=n*ee;N+=n*te;j+=n*re;L+=n*ne;D+=n*ie;n=t[13];_+=n*V;C+=n*H;P+=n*q;O+=n*W;E+=n*z;I+=n*$;k+=n*G;T+=n*J;x+=n*X;R+=n*Y;B+=n*Q;N+=n*ee;j+=n*te;L+=n*re;D+=n*ne;U+=n*ie;n=t[14];C+=n*V;P+=n*H;O+=n*q;E+=n*W;I+=n*z;k+=n*$;T+=n*G;x+=n*J;R+=n*X;B+=n*Y;N+=n*Q;j+=n*ee;L+=n*te;D+=n*re;U+=n*ne;F+=n*ie;n=t[15];P+=n*V;O+=n*H;E+=n*q;I+=n*W;k+=n*z;T+=n*$;x+=n*G;R+=n*J;B+=n*X;N+=n*Y;j+=n*Q;L+=n*ee;D+=n*te;U+=n*re;F+=n*ne;K+=n*ie;s+=38*O;o+=38*E;a+=38*I;c+=38*k;u+=38*T;d+=38*x;p+=38*R;m+=38*B;y+=38*N;g+=38*j;b+=38*L;v+=38*D;w+=38*U;_+=38*F;C+=38*K;i=1;n=s+i+65535;i=Math.floor(n/65536);s=n-i*65536;n=o+i+65535;i=Math.floor(n/65536);o=n-i*65536;n=a+i+65535;i=Math.floor(n/65536);a=n-i*65536;n=c+i+65535;i=Math.floor(n/65536);c=n-i*65536;n=u+i+65535;i=Math.floor(n/65536);u=n-i*65536;n=d+i+65535;i=Math.floor(n/65536);d=n-i*65536;n=p+i+65535;i=Math.floor(n/65536);p=n-i*65536;n=m+i+65535;i=Math.floor(n/65536);m=n-i*65536;n=y+i+65535;i=Math.floor(n/65536);y=n-i*65536;n=g+i+65535;i=Math.floor(n/65536);g=n-i*65536;n=b+i+65535;i=Math.floor(n/65536);b=n-i*65536;n=v+i+65535;i=Math.floor(n/65536);v=n-i*65536;n=w+i+65535;i=Math.floor(n/65536);w=n-i*65536;n=_+i+65535;i=Math.floor(n/65536);_=n-i*65536;n=C+i+65535;i=Math.floor(n/65536);C=n-i*65536;n=P+i+65535;i=Math.floor(n/65536);P=n-i*65536;s+=i-1+37*(i-1);i=1;n=s+i+65535;i=Math.floor(n/65536);s=n-i*65536;n=o+i+65535;i=Math.floor(n/65536);o=n-i*65536;n=a+i+65535;i=Math.floor(n/65536);a=n-i*65536;n=c+i+65535;i=Math.floor(n/65536);c=n-i*65536;n=u+i+65535;i=Math.floor(n/65536);u=n-i*65536;n=d+i+65535;i=Math.floor(n/65536);d=n-i*65536;n=p+i+65535;i=Math.floor(n/65536);p=n-i*65536;n=m+i+65535;i=Math.floor(n/65536);m=n-i*65536;n=y+i+65535;i=Math.floor(n/65536);y=n-i*65536;n=g+i+65535;i=Math.floor(n/65536);g=n-i*65536;n=b+i+65535;i=Math.floor(n/65536);b=n-i*65536;n=v+i+65535;i=Math.floor(n/65536);v=n-i*65536;n=w+i+65535;i=Math.floor(n/65536);w=n-i*65536;n=_+i+65535;i=Math.floor(n/65536);_=n-i*65536;n=C+i+65535;i=Math.floor(n/65536);C=n-i*65536;n=P+i+65535;i=Math.floor(n/65536);P=n-i*65536;s+=i-1+37*(i-1);e[0]=s;e[1]=o;e[2]=a;e[3]=c;e[4]=u;e[5]=d;e[6]=p;e[7]=m;e[8]=y;e[9]=g;e[10]=b;e[11]=v;e[12]=w;e[13]=_;e[14]=C;e[15]=P}function S(e,t){M(e,t,t)}function inv25519(e,t){var r=gf();var n;for(n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--){S(r,r);if(n!==2&&n!==4)M(r,r,t)}for(n=0;n<16;n++)e[n]=r[n]}function pow2523(e,t){var r=gf();var n;for(n=0;n<16;n++)r[n]=t[n];for(n=250;n>=0;n--){S(r,r);if(n!==1)M(r,r,t)}for(n=0;n<16;n++)e[n]=r[n]}function crypto_scalarmult(e,t,r){var n=new Uint8Array(32);var i=new Float64Array(80),s,a;var c=gf(),u=gf(),d=gf(),p=gf(),m=gf(),y=gf();for(a=0;a<31;a++)n[a]=t[a];n[31]=t[31]&127|64;n[0]&=248;unpack25519(i,r);for(a=0;a<16;a++){u[a]=i[a];p[a]=c[a]=d[a]=0}c[0]=p[0]=1;for(a=254;a>=0;--a){s=n[a>>>3]>>>(a&7)&1;sel25519(c,u,s);sel25519(d,p,s);A(m,c,d);Z(c,c,d);A(d,u,p);Z(u,u,p);S(p,m);S(y,c);M(c,d,c);M(d,u,m);A(m,c,d);Z(c,c,d);S(u,c);Z(d,p,y);M(c,d,o);A(c,c,p);M(d,d,c);M(c,p,y);M(p,u,i);S(u,m);sel25519(c,u,s);sel25519(d,p,s)}for(a=0;a<16;a++){i[a+16]=c[a];i[a+32]=d[a];i[a+48]=u[a];i[a+64]=p[a]}var g=i.subarray(32);var b=i.subarray(16);inv25519(g,g);M(b,b,g);pack25519(e,b);return 0}function crypto_scalarmult_base(e,t){return crypto_scalarmult(e,t,n)}function crypto_box_keypair(e,t){randombytes(t,32);return crypto_scalarmult_base(e,t)}function crypto_box_beforenm(e,r,n){var i=new Uint8Array(32);crypto_scalarmult(i,n,r);return crypto_core_hsalsa20(e,t,i,m)}var y=crypto_secretbox;var g=crypto_secretbox_open;function crypto_box(e,t,r,n,i,s){var o=new Uint8Array(32);crypto_box_beforenm(o,i,s);return y(e,t,r,n,o)}function crypto_box_open(e,t,r,n,i,s){var o=new Uint8Array(32);crypto_box_beforenm(o,i,s);return g(e,t,r,n,o)}var b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(e,t,r,n){var i=new Int32Array(16),s=new Int32Array(16),o,a,c,u,d,p,m,y,g,v,w,_,C,P,O,E,I,k,T,x,R,B,N,j,L,D;var U=e[0],F=e[1],K=e[2],V=e[3],H=e[4],q=e[5],W=e[6],z=e[7],$=t[0],G=t[1],J=t[2],X=t[3],Y=t[4],Q=t[5],ee=t[6],te=t[7];var re=0;while(n>=128){for(T=0;T<16;T++){x=8*T+re;i[T]=r[x+0]<<24|r[x+1]<<16|r[x+2]<<8|r[x+3];s[T]=r[x+4]<<24|r[x+5]<<16|r[x+6]<<8|r[x+7]}for(T=0;T<80;T++){o=U;a=F;c=K;u=V;d=H;p=q;m=W;y=z;g=$;v=G;w=J;_=X;C=Y;P=Q;O=ee;E=te;R=z;B=te;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=(H>>>14|Y<<32-14)^(H>>>18|Y<<32-18)^(Y>>>41-32|H<<32-(41-32));B=(Y>>>14|H<<32-14)^(Y>>>18|H<<32-18)^(H>>>41-32|Y<<32-(41-32));N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;R=H&q^~H&W;B=Y&Q^~Y&ee;N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;R=b[T*2];B=b[T*2+1];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;R=i[T%16];B=s[T%16];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;I=L&65535|D<<16;k=N&65535|j<<16;R=I;B=k;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=(U>>>28|$<<32-28)^($>>>34-32|U<<32-(34-32))^($>>>39-32|U<<32-(39-32));B=($>>>28|U<<32-28)^(U>>>34-32|$<<32-(34-32))^(U>>>39-32|$<<32-(39-32));N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;R=U&F^U&K^F&K;B=$&G^$&J^G&J;N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;y=L&65535|D<<16;E=N&65535|j<<16;R=u;B=_;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=I;B=k;N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;u=L&65535|D<<16;_=N&65535|j<<16;F=o;K=a;V=c;H=u;q=d;W=p;z=m;U=y;G=g;J=v;X=w;Y=_;Q=C;ee=P;te=O;$=E;if(T%16===15){for(x=0;x<16;x++){R=i[x];B=s[x];N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=i[(x+9)%16];B=s[(x+9)%16];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;I=i[(x+1)%16];k=s[(x+1)%16];R=(I>>>1|k<<32-1)^(I>>>8|k<<32-8)^I>>>7;B=(k>>>1|I<<32-1)^(k>>>8|I<<32-8)^(k>>>7|I<<32-7);N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;I=i[(x+14)%16];k=s[(x+14)%16];R=(I>>>19|k<<32-19)^(k>>>61-32|I<<32-(61-32))^I>>>6;B=(k>>>19|I<<32-19)^(I>>>61-32|k<<32-(61-32))^(k>>>6|I<<32-6);N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;i[x]=L&65535|D<<16;s[x]=N&65535|j<<16}}}R=U;B=$;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=e[0];B=t[0];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;e[0]=U=L&65535|D<<16;t[0]=$=N&65535|j<<16;R=F;B=G;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=e[1];B=t[1];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;e[1]=F=L&65535|D<<16;t[1]=G=N&65535|j<<16;R=K;B=J;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=e[2];B=t[2];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;e[2]=K=L&65535|D<<16;t[2]=J=N&65535|j<<16;R=V;B=X;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=e[3];B=t[3];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;e[3]=V=L&65535|D<<16;t[3]=X=N&65535|j<<16;R=H;B=Y;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=e[4];B=t[4];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;e[4]=H=L&65535|D<<16;t[4]=Y=N&65535|j<<16;R=q;B=Q;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=e[5];B=t[5];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;e[5]=q=L&65535|D<<16;t[5]=Q=N&65535|j<<16;R=W;B=ee;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=e[6];B=t[6];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;e[6]=W=L&65535|D<<16;t[6]=ee=N&65535|j<<16;R=z;B=te;N=B&65535;j=B>>>16;L=R&65535;D=R>>>16;R=e[7];B=t[7];N+=B&65535;j+=B>>>16;L+=R&65535;D+=R>>>16;j+=N>>>16;L+=j>>>16;D+=L>>>16;e[7]=z=L&65535|D<<16;t[7]=te=N&65535|j<<16;re+=128;n-=128}return n}function crypto_hash(e,t,r){var n=new Int32Array(8),i=new Int32Array(8),s=new Uint8Array(256),o,a=r;n[0]=1779033703;n[1]=3144134277;n[2]=1013904242;n[3]=2773480762;n[4]=1359893119;n[5]=2600822924;n[6]=528734635;n[7]=1541459225;i[0]=4089235720;i[1]=2227873595;i[2]=4271175723;i[3]=1595750129;i[4]=2917565137;i[5]=725511199;i[6]=4215389547;i[7]=327033209;crypto_hashblocks_hl(n,i,t,r);r%=128;for(o=0;o<r;o++)s[o]=t[a-r+o];s[r]=128;r=256-128*(r<112?1:0);s[r-9]=0;ts64(s,r-8,a/536870912|0,a<<3);crypto_hashblocks_hl(n,i,s,r);for(o=0;o<8;o++)ts64(e,8*o,n[o],i[o]);return 0}function add(e,t){var r=gf(),n=gf(),i=gf(),s=gf(),o=gf(),a=gf(),u=gf(),d=gf(),p=gf();Z(r,e[1],e[0]);Z(p,t[1],t[0]);M(r,r,p);A(n,e[0],e[1]);A(p,t[0],t[1]);M(n,n,p);M(i,e[3],t[3]);M(i,i,c);M(s,e[2],t[2]);A(s,s,s);Z(o,n,r);Z(a,s,i);A(u,s,i);A(d,n,r);M(e[0],o,a);M(e[1],d,u);M(e[2],u,a);M(e[3],o,d)}function cswap(e,t,r){var n;for(n=0;n<4;n++){sel25519(e[n],t[n],r)}}function pack(e,t){var r=gf(),n=gf(),i=gf();inv25519(i,t[2]);M(r,t[0],i);M(n,t[1],i);pack25519(e,n);e[31]^=par25519(r)<<7}function scalarmult(e,t,r){var n,o;set25519(e[0],i);set25519(e[1],s);set25519(e[2],s);set25519(e[3],i);for(o=255;o>=0;--o){n=r[o/8|0]>>(o&7)&1;cswap(e,t,n);add(t,e);add(e,e);cswap(e,t,n)}}function scalarbase(e,t){var r=[gf(),gf(),gf(),gf()];set25519(r[0],u);set25519(r[1],d);set25519(r[2],s);M(r[3],u,d);scalarmult(e,r,t)}function crypto_sign_keypair(e,t,r){var n=new Uint8Array(64);var i=[gf(),gf(),gf(),gf()];var s;if(!r)randombytes(t,32);crypto_hash(n,t,32);n[0]&=248;n[31]&=127;n[31]|=64;scalarbase(i,n);pack(e,i);for(s=0;s<32;s++)t[s+32]=e[s];return 0}var v=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(e,t){var r,n,i,s;for(n=63;n>=32;--n){r=0;for(i=n-32,s=n-12;i<s;++i){t[i]+=r-16*t[n]*v[i-(n-32)];r=Math.floor((t[i]+128)/256);t[i]-=r*256}t[i]+=r;t[n]=0}r=0;for(i=0;i<32;i++){t[i]+=r-(t[31]>>4)*v[i];r=t[i]>>8;t[i]&=255}for(i=0;i<32;i++)t[i]-=r*v[i];for(n=0;n<32;n++){t[n+1]+=t[n]>>8;e[n]=t[n]&255}}function reduce(e){var t=new Float64Array(64),r;for(r=0;r<64;r++)t[r]=e[r];for(r=0;r<64;r++)e[r]=0;modL(e,t)}function crypto_sign(e,t,r,n){var i=new Uint8Array(64),s=new Uint8Array(64),o=new Uint8Array(64);var a,c,u=new Float64Array(64);var d=[gf(),gf(),gf(),gf()];crypto_hash(i,n,32);i[0]&=248;i[31]&=127;i[31]|=64;var p=r+64;for(a=0;a<r;a++)e[64+a]=t[a];for(a=0;a<32;a++)e[32+a]=i[32+a];crypto_hash(o,e.subarray(32),r+32);reduce(o);scalarbase(d,o);pack(e,d);for(a=32;a<64;a++)e[a]=n[a];crypto_hash(s,e,r+64);reduce(s);for(a=0;a<64;a++)u[a]=0;for(a=0;a<32;a++)u[a]=o[a];for(a=0;a<32;a++){for(c=0;c<32;c++){u[a+c]+=s[a]*i[c]}}modL(e.subarray(32),u);return p}function unpackneg(e,t){var r=gf(),n=gf(),o=gf(),c=gf(),u=gf(),d=gf(),m=gf();set25519(e[2],s);unpack25519(e[1],t);S(o,e[1]);M(c,o,a);Z(o,o,e[2]);A(c,e[2],c);S(u,c);S(d,u);M(m,d,u);M(r,m,o);M(r,r,c);pow2523(r,r);M(r,r,o);M(r,r,c);M(r,r,c);M(e[0],r,c);S(n,e[0]);M(n,n,c);if(neq25519(n,o))M(e[0],e[0],p);S(n,e[0]);M(n,n,c);if(neq25519(n,o))return-1;if(par25519(e[0])===t[31]>>7)Z(e[0],i,e[0]);M(e[3],e[0],e[1]);return 0}function crypto_sign_open(e,t,r,n){var i;var s=new Uint8Array(32),o=new Uint8Array(64);var a=[gf(),gf(),gf(),gf()],c=[gf(),gf(),gf(),gf()];if(r<64)return-1;if(unpackneg(c,n))return-1;for(i=0;i<r;i++)e[i]=t[i];for(i=0;i<32;i++)e[i+32]=n[i];crypto_hash(o,e,r);reduce(o);scalarmult(a,c,o);scalarbase(c,t.subarray(32));add(a,c);pack(s,a);r-=64;if(crypto_verify_32(t,0,s,0)){for(i=0;i<r;i++)e[i]=0;return-1}for(i=0;i<r;i++)e[i]=t[i+64];return r}var w=32,_=24,C=32,P=16,O=32,E=32,I=32,k=32,T=32,x=_,R=C,B=P,N=64,j=32,L=64,D=32,U=64;e.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:y,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:w,crypto_secretbox_NONCEBYTES:_,crypto_secretbox_ZEROBYTES:C,crypto_secretbox_BOXZEROBYTES:P,crypto_scalarmult_BYTES:O,crypto_scalarmult_SCALARBYTES:E,crypto_box_PUBLICKEYBYTES:I,crypto_box_SECRETKEYBYTES:k,crypto_box_BEFORENMBYTES:T,crypto_box_NONCEBYTES:x,crypto_box_ZEROBYTES:R,crypto_box_BOXZEROBYTES:B,crypto_sign_BYTES:N,crypto_sign_PUBLICKEYBYTES:j,crypto_sign_SECRETKEYBYTES:L,crypto_sign_SEEDBYTES:D,crypto_hash_BYTES:U,gf:gf,D:a,L:v,pack25519:pack25519,unpack25519:unpack25519,M:M,A:A,S:S,Z:Z,pow2523:pow2523,add:add,set25519:set25519,modL:modL,scalarmult:scalarmult,scalarbase:scalarbase};function checkLengths(e,t){if(e.length!==w)throw new Error("bad key size");if(t.length!==_)throw new Error("bad nonce size")}function checkBoxLengths(e,t){if(e.length!==I)throw new Error("bad public key size");if(t.length!==k)throw new Error("bad secret key size")}function checkArrayTypes(){for(var e=0;e<arguments.length;e++){if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}}function cleanup(e){for(var t=0;t<e.length;t++)e[t]=0}e.randomBytes=function(e){var t=new Uint8Array(e);randombytes(t,e);return t};e.secretbox=function(e,t,r){checkArrayTypes(e,t,r);checkLengths(r,t);var n=new Uint8Array(C+e.length);var i=new Uint8Array(n.length);for(var s=0;s<e.length;s++)n[s+C]=e[s];crypto_secretbox(i,n,n.length,t,r);return i.subarray(P)};e.secretbox.open=function(e,t,r){checkArrayTypes(e,t,r);checkLengths(r,t);var n=new Uint8Array(P+e.length);var i=new Uint8Array(n.length);for(var s=0;s<e.length;s++)n[s+P]=e[s];if(n.length<32)return null;if(crypto_secretbox_open(i,n,n.length,t,r)!==0)return null;return i.subarray(C)};e.secretbox.keyLength=w;e.secretbox.nonceLength=_;e.secretbox.overheadLength=P;e.scalarMult=function(e,t){checkArrayTypes(e,t);if(e.length!==E)throw new Error("bad n size");if(t.length!==O)throw new Error("bad p size");var r=new Uint8Array(O);crypto_scalarmult(r,e,t);return r};e.scalarMult.base=function(e){checkArrayTypes(e);if(e.length!==E)throw new Error("bad n size");var t=new Uint8Array(O);crypto_scalarmult_base(t,e);return t};e.scalarMult.scalarLength=E;e.scalarMult.groupElementLength=O;e.box=function(t,r,n,i){var s=e.box.before(n,i);return e.secretbox(t,r,s)};e.box.before=function(e,t){checkArrayTypes(e,t);checkBoxLengths(e,t);var r=new Uint8Array(T);crypto_box_beforenm(r,e,t);return r};e.box.after=e.secretbox;e.box.open=function(t,r,n,i){var s=e.box.before(n,i);return e.secretbox.open(t,r,s)};e.box.open.after=e.secretbox.open;e.box.keyPair=function(){var e=new Uint8Array(I);var t=new Uint8Array(k);crypto_box_keypair(e,t);return{publicKey:e,secretKey:t}};e.box.keyPair.fromSecretKey=function(e){checkArrayTypes(e);if(e.length!==k)throw new Error("bad secret key size");var t=new Uint8Array(I);crypto_scalarmult_base(t,e);return{publicKey:t,secretKey:new Uint8Array(e)}};e.box.publicKeyLength=I;e.box.secretKeyLength=k;e.box.sharedKeyLength=T;e.box.nonceLength=x;e.box.overheadLength=e.secretbox.overheadLength;e.sign=function(e,t){checkArrayTypes(e,t);if(t.length!==L)throw new Error("bad secret key size");var r=new Uint8Array(N+e.length);crypto_sign(r,e,e.length,t);return r};e.sign.open=function(e,t){checkArrayTypes(e,t);if(t.length!==j)throw new Error("bad public key size");var r=new Uint8Array(e.length);var n=crypto_sign_open(r,e,e.length,t);if(n<0)return null;var i=new Uint8Array(n);for(var s=0;s<i.length;s++)i[s]=r[s];return i};e.sign.detached=function(t,r){var n=e.sign(t,r);var i=new Uint8Array(N);for(var s=0;s<i.length;s++)i[s]=n[s];return i};e.sign.detached.verify=function(e,t,r){checkArrayTypes(e,t,r);if(t.length!==N)throw new Error("bad signature size");if(r.length!==j)throw new Error("bad public key size");var n=new Uint8Array(N+e.length);var i=new Uint8Array(N+e.length);var s;for(s=0;s<N;s++)n[s]=t[s];for(s=0;s<e.length;s++)n[s+N]=e[s];return crypto_sign_open(i,n,n.length,r)>=0};e.sign.keyPair=function(){var e=new Uint8Array(j);var t=new Uint8Array(L);crypto_sign_keypair(e,t);return{publicKey:e,secretKey:t}};e.sign.keyPair.fromSecretKey=function(e){checkArrayTypes(e);if(e.length!==L)throw new Error("bad secret key size");var t=new Uint8Array(j);for(var r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}};e.sign.keyPair.fromSeed=function(e){checkArrayTypes(e);if(e.length!==D)throw new Error("bad seed size");var t=new Uint8Array(j);var r=new Uint8Array(L);for(var n=0;n<32;n++)r[n]=e[n];crypto_sign_keypair(t,r,true);return{publicKey:t,secretKey:r}};e.sign.publicKeyLength=j;e.sign.secretKeyLength=L;e.sign.seedLength=D;e.sign.signatureLength=N;e.hash=function(e){checkArrayTypes(e);var t=new Uint8Array(U);crypto_hash(t,e,e.length);return t};e.hash.hashLength=U;e.verify=function(e,t){checkArrayTypes(e,t);if(e.length===0||t.length===0)return false;if(e.length!==t.length)return false;return vn(e,0,t,0,e.length)===0?true:false};e.setPRNG=function(e){randombytes=e};(function(){var t=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){var n=65536;e.setPRNG((function(e,r){var i,s=new Uint8Array(r);for(i=0;i<r;i+=n){t.getRandomValues(s.subarray(i,i+Math.min(r-i,n)))}for(i=0;i<r;i++)e[i]=s[i];cleanup(s)}))}else if(true){t=r(6113);if(t&&t.randomBytes){e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];cleanup(i)}))}}})()})(true&&e.exports?e.exports:self.nacl=self.nacl||{})},50593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"MAX",{enumerable:true,get:function(){return n.default}});Object.defineProperty(t,"NIL",{enumerable:true,get:function(){return i.default}});Object.defineProperty(t,"parse",{enumerable:true,get:function(){return s.default}});Object.defineProperty(t,"stringify",{enumerable:true,get:function(){return o.default}});Object.defineProperty(t,"v1",{enumerable:true,get:function(){return a.default}});Object.defineProperty(t,"v1ToV6",{enumerable:true,get:function(){return c.default}});Object.defineProperty(t,"v3",{enumerable:true,get:function(){return u.default}});Object.defineProperty(t,"v4",{enumerable:true,get:function(){return d.default}});Object.defineProperty(t,"v5",{enumerable:true,get:function(){return p.default}});Object.defineProperty(t,"v6",{enumerable:true,get:function(){return m.default}});Object.defineProperty(t,"v6ToV1",{enumerable:true,get:function(){return y.default}});Object.defineProperty(t,"v7",{enumerable:true,get:function(){return g.default}});Object.defineProperty(t,"validate",{enumerable:true,get:function(){return b.default}});Object.defineProperty(t,"version",{enumerable:true,get:function(){return v.default}});var n=_interopRequireDefault(r(75877));var i=_interopRequireDefault(r(87276));var s=_interopRequireDefault(r(55604));var o=_interopRequireDefault(r(62911));var a=_interopRequireDefault(r(37701));var c=_interopRequireDefault(r(16329));var u=_interopRequireDefault(r(83218));var d=_interopRequireDefault(r(45526));var p=_interopRequireDefault(r(94979));var m=_interopRequireDefault(r(95795));var y=_interopRequireDefault(r(73534));var g=_interopRequireDefault(r(30553));var b=_interopRequireDefault(r(46940));var v=_interopRequireDefault(r(11272));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},75877:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=t["default"]="ffffffff-ffff-ffff-ffff-ffffffffffff"},86979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6005));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function md5(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("md5").update(e).digest()}var i=t["default"]=md5},79703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6005));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var i=t["default"]={randomUUID:n.default.randomUUID}},87276:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=t["default"]="00000000-0000-0000-0000-000000000000"},55604:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(46940));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parse(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}let t;const r=new Uint8Array(16);r[0]=(t=parseInt(e.slice(0,8),16))>>>24;r[1]=t>>>16&255;r[2]=t>>>8&255;r[3]=t&255;r[4]=(t=parseInt(e.slice(9,13),16))>>>8;r[5]=t&255;r[6]=(t=parseInt(e.slice(14,18),16))>>>8;r[7]=t&255;r[8]=(t=parseInt(e.slice(19,23),16))>>>8;r[9]=t&255;r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255;r[11]=t/4294967296&255;r[12]=t>>>24&255;r[13]=t>>>16&255;r[14]=t>>>8&255;r[15]=t&255;return r}var i=t["default"]=parse},76323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=t["default"]=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},92559:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=rng;var n=_interopRequireDefault(r(6005));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=new Uint8Array(256);let s=i.length;function rng(){if(s>i.length-16){n.default.randomFillSync(i);s=0}return i.slice(s,s+=16)}},47412:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6005));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function sha1(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("sha1").update(e).digest()}var i=t["default"]=sha1},62911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;t.unsafeStringify=unsafeStringify;var n=_interopRequireDefault(r(46940));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=[];for(let e=0;e<256;++e){i.push((e+256).toString(16).slice(1))}function unsafeStringify(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}function stringify(e,t=0){const r=unsafeStringify(e,t);if(!(0,n.default)(r)){throw TypeError("Stringified UUID is invalid")}return r}var s=t["default"]=stringify},37701:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(92559));var i=r(62911);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let s;let o;let a=0;let c=0;function v1(e,t,r){let u=t&&r||0;const d=t||new Array(16);e=e||{};let p=e.node;let m=e.clockseq;if(!e._v6){if(!p){p=s}if(m==null){m=o}}if(p==null||m==null){const t=e.random||(e.rng||n.default)();if(p==null){p=[t[0],t[1],t[2],t[3],t[4],t[5]];if(!s&&!e._v6){p[0]|=1;s=p}}if(m==null){m=(t[6]<<8|t[7])&16383;if(o===undefined&&!e._v6){o=m}}}let y=e.msecs!==undefined?e.msecs:Date.now();let g=e.nsecs!==undefined?e.nsecs:c+1;const b=y-a+(g-c)/1e4;if(b<0&&e.clockseq===undefined){m=m+1&16383}if((b<0||y>a)&&e.nsecs===undefined){g=0}if(g>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}a=y;c=g;o=m;y+=122192928e5;const v=((y&268435455)*1e4+g)%4294967296;d[u++]=v>>>24&255;d[u++]=v>>>16&255;d[u++]=v>>>8&255;d[u++]=v&255;const w=y/4294967296*1e4&268435455;d[u++]=w>>>8&255;d[u++]=w&255;d[u++]=w>>>24&15|16;d[u++]=w>>>16&255;d[u++]=m>>>8|128;d[u++]=m&255;for(let e=0;e<6;++e){d[u+e]=p[e]}return t||(0,i.unsafeStringify)(d)}var u=t["default"]=v1},16329:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=v1ToV6;var n=_interopRequireDefault(r(55604));var i=r(62911);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v1ToV6(e){const t=typeof e==="string"?(0,n.default)(e):e;const r=_v1ToV6(t);return typeof e==="string"?(0,i.unsafeStringify)(r):r}function _v1ToV6(e,t=false){return Uint8Array.of((e[6]&15)<<4|e[7]>>4&15,(e[7]&15)<<4|(e[4]&240)>>4,(e[4]&15)<<4|(e[5]&240)>>4,(e[5]&15)<<4|(e[0]&240)>>4,(e[0]&15)<<4|(e[1]&240)>>4,(e[1]&15)<<4|(e[2]&240)>>4,96|e[2]&15,e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},83218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(22407));var i=_interopRequireDefault(r(86979));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const s=(0,n.default)("v3",48,i.default);var o=t["default"]=s},22407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.URL=t.DNS=void 0;t["default"]=v35;var n=r(62911);var i=_interopRequireDefault(r(55604));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function stringToBytes(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r){t.push(e.charCodeAt(r))}return t}const s=t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";const o=t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(e,t,r){function generateUUID(e,s,o,a){var c;if(typeof e==="string"){e=stringToBytes(e)}if(typeof s==="string"){s=(0,i.default)(s)}if(((c=s)===null||c===void 0?void 0:c.length)!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let u=new Uint8Array(16+e.length);u.set(s);u.set(e,s.length);u=r(u);u[6]=u[6]&15|t;u[8]=u[8]&63|128;if(o){a=a||0;for(let e=0;e<16;++e){o[a+e]=u[e]}return o}return(0,n.unsafeStringify)(u)}try{generateUUID.name=e}catch(e){}generateUUID.DNS=s;generateUUID.URL=o;return generateUUID}},45526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(79703));var i=_interopRequireDefault(r(92559));var s=r(62911);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v4(e,t,r){if(n.default.randomUUID&&!t&&!e){return n.default.randomUUID()}e=e||{};const o=e.random||(e.rng||i.default)();o[6]=o[6]&15|64;o[8]=o[8]&63|128;if(t){r=r||0;for(let e=0;e<16;++e){t[r+e]=o[e]}return t}return(0,s.unsafeStringify)(o)}var o=t["default"]=v4},94979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(22407));var i=_interopRequireDefault(r(47412));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const s=(0,n.default)("v5",80,i.default);var o=t["default"]=s},95795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=v6;var n=r(62911);var i=_interopRequireDefault(r(37701));var s=_interopRequireDefault(r(16329));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v6(e={},t,r=0){let o=(0,i.default)({...e,_v6:true},new Uint8Array(16));o=(0,s.default)(o);if(t){for(let e=0;e<16;e++){t[r+e]=o[e]}return t}return(0,n.unsafeStringify)(o)}},73534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=v6ToV1;var n=_interopRequireDefault(r(55604));var i=r(62911);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v6ToV1(e){const t=typeof e==="string"?(0,n.default)(e):e;const r=_v6ToV1(t);return typeof e==="string"?(0,i.unsafeStringify)(r):r}function _v6ToV1(e){return Uint8Array.of((e[3]&15)<<4|e[4]>>4&15,(e[4]&15)<<4|(e[5]&240)>>4,(e[5]&15)<<4|e[6]&15,e[7],(e[1]&15)<<4|(e[2]&240)>>4,(e[2]&15)<<4|(e[3]&240)>>4,16|(e[0]&240)>>4,(e[0]&15)<<4|(e[1]&240)>>4,e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},30553:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(92559));var i=r(62911);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let s=null;let o=null;let a=0;function v7(e,t,r){e=e||{};let c=t&&r||0;const u=t||new Uint8Array(16);const d=e.random||(e.rng||n.default)();const p=e.msecs!==undefined?e.msecs:Date.now();let m=e.seq!==undefined?e.seq:null;let y=o;let g=s;if(p>a&&e.msecs===undefined){a=p;if(m!==null){y=null;g=null}}if(m!==null){if(m>2147483647){m=2147483647}y=m>>>19&4095;g=m&524287}if(y===null||g===null){y=d[6]&127;y=y<<8|d[7];g=d[8]&63;g=g<<8|d[9];g=g<<5|d[10]>>>3}if(p+1e4>a&&m===null){if(++g>524287){g=0;if(++y>4095){y=0;a++}}}else{a=p}o=y;s=g;u[c++]=a/1099511627776&255;u[c++]=a/4294967296&255;u[c++]=a/16777216&255;u[c++]=a/65536&255;u[c++]=a/256&255;u[c++]=a&255;u[c++]=y>>>4&15|112;u[c++]=y&255;u[c++]=g>>>13&63|128;u[c++]=g>>>5&255;u[c++]=g<<3&255|d[10]&7;u[c++]=d[11];u[c++]=d[12];u[c++]=d[13];u[c++]=d[14];u[c++]=d[15];return t||(0,i.unsafeStringify)(u)}var c=t["default"]=v7},46940:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(76323));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function validate(e){return typeof e==="string"&&n.default.test(e)}var i=t["default"]=validate},11272:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(46940));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function version(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}return parseInt(e.slice(14,15),16)}var i=t["default"]=version},16822:(e,t,r)=>{"use strict";
/*!
 Copyright (c) Peculiar Ventures, LLC
*/var n=r(69185);var i=r(61237);var s=r(80516);var o=r(84440);var a=r(34697);function _interopNamespaceDefault(e){var t=Object.create(null);if(e){Object.keys(e).forEach((function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:true,get:function(){return e[r]}})}}))}t.default=e;return Object.freeze(t)}var c=_interopNamespaceDefault(a);class CryptoError extends Error{}class AlgorithmError extends CryptoError{}class UnsupportedOperationError extends CryptoError{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}}class OperationError extends CryptoError{}class RequiredPropertyError extends CryptoError{constructor(e){super(`${e}: Missing required property`)}}class PemConverter{static toArrayBuffer(e){const t=e.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return n.Convert.FromBase64(t)}static toUint8Array(e){const t=this.toArrayBuffer(e);return new Uint8Array(t)}static fromBufferSource(e,t){const r=n.Convert.ToBase64(e);let i;let s=0;const o=[];while(s<r.length){i=r.slice(s,s+64);if(i.length){o.push(i)}else{break}s+=64}const a=t.toUpperCase();return`-----BEGIN ${a}-----\n${o.join("\n")}\n-----END ${a}-----`}static isPEM(e){return/-----BEGIN .+-----[A-Za-z0-9+/+=\s\n]+-----END .+-----/i.test(e)}static getTagName(e){if(!this.isPEM(e)){throw new Error("Bad parameter. Incoming data is not right PEM")}const t=/-----BEGIN (.+)-----/.exec(e);if(!t){throw new Error("Cannot get tag from PEM")}return t[1]}static hasTagName(e,t){const r=this.getTagName(e);return t.toLowerCase()===r.toLowerCase()}static isCertificate(e){return this.hasTagName(e,"certificate")}static isCertificateRequest(e){return this.hasTagName(e,"certificate request")}static isCRL(e){return this.hasTagName(e,"x509 crl")}static isPublicKey(e){return this.hasTagName(e,"public key")}}function isJWK(e){return typeof e==="object"&&"kty"in e}class ProviderCrypto{async digest(...e){this.checkDigest.apply(this,e);return this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new UnsupportedOperationError("digest")}async generateKey(...e){this.checkGenerateKey.apply(this,e);return this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r,...n){this.checkAlgorithmName(e);this.checkGenerateKeyParams(e);if(!(r&&r.length)){throw new TypeError(`Usages cannot be empty when creating a key.`)}let i;if(Array.isArray(this.usages)){i=this.usages}else{i=this.usages.privateKey.concat(this.usages.publicKey)}this.checkKeyUsages(r,i)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r,...n){throw new UnsupportedOperationError("generateKey")}async sign(...e){this.checkSign.apply(this,e);return this.onSign.apply(this,e)}checkSign(e,t,r,...n){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"sign")}async onSign(e,t,r,...n){throw new UnsupportedOperationError("sign")}async verify(...e){this.checkVerify.apply(this,e);return this.onVerify.apply(this,e)}checkVerify(e,t,r,n,...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,n,...i){throw new UnsupportedOperationError("verify")}async encrypt(...e){this.checkEncrypt.apply(this,e);return this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,n={},...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r,...n){throw new UnsupportedOperationError("encrypt")}async decrypt(...e){this.checkDecrypt.apply(this,e);return this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,n={},...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r,...n){throw new UnsupportedOperationError("decrypt")}async deriveBits(...e){this.checkDeriveBits.apply(this,e);return this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,n={},...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"deriveBits":void 0);if(r%8!==0){throw new OperationError("length: Is not multiple of 8")}}async onDeriveBits(e,t,r,...n){throw new UnsupportedOperationError("deriveBits")}async exportKey(...e){this.checkExportKey.apply(this,e);return this.onExportKey.apply(this,e)}checkExportKey(e,t,...r){this.checkKeyFormat(e);this.checkCryptoKey(t);if(!t.extractable){throw new CryptoError("key: Is not extractable")}}async onExportKey(e,t,...r){throw new UnsupportedOperationError("exportKey")}async importKey(...e){this.checkImportKey.apply(this,e);return this.onImportKey.apply(this,e)}checkImportKey(e,t,r,n,i,...s){this.checkKeyFormat(e);this.checkKeyData(e,t);this.checkAlgorithmName(r);this.checkImportParams(r);if(Array.isArray(this.usages)){this.checkKeyUsages(i,this.usages)}}async onImportKey(e,t,r,n,i,...s){throw new UnsupportedOperationError("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase()){throw new AlgorithmError("Unrecognized name")}}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(const r of e){if(t.indexOf(r)===-1){throw new TypeError("Cannot create a key using the specified key usages")}}}checkCryptoKey(e,t){this.checkAlgorithmName(e.algorithm);if(t&&e.usages.indexOf(t)===-1){throw new CryptoError(`key does not match that of operation`)}}checkRequiredProperty(e,t){if(!(t in e)){throw new RequiredPropertyError(t)}}checkHashAlgorithm(e,t){for(const r of t){if(r.toLowerCase()===e.name.toLowerCase()){return}}throw new OperationError(`hash: Must be one of ${t.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw new TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,t){if(!t){throw new TypeError("keyData: Cannot be empty on empty on key importing")}if(e==="jwk"){if(!isJWK(t)){throw new TypeError("keyData: Is not JsonWebToken")}}else if(!n.BufferSourceConverter.isBufferSource(t)){throw new TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}}prepareData(e){return n.BufferSourceConverter.toArrayBuffer(e)}}class AesProvider extends ProviderCrypto{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}switch(e.length){case 128:case 192:case 256:break;default:throw new TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class AesCbcProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-CBC";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}}}class AesCmacProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-CMAC";this.usages=["sign","verify"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new OperationError("length: Must be more than 0")}}}class AesCtrProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-CTR";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"counter");if(!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter))){throw new TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.counter.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new OperationError("length: Must be more than 0")}}}class AesEcbProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-ECB";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class AesGcmProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-GCM";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){var t;this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength<1){throw new OperationError("iv: Must have length more than 0 and less than 2^64 - 1")}(t=e.tagLength)!==null&&t!==void 0?t:e.tagLength=128;switch(e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new OperationError("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class AesKwProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-KW";this.usages=["wrapKey","unwrapKey"]}}class DesProvider extends ProviderCrypto{constructor(){super(...arguments);this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==this.ivSize){throw new TypeError(`iv: Must have length ${this.ivSize} bytes`)}}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}if(e.length!==this.keySizeBits){throw new OperationError(`algorithm.length: Must be ${this.keySizeBits}`)}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class RsaProvider extends ProviderCrypto{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=n.Convert.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");if(e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384){throw new TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class RsaSsaProvider extends RsaProvider{constructor(){super(...arguments);this.name="RSASSA-PKCS1-v1_5";this.usages={privateKey:["sign"],publicKey:["verify"]}}}class RsaPssProvider extends RsaProvider{constructor(){super(...arguments);this.name="RSA-PSS";this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){this.checkRequiredProperty(e,"saltLength");if(typeof e.saltLength!=="number"){throw new TypeError("saltLength: Is not a Number")}if(e.saltLength<0){throw new RangeError("saltLength: Must be positive number")}}}class RsaOaepProvider extends RsaProvider{constructor(){super(...arguments);this.name="RSA-OAEP";this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label))){throw new TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}}class EllipticProvider extends ProviderCrypto{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve");this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(const t of this.namedCurves){if(t.toLowerCase()===e.toLowerCase()){return}}throw new OperationError(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}class EcdsaProvider extends EllipticProvider{constructor(){super(...arguments);this.name="ECDSA";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}const u=["secret","private","public"];class CryptoKey{static create(e,t,r,n){const i=new this;i.algorithm=e;i.type=t;i.extractable=r;i.usages=n;return i}static isKeyType(e){return u.indexOf(e)!==-1}get[Symbol.toStringTag](){return"CryptoKey"}}class EcdhProvider extends EllipticProvider{constructor(){super(...arguments);this.name="ECDH";this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"public");if(!(e.public instanceof CryptoKey)){throw new TypeError("public: Is not a CryptoKey")}if(e.public.type!=="public"){throw new OperationError("public: Is not a public key")}if(e.public.algorithm.name!==this.name){throw new OperationError(`public: Is not ${this.name} key`)}}}class EcdhEsProvider extends EcdhProvider{constructor(){super(...arguments);this.name="ECDH-ES";this.namedCurves=["X25519","X448"]}}class EdDsaProvider extends EllipticProvider{constructor(){super(...arguments);this.name="EdDSA";this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["Ed25519","Ed448"]}}let d=class ObjectIdentifier{constructor(e){if(e){this.value=e}}};s.__decorate([i.AsnProp({type:i.AsnPropTypes.ObjectIdentifier})],d.prototype,"value",void 0);d=s.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],d);class AlgorithmIdentifier{constructor(e){Object.assign(this,e)}}s.__decorate([i.AsnProp({type:i.AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier.prototype,"algorithm",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Any,optional:true})],AlgorithmIdentifier.prototype,"parameters",void 0);class PrivateKeyInfo{constructor(){this.version=0;this.privateKeyAlgorithm=new AlgorithmIdentifier;this.privateKey=new ArrayBuffer(0)}}s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer})],PrivateKeyInfo.prototype,"version",void 0);s.__decorate([i.AsnProp({type:AlgorithmIdentifier})],PrivateKeyInfo.prototype,"privateKeyAlgorithm",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString})],PrivateKeyInfo.prototype,"privateKey",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Any,optional:true})],PrivateKeyInfo.prototype,"attributes",void 0);class PublicKeyInfo{constructor(){this.publicKeyAlgorithm=new AlgorithmIdentifier;this.publicKey=new ArrayBuffer(0)}}s.__decorate([i.AsnProp({type:AlgorithmIdentifier})],PublicKeyInfo.prototype,"publicKeyAlgorithm",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.BitString})],PublicKeyInfo.prototype,"publicKey",void 0);const p={fromJSON:e=>n.Convert.FromBase64Url(e),toJSON:e=>n.Convert.ToBase64Url(new Uint8Array(e))};const m={fromASN:e=>{const t=e.valueBlock.valueHex;return!new Uint8Array(t)[0]?e.valueBlock.valueHex.slice(1):e.valueBlock.valueHex},toASN:e=>{const t=new Uint8Array(e)[0]>127?n.combine(new Uint8Array([0]).buffer,e):e;return new c.Integer({valueHex:t})}};var y=Object.freeze({__proto__:null,AsnIntegerArrayBufferConverter:m,JsonBase64UrlArrayBufferConverter:p});class RsaPrivateKey{constructor(){this.version=0;this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);this.privateExponent=new ArrayBuffer(0);this.prime1=new ArrayBuffer(0);this.prime2=new ArrayBuffer(0);this.exponent1=new ArrayBuffer(0);this.exponent2=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0)}}s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerConverter})],RsaPrivateKey.prototype,"version",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"n",converter:p})],RsaPrivateKey.prototype,"modulus",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"e",converter:p})],RsaPrivateKey.prototype,"publicExponent",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"d",converter:p})],RsaPrivateKey.prototype,"privateExponent",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"p",converter:p})],RsaPrivateKey.prototype,"prime1",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"q",converter:p})],RsaPrivateKey.prototype,"prime2",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"dp",converter:p})],RsaPrivateKey.prototype,"exponent1",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"dq",converter:p})],RsaPrivateKey.prototype,"exponent2",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"qi",converter:p})],RsaPrivateKey.prototype,"coefficient",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Any,optional:true})],RsaPrivateKey.prototype,"otherPrimeInfos",void 0);class RsaPublicKey{constructor(){this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0)}}s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"n",converter:p})],RsaPublicKey.prototype,"modulus",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:m}),o.JsonProp({name:"e",converter:p})],RsaPublicKey.prototype,"publicExponent",void 0);let g=class EcPublicKey{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){let e=new Uint8Array(this.value);if(e[0]!==4){throw new CryptoError("Wrong ECPoint. Current version supports only Uncompressed (0x04) point")}e=new Uint8Array(this.value.slice(1));const t=e.length/2;const r=0;const i={x:n.Convert.ToBase64Url(e.buffer.slice(r,r+t)),y:n.Convert.ToBase64Url(e.buffer.slice(r+t,r+t+t))};return i}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}if(!("y"in e)){throw new Error("y: Missing required property")}const t=n.Convert.FromBase64Url(e.x);const r=n.Convert.FromBase64Url(e.y);const i=n.combine(new Uint8Array([4]).buffer,t,r);this.value=new Uint8Array(i).buffer;return this}};s.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString})],g.prototype,"value",void 0);g=s.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],g);class EcPrivateKey{constructor(){this.version=1;this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e)){throw new Error("d: Missing required property")}this.privateKey=n.Convert.FromBase64Url(e.d);if("x"in e){const t=new g;t.fromJSON(e);const r=i.AsnSerializer.toASN(t);if("valueHex"in r.valueBlock){this.publicKey=r.valueBlock.valueHex}}return this}toJSON(){const e={};e.d=n.Convert.ToBase64Url(this.privateKey);if(this.publicKey){Object.assign(e,new g(this.publicKey).toJSON())}return e}}s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerConverter})],EcPrivateKey.prototype,"version",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString})],EcPrivateKey.prototype,"privateKey",void 0);s.__decorate([i.AsnProp({context:0,type:i.AsnPropTypes.Any,optional:true})],EcPrivateKey.prototype,"parameters",void 0);s.__decorate([i.AsnProp({context:1,type:i.AsnPropTypes.BitString,optional:true})],EcPrivateKey.prototype,"publicKey",void 0);const b={fromASN:e=>{const t=new Uint8Array(e.valueBlock.valueHex);return t[0]===0?t.buffer.slice(1):t.buffer},toASN:e=>{const t=new Uint8Array(e);if(t[0]>127){const e=new Uint8Array(t.length+1);e.set(t,1);return new c.Integer({valueHex:e.buffer})}return new c.Integer({valueHex:e})}};var v=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:b});class EcUtils{static decodePoint(e,t){const r=n.BufferSourceConverter.toUint8Array(e);if(r.length===0||r[0]!==4){throw new Error("Only uncompressed point format supported")}const i=(r.length-1)/2;if(i!==Math.ceil(t/8)){throw new Error("Point does not match field size")}const s=r.slice(1,i+1);const o=r.slice(i+1,i+1+i);return{x:s,y:o}}static encodePoint(e,t){const r=Math.ceil(t/8);if(e.x.byteLength!==r||e.y.byteLength!==r){throw new Error("X,Y coordinates don't match point size criteria")}const i=n.BufferSourceConverter.toUint8Array(e.x);const s=n.BufferSourceConverter.toUint8Array(e.y);const o=new Uint8Array(r*2+1);o[0]=4;o.set(i,1);o.set(s,r+1);return o}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,t){const r=this.getSize(t);const i=n.BufferSourceConverter.toUint8Array(e.r);const s=n.BufferSourceConverter.toUint8Array(e.s);const o=new Uint8Array(r*2);o.set(this.padStart(i,r));o.set(this.padStart(s,r),r);return o}static decodeSignature(e,t){const r=this.getSize(t);const i=n.BufferSourceConverter.toUint8Array(e);if(i.length!==r*2){throw new Error("Incorrect size of the signature")}const s=i.slice(0,r);const o=i.slice(r);return{r:this.trimStart(s),s:this.trimStart(o)}}static trimStart(e){let t=0;while(t<e.length-1&&e[t]===0){t++}if(t===0){return e}return e.slice(t,e.length)}static padStart(e,t){if(t===e.length){return e}const r=new Uint8Array(t);r.set(e,t-e.length);return r}}class EcDsaSignature{constructor(){this.r=new ArrayBuffer(0);this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){const t=e.byteLength/2;const r=EcUtils.decodeSignature(e,t*8);const i=new EcDsaSignature;i.r=n.BufferSourceConverter.toArrayBuffer(r.r);i.s=n.BufferSourceConverter.toArrayBuffer(r.s);return i}toWebCryptoSignature(e){e!==null&&e!==void 0?e:e=Math.max(this.r.byteLength,this.s.byteLength)*8;const t=EcUtils.encodeSignature(this,e);return t.buffer}}s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:b})],EcDsaSignature.prototype,"r",void 0);s.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:b})],EcDsaSignature.prototype,"s",void 0);class OneAsymmetricKey extends PrivateKeyInfo{}s.__decorate([i.AsnProp({context:1,implicit:true,type:i.AsnPropTypes.BitString,optional:true})],OneAsymmetricKey.prototype,"publicKey",void 0);let w=class EdPrivateKey{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d){throw new Error("d: Missing required property")}this.value=n.Convert.FromBase64Url(e.d);return this}toJSON(){const e={d:n.Convert.ToBase64Url(this.value)};return e}};s.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString})],w.prototype,"value",void 0);w=s.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],w);let _=class EdPublicKey{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){const e={x:n.Convert.ToBase64Url(this.value)};return e}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}this.value=n.Convert.FromBase64Url(e.x);return this}};s.__decorate([i.AsnProp({type:i.AsnPropTypes.BitString})],_.prototype,"value",void 0);_=s.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],_);let C=class CurvePrivateKey{};s.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString}),o.JsonProp({type:o.JsonPropTypes.String,converter:p})],C.prototype,"d",void 0);C=s.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],C);const P="1.2.840.10045.3.1.7";const O="1.3.132.0";const E=`${O}.34`;const I=`${O}.35`;const k=`${O}.10`;const T="1.3.36.3.3.2.8.1.1";const x=`${T}.1`;const R=`${T}.2`;const B=`${T}.3`;const N=`${T}.4`;const j=`${T}.5`;const L=`${T}.6`;const D=`${T}.7`;const U=`${T}.8`;const F=`${T}.9`;const K=`${T}.10`;const V=`${T}.11`;const H=`${T}.12`;const q=`${T}.13`;const W=`${T}.14`;const z="1.3.101.110";const $="1.3.101.111";const G="1.3.101.112";const J="1.3.101.113";var X=Object.freeze({__proto__:null,AlgorithmIdentifier:AlgorithmIdentifier,get CurvePrivateKey(){return C},EcDsaSignature:EcDsaSignature,EcPrivateKey:EcPrivateKey,get EcPublicKey(){return g},get EdPrivateKey(){return w},get EdPublicKey(){return _},get ObjectIdentifier(){return d},OneAsymmetricKey:OneAsymmetricKey,PrivateKeyInfo:PrivateKeyInfo,PublicKeyInfo:PublicKeyInfo,RsaPrivateKey:RsaPrivateKey,RsaPublicKey:RsaPublicKey,converters:v,idBrainpoolP160r1:x,idBrainpoolP160t1:R,idBrainpoolP192r1:B,idBrainpoolP192t1:N,idBrainpoolP224r1:j,idBrainpoolP224t1:L,idBrainpoolP256r1:D,idBrainpoolP256t1:U,idBrainpoolP320r1:F,idBrainpoolP320t1:K,idBrainpoolP384r1:V,idBrainpoolP384t1:H,idBrainpoolP512r1:q,idBrainpoolP512t1:W,idEd25519:G,idEd448:J,idEllipticCurve:O,idSecp256k1:k,idSecp256r1:P,idSecp384r1:E,idSecp521r1:I,idVersionOne:T,idX25519:z,idX448:$});class EcCurves{constructor(){}static register(e){const t=new d;t.value=e.id;const r=i.AsnConvert.serialize(t);this.items.push({...e,raw:r});this.names.push(e.name)}static find(e){e=e.toUpperCase();for(const t of this.items){if(t.name.toUpperCase()===e||t.id.toUpperCase()===e){return t}}return null}static get(e){const t=this.find(e);if(!t){throw new Error(`Unsupported EC named curve '${e}'`)}return t}}EcCurves.items=[];EcCurves.names=[];EcCurves.register({name:"P-256",id:P,size:256});EcCurves.register({name:"P-384",id:E,size:384});EcCurves.register({name:"P-521",id:I,size:521});EcCurves.register({name:"K-256",id:k,size:256});EcCurves.register({name:"brainpoolP160r1",id:x,size:160});EcCurves.register({name:"brainpoolP160t1",id:R,size:160});EcCurves.register({name:"brainpoolP192r1",id:B,size:192});EcCurves.register({name:"brainpoolP192t1",id:N,size:192});EcCurves.register({name:"brainpoolP224r1",id:j,size:224});EcCurves.register({name:"brainpoolP224t1",id:L,size:224});EcCurves.register({name:"brainpoolP256r1",id:D,size:256});EcCurves.register({name:"brainpoolP256t1",id:U,size:256});EcCurves.register({name:"brainpoolP320r1",id:F,size:320});EcCurves.register({name:"brainpoolP320t1",id:K,size:320});EcCurves.register({name:"brainpoolP384r1",id:V,size:384});EcCurves.register({name:"brainpoolP384t1",id:H,size:384});EcCurves.register({name:"brainpoolP512r1",id:q,size:512});EcCurves.register({name:"brainpoolP512t1",id:W,size:512});class X25519Provider extends ProviderCrypto{constructor(){super(...arguments);this.name="X25519";this.usages={privateKey:["deriveKey","deriveBits"],publicKey:[]}}checkAlgorithmParams(e){this.checkRequiredProperty(e,"public")}}class Ed25519Provider extends ProviderCrypto{constructor(){super(...arguments);this.name="Ed25519";this.usages={privateKey:["sign"],publicKey:["verify"]}}}class HmacProvider extends ProviderCrypto{constructor(){super(...arguments);this.name="HMAC";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw new Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);if("length"in e){if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new RangeError("length: Number is out of range")}}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class Pbkdf2Provider extends ProviderCrypto{constructor(){super(...arguments);this.name="PBKDF2";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"salt");if(!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt))){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}this.checkRequiredProperty(e,"iterations");if(typeof e.iterations!=="number"){throw new TypeError("iterations: Is not a Number")}if(e.iterations<1){throw new TypeError("iterations: Is less than 1")}}checkImportKey(e,t,r,n,i,...s){super.checkImportKey(e,t,r,n,i,...s);if(n){throw new SyntaxError("extractable: Must be 'false'")}}}class HkdfProvider extends ProviderCrypto{constructor(){super(...arguments);this.name="HKDF";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"salt");if(!n.BufferSourceConverter.isBufferSource(e.salt)){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}this.checkRequiredProperty(e,"info");if(!n.BufferSourceConverter.isBufferSource(e.info)){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}checkImportKey(e,t,r,n,i,...s){super.checkImportKey(e,t,r,n,i,...s);if(n){throw new SyntaxError("extractable: Must be 'false'")}}}class ShakeProvider extends ProviderCrypto{constructor(){super(...arguments);this.usages=[];this.defaultLength=0}digest(...e){e[0]={length:this.defaultLength,...e[0]};return super.digest.apply(this,e)}checkDigest(e,t){super.checkDigest(e,t);const r=e.length||0;if(typeof r!=="number"){throw new TypeError("length: Is not a Number")}if(r<0){throw new TypeError("length: Is negative")}}}class Shake128Provider extends ShakeProvider{constructor(){super(...arguments);this.name="shake128";this.defaultLength=16}}class Shake256Provider extends ShakeProvider{constructor(){super(...arguments);this.name="shake256";this.defaultLength=32}}class Crypto{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){const e=this.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64;e[8]=e[8]&63|128;const t=n.Convert.ToHex(e).toLowerCase();return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16,20)}-${t.substring(20)}`}}class ProviderStorage{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){const t=this.get(e.toLowerCase());if(t){delete this.items[e]}return t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){const e=[];for(const t in this.items){const r=this.items[t];e.push(r.name)}return e.sort()}}const Y={jwk:["private","public","secret"],pkcs8:["private"],spki:["public"],raw:["secret","public"]};const Q=["pkcs8","spki","raw"];class SubtleCrypto{constructor(){this.providers=new ProviderStorage}static isHashedAlgorithm(e){return e&&typeof e==="object"&&"name"in e&&"hash"in e?true:false}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");const[t,r,...i]=e;const s=this.prepareAlgorithm(t);const o=n.BufferSourceConverter.toArrayBuffer(r);const a=this.getProvider(s.name);const c=await a.digest(s,o,...i);return c}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");const[t,r,n,...i]=e;const s=this.prepareAlgorithm(t);const o=this.getProvider(s.name);const a=await o.generateKey({...s,name:o.name},r,n,...i);return a}async sign(...e){this.checkRequiredArguments(e,3,"sign");const[t,r,i,...s]=e;this.checkCryptoKey(r);const o=this.prepareAlgorithm(t);const a=n.BufferSourceConverter.toArrayBuffer(i);const c=this.getProvider(o.name);const u=await c.sign({...o,name:c.name},r,a,...s);return u}async verify(...e){this.checkRequiredArguments(e,4,"verify");const[t,r,i,s,...o]=e;this.checkCryptoKey(r);const a=this.prepareAlgorithm(t);const c=n.BufferSourceConverter.toArrayBuffer(s);const u=n.BufferSourceConverter.toArrayBuffer(i);const d=this.getProvider(a.name);const p=await d.verify({...a,name:d.name},r,u,c,...o);return p}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");const[t,r,i,...s]=e;this.checkCryptoKey(r);const o=this.prepareAlgorithm(t);const a=n.BufferSourceConverter.toArrayBuffer(i);const c=this.getProvider(o.name);const u=await c.encrypt({...o,name:c.name},r,a,{keyUsage:true},...s);return u}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");const[t,r,i,...s]=e;this.checkCryptoKey(r);const o=this.prepareAlgorithm(t);const a=n.BufferSourceConverter.toArrayBuffer(i);const c=this.getProvider(o.name);const u=await c.decrypt({...o,name:c.name},r,a,{keyUsage:true},...s);return u}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");const[t,r,n,...i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const o=this.getProvider(s.name);const a=await o.deriveBits({...s,name:o.name},r,n,{keyUsage:true},...i);return a}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");const[t,r,n,i,s,...o]=e;const a=this.prepareAlgorithm(n);const c=this.getProvider(a.name);c.checkDerivedKeyParams(a);const u=this.prepareAlgorithm(t);const d=this.getProvider(u.name);d.checkCryptoKey(r,"deriveKey");const p=await d.deriveBits({...u,name:d.name},r,n.length||512,{keyUsage:false},...o);return this.importKey("raw",p,n,i,s,...o)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");const[t,r,...n]=e;this.checkCryptoKey(r);if(!Y[t]){throw new TypeError("Invalid keyFormat argument")}if(!Y[t].includes(r.type)){throw new DOMException("The key is not of the expected type")}const i=this.getProvider(r.algorithm.name);const s=await i.exportKey(t,r,...n);return s}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");const[t,r,i,s,o,...a]=e;const c=this.prepareAlgorithm(i);const u=this.getProvider(c.name);if(t==="jwk"){if(typeof r!=="object"||!r.kty){throw new TypeError("Key data must be an object for JWK import")}}else if(Q.includes(t)){if(!n.BufferSourceConverter.isBufferSource(r)){throw new TypeError("Key data must be a BufferSource for non-JWK formats")}}else{throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView or JsonWebKey)'")}return u.importKey(t,r,{...c,name:u.name},s,o,...a)}async wrapKey(e,t,r,i,...s){let o=await this.exportKey(e,t,...s);if(e==="jwk"){const e=JSON.stringify(o);o=n.Convert.FromUtf8String(e)}const a=this.prepareAlgorithm(i);const c=n.BufferSourceConverter.toArrayBuffer(o);const u=this.getProvider(a.name);return u.encrypt({...a,name:u.name},r,c,{keyUsage:false},...s)}async unwrapKey(e,t,r,i,s,o,a,...c){const u=this.prepareAlgorithm(i);const d=n.BufferSourceConverter.toArrayBuffer(t);const p=this.getProvider(u.name);let m=await p.decrypt({...u,name:p.name},r,d,{keyUsage:false},...c);if(e==="jwk"){try{m=JSON.parse(n.Convert.ToUtf8String(m))}catch(e){const t=new TypeError("wrappedKey: Is not a JSON");t.internal=e;throw t}}return this.importKey(e,m,s,o,a,...c)}checkRequiredArguments(e,t,r){if(e.length<t){throw new TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}}prepareAlgorithm(e){if(typeof e==="string"){return{name:e}}if(SubtleCrypto.isHashedAlgorithm(e)){const t={...e};t.hash=this.prepareAlgorithm(e.hash);return t}return{...e}}getProvider(e){const t=this.providers.get(e);if(!t){throw new AlgorithmError("Unrecognized name")}return t}checkCryptoKey(e){if(!(e instanceof CryptoKey)){throw new TypeError(`Key is not of type 'CryptoKey'`)}}}var ee=Object.freeze({__proto__:null,converters:y});const te=["crv","e","k","kty","n","x","y"];class JwkUtils{static async thumbprint(e,t,r){const i=this.format(t,true);return r.subtle.digest(e,n.Convert.FromBinary(JSON.stringify(i)))}static format(e,t=false){let r=Object.entries(e);if(t){r=r.filter((e=>te.includes(e[0])))}r=r.sort((([e],[t])=>e>t?1:e<t?-1:0));return Object.fromEntries(r)}}Object.defineProperty(t,"BufferSourceConverter",{enumerable:true,get:function(){return n.BufferSourceConverter}});t.AesCbcProvider=AesCbcProvider;t.AesCmacProvider=AesCmacProvider;t.AesCtrProvider=AesCtrProvider;t.AesEcbProvider=AesEcbProvider;t.AesGcmProvider=AesGcmProvider;t.AesKwProvider=AesKwProvider;t.AesProvider=AesProvider;t.AlgorithmError=AlgorithmError;t.Crypto=Crypto;t.CryptoError=CryptoError;t.CryptoKey=CryptoKey;t.DesProvider=DesProvider;t.EcCurves=EcCurves;t.EcUtils=EcUtils;t.EcdhEsProvider=EcdhEsProvider;t.EcdhProvider=EcdhProvider;t.EcdsaProvider=EcdsaProvider;t.Ed25519Provider=Ed25519Provider;t.EdDsaProvider=EdDsaProvider;t.EllipticProvider=EllipticProvider;t.HkdfProvider=HkdfProvider;t.HmacProvider=HmacProvider;t.JwkUtils=JwkUtils;t.OperationError=OperationError;t.Pbkdf2Provider=Pbkdf2Provider;t.PemConverter=PemConverter;t.ProviderCrypto=ProviderCrypto;t.ProviderStorage=ProviderStorage;t.RequiredPropertyError=RequiredPropertyError;t.RsaOaepProvider=RsaOaepProvider;t.RsaProvider=RsaProvider;t.RsaPssProvider=RsaPssProvider;t.RsaSsaProvider=RsaSsaProvider;t.Shake128Provider=Shake128Provider;t.Shake256Provider=Shake256Provider;t.ShakeProvider=ShakeProvider;t.SubtleCrypto=SubtleCrypto;t.UnsupportedOperationError=UnsupportedOperationError;t.X25519Provider=X25519Provider;t.asn1=X;t.isJWK=isJWK;t.json=ee},70761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BitStream=t.buffer2ArrayBuffer=t.dumpBuffer=t.BufferChain=t.bufferReader=t.bufferWriterLE=t.createBufferWriter=t.bufferWriter=t.paddingBits=t.paddingByte=t.getBit=t.BitWriter2=t.BitWriter=t.bufferArrayXor=t.bufferXor=t.random32=t.random16=void 0;const n=r(6113);const i=r(48775);function random16(){return i.jspack.Unpack("!H",(0,n.randomBytes)(2))[0]}t.random16=random16;function random32(){return i.jspack.Unpack("!L",(0,n.randomBytes)(4))[0]}t.random32=random32;function bufferXor(e,t){if(e.length!==t.length){throw new TypeError("[webrtc-stun] You can not XOR buffers which length are different")}const r=e.length;const n=Buffer.allocUnsafe(r);for(let i=0;i<r;i++){n[i]=e[i]^t[i]}return n}t.bufferXor=bufferXor;function bufferArrayXor(e){const t=[...e].sort(((e,t)=>e.length-t.length)).reverse()[0].length;const r=Buffer.allocUnsafe(t);for(let n=0;n<t;n++){r[n]=0;e.forEach((e=>{r[n]^=e[n]??0}))}return r}t.bufferArrayXor=bufferArrayXor;class BitWriter{constructor(e){Object.defineProperty(this,"bitLength",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"value",{enumerable:true,configurable:true,writable:true,value:0})}set(e,t,r){r&=(1<<e)-1;this.value|=r<<this.bitLength-e-t;return this}get buffer(){const e=Math.ceil(this.bitLength/8);const t=Buffer.alloc(e);t.writeUIntBE(this.value,0,e);return t}}t.BitWriter=BitWriter;class BitWriter2{constructor(e){Object.defineProperty(this,"bitLength",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"_value",{enumerable:true,configurable:true,writable:true,value:0n});Object.defineProperty(this,"offset",{enumerable:true,configurable:true,writable:true,value:0n});if(e>32){throw new Error}}set(e,t=1){let r=BigInt(e);const n=BigInt(t);r&=(1n<<n)-1n;this._value|=r<<BigInt(this.bitLength)-n-this.offset;this.offset+=n;return this}get value(){return Number(this._value)}get buffer(){const e=Math.ceil(this.bitLength/8);const t=Buffer.alloc(e);t.writeUIntBE(this.value,0,e);return t}}t.BitWriter2=BitWriter2;function getBit(e,t,r=1){let n=e.toString(2).split("");n=[...Array(8-n.length).fill("0"),...n];const i=n.slice(t,t+r).join("");const s=parseInt(i,2);return s}t.getBit=getBit;function paddingByte(e){const t=e.toString(2).split("");return[...[...Array(8-t.length)].map((()=>"0")),...t].join("")}t.paddingByte=paddingByte;function paddingBits(e,t){const r=e.toString(2);return[...[...Array(t-r.length)].map((()=>"0")),...r].join("")}t.paddingBits=paddingBits;function bufferWriter(e,t){return createBufferWriter(e)(t)}t.bufferWriter=bufferWriter;function createBufferWriter(e,t){const r=e.reduce(((e,t)=>e+t),0);const n=t?Buffer.alloc(r):undefined;return t=>{const i=n||Buffer.alloc(r);let s=0;t.forEach(((t,r)=>{const n=e[r];if(n===8)i.writeBigUInt64BE(t,s);else i.writeUIntBE(t,s,n);s+=n}));return i}}t.createBufferWriter=createBufferWriter;function bufferWriterLE(e,t){const r=e.reduce(((e,t)=>e+t),0);const n=Buffer.alloc(r);let i=0;t.forEach(((t,r)=>{const s=e[r];if(s===8)n.writeBigUInt64LE(t,i);else n.writeUIntLE(t,i,s);i+=s}));return n}t.bufferWriterLE=bufferWriterLE;function bufferReader(e,t){let r=0;return t.map((t=>{let n;if(t===8){n=e.readBigUInt64BE(r)}else{n=e.readUIntBE(r,t)}r+=t;return n}))}t.bufferReader=bufferReader;class BufferChain{constructor(e){Object.defineProperty(this,"buffer",{enumerable:true,configurable:true,writable:true,value:void 0});this.buffer=Buffer.alloc(e)}writeInt16BE(e,t){this.buffer.writeInt16BE(e,t);return this}writeUInt8(e,t){this.buffer.writeUInt8(e,t);return this}}t.BufferChain=BufferChain;const dumpBuffer=e=>"0x"+e.toString("hex").replace(/(.)(.)/g,"$1$2 ").split(" ").filter((e=>e!=undefined&&e.length>0)).join(",0x");t.dumpBuffer=dumpBuffer;function buffer2ArrayBuffer(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}t.buffer2ArrayBuffer=buffer2ArrayBuffer;class BitStream{constructor(e){Object.defineProperty(this,"uint8Array",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"position",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"bitsPending",{enumerable:true,configurable:true,writable:true,value:0})}writeBits(e,t){if(e==0){return this}t&=4294967295>>>32-e;let r;if(this.bitsPending>0){if(this.bitsPending>e){this.uint8Array[this.position-1]|=t<<this.bitsPending-e;r=e;this.bitsPending-=e}else if(this.bitsPending==e){this.uint8Array[this.position-1]|=t;r=e;this.bitsPending=0}else{this.uint8Array[this.position-1]|=t>>e-this.bitsPending;r=this.bitsPending;this.bitsPending=0}}else{r=Math.min(8,e);this.bitsPending=8-r;this.uint8Array[this.position++]=t>>e-r<<this.bitsPending}e-=r;if(e>0){this.writeBits(e,t)}return this}readBits(e,t){if(typeof t=="undefined"){t=0}if(e==0){return t}let r;let n;if(this.bitsPending>0){const t=this.uint8Array[this.position-1]&255>>8-this.bitsPending;n=Math.min(this.bitsPending,e);this.bitsPending-=n;r=t>>this.bitsPending}else{n=Math.min(8,e);this.bitsPending=8-n;r=this.uint8Array[this.position++]>>this.bitsPending}e-=n;t=t<<n|r;return e>0?this.readBits(e,t):t}seekTo(e){this.position=e/8|0;this.bitsPending=e%8;if(this.bitsPending>0){this.bitsPending=8-this.bitsPending;this.position++}}}t.BitStream=BitStream},35437:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(70761),t);i(r(97448),t);i(r(547),t);i(r(28221),t);i(r(69681),t);i(r(17698),t)},17698:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WeriftError=void 0;class WeriftError extends Error{constructor(e){super(e.message);Object.defineProperty(this,"message",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"payload",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"path",{enumerable:true,configurable:true,writable:true,value:void 0})}toJSON(){return{message:this.message,payload:JSON.parse(JSON.stringify(this.payload)),path:this.path}}}t.WeriftError=WeriftError},28221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.findPort=t.randomPorts=t.randomPort=t.interfaceAddress=void 0;const n=r(71891);const interfaceAddress=(e,t)=>t?t[e]:undefined;t.interfaceAddress=interfaceAddress;async function randomPort(e="udp4",r){const i=(0,n.createSocket)(e);setImmediate((()=>i.bind({port:0,address:(0,t.interfaceAddress)(e,r)})));await new Promise((e=>{i.once("error",e);i.once("listening",e)}));const s=i.address()?.port;await new Promise((e=>i.close((()=>e()))));return s}t.randomPort=randomPort;async function randomPorts(e,t="udp4",r){return Promise.all([...Array(e)].map((()=>randomPort(t,r))))}t.randomPorts=randomPorts;async function findPort(e,r,i="udp4",s){let o;for(let a=e;a<=r;a++){const c=(0,n.createSocket)(i);setImmediate((()=>c.bind({port:a,address:(0,t.interfaceAddress)(i,s)})));const u=await new Promise((e=>{c.once("error",(t=>e(t)));c.once("listening",(()=>e()))}));if(u){await new Promise((e=>c.close((()=>e()))));continue}o=c.address()?.port;await new Promise((e=>c.close((()=>e()))));if(e<=o&&o<=r){break}}if(!o)throw new Error("port not found");return o}t.findPort=findPort},97448:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.int=t.uint32Gte=t.uint32Gt=t.uint16Gte=t.uint16Gt=t.uint24=t.uint32Add=t.uint16Add=t.uint8Add=void 0;function uint8Add(e,t){return e+t&255}t.uint8Add=uint8Add;function uint16Add(e,t){return e+t&65535}t.uint16Add=uint16Add;function uint32Add(e,t){return Number(BigInt(e)+BigInt(t)&0xffffffffn)}t.uint32Add=uint32Add;function uint24(e){return e&16777215}t.uint24=uint24;function uint16Gt(e,t){const r=32768;return e<t&&t-e>r||e>t&&e-t<r}t.uint16Gt=uint16Gt;function uint16Gte(e,t){return e===t||uint16Gt(e,t)}t.uint16Gte=uint16Gte;function uint32Gt(e,t){const r=2147483648;return e<t&&t-e>r||e>t&&e-t<r}t.uint32Gt=uint32Gt;function uint32Gte(e,t){return e===t||uint32Gt(e,t)}t.uint32Gte=uint32Gte;const int=e=>parseInt(e,10);t.int=int},547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PromiseQueue=void 0;class PromiseQueue{constructor(){Object.defineProperty(this,"queue",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"running",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"push",{enumerable:true,configurable:true,writable:true,value:e=>new Promise(((t,r)=>{this.queue.push({promise:e,done:t,failed:r});if(!this.running){this.run()}}))})}async run(){const e=this.queue.shift();if(e){this.running=true;try{const t=await e.promise();e.done(t)}catch(t){e.failed(t)}this.run()}else{this.running=false}}cancel(){this.queue=[]}}t.PromiseQueue=PromiseQueue},69681:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},47252:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.signatures=t.certificateTypes=t.SignatureScheme=t.CurveType=t.NamedCurveAlgorithmList=t.NamedCurveAlgorithm=t.CipherSuiteList=t.CipherSuite=t.HashAlgorithm=t.SignatureAlgorithm=void 0;t.SignatureAlgorithm={rsa_1:1,ecdsa_3:3};t.HashAlgorithm={sha256_4:4};t.CipherSuite={TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256_49195:49195,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256_49199:49199};t.CipherSuiteList=Object.values(t.CipherSuite);t.NamedCurveAlgorithm={x25519_29:29,secp256r1_23:23};t.NamedCurveAlgorithmList=Object.values(t.NamedCurveAlgorithm);t.CurveType={named_curve_3:3};t.SignatureScheme={rsa_pkcs1_sha256:1025,ecdsa_secp256r1_sha256:1027};t.certificateTypes=[1,64];t.signatures=[{hash:t.HashAlgorithm.sha256_4,signature:t.SignatureAlgorithm.rsa_1},{hash:t.HashAlgorithm.sha256_4,signature:t.SignatureAlgorithm.ecdsa_3}]},73351:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.createAEADCipher=t.createCipher=void 0;const i=r(96095);const s=n(r(13285));const o={TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256:49195,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384:49196,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256:49199,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384:49200,TLS_RSA_WITH_AES_128_GCM_SHA256:156,TLS_RSA_WITH_AES_256_GCM_SHA384:157,TLS_PSK_WITH_AES_128_GCM_SHA256:168,TLS_PSK_WITH_AES_256_GCM_SHA384:169,TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256:53249,TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384:53250,TLS_ECDHE_PSK_WITH_CHACHA20_POLY1305_SHA256:52396,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256:52393,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256:52392,TLS_PSK_WITH_CHACHA20_POLY1305_SHA256:52395};const a={K_LEN:16,N_MIN:12,N_MAX:12,P_MAX:2**36-31,A_MAX:2**53-1,C_MAX:2**36-15};const c={K_LEN:32,N_MIN:12,N_MAX:12,P_MAX:2**36-31,A_MAX:2**53-1,C_MAX:2**36-15};const u=(0,i.createRSAKeyExchange)();const d=(0,i.createECDHERSAKeyExchange)();const p=(0,i.createECDHEECDSAKeyExchange)();const m=(0,i.createPSKKeyExchange)();const y=(0,i.createECDHEPSKKeyExchange)();function createCipher(e){switch(e){case o.TLS_RSA_WITH_AES_128_GCM_SHA256:return createAEADCipher(o.TLS_RSA_WITH_AES_128_GCM_SHA256,"TLS_RSA_WITH_AES_128_GCM_SHA256","aes-128-gcm",u,a);case o.TLS_RSA_WITH_AES_256_GCM_SHA384:return createAEADCipher(o.TLS_RSA_WITH_AES_256_GCM_SHA384,"TLS_RSA_WITH_AES_256_GCM_SHA384","aes-256-gcm",u,c,"sha384");case o.TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256:return createAEADCipher(o.TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256","aes-128-gcm",d,a);case o.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384:return createAEADCipher(o.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384","aes-256-gcm",d,c,"sha384");case o.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256:return createAEADCipher(o.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256","aes-128-gcm",p,a);case o.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384:return createAEADCipher(o.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384","aes-256-gcm",p,c,"sha384");case o.TLS_PSK_WITH_AES_128_GCM_SHA256:return createAEADCipher(o.TLS_PSK_WITH_AES_128_GCM_SHA256,"TLS_PSK_WITH_AES_128_GCM_SHA256","aes-128-gcm",m,a,"sha256");case o.TLS_PSK_WITH_AES_256_GCM_SHA384:return createAEADCipher(o.TLS_PSK_WITH_AES_256_GCM_SHA384,"TLS_PSK_WITH_AES_256_GCM_SHA384","aes-256-gcm",m,c,"sha384");case o.TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256:return createAEADCipher(o.TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256,"TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256","aes-128-gcm",y,a,"sha256");case o.TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384:return createAEADCipher(o.TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384,"TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384","aes-256-gcm",y,c,"sha384");default:break}return null}t.createCipher=createCipher;function createAEADCipher(e,t,r,n,i,o="sha256"){const a=new s.default;a.id=e;a.name=t;a.blockAlgorithm=r;a.kx=n;a.hashAlgorithm=o;a.keyLength=i.K_LEN;a.nonceLength=i.N_MAX;a.nonceImplicitLength=4;a.nonceExplicitLength=8;a.ivLength=a.nonceImplicitLength;a.authTagLength=16;return a}t.createAEADCipher=createAEADCipher},40958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.p256PreMasterSecret=t.p256Keypair=void 0;const n=r(37527);const p256Keypair=()=>{const e=n.p256.utils.randomPrivateKey();const t=n.p256.getPublicKey(e,false);const r=Buffer.from(e);const i=Buffer.from(t);return{privateKey:r,publicKey:i}};t.p256Keypair=p256Keypair;const p256PreMasterSecret=({publicKey:e,privateKey:t})=>{const r=n.p256.getSharedSecret(t,e);const i=Buffer.from(r).subarray(1);return i};t.p256PreMasterSecret=p256PreMasterSecret},96095:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createECDHEPSKKeyExchange=t.createPSKKeyExchange=t.createNULLKeyExchange=t.createECDHEECDSAKeyExchange=t.createECDHERSAKeyExchange=t.createRSAKeyExchange=t.KeyExchange=void 0;const r={NULL:0,ECDHE:1};const n={NULL:0,RSA:1,ECDSA:2,PSK:3};const i={NULL:0,RSA:1,ECDHE_RSA:2,ECDHE_ECDSA:3,PSK:4,ECDHE_PSK:5};class KeyExchange{constructor(){Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"signType",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"keyType",{enumerable:true,configurable:true,writable:true,value:void 0})}toString(){return this.name}}t.KeyExchange=KeyExchange;function createRSAKeyExchange(){const e=new KeyExchange;e.id=i.RSA;e.name="RSA";e.keyType=n.RSA;return e}t.createRSAKeyExchange=createRSAKeyExchange;function createECDHERSAKeyExchange(){const e=new KeyExchange;e.id=i.ECDHE_RSA;e.name="ECDHE_RSA";e.signType=r.ECDHE;e.keyType=n.RSA;return e}t.createECDHERSAKeyExchange=createECDHERSAKeyExchange;function createECDHEECDSAKeyExchange(){const e=new KeyExchange;e.id=i.ECDHE_ECDSA;e.name="ECDHE_ECDSA";e.signType=r.ECDHE;e.keyType=n.ECDSA;return e}t.createECDHEECDSAKeyExchange=createECDHEECDSAKeyExchange;function createNULLKeyExchange(){const e=new KeyExchange;e.id=i.NULL;e.name="NULL";e.signType=r.NULL;e.keyType=n.NULL;return e}t.createNULLKeyExchange=createNULLKeyExchange;function createPSKKeyExchange(){const e=new KeyExchange;e.id=i.PSK;e.name="PSK";e.signType=r.NULL;e.keyType=n.PSK;return e}t.createPSKKeyExchange=createPSKKeyExchange;function createECDHEPSKKeyExchange(){const e=new KeyExchange;e.id=i.ECDHE_PSK;e.name="ECDHE_PSK";e.signType=r.ECDHE;e.keyType=n.PSK;return e}t.createECDHEPSKKeyExchange=createECDHEPSKKeyExchange},98914:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.generateKeyPair=void 0;const i=n(r(77492));const s=r(47252);const o=r(40958);function generateKeyPair(e){switch(e){case s.NamedCurveAlgorithm.secp256r1_23:{const{privateKey:t,publicKey:r}=(0,o.p256Keypair)();return{curve:e,privateKey:t,publicKey:r}}case s.NamedCurveAlgorithm.x25519_29:{const t=i.default.box.keyPair();return{curve:e,privateKey:Buffer.from(t.secretKey.buffer),publicKey:Buffer.from(t.publicKey.buffer)}}default:throw new Error}}t.generateKeyPair=generateKeyPair},21798:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.prfEncryptionKeys=t.prfVerifyDataServer=t.prfVerifyDataClient=t.prfVerifyData=t.hash=t.exportKeyingMaterial=t.prfExtendedMasterSecret=t.prfMasterSecret=t.prfPHash=t.hmac=t.prfPreMasterSecret=void 0;const i=r(6113);const s=r(39055);const o=n(r(77492));const a=r(47252);const c=r(40958);function prfPreMasterSecret(e,t,r){switch(r){case a.NamedCurveAlgorithm.secp256r1_23:return(0,c.p256PreMasterSecret)({publicKey:e,privateKey:t});case a.NamedCurveAlgorithm.x25519_29:return Buffer.from(o.default.scalarMult(t,e));default:throw new Error}}t.prfPreMasterSecret=prfPreMasterSecret;function hmac(e,t,r){const n=(0,i.createHmac)(e,t);n.update(r);return n.digest()}t.hmac=hmac;function prfPHash(e,t,r,n="sha256"){const i=r;const s=[];let o=t;do{o=hmac(n,e,o);const i=hmac(n,e,Buffer.concat([o,t]));s.push(i);r-=i.length}while(r>0);return Buffer.concat(s,i)}t.prfPHash=prfPHash;function prfMasterSecret(e,t,r){const n=Buffer.concat([Buffer.from("master secret"),t,r]);return prfPHash(e,n,48)}t.prfMasterSecret=prfMasterSecret;function prfExtendedMasterSecret(e,t){const r=hash("sha256",t);const n="extended master secret";return prfPHash(e,Buffer.concat([Buffer.from(n),r]),48)}t.prfExtendedMasterSecret=prfExtendedMasterSecret;function exportKeyingMaterial(e,t,r,n,i,s){const o=s?n:i;const a=s?i:n;const c=Buffer.concat([Buffer.from(e),o,a]);return prfPHash(r,c,t)}t.exportKeyingMaterial=exportKeyingMaterial;function hash(e,t){return(0,i.createHash)(e).update(t).digest()}t.hash=hash;function prfVerifyData(e,t,r,n=12){const i=hash("sha256",t);return prfPHash(e,Buffer.concat([Buffer.from(r),i]),n)}t.prfVerifyData=prfVerifyData;function prfVerifyDataClient(e,t){return prfVerifyData(e,t,"client finished")}t.prfVerifyDataClient=prfVerifyDataClient;function prfVerifyDataServer(e,t){return prfVerifyData(e,t,"server finished")}t.prfVerifyDataServer=prfVerifyDataServer;function prfEncryptionKeys(e,t,r,n,i,o,a="sha256"){const c=n*2+i*2;const u=e;const d=Buffer.concat([r,t]);const p=prfPHash(u,Buffer.concat([Buffer.from("key expansion"),d]),c,a);const m=(0,s.createDecode)(p);const y=m.readBuffer(n);const g=m.readBuffer(n);const b=m.readBuffer(i);const v=m.readBuffer(i);const w=Buffer.alloc(o,0);const _=Buffer.alloc(o,0);b.copy(w,0);v.copy(_,0);return{clientWriteKey:y,serverWriteKey:g,clientNonce:w,serverNonce:_}}t.prfEncryptionKeys=prfEncryptionKeys},67004:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SessionType=void 0;t.SessionType={CLIENT:1,SERVER:2};class AbstractCipher{constructor(){Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"hashAlgorithm",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"verifyDataLength",{enumerable:true,configurable:true,writable:true,value:12});Object.defineProperty(this,"blockAlgorithm",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"kx",{enumerable:true,configurable:true,writable:true,value:void 0})}init(...e){throw new Error("not implemented")}encrypt(...e){throw new Error("not implemented")}decrypt(...e){throw new Error("not implemented")}toString(){return this.name}}t["default"]=AbstractCipher},13285:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const a=s(r(6113));const c=o(r(69565));const u=r(39055);const d=r(62001);const p=r(21798);const m=s(r(67004));const{uint8:y,uint16be:g,uint48be:b}=u.types;const v=y;const w=g;const _={epoch:g,sequence:b,type:v,version:w,length:g};const C=(0,c.default)("werift-dtls : packages/dtls/src/cipher/suites/aead.ts : err");class AEADCipher extends m.default{constructor(){super();Object.defineProperty(this,"keyLength",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"nonceLength",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"ivLength",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"authTagLength",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"nonceImplicitLength",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"nonceExplicitLength",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"clientWriteKey",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"serverWriteKey",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"clientNonce",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"serverNonce",{enumerable:true,configurable:true,writable:true,value:void 0})}get summary(){return(0,d.getObjectSummary)(this)}init(e,t,r){const n=(0,p.prfEncryptionKeys)(e,r,t,this.keyLength,this.ivLength,this.nonceLength,this.hashAlgorithm);this.clientWriteKey=n.clientWriteKey;this.serverWriteKey=n.serverWriteKey;this.clientNonce=n.clientNonce;this.serverNonce=n.serverNonce}encrypt(e,t,r){const n=e===m.SessionType.CLIENT;const i=n?this.clientNonce:this.serverNonce;const s=n?this.clientWriteKey:this.serverWriteKey;if(!i||!s)throw new Error;i.writeUInt16BE(r.epoch,this.nonceImplicitLength);i.writeUIntBE(r.sequenceNumber,this.nonceImplicitLength+2,6);const o=i.slice(this.nonceImplicitLength);const c={epoch:r.epoch,sequence:r.sequenceNumber,type:r.type,version:r.version,length:t.length};const d=(0,u.encode)(c,_).slice();const p=a.createCipheriv(this.blockAlgorithm,s,i,{authTagLength:this.authTagLength});p.setAAD(d,{plaintextLength:t.length});const y=p.update(t);const g=p.final();const b=p.getAuthTag();return Buffer.concat([o,y,g,b])}decrypt(e,t,r){const n=e===m.SessionType.CLIENT;const i=n?this.serverNonce:this.clientNonce;const s=n?this.serverWriteKey:this.clientWriteKey;if(!i||!s)throw new Error;const o=(0,u.createDecode)(t);const c=o.readBuffer(this.nonceExplicitLength);c.copy(i,this.nonceImplicitLength);const p=o.readBuffer(o.length-this.authTagLength);const y=o.readBuffer(this.authTagLength);const g={epoch:r.epoch,sequence:r.sequenceNumber,type:r.type,version:r.version,length:p.length};const b=(0,u.encode)(g,_).slice();const v=a.createDecipheriv(this.blockAlgorithm,s,i,{authTagLength:this.authTagLength});v.setAuthTag(y);v.setAAD(b,{plaintextLength:p.length});const w=v.update(p);try{const e=v.final();return e.length>0?Buffer.concat([w,e]):w}catch(n){C("decrypt failed",n,e,(0,d.dumpBuffer)(t),r,this.summary);throw n}}}t["default"]=AEADCipher},25787:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.DtlsClient=void 0;const i=n(r(69565));const s=r(67004);const o=r(6363);const a=r(98946);const c=r(78083);const u=r(43538);const d=r(71696);const p=r(94670);const m=(0,i.default)("werift-dtls : packages/dtls/src/client.ts : log");class DtlsClient extends p.DtlsSocket{constructor(e){super(e,s.SessionType.CLIENT);Object.defineProperty(this,"flight5",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"handleHandshakes",{enumerable:true,configurable:true,writable:true,value:async e=>{m(this.dtls.sessionId,"handleHandshakes",e.map((e=>e.msg_type)));for(const t of e){switch(t.msg_type){case u.HandshakeType.hello_verify_request_3:{const e=d.ServerHelloVerifyRequest.deSerialize(t.fragment);await new a.Flight3(this.transport,this.dtls).exec(e)}break;case u.HandshakeType.server_hello_2:{if(this.connected)return;this.flight5=new c.Flight5(this.transport,this.dtls,this.cipher,this.srtp);this.flight5.handleHandshake(t)}break;case u.HandshakeType.certificate_11:case u.HandshakeType.server_key_exchange_12:case u.HandshakeType.certificate_request_13:{await this.waitForReady((()=>!!this.flight5));this.flight5?.handleHandshake(t)}break;case u.HandshakeType.server_hello_done_14:{await this.waitForReady((()=>!!this.flight5));this.flight5?.handleHandshake(t);const e=[11,12,this.options.certificateRequest&&13].filter((e=>typeof e==="number"));await this.waitForReady((()=>this.dtls.checkHandshakesExist(e)));await(this.flight5?.exec())}break;case u.HandshakeType.finished_20:{this.dtls.flight=7;this.connected=true;this.onConnect.execute();m(this.dtls.sessionId,"dtls connected")}break}}}});this.onHandleHandshakes=this.handleHandshakes;m(this.dtls.sessionId,"start client")}async connect(){await new o.Flight1(this.transport,this.dtls,this.cipher).exec(this.extensions)}}t.DtlsClient=DtlsClient},97346:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var a;Object.defineProperty(t,"__esModule",{value:true});t.CipherContext=void 0;const c=s(r(6113));const u=r(93208);const d=r(85400);const p=s(r(65064));const m=r(39055);const y=o(r(2200));const g=r(47252);const b=r(21798);const v=r(67004);const w=r(9984);const _=new d.Crypto;p.cryptoProvider.set(_);class CipherContext{constructor(e,t,r,n){Object.defineProperty(this,"sessionType",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"certPem",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"keyPem",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"localRandom",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"remoteRandom",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"cipherSuite",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"remoteCertificate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"remoteKeyPair",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"localKeyPair",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"masterSecret",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"cipher",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"namedCurve",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"signatureHashAlgorithm",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"localCert",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"localPrivateKey",{enumerable:true,configurable:true,writable:true,value:void 0});if(t&&r&&n){this.parseX509(t,r,n)}}encryptPacket(e){const t=e.recordLayerHeader;const r=this.cipher.encrypt(this.sessionType,e.fragment,{type:t.contentType,version:(0,m.decode)(Buffer.from((0,m.encode)(t.protocolVersion,w.ProtocolVersion).slice()),{version:m.types.uint16be}).version,epoch:t.epoch,sequenceNumber:t.sequenceNumber});e.fragment=r;e.recordLayerHeader.contentLen=r.length;return e}decryptPacket(e){const t=e.recordLayerHeader;const r=this.cipher.decrypt(this.sessionType,e.fragment,{type:t.contentType,version:(0,m.decode)(Buffer.from((0,m.encode)(t.protocolVersion,w.ProtocolVersion).slice()),{version:m.types.uint16be}).version,epoch:t.epoch,sequenceNumber:t.sequenceNumber});return r}verifyData(e){if(this.sessionType===v.SessionType.CLIENT)return(0,b.prfVerifyDataClient)(this.masterSecret,e);else return(0,b.prfVerifyDataServer)(this.masterSecret,e)}signatureData(e,t){const r=(0,c.createSign)(t).update(e);const n=this.localPrivateKey.toPEM().toString();const i=r.sign(n);return i}generateKeySignature(e){const t=this.sessionType===v.SessionType.CLIENT?this.localRandom:this.remoteRandom;const r=this.sessionType===v.SessionType.SERVER?this.localRandom:this.remoteRandom;const n=this.valueKeySignature(t.serialize(),r.serialize(),this.localKeyPair.publicKey,this.namedCurve);const i=this.localPrivateKey.sign(n,e);return i}parseX509(e,t,r){const n=u.Certificate.fromPEM(Buffer.from(e));const i=u.PrivateKey.fromPEM(Buffer.from(t));this.localCert=n.raw;this.localPrivateKey=i;this.signatureHashAlgorithm=r}valueKeySignature(e,t,r,n){const i=Buffer.from((0,m.encode)({type:g.CurveType.named_curve_3,curve:n,len:r.length},{type:m.types.uint8,curve:m.types.uint16be,len:m.types.uint8}).slice());return Buffer.concat([e,t,i,r])}}t.CipherContext=CipherContext;a=CipherContext;Object.defineProperty(CipherContext,"createSelfSignedCertificateWithKey",{enumerable:true,configurable:true,writable:true,value:async(e,t)=>{const r=(()=>{switch(e.signature){case g.SignatureAlgorithm.rsa_1:return"RSASSA-PKCS1-v1_5";case g.SignatureAlgorithm.ecdsa_3:return"ECDSA"}})();const n=(()=>{switch(e.hash){case g.HashAlgorithm.sha256_4:return"SHA-256"}})();const i=(()=>{switch(t){case g.NamedCurveAlgorithm.secp256r1_23:return"P-256";case g.NamedCurveAlgorithm.x25519_29:if(r==="ECDSA"){return"P-256"}return"X25519";default:{if(r==="ECDSA")return"P-256";if(r==="RSASSA-PKCS1-v1_5")return"X25519"}}})();const s=(()=>{switch(r){case"ECDSA":return{name:r,hash:n,namedCurve:i};case"RSASSA-PKCS1-v1_5":return{name:r,hash:n,publicExponent:new Uint8Array([1,0,1]),modulusLength:2048}}})();const o=await _.subtle.generateKey(s,true,["sign","verify"]);const a=await p.X509CertificateGenerator.createSelfSigned({serialNumber:c.default.randomBytes(8).toString("hex"),name:"C=AU, ST=Some-State, O=Internet Widgits Pty Ltd",notBefore:new Date,notAfter:(0,y.default)(Date.now(),10),signingAlgorithm:s,keys:o});const u=a.toString("pem");const d=p.PemConverter.encode(await _.subtle.exportKey("pkcs8",o.privateKey),"private key");return{certPem:u,keyPem:d,signatureHash:e}}})},28444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DtlsContext=void 0;const n=r(69565);const i=(0,n.debug)("werift-dtls : packages/dtls/src/context/dtls.ts : log");class DtlsContext{constructor(e,t){Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"sessionType",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"version",{enumerable:true,configurable:true,writable:true,value:{major:255-1,minor:255-2}});Object.defineProperty(this,"lastFlight",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"lastMessage",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"recordSequenceNumber",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"sequenceNumber",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"epoch",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"flight",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"handshakeCache",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"cookie",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"requestedCertificateTypes",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"requestedSignatureAlgorithms",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"remoteExtendedMasterSecret",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"checkHandshakesExist",{enumerable:true,configurable:true,writable:true,value:e=>!e.find((e=>this.sortedHandshakeCache.find((t=>t.msg_type===e))==undefined))})}get sessionId(){return this.cookie?this.cookie.toString("hex").slice(0,10):""}get sortedHandshakeCache(){return Object.entries(this.handshakeCache).sort((([e],[t])=>Number(e)-Number(t))).map((([,{data:e}])=>e.sort(((e,t)=>e.message_seq-t.message_seq)))).flatMap((e=>e))}bufferHandshakeCache(e,t,r){if(!this.handshakeCache[r]){this.handshakeCache[r]={data:[],isLocal:t,flight:r}}const n=e.filter((e=>{const n=this.handshakeCache[r].data.find((t=>t.msg_type===e.msg_type));if(n){i(this.sessionId,"exist",n.summary,t,r);return false}return true}));this.handshakeCache[r].data=[...this.handshakeCache[r].data,...n]}}t.DtlsContext=DtlsContext},82083:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Profiles=t.ProtectionProfileAeadAes128Gcm=t.ProtectionProfileAes128CmHmacSha1_80=t.SrtpContext=void 0;class SrtpContext{constructor(){Object.defineProperty(this,"srtpProfile",{enumerable:true,configurable:true,writable:true,value:void 0})}static findMatchingSRTPProfile(e,t){for(const r of t){if(e.includes(r))return r}}}t.SrtpContext=SrtpContext;t.ProtectionProfileAes128CmHmacSha1_80=1;t.ProtectionProfileAeadAes128Gcm=7;t.Profiles=[t.ProtectionProfileAes128CmHmacSha1_80,t.ProtectionProfileAeadAes128Gcm]},74249:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TransportContext=void 0;class TransportContext{constructor(e){Object.defineProperty(this,"socket",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"send",{enumerable:true,configurable:true,writable:true,value:e=>this.socket.send(e)})}}t.TransportContext=TransportContext},6363:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Flight1=void 0;const n=r(47252);const i=r(47697);const s=r(53194);const o=r(95429);class Flight1 extends o.Flight{constructor(e,t,r){super(e,t,1,3);Object.defineProperty(this,"cipher",{enumerable:true,configurable:true,writable:true,value:r})}async exec(e){if(this.dtls.flight===1)throw new Error;this.dtls.flight=1;const t=new i.ClientHello({major:255-1,minor:255-2},new s.DtlsRandom,Buffer.from([]),Buffer.from([]),n.CipherSuiteList,[0],e);this.dtls.version=t.clientVersion;this.cipher.localRandom=s.DtlsRandom.from(t.random);const r=this.createPacket([t]);const o=Buffer.concat(r.map((e=>e.serialize())));await this.transmit([o])}}t.Flight1=Flight1},98946:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Flight3=void 0;const i=n(r(69565));const s=r(95429);const o=(0,i.default)("werift-dtls : packages/dtls/src/flight/client/flight3.ts : log");class Flight3 extends s.Flight{constructor(e,t){super(e,t,3,5)}async exec(e){if(this.dtls.flight===3)throw new Error;this.dtls.flight=3;this.dtls.handshakeCache=[];const[t]=this.dtls.lastFlight;o("dtls version",t.clientVersion);t.cookie=e.cookie;this.dtls.cookie=e.cookie;const r=this.createPacket([t]);const n=Buffer.concat(r.map((e=>e.serialize())));await this.transmit([n])}}t.Flight3=Flight3},78083:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Flight5=void 0;const i=n(r(69565));const s=r(47252);const o=r(73351);const a=r(98914);const c=r(21798);const u=r(82083);const d=r(43538);const p=r(62931);const m=r(2314);const y=r(12275);const g=r(22864);const b=r(22035);const v=r(82785);const w=r(16918);const _=r(70148);const C=r(25235);const P=r(48236);const O=r(44758);const E=r(90463);const I=r(53194);const k=r(68978);const T=r(18257);const x=r(95429);const R=(0,i.default)("werift-dtls : packages/dtls/src/flight/client/flight5.ts : log");class Flight5 extends x.Flight{constructor(e,t,r,n){super(e,t,5,7);Object.defineProperty(this,"cipher",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"srtp",{enumerable:true,configurable:true,writable:true,value:n})}handleHandshake(e){this.dtls.bufferHandshakeCache([e],false,4);const t=(()=>{switch(e.msg_type){case d.HandshakeType.server_hello_2:return P.ServerHello.deSerialize(e.fragment);case d.HandshakeType.certificate_11:return g.Certificate.deSerialize(e.fragment);case d.HandshakeType.server_key_exchange_12:return E.ServerKeyExchange.deSerialize(e.fragment);case d.HandshakeType.certificate_request_13:return C.ServerCertificateRequest.deSerialize(e.fragment);case d.HandshakeType.server_hello_done_14:return O.ServerHelloDone.deSerialize(e.fragment)}})();if(t){B[t.msgType]({dtls:this.dtls,cipher:this.cipher,srtp:this.srtp})(t)}}async exec(){if(this.dtls.flight===5){R(this.dtls.sessionId,"flight5 twice");this.send(this.dtls.lastMessage);return}this.dtls.flight=5;const e=this.dtls.requestedCertificateTypes.length>0;R(this.dtls.sessionId,"send flight5",e);const t=[e&&this.sendCertificate(),this.sendClientKeyExchange(),e&&this.sendCertificateVerify(),this.sendChangeCipherSpec(),this.sendFinished()].filter((e=>e));this.dtls.lastMessage=t;await this.transmit(t)}sendCertificate(){const e=new g.Certificate([Buffer.from(this.cipher.localCert)]);const t=this.createPacket([e]);const r=Buffer.concat(t.map((e=>e.serialize())));return r}sendClientKeyExchange(){if(!this.cipher.localKeyPair)throw new Error;const e=new w.ClientKeyExchange(this.cipher.localKeyPair.publicKey);const t=this.createPacket([e]);const r=Buffer.concat(t.map((e=>e.serialize())));const n=this.cipher.localKeyPair;const i=this.cipher.remoteKeyPair;if(!i.publicKey)throw new Error("not exist");const s=(0,c.prfPreMasterSecret)(i.publicKey,n.privateKey,n.curve);R(this.dtls.sessionId,"extendedMasterSecret",this.dtls.options.extendedMasterSecret,this.dtls.remoteExtendedMasterSecret);const a=Buffer.concat(this.dtls.sortedHandshakeCache.map((e=>e.serialize())));this.cipher.masterSecret=this.dtls.options.extendedMasterSecret&&this.dtls.remoteExtendedMasterSecret?(0,c.prfExtendedMasterSecret)(s,a):(0,c.prfMasterSecret)(s,this.cipher.localRandom.serialize(),this.cipher.remoteRandom.serialize());this.cipher.cipher=(0,o.createCipher)(this.cipher.cipherSuite);this.cipher.cipher.init(this.cipher.masterSecret,this.cipher.remoteRandom.serialize(),this.cipher.localRandom.serialize());R(this.dtls.sessionId,"cipher",this.cipher.cipher.summary);return r}sendCertificateVerify(){const e=Buffer.concat(this.dtls.sortedHandshakeCache.map((e=>e.serialize())));const t=this.cipher.signatureData(e,"sha256");const r=(()=>{switch(this.cipher.signatureHashAlgorithm?.signature){case s.SignatureAlgorithm.ecdsa_3:return s.SignatureScheme.ecdsa_secp256r1_sha256;case s.SignatureAlgorithm.rsa_1:return s.SignatureScheme.rsa_pkcs1_sha256}})();if(!r)throw new Error;R(this.dtls.sessionId,"signatureScheme",this.cipher.signatureHashAlgorithm?.signature,r);const n=new v.CertificateVerify(r,t);const i=this.createPacket([n]);const o=Buffer.concat(i.map((e=>e.serialize())));return o}sendChangeCipherSpec(){const e=b.ChangeCipherSpec.createEmpty().serialize();const t=(0,k.createPlaintext)(this.dtls)([{type:T.ContentType.changeCipherSpec,fragment:e}],++this.dtls.recordSequenceNumber);const r=Buffer.concat(t.map((e=>e.serialize())));return r}sendFinished(){const e=Buffer.concat(this.dtls.sortedHandshakeCache.map((e=>e.serialize())));const t=this.cipher.verifyData(e);const r=new _.Finished(t);this.dtls.epoch=1;const[n]=this.createPacket([r]);R(this.dtls.sessionId,"raw finish packet",n.summary,this.dtls.sortedHandshakeCache.map((e=>e.summary)));this.dtls.recordSequenceNumber=0;const i=this.cipher.encryptPacket(n).serialize();R(this.dtls.sessionId,"finished",this.cipher.cipher.summary);return i}}t.Flight5=Flight5;const B={};B[d.HandshakeType.server_hello_2]=({cipher:e,srtp:t,dtls:r})=>n=>{R(r.sessionId,"serverHello",n.cipherSuite);e.remoteRandom=I.DtlsRandom.from(n.random);e.cipherSuite=n.cipherSuite;R(r.sessionId,"selected cipherSuite",e.cipherSuite);if(n.extensions){n.extensions.forEach((e=>{switch(e.type){case y.UseSRTP.type:{const n=y.UseSRTP.fromData(e.data);const i=u.SrtpContext.findMatchingSRTPProfile(n.profiles,r.options.srtpProfiles||[]);R(r.sessionId,"selected srtp profile",i);if(i==undefined)return;t.srtpProfile=i}break;case p.ExtendedMasterSecret.type:r.remoteExtendedMasterSecret=true;break;case m.RenegotiationIndication.type:R(r.sessionId,"RenegotiationIndication");break}}))}};B[d.HandshakeType.certificate_11]=({cipher:e,dtls:t})=>r=>{R(t.sessionId,"handshake certificate",r);e.remoteCertificate=r.certificateList[0]};B[d.HandshakeType.server_key_exchange_12]=({cipher:e,dtls:t})=>r=>{if(!e.localRandom||!e.remoteRandom)throw new Error;R(t.sessionId,"ServerKeyExchange",r);R(t.sessionId,"selected curve",r.namedCurve);e.remoteKeyPair={curve:r.namedCurve,publicKey:r.publicKey};e.localKeyPair=(0,a.generateKeyPair)(r.namedCurve)};B[d.HandshakeType.certificate_request_13]=({dtls:e})=>t=>{R(e.sessionId,"certificate_request",t);e.requestedCertificateTypes=t.certificateTypes;e.requestedSignatureAlgorithms=t.signatures};B[d.HandshakeType.server_hello_done_14]=({dtls:e})=>t=>{R(e.sessionId,"server_hello_done",t)}},95429:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Flight=void 0;const i=n(r(69565));const s=r(68670);const o=r(68978);const a=r(18257);const c=(0,i.default)("werift-dtls : packages/dtls/src/flight/flight.ts : warn");const u=(0,i.default)("werift-dtls : packages/dtls/src/flight/flight.ts : err");const d=null&&["PREPARING","SENDING","WAITING","FINISHED"];class Flight{constructor(e,t,r,n){Object.defineProperty(this,"transport",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"dtls",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"flight",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"nextFlight",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"state",{enumerable:true,configurable:true,writable:true,value:"PREPARING"});Object.defineProperty(this,"send",{enumerable:true,configurable:true,writable:true,value:e=>Promise.all(e.map((e=>this.transport.send(e))))})}createPacket(e){const t=(0,o.createFragments)(this.dtls)(e);this.dtls.bufferHandshakeCache(t,true,this.flight);const r=(0,o.createPlaintext)(this.dtls)(t.map((e=>({type:a.ContentType.handshake,fragment:e.serialize()}))),++this.dtls.recordSequenceNumber);return r}async transmit(e){let t=0;for(;t<=Flight.RetransmitCount;t++){this.setState("SENDING");this.send(e).catch((e=>{u("fail to send",u)}));this.setState("WAITING");if(this.nextFlight===undefined){this.setState("FINISHED");break}await(0,s.setTimeout)(1e3*((t+1)/2));if(this.dtls.flight>=this.nextFlight){this.setState("FINISHED");break}else{c(this.dtls.sessionId,"retransmit",t,this.dtls.flight)}}if(t>Flight.RetransmitCount){u(this.dtls.sessionId,"retransmit failed",t);throw new Error(`over retransmitCount : ${this.flight} ${this.nextFlight}`)}}setState(e){this.state=e}}t.Flight=Flight;Object.defineProperty(Flight,"RetransmitCount",{enumerable:true,configurable:true,writable:true,value:10})},82207:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.flight2=void 0;const i=r(6113);const s=n(r(69565));const o=r(47252);const a=r(98914);const c=r(82083);const u=r(64922);const d=r(62931);const p=r(2314);const m=r(37192);const y=r(12275);const g=r(71696);const b=r(53194);const v=r(68978);const w=r(18257);const _=(0,s.default)("werift-dtls : packages/dtls/flight/server/flight2.ts : log");const flight2=(e,t,r,n)=>s=>{_("dtls version",s.clientVersion);t.flight=2;t.recordSequenceNumber=0;t.sequenceNumber=0;s.extensions.forEach((e=>{switch(e.type){case u.EllipticCurves.type:{const n=u.EllipticCurves.fromData(e.data).data;_(t.sessionId,"curves",n);const i=n.filter((e=>o.NamedCurveAlgorithmList.includes(e)))[0];r.namedCurve=i;_(t.sessionId,"curve selected",r.namedCurve)}break;case m.Signature.type:{if(!r.signatureHashAlgorithm)throw new Error("need to set certificate");const n=m.Signature.fromData(e.data).data;_(t.sessionId,"hash,signature",n);const i=n.find((e=>e.signature===r.signatureHashAlgorithm?.signature))?.signature;const s=n.find((e=>e.hash===r.signatureHashAlgorithm?.hash))?.hash;if(i==undefined||s==undefined){throw new Error("invalid signatureHash")}}break;case y.UseSRTP.type:{if(!t.options?.srtpProfiles)return;if(t.options.srtpProfiles.length===0)return;const r=y.UseSRTP.fromData(e.data);_(t.sessionId,"srtp profiles",r.profiles);const i=c.SrtpContext.findMatchingSRTPProfile(r.profiles,t.options?.srtpProfiles);if(!i){throw new Error}n.srtpProfile=i;_(t.sessionId,"srtp profile selected",n.srtpProfile)}break;case d.ExtendedMasterSecret.type:{t.remoteExtendedMasterSecret=true}break;case p.RenegotiationIndication.type:{_(t.sessionId,"RenegotiationIndication",e.data)}case 43:{const t=e.data.subarray(1);const r=[...t].map((e=>e.toString(10)));_("dtls supported version",r)}break}}));r.localRandom=new b.DtlsRandom;r.remoteRandom=b.DtlsRandom.from(s.random);const C=s.cipherSuites;_(t.sessionId,"cipher suites",C);const P=(()=>{switch(r.signatureHashAlgorithm?.signature){case o.SignatureAlgorithm.ecdsa_3:return o.CipherSuite.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256_49195;case o.SignatureAlgorithm.rsa_1:return o.CipherSuite.TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256_49199}})();if(P===undefined||!C.includes(P)){throw new Error("dtls cipher suite negotiation failed")}r.cipherSuite=P;_(t.sessionId,"selected cipherSuite",r.cipherSuite);r.localKeyPair=(0,a.generateKeyPair)(r.namedCurve);t.cookie||(t.cookie=(0,i.randomBytes)(20));const O=new g.ServerHelloVerifyRequest({major:255-1,minor:255-2},t.cookie);const E=(0,v.createFragments)(t)([O]);const I=(0,v.createPlaintext)(t)(E.map((e=>({type:w.ContentType.handshake,fragment:e.serialize()}))),++t.recordSequenceNumber);const k=I.map((e=>e.serialize()));for(const t of k){e.send(t)}};t.flight2=flight2},28134:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Flight4=void 0;const i=n(r(69565));const s=r(47252);const o=r(62931);const a=r(2314);const c=r(12275);const u=r(22864);const d=r(25235);const p=r(48236);const m=r(44758);const y=r(90463);const g=r(95429);const b=(0,i.default)("werift-dtls : packages/dtls/flight/server/flight4.ts : log");class Flight4 extends g.Flight{constructor(e,t,r,n){super(e,t,4,6);Object.defineProperty(this,"cipher",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"srtp",{enumerable:true,configurable:true,writable:true,value:n})}async exec(e,t=false){if(this.dtls.flight===4){b(this.dtls.sessionId,"flight4 twice");this.send(this.dtls.lastMessage);return}this.dtls.flight=4;this.dtls.sequenceNumber=1;this.dtls.bufferHandshakeCache([e],false,4);const r=[this.sendServerHello(),this.sendCertificate(),this.sendServerKeyExchange(),t&&this.sendCertificateRequest(),this.sendServerHelloDone()].filter((e=>e));this.dtls.lastMessage=r;await this.transmit(r)}sendServerHello(){const e=[];if(this.srtp.srtpProfile){e.push(c.UseSRTP.create([this.srtp.srtpProfile],Buffer.from([0])).extension)}if(this.dtls.options.extendedMasterSecret){e.push({type:o.ExtendedMasterSecret.type,data:Buffer.alloc(0)})}const t=a.RenegotiationIndication.createEmpty();e.push(t.extension);const r=new p.ServerHello(this.dtls.version,this.cipher.localRandom,Buffer.from([0]),this.cipher.cipherSuite,0,e);const n=this.createPacket([r]);return Buffer.concat(n.map((e=>e.serialize())))}sendCertificate(){const e=new u.Certificate([Buffer.from(this.cipher.localCert)]);const t=this.createPacket([e]);return Buffer.concat(t.map((e=>e.serialize())))}sendServerKeyExchange(){const e=this.cipher.generateKeySignature("sha256");if(!this.cipher.signatureHashAlgorithm)throw new Error("not exist");const t=new y.ServerKeyExchange(s.CurveType.named_curve_3,this.cipher.namedCurve,this.cipher.localKeyPair.publicKey.length,this.cipher.localKeyPair.publicKey,this.cipher.signatureHashAlgorithm.hash,this.cipher.signatureHashAlgorithm.signature,e.length,e);const r=this.createPacket([t]);return Buffer.concat(r.map((e=>e.serialize())))}sendCertificateRequest(){const e=new d.ServerCertificateRequest(s.certificateTypes,s.signatures,[]);b(this.dtls.sessionId,"sendCertificateRequest",e);const t=this.createPacket([e]);return Buffer.concat(t.map((e=>e.serialize())))}sendServerHelloDone(){const e=new m.ServerHelloDone;const t=this.createPacket([e]);return Buffer.concat(t.map((e=>e.serialize())))}}t.Flight4=Flight4},13457:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Flight6=void 0;const i=n(r(69565));const s=r(73351);const o=r(21798);const a=r(43538);const c=r(22864);const u=r(22035);const d=r(82785);const p=r(16918);const m=r(70148);const y=r(68978);const g=r(18257);const b=r(95429);const v=(0,i.default)("werift-dtls : packages/dtls/flight/server/flight6.ts");class Flight6 extends b.Flight{constructor(e,t,r){super(e,t,6);Object.defineProperty(this,"cipher",{enumerable:true,configurable:true,writable:true,value:r})}handleHandshake(e){this.dtls.bufferHandshakeCache([e],false,5);const t=(()=>{switch(e.msg_type){case a.HandshakeType.certificate_11:return c.Certificate.deSerialize(e.fragment);case a.HandshakeType.certificate_verify_15:return d.CertificateVerify.deSerialize(e.fragment);case a.HandshakeType.client_key_exchange_16:return p.ClientKeyExchange.deSerialize(e.fragment);case a.HandshakeType.finished_20:return m.Finished.deSerialize(e.fragment)}})();if(t){const e=w[t.msgType];if(!e){return}e({dtls:this.dtls,cipher:this.cipher})(t)}}async exec(){if(this.dtls.flight===6){v(this.dtls.sessionId,"flight6 twice");this.send(this.dtls.lastMessage);return}this.dtls.flight=6;const e=[this.sendChangeCipherSpec(),this.sendFinished()];this.dtls.lastMessage=e;await this.transmit(e)}sendChangeCipherSpec(){const e=u.ChangeCipherSpec.createEmpty().serialize();const t=(0,y.createPlaintext)(this.dtls)([{type:g.ContentType.changeCipherSpec,fragment:e}],++this.dtls.recordSequenceNumber);const r=Buffer.concat(t.map((e=>e.serialize())));return r}sendFinished(){const e=Buffer.concat(this.dtls.sortedHandshakeCache.map((e=>e.serialize())));const t=this.cipher.verifyData(e);const r=new m.Finished(t);this.dtls.epoch=1;const[n]=this.createPacket([r]);this.dtls.recordSequenceNumber=0;const i=this.cipher.encryptPacket(n).serialize();return i}}t.Flight6=Flight6;const w={};w[a.HandshakeType.client_key_exchange_16]=({cipher:e,dtls:t})=>r=>{e.remoteKeyPair={curve:e.namedCurve,publicKey:r.publicKey};if(!e.remoteKeyPair.publicKey||!e.localKeyPair||!e.remoteRandom||!e.localRandom)throw new Error("not exist");const n=(0,o.prfPreMasterSecret)(e.remoteKeyPair.publicKey,e.localKeyPair.privateKey,e.localKeyPair.curve);v(t.sessionId,"extendedMasterSecret",t.options.extendedMasterSecret,t.remoteExtendedMasterSecret);const i=Buffer.concat(t.sortedHandshakeCache.map((e=>e.serialize())));e.masterSecret=t.options.extendedMasterSecret&&t.remoteExtendedMasterSecret?(0,o.prfExtendedMasterSecret)(n,i):(0,o.prfMasterSecret)(n,e.remoteRandom.serialize(),e.localRandom.serialize());e.cipher=(0,s.createCipher)(e.cipherSuite);e.cipher.init(e.masterSecret,e.localRandom.serialize(),e.remoteRandom.serialize());v(t.sessionId,"setup cipher",e.cipher.summary)};w[a.HandshakeType.finished_20]=({dtls:e})=>t=>{v(e.sessionId,"finished",t)}},9984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProtocolVersion=t.SignatureHashAlgorithm=t.DistinguishedName=t.ClientCertificateType=t.ASN11Cert=t.ExtensionList=void 0;const n=r(39055);const{uint16be:i,uint24be:s,buffer:o,array:a,uint8:c,string:u}=n.types;const d={type:i,data:o(i)};t.ExtensionList=a(d,i,"bytes");t.ASN11Cert=o(s);t.ClientCertificateType=c;t.DistinguishedName=u(i);t.SignatureHashAlgorithm={hash:c,signature:c};t.ProtocolVersion={major:c,minor:c}},43538:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HandshakeType=void 0;var r;(function(e){e[e["hello_request_0"]=0]="hello_request_0";e[e["client_hello_1"]=1]="client_hello_1";e[e["server_hello_2"]=2]="server_hello_2";e[e["hello_verify_request_3"]=3]="hello_verify_request_3";e[e["certificate_11"]=11]="certificate_11";e[e["server_key_exchange_12"]=12]="server_key_exchange_12";e[e["certificate_request_13"]=13]="certificate_request_13";e[e["server_hello_done_14"]=14]="server_hello_done_14";e[e["certificate_verify_15"]=15]="certificate_verify_15";e[e["client_key_exchange_16"]=16]="client_key_exchange_16";e[e["finished_20"]=20]="finished_20"})(r||(t.HandshakeType=r={}))},64922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EllipticCurves=void 0;const n=r(39055);class EllipticCurves{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:EllipticCurves.type});Object.defineProperty(this,"data",{enumerable:true,configurable:true,writable:true,value:[]});Object.assign(this,e)}static createEmpty(){return new EllipticCurves}static fromData(e){return new EllipticCurves({type:EllipticCurves.type,data:(0,n.decode)(e,EllipticCurves.spec.data)})}static deSerialize(e){return new EllipticCurves((0,n.decode)(e,EllipticCurves.spec))}serialize(){return Buffer.from((0,n.encode)(this,EllipticCurves.spec).slice())}get extension(){return{type:this.type,data:this.serialize().slice(2)}}}t.EllipticCurves=EllipticCurves;Object.defineProperty(EllipticCurves,"type",{enumerable:true,configurable:true,writable:true,value:10});Object.defineProperty(EllipticCurves,"spec",{enumerable:true,configurable:true,writable:true,value:{type:n.types.uint16be,data:n.types.array(n.types.uint16be,n.types.uint16be,"bytes")}})},62931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ExtendedMasterSecret=void 0;class ExtendedMasterSecret{}t.ExtendedMasterSecret=ExtendedMasterSecret;Object.defineProperty(ExtendedMasterSecret,"type",{enumerable:true,configurable:true,writable:true,value:23})},2314:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RenegotiationIndication=void 0;const n=r(39055);class RenegotiationIndication{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:RenegotiationIndication.type});Object.defineProperty(this,"data",{enumerable:true,configurable:true,writable:true,value:0});Object.assign(this,e)}static createEmpty(){const e=new RenegotiationIndication;return e}static deSerialize(e){return new RenegotiationIndication((0,n.decode)(e,RenegotiationIndication.spec))}serialize(){const e=(0,n.encode)(this,RenegotiationIndication.spec).slice();return Buffer.from(e)}get extension(){return{type:this.type,data:this.serialize().slice(2)}}}t.RenegotiationIndication=RenegotiationIndication;Object.defineProperty(RenegotiationIndication,"type",{enumerable:true,configurable:true,writable:true,value:65281});Object.defineProperty(RenegotiationIndication,"spec",{enumerable:true,configurable:true,writable:true,value:{type:n.types.uint16be,data:n.types.uint8}})},37192:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Signature=void 0;const n=r(39055);class Signature{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:Signature.type});Object.defineProperty(this,"data",{enumerable:true,configurable:true,writable:true,value:[]});Object.assign(this,e)}static createEmpty(){const e=new Signature;return e}static deSerialize(e){return new Signature((0,n.decode)(e,Signature.spec))}serialize(){const e=(0,n.encode)(this,Signature.spec).slice();return Buffer.from(e)}static fromData(e){const t=Buffer.alloc(2);t.writeUInt16BE(Signature.type);return Signature.deSerialize(Buffer.concat([t,e]))}get extension(){return{type:this.type,data:this.serialize().slice(2)}}}t.Signature=Signature;Object.defineProperty(Signature,"type",{enumerable:true,configurable:true,writable:true,value:13});Object.defineProperty(Signature,"spec",{enumerable:true,configurable:true,writable:true,value:{type:n.types.uint16be,data:n.types.array({hash:n.types.uint8,signature:n.types.uint8},n.types.uint16be,"bytes")}})},12275:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.UseSRTP=void 0;const i=r(39055);const s=n(r(51486));class UseSRTP{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:UseSRTP.type});Object.defineProperty(this,"data",{enumerable:true,configurable:true,writable:true,value:Buffer.from([])});Object.defineProperty(this,"profiles",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"mki",{enumerable:true,configurable:true,writable:true,value:Buffer.from([0])});Object.assign(this,e)}static create(e,t){const r=new UseSRTP({profiles:e,mki:t});return r}static deSerialize(e){const t=new UseSRTP((0,i.decode)(e,UseSRTP.spec));const r=t.data.readUInt16BE();const n=(0,s.default)(r/2).map((e=>t.data.readUInt16BE(e*2+2)));t.profiles=n;t.mki=t.data.slice(r+2);return t}serialize(){const e=Buffer.alloc(2);e.writeUInt16BE(this.profiles.length*2);const t=Buffer.concat([e,...this.profiles.map((e=>{const t=Buffer.alloc(2);t.writeUInt16BE(e);return t})),this.mki]);this.data=t;const r=(0,i.encode)(this,UseSRTP.spec).slice();return Buffer.from(r)}static fromData(e){const t=Buffer.alloc(4);t.writeUInt16BE(UseSRTP.type);t.writeUInt16BE(e.length,2);return UseSRTP.deSerialize(Buffer.concat([t,e]))}get extension(){return{type:this.type,data:this.serialize().slice(4)}}}t.UseSRTP=UseSRTP;Object.defineProperty(UseSRTP,"type",{enumerable:true,configurable:true,writable:true,value:14});Object.defineProperty(UseSRTP,"spec",{enumerable:true,configurable:true,writable:true,value:{type:i.types.uint16be,data:i.types.buffer(i.types.uint16be)}})},31406:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Alert=void 0;const n=r(39055);class Alert{constructor(e,t){Object.defineProperty(this,"level",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"description",{enumerable:true,configurable:true,writable:true,value:t})}static deSerialize(e){return new Alert(...Object.values((0,n.decode)(e,Alert.spec)))}serialize(){const e=(0,n.encode)(this,Alert.spec).slice();return Buffer.from(e)}}t.Alert=Alert;Object.defineProperty(Alert,"spec",{enumerable:true,configurable:true,writable:true,value:{level:n.types.uint8,description:n.types.uint8}})},22864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Certificate=void 0;const n=r(39055);const i=r(36644);const s=r(9984);const o=r(43538);class Certificate{constructor(e){Object.defineProperty(this,"certificateList",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:o.HandshakeType.certificate_11});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:void 0})}static createEmpty(){return new Certificate(undefined)}static deSerialize(e){return new Certificate(...Object.values((0,n.decode)(e,Certificate.spec)))}serialize(){const e=(0,n.encode)(this,Certificate.spec).slice();return Buffer.from(e)}toFragment(){const e=this.serialize();return new i.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.Certificate=Certificate;Object.defineProperty(Certificate,"spec",{enumerable:true,configurable:true,writable:true,value:{certificateList:n.types.array(s.ASN11Cert,n.types.uint24be,"bytes")}})},22035:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChangeCipherSpec=void 0;const n=r(39055);class ChangeCipherSpec{constructor(e=1){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:e})}static createEmpty(){return new ChangeCipherSpec}static deSerialize(e){return new ChangeCipherSpec(...Object.values((0,n.decode)(e,ChangeCipherSpec.spec)))}serialize(){const e=(0,n.encode)(this,ChangeCipherSpec.spec).slice();return Buffer.from(e)}}t.ChangeCipherSpec=ChangeCipherSpec;Object.defineProperty(ChangeCipherSpec,"spec",{enumerable:true,configurable:true,writable:true,value:{type:n.types.uint8}})},82785:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CertificateVerify=void 0;const n=r(39055);const i=r(36644);const s=r(43538);class CertificateVerify{constructor(e,t){Object.defineProperty(this,"algorithm",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"signature",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:s.HandshakeType.certificate_verify_15});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:void 0})}static createEmpty(){return new CertificateVerify(undefined,undefined)}static deSerialize(e){const t=(0,n.decode)(e,CertificateVerify.spec);return new CertificateVerify(...Object.values(t))}serialize(){const e=(0,n.encode)(this,CertificateVerify.spec).slice();return Buffer.from(e)}toFragment(){const e=this.serialize();return new i.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.CertificateVerify=CertificateVerify;Object.defineProperty(CertificateVerify,"spec",{enumerable:true,configurable:true,writable:true,value:{algorithm:n.types.uint16be,signature:n.types.buffer(n.types.uint16be)}})},47697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClientHello=void 0;const n=r(39055);const i=r(36644);const s=r(9984);const o=r(43538);const a=r(53194);class ClientHello{constructor(e,t,r,n,i,s,a){Object.defineProperty(this,"clientVersion",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"random",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"sessionId",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"cookie",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"cipherSuites",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"compressionMethods",{enumerable:true,configurable:true,writable:true,value:s});Object.defineProperty(this,"extensions",{enumerable:true,configurable:true,writable:true,value:a});Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:o.HandshakeType.client_hello_1});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:0})}static createEmpty(){return new ClientHello(undefined,undefined,undefined,undefined,undefined,undefined,undefined)}static deSerialize(e){return new ClientHello(...Object.values((0,n.decode)(e,ClientHello.spec)))}serialize(){const e=(0,n.encode)(this,ClientHello.spec).slice();return Buffer.from(e)}toFragment(){const e=this.serialize();return new i.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.ClientHello=ClientHello;Object.defineProperty(ClientHello,"spec",{enumerable:true,configurable:true,writable:true,value:{clientVersion:{major:n.types.uint8,minor:n.types.uint8},random:a.DtlsRandom.spec,sessionId:n.types.buffer(n.types.uint8),cookie:n.types.buffer(n.types.uint8),cipherSuites:n.types.array(n.types.uint16be,n.types.uint16be,"bytes"),compressionMethods:n.types.array(n.types.uint8,n.types.uint8,"bytes"),extensions:s.ExtensionList}})},16918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClientKeyExchange=void 0;const n=r(39055);const i=r(36644);const s=r(43538);class ClientKeyExchange{constructor(e){Object.defineProperty(this,"publicKey",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:s.HandshakeType.client_key_exchange_16});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:void 0})}static createEmpty(){return new ClientKeyExchange(undefined)}static deSerialize(e){const t=(0,n.decode)(e,ClientKeyExchange.spec);return new ClientKeyExchange(...Object.values(t))}serialize(){const e=(0,n.encode)(this,ClientKeyExchange.spec).slice();return Buffer.from(e)}toFragment(){const e=this.serialize();return new i.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.ClientKeyExchange=ClientKeyExchange;Object.defineProperty(ClientKeyExchange,"spec",{enumerable:true,configurable:true,writable:true,value:{publicKey:n.types.buffer(n.types.uint8)}})},70148:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Finished=void 0;const n=r(36644);const i=r(43538);class Finished{constructor(e){Object.defineProperty(this,"verifyData",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:i.HandshakeType.finished_20});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:void 0})}static createEmpty(){return new Finished(undefined)}static deSerialize(e){return new Finished(e)}serialize(){return this.verifyData}toFragment(){const e=this.serialize();return new n.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.Finished=Finished},25235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServerCertificateRequest=void 0;const n=r(39055);const i=r(36644);const s=r(9984);const o=r(43538);class ServerCertificateRequest{constructor(e,t,r){Object.defineProperty(this,"certificateTypes",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"signatures",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"authorities",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:o.HandshakeType.certificate_request_13});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:void 0})}static createEmpty(){return new ServerCertificateRequest(undefined,undefined,undefined)}static deSerialize(e){return new ServerCertificateRequest(...Object.values((0,n.decode)(e,ServerCertificateRequest.spec)))}serialize(){const e=(0,n.encode)(this,ServerCertificateRequest.spec).slice();return Buffer.from(e)}toFragment(){const e=this.serialize();return new i.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.ServerCertificateRequest=ServerCertificateRequest;Object.defineProperty(ServerCertificateRequest,"spec",{enumerable:true,configurable:true,writable:true,value:{certificateTypes:n.types.array(s.ClientCertificateType,n.types.uint8,"bytes"),signatures:n.types.array(s.SignatureHashAlgorithm,n.types.uint16be,"bytes"),authorities:n.types.array(s.DistinguishedName,n.types.uint16be,"bytes")}})},48236:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServerHello=void 0;const n=r(39055);const i=r(36644);const s=r(9984);const o=r(43538);const a=r(53194);class ServerHello{constructor(e,t,r,n,i,s){Object.defineProperty(this,"serverVersion",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"random",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"sessionId",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"cipherSuite",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"compressionMethod",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"extensions",{enumerable:true,configurable:true,writable:true,value:s});Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:o.HandshakeType.server_hello_2});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:void 0})}static createEmpty(){return new ServerHello(undefined,undefined,undefined,undefined,undefined,undefined)}static deSerialize(e){const t=(0,n.decode)(e,ServerHello.spec);const r=new ServerHello(...Object.values(t));const i=r.serialize();if(i.length<e.length){return new ServerHello(...Object.values((0,n.decode)(e,{...ServerHello.spec,extensions:s.ExtensionList})))}return r}serialize(){const e=this.extensions===undefined?(0,n.encode)(this,ServerHello.spec).slice():(0,n.encode)(this,{...ServerHello.spec,extensions:s.ExtensionList}).slice();return Buffer.from(e)}toFragment(){const e=this.serialize();return new i.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.ServerHello=ServerHello;Object.defineProperty(ServerHello,"spec",{enumerable:true,configurable:true,writable:true,value:{serverVersion:s.ProtocolVersion,random:a.DtlsRandom.spec,sessionId:n.types.buffer(n.types.uint8),cipherSuite:n.types.uint16be,compressionMethod:n.types.uint8}})},44758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServerHelloDone=void 0;const n=r(39055);const i=r(36644);const s=r(43538);class ServerHelloDone{constructor(){Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:s.HandshakeType.server_hello_done_14});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:void 0})}static createEmpty(){return new ServerHelloDone}static deSerialize(e){return new ServerHelloDone(...Object.values((0,n.decode)(e,ServerHelloDone.spec)))}serialize(){const e=(0,n.encode)(this,ServerHelloDone.spec).slice();return Buffer.from(e)}toFragment(){const e=this.serialize();return new i.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.ServerHelloDone=ServerHelloDone;Object.defineProperty(ServerHelloDone,"spec",{enumerable:true,configurable:true,writable:true,value:{}})},71696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServerHelloVerifyRequest=void 0;const n=r(39055);const i=r(36644);const s=r(9984);const o=r(43538);class ServerHelloVerifyRequest{constructor(e,t){Object.defineProperty(this,"serverVersion",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"cookie",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:o.HandshakeType.hello_verify_request_3});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:void 0})}static createEmpty(){return new ServerHelloVerifyRequest(undefined,undefined)}static deSerialize(e){return new ServerHelloVerifyRequest(...Object.values((0,n.decode)(e,ServerHelloVerifyRequest.spec)))}serialize(){const e=(0,n.encode)(this,ServerHelloVerifyRequest.spec).slice();return Buffer.from(e)}get version(){return{major:255-this.serverVersion.major,minor:255-this.serverVersion.minor}}toFragment(){const e=this.serialize();return new i.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.ServerHelloVerifyRequest=ServerHelloVerifyRequest;Object.defineProperty(ServerHelloVerifyRequest,"spec",{enumerable:true,configurable:true,writable:true,value:{serverVersion:s.ProtocolVersion,cookie:n.types.buffer(n.types.uint8)}})},90463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServerKeyExchange=void 0;const n=r(39055);const i=r(36644);const s=r(66591);const o=r(43538);class ServerKeyExchange{constructor(e,t,r,n,i,s,a,c){Object.defineProperty(this,"ellipticCurveType",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"namedCurve",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"publicKeyLength",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"publicKey",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"hashAlgorithm",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"signatureAlgorithm",{enumerable:true,configurable:true,writable:true,value:s});Object.defineProperty(this,"signatureLength",{enumerable:true,configurable:true,writable:true,value:a});Object.defineProperty(this,"signature",{enumerable:true,configurable:true,writable:true,value:c});Object.defineProperty(this,"msgType",{enumerable:true,configurable:true,writable:true,value:o.HandshakeType.server_key_exchange_12});Object.defineProperty(this,"messageSeq",{enumerable:true,configurable:true,writable:true,value:void 0})}static createEmpty(){return new ServerKeyExchange(undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)}static deSerialize(e){const t=(0,n.decode)(e,ServerKeyExchange.spec);return new ServerKeyExchange(...Object.values(t))}serialize(){const e=(0,s.encodeBuffer)(this,ServerKeyExchange.spec);return e}toFragment(){const e=this.serialize();return new i.FragmentedHandshake(this.msgType,e.length,this.messageSeq,0,e.length,e)}}t.ServerKeyExchange=ServerKeyExchange;Object.defineProperty(ServerKeyExchange,"spec",{enumerable:true,configurable:true,writable:true,value:{ellipticCurveType:n.types.uint8,namedCurve:n.types.uint16be,publicKeyLength:n.types.uint8,publicKey:n.types.buffer((e=>e.current.publicKeyLength)),hashAlgorithm:n.types.uint8,signatureAlgorithm:n.types.uint8,signatureLength:n.types.uint16be,signature:n.types.buffer((e=>e.current.signatureLength))}})},53194:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DtlsRandom=void 0;const n=r(6113);const i=r(39055);class DtlsRandom{constructor(e=Math.floor(Date.now()/1e3),t=(0,n.randomBytes)(28)){Object.defineProperty(this,"gmt_unix_time",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"random_bytes",{enumerable:true,configurable:true,writable:true,value:t})}static deSerialize(e){return new DtlsRandom(...Object.values((0,i.decode)(e,DtlsRandom.spec)))}static from(e){return new DtlsRandom(...Object.values(e))}serialize(){const e=(0,i.encode)(this,DtlsRandom.spec).slice();return Buffer.from(e)}}t.DtlsRandom=DtlsRandom;Object.defineProperty(DtlsRandom,"spec",{enumerable:true,configurable:true,writable:true,value:{gmt_unix_time:i.types.uint32be,random_bytes:i.types.buffer(28)}})},62001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getObjectSummary=t.dumpBuffer=t.divide=t.enumerate=void 0;function enumerate(e){return e.map(((e,t)=>[t,e]))}t.enumerate=enumerate;function divide(e,t){const r=e.split(t);return[r[0],r.slice(1).join(t)]}t.divide=divide;const dumpBuffer=e=>"0x"+e.toString("hex").replace(/(.)(.)/g,"$1$2 ").split(" ").filter((e=>e!=undefined&&e.length>0)).join(",0x");t.dumpBuffer=dumpBuffer;const getObjectSummary=e=>Object.entries({...e}).reduce(((e,[r,n])=>{if(typeof n==="number"||typeof n==="string"){e[r]=n}if(Buffer.isBuffer(n)){e[r]=(0,t.dumpBuffer)(n)}return e}),{});t.getObjectSummary=getObjectSummary},78576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.UdpTransport=t.createUdpTransport=t.DtlsSocket=t.DtlsServer=t.DtlsClient=void 0;var n=r(25787);Object.defineProperty(t,"DtlsClient",{enumerable:true,get:function(){return n.DtlsClient}});var i=r(57457);Object.defineProperty(t,"DtlsServer",{enumerable:true,get:function(){return i.DtlsServer}});var s=r(94670);Object.defineProperty(t,"DtlsSocket",{enumerable:true,get:function(){return s.DtlsSocket}});var o=r(30700);Object.defineProperty(t,"createUdpTransport",{enumerable:true,get:function(){return o.createUdpTransport}});Object.defineProperty(t,"UdpTransport",{enumerable:true,get:function(){return o.UdpTransport}})},68978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createPlaintext=t.createFragments=void 0;const n=r(66989);const createFragments=e=>t=>{e.lastFlight=t;return t.map((t=>{t.messageSeq=e.sequenceNumber++;const r=t.toFragment();const n=r.chunk();return n})).flatMap((e=>e))};t.createFragments=createFragments;const createPlaintext=e=>(t,r)=>t.map((t=>{const i=new n.DtlsPlaintext({contentType:t.type,protocolVersion:e.version,epoch:e.epoch,sequenceNumber:r,contentLen:t.fragment.length},t.fragment);return i}));t.createPlaintext=createPlaintext},18257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AlertDesc=t.ContentType=void 0;var r;(function(e){e[e["changeCipherSpec"]=20]="changeCipherSpec";e[e["alert"]=21]="alert";e[e["handshake"]=22]="handshake";e[e["applicationData"]=23]="applicationData"})(r||(t.ContentType=r={}));var n;(function(e){e[e["CloseNotify"]=0]="CloseNotify";e[e["UnexpectedMessage"]=10]="UnexpectedMessage";e[e["BadRecordMac"]=20]="BadRecordMac";e[e["DecryptionFailed"]=21]="DecryptionFailed";e[e["RecordOverflow"]=22]="RecordOverflow";e[e["DecompressionFailure"]=30]="DecompressionFailure";e[e["HandshakeFailure"]=40]="HandshakeFailure";e[e["NoCertificate"]=41]="NoCertificate";e[e["BadCertificate"]=42]="BadCertificate";e[e["UnsupportedCertificate"]=43]="UnsupportedCertificate";e[e["CertificateRevoked"]=44]="CertificateRevoked";e[e["CertificateExpired"]=45]="CertificateExpired";e[e["CertificateUnknown"]=46]="CertificateUnknown";e[e["IllegalParameter"]=47]="IllegalParameter";e[e["UnknownCa"]=48]="UnknownCa";e[e["AccessDenied"]=49]="AccessDenied";e[e["DecodeError"]=50]="DecodeError";e[e["DecryptError"]=51]="DecryptError";e[e["ExportRestriction"]=60]="ExportRestriction";e[e["ProtocolVersion"]=70]="ProtocolVersion";e[e["InsufficientSecurity"]=71]="InsufficientSecurity";e[e["InternalError"]=80]="InternalError";e[e["UserCanceled"]=90]="UserCanceled";e[e["NoRenegotiation"]=100]="NoRenegotiation";e[e["UnsupportedExtension"]=110]="UnsupportedExtension"})(n||(t.AlertDesc=n={}))},36644:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FragmentedHandshake=void 0;const n=r(39055);const i=r(62001);class FragmentedHandshake{constructor(e,t,r,n,i,s){Object.defineProperty(this,"msg_type",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"length",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"message_seq",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"fragment_offset",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"fragment_length",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"fragment",{enumerable:true,configurable:true,writable:true,value:s})}get summary(){return(0,i.getObjectSummary)(this)}static createEmpty(){return new FragmentedHandshake(undefined,undefined,undefined,undefined,undefined,undefined)}static deSerialize(e){return new FragmentedHandshake(...Object.values((0,n.decode)(e,FragmentedHandshake.spec)))}serialize(){const e=(0,n.encode)(this,FragmentedHandshake.spec).slice();return Buffer.from(e)}chunk(e){let t=0;const r=this.fragment.length;if(r===0)return[new FragmentedHandshake(this.msg_type,r,this.message_seq,t,0,this.fragment)];const n=[];if(!e){e=1280-(20+8)-(1+3+2+3+3)}while(t<r){const i=Math.min(e,r-t);const s=Buffer.from(this.fragment.slice(t,t+i));if(s.length<=0){throw new Error(`Zero or less bytes processed while fragmenting handshake message.`)}n.push(new FragmentedHandshake(this.msg_type,r,this.message_seq,t,s.length,s));t+=s.length}return n}static assemble(e){if(!e?.length){throw new Error("cannot reassemble handshake from empty array")}e=e.sort(((e,t)=>e.fragment_offset-t.fragment_offset));const t=Buffer.alloc(e[0].length);for(const r of e){r.fragment.copy(t,r.fragment_offset)}return new FragmentedHandshake(e[0].msg_type,e[0].length,e[0].message_seq,0,t.length,t)}static findAllFragments(e,t){const r=e.find((e=>e.msg_type===t));if(!r)return[];if(!e?.length)return[];return e.filter((e=>e.msg_type===r.msg_type&&e.message_seq===r.message_seq&&e.length===r.length))}}t.FragmentedHandshake=FragmentedHandshake;Object.defineProperty(FragmentedHandshake,"spec",{enumerable:true,configurable:true,writable:true,value:{msg_type:n.types.uint8,length:n.types.uint24be,message_seq:n.types.uint16be,fragment_offset:n.types.uint24be,fragment_length:n.types.uint24be,fragment:n.types.buffer((e=>e.current.fragment_length))}})},85229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MACHeader=t.DtlsPlaintextHeader=void 0;const n=r(39055);const i=r(9984);class DtlsPlaintextHeader{constructor(e,t,r,n,i){Object.defineProperty(this,"contentType",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"protocolVersion",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"epoch",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"sequenceNumber",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"contentLen",{enumerable:true,configurable:true,writable:true,value:i})}static createEmpty(){return new DtlsPlaintextHeader(undefined,undefined,undefined,undefined,undefined)}static deSerialize(e){return new DtlsPlaintextHeader(...Object.values((0,n.decode)(e,DtlsPlaintextHeader.spec)))}serialize(){const e=(0,n.encode)(this,DtlsPlaintextHeader.spec).slice();return Buffer.from(e)}}t.DtlsPlaintextHeader=DtlsPlaintextHeader;Object.defineProperty(DtlsPlaintextHeader,"spec",{enumerable:true,configurable:true,writable:true,value:{contentType:n.types.uint8,protocolVersion:i.ProtocolVersion,epoch:n.types.uint16be,sequenceNumber:n.types.uint48be,contentLen:n.types.uint16be}});class MACHeader{constructor(e,t,r,n,i){Object.defineProperty(this,"epoch",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"sequenceNumber",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"contentType",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"protocolVersion",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"contentLen",{enumerable:true,configurable:true,writable:true,value:i})}static createEmpty(){return new MACHeader(undefined,undefined,undefined,undefined,undefined)}static deSerialize(e){return new MACHeader(...Object.values((0,n.decode)(e,MACHeader.spec)))}serialize(){const e=(0,n.encode)(this,MACHeader.spec).slice();return Buffer.from(e)}}t.MACHeader=MACHeader;Object.defineProperty(MACHeader,"spec",{enumerable:true,configurable:true,writable:true,value:{epoch:n.types.uint16be,sequenceNumber:n.types.uint48be,contentType:n.types.uint8,protocolVersion:i.ProtocolVersion,contentLen:n.types.uint16be}})},66989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DtlsPlaintext=void 0;const n=r(39055);const i=r(62001);const s=r(85229);class DtlsPlaintext{constructor(e,t){Object.defineProperty(this,"recordLayerHeader",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"fragment",{enumerable:true,configurable:true,writable:true,value:t})}get summary(){return{header:this.recordLayerHeader,fragment:(0,i.dumpBuffer)(this.fragment)}}static createEmpty(){return new DtlsPlaintext(undefined,undefined)}static deSerialize(e){const t=new DtlsPlaintext(...Object.values((0,n.decode)(e,DtlsPlaintext.spec)));return t}serialize(){const e=(0,n.encode)(this,DtlsPlaintext.spec).slice();return Buffer.from(e)}computeMACHeader(){return new s.MACHeader(this.recordLayerHeader.epoch,this.recordLayerHeader.sequenceNumber,this.recordLayerHeader.contentType,this.recordLayerHeader.protocolVersion,this.recordLayerHeader.contentLen).serialize()}}t.DtlsPlaintext=DtlsPlaintext;Object.defineProperty(DtlsPlaintext,"spec",{enumerable:true,configurable:true,writable:true,value:{recordLayerHeader:s.DtlsPlaintextHeader.spec,fragment:n.types.buffer((e=>e.current.recordLayerHeader.contentLen))}})},7199:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.parsePlainText=t.parsePacket=void 0;const i=n(r(69565));const s=r(31406);const o=r(18257);const a=r(36644);const c=r(66989);const u=(0,i.default)("werift-dtls : packages/dtls/record/receive.ts : log");const d=(0,i.default)("werift-dtls : packages/dtls/record/receive.ts : err");const parsePacket=e=>{let t=0;const r=[];while(e.length>t){const n=e.readUInt16BE(t+11);if(e.length<t+(12+n))break;const i=c.DtlsPlaintext.deSerialize(e.slice(t));r.push(i);t+=13+n}return r};t.parsePacket=parsePacket;const parsePlainText=(e,t)=>r=>{const n=r.recordLayerHeader.contentType;switch(n){case o.ContentType.changeCipherSpec:{u(e.sessionId,"change cipher spec");return{type:o.ContentType.changeCipherSpec,data:undefined}}case o.ContentType.handshake:{let n=r.fragment;try{if(r.recordLayerHeader.epoch>0){u(e.sessionId,"decrypt handshake");n=t.decryptPacket(r)}}catch(t){d(e.sessionId,"decrypt failed",t);throw t}try{return{type:o.ContentType.handshake,data:a.FragmentedHandshake.deSerialize(n)}}catch(t){d(e.sessionId,"decSerialize failed",t,n);throw t}}case o.ContentType.applicationData:{return{type:o.ContentType.applicationData,data:t.decryptPacket(r)}}case o.ContentType.alert:{let n=s.Alert.deSerialize(r.fragment);if(o.AlertDesc[n.description]==undefined){const e=t.decryptPacket(r);n=s.Alert.deSerialize(e)}d(e.sessionId,"ContentType.alert",n,o.AlertDesc[n.description],"flight",e.flight,"lastFlight",e.lastFlight);if(n.level>1){throw new Error("alert fatal error")}}default:{return{type:o.ContentType.alert,data:undefined}}}};t.parsePlainText=parsePlainText},57457:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.DtlsServer=void 0;const i=n(r(69565));const s=r(67004);const o=r(82207);const a=r(28134);const c=r(13457);const u=r(43538);const d=r(47697);const p=r(94670);const m=(0,i.default)("werift-dtls : packages/dtls/src/server.ts : log");class DtlsServer extends p.DtlsSocket{constructor(e){super(e,s.SessionType.SERVER);Object.defineProperty(this,"flight6",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"handleHandshakes",{enumerable:true,configurable:true,writable:true,value:async e=>{m(this.dtls.sessionId,"handleHandshakes",e.map((e=>e.msg_type)));for(const t of e){switch(t.msg_type){case u.HandshakeType.client_hello_1:{if(this.connected){this.renegotiation()}const e=d.ClientHello.deSerialize(t.fragment);if(e.cookie.length===0){m(this.dtls.sessionId,"send flight2");(0,o.flight2)(this.transport,this.dtls,this.cipher,this.srtp)(e)}else if(this.dtls.cookie&&e.cookie.equals(this.dtls.cookie)){m(this.dtls.sessionId,"send flight4");await new a.Flight4(this.transport,this.dtls,this.cipher,this.srtp).exec(t,this.options.certificateRequest)}else{m("wrong state",{dtlsCookie:this.dtls.cookie?.toString("hex").slice(10),helloCookie:e.cookie.toString("hex").slice(10)})}}break;case u.HandshakeType.certificate_11:case u.HandshakeType.certificate_verify_15:case u.HandshakeType.client_key_exchange_16:{if(this.connected)return;this.flight6=new c.Flight6(this.transport,this.dtls,this.cipher);this.flight6.handleHandshake(t)}break;case u.HandshakeType.finished_20:{await this.waitForReady((()=>!!this.flight6));this.flight6?.handleHandshake(t);await this.waitForReady((()=>this.dtls.checkHandshakesExist([16])));await(this.flight6?.exec());this.connected=true;this.onConnect.execute();m(this.dtls.sessionId,"dtls connected")}break}}}});this.onHandleHandshakes=this.handleHandshakes;m(this.dtls.sessionId,"start server")}}t.DtlsServer=DtlsServer},94670:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.DtlsSocket=void 0;const i=r(39055);const s=n(r(69565));const o=r(36094);const a=r(68670);const c=r(47252);const u=r(21798);const d=r(67004);const p=r(97346);const m=r(28444);const y=r(82083);const g=r(74249);const b=r(64922);const v=r(62931);const w=r(2314);const _=r(37192);const C=r(12275);const P=r(68978);const O=r(18257);const E=r(36644);const I=r(7199);const k=(0,s.default)("werift-dtls : packages/dtls/src/socket.ts : log");const T=(0,s.default)("werift-dtls : packages/dtls/src/socket.ts : err");class DtlsSocket{constructor(e,t){Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"sessionType",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"onConnect",{enumerable:true,configurable:true,writable:true,value:new o.Event});Object.defineProperty(this,"onData",{enumerable:true,configurable:true,writable:true,value:new o.Event});Object.defineProperty(this,"onError",{enumerable:true,configurable:true,writable:true,value:new o.Event});Object.defineProperty(this,"onClose",{enumerable:true,configurable:true,writable:true,value:new o.Event});Object.defineProperty(this,"transport",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"cipher",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"dtls",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtp",{enumerable:true,configurable:true,writable:true,value:new y.SrtpContext});Object.defineProperty(this,"connected",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"extensions",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"onHandleHandshakes",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"bufferFragmentedHandshakes",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"udpOnMessage",{enumerable:true,configurable:true,writable:true,value:e=>{const t=(0,I.parsePacket)(e);for(const e of t){try{const t=(0,I.parsePlainText)(this.dtls,this.cipher)(e);switch(t.type){case O.ContentType.handshake:{const e=t.data;const r=this.handleFragmentHandshake([e]);const n=Object.values(r.reduce(((e,t)=>{if(!e[t.msg_type])e[t.msg_type]=[];e[t.msg_type].push(t);return e}),{})).map((e=>E.FragmentedHandshake.assemble(e))).sort(((e,t)=>e.msg_type-t.msg_type));this.onHandleHandshakes(n).catch((e=>{T(this.dtls.sessionId,"onHandleHandshakes error",e);this.onError.execute(e)}))}break;case O.ContentType.applicationData:{this.onData.execute(t.data)}break;case O.ContentType.alert:this.onClose.execute();break}}catch(e){T(this.dtls.sessionId,"catch udpOnMessage error",e)}}}});Object.defineProperty(this,"waitForReady",{enumerable:true,configurable:true,writable:true,value:e=>new Promise((async(t,r)=>{{for(let r=0;r<10;r++){if(e()){t();break}else{await(0,a.setTimeout)(100*r)}}r("waitForReady timeout")}}))});Object.defineProperty(this,"send",{enumerable:true,configurable:true,writable:true,value:async e=>{const t=(0,P.createPlaintext)(this.dtls)([{type:O.ContentType.applicationData,fragment:e}],++this.dtls.recordSequenceNumber)[0];await this.transport.send(this.cipher.encryptPacket(t).serialize())}});this.dtls=new m.DtlsContext(this.options,this.sessionType);this.cipher=new p.CipherContext(this.sessionType,this.options.cert,this.options.key,this.options.signatureHash);this.transport=new g.TransportContext(this.options.transport);this.setupExtensions();this.transport.socket.onData=this.udpOnMessage}renegotiation(){k("renegotiation",this.sessionType);this.connected=false;this.cipher=new p.CipherContext(this.sessionType,this.options.cert,this.options.key,this.options.signatureHash);this.dtls=new m.DtlsContext(this.options,this.sessionType);this.srtp=new y.SrtpContext;this.extensions=[];this.bufferFragmentedHandshakes=[]}setupExtensions(){{k(this.dtls.sessionId,"support srtpProfiles",this.options.srtpProfiles);if(this.options.srtpProfiles&&this.options.srtpProfiles.length>0){const e=C.UseSRTP.create(this.options.srtpProfiles,Buffer.from([0]));this.extensions.push(e.extension)}}{const e=b.EllipticCurves.createEmpty();e.data=c.NamedCurveAlgorithmList;this.extensions.push(e.extension)}{const e=_.Signature.createEmpty();e.data=c.signatures;this.extensions.push(e.extension)}{if(this.options.extendedMasterSecret){this.extensions.push({type:v.ExtendedMasterSecret.type,data:Buffer.alloc(0)})}}{const e=w.RenegotiationIndication.createEmpty();this.extensions.push(e.extension)}}handleFragmentHandshake(e){let t=e.filter((e=>{if(e.fragment_length!==e.length){this.bufferFragmentedHandshakes.push(e);return false}return true}));if(this.bufferFragmentedHandshakes.length>1){const[e]=this.bufferFragmentedHandshakes.slice(-1);if(e.fragment_offset+e.fragment_length===e.length){t=[...this.bufferFragmentedHandshakes,...t];this.bufferFragmentedHandshakes=[]}}return t}close(){this.transport.socket.close()}extractSessionKeys(e,t){const r=this.exportKeyingMaterial("EXTRACTOR-dtls_srtp",e*2+t*2);const{clientKey:n,serverKey:s,clientSalt:o,serverSalt:a}=(0,i.decode)(r,{clientKey:i.types.buffer(e),serverKey:i.types.buffer(e),clientSalt:i.types.buffer(t),serverSalt:i.types.buffer(t)});if(this.sessionType===d.SessionType.CLIENT){return{localKey:n,localSalt:o,remoteKey:s,remoteSalt:a}}else{return{localKey:s,localSalt:a,remoteKey:n,remoteSalt:o}}}exportKeyingMaterial(e,t){return(0,u.exportKeyingMaterial)(e,t,this.cipher.masterSecret,this.cipher.localRandom.serialize(),this.cipher.remoteRandom.serialize(),this.sessionType===d.SessionType.CLIENT)}}t.DtlsSocket=DtlsSocket},30700:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.createUdpTransport=t.UdpTransport=void 0;const i=n(r(69565));const s=(0,i.default)("werift-dtls : packages/dtls/src/transport.ts");class UdpTransport{constructor(e,t){Object.defineProperty(this,"upd",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"rinfo",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"onData",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"send",{enumerable:true,configurable:true,writable:true,value:e=>new Promise(((t,r)=>{s("this.rinfo",this.rinfo);this.upd.send(e,this.rinfo.port,this.rinfo.address,(e=>{if(e){r(e)}else{t()}}))}))});e.on("message",((e,t)=>{this.rinfo=t;if(this.onData)this.onData(e)}))}close(){try{this.upd.close()}catch(e){}}}t.UdpTransport=UdpTransport;const createUdpTransport=(e,t={})=>new UdpTransport(e,t);t.createUdpTransport=createUdpTransport},66591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.encodeBuffer=void 0;const n=r(39055);function encodeBuffer(e,t){return Buffer.from((0,n.encode)(e,t).slice())}t.encodeBuffer=encodeBuffer},53059:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.candidatePriority=t.candidateFoundation=t.Candidate=void 0;const i=r(6113);const s=r(41808);const o=n(r(46611));class Candidate{constructor(e,t,r,n,i,s,o,a,c,u,d){Object.defineProperty(this,"foundation",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"component",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"transport",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"priority",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"host",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"port",{enumerable:true,configurable:true,writable:true,value:s});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:o});Object.defineProperty(this,"relatedAddress",{enumerable:true,configurable:true,writable:true,value:a});Object.defineProperty(this,"relatedPort",{enumerable:true,configurable:true,writable:true,value:c});Object.defineProperty(this,"tcptype",{enumerable:true,configurable:true,writable:true,value:u});Object.defineProperty(this,"generation",{enumerable:true,configurable:true,writable:true,value:d})}static fromSdp(e){const t=e.split(" ");if(t.length<8)throw new Error("SDP does not have enough properties");const r={foundation:t[0],component:Number(t[1]),transport:t[2],priority:Number(t[3]),host:t[4],port:Number(t[5]),type:t[7]};for(const e of(0,o.default)(8,t.length-1,2)){if(t[e]==="raddr"){r["related_address"]=t[e+1]}else if(t[e]==="rport"){r["related_port"]=Number(t[e+1])}else if(t[e]==="tcptype"){r["tcptype"]=t[e+1]}else if(t[e]==="generation"){r["generation"]=Number(t[e+1])}}const{foundation:n,component:i,transport:s,priority:a,host:c,port:u,type:d}=r;return new Candidate(n,i,s,a,c,u,d,r["related_address"],r["related_port"],r["tcptype"],r["generation"])}canPairWith(e){const t=(0,s.isIPv4)(this.host);const r=(0,s.isIPv4)(e.host);return this.component===e.component&&this.transport.toLowerCase()===e.transport.toLowerCase()&&t===r}toSdp(){let e=`${this.foundation} ${this.component} ${this.transport} ${this.priority} ${this.host} ${this.port} typ ${this.type}`;if(this.relatedAddress)e+=` raddr ${this.relatedAddress}`;if(this.relatedPort!=undefined)e+=` rport ${this.relatedPort}`;if(this.tcptype)e+=` tcptype ${this.tcptype}`;if(this.generation!=undefined)e+=` generation ${this.generation}`;return e}}t.Candidate=Candidate;function candidateFoundation(e,t,r){const n=`${e}|${t}|${r}`;return(0,i.createHash)("md5").update(n,"ascii").digest("hex").slice(7)}t.candidateFoundation=candidateFoundation;function candidatePriority(e,t,r=65535){let n=0;if(t==="host"){n=126}else if(t==="prflx"){n=110}else if(t==="srflx"){n=100}else{n=0}return(1<<24)*n+(1<<8)*r+(256-e)}t.candidatePriority=candidatePriority},18598:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.DnsLookup=t.MdnsLookup=void 0;const i=n(r(76098));const s=n(r(71267));class MdnsLookup{constructor(){Object.defineProperty(this,"cache",{enumerable:true,configurable:true,writable:true,value:new Map});Object.defineProperty(this,"mdnsInstance",{enumerable:true,configurable:true,writable:true,value:(0,i.default)()})}lookup(e){return new Promise(((t,r)=>{const cleanup=()=>{this.mdnsInstance.removeListener("response",l);clearTimeout(n)};const n=setTimeout((()=>{cleanup();r(new Error("No mDNS response"))}),1e4);const l=r=>{const n=r.answers?.[0];if(n?.type!=="A"){return}if(n.name!==e){return}cleanup();t(n.data)};this.mdnsInstance.on("response",l);this.mdnsInstance.query(e,"A")}))}close(){this.mdnsInstance.destroy()}}t.MdnsLookup=MdnsLookup;class DnsLookup{constructor(){Object.defineProperty(this,"thread",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"cache",{enumerable:true,configurable:true,writable:true,value:new Map});const lookupWorkerFunction=()=>{const e=global.require("worker_threads");const{lookup:t}=global.require("dns");const dnsLookup=r=>t(r,((t,n,i)=>{const s={err:t?.message,address:n,family:i,host:r};e.parentPort?.postMessage(s);process.exit()}));e.parentPort?.on("message",(e=>{const{host:t}=e;dnsLookup(t)}))};const e=`(${lookupWorkerFunction})()`;this.thread=new s.default.Worker(e,{eval:true});this.thread.setMaxListeners(100)}async lookup(e){let t=this.cache.get(e);if(t){return t}t=new Promise(((t,r)=>{const exitListener=e=>r(new Error(`dns.lookup thread exited unexpectedly: ${e}`));const threadMessageListener=n=>{if(n.host!==e){return}this.thread.removeListener("message",threadMessageListener);this.thread.removeListener("exit",exitListener);if(!n.address)return r(new Error(n.err||"dns.lookup thread unknown error"));t(n.address)};this.thread.on("message",threadMessageListener);this.thread.on("exit",exitListener);this.thread.postMessage({host:e})}));this.cache.set(e,t);return t}close(){return this.thread.terminate()}}t.DnsLookup=DnsLookup},49259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TransactionTimeout=t.TransactionFailed=t.TransactionError=void 0;class TransactionError extends Error{constructor(){super(...arguments);Object.defineProperty(this,"response",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"addr",{enumerable:true,configurable:true,writable:true,value:void 0})}}t.TransactionError=TransactionError;class TransactionFailed extends TransactionError{constructor(e,t){super();Object.defineProperty(this,"response",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"addr",{enumerable:true,configurable:true,writable:true,value:t})}get str(){let e="STUN transaction failed";const t=this.response.getAttributeValue("ERROR-CODE");if(t){const[r,n]=t;e+=` (${r} - ${n})`}return e}}t.TransactionFailed=TransactionFailed;class TransactionTimeout extends TransactionError{get str(){return"STUN transaction timed out"}}t.TransactionTimeout=TransactionTimeout},40119:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.future=t.PQueue=t.difference=t.bufferXor=t.randomTransactionId=t.randomString=void 0;const i=r(6113);const s=n(r(69565));const o=r(36094);const a=(0,s.default)("werift-ice:packages/ice/src/helper.ts");function randomString(e){return(0,i.randomBytes)(e).toString("hex").substring(0,e)}t.randomString=randomString;function randomTransactionId(){return(0,i.randomBytes)(12)}t.randomTransactionId=randomTransactionId;function bufferXor(e,t){if(e.length!==t.length){throw new TypeError("[webrtc-stun] You can not XOR buffers which length are different")}const r=e.length;const n=Buffer.allocUnsafe(r);for(let i=0;i<r;i++){n[i]=e[i]^t[i]}return n}t.bufferXor=bufferXor;function difference(e,t){return new Set([...e].filter((e=>!t.has(e))))}t.difference=difference;class PQueue{constructor(){Object.defineProperty(this,"queue",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"wait",{enumerable:true,configurable:true,writable:true,value:new o.Event})}put(e){this.queue.push(e);if(this.queue.length===1){this.wait.execute(e)}}get(){const e=this.queue.shift();if(!e){return new Promise((e=>{this.wait.subscribe((t=>{this.queue.shift();e(t)}))}))}return e}}t.PQueue=PQueue;const future=e=>{const t={done:false};const cancel=()=>e.cancel();const done=()=>t.done;e.then((()=>{t.done=true})).catch((e=>{if(e!=="cancel"){a("future",e)}}));return{cancel:cancel,promise:e,done:done}};t.future=future},43146:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.validateAddress=t.serverReflexiveCandidate=t.candidatePairPriority=t.sortCandidatePairs=t.validateRemoteCandidate=t.CandidatePairState=t.CandidatePair=t.Connection=void 0;const i=r(6113);const s=r(41808);const o=n(r(69565));const a=r(13910);const c=n(r(54539));const u=n(r(54608));const d=r(36094);const p=n(r(68670));const m=r(53059);const y=r(18598);const g=r(40119);const b=r(73580);const v=r(58251);const w=r(25571);const _=r(39917);const C=r(64487);const P=(0,o.default)("werift-ice : packages/ice/src/ice.ts : log");class Connection{constructor(e,t){Object.defineProperty(this,"iceControlling",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"localUserName",{enumerable:true,configurable:true,writable:true,value:(0,g.randomString)(4)});Object.defineProperty(this,"localPassword",{enumerable:true,configurable:true,writable:true,value:(0,g.randomString)(22)});Object.defineProperty(this,"remotePassword",{enumerable:true,configurable:true,writable:true,value:""});Object.defineProperty(this,"remoteUsername",{enumerable:true,configurable:true,writable:true,value:""});Object.defineProperty(this,"remoteIsLite",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"checkList",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"localCandidates",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"stunServer",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"turnServer",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"useIpv4",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"useIpv6",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"remoteCandidatesEnd",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"_localCandidatesEnd",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"_tieBreaker",{enumerable:true,configurable:true,writable:true,value:BigInt(new a.Uint64BE((0,i.randomBytes)(64)).toString())});Object.defineProperty(this,"state",{enumerable:true,configurable:true,writable:true,value:"new"});Object.defineProperty(this,"lookup",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"restarted",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"onData",{enumerable:true,configurable:true,writable:true,value:new d.Event});Object.defineProperty(this,"stateChanged",{enumerable:true,configurable:true,writable:true,value:new d.Event});Object.defineProperty(this,"_remoteCandidates",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"nominated",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"nominating",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"checkListDone",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"checkListState",{enumerable:true,configurable:true,writable:true,value:new g.PQueue});Object.defineProperty(this,"earlyChecks",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"localCandidatesStart",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"protocols",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"queryConsentHandle",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"promiseGatherCandidates",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"queryConsent",{enumerable:true,configurable:true,writable:true,value:()=>new u.default((async(e,t,r)=>{let n=0;const i=new AbortController;r((()=>{n+=k;i.abort();t("cancel")}));try{while(!this.remoteIsLite&&this.state!=="closed"){await p.default.setTimeout(I*(.8+.4*Math.random())*1e3,undefined,{signal:i.signal});const t=this.nominated;if(!t){break}const r=this.buildRequest(t,false);try{const[e,i]=await t.protocol.request(r,t.remoteAddr,Buffer.from(this.remotePassword,"utf8"),0);n=0;if(this.state==="disconnected"){this.setState("connected")}}catch(e){P("no stun response");n++;this.setState("disconnected")}if(n>=k){P("Consent to send expired");this.queryConsentHandle=undefined;e(await this.close());return}}}catch(e){}}))});Object.defineProperty(this,"send",{enumerable:true,configurable:true,writable:true,value:async e=>{await this.sendTo(e)}});Object.defineProperty(this,"checkStart",{enumerable:true,configurable:true,writable:true,value:e=>new u.default((async(t,r,n)=>{n((()=>r("cancel")));P("check start",e.toJSON());this.setPairState(e,T.IN_PROGRESS);const i=this.iceControlling&&!this.remoteIsLite;const s=this.buildRequest(e,i);const o={};try{const[t,r]=await e.protocol.request(s,e.remoteAddr,Buffer.from(this.remotePassword,"utf8"),4);P("response",t,r);o.response=t;o.addr=r}catch(r){const n=r;P("failure case",n.response);if(n.response?.getAttributeValue("ERROR-CODE")[0]===487){if(s.attributesKeys.includes("ICE-CONTROLLED")){this.switchRole(true)}else if(s.attributesKeys.includes("ICE-CONTROLLING")){this.switchRole(false)}await this.checkStart(e);t();return}else{P("CandidatePairState.FAILED",e.toJSON());this.setPairState(e,T.FAILED);this.checkComplete(e);t();return}}if(!(0,c.default)(o.addr,e.remoteAddr)){this.setPairState(e,T.FAILED);this.checkComplete(e);t();return}if(i||e.remoteNominated){e.nominated=true}else if(this.iceControlling&&!this.nominating){this.nominating=true;const t=this.buildRequest(e,true);try{await e.protocol.request(t,e.remoteAddr,Buffer.from(this.remotePassword,"utf8"))}catch(t){this.setPairState(e,T.FAILED);this.checkComplete(e);return}e.nominated=true}this.setPairState(e,T.SUCCEEDED);this.checkComplete(e);t()}))});Object.defineProperty(this,"pairRemoteCandidate",{enumerable:true,configurable:true,writable:true,value:e=>{for(const t of this.protocols){if(t.localCandidate?.canPairWith(e)&&!this.findPair(t,e)){const r=new CandidatePair(t,e);if(this.options.filterCandidatePair&&!this.options.filterCandidatePair(r)){continue}this.checkList.push(r);this.setPairState(r,T.WAITING)}}}});this.options={...x,...t};const{stunServer:r,turnServer:n,useIpv4:s,useIpv6:o}=this.options;this.stunServer=validateAddress(r);this.turnServer=validateAddress(n);this.useIpv4=s;this.useIpv6=o}setRemoteParams({iceLite:e,usernameFragment:t,password:r}){P("setRemoteParams",{iceLite:e,usernameFragment:t,password:r});this.remoteIsLite=e;this.remoteUsername=t;this.remotePassword=r}async gatherCandidates(e){if(!this.localCandidatesStart){this.localCandidatesStart=true;this.promiseGatherCandidates=new d.Event;let t=(0,C.getHostAddresses)(this.useIpv4,this.useIpv6);const{interfaceAddresses:r}=this.options;if(r){const e=t.filter((e=>Object.values(r).includes(e)));if(e.length){t=e}}if(this.options.additionalHostAddresses){t=Array.from(new Set([...this.options.additionalHostAddresses,...t]))}const n=await this.getCandidates(t,5,e);this.localCandidates=[...this.localCandidates,...n];this._localCandidatesEnd=true;this.promiseGatherCandidates.execute()}this.setState("completed")}async getCandidates(e,t=5,r){let n=[];await Promise.allSettled(e.map((async e=>{const t=new w.StunProtocol(this);try{await t.connectionMade((0,s.isIPv4)(e),this.options.portRange,this.options.interfaceAddresses)}catch(e){P("protocol STUN",e);return}t.localAddress=e;this.protocols.push(t);const i=[e,t.getExtraInfo()[1]];t.localCandidate=new m.Candidate((0,m.candidateFoundation)("host","udp",i[0]),1,"udp",(0,m.candidatePriority)(1,"host"),i[0],i[1],"host");n.push(t.localCandidate);if(r){r(t.localCandidate)}})));let i=[];const{stunServer:o,turnServer:a}=this;if(o){const e=this.protocols.map((e=>new Promise((async(n,i)=>{const a=setTimeout(i,t*1e3);if(e.localCandidate?.host&&(0,s.isIPv4)(e.localCandidate?.host)){const t=await serverReflexiveCandidate(e,o).catch((e=>P("error",e)));if(t&&r)r(t);clearTimeout(a);n(t)}else{clearTimeout(a);n()}})).catch((e=>{P("query STUN server",e)}))));i.push(...e)}const{turnUsername:c,turnPassword:u}=this.options;if(a&&c&&u){const e=(async()=>{const e=await(0,_.createTurnEndpoint)(a,c,u,{portRange:this.options.portRange,interfaceAddresses:this.options.interfaceAddresses});this.protocols.push(e);const t=e.turn.relayedAddress;const n=e.turn.mappedAddress;P("turn candidateAddress",t);e.localCandidate=new m.Candidate((0,m.candidateFoundation)("relay","udp",t[0]),1,"udp",(0,m.candidatePriority)(1,"relay"),t[0],t[1],"relay",n[0],n[1]);if(r){r(e.localCandidate)}e.receiver=this;return e.localCandidate})().catch((e=>{P("query TURN server",e)}));if(this.options.forceTurn){n=[];i=[]}i.push(e)}const d=[...await Promise.allSettled(i)].filter((e=>e.status==="fulfilled")).map((e=>e.value)).filter((e=>typeof e!=="undefined"));n.push(...d);return n}async connect(){P("start connect ice",this.localCandidates);if(!this._localCandidatesEnd){if(!this.localCandidatesStart)throw new Error("Local candidates gathering was not performed");if(this.promiseGatherCandidates)await this.promiseGatherCandidates.asPromise()}if(!this.remoteUsername||!this.remotePassword)throw new Error("Remote username or password is missing");this.remoteCandidates.forEach(this.pairRemoteCandidate);this.sortCheckList();this.unfreezeInitial();this.earlyChecks.forEach((e=>this.checkIncoming(...e)));this.earlyChecks=[];for(;;){if(this.state==="closed")break;if(!this.schedulingChecks())break;await p.default.setTimeout(20)}let e=E;while(this.checkList.length>0&&e===E){e=await this.checkListState.get()}this.checkList.forEach((e=>e.handle?.cancel()));if(e!==O){throw new Error("ICE negotiation failed")}this.queryConsentHandle=(0,g.future)(this.queryConsent());this.setState("connected")}unfreezeInitial(){const[e]=this.checkList;if(!e)return;if(e.state===T.FROZEN){this.setPairState(e,T.WAITING)}const t=new Set(e.localCandidate.foundation);for(const r of this.checkList){if(r.component===e.component&&!t.has(r.localCandidate.foundation)&&r.state===T.FROZEN){this.setPairState(r,T.WAITING);t.add(r.localCandidate.foundation)}}}schedulingChecks(){{const e=this.checkList.filter((e=>{if(this.options.forceTurn&&e.protocol.type==="stun")return false;return true})).find((e=>e.state===T.WAITING));if(e){e.handle=(0,g.future)(this.checkStart(e));return true}}{const e=this.checkList.find((e=>e.state===T.FROZEN));if(e){e.handle=(0,g.future)(this.checkStart(e));return true}}if(!this.remoteCandidatesEnd){return!this.checkListDone}return false}async close(){this.setState("closed");if(this.queryConsentHandle&&!this.queryConsentHandle.done()){this.queryConsentHandle.cancel();try{await this.queryConsentHandle.promise}catch(e){}}if(this.checkList&&!this.checkListDone){this.checkListState.put(new Promise((e=>{e(E)})))}this.nominated=undefined;for(const e of this.protocols){if(e.close){await e.close()}}this.protocols=[];this.localCandidates=[];await(this.lookup?.close())}setState(e){this.state=e;this.stateChanged.execute(e)}async addRemoteCandidate(e){if(!e){this.remoteCandidatesEnd=true;return}if(e.host.includes(".local")){try{if(this.state==="closed")return;if(!this.lookup){this.lookup=new y.MdnsLookup}const t=await this.lookup.lookup(e.host);e.host=t}catch(e){return}}try{validateRemoteCandidate(e)}catch(e){return}P("addRemoteCandidate",e);this.remoteCandidates.push(e);this.pairRemoteCandidate(e);this.sortCheckList()}async sendTo(e){const t=this.nominated;if(t){await t.protocol.sendData(e,t.remoteAddr)}else{return}}getDefaultCandidate(){const e=this.localCandidates.sort(((e,t)=>e.priority-t.priority));const[t]=e;return t}requestReceived(e,t,r,n){if(e.messageMethod!==b.methods.BINDING){this.respondError(e,t,r,[400,"Bad Request"]);return}try{(0,v.parseMessage)(n,Buffer.from(this.localPassword,"utf8"));if(!this.remoteUsername){const t=`${this.localUserName}:${this.remoteUsername}`;if(e.getAttributeValue("USERNAME")!=t){throw new Error("Wrong username")}}}catch(n){this.respondError(e,t,r,[400,"Bad Request"]);return}const{iceControlling:i}=this;if(i&&e.attributesKeys.includes("ICE-CONTROLLING")){if(this._tieBreaker>=e.getAttributeValue("ICE-CONTROLLING")){this.respondError(e,t,r,[487,"Role Conflict"]);return}else{this.switchRole(false)}}else if(!i&&e.attributesKeys.includes("ICE-CONTROLLED")){if(this._tieBreaker<e.getAttributeValue("ICE-CONTROLLED")){this.respondError(e,t,r,[487,"Role Conflict"])}else{this.switchRole(true);return}}if(this.options.filterStunResponse&&!this.options.filterStunResponse(e,t,r)){return}const s=new v.Message(b.methods.BINDING,b.classes.RESPONSE,e.transactionId);s.setAttribute("XOR-MAPPED-ADDRESS",t).addMessageIntegrity(Buffer.from(this.localPassword,"utf8")).addFingerprint();r.sendStun(s,t).catch((e=>{P("sendStun error",e)}));this.checkIncoming(e,t,r)}dataReceived(e,t){try{this.onData.execute(e,t)}catch(e){P("dataReceived",e)}}set remoteCandidates(e){if(this.remoteCandidatesEnd)throw new Error("Cannot set remote candidates after end-of-candidates.");this._remoteCandidates=[];for(const t of e){try{validateRemoteCandidate(t)}catch(e){continue}this.remoteCandidates.push(t)}this.remoteCandidatesEnd=true}get remoteCandidates(){return this._remoteCandidates}sortCheckList(){sortCandidatePairs(this.checkList,this.iceControlling)}findPair(e,t){const r=this.checkList.find((r=>(0,c.default)(r.protocol,e)&&(0,c.default)(r.remoteCandidate,t)));return r}setPairState(e,t){P("setPairState",e.toJSON(),T[t]);e.updateState(t)}switchRole(e){P("switch role",e);this.iceControlling=e;this.sortCheckList()}resetNominatedPair(){P("resetNominatedPair");this.nominated=undefined;this.nominating=false}checkComplete(e){e.handle=undefined;if(e.state===T.SUCCEEDED){if(e.nominated&&this.nominated==undefined){P("nominated",e.toJSON());this.nominated=e;this.nominating=false;for(const t of this.checkList){if(t.component===e.component&&[T.WAITING,T.FROZEN].includes(t.state)){this.setPairState(t,T.FAILED)}}}if(this.nominated){if(!this.checkListDone){P("ICE completed");this.checkListState.put(new Promise((e=>e(O))));this.checkListDone=true}return}for(const t of this.checkList){if(t.localCandidate.foundation===e.localCandidate.foundation&&t.state===T.FROZEN){this.setPairState(t,T.WAITING)}}}{const e=[T.SUCCEEDED,T.FAILED];if(this.checkList.find((({state:t})=>!e.includes(t)))){return}}if(!this.iceControlling){const e=T.SUCCEEDED;if(this.checkList.find((({state:t})=>t===e))){return}}if(!this.checkListDone){P("ICE failed");this.checkListState.put(new Promise((e=>{e(E)})))}}checkIncoming(e,t,r){let n;const[i,s]=t;for(const e of this.remoteCandidates){if(e.host===i&&e.port===s){n=e;break}}if(!n){n=new m.Candidate((0,g.randomString)(10),1,"udp",e.getAttributeValue("PRIORITY"),i,s,"prflx");this.remoteCandidates.push(n)}let o=this.findPair(r,n);if(!o){o=new CandidatePair(r,n);this.setPairState(o,T.WAITING);this.checkList.push(o);this.sortCheckList()}if([T.WAITING,T.FAILED].includes(o.state)){o.handle=(0,g.future)(this.checkStart(o))}else{o}if(e.attributesKeys.includes("USE-CANDIDATE")&&!this.iceControlling){o.remoteNominated=true;if(o.state===T.SUCCEEDED){o.nominated=true;this.checkComplete(o)}}}buildRequest(e,t){const r=`${this.remoteUsername}:${this.localUserName}`;const n=new v.Message(b.methods.BINDING,b.classes.REQUEST);n.setAttribute("USERNAME",r).setAttribute("PRIORITY",(0,m.candidatePriority)(e.component,"prflx"));if(this.iceControlling){n.setAttribute("ICE-CONTROLLING",this._tieBreaker);if(t){n.setAttribute("USE-CANDIDATE",null)}}else{n.setAttribute("ICE-CONTROLLED",this._tieBreaker)}return n}respondError(e,t,r,n){const i=new v.Message(e.messageMethod,b.classes.ERROR,e.transactionId);i.setAttribute("ERROR-CODE",n).addMessageIntegrity(Buffer.from(this.localPassword,"utf8")).addFingerprint();r.sendStun(i,t).catch((e=>{P("sendStun error",e)}))}}t.Connection=Connection;class CandidatePair{get state(){return this._state}toJSON(){return{protocol:this.protocol.type,remoteAddr:this.remoteAddr}}constructor(e,t){Object.defineProperty(this,"protocol",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"remoteCandidate",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"handle",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"nominated",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"remoteNominated",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"_state",{enumerable:true,configurable:true,writable:true,value:T.FROZEN})}updateState(e){this._state=e}get localCandidate(){if(!this.protocol.localCandidate)throw new Error("localCandidate not exist");return this.protocol.localCandidate}get remoteAddr(){return[this.remoteCandidate.host,this.remoteCandidate.port]}get component(){return this.localCandidate.component}}t.CandidatePair=CandidatePair;const O=1;const E=2;const I=5;const k=6;var T;(function(e){e[e["FROZEN"]=0]="FROZEN";e[e["WAITING"]=1]="WAITING";e[e["IN_PROGRESS"]=2]="IN_PROGRESS";e[e["SUCCEEDED"]=3]="SUCCEEDED";e[e["FAILED"]=4]="FAILED"})(T||(t.CandidatePairState=T={}));const x={useIpv4:true,useIpv6:true};function validateRemoteCandidate(e){if(!["host","relay","srflx"].includes(e.type))throw new Error(`Unexpected candidate type "${e.type}"`);return e}t.validateRemoteCandidate=validateRemoteCandidate;function sortCandidatePairs(e,t){e.sort(((e,r)=>candidatePairPriority(e.localCandidate,e.remoteCandidate,t)-candidatePairPriority(r.localCandidate,r.remoteCandidate,t)))}t.sortCandidatePairs=sortCandidatePairs;function candidatePairPriority(e,t,r){const n=r&&e.priority||t.priority;const i=r&&t.priority||e.priority;return(1<<32)*Math.min(n,i)+2*Math.max(n,i)+(n>i?1:0)}t.candidatePairPriority=candidatePairPriority;async function serverReflexiveCandidate(e,t){const r=new v.Message(b.methods.BINDING,b.classes.REQUEST);try{const[n]=await e.request(r,t);const i=e.localCandidate;if(!i)throw new Error("not exist");return new m.Candidate((0,m.candidateFoundation)("srflx","udp",i.host),i.component,i.transport,(0,m.candidatePriority)(i.component,"srflx"),n.getAttributeValue("XOR-MAPPED-ADDRESS")[0],n.getAttributeValue("XOR-MAPPED-ADDRESS")[1],"srflx",i.host,i.port)}catch(e){P("error serverReflexiveCandidate",e)}}t.serverReflexiveCandidate=serverReflexiveCandidate;function validateAddress(e){if(e&&Number.isNaN(e[1])){return[e[0],443]}return e}t.validateAddress=validateAddress},58698:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.randomPort=void 0;var s=r(35437);Object.defineProperty(t,"randomPort",{enumerable:true,get:function(){return s.randomPort}});i(r(39917),t);i(r(53059),t);i(r(43146),t);i(r(41497),t);i(r(64487),t)},80113:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ATTRIBUTES_BY_NAME=t.ATTRIBUTES_BY_TYPE=t.AttributeRepository=t.packXorAddress=t.packErrorCode=t.unpackXorAddress=t.unpackErrorCode=void 0;const a=r(48775);const c=r(13910);const u=s(r(6230));const d=o(r(46611));const p=r(73580);function packAddress(e){const[t]=e;const r=u.isV4Format(t)?p.IPV4_PROTOCOL:p.IPV6_PROTOCOL;return Buffer.concat([Buffer.from(a.jspack.Pack("!BBH",[0,r,e[1]])),u.toBuffer(t)])}function unpackErrorCode(e){if(e.length<4)throw new Error("STUN error code is less than 4 bytes");const[,t,r]=a.jspack.Unpack("!HBB",e.slice(0,4));const n=e.slice(4).toString("utf8");return[t*100+r,n]}t.unpackErrorCode=unpackErrorCode;function unpackAddress(e){if(e.length<4)throw new Error("STUN address length is less than 4 bytes");const[,t,r]=a.jspack.Unpack("!BBH",e.slice(0,4));const n=e.slice(4);switch(t){case p.IPV4_PROTOCOL:if(n.length!=4)throw new Error(`STUN address has invalid length for IPv4`);return[u.toString(n),r];case p.IPV6_PROTOCOL:if(n.length!=16)throw new Error("STUN address has invalid length for IPv6");return[u.toString(n),r];default:throw new Error("STUN address has unknown protocol")}}function xorAddress(e,t){const r=[...a.jspack.Pack("!HI",[p.COOKIE>>16,p.COOKIE]),...t];let n=e.slice(0,2);for(const t of(0,d.default)(2,e.length)){const i=e[t]^r[t-2];const s=Buffer.alloc(1);s.writeUIntBE(i,0,1);n=Buffer.concat([n,s])}return n}function unpackXorAddress(e,t){return unpackAddress(xorAddress(e,t))}t.unpackXorAddress=unpackXorAddress;function packErrorCode(e){const t=Buffer.from(a.jspack.Pack("!HBB",[0,Math.floor(e[0]/100),e[0]%100]));const r=Buffer.from(e[1],"utf8");return Buffer.concat([t,r])}t.packErrorCode=packErrorCode;function packXorAddress(e,t){return xorAddress(packAddress(e),t)}t.packXorAddress=packXorAddress;const packUnsigned=e=>Buffer.from(a.jspack.Pack("!I",[e]));const unpackUnsigned=e=>a.jspack.Unpack("!I",e)[0];const packUnsignedShort=e=>Buffer.concat([Buffer.from(a.jspack.Pack("!H",[e])),Buffer.from("\0\0")]);const unpackUnsignedShort=e=>a.jspack.Unpack("!H",e.slice(0,2))[0];const packUnsigned64=e=>new c.Int64BE(e.toString()).toBuffer();const unpackUnsigned64=e=>{const t=new c.Int64BE(e);return BigInt(t.toString())};const packString=e=>Buffer.from(e,"utf8");const unpackString=e=>e.toString("utf8");const packBytes=e=>e;const unpackBytes=e=>e;const packNone=e=>Buffer.from([]);const unpackNone=e=>null;const m=[[1,"MAPPED-ADDRESS",packAddress,unpackAddress],[3,"CHANGE-REQUEST",packUnsigned,unpackUnsigned],[4,"SOURCE-ADDRESS",packAddress,unpackAddress],[5,"CHANGED-ADDRESS",packAddress,unpackAddress],[6,"USERNAME",packString,unpackString],[8,"MESSAGE-INTEGRITY",packBytes,unpackBytes],[9,"ERROR-CODE",packErrorCode,unpackErrorCode],[12,"CHANNEL-NUMBER",packUnsignedShort,unpackUnsignedShort],[13,"LIFETIME",packUnsigned,unpackUnsigned],[18,"XOR-PEER-ADDRESS",packXorAddress,unpackXorAddress],[19,"DATA",packBytes,unpackBytes],[20,"REALM",packString,unpackString],[21,"NONCE",packBytes,unpackBytes],[22,"XOR-RELAYED-ADDRESS",packXorAddress,unpackXorAddress],[25,"REQUESTED-TRANSPORT",packUnsigned,unpackUnsigned],[32,"XOR-MAPPED-ADDRESS",packXorAddress,unpackXorAddress],[36,"PRIORITY",packUnsigned,unpackUnsigned],[37,"USE-CANDIDATE",packNone,unpackNone],[32802,"SOFTWARE",packString,unpackString],[32808,"FINGERPRINT",packUnsigned,unpackUnsigned],[32809,"ICE-CONTROLLED",packUnsigned64,unpackUnsigned64],[32810,"ICE-CONTROLLING",packUnsigned64,unpackUnsigned64],[32811,"RESPONSE-ORIGIN",packAddress,unpackAddress],[32812,"OTHER-ADDRESS",packAddress,unpackAddress]];class AttributeRepository{constructor(e=[]){Object.defineProperty(this,"attributes",{enumerable:true,configurable:true,writable:true,value:e})}getAttributes(){return this.attributes}setAttribute(e,t){const r=this.attributes.find((t=>t[0]===e));if(r){r[1]=t}else{this.attributes.push([e,t])}return this}getAttributeValue(e){const t=this.attributes.find((t=>t[0]===e));if(!t){return undefined}return t[1]}get attributesKeys(){return this.attributes.map((e=>e[0]))}clear(){this.attributes=[]}}t.AttributeRepository=AttributeRepository;t.ATTRIBUTES_BY_TYPE=m.reduce(((e,t)=>{e[t[0]]=t;return e}),{});t.ATTRIBUTES_BY_NAME=m.reduce(((e,t)=>{e[t[1]]=t;return e}),{})},73580:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.methods=t.classes=t.AttributeKeys=t.RETRY_RTO=t.RETRY_MAX=t.IPV6_PROTOCOL=t.IPV4_PROTOCOL=t.INTEGRITY_LENGTH=t.HEADER_LENGTH=t.FINGERPRINT_XOR=t.FINGERPRINT_LENGTH=t.COOKIE=void 0;t.COOKIE=554869826;t.FINGERPRINT_LENGTH=8;t.FINGERPRINT_XOR=1398035790;t.HEADER_LENGTH=20;t.INTEGRITY_LENGTH=24;t.IPV4_PROTOCOL=1;t.IPV6_PROTOCOL=2;t.RETRY_MAX=6;t.RETRY_RTO=50;t.AttributeKeys=["FINGERPRINT","MESSAGE-INTEGRITY","CHANGE-REQUEST","PRIORITY","USERNAME","ICE-CONTROLLING","SOURCE-ADDRESS","USE-CANDIDATE","ICE-CONTROLLED","ERROR-CODE","XOR-MAPPED-ADDRESS","CHANGED-ADDRESS","LIFETIME","REQUESTED-TRANSPORT","NONCE","REALM","XOR-RELAYED-ADDRESS","CHANNEL-NUMBER","XOR-PEER-ADDRESS","DATA","SOFTWARE","MAPPED-ADDRESS","RESPONSE-ORIGIN","OTHER-ADDRESS"];var r;(function(e){e[e["REQUEST"]=0]="REQUEST";e[e["INDICATION"]=16]="INDICATION";e[e["RESPONSE"]=256]="RESPONSE";e[e["ERROR"]=272]="ERROR"})(r||(t.classes=r={}));var n;(function(e){e[e["BINDING"]=1]="BINDING";e[e["SHARED_SECRET"]=2]="SHARED_SECRET";e[e["ALLOCATE"]=3]="ALLOCATE";e[e["REFRESH"]=4]="REFRESH";e[e["SEND"]=6]="SEND";e[e["DATA"]=7]="DATA";e[e["CREATE_PERMISSION"]=8]="CREATE_PERMISSION";e[e["CHANNEL_BIND"]=9]="CHANNEL_BIND"})(n||(t.methods=n={}))},58251:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Message=t.parseMessage=void 0;const i=r(6113);const s=r(48775);const o=n(r(22527));const a=r(40119);const c=r(80113);const u=r(73580);function parseMessage(e,t){if(e.length<u.HEADER_LENGTH){return undefined}const[r,n]=s.jspack.Unpack("!HHI",e.slice(0,u.HEADER_LENGTH));const i=Buffer.from(e.slice(u.HEADER_LENGTH-12,u.HEADER_LENGTH));if(e.length!==u.HEADER_LENGTH+n){return undefined}const o=new c.AttributeRepository;for(let r=u.HEADER_LENGTH;r<=e.length-4;){const[n,a]=s.jspack.Unpack("!HH",e.slice(r,r+4));const u=e.slice(r+4,r+4+a);const d=4*Math.floor((a+3)/4)-a;const p=Object.keys(c.ATTRIBUTES_BY_TYPE);if(p.includes(n.toString())){const[,s,,a]=c.ATTRIBUTES_BY_TYPE[n];if(a.name===c.unpackXorAddress.name){o.setAttribute(s,a(u,i))}else{o.setAttribute(s,a(u))}if(s==="FINGERPRINT"){const t=messageFingerprint(e.slice(0,r));const n=o.getAttributeValue("FINGERPRINT");if(n!==t){return undefined}}else if(s==="MESSAGE-INTEGRITY"){if(t){const n=messageIntegrity(e.slice(0,r),t);const i=o.getAttributeValue("MESSAGE-INTEGRITY");if(!n.equals(i)){return undefined}}}}r+=4+a+d}const a=o.getAttributes();o.clear();return new Message(r&16111,r&272,i,a)}t.parseMessage=parseMessage;class Message extends c.AttributeRepository{constructor(e,t,r=(0,a.randomTransactionId)(),n=[]){super(n);Object.defineProperty(this,"messageMethod",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"messageClass",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"transactionId",{enumerable:true,configurable:true,writable:true,value:r})}toJSON(){return{messageMethod:u.methods[this.messageMethod],messageClass:u.classes[this.messageClass]}}get transactionIdHex(){return this.transactionId.toString("hex")}get bytes(){let e=Buffer.from([]);for(const t of this.attributesKeys){const r=this.getAttributeValue(t);const[n,,i]=c.ATTRIBUTES_BY_NAME[t];const o=i.name===c.packXorAddress.name?i(r,this.transactionId):i(r);const a=o.length;const u=4*Math.floor((a+3)/4)-a;e=Buffer.concat([e,Buffer.from(s.jspack.Pack("!HH",[n,a])),o,...[...Array(u)].map((()=>Buffer.from("\0")))])}const t=Buffer.from(s.jspack.Pack("!HHI",[this.messageMethod|this.messageClass,e.length,u.COOKIE]));return Buffer.concat([t,this.transactionId,e])}addMessageIntegrity(e){this.setAttribute("MESSAGE-INTEGRITY",this.messageIntegrity(e));return this}messageIntegrity(e){const t=setBodyLength(this.bytes,this.bytes.length-u.HEADER_LENGTH+u.INTEGRITY_LENGTH);return Buffer.from((0,i.createHmac)("sha1",e).update(t).digest("hex"),"hex")}addFingerprint(){this.setAttribute("FINGERPRINT",messageFingerprint(this.bytes))}}t.Message=Message;const setBodyLength=(e,t)=>Buffer.concat([e.slice(0,2),Buffer.from(s.jspack.Pack("!H",[t])),e.slice(4)]);function messageFingerprint(e){const t=setBodyLength(e,e.length-u.HEADER_LENGTH+u.FINGERPRINT_LENGTH);const r=(0,o.default)(t);const n=Buffer.alloc(4);n.writeInt32BE(u.FINGERPRINT_XOR,0);const i=(0,a.bufferXor)(r,n);return i.readUInt32BE(0)}function messageIntegrity(e,t){const r=setBodyLength(e,e.length-u.HEADER_LENGTH+u.INTEGRITY_LENGTH);return Buffer.from((0,i.createHmac)("sha1",t).update(r).digest("hex"),"hex")}},25571:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.StunProtocol=void 0;const i=n(r(69565));const s=r(36094);const o=r(17071);const a=r(73580);const c=r(58251);const u=r(21534);const d=(0,i.default)("packages/ice/src/stun/protocol.ts");class StunProtocol{get transactionsKeys(){return Object.keys(this.transactions)}constructor(e){Object.defineProperty(this,"receiver",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:"stun"});Object.defineProperty(this,"transport",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"transactions",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"localCandidate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sentMessage",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"localAddress",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"closed",{enumerable:true,configurable:true,writable:true,value:new s.Event});Object.defineProperty(this,"connectionMade",{enumerable:true,configurable:true,writable:true,value:async(e,t,r)=>{if(e){this.transport=await o.UdpTransport.init("udp4",t,r)}else{this.transport=await o.UdpTransport.init("udp6",t,r)}this.transport.onData=(e,t)=>this.datagramReceived(e,t)}})}connectionLost(){this.closed.execute();this.closed.complete()}datagramReceived(e,t){try{if(!this.localCandidate)throw new Error("not exist");const r=(0,c.parseMessage)(e);if(!r){this.receiver.dataReceived(e,this.localCandidate.component);return}if((r.messageClass===a.classes.RESPONSE||r.messageClass===a.classes.ERROR)&&this.transactionsKeys.includes(r.transactionIdHex)){const e=this.transactions[r.transactionIdHex];e.responseReceived(r,t)}else if(r.messageClass===a.classes.REQUEST){this.receiver.requestReceived(r,t,this,e)}}catch(e){d("datagramReceived error",e)}}getExtraInfo(){const{address:e,port:t}=this.transport.address();return[e,t]}async sendStun(e,t){const r=e.bytes;await this.transport.send(r,t).catch((()=>{d("sendStun failed",t,e)}))}async sendData(e,t){await this.transport.send(e,t)}async request(e,t,r,n){if(this.transactionsKeys.includes(e.transactionIdHex))throw new Error("already request ed");if(r){e.addMessageIntegrity(r);e.addFingerprint()}const i=new u.Transaction(e,t,this,n);this.transactions[e.transactionIdHex]=i;try{return await i.run()}catch(e){throw e}finally{delete this.transactions[e.transactionIdHex]}}async close(){Object.values(this.transactions).forEach((e=>{e.cancel()}));await this.transport.close()}}t.StunProtocol=StunProtocol},21534:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Transaction=void 0;const i=n(r(69565));const s=r(36094);const o=r(49259);const a=r(73580);const c=(0,i.default)("werift-ice:packages/ice/src/stun/transaction.ts");class Transaction{constructor(e,t,r,n){Object.defineProperty(this,"request",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"addr",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"protocol",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"retransmissions",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"timeoutDelay",{enumerable:true,configurable:true,writable:true,value:a.RETRY_RTO});Object.defineProperty(this,"timeoutHandle",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"tries",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"triesMax",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onResponse",{enumerable:true,configurable:true,writable:true,value:new s.Event});Object.defineProperty(this,"responseReceived",{enumerable:true,configurable:true,writable:true,value:(e,t)=>{if(this.onResponse.length>0){if(e.messageClass===a.classes.RESPONSE){this.onResponse.execute(e,t);this.onResponse.complete()}else{this.onResponse.error(new o.TransactionFailed(e,t))}}}});Object.defineProperty(this,"run",{enumerable:true,configurable:true,writable:true,value:async()=>{try{this.retry();return await this.onResponse.asPromise()}catch(e){c("transaction run failed",e,this.protocol.type,this.request.toJSON());throw e}finally{if(this.timeoutHandle){clearTimeout(this.timeoutHandle)}}}});Object.defineProperty(this,"retry",{enumerable:true,configurable:true,writable:true,value:()=>{if(this.tries>=this.triesMax){c(`retry failed times:${this.tries} maxLimit:${this.triesMax}`);this.onResponse.error(new o.TransactionTimeout);return}this.protocol.sendStun(this.request,this.addr).catch((e=>{c("send stun failed",e)}));this.timeoutHandle=setTimeout(this.retry,this.timeoutDelay);this.timeoutDelay*=2;this.tries++}});this.triesMax=1+(this.retransmissions?this.retransmissions:a.RETRY_MAX)}cancel(){if(this.timeoutHandle)clearTimeout(this.timeoutHandle)}}t.Transaction=Transaction},17071:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.UdpTransport=void 0;const i=r(71891);const s=n(r(69565));const o=r(35437);const a=r(64487);const c=(0,s.default)("werift-ice:packages/ice/src/transport.ts");class UdpTransport{constructor(e,t,r){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"portRange",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"interfaceAddresses",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"socket",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onData",{enumerable:true,configurable:true,writable:true,value:()=>{}});Object.defineProperty(this,"send",{enumerable:true,configurable:true,writable:true,value:(e,t)=>new Promise(((r,n)=>{this.socket.send(e,t[1],t[0],(i=>{if(i){c("send error",t,e);n(i)}else{r()}}))}))});Object.defineProperty(this,"close",{enumerable:true,configurable:true,writable:true,value:()=>new Promise((e=>{this.socket.once("close",e);try{this.socket.close()}catch(t){e()}}))});this.socket=(0,i.createSocket)(this.type);this.socket.on("message",((e,t)=>{if((0,a.normalizeFamilyNodeV18)(t.family)===6){[t.address]=t.address.split("%")}try{this.onData(e,[t.address,t.port])}catch(e){c("onData error",e)}}))}static async init(e,t,r){const n=new UdpTransport(e,t,r);await n.init();return n}async init(){const e=(0,o.interfaceAddress)(this.type,this.interfaceAddresses);if(this.portRange){const t=await(0,o.findPort)(this.portRange[0],this.portRange[1],this.type,this.interfaceAddresses);this.socket.bind({port:t,address:e})}else{this.socket.bind({address:e})}await new Promise((e=>this.socket.once("listening",e)))}address(){return this.socket.address()}}t.UdpTransport=UdpTransport},39917:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.makeIntegrityKey=t.createTurnEndpoint=void 0;const i=r(6113);const s=r(48775);const o=n(r(69565));const a=n(r(54608));const c=n(r(36094));const u=r(68670);const d=r(35437);const p=r(49259);const m=r(40119);const y=r(73580);const g=r(58251);const b=r(21534);const v=r(17071);const w=(0,o.default)("werift-ice:packages/ice/src/turn/protocol.ts");const _=500;const C=600;const P=100663296;const O=285212672;class TurnTransport{constructor(e){Object.defineProperty(this,"turn",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:"turn"});Object.defineProperty(this,"localCandidate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"receiver",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"datagramReceived",{enumerable:true,configurable:true,writable:true,value:(e,t)=>{try{const r=(0,g.parseMessage)(e);if(!r){this.receiver?.dataReceived(e,this.localCandidate.component);return}if((r?.messageClass===y.classes.RESPONSE||r?.messageClass===y.classes.ERROR)&&this.turn.transactions[r.transactionIdHex]){const e=this.turn.transactions[r.transactionIdHex];e.responseReceived(r,t)}else if(r?.messageClass===y.classes.REQUEST){this.receiver?.requestReceived(r,t,this,e)}}catch(e){w("datagramReceived error",e)}}});e.onDatagramReceived=this.datagramReceived}async request(e,t,r){if(this.turn.transactions[e.transactionIdHex])throw new Error("exist");if(r){e.addMessageIntegrity(r);e.addFingerprint()}const n=new b.Transaction(e,t,this);this.turn.transactions[e.transactionIdHex]=n;try{return await n.run()}catch(e){throw e}finally{delete this.turn.transactions[e.transactionIdHex]}}async connectionMade(){}async sendData(e,t){await this.turn.sendData(e,t)}async sendStun(e,t){await this.turn.sendData(e.bytes,t)}}class TurnClient{constructor(e,t,r,n,i,s={}){Object.defineProperty(this,"server",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"username",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"password",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"lifetime",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"transport",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:s});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:"inner_turn"});Object.defineProperty(this,"onData",{enumerable:true,configurable:true,writable:true,value:new c.default});Object.defineProperty(this,"transactions",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"integrityKey",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"nonce",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"realm",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"relayedAddress",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mappedAddress",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"refreshHandle",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"channelNumber",{enumerable:true,configurable:true,writable:true,value:16384});Object.defineProperty(this,"channelByAddr",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"addrByChannel",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"localCandidate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"channelRefreshTime",{enumerable:true,configurable:true,writable:true,value:this.options.channelRefreshTime??_});Object.defineProperty(this,"onDatagramReceived",{enumerable:true,configurable:true,writable:true,value:()=>{}});Object.defineProperty(this,"channelBinding",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"channelRefreshAt",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"refresh",{enumerable:true,configurable:true,writable:true,value:e=>new a.default((async(t,r,n)=>{let i=true;n((()=>{i=false;r("cancel")}));while(i){const t=5/6*e*1e3;w("refresh delay",t,{exp:e});await(0,u.setTimeout)(t);const r=new g.Message(y.methods.REFRESH,y.classes.REQUEST);r.setAttribute("LIFETIME",e);try{const[t]=await this.requestWithRetry(r,this.server);e=t.getAttributeValue("LIFETIME");w("refresh",{exp:e})}catch(e){w("refresh error",e)}}}))})}async connectionMade(){this.transport.onData=(e,t)=>{this.datagramReceived(e,t)}}handleChannelData(e){const[t,r]=s.jspack.Unpack("!HH",e.slice(0,4));const n=this.addrByChannel[t];if(n){const t=e.subarray(4,4+r);this.onDatagramReceived(t,n);this.onData.execute(t,n)}}handleSTUNMessage(e,t){try{const r=(0,g.parseMessage)(e);if(!r)throw new Error("not stun message");if(r.messageClass===y.classes.RESPONSE||r.messageClass===y.classes.ERROR){const e=this.transactions[r.transactionIdHex];if(e){e.responseReceived(r,t)}}else if(r.messageClass===y.classes.REQUEST){this.onDatagramReceived(e,t)}if(r.getAttributeValue("DATA")){const e=r.getAttributeValue("DATA");this.onDatagramReceived(e,t);this.onData.execute(e,t)}}catch(t){w("parse error",e.toString())}}datagramReceived(e,t){if(e.length>=4&&isChannelData(e)){this.handleChannelData(e)}else{this.handleSTUNMessage(e,t)}}async connect(){const e=new g.Message(y.methods.ALLOCATE,y.classes.REQUEST);e.setAttribute("LIFETIME",this.lifetime).setAttribute("REQUESTED-TRANSPORT",O);const[t]=await this.requestWithRetry(e,this.server).catch((e=>{w("connect error",e);throw e}));this.relayedAddress=t.getAttributeValue("XOR-RELAYED-ADDRESS");this.mappedAddress=t.getAttributeValue("XOR-MAPPED-ADDRESS");const r=t.getAttributeValue("LIFETIME");w("connect",this.relayedAddress,this.mappedAddress,{exp:r});this.refreshHandle=(0,m.future)(this.refresh(r))}async createPermission(e){const t=new g.Message(y.methods.CREATE_PERMISSION,y.classes.REQUEST);t.setAttribute("XOR-PEER-ADDRESS",e).setAttribute("USERNAME",this.username).setAttribute("REALM",this.realm).setAttribute("NONCE",this.nonce);const[r]=await this.request(t,this.server).catch((e=>{t;throw e}));return r}async request(e,t){if(this.transactions[e.transactionIdHex]){throw new Error("exist")}if(this.integrityKey){e.setAttribute("USERNAME",this.username).setAttribute("REALM",this.realm).setAttribute("NONCE",this.nonce).addMessageIntegrity(this.integrityKey).addFingerprint()}const r=new b.Transaction(e,t,this);this.transactions[e.transactionIdHex]=r;try{return await r.run()}catch(e){throw e}finally{delete this.transactions[e.transactionIdHex]}}async requestWithRetry(e,t){let r,n;try{[r,n]=await this.request(e,t)}catch(t){if(t instanceof p.TransactionFailed==false){w("requestWithRetry error",t);throw t}this.server=t.addr;const[i]=t.response.getAttributeValue("ERROR-CODE");const s=t.response.getAttributeValue("NONCE");const o=t.response.getAttributeValue("REALM");if((i===401&&o||i===438&&this.realm)&&s){w("retry with nonce",i);this.nonce=s;if(i===401){this.realm=o}this.integrityKey=makeIntegrityKey(this.username,this.realm,this.password);e.transactionId=(0,m.randomTransactionId)();[r,n]=await this.request(e,this.server)}else{throw t}}return[r,n]}async sendData(e,t){const r=await this.getChannel(t);const n=s.jspack.Pack("!HH",[r.number,e.length]);this.transport.send(Buffer.concat([Buffer.from(n),e]),this.server)}async getChannel(e){if(this.channelBinding){await this.channelBinding}let t=this.channelByAddr[e.join("")];if(!t){this.channelByAddr[e.join("")]={number:this.channelNumber++,address:e};t=this.channelByAddr[e.join("")];this.addrByChannel[t.number]=e;this.channelBinding=this.channelBind(t.number,e);await this.channelBinding.catch((e=>{w("channelBind error",e);throw e}));this.channelRefreshAt=(0,d.int)(Date.now()/1e3)+this.channelRefreshTime;this.channelBinding=undefined;w("channelBind",t)}else if(this.channelRefreshAt<(0,d.int)(Date.now()/1e3)){this.channelBinding=this.channelBind(t.number,e);this.channelRefreshAt=(0,d.int)(Date.now()/1e3)+this.channelRefreshTime;await this.channelBinding.catch((e=>{w("channelBind error",e);throw e}));this.channelBinding=undefined;w("channelBind refresh",t)}return t}async channelBind(e,t){const r=new g.Message(y.methods.CHANNEL_BIND,y.classes.REQUEST);r.setAttribute("CHANNEL-NUMBER",e).setAttribute("XOR-PEER-ADDRESS",t);const[n]=await this.requestWithRetry(r,this.server);if(n.messageMethod!==y.methods.CHANNEL_BIND){throw new Error("should be CHANNEL_BIND")}}async sendStun(e,t){await this.transport.send(e.bytes,t)}}async function createTurnEndpoint(e,t,r,{lifetime:n,portRange:i,interfaceAddresses:s}){if(n==undefined){n=C}const o=await v.UdpTransport.init("udp4",i,s);const a=new TurnClient(e,t,r,n,o);await a.connectionMade();await a.connect();const c=new TurnTransport(a);return c}t.createTurnEndpoint=createTurnEndpoint;function makeIntegrityKey(e,t,r){return(0,i.createHash)("md5").update(Buffer.from([e,t,r].join(":"))).digest()}t.makeIntegrityKey=makeIntegrityKey;function isChannelData(e){return(e[0]&192)==64}},41497:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},64487:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.getHostAddresses=t.normalizeFamilyNodeV18=t.getGlobalIp=void 0;const a=o(r(22037));const c=s(r(6230));const u=r(43146);const d=r(25571);async function getGlobalIp(e,t){const r=new u.Connection(true,{stunServer:e??["stun.l.google.com",19302]});await r.gatherCandidates();const n=new d.StunProtocol(r);n.localCandidate=r.localCandidates[0];await n.connectionMade(true,undefined,t);const i=await(0,u.serverReflexiveCandidate)(n,["stun.l.google.com",19302]);await r.close();await n.close();if(!i?.host){throw new Error("host not exist")}return i?.host}t.getGlobalIp=getGlobalIp;function normalizeFamilyNodeV18(e){if(e==="IPv4")return 4;if(e==="IPv6")return 6;return e}t.normalizeFamilyNodeV18=normalizeFamilyNodeV18;function isAutoconfigurationAddress(e){return normalizeFamilyNodeV18(e.family)===4&&e.address?.startsWith("169.254.")}function nodeIpAddress(e){const t=["ipsec","tun","utun","tap"];const r=["vmnet","veth"];const n=a.default.networkInterfaces();const i=Object.keys(n).map((i=>{for(const e of[...t,...r]){if(i.startsWith(e)){return{nic:i,addresses:[]}}}const s=n[i].filter((t=>normalizeFamilyNodeV18(t.family)===e&&!c.isLoopback(t.address)&&!isAutoconfigurationAddress(t)));return{nic:i,addresses:s.map((e=>e.address))}})).filter((e=>!!e));i.sort(((e,t)=>e.nic.localeCompare(t.nic)));return Object.values(i).flatMap((e=>e.addresses))}function getHostAddresses(e,t){const r=[];if(e)r.push(...nodeIpAddress(4));if(t)r.push(...nodeIpAddress(6));return r}t.getHostAddresses=getHostAddresses},28540:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.leb128decode=t.AV1Obu=t.AV1RtpPayload=void 0;const n=r(561);const i=r(69565);const s=r(35437);const o=(0,i.debug)("werift-rtp : packages/rtp/src/codec/av1.ts");class AV1RtpPayload{constructor(){Object.defineProperty(this,"zBit_RtpStartsWithFragment",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"yBit_RtpEndsWithFragment",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"w_RtpNumObus",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"nBit_RtpStartsNewCodedVideoSequence",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"obu_or_fragment",{enumerable:true,configurable:true,writable:true,value:[]})}static isDetectedFinalPacketInSequence(e){return e.marker}get isKeyframe(){return this.nBit_RtpStartsNewCodedVideoSequence===1}static getFrame(e){const t=[];const r=e.flatMap((e=>e.obu_or_fragment)).reduce(((e,t,r)=>{e[r]=t;return e}),{});const n=Object.keys(r).length;for(const e of Object.keys(r).map(Number)){const i=r[e];if(!i)continue;const{data:s,isFragment:a}=i;if(a){let i=[];for(let t=e;t<n;t++){const e=r[t];if(e.isFragment){i.push(e.data);delete r[t]}else{break}}if(i.length<=1){o("fragment lost, maybe packet lost");i=[]}t.push(Buffer.concat(i))}else{t.push(s)}}const i=t.map((e=>AV1Obu.deSerialize(e)));const s=i.pop();return Buffer.concat([...i.map((e=>{e.obu_has_size_field=1;return e.serialize()})),s.serialize()])}}t.AV1RtpPayload=AV1RtpPayload;Object.defineProperty(AV1RtpPayload,"deSerialize",{enumerable:true,configurable:true,writable:true,value:e=>{const t=new AV1RtpPayload;let r=0;t.zBit_RtpStartsWithFragment=(0,s.getBit)(e[r],0);t.yBit_RtpEndsWithFragment=(0,s.getBit)(e[r],1);t.w_RtpNumObus=(0,s.getBit)(e[r],2,2);t.nBit_RtpStartsNewCodedVideoSequence=(0,s.getBit)(e[r],4);r++;if(t.nBit_RtpStartsNewCodedVideoSequence&&t.zBit_RtpStartsWithFragment){throw new Error}[...Array(t.w_RtpNumObus-1).keys()].forEach((n=>{const[i,s]=leb128decode(e.subarray(r));const o=r+s;const a=o+i;let c=false;if(t.zBit_RtpStartsWithFragment&&n===0){c=true}t.obu_or_fragment.push({data:e.subarray(o,a),isFragment:c});r+=s+i}));let n=false;if(t.yBit_RtpEndsWithFragment||t.w_RtpNumObus===1&&t.zBit_RtpStartsWithFragment){n=true}t.obu_or_fragment.push({data:e.subarray(r),isFragment:n});return t}});class AV1Obu{constructor(){Object.defineProperty(this,"obu_forbidden_bit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"obu_type",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"obu_extension_flag",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"obu_has_size_field",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"obu_reserved_1bit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"payload",{enumerable:true,configurable:true,writable:true,value:void 0})}static deSerialize(e){const t=new AV1Obu;let r=0;t.obu_forbidden_bit=(0,s.getBit)(e[r],0);t.obu_type=a[(0,s.getBit)(e[r],1,4)];t.obu_extension_flag=(0,s.getBit)(e[r],5);t.obu_has_size_field=(0,s.getBit)(e[r],6);t.obu_reserved_1bit=(0,s.getBit)(e[r],7);r++;t.payload=e.subarray(r);return t}serialize(){const e=new s.BitWriter2(8).set(this.obu_forbidden_bit).set(c[this.obu_type],4).set(this.obu_extension_flag).set(this.obu_has_size_field).set(this.obu_reserved_1bit).buffer;let t=Buffer.alloc(0);if(this.obu_has_size_field){t=n.LEB128.encode(this.payload.length)}return Buffer.concat([e,t,this.payload])}}t.AV1Obu=AV1Obu;function leb128decode(e){let t=0;let r=0;for(let n=0;n<8;n++){const i=e.readUInt8(n);t|=(i&127)<<n*7;r++;if(!(i&128)){break}}return[t,r]}t.leb128decode=leb128decode;const a={0:"Reserved",1:"OBU_SEQUENCE_HEADER",2:"OBU_TEMPORAL_DELIMITER",3:"OBU_FRAME_HEADER",4:"OBU_TILE_GROUP",5:"OBU_METADATA",6:"OBU_FRAME",7:"OBU_REDUNDANT_FRAME_HEADER",8:"OBU_TILE_LIST",15:"OBU_PADDING"};const c=Object.entries(a).reduce(((e,[t,r])=>{e[r]=Number(t);return e}),{})},52734:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DePacketizerBase=void 0;class DePacketizerBase{constructor(){Object.defineProperty(this,"payload",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"fragment",{enumerable:true,configurable:true,writable:true,value:void 0})}static deSerialize(e,t){return{}}static isDetectedFinalPacketInSequence(e){return true}get isKeyframe(){return true}}t.DePacketizerBase=DePacketizerBase},68134:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NalUnitType=t.H264RtpPayload=void 0;const n=r(35437);class H264RtpPayload{constructor(){Object.defineProperty(this,"f",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"nri",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"nalUnitType",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"s",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"e",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"r",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"nalUnitPayloadType",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"payload",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"fragment",{enumerable:true,configurable:true,writable:true,value:void 0})}static deSerialize(e,r){const i=new H264RtpPayload;let a=0;const c=e[a];i.f=(0,n.getBit)(c,0);i.nri=(0,n.getBit)(c,1,2);i.nalUnitType=(0,n.getBit)(c,3,5);a++;i.s=(0,n.getBit)(e[a],0);i.e=(0,n.getBit)(e[a],1);i.r=(0,n.getBit)(e[a],2);i.nalUnitPayloadType=(0,n.getBit)(e[a],3,5);a++;if(0<i.nalUnitType&&i.nalUnitType<t.NalUnitType.stap_a){i.payload=this.packaging(e)}else if(i.nalUnitType===t.NalUnitType.stap_a){let t=s;let r=Buffer.alloc(0);while(t<e.length){const n=e.readUInt16BE(t);t+=o;r=Buffer.concat([r,this.packaging(e.subarray(t,t+n))]);t+=n}i.payload=r}else if(i.nalUnitType===t.NalUnitType.fu_a){if(!r){r=Buffer.alloc(0)}const t=e.subarray(a);i.fragment=Buffer.concat([r,t]);if(i.e){const e=new n.BitStream(Buffer.alloc(1)).writeBits(1,0).writeBits(2,i.nri).writeBits(5,i.nalUnitPayloadType);const t=Buffer.concat([e.uint8Array,i.fragment]);i.fragment=undefined;i.payload=this.packaging(t)}}return i}static packaging(e){return Buffer.concat([i,e])}static isDetectedFinalPacketInSequence(e){return e.marker}get isKeyframe(){return this.nalUnitType===t.NalUnitType.idrSlice||this.nalUnitPayloadType===t.NalUnitType.idrSlice}get isPartitionHead(){if(this.nalUnitType===t.NalUnitType.fu_a||this.nalUnitType===t.NalUnitType.fu_b){return this.s!==0}return true}}t.H264RtpPayload=H264RtpPayload;t.NalUnitType={idrSlice:5,stap_a:24,stap_b:25,mtap16:26,mtap24:27,fu_a:28,fu_b:29};const i=Buffer.from([0,0,0,1]);const s=1;const o=2},74065:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.depacketizerCodecs=t.dePacketizeRtpPackets=void 0;const s=r(28540);const o=r(68134);const a=r(67847);const c=r(1105);const u=r(24594);i(r(28540),t);i(r(52734),t);i(r(68134),t);i(r(67847),t);i(r(1105),t);i(r(24594),t);function dePacketizeRtpPackets(e,t,r){const basicCodecParser=e=>{const n=[];for(const i of t){const t=e.deSerialize(i.payload,r);if(t.fragment){r??(r=Buffer.alloc(0));r=t.fragment}else if(t.payload){r=undefined}n.push(t)}const i=!!n.find((e=>e.isKeyframe));const s=Buffer.concat(n.map((e=>e.payload)).filter((e=>e)));return{isKeyframe:i,data:s,sequence:t.at(-1)?.header.sequenceNumber??0,timestamp:t.at(-1)?.header.timestamp??0,frameFragmentBuffer:r}};switch(e.toUpperCase()){case"AV1":{const e=t.map((e=>s.AV1RtpPayload.deSerialize(e.payload)));const r=!!e.find((e=>e.isKeyframe));const n=s.AV1RtpPayload.getFrame(e);return{isKeyframe:r,data:n,sequence:t.at(-1)?.header.sequenceNumber??0,timestamp:t.at(-1)?.header.timestamp??0}}case"MPEG4/ISO/AVC":return basicCodecParser(o.H264RtpPayload);case"VP8":return basicCodecParser(c.Vp8RtpPayload);case"VP9":return basicCodecParser(u.Vp9RtpPayload);case"OPUS":return basicCodecParser(a.OpusRtpPayload);default:throw new Error}}t.dePacketizeRtpPackets=dePacketizeRtpPackets;t.depacketizerCodecs=["MPEG4/ISO/AVC","VP8","VP9","OPUS","AV1"]},67847:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OpusRtpPayload=void 0;const n=r(35437);class OpusRtpPayload{constructor(){Object.defineProperty(this,"payload",{enumerable:true,configurable:true,writable:true,value:void 0})}static deSerialize(e){const t=new OpusRtpPayload;t.payload=e;return t}static isDetectedFinalPacketInSequence(e){return true}get isKeyframe(){return true}static createCodecPrivate(e=48e3){return Buffer.concat([Buffer.from("OpusHead"),(0,n.bufferWriter)([1,1],[1,2]),(0,n.bufferWriterLE)([2,4,2,1],[312,e,0,0])])}}t.OpusRtpPayload=OpusRtpPayload},1105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Vp8RtpPayload=void 0;const n=r(35437);class Vp8RtpPayload{constructor(){Object.defineProperty(this,"xBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"nBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"pid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"iBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"lBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"tBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"kBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"pictureId",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"payload",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"size0",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"hBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"ver",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"pBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"size1",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"size2",{enumerable:true,configurable:true,writable:true,value:0})}static deSerialize(e){const t=new Vp8RtpPayload;let r=0;t.xBit=(0,n.getBit)(e[r],0);t.nBit=(0,n.getBit)(e[r],2);t.sBit=(0,n.getBit)(e[r],3);t.pid=(0,n.getBit)(e[r],5,3);r++;if(t.xBit){t.iBit=(0,n.getBit)(e[r],0);t.lBit=(0,n.getBit)(e[r],1);t.tBit=(0,n.getBit)(e[r],2);t.kBit=(0,n.getBit)(e[r],3);r++}if(t.iBit){t.mBit=(0,n.getBit)(e[r],0);if(t.mBit){const i=(0,n.paddingByte)((0,n.getBit)(e[r],1,7));const s=(0,n.paddingByte)(e[r+1]);t.pictureId=parseInt(i+s,2);r+=2}else{t.pictureId=(0,n.getBit)(e[r],1,7);r++}}if(t.lBit){r++}if(t.lBit||t.kBit){if(t.tBit){}if(t.kBit){}r++}t.payload=e.subarray(r);if(t.payloadHeaderExist){t.size0=(0,n.getBit)(e[r],0,3);t.hBit=(0,n.getBit)(e[r],3);t.ver=(0,n.getBit)(e[r],4,3);t.pBit=(0,n.getBit)(e[r],7);r++;t.size1=e[r];r++;t.size2=e[r]}return t}static isDetectedFinalPacketInSequence(e){return e.marker}get isKeyframe(){return this.pBit===0}get isPartitionHead(){return this.sBit===1}get payloadHeaderExist(){return this.sBit===1&&this.pid===0}get size(){if(this.payloadHeaderExist){const e=this.size0+8*this.size1+2048*this.size2;return e}return 0}}t.Vp8RtpPayload=Vp8RtpPayload},24594:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Vp9RtpPayload=void 0;const n=r(35437);class Vp9RtpPayload{constructor(){Object.defineProperty(this,"iBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"pBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"lBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"fBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"bBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"eBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"vBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"zBit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"m",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"pictureId",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"tid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"u",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"d",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"tl0PicIdx",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"pDiff",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"n_s",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"y",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"g",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"width",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"height",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"n_g",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"pgT",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"pgU",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"pgP_Diff",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"payload",{enumerable:true,configurable:true,writable:true,value:void 0})}static deSerialize(e){const{p:t,offset:r}=this.parseRtpPayload(e);t.payload=e.subarray(r);return t}static parseRtpPayload(e){const t=new Vp9RtpPayload;let r=0;t.iBit=(0,n.getBit)(e[r],0);t.pBit=(0,n.getBit)(e[r],1);t.lBit=(0,n.getBit)(e[r],2);t.fBit=(0,n.getBit)(e[r],3);t.bBit=(0,n.getBit)(e[r],4);t.eBit=(0,n.getBit)(e[r],5);t.vBit=(0,n.getBit)(e[r],6);t.zBit=(0,n.getBit)(e[r],7);r++;if(t.iBit){t.m=(0,n.getBit)(e[r],0);if(t.m){const i=(0,n.paddingByte)((0,n.getBit)(e[r],1,7));const s=(0,n.paddingByte)(e[r+1]);t.pictureId=parseInt(i+s,2);r+=2}else{t.pictureId=(0,n.getBit)(e[r],1,7);r++}}if(t.lBit){t.tid=(0,n.getBit)(e[r],0,3);t.u=(0,n.getBit)(e[r],3);t.sid=(0,n.getBit)(e[r],4,3);t.d=(0,n.getBit)(e[r],7);r++;if(t.fBit===0){t.tl0PicIdx=e[r];r++}}if(t.fBit&&t.pBit){for(;;){t.pDiff=[...t.pDiff,(0,n.getBit)(e[r],0,7)];const i=(0,n.getBit)(e[r],7);r++;if(i===0)break}}if(t.vBit){t.n_s=(0,n.getBit)(e[r],0,3);t.y=(0,n.getBit)(e[r],3);t.g=(0,n.getBit)(e[r],4);r++;if(t.y){[...Array(t.n_s+1)].forEach((()=>{t.width.push(e.readUInt16BE(r));r+=2;t.height.push(e.readUInt16BE(r));r+=2}))}if(t.g){t.n_g=e[r];r++}if(t.n_g>0){[...Array(t.n_g).keys()].forEach((i=>{t.pgT.push((0,n.getBit)(e[r],0,3));t.pgU.push((0,n.getBit)(e[r],3));const s=(0,n.getBit)(e[r],4,2);r++;t.pgP_Diff[i]=[];if(s>0){[...Array(s)].forEach((()=>{t.pgP_Diff[i].push(e[r]);r++}))}}))}}return{offset:r,p:t}}static isDetectedFinalPacketInSequence(e){return e.marker}get isKeyframe(){return!!(!this.pBit&&this.bBit&&(!this.sid||!this.lBit))}get isPartitionHead(){return this.bBit&&(!this.lBit||!this.d)}}t.Vp9RtpPayload=Vp9RtpPayload},218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isMedia=t.timer=t.Int=t.growBufferSize=t.enumerate=void 0;function enumerate(e){return e.map(((e,t)=>[t,e]))}t.enumerate=enumerate;function growBufferSize(e,t){const r=Buffer.alloc(t);e.copy(r);return r}t.growBufferSize=growBufferSize;function Int(e){return parseInt(e.toString(),10)}t.Int=Int;t.timer={setTimeout:(...e)=>{const t=setTimeout(...e);return()=>clearTimeout(t)},setInterval:(...e)=>{const t=setInterval((()=>{e[0]()}),...e.slice(1));return()=>clearInterval(t)}};function isMedia(e){const t=e[0];return t>127&&t<192}t.isMedia=isMedia},34566:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});r(14300);i(r(35437),t);i(r(74065),t);i(r(218),t);i(r(5639),t);i(r(65869),t);i(r(71946),t);i(r(10472),t);i(r(7453),t);i(r(81043),t);i(r(29833),t);i(r(20234),t);i(r(26192),t);i(r(20118),t);i(r(18821),t);i(r(65668),t);i(r(8959),t);i(r(67361),t);i(r(76507),t);i(r(94872),t);i(r(88111),t);i(r(14413),t);i(r(42570),t);i(r(41136),t)},5639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RtcpHeader=t.RTCP_HEADER_SIZE=void 0;const n=r(35437);t.RTCP_HEADER_SIZE=4;class RtcpHeader{constructor(e={}){Object.defineProperty(this,"version",{enumerable:true,configurable:true,writable:true,value:2});Object.defineProperty(this,"padding",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"count",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"length",{enumerable:true,configurable:true,writable:true,value:0});Object.assign(this,e)}serialize(){const e=new n.BitWriter(8);e.set(2,0,this.version);if(this.padding)e.set(1,2,1);e.set(5,3,this.count);const t=(0,n.bufferWriter)([1,1,2],[e.value,this.type,this.length]);return t}static deSerialize(e){const[t,r,i]=(0,n.bufferReader)(e,[1,1,2]);const s=(0,n.getBit)(t,0,2);const o=(0,n.getBit)(t,2,1)>0;const a=(0,n.getBit)(t,3,5);return new RtcpHeader({version:s,padding:o,count:a,type:r,length:i})}}t.RtcpHeader=RtcpHeader},83469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FullIntraRequest=void 0;const n=r(35437);class FullIntraRequest{constructor(e={}){Object.defineProperty(this,"count",{enumerable:true,configurable:true,writable:true,value:FullIntraRequest.count});Object.defineProperty(this,"senderSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mediaSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"fir",{enumerable:true,configurable:true,writable:true,value:[]});Object.assign(this,e)}get length(){return Math.floor(this.serialize().length/4-1)}static deSerialize(e){const[t,r]=(0,n.bufferReader)(e,[4,4]);const i=[];for(let t=8;t<e.length;t+=8){i.push({ssrc:e.readUInt32BE(t),sequenceNumber:e[t+4]})}return new FullIntraRequest({senderSsrc:t,mediaSsrc:r,fir:i})}serialize(){const e=(0,n.bufferWriter)([4,4],[this.senderSsrc,this.mediaSsrc]);const t=Buffer.alloc(this.fir.length*8);this.fir.forEach((({ssrc:e,sequenceNumber:r},n)=>{t.writeUInt32BE(e,n*8);t[n*8+4]=r}));return Buffer.concat([e,t])}}t.FullIntraRequest=FullIntraRequest;Object.defineProperty(FullIntraRequest,"count",{enumerable:true,configurable:true,writable:true,value:4})},65869:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RtcpPayloadSpecificFeedback=void 0;const i=n(r(69565));const s=r(81043);const o=r(83469);const a=r(71946);const c=r(10472);const u=(0,i.default)("werift/rtp/rtcp/psfb/index");class RtcpPayloadSpecificFeedback{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:RtcpPayloadSpecificFeedback.type});Object.defineProperty(this,"feedback",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}serialize(){const e=this.feedback.serialize();return s.RtcpPacketConverter.serialize(this.type,this.feedback.count,e,this.feedback.length)}static deSerialize(e,t){let r;switch(t.count){case o.FullIntraRequest.count:r=o.FullIntraRequest.deSerialize(e);break;case a.PictureLossIndication.count:r=a.PictureLossIndication.deSerialize(e);break;case c.ReceiverEstimatedMaxBitrate.count:r=c.ReceiverEstimatedMaxBitrate.deSerialize(e);break;default:u("unknown psfb packet",t.count);break}return new RtcpPayloadSpecificFeedback({feedback:r})}}t.RtcpPayloadSpecificFeedback=RtcpPayloadSpecificFeedback;Object.defineProperty(RtcpPayloadSpecificFeedback,"type",{enumerable:true,configurable:true,writable:true,value:206})},71946:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PictureLossIndication=void 0;const n=r(35437);class PictureLossIndication{constructor(e={}){Object.defineProperty(this,"count",{enumerable:true,configurable:true,writable:true,value:PictureLossIndication.count});Object.defineProperty(this,"length",{enumerable:true,configurable:true,writable:true,value:2});Object.defineProperty(this,"senderSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mediaSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}static deSerialize(e){const[t,r]=(0,n.bufferReader)(e,[4,4]);return new PictureLossIndication({senderSsrc:t,mediaSsrc:r})}serialize(){return(0,n.bufferWriter)([4,4],[this.senderSsrc,this.mediaSsrc])}}t.PictureLossIndication=PictureLossIndication;Object.defineProperty(PictureLossIndication,"count",{enumerable:true,configurable:true,writable:true,value:1})},10472:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ReceiverEstimatedMaxBitrate=void 0;const n=r(35437);class ReceiverEstimatedMaxBitrate{constructor(e={}){Object.defineProperty(this,"length",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"count",{enumerable:true,configurable:true,writable:true,value:ReceiverEstimatedMaxBitrate.count});Object.defineProperty(this,"senderSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mediaSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"uniqueID",{enumerable:true,configurable:true,writable:true,value:"REMB"});Object.defineProperty(this,"ssrcNum",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"brExp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"brMantissa",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"bitrate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"ssrcFeedbacks",{enumerable:true,configurable:true,writable:true,value:[]});Object.assign(this,e)}static deSerialize(e){const[t,r,i,s,o]=(0,n.bufferReader)(e,[4,4,4,1,1]);const a=(0,n.getBit)(o,0,6);const c=((0,n.getBit)(o,6,2)<<16)+(e[14]<<8)+e[15];const u=a>46?18446744073709551615n:BigInt(c)<<BigInt(a);const d=[];for(let t=16;t<e.length;t+=4){const r=e.slice(t).readUIntBE(0,4);d.push(r)}return new ReceiverEstimatedMaxBitrate({senderSsrc:t,mediaSsrc:r,uniqueID:(0,n.bufferWriter)([4],[i]).toString(),ssrcNum:s,brExp:a,brMantissa:c,ssrcFeedbacks:d,bitrate:u})}serialize(){const e=Buffer.concat([(0,n.bufferWriter)([4,4],[this.senderSsrc,this.mediaSsrc]),Buffer.from(this.uniqueID),(0,n.bufferWriter)([1],[this.ssrcNum])]);const t=new n.BitWriter(24);t.set(6,0,this.brExp).set(18,6,this.brMantissa);const r=Buffer.concat(this.ssrcFeedbacks.map((e=>(0,n.bufferWriter)([4],[e]))));const i=Buffer.concat([e,(0,n.bufferWriter)([3],[t.value]),r]);this.length=i.length/4;return i}}t.ReceiverEstimatedMaxBitrate=ReceiverEstimatedMaxBitrate;Object.defineProperty(ReceiverEstimatedMaxBitrate,"count",{enumerable:true,configurable:true,writable:true,value:15})},7453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RtcpReceiverInfo=t.RtcpRrPacket=void 0;const n=r(35437);const i=r(81043);class RtcpRrPacket{constructor(e={}){Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"reports",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:RtcpRrPacket.type});Object.assign(this,e)}serialize(){let e=(0,n.bufferWriter)([4],[this.ssrc]);e=Buffer.concat([e,...this.reports.map((e=>e.serialize()))]);return i.RtcpPacketConverter.serialize(RtcpRrPacket.type,this.reports.length,e,Math.floor(e.length/4))}static deSerialize(e,t){const[r]=(0,n.bufferReader)(e,[4]);let i=4;const s=[];for(let r=0;r<t;r++){s.push(RtcpReceiverInfo.deSerialize(e.slice(i,i+24)));i+=24}return new RtcpRrPacket({ssrc:r,reports:s})}}t.RtcpRrPacket=RtcpRrPacket;Object.defineProperty(RtcpRrPacket,"type",{enumerable:true,configurable:true,writable:true,value:201});class RtcpReceiverInfo{constructor(e={}){Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"fractionLost",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"packetsLost",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"highestSequence",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"jitter",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"lsr",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"dlsr",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}toJSON(){return{ssrc:this.ssrc,fractionLost:this.fractionLost,packetsLost:this.packetsLost,highestSequence:this.highestSequence,jitter:this.jitter,lsr:this.lsr,dlsr:this.dlsr}}serialize(){return(0,n.bufferWriter)([4,1,3,4,4,4,4],[this.ssrc,this.fractionLost,this.packetsLost,this.highestSequence,this.jitter,this.lsr,this.dlsr])}static deSerialize(e){const[t,r,i,s,o,a,c]=(0,n.bufferReader)(e,[4,1,3,4,4,4,4]);return new RtcpReceiverInfo({ssrc:t,fractionLost:r,packetsLost:i,highestSequence:s,jitter:o,lsr:a,dlsr:c})}}t.RtcpReceiverInfo=RtcpReceiverInfo},81043:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.isRtcp=t.RtcpPacketConverter=void 0;const i=n(r(69565));const s=r(5639);const o=r(65869);const a=r(7453);const c=r(29833);const u=r(20118);const d=r(18821);const p=(0,i.default)("werift-rtp:packages/rtp/src/rtcp/rtcp.ts");class RtcpPacketConverter{static serialize(e,t,r,n){const i=new s.RtcpHeader({type:e,count:t,version:2,length:n});const o=i.serialize();return Buffer.concat([o,r])}static deSerialize(e){let t=0;const r=[];while(t<e.length){const n=s.RtcpHeader.deSerialize(e.subarray(t,t+s.RTCP_HEADER_SIZE));t+=s.RTCP_HEADER_SIZE;let i=e.subarray(t);t+=n.length*4;if(n.padding){i=i.subarray(0,i.length-i.subarray(-1)[0])}try{switch(n.type){case d.RtcpSrPacket.type:r.push(d.RtcpSrPacket.deSerialize(i,n.count));break;case a.RtcpRrPacket.type:r.push(a.RtcpRrPacket.deSerialize(i,n.count));break;case u.RtcpSourceDescriptionPacket.type:r.push(u.RtcpSourceDescriptionPacket.deSerialize(i,n));break;case c.RtcpTransportLayerFeedback.type:r.push(c.RtcpTransportLayerFeedback.deSerialize(i,n));break;case o.RtcpPayloadSpecificFeedback.type:r.push(o.RtcpPayloadSpecificFeedback.deSerialize(i,n));break;default:break}}catch(e){p("deSerialize RTCP",e)}}return r}}t.RtcpPacketConverter=RtcpPacketConverter;function isRtcp(e){return e.length>=2&&e[1]>=192&&e[1]<=208}t.isRtcp=isRtcp},29833:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RtcpTransportLayerFeedback=void 0;const i=n(r(69565));const s=r(20234);const o=r(26192);const a=(0,i.default)("werift-rtp:packages/rtp/rtcp/rtpfb/index");class RtcpTransportLayerFeedback{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:RtcpTransportLayerFeedback.type});Object.defineProperty(this,"feedback",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"header",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}serialize(){const e=this.feedback.serialize();return e}static deSerialize(e,t){let r;switch(t.count){case s.GenericNack.count:r=s.GenericNack.deSerialize(e,t);break;case o.TransportWideCC.count:r=o.TransportWideCC.deSerialize(e,t);break;default:a("unknown rtpfb packet",t.count);break}return new RtcpTransportLayerFeedback({feedback:r,header:t})}}t.RtcpTransportLayerFeedback=RtcpTransportLayerFeedback;Object.defineProperty(RtcpTransportLayerFeedback,"type",{enumerable:true,configurable:true,writable:true,value:205})},20234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GenericNack=void 0;const n=r(29833);const i=r(35437);const s=r(5639);class GenericNack{toJSON(){return{lost:this.lost,senderSsrc:this.senderSsrc,mediaSourceSsrc:this.mediaSourceSsrc}}constructor(e={}){Object.defineProperty(this,"count",{enumerable:true,configurable:true,writable:true,value:GenericNack.count});Object.defineProperty(this,"header",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"senderSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mediaSourceSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"lost",{enumerable:true,configurable:true,writable:true,value:[]});Object.assign(this,e);if(!this.header){this.header=new s.RtcpHeader({type:n.RtcpTransportLayerFeedback.type,count:this.count,version:2})}}static deSerialize(e,t){const[r,n]=(0,i.bufferReader)(e,[4,4]);const s=[];for(let t=8;t<e.length;t+=4){const[r,n]=(0,i.bufferReader)(e.subarray(t),[2,2]);s.push(r);for(let e=0;e<16;e++){if(n>>e&1){s.push(r+e+1)}}}return new GenericNack({header:t,senderSsrc:r,mediaSourceSsrc:n,lost:s})}serialize(){const e=(0,i.bufferWriter)([4,4],[this.senderSsrc,this.mediaSourceSsrc]);const t=[];if(this.lost.length>0){let e=this.lost[0],r=0;this.lost.slice(1).forEach((n=>{const s=n-e-1;if(s>=0&&s<16){r|=1<<s}else{t.push((0,i.bufferWriter)([2,2],[e,r]));e=n;r=0}}));t.push((0,i.bufferWriter)([2,2],[e,r]))}const r=Buffer.concat([e,Buffer.concat(t)]);this.header.length=r.length/4;return Buffer.concat([this.header.serialize(),r])}}t.GenericNack=GenericNack;Object.defineProperty(GenericNack,"count",{enumerable:true,configurable:true,writable:true,value:1})},26192:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.PacketResult=t.PacketStatus=t.PacketChunk=t.RecvDelta=t.StatusVectorChunk=t.RunLengthChunk=t.TransportWideCC=void 0;const i=n(r(69565));const s=r(35437);const o=r(5639);const a=(0,i.default)("werift/rtp/rtcp/rtpfb/twcc");class TransportWideCC{constructor(e={}){Object.defineProperty(this,"count",{enumerable:true,configurable:true,writable:true,value:TransportWideCC.count});Object.defineProperty(this,"length",{enumerable:true,configurable:true,writable:true,value:2});Object.defineProperty(this,"senderSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mediaSourceSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"baseSequenceNumber",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"packetStatusCount",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"referenceTime",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"fbPktCount",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"packetChunks",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"recvDeltas",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"header",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e);if(!this.header){this.header=new o.RtcpHeader({type:205,count:this.count,version:2})}}static deSerialize(e,t){const[r,n,i,o,a,d]=(0,s.bufferReader)(e,[4,4,2,2,3,1]);const p=[];const m=[];let y=16;for(let t=0;t<o;){const r=(0,s.getBit)(e.slice(y,y+1)[0],0,1);let n;switch(r){case c.TypeTCCRunLengthChunk:{const r=RunLengthChunk.deSerialize(e.slice(y,y+2));n=r;const i=Math.min(o-t,r.runLength);if(r.packetStatus===u.TypeTCCPacketReceivedSmallDelta||r.packetStatus===u.TypeTCCPacketReceivedLargeDelta){for(let e=0;e<i;e++){m.push(new RecvDelta({type:r.packetStatus}))}}t+=i}break;case c.TypeTCCStatusVectorChunk:{const r=StatusVectorChunk.deSerialize(e.slice(y,y+2));n=r;if(r.symbolSize===0){r.symbolList.forEach((e=>{if(e===u.TypeTCCPacketReceivedSmallDelta){m.push(new RecvDelta({type:u.TypeTCCPacketReceivedSmallDelta}))}}))}if(r.symbolSize===1){r.symbolList.forEach((e=>{if(e===u.TypeTCCPacketReceivedSmallDelta||e===u.TypeTCCPacketReceivedLargeDelta){m.push(new RecvDelta({type:e}))}}))}t+=r.symbolList.length}break}if(!n)throw new Error;y+=2;p.push(n)}let g=y;m.forEach((t=>{if(t.type===u.TypeTCCPacketReceivedSmallDelta){t.deSerialize(e.slice(g,g+1));g++}if(t.type===u.TypeTCCPacketReceivedLargeDelta){t.deSerialize(e.slice(g,g+2));g+=2}}));return new TransportWideCC({senderSsrc:r,mediaSourceSsrc:n,baseSequenceNumber:i,packetStatusCount:o,referenceTime:a,fbPktCount:d,recvDeltas:m,packetChunks:p,header:t})}serialize(){const e=(0,s.bufferWriter)([4,4,2,2,3,1],[this.senderSsrc,this.mediaSourceSsrc,this.baseSequenceNumber,this.packetStatusCount,this.referenceTime,this.fbPktCount]);const t=Buffer.concat(this.packetChunks.map((e=>e.serialize())));const r=Buffer.concat(this.recvDeltas.map((e=>{try{return e.serialize()}catch(e){a(e?.message);return undefined}})).filter((e=>e)));const n=Buffer.concat([e,t,r]);if(this.header.padding&&n.length%4!==0){const e=4-n.length%4;const t=Buffer.alloc(e);t[t.length-1]=t.length;this.header.length=Math.floor((n.length+t.length)/4);return Buffer.concat([this.header.serialize(),n,t])}this.header.length=Math.floor(n.length/4);return Buffer.concat([this.header.serialize(),n])}get packetResults(){const e=this.baseSequenceNumber-1;const t=this.packetChunks.filter((e=>e instanceof RunLengthChunk)).map((t=>t.results(e))).flatMap((e=>e));let r=0;const n=BigInt(this.referenceTime)*64n;let i=n;for(const e of t){const t=this.recvDeltas[r];if(!e.received||!t){continue}i+=BigInt(t.delta)/1000n;e.delta=t.delta;e.receivedAtMs=Number(i);r++}return t}}t.TransportWideCC=TransportWideCC;Object.defineProperty(TransportWideCC,"count",{enumerable:true,configurable:true,writable:true,value:15});class RunLengthChunk{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"packetStatus",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"runLength",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e);this.type=c.TypeTCCRunLengthChunk}static deSerialize(e){const t=(0,s.getBit)(e[0],1,2);const r=((0,s.getBit)(e[0],3,5)<<8)+e[1];return new RunLengthChunk({type:0,packetStatus:t,runLength:r})}serialize(){const e=new s.BitWriter2(16).set(0).set(this.packetStatus,2).set(this.runLength,13).buffer;return e}results(e){const t=this.packetStatus===u.TypeTCCPacketReceivedSmallDelta||this.packetStatus===u.TypeTCCPacketReceivedLargeDelta;const r=[];for(let n=0;n<=this.runLength;++n){r.push(new PacketResult({sequenceNumber:++e,received:t}))}return r}}t.RunLengthChunk=RunLengthChunk;class StatusVectorChunk{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"symbolSize",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"symbolList",{enumerable:true,configurable:true,writable:true,value:[]});Object.assign(this,e)}static deSerialize(e){const t=c.TypeTCCStatusVectorChunk;let r=(0,s.getBit)(e[0],1,1);const n=[];function range(e,t){for(let r=0;r<e;r++){t(r)}}switch(r){case 0:range(6,(t=>n.push((0,s.getBit)(e[0],2+t,1))));range(8,(t=>n.push((0,s.getBit)(e[1],t,1))));break;case 1:range(3,(t=>n.push((0,s.getBit)(e[0],2+t*2,2))));range(4,(t=>n.push((0,s.getBit)(e[1],t*2,2))));break;default:r=((0,s.getBit)(e[0],2,6)<<8)+e[1]}return new StatusVectorChunk({type:t,symbolSize:r,symbolList:n})}serialize(){const e=Buffer.alloc(2);const t=new s.BitWriter2(16).set(1).set(this.symbolSize);const r=this.symbolSize===0?1:2;this.symbolList.forEach((e=>{t.set(e,r)}));e.writeUInt16BE(t.value);return e}}t.StatusVectorChunk=StatusVectorChunk;class RecvDelta{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"delta",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"parsed",{enumerable:true,configurable:true,writable:true,value:false});Object.assign(this,e)}static deSerialize(e){let t;let r;if(e.length===1){t=u.TypeTCCPacketReceivedSmallDelta;r=250*e[0]}else if(e.length===2){t=u.TypeTCCPacketReceivedLargeDelta;r=250*e.readInt16BE()}if(t===undefined||r===undefined)throw new Error;return new RecvDelta({type:t,delta:r})}deSerialize(e){const t=RecvDelta.deSerialize(e);this.delta=t.delta}parseDelta(){this.delta=Math.floor(this.delta/250);if(this.delta<0||this.delta>255){if(this.delta>32767)this.delta=32767;if(this.delta<-32768)this.delta=-32768;if(!this.type)this.type=u.TypeTCCPacketReceivedLargeDelta}else{if(!this.type)this.type=u.TypeTCCPacketReceivedSmallDelta}this.parsed=true}serialize(){if(!this.parsed)this.parseDelta();if(this.type===u.TypeTCCPacketReceivedSmallDelta){const e=Buffer.alloc(1);e.writeUInt8(this.delta);return e}else if(this.type===u.TypeTCCPacketReceivedLargeDelta){const e=Buffer.alloc(2);e.writeInt16BE(this.delta);return e}throw new Error("errDeltaExceedLimit "+this.delta+" "+this.type)}}t.RecvDelta=RecvDelta;var c;(function(e){e[e["TypeTCCRunLengthChunk"]=0]="TypeTCCRunLengthChunk";e[e["TypeTCCStatusVectorChunk"]=1]="TypeTCCStatusVectorChunk";e[e["packetStatusChunkLength"]=2]="packetStatusChunkLength"})(c||(t.PacketChunk=c={}));var u;(function(e){e[e["TypeTCCPacketNotReceived"]=0]="TypeTCCPacketNotReceived";e[e["TypeTCCPacketReceivedSmallDelta"]=1]="TypeTCCPacketReceivedSmallDelta";e[e["TypeTCCPacketReceivedLargeDelta"]=2]="TypeTCCPacketReceivedLargeDelta";e[e["TypeTCCPacketReceivedWithoutDelta"]=3]="TypeTCCPacketReceivedWithoutDelta"})(u||(t.PacketStatus=u={}));class PacketResult{constructor(e){Object.defineProperty(this,"sequenceNumber",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"delta",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"received",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"receivedAtMs",{enumerable:true,configurable:true,writable:true,value:0});Object.assign(this,e)}}t.PacketResult=PacketResult},20118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SourceDescriptionItem=t.SourceDescriptionChunk=t.RtcpSourceDescriptionPacket=void 0;const n=r(35437);const i=r(81043);class RtcpSourceDescriptionPacket{constructor(e){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:RtcpSourceDescriptionPacket.type});Object.defineProperty(this,"chunks",{enumerable:true,configurable:true,writable:true,value:[]});Object.assign(this,e)}get length(){let e=0;this.chunks.forEach((t=>e+=t.length));return e}serialize(){let e=Buffer.concat(this.chunks.map((e=>e.serialize())));while(e.length%4)e=Buffer.concat([e,Buffer.from([0])]);return i.RtcpPacketConverter.serialize(this.type,this.chunks.length,e,e.length/4)}static deSerialize(e,t){const r=[];for(let t=0;t<e.length;){const n=SourceDescriptionChunk.deSerialize(e.slice(t));r.push(n);t+=n.length}return new RtcpSourceDescriptionPacket({chunks:r})}}t.RtcpSourceDescriptionPacket=RtcpSourceDescriptionPacket;Object.defineProperty(RtcpSourceDescriptionPacket,"type",{enumerable:true,configurable:true,writable:true,value:202});class SourceDescriptionChunk{constructor(e={}){Object.defineProperty(this,"source",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"items",{enumerable:true,configurable:true,writable:true,value:[]});Object.assign(this,e)}get length(){let e=4;this.items.forEach((t=>e+=t.length));e+=1;e+=getPadding(e);return e}serialize(){const e=Buffer.concat([(0,n.bufferWriter)([4],[this.source]),Buffer.concat(this.items.map((e=>e.serialize())))]);const t=Buffer.concat([e,Buffer.alloc(getPadding(e.length))]);return t}static deSerialize(e){const t=e.readUInt32BE();const r=[];for(let t=4;t<e.length;){const n=e[t];if(n===0)break;const i=SourceDescriptionItem.deSerialize(e.slice(t));r.push(i);t+=i.length}return new SourceDescriptionChunk({source:t,items:r})}}t.SourceDescriptionChunk=SourceDescriptionChunk;class SourceDescriptionItem{constructor(e){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"text",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}get length(){return 1+1+Buffer.from(this.text).length}serialize(){const e=Buffer.from(this.text);return Buffer.concat([(0,n.bufferWriter)([1,1],[this.type,e.length]),e])}static deSerialize(e){const t=e[0];const r=e[1];const n=e.slice(2,2+r).toString();return new SourceDescriptionItem({type:t,text:n})}}t.SourceDescriptionItem=SourceDescriptionItem;function getPadding(e){if(e%4==0){return 0}return 4-e%4}},18821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ntpTime2Sec=t.RtcpSenderInfo=t.RtcpSrPacket=void 0;const n=r(35437);const i=r(7453);const s=r(81043);class RtcpSrPacket{constructor(e){Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"senderInfo",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"reports",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:RtcpSrPacket.type});Object.assign(this,e)}toJSON(){return{ssrc:this.ssrc,senderInfo:this.senderInfo.toJSON(),reports:this.reports.map((e=>e.toJSON()))}}serialize(){let e=Buffer.alloc(4);e.writeUInt32BE(this.ssrc);e=Buffer.concat([e,this.senderInfo.serialize()]);e=Buffer.concat([e,...this.reports.map((e=>e.serialize()))]);return s.RtcpPacketConverter.serialize(RtcpSrPacket.type,this.reports.length,e,Math.floor(e.length/4))}static deSerialize(e,t){const r=e.readUInt32BE();const n=RtcpSenderInfo.deSerialize(e.subarray(4,24));let s=24;const o=[];for(let r=0;r<t;r++){o.push(i.RtcpReceiverInfo.deSerialize(e.subarray(s,s+24)));s+=24}const a=new RtcpSrPacket({ssrc:r,senderInfo:n,reports:o});return a}}t.RtcpSrPacket=RtcpSrPacket;Object.defineProperty(RtcpSrPacket,"type",{enumerable:true,configurable:true,writable:true,value:200});class RtcpSenderInfo{constructor(e={}){Object.defineProperty(this,"ntpTimestamp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtpTimestamp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"packetCount",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"octetCount",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}toJSON(){return{ntpTimestamp:(0,t.ntpTime2Sec)(this.ntpTimestamp),rtpTimestamp:this.rtpTimestamp}}serialize(){return(0,n.bufferWriter)([8,4,4,4],[this.ntpTimestamp,this.rtpTimestamp,this.packetCount,this.octetCount])}static deSerialize(e){const[t,r,i,s]=(0,n.bufferReader)(e,[8,4,4,4]);return new RtcpSenderInfo({ntpTimestamp:t,rtpTimestamp:r,packetCount:i,octetCount:s})}}t.RtcpSenderInfo=RtcpSenderInfo;const ntpTime2Sec=e=>{const[t,r]=(0,n.bufferReader)((0,n.bufferWriter)([8],[e]),[4,4]);return Number(`${t}.${r}`)};t.ntpTime2Sec=ntpTime2Sec},65668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.deserializeAudioLevelIndication=t.deserializeAbsSendTime=t.deserializeUint16BE=t.deserializeString=t.serializeAudioLevelIndication=t.serializeAbsSendTime=t.serializeTransportWideCC=t.serializeRepairedRtpStreamId=t.serializeSdesRTPStreamID=t.serializeSdesMid=t.rtpHeaderExtensionsParser=t.RTP_EXTENSION_URI=void 0;const n=r(35437);t.RTP_EXTENSION_URI={sdesMid:"urn:ietf:params:rtp-hdrext:sdes:mid",sdesRTPStreamID:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",repairedRtpStreamId:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",transportWideCC:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",absSendTime:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",dependencyDescriptor:"https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",audioLevelIndication:"urn:ietf:params:rtp-hdrext:ssrc-audio-level"};function rtpHeaderExtensionsParser(e,r){return e.map((e=>{const n=r[e.id];if(!n){return{uri:"unknown",value:e.payload}}switch(n){case t.RTP_EXTENSION_URI.sdesMid:case t.RTP_EXTENSION_URI.sdesRTPStreamID:case t.RTP_EXTENSION_URI.repairedRtpStreamId:return{uri:n,value:deserializeString(e.payload)};case t.RTP_EXTENSION_URI.transportWideCC:return{uri:n,value:deserializeUint16BE(e.payload)};case t.RTP_EXTENSION_URI.absSendTime:return{uri:n,value:deserializeAbsSendTime(e.payload)};case t.RTP_EXTENSION_URI.audioLevelIndication:{return{uri:n,value:deserializeAudioLevelIndication(e.payload)}}default:return{uri:n,value:e.payload}}})).reduce(((e,t)=>{if(t)e[t.uri]=t.value;return e}),{})}t.rtpHeaderExtensionsParser=rtpHeaderExtensionsParser;function serializeSdesMid(e){return Buffer.from(e)}t.serializeSdesMid=serializeSdesMid;function serializeSdesRTPStreamID(e){return Buffer.from(e)}t.serializeSdesRTPStreamID=serializeSdesRTPStreamID;function serializeRepairedRtpStreamId(e){return Buffer.from(e)}t.serializeRepairedRtpStreamId=serializeRepairedRtpStreamId;function serializeTransportWideCC(e){return(0,n.bufferWriter)([2],[e])}t.serializeTransportWideCC=serializeTransportWideCC;function serializeAbsSendTime(e){const t=Buffer.alloc(3);const r=e>>14n&0x00ffffffn;t.writeUIntBE(Number(r),0,3);return t}t.serializeAbsSendTime=serializeAbsSendTime;function serializeAudioLevelIndication(e){const t=new n.BitStream(Buffer.alloc(1));t.writeBits(1,1);t.writeBits(7,e);return t.uint8Array}t.serializeAudioLevelIndication=serializeAudioLevelIndication;function deserializeString(e){return e.toString()}t.deserializeString=deserializeString;function deserializeUint16BE(e){return e.readUInt16BE()}t.deserializeUint16BE=deserializeUint16BE;function deserializeAbsSendTime(e){return(0,n.bufferReader)(e,[3])[0]}t.deserializeAbsSendTime=deserializeAbsSendTime;function deserializeAudioLevelIndication(e){const t=new n.BitStream(e);const r={v:t.readBits(1)===1,level:t.readBits(7)};return r}t.deserializeAudioLevelIndication=deserializeAudioLevelIndication},8959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RedEncoder=void 0;const n=r(35437);const i=r(76507);class RedEncoder{constructor(e=1){Object.defineProperty(this,"distance",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"cache",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"cacheSize",{enumerable:true,configurable:true,writable:true,value:10})}push(e){this.cache.push(e);if(this.cache.length>this.cacheSize){this.cache.shift()}}build(){const e=new i.Red;const t=this.cache.slice(-(this.distance+1));const r=t.pop();if(!r){return e}t.forEach((t=>{const i=(0,n.uint32Add)(r.timestamp,-t.timestamp);if(i>s){return}e.blocks.push({block:t.block,blockPT:t.blockPT,timestampOffset:i})}));e.blocks.push({block:r.block,blockPT:r.blockPT});return e}}t.RedEncoder=RedEncoder;const s=(1<<14)-1},67361:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RedHandler=void 0;const n=r(34566);class RedHandler{constructor(){Object.defineProperty(this,"size",{enumerable:true,configurable:true,writable:true,value:150});Object.defineProperty(this,"sequenceNumbers",{enumerable:true,configurable:true,writable:true,value:[]})}push(e,t){const r=[];e.blocks.forEach((({blockPT:i,timestampOffset:s,block:o},a)=>{const c=(0,n.uint16Add)(t.header.sequenceNumber,-(e.blocks.length-(a+1)));if(s){r.push(new n.RtpPacket(new n.RtpHeader({timestamp:(0,n.uint32Add)(t.header.timestamp,-s),payloadType:i,ssrc:t.header.ssrc,sequenceNumber:c,marker:true}),o))}else{r.push(new n.RtpPacket(new n.RtpHeader({timestamp:t.header.timestamp,payloadType:i,ssrc:t.header.ssrc,sequenceNumber:c,marker:true}),o))}}));const i=r.filter((e=>{if(this.sequenceNumbers.includes(e.header.sequenceNumber)){return false}else{if(this.sequenceNumbers.length>this.size){this.sequenceNumbers.shift()}this.sequenceNumbers.push(e.header.sequenceNumber);return true}}));return i}}t.RedHandler=RedHandler},76507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RedHeader=t.Red=void 0;const n=r(69565);const i=r(35437);const s=(0,n.debug)("packages/rtp/src/rtp/red/packet.ts");class Red{constructor(){Object.defineProperty(this,"header",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"blocks",{enumerable:true,configurable:true,writable:true,value:[]})}static deSerialize(e){const t=e instanceof ArrayBuffer?Buffer.from(e):e;const r=new Red;let n=0;[r.header,n]=RedHeader.deSerialize(t);r.header.fields.forEach((({blockLength:e,timestampOffset:i,blockPT:s})=>{if(e&&i){const o=t.subarray(n,n+e);r.blocks.push({block:o,blockPT:s,timestampOffset:i});n+=e}else{const e=t.subarray(n);r.blocks.push({block:e,blockPT:s})}}));return r}serialize(){this.header=new RedHeader;for(const{timestampOffset:e,blockPT:t,block:r}of this.blocks){if(e){this.header.fields.push({fBit:1,blockPT:t,blockLength:r.length,timestampOffset:e})}else{this.header.fields.push({fBit:0,blockPT:t})}}let e=this.header.serialize();for(const{block:t}of this.blocks){e=Buffer.concat([e,t])}return e}}t.Red=Red;class RedHeader{constructor(){Object.defineProperty(this,"fields",{enumerable:true,configurable:true,writable:true,value:[]})}static deSerialize(e){let t=0;const r=new RedHeader;for(;;){const n={};r.fields.push(n);const s=new i.BitStream(e.subarray(t));n.fBit=s.readBits(1);n.blockPT=s.readBits(7);t++;if(n.fBit===0){break}n.timestampOffset=s.readBits(14);n.blockLength=s.readBits(10);t+=3}return[r,t]}serialize(){let e=Buffer.alloc(0);for(const t of this.fields){try{if(t.timestampOffset&&t.blockLength){const r=new i.BitStream(Buffer.alloc(4)).writeBits(1,t.fBit).writeBits(7,t.blockPT).writeBits(14,t.timestampOffset).writeBits(10,t.blockLength);e=Buffer.concat([e,r.uint8Array])}else{const r=new i.BitStream(Buffer.alloc(1)).writeBits(1,0).writeBits(7,t.blockPT);e=Buffer.concat([e,r.uint8Array])}}catch(e){s(e?.message)}}return e}}t.RedHeader=RedHeader},94872:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RtpPacket=t.RtpHeader=t.ExtensionProfiles=void 0;const n=r(35437);t.ExtensionProfiles={OneByte:48862,TwoByte:4096};const i=2;const s=4;const o=8;const a=12;const c=4;class RtpHeader{constructor(e={}){Object.defineProperty(this,"version",{enumerable:true,configurable:true,writable:true,value:2});Object.defineProperty(this,"padding",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"paddingSize",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"extension",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"marker",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"payloadOffset",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"payloadType",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"sequenceNumber",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"timestamp",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"csrcLength",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"csrc",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"extensionProfile",{enumerable:true,configurable:true,writable:true,value:t.ExtensionProfiles.OneByte});Object.defineProperty(this,"extensionLength",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"extensions",{enumerable:true,configurable:true,writable:true,value:[]});Object.assign(this,e)}static deSerialize(e){const r=new RtpHeader;let u=0;const d=e[u++];r.version=(0,n.getBit)(d,0,2);r.padding=(0,n.getBit)(d,2)>0;r.extension=(0,n.getBit)(d,3)>0;r.csrcLength=(0,n.getBit)(d,4,4);r.csrc=[...Array(r.csrcLength)].map((()=>{const t=e.readUInt32BE(u);u+=4;return t}));u+=a-1;const p=e[1];r.marker=(0,n.getBit)(p,0)>0;r.payloadType=(0,n.getBit)(p,1,7);r.sequenceNumber=e.readUInt16BE(i);r.timestamp=e.readUInt32BE(s);r.ssrc=e.readUInt32BE(o);for(let t=0;t<r.csrc.length;t++){const n=a+t*c;r.csrc[t]=e.subarray(n).readUInt32BE()}if(r.extension){r.extensionProfile=e.subarray(u).readUInt16BE();u+=2;const n=e.subarray(u).readUInt16BE()*4;r.extensionLength=n;u+=2;switch(r.extensionProfile){case t.ExtensionProfiles.OneByte:{const t=u+n;while(u<t){if(e[u]===0){u++;continue}const t=e[u]>>4;const n=(e[u]&(e[u]^240))+1;u++;if(t===15){break}const i={id:t,payload:e.subarray(u,u+n)};r.extensions=[...r.extensions,i];u+=n}}break;case t.ExtensionProfiles.TwoByte:{const t=u+n;while(u<t){if(e[u]===0){u++;continue}const t=e[u];u++;const n=e[u];u++;const i={id:t,payload:e.subarray(u,u+n)};r.extensions=[...r.extensions,i];u+=n}}break;default:{const t={id:0,payload:e.subarray(u,u+n)};r.extensions=[...r.extensions,t];u+=r.extensions[0].payload.length}break}}r.payloadOffset=u;if(r.padding){r.paddingSize=e[e.length-1]}return r}get serializeSize(){const{csrc:e,extensionProfile:r,extensions:n}=this;let i=12+e.length*c;if(n.length>0||this.extension===true){let e=4;switch(r){case t.ExtensionProfiles.OneByte:for(const t of n){e+=1+t.payload.length}break;case t.ExtensionProfiles.TwoByte:for(const t of n){e+=2+t.payload.length}break;default:e+=n[0].payload.length}i+=Math.floor((e+3)/4)*4}return i}serialize(e){const r=Buffer.alloc(e);let a=0;const c=new n.BitWriter(8);c.set(2,0,this.version);if(this.padding)c.set(1,2,1);if(this.extensions.length>0)this.extension=true;if(this.extension)c.set(1,3,1);c.set(4,4,this.csrc.length);r.writeUInt8(c.value,a++);const u=new n.BitWriter(8);if(this.marker)u.set(1,0,1);u.set(7,1,this.payloadType);r.writeUInt8(u.value,a++);r.writeUInt16BE(this.sequenceNumber,i);a+=2;r.writeUInt32BE(this.timestamp,s);a+=4;r.writeUInt32BE(this.ssrc,o);a+=4;for(const e of this.csrc){r.writeUInt32BE(e,a);a+=4}if(this.extension){const e=a;r.writeUInt16BE(this.extensionProfile,a);a+=4;const n=a;switch(this.extensionProfile){case t.ExtensionProfiles.OneByte:for(const e of this.extensions){r.writeUInt8(e.id<<4|e.payload.length-1,a++);e.payload.copy(r,a);a+=e.payload.length}break;case t.ExtensionProfiles.TwoByte:for(const e of this.extensions){r.writeUInt8(e.id,a++);r.writeUInt8(e.payload.length,a++);e.payload.copy(r,a);a+=e.payload.length}break;default:{const e=this.extensions[0].payload.length;if(e%4!=0){throw new Error}this.extensions[0].payload.copy(r,a);a+=e}}const i=a-n;const s=Math.trunc((i+3)/4)*4;r.writeUInt16BE(Math.trunc(s/4),e+2);for(let e=0;e<s-i;e++){r.writeUInt8(0,a);a++}}this.payloadOffset=a;return r}}t.RtpHeader=RtpHeader;class RtpPacket{constructor(e,t){Object.defineProperty(this,"header",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"payload",{enumerable:true,configurable:true,writable:true,value:t})}get serializeSize(){return this.header.serializeSize+this.payload.length}clone(){return new RtpPacket(new RtpHeader({...this.header}),this.payload)}serialize(){let e=this.header.serialize(this.header.serializeSize+this.payload.length);const{payloadOffset:t}=this.header;this.payload.copy(e,t);if(this.header.padding){const t=Buffer.alloc(this.header.paddingSize);t.writeUInt8(this.header.paddingSize,this.header.paddingSize-1);e=Buffer.concat([e,t])}return e}static deSerialize(e){const t=RtpHeader.deSerialize(e);const r=new RtpPacket(t,e.subarray(t.payloadOffset,e.length-t.paddingSize));return r}clear(){this.payload=null}}t.RtpPacket=RtpPacket},88111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.wrapRtx=t.unwrapRtx=void 0;const n=r(48775);const i=r(94872);function unwrapRtx(e,t,r){const s=new i.RtpPacket(new i.RtpHeader({payloadType:t,marker:e.header.marker,sequenceNumber:n.jspack.Unpack("!H",e.payload.subarray(0,2))[0],timestamp:e.header.timestamp,ssrc:r}),e.payload.subarray(2));return s}t.unwrapRtx=unwrapRtx;function wrapRtx(e,t,r,s){const o=new i.RtpPacket(new i.RtpHeader({payloadType:t,marker:e.header.marker,sequenceNumber:r,timestamp:e.header.timestamp,ssrc:s,csrc:e.header.csrc,extensions:e.header.extensions}),Buffer.concat([Buffer.from(n.jspack.Pack("!H",[e.header.sequenceNumber])),e.payload]));return o}t.wrapRtx=wrapRtx},49540:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CipherAesCtr=void 0;const n=r(6113);const i=r(30753);const s=r(5639);const o=r(94872);class CipherAesCtr extends i.CipherAesBase{constructor(e,t,r,n,i,s){super(e,t,r,n);Object.defineProperty(this,"srtpSessionAuthTag",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"srtcpSessionAuthTag",{enumerable:true,configurable:true,writable:true,value:s});Object.defineProperty(this,"authTagLength",{enumerable:true,configurable:true,writable:true,value:10})}encryptRtp(e,t,r){const i=e.serialize(e.serializeSize);const s=this.generateCounter(e.sequenceNumber,r,e.ssrc,this.srtpSessionSalt);const o=(0,n.createCipheriv)("aes-128-ctr",this.srtpSessionKey,s);const a=o.update(t);const c=this.generateSrtpAuthTag(r,i,a);return Buffer.concat([i,a,c])}decryptRtp(e,t){const r=o.RtpHeader.deSerialize(e);const i=e.length-this.authTagLength;e=e.subarray(0,e.length-this.authTagLength);const s=this.generateCounter(r.sequenceNumber,t,r.ssrc,this.srtpSessionSalt);const a=(0,n.createDecipheriv)("aes-128-ctr",this.srtpSessionKey,s);const c=e.subarray(r.payloadOffset);const u=a.update(c);const d=Buffer.concat([e.subarray(0,r.payloadOffset),u,Buffer.alloc(i-r.payloadOffset-u.length)]);return[d,r]}encryptRTCP(e,t){let r=Buffer.from(e);const i=r.readUInt32BE(4);const s=this.generateCounter(t&65535,t>>16,i,this.srtcpSessionSalt);const o=(0,n.createCipheriv)("aes-128-ctr",this.srtcpSessionKey,s);const a=o.update(r.slice(8));a.copy(r,8);r=Buffer.concat([r,Buffer.alloc(4)]);r.writeUInt32BE(t,r.length-4);r[r.length-4]|=128;const c=this.generateSrtcpAuthTag(r);r=Buffer.concat([r,c]);return r}decryptRTCP(e){const t=s.RtcpHeader.deSerialize(e);const r=e.length-(this.authTagLength+a);const i=Buffer.from(e).slice(0,r);const o=e[r]>>7;if(o===0)return[i,t];let c=e.readUInt32BE(r);c&=~(1<<31);const u=e.readUInt32BE(4);const d=e.subarray(e.length-10);const p=this.generateCounter(c&65535,c>>16,u,this.srtcpSessionSalt);const m=(0,n.createDecipheriv)("aes-128-ctr",this.srtcpSessionKey,p);const y=m.update(i.subarray(8));y.copy(i,8);return[i,t]}generateSrtcpAuthTag(e){const t=(0,n.createHmac)("sha1",this.srtcpSessionAuthTag);return t.update(e).digest().slice(0,10)}generateCounter(e,t,r,n){const i=Buffer.alloc(16);i.writeUInt32BE(r,4);i.writeUInt32BE(t,8);i.writeUInt32BE(Number(BigInt(e)<<16n),12);for(let e=0;e<n.length;e++){i[e]^=n[e]}return i}generateSrtpAuthTag(e,...t){const r=(0,n.createHmac)("sha1",this.srtpSessionAuthTag);const i=Buffer.alloc(4);i.writeUInt32BE(e);for(const e of t){r.update(e)}return r.update(i).digest().subarray(0,10)}}t.CipherAesCtr=CipherAesCtr;const a=4},62424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CipherAesGcm=void 0;const n=r(6113);const i=r(30753);const s=r(35437);const o=r(218);const a=r(5639);const c=r(94872);class CipherAesGcm extends i.CipherAesBase{constructor(e,t,r,n){super(e,t,r,n);Object.defineProperty(this,"aeadAuthTagLen",{enumerable:true,configurable:true,writable:true,value:16});Object.defineProperty(this,"rtpIvWriter",{enumerable:true,configurable:true,writable:true,value:(0,s.createBufferWriter)([2,4,4,2],true)});Object.defineProperty(this,"rtcpIvWriter",{enumerable:true,configurable:true,writable:true,value:(0,s.createBufferWriter)([2,4,2,4],true)});Object.defineProperty(this,"aadWriter",{enumerable:true,configurable:true,writable:true,value:(0,s.createBufferWriter)([4],true)})}encryptRtp(e,t,r){const i=e.serialize(e.serializeSize);const s=this.rtpInitializationVector(e,r);const o=(0,n.createCipheriv)("aes-128-gcm",this.srtpSessionKey,s);o.setAAD(i);const a=o.update(t);o.final();const c=o.getAuthTag();const u=Buffer.concat([i,a,c]);return u}decryptRtp(e,t){const r=c.RtpHeader.deSerialize(e);let i=Buffer.from([]);i=(0,o.growBufferSize)(i,e.length-this.aeadAuthTagLen);e.slice(0,r.payloadOffset).copy(i);const s=this.rtpInitializationVector(r,t);const a=e.slice(r.payloadOffset,e.length-this.aeadAuthTagLen);const u=(0,n.createDecipheriv)("aes-128-gcm",this.srtpSessionKey,s);const d=u.update(a);d.copy(i,r.payloadOffset);return[i,r]}encryptRTCP(e,t){const r=e.readUInt32BE(4);const i=e.length+this.aeadAuthTagLen;let s=Buffer.from([]);s=(0,o.growBufferSize)(s,i+u);e.slice(0,8).copy(s);const a=this.rtcpInitializationVector(r,t);const c=this.rtcpAdditionalAuthenticatedData(e,t);const d=(0,n.createCipheriv)("aes-128-gcm",this.srtcpSessionKey,a);d.setAAD(c);const p=d.update(e.slice(8));d.final();p.copy(s,8);const m=d.getAuthTag();m.copy(s,8+p.length);c.slice(8,12).copy(s,i);return s}decryptRTCP(e){const t=a.RtcpHeader.deSerialize(e);const r=e.length-u;const i=Buffer.alloc(r-this.aeadAuthTagLen);e.slice(0,8).copy(i);const s=e.readUInt32BE(4);let o=e.readUInt32BE(e.length-4);o&=~(d<<24);const c=this.rtcpInitializationVector(s,o);const p=this.rtcpAdditionalAuthenticatedData(e,o);const m=(0,n.createDecipheriv)("aes-128-gcm",this.srtcpSessionKey,c);m.setAAD(p);const y=m.update(e.slice(8,r));y.copy(i,8);return[i,t]}rtpInitializationVector(e,t){const r=this.rtpIvWriter([0,e.ssrc,t,e.sequenceNumber]);for(let e=0;e<r.length;e++){r[e]^=this.srtpSessionSalt[e]}return r}rtcpInitializationVector(e,t){const r=this.rtcpIvWriter([0,e,0,t]);for(let e=0;e<r.length;e++){r[e]^=this.srtcpSessionSalt[e]}return r}rtcpAdditionalAuthenticatedData(e,t){const r=Buffer.concat([e.subarray(0,8),this.aadWriter([t])]);r[8]|=d;return r}}t.CipherAesGcm=CipherAesGcm;const u=4;const d=128},30753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CipherAesBase=void 0;class CipherAesBase{constructor(e,t,r,n){Object.defineProperty(this,"srtpSessionKey",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"srtpSessionSalt",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"srtcpSessionKey",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"srtcpSessionSalt",{enumerable:true,configurable:true,writable:true,value:n})}encryptRtp(e,t,r){return Buffer.from([])}decryptRtp(e,t){return[]}encryptRTCP(e,t){return Buffer.from([])}decryptRTCP(e){return[]}}t.CipherAesBase=CipherAesBase},99646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.saltLength=t.keyLength=t.ProtectionProfileAeadAes128Gcm=t.ProtectionProfileAes128CmHmacSha1_80=void 0;t.ProtectionProfileAes128CmHmacSha1_80=1;t.ProtectionProfileAeadAes128Gcm=7;const keyLength=e=>{switch(e){case t.ProtectionProfileAes128CmHmacSha1_80:case t.ProtectionProfileAeadAes128Gcm:return 16}};t.keyLength=keyLength;const saltLength=e=>{switch(e){case t.ProtectionProfileAes128CmHmacSha1_80:return 14;case t.ProtectionProfileAeadAes128Gcm:return 12}};t.saltLength=saltLength},90898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Context=void 0;const n=r(6113);const i=r(42786);const s=r(49540);const o=r(62424);const a=r(99646);class Context{constructor(e,t,r){Object.defineProperty(this,"masterKey",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"masterSalt",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"profile",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"srtpSSRCStates",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"srtpSessionKey",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtpSessionSalt",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtpSessionAuthTag",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtpSessionAuth",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtcpSSRCStates",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"srtcpSessionKey",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtcpSessionSalt",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtcpSessionAuthTag",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtcpSessionAuth",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"cipher",{enumerable:true,configurable:true,writable:true,value:void 0});{const e=14-t.length;if(e>0){this.masterSalt=Buffer.concat([t,Buffer.alloc(e)])}}this.srtpSessionKey=this.generateSessionKey(0);this.srtpSessionSalt=this.generateSessionSalt(2);this.srtpSessionAuthTag=this.generateSessionAuthTag(1);this.srtpSessionAuth=(0,n.createHmac)("sha1",this.srtpSessionAuthTag);this.srtcpSessionKey=this.generateSessionKey(3);this.srtcpSessionSalt=this.generateSessionSalt(5);this.srtcpSessionAuthTag=this.generateSessionAuthTag(4);this.srtcpSessionAuth=(0,n.createHmac)("sha1",this.srtcpSessionAuthTag);switch(r){case a.ProtectionProfileAes128CmHmacSha1_80:this.cipher=new s.CipherAesCtr(this.srtpSessionKey,this.srtpSessionSalt,this.srtcpSessionKey,this.srtcpSessionSalt,this.srtpSessionAuthTag,this.srtcpSessionAuthTag);break;case a.ProtectionProfileAeadAes128Gcm:this.cipher=new o.CipherAesGcm(this.srtpSessionKey,this.srtpSessionSalt,this.srtcpSessionKey,this.srtcpSessionSalt);break}}generateSessionKey(e){let t=Buffer.from(this.masterSalt);const r=Buffer.from([e,0,0,0,0,0,0]);for(let e=r.length-1,n=t.length-1;e>=0;e--,n--){t[n]=t[n]^r[e]}t=Buffer.concat([t,Buffer.from([0,0])]);const n=new i.AES(this.masterKey);return Buffer.from(n.encrypt(t))}generateSessionSalt(e){let t=Buffer.from(this.masterSalt);const r=Buffer.from([e,0,0,0,0,0,0]);for(let e=r.length-1,n=t.length-1;e>=0;e--,n--){t[n]=t[n]^r[e]}t=Buffer.concat([t,Buffer.from([0,0])]);const n=new i.AES(this.masterKey);t=Buffer.from(n.encrypt(t));return t.slice(0,14)}generateSessionAuthTag(e){const t=Buffer.from(this.masterSalt);const r=Buffer.from([e,0,0,0,0,0,0]);for(let e=r.length-1,n=t.length-1;e>=0;e--,n--){t[n]=t[n]^r[e]}let n=Buffer.concat([t,Buffer.from([0,0])]);let s=Buffer.concat([t,Buffer.from([0,1])]);const o=new i.AES(this.masterKey);n=Buffer.from(o.encrypt(n));s=Buffer.from(o.encrypt(s));return Buffer.concat([n,s.slice(0,4)])}getSrtpSsrcState(e){let t=this.srtpSSRCStates[e];if(t)return t;t={ssrc:e,rolloverCounter:0,lastSequenceNumber:0};this.srtpSSRCStates[e]=t;return t}getSrtcpSsrcState(e){let t=this.srtcpSSRCStates[e];if(t)return t;t={srtcpIndex:0,ssrc:e};this.srtcpSSRCStates[e]=t;return t}updateRolloverCount(e,t){if(!t.rolloverHasProcessed){t.rolloverHasProcessed=true}else if(e===0){if(t.lastSequenceNumber>c){t.rolloverCounter++}}else if(t.lastSequenceNumber<c&&e>u-c){if(t.rolloverCounter>0){t.rolloverCounter--}}else if(e<c&&t.lastSequenceNumber>u-c){t.rolloverCounter++}t.lastSequenceNumber=e}generateSrtpAuthTag(e,t){this.srtpSessionAuth=(0,n.createHmac)("sha1",this.srtpSessionAuthTag);const r=Buffer.alloc(4);r.writeUInt32BE(t);return this.srtpSessionAuth.update(e).update(r).digest().slice(0,10)}index(e){const t=this.srtcpSSRCStates[e];if(!t){return 0}return t.srtcpIndex}setIndex(e,t){const r=this.getSrtcpSsrcState(e);r.srtcpIndex=t%2147483647}}t.Context=Context;const c=100;const u=65535},39216:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SrtcpContext=void 0;const n=r(90898);class SrtcpContext extends n.Context{constructor(e,t,r){super(e,t,r)}encryptRTCP(e){const t=e.readUInt32BE(4);const r=this.getSrtcpSsrcState(t);r.srtcpIndex++;if(r.srtcpIndex>>i){r.srtcpIndex=0}const n=this.cipher.encryptRTCP(e,r.srtcpIndex);return n}decryptRTCP(e){const t=this.cipher.decryptRTCP(e);return t}}t.SrtcpContext=SrtcpContext;const i=2147483647},64583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SrtpContext=void 0;const n=r(94872);const i=r(90898);class SrtpContext extends i.Context{constructor(e,t,r){super(e,t,r)}encryptRtp(e,t){const r=this.getSrtpSsrcState(t.ssrc);this.updateRolloverCount(t.sequenceNumber,r);const n=this.cipher.encryptRtp(t,e,r.rolloverCounter);return n}decryptRtp(e){const t=n.RtpHeader.deSerialize(e);const r=this.getSrtpSsrcState(t.ssrc);this.updateRolloverCount(t.sequenceNumber,r);const i=this.cipher.decryptRtp(e,r.rolloverCounter);return i}}t.SrtpContext=SrtpContext},50144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Session=void 0;class Session{constructor(e){Object.defineProperty(this,"ContextCls",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"localContext",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"remoteContext",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onData",{enumerable:true,configurable:true,writable:true,value:void 0})}start(e,t,r,n,i){this.localContext=new this.ContextCls(e,t,i);this.remoteContext=new this.ContextCls(r,n,i)}}t.Session=Session},14413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SrtcpSession=void 0;const n=r(39216);const i=r(50144);class SrtcpSession extends i.Session{constructor(e){super(n.SrtcpContext);Object.defineProperty(this,"config",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"decrypt",{enumerable:true,configurable:true,writable:true,value:e=>{const[t]=this.remoteContext.decryptRTCP(e);return t}});this.start(e.keys.localMasterKey,e.keys.localMasterSalt,e.keys.remoteMasterKey,e.keys.remoteMasterSalt,e.profile)}encrypt(e){const t=this.localContext.encryptRTCP(e);return t}}t.SrtcpSession=SrtcpSession},42570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SrtpSession=void 0;const n=r(64583);const i=r(50144);class SrtpSession extends i.Session{constructor(e){super(n.SrtpContext);Object.defineProperty(this,"config",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"decrypt",{enumerable:true,configurable:true,writable:true,value:e=>{const[t]=this.remoteContext.decryptRtp(e);return t}});this.start(e.keys.localMasterKey,e.keys.localMasterSalt,e.keys.remoteMasterKey,e.keys.remoteMasterSalt,e.profile)}encrypt(e,t){return this.localContext.encryptRtp(e,t)}}t.SrtpSession=SrtpSession},41136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RtpBuilder=void 0;const n=r(35437);const i=r(94872);class RtpBuilder{constructor(e){Object.defineProperty(this,"props",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"sequenceNumber",{enumerable:true,configurable:true,writable:true,value:(0,n.random16)()});Object.defineProperty(this,"timestamp",{enumerable:true,configurable:true,writable:true,value:(0,n.random32)()})}create(e){this.sequenceNumber=(0,n.uint16Add)(this.sequenceNumber,1);const t=this.props.between*this.props.clockRate/1e3;this.timestamp=(0,n.uint32Add)(this.timestamp,t);const r=new i.RtpHeader({sequenceNumber:this.sequenceNumber,timestamp:Number(this.timestamp),payloadType:96,extension:true,marker:false,padding:false});const s=new i.RtpPacket(r,e);return s}}t.RtpBuilder=RtpBuilder},10338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.serializePacket=t.parsePacket=t.decodeParams=t.CHUNK_BY_TYPE=t.ShutdownCompleteChunk=t.ShutdownAckChunk=t.ShutdownChunk=t.SackChunk=t.ReconfigChunk=t.HeartbeatAckChunk=t.HeartbeatChunk=t.ErrorChunk=t.AbortChunk=t.BaseParamsChunk=t.CookieAckChunk=t.CookieEchoChunk=t.DataChunk=t.ForwardTsnChunk=t.ReConfigChunk=t.InitAckChunk=t.InitChunk=t.BaseInitChunk=t.Chunk=void 0;const n=r(48775);const i=r(89162);class Chunk{get body(){return this._body}set body(e){this._body=e}constructor(e=0,t=Buffer.from("")){Object.defineProperty(this,"flags",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"_body",{enumerable:true,configurable:true,writable:true,value:t})}get type(){return Chunk.type}get bytes(){if(!this.body)throw new Error;const e=Buffer.concat([Buffer.from(n.jspack.Pack("!BBH",[this.type,this.flags,this.body.length+4])),this.body,...[...Array(padL(this.body.length))].map((()=>Buffer.from("\0")))]);return e}}t.Chunk=Chunk;Object.defineProperty(Chunk,"type",{enumerable:true,configurable:true,writable:true,value:-1});class BaseInitChunk extends Chunk{constructor(e=0,t){super(e,t);Object.defineProperty(this,"flags",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"initiateTag",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"advertisedRwnd",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"outboundStreams",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"inboundStreams",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"initialTsn",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"params",{enumerable:true,configurable:true,writable:true,value:void 0});if(t){[this.initiateTag,this.advertisedRwnd,this.outboundStreams,this.inboundStreams,this.initialTsn]=n.jspack.Unpack("!LLHHL",t);this.params=decodeParams(t.slice(16))}else{this.initiateTag=0;this.advertisedRwnd=0;this.outboundStreams=0;this.inboundStreams=0;this.initialTsn=0;this.params=[]}}get body(){let e=Buffer.from(n.jspack.Pack("!LLHHL",[this.initiateTag,this.advertisedRwnd,this.outboundStreams,this.inboundStreams,this.initialTsn]));e=Buffer.concat([e,encodeParams(this.params)]);return e}}t.BaseInitChunk=BaseInitChunk;class InitChunk extends BaseInitChunk{get type(){return InitChunk.type}}t.InitChunk=InitChunk;Object.defineProperty(InitChunk,"type",{enumerable:true,configurable:true,writable:true,value:1});class InitAckChunk extends BaseInitChunk{get type(){return InitAckChunk.type}}t.InitAckChunk=InitAckChunk;Object.defineProperty(InitAckChunk,"type",{enumerable:true,configurable:true,writable:true,value:2});class ReConfigChunk extends BaseInitChunk{get type(){return ReConfigChunk.type}}t.ReConfigChunk=ReConfigChunk;Object.defineProperty(ReConfigChunk,"type",{enumerable:true,configurable:true,writable:true,value:130});class ForwardTsnChunk extends Chunk{constructor(e=0,t){super(e,t);Object.defineProperty(this,"flags",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"streams",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"cumulativeTsn",{enumerable:true,configurable:true,writable:true,value:void 0});if(t){this.cumulativeTsn=n.jspack.Unpack("!L",t)[0];let e=4;while(e<t.length){this.streams.push(n.jspack.Unpack("!HH",t.slice(e)));e+=4}}else{this.cumulativeTsn=0}}get type(){return ForwardTsnChunk.type}set body(e){}get body(){const e=Buffer.from(n.jspack.Pack("!L",[this.cumulativeTsn]));return Buffer.concat([e,...this.streams.map((([e,t])=>Buffer.from(n.jspack.Pack("!HH",[e,t]))))])}}t.ForwardTsnChunk=ForwardTsnChunk;Object.defineProperty(ForwardTsnChunk,"type",{enumerable:true,configurable:true,writable:true,value:192});class DataChunk extends Chunk{get type(){return DataChunk.type}constructor(e=0,t){super(e,t);Object.defineProperty(this,"flags",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"tsn",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"streamId",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"streamSeqNum",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"protocol",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"userData",{enumerable:true,configurable:true,writable:true,value:Buffer.from("")});Object.defineProperty(this,"abandoned",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"acked",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"misses",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"retransmit",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"sentCount",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"bookSize",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"expiry",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"maxRetransmits",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sentTime",{enumerable:true,configurable:true,writable:true,value:void 0});if(t){[this.tsn,this.streamId,this.streamSeqNum,this.protocol]=n.jspack.Unpack("!LHHL",t);this.userData=t.slice(12)}}get bytes(){const e=16+this.userData.length;let t=Buffer.concat([Buffer.from(n.jspack.Pack("!BBHLHHL",[this.type,this.flags,e,this.tsn,this.streamId,this.streamSeqNum,this.protocol])),this.userData]);if(e%4){t=Buffer.concat([t,...[...Array(padL(e))].map((()=>Buffer.from("\0")))])}return t}}t.DataChunk=DataChunk;Object.defineProperty(DataChunk,"type",{enumerable:true,configurable:true,writable:true,value:0});class CookieEchoChunk extends Chunk{get type(){return CookieEchoChunk.type}}t.CookieEchoChunk=CookieEchoChunk;Object.defineProperty(CookieEchoChunk,"type",{enumerable:true,configurable:true,writable:true,value:10});class CookieAckChunk extends Chunk{get type(){return CookieAckChunk.type}}t.CookieAckChunk=CookieAckChunk;Object.defineProperty(CookieAckChunk,"type",{enumerable:true,configurable:true,writable:true,value:11});class BaseParamsChunk extends Chunk{constructor(e=0,t=undefined){super(e,t);Object.defineProperty(this,"flags",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"params",{enumerable:true,configurable:true,writable:true,value:[]});if(t){this.params=decodeParams(t)}}get body(){return encodeParams(this.params)}}t.BaseParamsChunk=BaseParamsChunk;class AbortChunk extends BaseParamsChunk{get type(){return AbortChunk.type}}t.AbortChunk=AbortChunk;Object.defineProperty(AbortChunk,"type",{enumerable:true,configurable:true,writable:true,value:6});class ErrorChunk extends BaseParamsChunk{get type(){return ErrorChunk.type}get descriptions(){return this.params.map((([e,t])=>{const r=(Object.entries(ErrorChunk.CODE).find((([,t])=>t===e))||[])[0];return{name:r,body:t}}))}}t.ErrorChunk=ErrorChunk;Object.defineProperty(ErrorChunk,"type",{enumerable:true,configurable:true,writable:true,value:9});Object.defineProperty(ErrorChunk,"CODE",{enumerable:true,configurable:true,writable:true,value:{InvalidStreamIdentifier:1,MissingMandatoryParameter:2,StaleCookieError:3,OutofResource:4,UnresolvableAddress:5,UnrecognizedChunkType:6,InvalidMandatoryParameter:7,UnrecognizedParameters:8,NoUserData:9,CookieReceivedWhileShuttingDown:10,RestartofanAssociationwithNewAddresses:11,UserInitiatedAbort:12,ProtocolViolation:13}});class HeartbeatChunk extends BaseParamsChunk{get type(){return HeartbeatChunk.type}}t.HeartbeatChunk=HeartbeatChunk;Object.defineProperty(HeartbeatChunk,"type",{enumerable:true,configurable:true,writable:true,value:4});class HeartbeatAckChunk extends BaseParamsChunk{get type(){return HeartbeatAckChunk.type}}t.HeartbeatAckChunk=HeartbeatAckChunk;Object.defineProperty(HeartbeatAckChunk,"type",{enumerable:true,configurable:true,writable:true,value:5});class ReconfigChunk extends BaseParamsChunk{get type(){return ReconfigChunk.type}}t.ReconfigChunk=ReconfigChunk;Object.defineProperty(ReconfigChunk,"type",{enumerable:true,configurable:true,writable:true,value:130});class SackChunk extends Chunk{get type(){return SackChunk.type}constructor(e=0,t){super(e,t);Object.defineProperty(this,"flags",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"gaps",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"duplicates",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"cumulativeTsn",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"advertisedRwnd",{enumerable:true,configurable:true,writable:true,value:0});if(t){const[e,r,i,s]=n.jspack.Unpack("!LLHH",t);this.cumulativeTsn=e;this.advertisedRwnd=r;let o=12;[...Array(i)].forEach((()=>{this.gaps.push(n.jspack.Unpack("!HH",t.slice(o)));o+=4}));[...Array(s)].forEach((()=>{this.duplicates.push(n.jspack.Unpack("!L",t.slice(o))[0]);o+=4}))}}get bytes(){const e=16+4*(this.gaps.length+this.duplicates.length);let t=Buffer.from(n.jspack.Pack("!BBHLLHH",[this.type,this.flags,e,this.cumulativeTsn,this.advertisedRwnd,this.gaps.length,this.duplicates.length]));t=Buffer.concat([t,...this.gaps.map((e=>Buffer.from(n.jspack.Pack("!HH",e))))]);t=Buffer.concat([t,...this.duplicates.map((e=>Buffer.from(n.jspack.Pack("!L",[e]))))]);return t}}t.SackChunk=SackChunk;Object.defineProperty(SackChunk,"type",{enumerable:true,configurable:true,writable:true,value:3});class ShutdownChunk extends Chunk{get type(){return ShutdownChunk.type}constructor(e=0,t){super(e,t);Object.defineProperty(this,"flags",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"cumulativeTsn",{enumerable:true,configurable:true,writable:true,value:0});if(t){this.cumulativeTsn=n.jspack.Unpack("!L",t)[0]}}get body(){return Buffer.from(n.jspack.Pack("!L",[this.cumulativeTsn]))}}t.ShutdownChunk=ShutdownChunk;Object.defineProperty(ShutdownChunk,"type",{enumerable:true,configurable:true,writable:true,value:7});class ShutdownAckChunk extends Chunk{get type(){return ShutdownAckChunk.type}}t.ShutdownAckChunk=ShutdownAckChunk;Object.defineProperty(ShutdownAckChunk,"type",{enumerable:true,configurable:true,writable:true,value:8});class ShutdownCompleteChunk extends Chunk{get type(){return ShutdownCompleteChunk.type}}t.ShutdownCompleteChunk=ShutdownCompleteChunk;Object.defineProperty(ShutdownCompleteChunk,"type",{enumerable:true,configurable:true,writable:true,value:14});const s=[DataChunk,InitChunk,InitAckChunk,SackChunk,HeartbeatChunk,HeartbeatAckChunk,AbortChunk,ShutdownChunk,ShutdownAckChunk,ErrorChunk,CookieEchoChunk,CookieAckChunk,ShutdownCompleteChunk,ReconfigChunk,ForwardTsnChunk];t.CHUNK_BY_TYPE=s.reduce(((e,t)=>{e[t.type]=t;return e}),{});function padL(e){const t=e%4;return t?4-t:0}function encodeParams(e){let t=Buffer.from("");let r=Buffer.from("");e.forEach((([e,i])=>{const s=i.length+4;t=Buffer.concat([t,r,Buffer.from(n.jspack.Pack("!HH",[e,s])),i]);r=Buffer.concat([...Array(padL(s))].map((()=>Buffer.from("\0"))))}));return t}function decodeParams(e){const t=[];let r=0;while(r<=e.length-4){const[i,s]=n.jspack.Unpack("!HH",e.slice(r));t.push([i,e.slice(r+4,r+s)]);r+=s+padL(s)}return t}t.decodeParams=decodeParams;function parsePacket(e){if(e.length<12)throw new Error("SCTP packet length is less than 12 bytes");const[r,s,o]=n.jspack.Unpack("!HHL",e);const a=e.readUInt32LE(8);const c=i(Buffer.concat([e.slice(0,8),Buffer.from("\0\0\0\0"),e.slice(12)]));if(a!==c)throw new Error("SCTP packet has invalid checksum");const u=[];let d=12;while(d+4<=e.length){const[r,i,s]=n.jspack.Unpack("!BBH",e.slice(d));const o=e.slice(d+4,d+s);const a=t.CHUNK_BY_TYPE[r.toString()];if(a){u.push(new a(i,o))}else{throw new Error("unknown")}d+=s+padL(s)}return[r,s,o,u]}t.parsePacket=parsePacket;function serializePacket(e,t,r,s){const o=Buffer.from(n.jspack.Pack("!HHL",[e,t,r]));const a=s.bytes;const c=i(Buffer.concat([o,Buffer.from("\0\0\0\0"),a]));const u=Buffer.alloc(4);u.writeUInt32LE(c,0);const d=Buffer.concat([o,u,a]);return d}t.serializePacket=serializePacket},8277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SCTP_STATE=t.WEBRTC_PPID=void 0;var r;(function(e){e[e["DCEP"]=50]="DCEP";e[e["STRING"]=51]="STRING";e[e["BINARY"]=53]="BINARY";e[e["STRING_EMPTY"]=56]="STRING_EMPTY";e[e["BINARY_EMPTY"]=57]="BINARY_EMPTY"})(r||(t.WEBRTC_PPID=r={}));var n;(function(e){e[e["CLOSED"]=1]="CLOSED";e[e["COOKIE_WAIT"]=2]="COOKIE_WAIT";e[e["COOKIE_ECHOED"]=3]="COOKIE_ECHOED";e[e["ESTABLISHED"]=4]="ESTABLISHED";e[e["SHUTDOWN_PENDING"]=5]="SHUTDOWN_PENDING";e[e["SHUTDOWN_SENT"]=6]="SHUTDOWN_SENT";e[e["SHUTDOWN_RECEIVED"]=7]="SHUTDOWN_RECEIVED";e[e["SHUTDOWN_ACK_SENT"]=8]="SHUTDOWN_ACK_SENT"})(n||(t.SCTP_STATE=n={}))},1328:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.createEventsFromList=t.enumerate=void 0;const i=n(r(36094));function enumerate(e){return e.map(((e,t)=>[t,e]))}t.enumerate=enumerate;function createEventsFromList(e){return e.reduce(((e,t)=>{e[t]=new i.default;return e}),{})}t.createEventsFromList=createEventsFromList},96656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SCTP=t.WEBRTC_PPID=t.SCTP_STATE=void 0;var n=r(8277);Object.defineProperty(t,"SCTP_STATE",{enumerable:true,get:function(){return n.SCTP_STATE}});Object.defineProperty(t,"WEBRTC_PPID",{enumerable:true,get:function(){return n.WEBRTC_PPID}});var i=r(28968);Object.defineProperty(t,"SCTP",{enumerable:true,get:function(){return i.SCTP}})},56882:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RECONFIG_PARAM_BY_TYPES=t.ReconfigResponseParam=t.reconfigResult=t.StreamAddOutgoingParam=t.OutgoingSSNResetRequestParam=void 0;const i=r(48775);const s=n(r(46611));class OutgoingSSNResetRequestParam{constructor(e,t,r,n){Object.defineProperty(this,"requestSequence",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"responseSequence",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"lastTsn",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"streams",{enumerable:true,configurable:true,writable:true,value:n})}get type(){return OutgoingSSNResetRequestParam.type}get bytes(){const e=Buffer.from(i.jspack.Pack("!LLL",[this.requestSequence,this.responseSequence,this.lastTsn]));return Buffer.concat([e,...this.streams.map((e=>Buffer.from(i.jspack.Pack("!H",[e]))))])}static parse(e){const[t,r,n]=i.jspack.Unpack("!LLL",e);const o=(0,s.default)(12,e.length,2).map((t=>i.jspack.Unpack("!H",e.slice(t))[0]));return new OutgoingSSNResetRequestParam(t,r,n,o)}}t.OutgoingSSNResetRequestParam=OutgoingSSNResetRequestParam;Object.defineProperty(OutgoingSSNResetRequestParam,"type",{enumerable:true,configurable:true,writable:true,value:13});class StreamAddOutgoingParam{constructor(e,t){Object.defineProperty(this,"requestSequence",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"newStreams",{enumerable:true,configurable:true,writable:true,value:t})}get type(){return StreamAddOutgoingParam.type}get bytes(){return Buffer.from(i.jspack.Pack("!LHH",[this.requestSequence,this.newStreams,0]))}static parse(e){const[t,r]=i.jspack.Unpack("!LHH",e);return new StreamAddOutgoingParam(t,r)}}t.StreamAddOutgoingParam=StreamAddOutgoingParam;Object.defineProperty(StreamAddOutgoingParam,"type",{enumerable:true,configurable:true,writable:true,value:17});t.reconfigResult={ReconfigResultSuccessPerformed:1,BadSequenceNumber:5};class ReconfigResponseParam{constructor(e,t){Object.defineProperty(this,"responseSequence",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"result",{enumerable:true,configurable:true,writable:true,value:t})}get type(){return ReconfigResponseParam.type}get bytes(){return Buffer.from(i.jspack.Pack("!LL",[this.responseSequence,this.result]))}static parse(e){const[t,r]=i.jspack.Unpack("!LL",e);return new ReconfigResponseParam(t,r)}}t.ReconfigResponseParam=ReconfigResponseParam;Object.defineProperty(ReconfigResponseParam,"type",{enumerable:true,configurable:true,writable:true,value:16});t.RECONFIG_PARAM_BY_TYPES={13:OutgoingSSNResetRequestParam,16:ReconfigResponseParam,17:StreamAddOutgoingParam}},28968:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RTCSctpCapabilities=t.InboundStream=t.SCTP=void 0;const i=r(6113);const s=r(48775);const o=n(r(69565));const a=n(r(46611));const c=r(36094);const u=r(35437);const d=r(10338);const p=r(8277);const m=r(1328);const y=r(56882);const g=(0,o.default)("werift/sctp/sctp");const b=24;const v=60;const w=65535;const _=1200;const C=1;const P=2;const O=4;const E=10;const I=8;const k=1/8;const T=1/4;const x=3;const R=1;const B=60;const N=2**32;const j=135;const L=7;const D=32776;const U=49152;const F=["new","closed","connected","connecting"];class SCTP{constructor(e,t=5e3){Object.defineProperty(this,"transport",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"port",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"stateChanged",{enumerable:true,configurable:true,writable:true,value:(0,m.createEventsFromList)(F)});Object.defineProperty(this,"onReconfigStreams",{enumerable:true,configurable:true,writable:true,value:new c.Event});Object.defineProperty(this,"onReceive",{enumerable:true,configurable:true,writable:true,value:new c.Event});Object.defineProperty(this,"onSackReceived",{enumerable:true,configurable:true,writable:true,value:async()=>{}});Object.defineProperty(this,"associationState",{enumerable:true,configurable:true,writable:true,value:p.SCTP_STATE.CLOSED});Object.defineProperty(this,"started",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"state",{enumerable:true,configurable:true,writable:true,value:"new"});Object.defineProperty(this,"isServer",{enumerable:true,configurable:true,writable:true,value:true});Object.defineProperty(this,"hmacKey",{enumerable:true,configurable:true,writable:true,value:(0,i.randomBytes)(16)});Object.defineProperty(this,"localPartialReliability",{enumerable:true,configurable:true,writable:true,value:true});Object.defineProperty(this,"localPort",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"localVerificationTag",{enumerable:true,configurable:true,writable:true,value:(0,u.random32)()});Object.defineProperty(this,"remoteExtensions",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"remotePartialReliability",{enumerable:true,configurable:true,writable:true,value:true});Object.defineProperty(this,"remotePort",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"remoteVerificationTag",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"advertisedRwnd",{enumerable:true,configurable:true,writable:true,value:1024*1024});Object.defineProperty(this,"inboundStreams",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"_inboundStreamsCount",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"_inboundStreamsMax",{enumerable:true,configurable:true,writable:true,value:w});Object.defineProperty(this,"lastReceivedTsn",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sackDuplicates",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"sackMisOrdered",{enumerable:true,configurable:true,writable:true,value:new Set});Object.defineProperty(this,"sackNeeded",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"cwnd",{enumerable:true,configurable:true,writable:true,value:3*_});Object.defineProperty(this,"fastRecoveryExit",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"fastRecoveryTransmit",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"forwardTsnChunk",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"flightSize",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"outboundQueue",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"outboundStreamSeq",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"_outboundStreamsCount",{enumerable:true,configurable:true,writable:true,value:w});Object.defineProperty(this,"localTsn",{enumerable:true,configurable:true,writable:true,value:Number((0,u.random32)())});Object.defineProperty(this,"lastSackedTsn",{enumerable:true,configurable:true,writable:true,value:tsnMinusOne(this.localTsn)});Object.defineProperty(this,"advancedPeerAckTsn",{enumerable:true,configurable:true,writable:true,value:tsnMinusOne(this.localTsn)});Object.defineProperty(this,"partialBytesAcked",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"sentQueue",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"reconfigRequestSeq",{enumerable:true,configurable:true,writable:true,value:this.localTsn});Object.defineProperty(this,"reconfigResponseSeq",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"reconfigRequest",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"reconfigQueue",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"srtt",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rttvar",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rto",{enumerable:true,configurable:true,writable:true,value:x});Object.defineProperty(this,"timer1Handle",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timer1Chunk",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timer1Failures",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"timer2Handle",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timer2Chunk",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timer2Failures",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"timer3Handle",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timerReconfigHandle",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timerReconfigFailures",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"ssthresh",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"send",{enumerable:true,configurable:true,writable:true,value:async(e,t,r,{expiry:n,maxRetransmits:i,ordered:s}={expiry:undefined,maxRetransmits:undefined,ordered:true})=>{const o=s?this.outboundStreamSeq[e]||0:0;const c=Math.ceil(r.length/_);let p=0;const m=[];for(const u of(0,a.default)(0,c)){const a=new d.DataChunk(0,undefined);a.flags=0;if(!s){a.flags=O}if(u===0){a.flags|=P}if(u===c-1){a.flags|=C}a.tsn=this.localTsn;a.streamId=e;a.streamSeqNum=o;a.protocol=t;a.userData=r.slice(p,p+_);a.bookSize=a.userData.length;a.expiry=n;a.maxRetransmits=i;p+=_;this.localTsn=tsnPlusOne(this.localTsn);m.push(a)}m.forEach((e=>{this.outboundQueue.push(e)}));if(s){this.outboundStreamSeq[e]=(0,u.uint16Add)(o,1)}if(!this.timer3Handle){await this.transmit()}else{await new Promise((e=>setImmediate(e)))}}});Object.defineProperty(this,"timer1Expired",{enumerable:true,configurable:true,writable:true,value:()=>{this.timer1Failures++;this.timer1Handle=undefined;if(this.timer1Failures>I){this.setState(p.SCTP_STATE.CLOSED)}else{setImmediate((()=>{this.sendChunk(this.timer1Chunk).catch((e=>{g("send timer1 chunk failed",e.message)}))}));this.timer1Handle=setTimeout(this.timer1Expired,this.rto*1e3)}}});Object.defineProperty(this,"timer2Expired",{enumerable:true,configurable:true,writable:true,value:()=>{this.timer2Failures++;this.timer2Handle=undefined;if(this.timer2Failures>E){this.setState(p.SCTP_STATE.CLOSED)}else{setImmediate((()=>{this.sendChunk(this.timer2Chunk).catch((e=>{g("send timer2Chunk failed",e.message)}))}));this.timer2Handle=setTimeout(this.timer2Expired,this.rto*1e3)}}});Object.defineProperty(this,"timer3Expired",{enumerable:true,configurable:true,writable:true,value:()=>{this.timer3Handle=undefined;this.sentQueue.forEach((e=>{if(!this.maybeAbandon(e)){e.retransmit=true}}));this.updateAdvancedPeerAckPoint();this.fastRecoveryExit=undefined;this.flightSize=0;this.partialBytesAcked=0;this.ssthresh=Math.max(Math.floor(this.cwnd/2),4*_);this.cwnd=_;this.transmit()}});Object.defineProperty(this,"timerReconfigHandleExpired",{enumerable:true,configurable:true,writable:true,value:async()=>{this.timerReconfigFailures++;this.rto=Math.ceil(this.rto*1.5);if(this.timerReconfigFailures>E){g("timerReconfigFailures",this.timerReconfigFailures);this.setState(p.SCTP_STATE.CLOSED);this.timerReconfigHandle=undefined}else if(this.reconfigRequest){g("timerReconfigHandleExpired",this.timerReconfigFailures,this.rto);await this.sendReconfigParam(this.reconfigRequest);this.timerReconfigHandle=setTimeout(this.timerReconfigHandleExpired,this.rto*1e3)}}});this.localPort=this.port;this.transport.onData=e=>{this.handleData(e)}}get maxChannels(){if(this._inboundStreamsCount>0){return Math.min(this._inboundStreamsCount,this._outboundStreamsCount)}return undefined}static client(e,t=5e3){const r=new SCTP(e,t);r.isServer=false;return r}static server(e,t=5e3){const r=new SCTP(e,t);r.isServer=true;return r}async handleData(e){let t;const[,,r,n]=(0,d.parsePacket)(e);const i=n.filter((e=>e.type===d.InitChunk.type)).length;if(i>0){if(n.length!=1){throw new Error}t=0}else{t=this.localVerificationTag}if(r!==t){return}for(const e of n){await this.receiveChunk(e)}if(this.sackNeeded){await this.sendSack()}}async sendSack(){const e=[];let t;[...this.sackMisOrdered].sort().forEach((r=>{const n=(r-this.lastReceivedTsn)%N;if(r===t){e[e.length-1][1]=n}else{e.push([n,n])}t=tsnPlusOne(r)}));const r=new d.SackChunk(0,undefined);r.cumulativeTsn=this.lastReceivedTsn;r.advertisedRwnd=Math.max(0,this.advertisedRwnd);r.duplicates=[...this.sackDuplicates];r.gaps=e;await this.sendChunk(r).catch((e=>{g("send sack failed",e.message)}));this.sackDuplicates=[];this.sackNeeded=false}async receiveChunk(e){switch(e.type){case d.DataChunk.type:{this.receiveDataChunk(e)}break;case d.InitChunk.type:{if(!this.isServer)return;const t=e;g("receive init",t);this.lastReceivedTsn=tsnMinusOne(t.initialTsn);this.reconfigResponseSeq=tsnMinusOne(t.initialTsn);this.remoteVerificationTag=t.initiateTag;this.ssthresh=t.advertisedRwnd;this.getExtensions(t.params);this._inboundStreamsCount=Math.min(t.outboundStreams,this._inboundStreamsMax);this._outboundStreamsCount=Math.min(this._outboundStreamsCount,t.inboundStreams);const r=new d.InitAckChunk;r.initiateTag=this.localVerificationTag;r.advertisedRwnd=this.advertisedRwnd;r.outboundStreams=this._outboundStreamsCount;r.inboundStreams=this._inboundStreamsCount;r.initialTsn=this.localTsn;this.setExtensions(r.params);const n=Date.now()/1e3;let o=Buffer.from(s.jspack.Pack("!L",[n]));o=Buffer.concat([o,(0,i.createHmac)("sha1",this.hmacKey).update(o).digest()]);r.params.push([L,o]);g("send initAck",r);await this.sendChunk(r).catch((e=>{g("send initAck failed",e.message)}))}break;case d.InitAckChunk.type:{if(this.associationState!=p.SCTP_STATE.COOKIE_WAIT)return;const t=e;this.timer1Cancel();this.lastReceivedTsn=tsnMinusOne(t.initialTsn);this.reconfigResponseSeq=tsnMinusOne(t.initialTsn);this.remoteVerificationTag=t.initiateTag;this.ssthresh=t.advertisedRwnd;this.getExtensions(t.params);this._inboundStreamsCount=Math.min(t.outboundStreams,this._inboundStreamsMax);this._outboundStreamsCount=Math.min(this._outboundStreamsCount,t.inboundStreams);const r=new d.CookieEchoChunk;for(const[e,n]of t.params){if(e===L){r.body=n;break}}await this.sendChunk(r).catch((e=>{g("send echo failed",e.message)}));this.timer1Start(r);this.setState(p.SCTP_STATE.COOKIE_ECHOED)}break;case d.SackChunk.type:{await this.receiveSackChunk(e)}break;case d.HeartbeatChunk.type:{const t=new d.HeartbeatAckChunk;t.params=e.params;await this.sendChunk(t).catch((e=>{g("send heartbeat ack failed",e.message)}))}break;case d.AbortChunk.type:{this.setState(p.SCTP_STATE.CLOSED)}break;case d.ShutdownChunk.type:{this.timer2Cancel();this.setState(p.SCTP_STATE.SHUTDOWN_RECEIVED);const e=new d.ShutdownAckChunk;await this.sendChunk(e).catch((e=>{g("send shutdown ack failed",e.message)}));this.t2Start(e);this.setState(p.SCTP_STATE.SHUTDOWN_SENT)}break;case d.ErrorChunk.type:{g("ErrorChunk",e.descriptions)}break;case d.CookieEchoChunk.type:{if(!this.isServer)return;const t=e;const r=t.body;const n=(0,i.createHmac)("sha1",this.hmacKey).update(r.slice(0,4)).digest();if(r?.length!=b||!r.slice(4).equals(n)){g("x State cookie is invalid");return}const o=Date.now()/1e3;const a=s.jspack.Unpack("!L",r)[0];if(a<o-v||a>o){const e=new d.ErrorChunk(0,undefined);e.params.push([d.ErrorChunk.CODE.StaleCookieError,Buffer.concat([...Array(8)].map((()=>Buffer.from("\0"))))]);await this.sendChunk(e).catch((e=>{g("send errorChunk failed",e.message)}));return}const c=new d.CookieAckChunk;await this.sendChunk(c).catch((e=>{g("send cookieAck failed",e.message)}));this.setState(p.SCTP_STATE.ESTABLISHED)}break;case d.CookieAckChunk.type:{if(this.associationState!=p.SCTP_STATE.COOKIE_ECHOED)return;this.timer1Cancel();this.setState(p.SCTP_STATE.ESTABLISHED)}break;case d.ShutdownCompleteChunk.type:{if(this.associationState!=p.SCTP_STATE.SHUTDOWN_ACK_SENT)return;this.timer2Cancel();this.setState(p.SCTP_STATE.CLOSED)}break;case d.ReconfigChunk.type:{if(this.associationState!=p.SCTP_STATE.ESTABLISHED)return;const t=e;for(const[e,r]of t.params){const t=y.RECONFIG_PARAM_BY_TYPES[e];if(t){await this.receiveReconfigParam(t.parse(r))}}}break;case d.ForwardTsnChunk.type:{this.receiveForwardTsnChunk(e)}break}}getExtensions(e){for(const[t,r]of e){if(t===U){this.remotePartialReliability=true}else if(t===D){this.remoteExtensions=[...r]}}}async receiveReconfigParam(e){g("receiveReconfigParam",y.RECONFIG_PARAM_BY_TYPES[e.type]);switch(e.type){case y.OutgoingSSNResetRequestParam.type:{const t=e;const r=new y.ReconfigResponseParam(t.requestSequence,y.reconfigResult.ReconfigResultSuccessPerformed);this.reconfigResponseSeq=t.requestSequence;await this.sendReconfigParam(r);await Promise.all(t.streams.map((async e=>{delete this.inboundStreams[e];if(this.outboundStreamSeq[e]){this.reconfigQueue.push(e)}})));await this.transmitReconfigRequest();this.onReconfigStreams.execute(t.streams)}break;case y.ReconfigResponseParam.type:{const t=e;if(t.result!==y.reconfigResult.ReconfigResultSuccessPerformed){g("OutgoingSSNResetRequestParam failed",Object.keys(y.reconfigResult).find((e=>y.reconfigResult[e]===t.result)))}else if(t.responseSequence===this.reconfigRequest?.requestSequence){const e=this.reconfigRequest.streams.map((e=>{delete this.outboundStreamSeq[e];return e}));this.onReconfigStreams.execute(e);this.reconfigRequest=undefined;this.timerReconfigCancel();if(this.reconfigQueue.length>0){await this.transmitReconfigRequest()}}}break;case y.StreamAddOutgoingParam.type:{const t=e;this._inboundStreamsCount+=t.newStreams;const r=new y.ReconfigResponseParam(t.requestSequence,1);this.reconfigResponseSeq=t.requestSequence;await this.sendReconfigParam(r)}break}}receiveDataChunk(e){this.sackNeeded=true;if(this.markReceived(e.tsn))return;const t=this.getInboundStream(e.streamId);t.addChunk(e);this.advertisedRwnd-=e.userData.length;for(const e of t.popMessages()){this.advertisedRwnd+=e[2].length;this.receive(...e)}}async receiveSackChunk(e){if((0,u.uint32Gt)(this.lastSackedTsn,e.cumulativeTsn))return;const t=Date.now()/1e3;this.lastSackedTsn=e.cumulativeTsn;const r=this.flightSize>=this.cwnd;let n=0,i=0;while(this.sentQueue.length>0&&(0,u.uint32Gte)(this.lastSackedTsn,this.sentQueue[0].tsn)){const e=this.sentQueue.shift();n++;if(!e?.acked){i+=e.bookSize;this.flightSizeDecrease(e)}if(n===1&&e.sentCount===1){this.updateRto(t-e.sentTime)}}let s=false;if(e.gaps.length>0){const t=new Set;let r;e.gaps.forEach((n=>(0,a.default)(n[0],n[1]+1).forEach((n=>{r=(e.cumulativeTsn+n)%N;t.add(r)}))));let n=e.cumulativeTsn;for(const e of this.sentQueue){if((0,u.uint32Gt)(e.tsn,r)){break}if(t.has(e.tsn)&&!e.acked){i+=e.bookSize;e.acked=true;this.flightSizeDecrease(e);n=e.tsn}}for(const e of this.sentQueue){if((0,u.uint32Gt)(e.tsn,n)){break}if(!t.has(e.tsn)){e.misses++;if(e.misses===3){e.misses=0;if(!this.maybeAbandon(e)){e.retransmit=true}e.acked=false;this.flightSizeDecrease(e);s=true}}}}if(this.fastRecoveryExit===undefined){if(n&&r){if(this.cwnd<=this.ssthresh){this.cwnd+=Math.min(i,_)}else{this.partialBytesAcked+=i;if(this.partialBytesAcked>=this.cwnd){this.partialBytesAcked-=this.cwnd;this.cwnd+=_}}}if(s){this.ssthresh=Math.max(Math.floor(this.cwnd/2),4*_);this.cwnd=this.ssthresh;this.partialBytesAcked=0;this.fastRecoveryExit=this.sentQueue[this.sentQueue.length-1].tsn;this.fastRecoveryTransmit=true}}else if((0,u.uint32Gte)(e.cumulativeTsn,this.fastRecoveryExit)){this.fastRecoveryExit=undefined}if(this.sentQueue.length===0){this.timer3Cancel()}else if(n>0){this.timer3Restart()}this.updateAdvancedPeerAckPoint();await this.onSackReceived();await this.transmit()}receiveForwardTsnChunk(e){this.sackNeeded=true;if((0,u.uint32Gte)(this.lastReceivedTsn,e.cumulativeTsn)){return}const isObsolete=e=>(0,u.uint32Gt)(e,this.lastReceivedTsn);this.lastReceivedTsn=e.cumulativeTsn;this.sackMisOrdered=new Set([...this.sackMisOrdered].filter(isObsolete));for(const e of[...this.sackMisOrdered].sort()){if(e===tsnPlusOne(this.lastReceivedTsn)){this.lastReceivedTsn=e}else{break}}this.sackDuplicates=this.sackDuplicates.filter(isObsolete);this.sackMisOrdered=new Set([...this.sackMisOrdered].filter(isObsolete));for(const[t,r]of e.streams){const e=this.getInboundStream(t);e.streamSequenceNumber=(0,u.uint16Add)(r,1);for(const t of e.popMessages()){this.advertisedRwnd+=t[2].length;this.receive(...t)}}Object.values(this.inboundStreams).forEach((e=>{this.advertisedRwnd+=e.pruneChunks(this.lastReceivedTsn)}))}updateRto(e){if(!this.srtt){this.rttvar=e/2;this.srtt=e}else{this.rttvar=(1-T)*this.rttvar+T*Math.abs(this.srtt-e);this.srtt=(1-k)*this.srtt+k*e}this.rto=Math.max(R,Math.min(this.srtt+4*this.rttvar,B))}receive(e,t,r){this.onReceive.execute(e,t,r)}getInboundStream(e){if(!this.inboundStreams[e]){this.inboundStreams[e]=new InboundStream}return this.inboundStreams[e]}markReceived(e){if((0,u.uint32Gte)(this.lastReceivedTsn,e)||this.sackMisOrdered.has(e)){this.sackDuplicates.push(e);return true}this.sackMisOrdered.add(e);for(const e of[...this.sackMisOrdered].sort()){if(e===tsnPlusOne(this.lastReceivedTsn)){this.lastReceivedTsn=e}else{break}}const isObsolete=e=>(0,u.uint32Gt)(e,this.lastReceivedTsn);this.sackDuplicates=this.sackDuplicates.filter(isObsolete);this.sackMisOrdered=new Set([...this.sackMisOrdered].filter(isObsolete));return false}async transmit(){if(this.forwardTsnChunk){await this.sendChunk(this.forwardTsnChunk).catch((e=>{g("send forwardTsn failed",e.message)}));this.forwardTsnChunk=undefined;if(!this.timer3Handle){this.timer3Start()}}const e=this.fastRecoveryExit!=undefined?2*_:4*_;const t=Math.min(this.flightSize+e,this.cwnd);let r=true;for(const e of this.sentQueue){if(e.retransmit){if(this.fastRecoveryTransmit){this.fastRecoveryTransmit=false}else if(this.flightSize>=t){return}this.flightSizeIncrease(e);e.misses=0;e.retransmit=false;e.sentCount++;await this.sendChunk(e).catch((e=>{g("send data failed",e.message)}));if(r){this.timer3Restart()}}r=false}while(this.outboundQueue.length>0){const e=this.outboundQueue.shift();if(!e)return;this.sentQueue.push(e);this.flightSizeIncrease(e);e.sentCount++;e.sentTime=Date.now()/1e3;await this.sendChunk(e).catch((e=>{g("send data outboundQueue failed",e.message)}));if(!this.timer3Handle){this.timer3Start()}}}async transmitReconfigRequest(){if(this.reconfigQueue.length>0&&this.associationState===p.SCTP_STATE.ESTABLISHED&&!this.reconfigRequest){const e=this.reconfigQueue.slice(0,j);this.reconfigQueue=this.reconfigQueue.slice(j);const t=new y.OutgoingSSNResetRequestParam(this.reconfigRequestSeq,this.reconfigResponseSeq,tsnMinusOne(this.localTsn),e);this.reconfigRequestSeq=tsnPlusOne(this.reconfigRequestSeq);this.reconfigRequest=t;await this.sendReconfigParam(t);this.timerReconfigHandleStart()}}async sendReconfigParam(e){g("sendReconfigParam",e);const t=new d.ReconfigChunk;t.params.push([e.type,e.bytes]);await this.sendChunk(t).catch((e=>{g("send reconfig failed",e.message)}))}async sendResetRequest(e){g("sendResetRequest",e);const t=new d.DataChunk(0,undefined);t.streamId=e;this.outboundQueue.push(t);if(!this.timer3Handle){await this.transmit()}}flightSizeIncrease(e){this.flightSize+=e.bookSize}flightSizeDecrease(e){this.flightSize=Math.max(0,this.flightSize-e.bookSize)}timer1Start(e){if(this.timer1Handle)throw new Error;this.timer1Chunk=e;this.timer1Failures=0;this.timer1Handle=setTimeout(this.timer1Expired,this.rto*1e3)}timer1Cancel(){if(this.timer1Handle){clearTimeout(this.timer1Handle);this.timer1Handle=undefined;this.timer1Chunk=undefined}}t2Start(e){if(this.timer2Handle)throw new Error;this.timer2Chunk=e;this.timer2Failures=0;this.timer2Handle=setTimeout(this.timer2Expired,this.rto*1e3)}timer2Cancel(){if(this.timer2Handle){clearTimeout(this.timer2Handle);this.timer2Handle=undefined;this.timer2Chunk=undefined}}timer3Start(){if(this.timer3Handle)throw new Error;this.timer3Handle=setTimeout(this.timer3Expired,this.rto*1e3)}timer3Restart(){this.timer3Cancel();this.timer3Handle=setTimeout(this.timer3Expired,this.rto)}timer3Cancel(){if(this.timer3Handle){clearTimeout(this.timer3Handle);this.timer3Handle=undefined}}timerReconfigHandleStart(){if(this.timerReconfigHandle)return;g("timerReconfigHandleStart",{rto:this.rto});this.timerReconfigFailures=0;this.timerReconfigHandle=setTimeout(this.timerReconfigHandleExpired,this.rto*1e3)}timerReconfigCancel(){if(this.timerReconfigHandle){g("timerReconfigCancel");clearTimeout(this.timerReconfigHandle);this.timerReconfigHandle=undefined}}updateAdvancedPeerAckPoint(){if((0,u.uint32Gt)(this.lastSackedTsn,this.advancedPeerAckTsn)){this.advancedPeerAckTsn=this.lastSackedTsn}let e=0;const t={};while(this.sentQueue.length>0&&this.sentQueue[0].abandoned){const r=this.sentQueue.shift();this.advancedPeerAckTsn=r.tsn;e++;if(!(r.flags&O)){t[r.streamId]=r.streamSeqNum}}if(e){this.forwardTsnChunk=new d.ForwardTsnChunk(0,undefined);this.forwardTsnChunk.cumulativeTsn=this.advancedPeerAckTsn;this.forwardTsnChunk.streams=Object.entries(t).map((([e,t])=>[Number(e),t]))}}maybeAbandon(e){if(e.abandoned)return true;const t=!!e.maxRetransmits&&e.maxRetransmits<e.sentCount||!!e.expiry&&e.expiry<Date.now()/1e3;if(!t)return false;const r=this.sentQueue.findIndex((t=>t.type===e.type));for(const e of(0,a.default)(r,-1,-1)){const t=this.sentQueue[e];t.abandoned=true;t.retransmit=false;if(t.flags&C){break}}for(const e of(0,a.default)(r,this.sentQueue.length)){const t=this.sentQueue[e];t.abandoned=true;t.retransmit=false;if(t.flags&C){break}}return true}static getCapabilities(){return new RTCSctpCapabilities(65536)}setRemotePort(e){this.remotePort=e}async start(e){if(!this.started){this.started=true;this.setConnectionState("connecting");if(e){this.setRemotePort(e)}if(!this.isServer){await this.init()}}}async init(){const e=new d.InitChunk;e.initiateTag=this.localVerificationTag;e.advertisedRwnd=this.advertisedRwnd;e.outboundStreams=this._outboundStreamsCount;e.inboundStreams=this._inboundStreamsMax;e.initialTsn=this.localTsn;this.setExtensions(e.params);g("send init",e);try{await this.sendChunk(e);this.timer1Start(e);this.setState(p.SCTP_STATE.COOKIE_WAIT)}catch(e){g("send init failed",e.message)}}setExtensions(e){const t=[];if(this.localPartialReliability){e.push([U,Buffer.from("")]);t.push(d.ForwardTsnChunk.type)}t.push(d.ReConfigChunk.type);e.push([D,Buffer.from(t)])}async sendChunk(e){if(this.state==="closed")return;if(this.remotePort===undefined){throw new Error("invalid remote port")}const t=(0,d.serializePacket)(this.localPort,this.remotePort,this.remoteVerificationTag,e);await this.transport.send(t)}setState(e){if(e!=this.associationState){this.associationState=e}if(e===p.SCTP_STATE.ESTABLISHED){this.setConnectionState("connected")}else if(e===p.SCTP_STATE.CLOSED){this.timer1Cancel();this.timer2Cancel();this.timer3Cancel();this.timerReconfigCancel();this.setConnectionState("closed");this.removeAllListeners()}}setConnectionState(e){this.state=e;g("setConnectionState",e);this.stateChanged[e].execute()}async stop(){if(this.associationState!==p.SCTP_STATE.CLOSED){await this.abort()}this.setState(p.SCTP_STATE.CLOSED);clearTimeout(this.timer1Handle);clearTimeout(this.timer2Handle);clearTimeout(this.timer3Handle);clearTimeout(this.timerReconfigHandle)}async abort(){const e=new d.AbortChunk;await this.sendChunk(e).catch((e=>{g("send abort failed",e.message)}))}removeAllListeners(){Object.values(this.stateChanged).forEach((e=>e.allUnsubscribe()))}}t.SCTP=SCTP;class InboundStream{constructor(){Object.defineProperty(this,"reassembly",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"streamSequenceNumber",{enumerable:true,configurable:true,writable:true,value:0})}addChunk(e){if(this.reassembly.length===0||(0,u.uint32Gt)(e.tsn,this.reassembly[this.reassembly.length-1].tsn)){this.reassembly.push(e);return}for(const[t,r]of(0,m.enumerate)(this.reassembly)){if(r.tsn===e.tsn)throw new Error("duplicate chunk in reassembly");if((0,u.uint32Gt)(r.tsn,e.tsn)){this.reassembly.splice(t,0,e);break}}}*popMessages(){let e=0;let t;let r;let n;while(e<this.reassembly.length){const i=this.reassembly[e];if(t===undefined){n=!(i.flags&O);if(!(i.flags&P)){if(n){break}else{e++;continue}}if(n&&(0,u.uint16Gt)(i.streamSeqNum,this.streamSequenceNumber)){break}r=i.tsn;t=e}else if(i.tsn!==r){if(n){break}else{t=undefined;e++;continue}}if(i.flags&C){const r=this.reassembly.slice(t,e+1).map((e=>e.userData)).reduce(((e,t)=>{e.push(t);e.push(Buffer.from(""));return e}),[]);r.pop();const s=Buffer.concat(r);this.reassembly=[...this.reassembly.slice(0,t),...this.reassembly.slice(e+1)];if(n&&i.streamSeqNum===this.streamSequenceNumber){this.streamSequenceNumber=(0,u.uint16Add)(this.streamSequenceNumber,1)}e=t;yield[i.streamId,i.protocol,s]}else{e++}r=tsnPlusOne(r)}}pruneChunks(e){let t=-1,r=0;for(const[n,i]of this.reassembly.entries()){if((0,u.uint32Gte)(e,i.tsn)){t=n;r+=i.userData.length}else{break}}this.reassembly=this.reassembly.slice(t+1);return r}}t.InboundStream=InboundStream;class RTCSctpCapabilities{constructor(e){Object.defineProperty(this,"maxMessageSize",{enumerable:true,configurable:true,writable:true,value:e})}}t.RTCSctpCapabilities=RTCSctpCapabilities;function tsnMinusOne(e){return(e-1)%N}function tsnPlusOne(e){return(e+1)%N}},74759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SignatureAlgorithm=t.ReceiverDirection=t.SenderDirections=t.SRTP_PROFILE=t.SSRC_INFO_ATTRS=t.FMTP_INT_PARAMETERS=t.DTLS_SETUP_ROLE=t.DTLS_ROLE_SETUP=t.DIRECTIONS=t.MEDIA_KINDS=t.DISCARD_PORT=t.DISCARD_HOST=t.WEBRTC_BINARY_EMPTY=t.WEBRTC_STRING_EMPTY=t.WEBRTC_BINARY=t.WEBRTC_STRING=t.WEBRTC_DCEP=t.DATA_CHANNEL_PARTIAL_RELIABLE_TIMED_UNORDERED=t.DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT_UNORDERED=t.DATA_CHANNEL_RELIABLE_UNORDERED=t.DATA_CHANNEL_PARTIAL_RELIABLE_TIMED=t.DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT=t.DATA_CHANNEL_RELIABLE=t.DATA_CHANNEL_OPEN=t.DATA_CHANNEL_ACK=void 0;const n=r(47252);Object.defineProperty(t,"SignatureAlgorithm",{enumerable:true,get:function(){return n.SignatureAlgorithm}});const i=r(82083);t.DATA_CHANNEL_ACK=2;t.DATA_CHANNEL_OPEN=3;t.DATA_CHANNEL_RELIABLE=0;t.DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT=1;t.DATA_CHANNEL_PARTIAL_RELIABLE_TIMED=2;t.DATA_CHANNEL_RELIABLE_UNORDERED=128;t.DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT_UNORDERED=129;t.DATA_CHANNEL_PARTIAL_RELIABLE_TIMED_UNORDERED=130;t.WEBRTC_DCEP=50;t.WEBRTC_STRING=51;t.WEBRTC_BINARY=53;t.WEBRTC_STRING_EMPTY=56;t.WEBRTC_BINARY_EMPTY=57;t.DISCARD_HOST="0.0.0.0";t.DISCARD_PORT=9;t.MEDIA_KINDS=["audio","video"];t.DIRECTIONS=["inactive","sendonly","recvonly","sendrecv"];t.DTLS_ROLE_SETUP={auto:"actpass",client:"active",server:"passive"};t.DTLS_SETUP_ROLE=Object.keys(t.DTLS_ROLE_SETUP).reduce(((e,r)=>{const n=t.DTLS_ROLE_SETUP[r];e[n]=r;return e}),{});t.FMTP_INT_PARAMETERS=["apt","max-fr","max-fs","maxplaybackrate","minptime","stereo","useinbandfec"];t.SSRC_INFO_ATTRS=["cname","msid","mslabel","label"];t.SRTP_PROFILE={SRTP_AES128_CM_HMAC_SHA1_80:i.ProtectionProfileAes128CmHmacSha1_80,SRTP_AEAD_AES_128_GCM:i.ProtectionProfileAeadAes128Gcm};t.SenderDirections=["sendonly","sendrecv"];t.ReceiverDirection=["sendrecv","recvonly"]},59921:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RTCDataChannelParameters=t.RTCDataChannel=void 0;const i=n(r(69565));const s=r(36094);const o=r(52814);const a=(0,i.default)("werift:packages/webrtc/src/dataChannel.ts");class RTCDataChannel extends o.EventTarget{constructor(e,t,r=true){super();Object.defineProperty(this,"transport",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"parameters",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"sendOpen",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"stateChanged",{enumerable:true,configurable:true,writable:true,value:new s.Event});Object.defineProperty(this,"onMessage",{enumerable:true,configurable:true,writable:true,value:new s.Event});Object.defineProperty(this,"error",{enumerable:true,configurable:true,writable:true,value:new s.Event});Object.defineProperty(this,"bufferedAmountLow",{enumerable:true,configurable:true,writable:true,value:new s.Event});Object.defineProperty(this,"onopen",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onclose",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onclosing",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onmessage",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onerror",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"isCreatedByRemote",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"readyState",{enumerable:true,configurable:true,writable:true,value:"connecting"});Object.defineProperty(this,"bufferedAmount",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"_bufferedAmountLowThreshold",{enumerable:true,configurable:true,writable:true,value:0});this.id=this.parameters.id;if(t.negotiated){if(this.id==undefined||this.id<0||this.id>65534){throw new Error("ID must be in range 0-65534 if data channel is negotiated out-of-band")}this.transport.dataChannelAddNegotiated(this)}else{if(r){this.sendOpen=false;this.transport.dataChannelOpen(this)}}}get ordered(){return this.parameters.ordered}get maxRetransmits(){return this.parameters.maxRetransmits}get maxPacketLifeTime(){return this.parameters.maxPacketLifeTime}get label(){return this.parameters.label}get protocol(){return this.parameters.protocol}get negotiated(){return this.parameters.negotiated}get bufferedAmountLowThreshold(){return this._bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){if(e<0||e>4294967295){throw new Error("bufferedAmountLowThreshold must be in range 0 - 4294967295")}this._bufferedAmountLowThreshold=e}setId(e){this.id=e}setReadyState(e){if(e!==this.readyState){this.readyState=e;this.stateChanged.execute(e);switch(e){case"open":if(this.onopen)this.onopen();this.emit("open");break;case"closed":if(this.onclose)this.onclose();this.emit("close");break;case"closing":if(this.onclosing)this.onclosing();break}a("change state",e)}}addBufferedAmount(e){const t=this.bufferedAmount>this.bufferedAmountLowThreshold&&this.bufferedAmount+e<=this.bufferedAmountLowThreshold;this.bufferedAmount+=e;if(t){this.bufferedAmountLow.execute();this.emit("bufferedamountlow")}}send(e){this.transport.datachannelSend(this,e)}close(){this.transport.dataChannelClose(this)}}t.RTCDataChannel=RTCDataChannel;class RTCDataChannelParameters{constructor(e={}){Object.defineProperty(this,"label",{enumerable:true,configurable:true,writable:true,value:""});Object.defineProperty(this,"maxPacketLifeTime",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"maxRetransmits",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"ordered",{enumerable:true,configurable:true,writable:true,value:true});Object.defineProperty(this,"protocol",{enumerable:true,configurable:true,writable:true,value:""});Object.defineProperty(this,"negotiated",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}}t.RTCDataChannelParameters=RTCDataChannelParameters},52814:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.EventTarget=t.PromiseQueue=t.divide=t.enumerate=void 0;const i=n(r(82361));function enumerate(e){return e.map(((e,t)=>[t,e]))}t.enumerate=enumerate;function divide(e,t){const r=e.split(t);return[r[0],r.slice(1).join(t)]}t.divide=divide;class PromiseQueue{constructor(){Object.defineProperty(this,"queue",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"running",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"push",{enumerable:true,configurable:true,writable:true,value:e=>new Promise((t=>{this.queue.push({promise:e,done:t});if(!this.running)this.run()}))})}async run(){const e=this.queue.shift();if(e){this.running=true;await e.promise();e.done();this.run()}else{this.running=false}}}t.PromiseQueue=PromiseQueue;class EventTarget extends i.default{constructor(){super(...arguments);Object.defineProperty(this,"addEventListener",{enumerable:true,configurable:true,writable:true,value:(e,t)=>{this.addListener(e,t)}});Object.defineProperty(this,"removeEventListener",{enumerable:true,configurable:true,writable:true,value:(e,t)=>{this.removeListener(e,t)}})}}t.EventTarget=EventTarget},91240:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(35437),t);i(r(47252),t);i(r(58698),t);i(r(34566),t);i(r(59921),t);i(r(32355),t);i(r(32102),t);i(r(93958),t);i(r(73396),t);i(r(17434),t);i(r(86320),t);i(r(48741),t);i(r(6931),t);i(r(83988),t);i(r(35753),t);i(r(80989),t);i(r(74433),t);i(r(79481),t);i(r(99921),t)},32355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.useTWCC=t.useREMB=t.usePLI=t.useNACK=t.useFIR=void 0;const useFIR=()=>({type:"ccm",parameter:"fir"});t.useFIR=useFIR;const useNACK=()=>({type:"nack"});t.useNACK=useNACK;const usePLI=()=>({type:"nack",parameter:"pli"});t.usePLI=usePLI;const useREMB=()=>({type:"goog-remb"});t.useREMB=useREMB;const useTWCC=()=>({type:"transport-cc"});t.useTWCC=useTWCC},32102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.useAudioLevelIndication=t.useDependencyDescriptor=t.useAbsSendTime=t.useTransportWideCC=t.useRepairedRtpStreamId=t.useSdesRTPStreamId=t.useSdesMid=void 0;const n=r(34566);const i=r(93958);function useSdesMid(){return new i.RTCRtpHeaderExtensionParameters({uri:n.RTP_EXTENSION_URI.sdesMid})}t.useSdesMid=useSdesMid;function useSdesRTPStreamId(){return new i.RTCRtpHeaderExtensionParameters({uri:n.RTP_EXTENSION_URI.sdesRTPStreamID})}t.useSdesRTPStreamId=useSdesRTPStreamId;function useRepairedRtpStreamId(){return new i.RTCRtpHeaderExtensionParameters({uri:n.RTP_EXTENSION_URI.repairedRtpStreamId})}t.useRepairedRtpStreamId=useRepairedRtpStreamId;function useTransportWideCC(){return new i.RTCRtpHeaderExtensionParameters({uri:n.RTP_EXTENSION_URI.transportWideCC})}t.useTransportWideCC=useTransportWideCC;function useAbsSendTime(){return new i.RTCRtpHeaderExtensionParameters({uri:n.RTP_EXTENSION_URI.absSendTime})}t.useAbsSendTime=useAbsSendTime;function useDependencyDescriptor(){return new i.RTCRtpHeaderExtensionParameters({uri:n.RTP_EXTENSION_URI.dependencyDescriptor})}t.useDependencyDescriptor=useDependencyDescriptor;function useAudioLevelIndication(){return new i.RTCRtpHeaderExtensionParameters({uri:n.RTP_EXTENSION_URI.audioLevelIndication})}t.useAudioLevelIndication=useAudioLevelIndication},93958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RTCRtpSimulcastParameters=t.RTCRtpCodingParameters=t.RTCRtpRtxParameters=t.RTCRtcpFeedback=t.RTCRtcpParameters=t.RTCRtpHeaderExtensionParameters=t.RTCRtpCodecParameters=void 0;class RTCRtpCodecParameters{constructor(e){Object.defineProperty(this,"payloadType",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mimeType",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"clockRate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"channels",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtcpFeedback",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"parameters",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"direction",{enumerable:true,configurable:true,writable:true,value:"all"});Object.assign(this,e)}get name(){return this.mimeType.split("/")[1]}get contentType(){return this.mimeType.split("/")[0]}get str(){let e=`${this.name}/${this.clockRate}`;if(this.channels===2)e+="/2";return e}}t.RTCRtpCodecParameters=RTCRtpCodecParameters;class RTCRtpHeaderExtensionParameters{constructor(e){Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"uri",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}}t.RTCRtpHeaderExtensionParameters=RTCRtpHeaderExtensionParameters;class RTCRtcpParameters{constructor(e={}){Object.defineProperty(this,"cname",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mux",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}}t.RTCRtcpParameters=RTCRtcpParameters;class RTCRtcpFeedback{constructor(e={}){Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"parameter",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}}t.RTCRtcpFeedback=RTCRtcpFeedback;class RTCRtpRtxParameters{constructor(e={}){Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}}t.RTCRtpRtxParameters=RTCRtpRtxParameters;class RTCRtpCodingParameters{constructor(e){Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"payloadType",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtx",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}}t.RTCRtpCodingParameters=RTCRtpCodingParameters;class RTCRtpSimulcastParameters{constructor(e){Object.defineProperty(this,"rid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"direction",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}}t.RTCRtpSimulcastParameters=RTCRtpSimulcastParameters},1638:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.NackHandler=void 0;const i=n(r(69565));const s=n(r(46611));const o=n(r(36094));const a=r(35437);const c=r(34566);const u=(0,i.default)("werift:packages/webrtc/src/media/receiver/nack.ts");const d=30*5;class NackHandler{constructor(e){Object.defineProperty(this,"receiver",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"newEstSeqNum",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"_lost",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"nackLoop",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onPacketLost",{enumerable:true,configurable:true,writable:true,value:new o.default});Object.defineProperty(this,"mediaSourceSsrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"retryCount",{enumerable:true,configurable:true,writable:true,value:10});Object.defineProperty(this,"closed",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"sendNack",{enumerable:true,configurable:true,writable:true,value:()=>new Promise(((e,t)=>{if(this.lostSeqNumbers.length>0&&this.mediaSourceSsrc){const r=new c.GenericNack({senderSsrc:this.receiver.rtcpSsrc,mediaSourceSsrc:this.mediaSourceSsrc,lost:this.lostSeqNumbers});const n=new c.RtcpTransportLayerFeedback({feedback:r});this.receiver.dtlsTransport.sendRtcp([n]).then(e).catch(t);this.updateRetryCount();this.onPacketLost.execute(r)}}))})}get lostSeqNumbers(){return Object.keys(this._lost).map(Number).sort()}getLost(e){return this._lost[e]}setLost(e,t){this._lost[e]=t;if(this.nackLoop||this.closed){return}this.nackLoop=setInterval((async()=>{try{await this.sendNack();if(!Object.keys(this._lost).length){clearInterval(this.nackLoop);this.nackLoop=undefined}}catch(e){u("failed to send nack",e)}}),5)}removeLost(e){delete this._lost[e]}addPacket(e){const{sequenceNumber:t,ssrc:r}=e.header;this.mediaSourceSsrc=r;if(this.newEstSeqNum===0){this.newEstSeqNum=t;return}if(this.getLost(t)){this.removeLost(t);return}if(t===(0,a.uint16Add)(this.newEstSeqNum,1)){this.newEstSeqNum=t}else if(t>(0,a.uint16Add)(this.newEstSeqNum,1)){(0,s.default)((0,a.uint16Add)(this.newEstSeqNum,1),t).forEach((e=>{this.setLost(e,1)}));this.newEstSeqNum=t;this.pruneLost()}}pruneLost(){if(this.lostSeqNumbers.length>d){this._lost=Object.entries(this._lost).slice(-d).reduce(((e,[t,r])=>{e[t]=r;return e}),{})}}close(){this.closed=true;clearInterval(this.nackLoop);this._lost={}}updateRetryCount(){this.lostSeqNumbers.forEach((e=>{const t=this._lost[e]++;if(t>this.retryCount){this.removeLost(e);return e}}))}}t.NackHandler=NackHandler},61982:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ReceiverTWCC=void 0;const i=n(r(69565));const s=r(68670);const o=r(35437);const a=r(34566);const c=r(99921);const u=(0,i.default)("werift:packages/webrtc/media/receiver/receiverTwcc");class ReceiverTWCC{constructor(e,t,r){Object.defineProperty(this,"dtlsTransport",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"rtcpSsrc",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"mediaSourceSsrc",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"extensionInfo",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"twccRunning",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"fbPktCount",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"lastTimestamp",{enumerable:true,configurable:true,writable:true,value:void 0});this.runTWCC()}handleTWCC(e){this.extensionInfo[e]={tsn:e,timestamp:(0,c.microTime)()};if(Object.keys(this.extensionInfo).length>10){this.sendTWCC()}}async runTWCC(){while(this.twccRunning){this.sendTWCC();await(0,s.setTimeout)(100)}}sendTWCC(){if(Object.keys(this.extensionInfo).length===0)return;const e=Object.values(this.extensionInfo).sort(((e,t)=>e.tsn-t.tsn));const t=e[0].tsn;const r=e.slice(-1)[0].tsn;const n=[];const i=e[0].tsn;const s=(0,o.uint16Add)(r-t,1);let c;let d;const p=[];for(let e=t;e<=r;e++){const t=this.extensionInfo[e]?.timestamp;if(t){if(!this.lastTimestamp){this.lastTimestamp=t}if(!c){c=this.lastTimestamp}const i=t-this.lastTimestamp;this.lastTimestamp=t;const s=new a.RecvDelta({delta:Number(i)});s.parseDelta();p.push(s);if(d!=undefined&&d.status!==s.type){n.push(new a.RunLengthChunk({packetStatus:d.status,runLength:e-d.minTSN}));d={minTSN:e,status:s.type}}if(e===r){if(d!=undefined){n.push(new a.RunLengthChunk({packetStatus:d.status,runLength:e-d.minTSN+1}))}else{n.push(new a.RunLengthChunk({packetStatus:s.type,runLength:1}))}}if(d==undefined){d={minTSN:e,status:s.type}}}}if(!c){return}const m=new a.RtcpTransportLayerFeedback({feedback:new a.TransportWideCC({senderSsrc:this.rtcpSsrc,mediaSourceSsrc:this.mediaSourceSsrc,baseSequenceNumber:i,packetStatusCount:s,referenceTime:(0,o.uint24)(Math.floor(c/1e3/64)),fbPktCount:this.fbPktCount,recvDeltas:p,packetChunks:n})});this.dtlsTransport.sendRtcp([m]).catch((e=>{u(e)}));this.extensionInfo={};this.fbPktCount=(0,o.uint8Add)(this.fbPktCount,1)}}t.ReceiverTWCC=ReceiverTWCC},66149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StreamStatistics=void 0;const n=r(35437);class StreamStatistics{constructor(e){Object.defineProperty(this,"base_seq",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"max_seq",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"cycles",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"packets_received",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"clockRate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"jitter_q4",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"last_arrival",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"last_timestamp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"expected_prior",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"received_prior",{enumerable:true,configurable:true,writable:true,value:0});this.clockRate=e}add(e,t=Date.now()/1e3){const r=this.max_seq==undefined||(0,n.uint16Gt)(e.header.sequenceNumber,this.max_seq);this.packets_received++;if(this.base_seq==undefined){this.base_seq=e.header.sequenceNumber}if(r){const r=(0,n.int)(t*this.clockRate);if(this.max_seq!=undefined&&e.header.sequenceNumber<this.max_seq){this.cycles+=1<<16}this.max_seq=e.header.sequenceNumber;if(e.header.timestamp!==this.last_timestamp&&this.packets_received>1){const t=Math.abs(r-(this.last_arrival??0)-(e.header.timestamp-(this.last_timestamp??0)));this.jitter_q4+=t-(this.jitter_q4+8>>4)}this.last_arrival=r;this.last_timestamp=e.header.timestamp}}get fraction_lost(){const e=this.packets_expected-this.expected_prior;this.expected_prior=this.packets_expected;const t=this.packets_received-this.received_prior;this.received_prior=this.packets_received;const r=e-t;if(e==0||r<=0){return 0}else{return Math.floor((r<<8)/e)}}get jitter(){return this.jitter_q4>>4}get packets_expected(){return this.cycles+(this.max_seq??0)-(this.base_seq??0)+1}get packets_lost(){const e=this.packets_expected-this.packets_received;return e<0?0:e}}t.StreamStatistics=StreamStatistics},45892:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RtpRouter=void 0;const i=n(r(69565));const s=r(34566);const o=r(73396);const a=r(48741);const c=(0,i.default)("werift:packages/webrtc/src/media/router.ts");class RtpRouter{constructor(){Object.defineProperty(this,"ssrcTable",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"ridTable",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"extIdUriMap",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"routeRtp",{enumerable:true,configurable:true,writable:true,value:e=>{const t=(0,s.rtpHeaderExtensionsParser)(e.header.extensions,this.extIdUriMap);let r=this.ssrcTable[e.header.ssrc];const n=t[s.RTP_EXTENSION_URI.sdesRTPStreamID];if(typeof n==="string"){r=this.ridTable[n];r.latestRid=n;r.handleRtpByRid(e,n,t)}else if(r){r.handleRtpBySsrc(e,t)}else{r=Object.values(this.ridTable).filter((e=>e instanceof o.RTCRtpReceiver)).find((t=>t.trackBySSRC[e.header.ssrc]));if(r){c("simulcast register receiver by ssrc",e.header.ssrc);this.registerRtpReceiver(r,e.header.ssrc);r.handleRtpBySsrc(e,t)}else{}}if(!r){c("ssrcReceiver not found");return}const i=t[s.RTP_EXTENSION_URI.sdesMid];if(typeof i==="string"){r.sdesMid=i}const a=t[s.RTP_EXTENSION_URI.repairedRtpStreamId];if(typeof a==="string"){r.latestRepairedRid=a}}});Object.defineProperty(this,"routeRtcp",{enumerable:true,configurable:true,writable:true,value:e=>{const t=[];switch(e.type){case s.RtcpSrPacket.type:{e=e;t.push(this.ssrcTable[e.ssrc])}break;case s.RtcpRrPacket.type:{e=e;e.reports.forEach((e=>{t.push(this.ssrcTable[e.ssrc])}))}break;case s.RtcpSourceDescriptionPacket.type:{const t=e}break;case s.RtcpTransportLayerFeedback.type:{const r=e;if(r.feedback){t.push(this.ssrcTable[r.feedback.mediaSourceSsrc])}}break;case s.RtcpPayloadSpecificFeedback.type:{const r=e;switch(r.feedback.count){case s.ReceiverEstimatedMaxBitrate.count:{const e=r.feedback;t.push(this.ssrcTable[e.ssrcFeedbacks[0]])}break;default:t.push(this.ssrcTable[r.feedback.senderSsrc])}}break}t.filter((e=>e)).forEach((t=>t.handleRtcpPacket(e)))}})}registerRtpSender(e){this.ssrcTable[e.ssrc]=e}registerRtpReceiver(e,t){c("registerRtpReceiver",t);this.ssrcTable[t]=e}registerRtpReceiverBySsrc(e,t){c("registerRtpReceiverBySsrc",t);t.encodings.filter((e=>e.ssrc!=undefined)).forEach(((r,n)=>{this.registerRtpReceiver(e.receiver,r.ssrc);e.addTrack(new a.MediaStreamTrack({ssrc:r.ssrc,kind:e.kind,id:e.sender.trackId,remote:true,codec:t.codecs[n]}));if(r.rtx){this.registerRtpReceiver(e.receiver,r.rtx.ssrc)}}));t.headerExtensions.forEach((e=>{this.extIdUriMap[e.id]=e.uri}))}registerRtpReceiverByRid(e,t,r){const[n]=r.codecs;c("registerRtpReceiverByRid",t);e.addTrack(new a.MediaStreamTrack({rid:t.rid,kind:e.kind,id:e.sender.trackId,remote:true,codec:n}));this.ridTable[t.rid]=e.receiver}}t.RtpRouter=RtpRouter},73396:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RTCRtpReceiver=void 0;const i=r(69565);const s=n(r(36094));const o=r(68670);const a=r(63578);const c=r(91240);const u=r(35437);const d=r(34566);const p=r(99921);const m=r(1638);const y=r(61982);const g=r(66149);const b=(0,i.debug)("werift:packages/webrtc/src/media/rtpReceiver.ts");class RTCRtpReceiver{get codecArray(){return Object.values(this.codecs).sort(((e,t)=>e.payloadType-t.payloadType))}constructor(e,t,r){Object.defineProperty(this,"config",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"kind",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"rtcpSsrc",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"codecs",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"ssrcByRtx",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"nack",{enumerable:true,configurable:true,writable:true,value:new m.NackHandler(this)});Object.defineProperty(this,"audioRedHandler",{enumerable:true,configurable:true,writable:true,value:new d.RedHandler});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:"receiver"});Object.defineProperty(this,"uuid",{enumerable:true,configurable:true,writable:true,value:(0,a.v4)()});Object.defineProperty(this,"tracks",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"trackBySSRC",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"trackByRID",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"lastSRtimestamp",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"receiveLastSRTimestamp",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"onPacketLost",{enumerable:true,configurable:true,writable:true,value:this.nack.onPacketLost});Object.defineProperty(this,"onRtcp",{enumerable:true,configurable:true,writable:true,value:new s.default});Object.defineProperty(this,"dtlsTransport",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sdesMid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"latestRid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"latestRepairedRid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"receiverTWCC",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"stopped",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"remoteStreamId",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"remoteTrackId",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtcpRunning",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"rtcpCancel",{enumerable:true,configurable:true,writable:true,value:new AbortController});Object.defineProperty(this,"remoteStreams",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"handleRtpBySsrc",{enumerable:true,configurable:true,writable:true,value:(e,t)=>{const r=this.trackBySSRC[e.header.ssrc];this.handleRTP(e,t,r)}});Object.defineProperty(this,"handleRtpByRid",{enumerable:true,configurable:true,writable:true,value:(e,t,r)=>{const n=this.trackByRID[t];if(!this.trackBySSRC[e.header.ssrc]){this.trackBySSRC[e.header.ssrc]=n}this.handleRTP(e,r,n)}})}setDtlsTransport(e){this.dtlsTransport=e}get track(){return this.tracks[0]}get nackEnabled(){return this.codecArray[0]?.rtcpFeedback.find((e=>e.type==="nack"))}get twccEnabled(){return this.codecArray[0]?.rtcpFeedback.find((e=>e.type===(0,c.useTWCC)().type))}get pliEnabled(){return this.codecArray[0]?.rtcpFeedback.find((e=>e.type===(0,c.usePLI)().type))}prepareReceive(e){e.codecs.forEach((e=>{this.codecs[e.payloadType]=e}));e.encodings.forEach((e=>{if(e.rtx){this.ssrcByRtx[e.rtx.ssrc]=e.ssrc}}))}setupTWCC(e){if(this.twccEnabled&&!this.receiverTWCC){this.receiverTWCC=new y.ReceiverTWCC(this.dtlsTransport,this.rtcpSsrc,e)}}addTrack(e){const t=this.tracks.find((t=>{if(t.rid){return t.rid===e.rid}if(t.ssrc){return t.ssrc===e.ssrc}}));if(t){return false}this.tracks.push(e);if(e.ssrc){this.trackBySSRC[e.ssrc]=e}if(e.rid){this.trackByRID[e.rid]=e}return true}stop(){this.stopped=true;this.rtcpRunning=false;this.rtcpCancel.abort();if(this.receiverTWCC)this.receiverTWCC.twccRunning=false;this.nack.close()}async runRtcp(){if(this.rtcpRunning||this.stopped)return;this.rtcpRunning=true;try{while(this.rtcpRunning){await(0,o.setTimeout)(500+Math.random()*1e3,undefined,{signal:this.rtcpCancel.signal});const e=Object.entries(this.remoteStreams).map((([e,t])=>{let r=0,n=0;if(this.lastSRtimestamp[e]){r=this.lastSRtimestamp[e];const t=(0,p.timestampSeconds)()-this.receiveLastSRTimestamp[e];if(t>0&&t<65536){n=(0,u.int)(t*65536)}}return new d.RtcpReceiverInfo({ssrc:Number(e),fractionLost:t.fraction_lost,packetsLost:t.packets_lost,highestSequence:t.max_seq,jitter:t.jitter,lsr:r,dlsr:n})}));const t=new d.RtcpRrPacket({ssrc:this.rtcpSsrc,reports:e});try{if(this.config.debug.receiverReportDelay){await(0,o.setTimeout)(this.config.debug.receiverReportDelay)}await this.dtlsTransport.sendRtcp([t])}catch(e){b("sendRtcp failed",e);await(0,o.setTimeout)(500+Math.random()*1e3)}}}catch(e){}}getStats(){}async sendRtcpPLI(e){if(!this.pliEnabled){b("pli not supported",{mediaSsrc:e});return}if(this.stopped){return}b("sendRtcpPLI",{mediaSsrc:e});const t=new d.RtcpPayloadSpecificFeedback({feedback:new d.PictureLossIndication({senderSsrc:this.rtcpSsrc,mediaSsrc:e})});try{await this.dtlsTransport.sendRtcp([t])}catch(e){b(e)}}handleRtcpPacket(e){switch(e.type){case d.RtcpSrPacket.type:{const t=e;this.lastSRtimestamp[t.ssrc]=(0,p.compactNtp)(t.senderInfo.ntpTimestamp);this.receiveLastSRTimestamp[t.ssrc]=(0,p.timestampSeconds)();const r=this.trackBySSRC[e.ssrc];if(r){r.onReceiveRtcp.execute(e)}}break}this.onRtcp.execute(e)}handleRTP(e,t,r){if(this.stopped){return}const n=this.codecs[e.header.payloadType];if(!n){return}this.remoteStreams[e.header.ssrc]=this.remoteStreams[e.header.ssrc]??new g.StreamStatistics(n.clockRate);this.remoteStreams[e.header.ssrc].add(e);if(this.receiverTWCC){const e=t[d.RTP_EXTENSION_URI.transportWideCC];if(!e==undefined){throw new Error("undefined")}this.receiverTWCC.handleTWCC(e)}else if(this.twccEnabled){this.setupTWCC(e.header.ssrc)}if(n.name.toLowerCase()==="rtx"){const t=this.ssrcByRtx[e.header.ssrc];const i=(0,c.codecParametersFromString)(n.parameters??"");const s=this.codecs[i["apt"]];if(e.payload.length<2)return;e=(0,d.unwrapRtx)(e,s.payloadType,t);r=this.trackBySSRC[t]}let i;if(n.name.toLowerCase()==="red"){i=d.Red.deSerialize(e.payload);if(!Object.keys(this.codecs).includes(i.header.fields[0].blockPT.toString())){return}}if(r?.kind==="video"&&this.nackEnabled){this.nack.addPacket(e)}if(r){if(i){if(r.kind==="audio"){const t=this.audioRedHandler.push(i,e);for(const e of t){r.onReceiveRtp.execute(e.clone())}}else{}}else{r.onReceiveRtp.execute(e.clone())}}this.runRtcp()}}t.RTCRtpReceiver=RTCRtpReceiver},17434:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RTCRtpSender=void 0;const a=r(6113);const c=r(48775);const u=o(r(69565));const d=o(r(36094));const p=r(68670);const m=s(r(63578));const y=r(91240);const g=r(35437);const b=r(34566);const v=r(99921);const w=r(12248);const _=(0,u.default)("werift:packages/webrtc/src/media/rtpSender.ts");const C=128;const P=.85;class RTCRtpSender{constructor(e){Object.defineProperty(this,"trackOrKind",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:"sender"});Object.defineProperty(this,"kind",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:c.jspack.Unpack("!L",(0,a.randomBytes)(4))[0]});Object.defineProperty(this,"rtxSsrc",{enumerable:true,configurable:true,writable:true,value:c.jspack.Unpack("!L",(0,a.randomBytes)(4))[0]});Object.defineProperty(this,"streamId",{enumerable:true,configurable:true,writable:true,value:m.v4()});Object.defineProperty(this,"trackId",{enumerable:true,configurable:true,writable:true,value:m.v4()});Object.defineProperty(this,"onReady",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"onRtcp",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"onPictureLossIndication",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"onGenericNack",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"senderBWE",{enumerable:true,configurable:true,writable:true,value:new w.SenderBandwidthEstimator});Object.defineProperty(this,"cname",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtpStreamId",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"repairedRtpStreamId",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtxPayloadType",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtxSequenceNumber",{enumerable:true,configurable:true,writable:true,value:(0,g.random16)()});Object.defineProperty(this,"redRedundantPayloadType",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_redDistance",{enumerable:true,configurable:true,writable:true,value:2});Object.defineProperty(this,"redEncoder",{enumerable:true,configurable:true,writable:true,value:new b.RedEncoder(this._redDistance)});Object.defineProperty(this,"headerExtensions",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"disposeTrack",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"lastSRtimestamp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"lastSentSRTimestamp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"ntpTimestamp",{enumerable:true,configurable:true,writable:true,value:0n});Object.defineProperty(this,"rtpTimestamp",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"octetCount",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"packetCount",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"rtt",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"receiverEstimatedMaxBitrate",{enumerable:true,configurable:true,writable:true,value:0n});Object.defineProperty(this,"sequenceNumber",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timestamp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timestampOffset",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"seqOffset",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"rtpCache",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"codec",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"dtlsTransport",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"dtlsDisposer",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"track",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"stopped",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"rtcpRunning",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"rtcpCancel",{enumerable:true,configurable:true,writable:true,value:new AbortController});this.kind=typeof this.trackOrKind==="string"?this.trackOrKind:this.trackOrKind.kind;if(typeof e!=="string"){if(e.streamId){this.streamId=e.streamId}this.registerTrack(e)}}setDtlsTransport(e){if(this.dtlsTransport){this.dtlsDisposer.forEach((e=>e()))}this.dtlsTransport=e;this.dtlsDisposer=[this.dtlsTransport.onStateChange.subscribe((e=>{if(e==="connected"){this.onReady.execute()}})).unSubscribe]}get redDistance(){return this._redDistance}set redDistance(e){this._redDistance=e;this.redEncoder.distance=e}prepareSend(e){this.cname=e.rtcp?.cname;this.mid=e.muxId;this.headerExtensions=e.headerExtensions;this.rtpStreamId=e.rtpStreamId;this.repairedRtpStreamId=e.repairedRtpStreamId;this.codec=e.codecs[0];if(this.track){this.track.codec=this.codec}e.codecs.forEach((e=>{const t=(0,y.codecParametersFromString)(e.parameters??"");if(e.name.toLowerCase()==="rtx"&&t["apt"]===this.codec?.payloadType){this.rtxPayloadType=e.payloadType}if(e.name.toLowerCase()==="red"){this.redRedundantPayloadType=Number((e.parameters??"").split("/")[0])}}))}registerTrack(e){if(e.stopped)throw new Error("track is ended");if(this.disposeTrack){this.disposeTrack()}e.id=this.trackId;const{unSubscribe:t}=e.onReceiveRtp.subscribe((async e=>{await this.sendRtp(e)}));this.track=e;this.disposeTrack=t;if(this.codec){e.codec=this.codec}e.onSourceChanged.subscribe((e=>{this.replaceRTP(e)}))}async replaceTrack(e){if(e===null){return}if(e.stopped)throw new Error("track is ended");if(this.sequenceNumber!=undefined){const t=e.header||(await e.onReceiveRtp.asPromise())[0].header;this.replaceRTP(t)}this.registerTrack(e);_("replaceTrack","ssrc",e.ssrc,"rid",e.rid)}stop(){this.stopped=true;this.rtcpRunning=false;this.rtcpCancel.abort();if(this.disposeTrack){this.disposeTrack()}this.track=undefined}async runRtcp(){if(this.rtcpRunning||this.stopped)return;this.rtcpRunning=true;try{while(this.rtcpRunning){await(0,p.setTimeout)(500+Math.random()*1e3,undefined,{signal:this.rtcpCancel.signal});const e=[new b.RtcpSrPacket({ssrc:this.ssrc,senderInfo:new b.RtcpSenderInfo({ntpTimestamp:this.ntpTimestamp,rtpTimestamp:this.rtpTimestamp,packetCount:this.packetCount,octetCount:this.octetCount})})];this.lastSRtimestamp=(0,v.compactNtp)(this.ntpTimestamp);this.lastSentSRTimestamp=(0,v.timestampSeconds)();if(this.cname){e.push(new b.RtcpSourceDescriptionPacket({chunks:[new b.SourceDescriptionChunk({source:this.ssrc,items:[new b.SourceDescriptionItem({type:1,text:this.cname})]})]}))}try{await this.dtlsTransport.sendRtcp(e)}catch(e){_("sendRtcp failed",e);await(0,p.setTimeout)(500+Math.random()*1e3)}}}catch(e){}}replaceRTP({sequenceNumber:e,timestamp:t},r=false){if(this.sequenceNumber!=undefined){this.seqOffset=(0,g.uint16Add)(this.sequenceNumber,-e);if(r){this.seqOffset=(0,g.uint16Add)(this.seqOffset,2)}}if(this.timestamp!=undefined){this.timestampOffset=(0,g.uint32Add)(this.timestamp,-t);if(r){this.timestampOffset=(0,g.uint16Add)(this.timestampOffset,1)}}this.rtpCache=[];_("replaceRTP",this.sequenceNumber,e,this.seqOffset)}async sendRtp(e){if(this.dtlsTransport.state!=="connected"||!this.codec){return}e=Buffer.isBuffer(e)?b.RtpPacket.deSerialize(e):e;const{header:t,payload:r}=e;t.ssrc=this.ssrc;t.payloadType=this.codec.payloadType;t.timestamp=(0,g.uint32Add)(t.timestamp,this.timestampOffset);t.sequenceNumber=(0,g.uint16Add)(t.sequenceNumber,this.seqOffset);this.timestamp=t.timestamp;this.sequenceNumber=t.sequenceNumber;const n=(0,v.ntpTime)();const i=[...t.extensions];t.extensions=this.headerExtensions.map((e=>{const t=(()=>{switch(e.uri){case b.RTP_EXTENSION_URI.sdesMid:if(this.mid){return(0,b.serializeSdesMid)(this.mid)}return;case b.RTP_EXTENSION_URI.sdesRTPStreamID:if(this.rtpStreamId){return(0,b.serializeSdesRTPStreamID)(this.rtpStreamId)}return;case b.RTP_EXTENSION_URI.repairedRtpStreamId:if(this.repairedRtpStreamId){return(0,b.serializeRepairedRtpStreamId)(this.repairedRtpStreamId)}return;case b.RTP_EXTENSION_URI.transportWideCC:this.dtlsTransport.transportSequenceNumber=(0,g.uint16Add)(this.dtlsTransport.transportSequenceNumber,1);return(0,b.serializeTransportWideCC)(this.dtlsTransport.transportSequenceNumber);case b.RTP_EXTENSION_URI.absSendTime:return(0,b.serializeAbsSendTime)(n)}})();if(t)return{id:e.id,payload:t}})).filter((e=>e));for(const e of i){const r=t.extensions.find((t=>t.id===e.id));if(r){r.payload=e.payload}else{t.extensions.push(e)}}t.extensions=t.extensions.sort(((e,t)=>e.id-t.id));this.ntpTimestamp=n;this.rtpTimestamp=t.timestamp;this.octetCount+=r.length;this.packetCount=(0,g.uint32Add)(this.packetCount,1);this.rtpCache[t.sequenceNumber%C]=e;let s=r;if(this.redRedundantPayloadType){this.redEncoder.push({block:s,timestamp:t.timestamp,blockPT:this.redRedundantPayloadType});const e=this.redEncoder.build();s=e.serialize()}const o=await this.dtlsTransport.sendRtp(s,t);this.runRtcp();const a=(0,v.milliTime)();const c={wideSeq:this.dtlsTransport.transportSequenceNumber,size:o,sendingAtMs:a,sentAtMs:a};this.senderBWE.rtpPacketSent(c)}handleRtcpPacket(e){switch(e.type){case b.RtcpSrPacket.type:case b.RtcpRrPacket.type:{const t=e;t.reports.filter((e=>e.ssrc===this.ssrc)).forEach((e=>{if(this.lastSRtimestamp===e.lsr&&e.dlsr){if(this.lastSentSRTimestamp){const t=(0,v.timestampSeconds)()-this.lastSentSRTimestamp-e.dlsr/65536;if(this.rtt===undefined){this.rtt=t}else{this.rtt=P*this.rtt+(1-P)*t}}}}))}break;case b.RtcpTransportLayerFeedback.type:{const t=e;switch(t.feedback.count){case b.TransportWideCC.count:{const e=t.feedback;this.senderBWE.receiveTWCC(e)}break;case b.GenericNack.count:{const e=t.feedback;e.lost.forEach((async e=>{let t=this.rtpCache[e%C];if(t&&t.header.sequenceNumber!==e){t=undefined}if(t){if(this.rtxPayloadType!=undefined){t=(0,b.wrapRtx)(t,this.rtxPayloadType,this.rtxSequenceNumber,this.rtxSsrc);this.rtxSequenceNumber=(0,g.uint16Add)(this.rtxSequenceNumber,1)}await this.dtlsTransport.sendRtp(t.payload,t.header)}}));this.onGenericNack.execute(e)}break}}break;case b.RtcpPayloadSpecificFeedback.type:{const t=e;switch(t.feedback.count){case b.ReceiverEstimatedMaxBitrate.count:{const e=t.feedback;this.receiverEstimatedMaxBitrate=e.bitrate}break;case b.PictureLossIndication.count:{this.onPictureLossIndication.execute()}break}}break}this.onRtcp.execute(e)}}t.RTCRtpSender=RTCRtpSender},86320:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Directions=t.Sendrecv=t.Recvonly=t.Sendonly=t.Inactive=t.RTCRtpTransceiver=void 0;const a=o(r(36094));const c=s(r(63578));const u=r(74759);class RTCRtpTransceiver{set codecs(e){this._codecs=e}get codecs(){return this._codecs}constructor(e,t,r,n,i){Object.defineProperty(this,"kind",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"receiver",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"sender",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"_direction",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:c.v4()});Object.defineProperty(this,"onTrack",{enumerable:true,configurable:true,writable:true,value:new a.default});Object.defineProperty(this,"mid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mLineIndex",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"usedForSender",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"_currentDirection",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"offerDirection",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_codecs",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"headerExtensions",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"stopping",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"stopped",{enumerable:true,configurable:true,writable:true,value:false});this.setDtlsTransport(t)}get dtlsTransport(){return this.receiver.dtlsTransport}get direction(){return this._direction}setDirection(e){this._direction=e;if(u.SenderDirections.includes(this._currentDirection??"")){this.usedForSender=true}}get currentDirection(){return this._currentDirection}setCurrentDirection(e){this._currentDirection=e}setDtlsTransport(e){this.receiver.setDtlsTransport(e);this.sender.setDtlsTransport(e)}get msid(){return`${this.sender.streamId} ${this.sender.trackId}`}addTrack(e){const t=this.receiver.addTrack(e);if(t){this.onTrack.execute(e,this)}}stop(){if(this.stopping){return}this.stopping=true}getPayloadType(e){return this.codecs.find((t=>t.mimeType.toLowerCase().includes(e.toLowerCase())))?.payloadType}}t.RTCRtpTransceiver=RTCRtpTransceiver;t.Inactive="inactive";t.Sendonly="sendonly";t.Recvonly="recvonly";t.Sendrecv="sendrecv";t.Directions=[t.Inactive,t.Sendonly,t.Recvonly,t.Sendrecv]},83772:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CumulativeResult=void 0;const n=r(218);class CumulativeResult{constructor(){Object.defineProperty(this,"numPackets",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"totalSize",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"firstPacketSentAtMs",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"lastPacketSentAtMs",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"firstPacketReceivedAtMs",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"lastPacketReceivedAtMs",{enumerable:true,configurable:true,writable:true,value:0})}addPacket(e,t,r){if(this.numPackets===0){this.firstPacketSentAtMs=t;this.firstPacketReceivedAtMs=r;this.lastPacketSentAtMs=t;this.lastPacketReceivedAtMs=r}else{if(t<this.firstPacketSentAtMs)this.firstPacketSentAtMs=t;if(r<this.firstPacketReceivedAtMs)this.firstPacketReceivedAtMs=r;if(t>this.lastPacketSentAtMs)this.lastPacketSentAtMs=t;if(r>this.lastPacketReceivedAtMs)this.lastPacketReceivedAtMs=r}this.numPackets++;this.totalSize+=e}reset(){this.numPackets=0;this.totalSize=0;this.firstPacketSentAtMs=0;this.lastPacketSentAtMs=0;this.firstPacketReceivedAtMs=0;this.lastPacketReceivedAtMs=0}get receiveBitrate(){const e=this.lastPacketReceivedAtMs-this.firstPacketReceivedAtMs;const t=this.totalSize/e*8*1e3;return(0,n.Int)(t)}get sendBitrate(){const e=this.lastPacketSentAtMs-this.firstPacketSentAtMs;const t=this.totalSize/e*8*1e3;return(0,n.Int)(t)}}t.CumulativeResult=CumulativeResult},12248:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.SenderBandwidthEstimator=void 0;const i=n(r(36094));const s=r(218);const o=r(99921);const a=r(83772);const c=20;const u=10;class SenderBandwidthEstimator{get congestionScore(){return this._congestionScore}set congestionScore(e){this._congestionScore=e;this.onCongestionScore.execute(e)}get availableBitrate(){return this._availableBitrate}set availableBitrate(e){this._availableBitrate=e;this.onAvailableBitrate.execute(e)}constructor(){Object.defineProperty(this,"congestion",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"onAvailableBitrate",{enumerable:true,configurable:true,writable:true,value:new i.default});Object.defineProperty(this,"onCongestion",{enumerable:true,configurable:true,writable:true,value:new i.default});Object.defineProperty(this,"onCongestionScore",{enumerable:true,configurable:true,writable:true,value:new i.default});Object.defineProperty(this,"congestionCounter",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"cumulativeResult",{enumerable:true,configurable:true,writable:true,value:new a.CumulativeResult});Object.defineProperty(this,"sentInfos",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"_congestionScore",{enumerable:true,configurable:true,writable:true,value:1});Object.defineProperty(this,"_availableBitrate",{enumerable:true,configurable:true,writable:true,value:0})}receiveTWCC(e){const t=(0,o.milliTime)();const r=t-this.cumulativeResult.firstPacketSentAtMs;if(r>1e3){this.cumulativeResult.reset();if(this.congestionCounter<c){this.congestionCounter++}else if(this.congestionScore<u){this.congestionScore++}if(this.congestionCounter>=c&&!this.congestion){this.congestion=true;this.onCongestion.execute(this.congestion)}}for(const t of e.packetResults){if(!t.received)continue;const e=t.sequenceNumber;const r=this.sentInfos[e];if(!r)continue;if(!t.receivedAtMs)continue;this.cumulativeResult.addPacket(r.size,r.sendingAtMs,t.receivedAtMs)}if(r>=100&&this.cumulativeResult.numPackets>=20){this.availableBitrate=Math.min(this.cumulativeResult.sendBitrate,this.cumulativeResult.receiveBitrate);this.cumulativeResult.reset();if(this.congestionCounter>-c){const e=(0,s.Int)(c/2)+1;const t=(0,s.Int)(c/4)+1;const r=e-(e-t)/10*this.congestionScore;this.congestionCounter=this.congestionCounter-r}if(this.congestionCounter<=-c){if(this.congestionScore>1){this.congestionScore--;this.onCongestion.execute(false)}this.congestionCounter=0}if(this.congestionCounter<=0&&this.congestion){this.congestion=false;this.onCongestion.execute(this.congestion)}}}rtpPacketSent(e){Object.keys(e).map((e=>Number(e))).sort().filter((t=>t<e.wideSeq)).forEach((e=>{delete this.sentInfos[e]}));this.sentInfos[e.wideSeq]=e}}t.SenderBandwidthEstimator=SenderBandwidthEstimator},48741:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.MediaStream=t.MediaStreamTrack=void 0;const i=n(r(36094));const s=r(63578);const o=r(34566);const a=r(52814);class MediaStreamTrack extends a.EventTarget{constructor(e){super();Object.defineProperty(this,"uuid",{enumerable:true,configurable:true,writable:true,value:(0,s.v4)()});Object.defineProperty(this,"streamId",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"remote",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"label",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"kind",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"header",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"codec",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"enabled",{enumerable:true,configurable:true,writable:true,value:true});Object.defineProperty(this,"onReceiveRtp",{enumerable:true,configurable:true,writable:true,value:new i.default});Object.defineProperty(this,"onReceiveRtcp",{enumerable:true,configurable:true,writable:true,value:new i.default});Object.defineProperty(this,"onSourceChanged",{enumerable:true,configurable:true,writable:true,value:new i.default});Object.defineProperty(this,"stopped",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"muted",{enumerable:true,configurable:true,writable:true,value:true});Object.defineProperty(this,"stop",{enumerable:true,configurable:true,writable:true,value:()=>{this.stopped=true;this.muted=true;this.onReceiveRtp.complete();this.emit("ended")}});Object.defineProperty(this,"writeRtp",{enumerable:true,configurable:true,writable:true,value:e=>{if(this.remote){throw new Error("this is remoteTrack")}if(this.stopped){return}const t=Buffer.isBuffer(e)?o.RtpPacket.deSerialize(e):e;t.header.payloadType=this.codec?.payloadType??t.header.payloadType;this.onReceiveRtp.execute(t)}});Object.assign(this,e);this.onReceiveRtp.subscribe((e=>{this.muted=false;this.header=e.header}));this.label=`${this.remote?"remote":"local"} ${this.kind}`}}t.MediaStreamTrack=MediaStreamTrack;class MediaStream{constructor(e){Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"tracks",{enumerable:true,configurable:true,writable:true,value:[]});if(Array.isArray(e)){this.tracks=e}else{Object.assign(this,e)}this.id??(this.id=(0,s.v4)())}addTrack(e){e.streamId=this.id;this.tracks.push(e)}getTracks(){return this.tracks}getAudioTracks(){return this.tracks.filter((e=>e.kind==="audio"))}getVideoTracks(){return this.tracks.filter((e=>e.kind==="video"))}}t.MediaStream=MediaStream},6931:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.defaultPeerConfig=t.findCodecByMimeType=t.allocateMid=t.addTransportDescription=t.createMediaDescriptionForSctp=t.createMediaDescriptionForTransceiver=t.RTCPeerConnection=void 0;const a=o(r(69565));const c=o(r(95122));const u=o(r(54539));const d=o(r(36094));const p=s(r(63578));const m=r(91240);const y=r(91240);const g=r(74759);const b=r(59921);const v=r(52814);const w=r(93958);const _=r(45892);const C=r(73396);const P=r(17434);const O=r(86320);const E=r(48741);const I=r(83988);const k=r(35753);const T=r(80989);const x=r(74433);const R=r(99921);const B=(0,a.default)("werift:packages/webrtc/src/peerConnection.ts");class RTCPeerConnection extends v.EventTarget{pushTransceiver(e){this.transceivers.push(e)}replaceTransceiver(e,t){this.transceivers[t]=e}get dtlsTransports(){const e=this.transceivers.map((e=>e.dtlsTransport));if(this.sctpTransport){e.push(this.sctpTransport.dtlsTransport)}return e.reduce(((e,t)=>{if(!e.map((e=>e.id)).includes(t.id)){e.push(t)}return e}),[])}get iceTransports(){return this.dtlsTransports.map((e=>e.iceTransport))}get extIdUriMap(){return this.router.extIdUriMap}constructor(e={}){super();Object.defineProperty(this,"cname",{enumerable:true,configurable:true,writable:true,value:p.v4()});Object.defineProperty(this,"sctpTransport",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"transportEstablished",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"config",{enumerable:true,configurable:true,writable:true,value:(0,c.default)(t.defaultPeerConfig)});Object.defineProperty(this,"connectionState",{enumerable:true,configurable:true,writable:true,value:"new"});Object.defineProperty(this,"iceConnectionState",{enumerable:true,configurable:true,writable:true,value:"new"});Object.defineProperty(this,"iceGatheringState",{enumerable:true,configurable:true,writable:true,value:"new"});Object.defineProperty(this,"signalingState",{enumerable:true,configurable:true,writable:true,value:"stable"});Object.defineProperty(this,"negotiationneeded",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"transceivers",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"candidatesSent",{enumerable:true,configurable:true,writable:true,value:new Set});Object.defineProperty(this,"iceGatheringStateChange",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"iceConnectionStateChange",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"signalingStateChange",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"connectionStateChange",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"onDataChannel",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"onRemoteTransceiverAdded",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"onTransceiverAdded",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"onIceCandidate",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"onNegotiationneeded",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"onTrack",{enumerable:true,configurable:true,writable:true,value:new d.default});Object.defineProperty(this,"ondatachannel",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onicecandidate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onnegotiationneeded",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onsignalingstatechange",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"ontrack",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onconnectionstatechange",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"router",{enumerable:true,configurable:true,writable:true,value:new _.RtpRouter});Object.defineProperty(this,"certificates",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"sctpRemotePort",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"seenMid",{enumerable:true,configurable:true,writable:true,value:new Set});Object.defineProperty(this,"currentLocalDescription",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"currentRemoteDescription",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"pendingLocalDescription",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"pendingRemoteDescription",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"isClosed",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"shouldNegotiationneeded",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"needNegotiation",{enumerable:true,configurable:true,writable:true,value:async()=>{this.shouldNegotiationneeded=true;if(this.negotiationneeded||this.signalingState!=="stable")return;this.shouldNegotiationneeded=false;setImmediate((()=>{this.negotiationneeded=true;this.onNegotiationneeded.execute();if(this.onnegotiationneeded)this.onnegotiationneeded({})}))}});(0,m.deepMerge)(this.config,e);if(this.config.icePortRange){const[e,t]=this.config.icePortRange;if(e===t)throw new Error("should not be same value");if(e>=t)throw new Error("The min must be less than max")}for(const[e,t]of(0,v.enumerate)([...this.config.codecs.audio||[],...this.config.codecs.video||[]])){if(t.payloadType!=undefined){continue}t.payloadType=96+e;switch(t.name.toLowerCase()){case"rtx":{t.parameters=`apt=${t.payloadType-1}`}break;case"red":{if(t.contentType==="audio"){const e=t.payloadType+1;t.parameters=`${e}/${e}`;t.payloadType=63}}break}}[...this.config.headerExtensions.audio||[],...this.config.headerExtensions.video||[]].forEach(((e,t)=>{e.id=1+t}));if(this.config.dtls){const{keys:e}=this.config.dtls;if(e){this.certificates.push(new k.RTCCertificate(e.keyPem,e.certPem,e.signatureHash))}}this.iceConnectionStateChange.subscribe((e=>{switch(e){case"disconnected":this.setConnectionState("disconnected");break;case"closed":this.close();break}}))}get localDescription(){if(!this._localDescription){return undefined}return this._localDescription.toJSON()}get remoteDescription(){if(!this._remoteDescription){return undefined}return this._remoteDescription.toJSON()}get _localDescription(){return this.pendingLocalDescription||this.currentLocalDescription}get _remoteDescription(){return this.pendingRemoteDescription||this.currentRemoteDescription}getTransceiverByMid(e){return this.transceivers.find((t=>t.mid===e))}getTransceiverByMLineIndex(e){return this.transceivers.find((t=>t.mLineIndex===e))}getConfiguration(){return this.config}async createOffer(){await this.ensureCerts();const e=this.buildOfferSdp();return e.toJSON()}assignTransceiverCodecs(e){const t=this.config.codecs[e.kind].filter((t=>{switch(t.direction){case"recvonly":{if(g.ReceiverDirection.includes(e.direction))return true;return false}case"sendonly":{if(g.SenderDirections.includes(e.direction))return true;return false}case"sendrecv":{if([m.Sendrecv,m.Recvonly,m.Sendonly].includes(e.direction))return true;return false}case"all":{return true}default:return false}}));e.codecs=t}buildOfferSdp(){this.transceivers.forEach((e=>{if(e.codecs.length===0){this.assignTransceiverCodecs(e)}if(e.headerExtensions.length===0){e.headerExtensions=this.config.headerExtensions[e.kind]??[]}}));const e=new I.SessionDescription;(0,I.addSDPHeader)("offer",e);const t=this._localDescription?this._localDescription.media:[];t.forEach(((t,r)=>{const n=t.rtp.muxId;if(!n){B("mid missing",t);return}if(t.kind==="application"){if(!this.sctpTransport){throw new Error("sctpTransport not found")}this.sctpTransport.mLineIndex=r;e.media.push(createMediaDescriptionForSctp(this.sctpTransport))}else{const i=this.getTransceiverByMid(n);if(!i){if(t.direction==="inactive"){e.media.push(t);return}throw new Error("transceiver not found")}i.mLineIndex=r;e.media.push(createMediaDescriptionForTransceiver(i,this.cname,i.direction))}}));this.transceivers.filter((t=>!e.media.find((e=>e.rtp.muxId===t.mid)))).forEach((t=>{if(t.mid==undefined){t.mid=allocateMid(this.seenMid,this.config.midSuffix?"av":"")}const r=createMediaDescriptionForTransceiver(t,this.cname,t.direction);if(t.mLineIndex===undefined){t.mLineIndex=e.media.length;e.media.push(r)}else{e.media[t.mLineIndex]=r}}));if(this.sctpTransport&&!e.media.find((e=>e.kind==="application"))){this.sctpTransport.mLineIndex=e.media.length;if(this.sctpTransport.mid==undefined){this.sctpTransport.mid=allocateMid(this.seenMid,this.config.midSuffix?"dc":"")}e.media.push(createMediaDescriptionForSctp(this.sctpTransport))}if(this.config.bundlePolicy!=="disable"){const t=e.media.map((e=>e.direction!=="inactive"?e.rtp.muxId:undefined)).filter((e=>e));if(t.length){const r=new I.GroupDescription("BUNDLE",t);e.group.push(r)}}return e}createDataChannel(e,t={}){const r={protocol:"",ordered:true,negotiated:false};const n={...r,...t};if(n.maxPacketLifeTime&&n.maxRetransmits){throw new Error("can not select both")}if(!this.sctpTransport){this.sctpTransport=this.createSctpTransport();this.needNegotiation()}const i=new b.RTCDataChannelParameters({id:n.id,label:e,maxPacketLifeTime:n.maxPacketLifeTime,maxRetransmits:n.maxRetransmits,negotiated:n.negotiated,ordered:n.ordered,protocol:n.protocol});const s=new b.RTCDataChannel(this.sctpTransport,i);return s}removeTrack(e){if(this.isClosed)throw new Error("peer closed");if(!this.getSenders().find((({ssrc:t})=>e.ssrc===t))){throw new Error("unExist")}const t=this.transceivers.find((({sender:{ssrc:t}})=>e.ssrc===t));if(!t)throw new Error("unExist");e.stop();if(t.currentDirection==="recvonly"){this.needNegotiation();return}if(t.stopping||t.stopped){t.setDirection("inactive")}else{if(t.direction==="sendrecv"){t.setDirection("recvonly")}else if(t.direction==="sendonly"||t.direction==="recvonly"){t.setDirection("inactive")}}this.needNegotiation()}createTransport(e=[]){const[t]=this.iceTransports;if(this.config.bundlePolicy==="max-bundle"){if(t){return this.dtlsTransports[0]}}const r=new T.RTCIceGatherer({...(0,R.parseIceServers)(this.config.iceServers),forceTurn:this.config.iceTransportPolicy==="relay",portRange:this.config.icePortRange,interfaceAddresses:this.config.iceInterfaceAddresses,additionalHostAddresses:this.config.iceAdditionalHostAddresses,filterStunResponse:this.config.iceFilterStunResponse,filterCandidatePair:this.config.iceFilterCandidatePair,useIpv4:this.config.iceUseIpv4,useIpv6:this.config.iceUseIpv6});if(t){r.connection.localUserName=t.connection.localUserName;r.connection.localPassword=t.connection.localPassword}r.onGatheringStateChange.subscribe((()=>{this.updateIceGatheringState()}));this.updateIceGatheringState();const n=new T.RTCIceTransport(r);n.onStateChange.subscribe((()=>{this.updateIceConnectionState()}));n.iceGather.onIceCandidate=e=>{if(!this.localDescription)return;if(this.config.bundlePolicy==="max-bundle"||this.remoteIsBundled){e.sdpMLineIndex=0;const t=this._localDescription?.media[0];if(t){e.sdpMid=t.rtp.muxId}}else{const t=this.transceivers.find((e=>e.dtlsTransport.iceTransport.id===n.id));if(t){e.sdpMLineIndex=t.mLineIndex;e.sdpMid=t.mid}if(this.sctpTransport?.dtlsTransport.iceTransport.id===n.id){e.sdpMLineIndex=this.sctpTransport.mLineIndex;e.sdpMid=this.sctpTransport.mid}}e.foundation="candidate:"+e.foundation;if(e.sdpMid){const t=`${e.foundation}:${e.sdpMid}`;if(this.candidatesSent.has(t)){return}this.candidatesSent.add(t)}this.onIceCandidate.execute(e.toJSON());if(this.onicecandidate){this.onicecandidate({candidate:e.toJSON()})}this.emit("icecandidate",{candidate:e})};const i=new k.RTCDtlsTransport(this.config,n,this.router,this.certificates,e);return i}createSctpTransport(){const e=this.createTransport([g.SRTP_PROFILE.SRTP_AEAD_AES_128_GCM,g.SRTP_PROFILE.SRTP_AES128_CM_HMAC_SHA1_80]);const t=new x.RTCSctpTransport;t.setDtlsTransport(e);t.mid=undefined;t.onDataChannel.subscribe((e=>{this.onDataChannel.execute(e);const t={channel:e};if(this.ondatachannel)this.ondatachannel(t);this.emit("datachannel",t)}));this.sctpTransport=t;this.updateIceConnectionState();return t}async setLocalDescription(e){const t=I.SessionDescription.parse(e.sdp);t.type=e.type;this.validateDescription(t,true);if(t.type==="offer"){this.setSignalingState("have-local-offer")}else if(t.type==="answer"){this.setSignalingState("stable")}t.media.forEach(((e,t)=>{const r=e.rtp.muxId;this.seenMid.add(r);if(["audio","video"].includes(e.kind)){const e=this.getTransceiverByMLineIndex(t);if(e){e.mid=r}}if(e.kind==="application"&&this.sctpTransport){this.sctpTransport.mid=r}}));const setupRole=e=>{const r=e.iceTransport;if(t.type==="offer"){r.connection.iceControlling=true}else{r.connection.iceControlling=false}if(r.connection.remoteIsLite){r.connection.iceControlling=true}if(t.type==="answer"){const r=t.media.find((e=>e.dtlsParams))?.dtlsParams?.role;if(r){e.role=r}}};this.dtlsTransports.forEach((e=>setupRole(e)));if(["answer","pranswer"].includes(t.type)){this.transceivers.forEach((e=>{const t=(0,R.andDirection)(e.direction,e.offerDirection);e.setCurrentDirection(t)}))}this.setLocal(t);if(t.type==="answer"){this.connect().catch((e=>{B("connect failed",e);this.setConnectionState("failed")}))}const r=this.iceTransports.find((e=>e.state==="connected"));if(this.remoteIsBundled&&r){await r.iceGather.gather()}else{await Promise.allSettled(this.iceTransports.map((e=>e.iceGather.gather())))}t.media.filter((e=>["audio","video"].includes(e.kind))).forEach(((e,t)=>{addTransportDescription(e,this.transceivers[t].dtlsTransport)}));const n=t.media.find((e=>e.kind==="application"));if(this.sctpTransport&&n){addTransportDescription(n,this.sctpTransport.dtlsTransport)}this.setLocal(t);if(this.shouldNegotiationneeded){this.needNegotiation()}return t}setLocal(e){if(e.type==="answer"){this.currentLocalDescription=e;this.pendingLocalDescription=undefined}else{this.pendingLocalDescription=e}}getTransportByMid(e){let t;const r=this.transceivers.find((t=>t.mid===e));if(r){t=r.dtlsTransport.iceTransport}else if(!t&&this.sctpTransport?.mid===e){t=this.sctpTransport?.dtlsTransport.iceTransport}return t}getTransportByMLineIndex(e){const t=this.buildOfferSdp();const r=t.media[e];if(!r){return}const n=this.getTransportByMid(r.rtp.muxId);return n}async addIceCandidate(e){const t=T.IceCandidate.fromJSON(e);if(!t){return}let r;if(typeof t.sdpMid==="number"){r=this.getTransportByMid(t.sdpMid)}if(!r&&typeof t.sdpMLineIndex==="number"){r=this.getTransportByMLineIndex(t.sdpMLineIndex)}if(!r){r=this.iceTransports[0]}if(r){await r.addRemoteCandidate(t)}else{B("iceTransport not found",t)}}async connect(){if(this.transportEstablished){return}B("start connect");this.setConnectionState("connecting");await Promise.allSettled(this.dtlsTransports.map((async e=>{const{iceTransport:t}=e;await t.start().catch((e=>{B("iceTransport.start failed",e);throw e}));await e.start().catch((e=>{B("dtlsTransport.start failed",e);throw e}));if(this.sctpTransport&&this.sctpRemotePort&&this.sctpTransport.dtlsTransport.id===e.id){await this.sctpTransport.start(this.sctpRemotePort);await this.sctpTransport.sctp.stateChanged.connected.asPromise();B("sctp connected")}})));this.transportEstablished=true;this.setConnectionState("connected")}getLocalRtpParams(e){if(e.mid==undefined)throw new Error("mid not assigned");const t={codecs:e.codecs,muxId:e.mid,headerExtensions:e.headerExtensions,rtcp:{cname:this.cname,ssrc:e.sender.ssrc,mux:true}};return t}getRemoteRtpParams(e,t){const r={muxId:e.rtp.muxId,rtcp:e.rtp.rtcp,codecs:t.codecs,headerExtensions:t.headerExtensions,encodings:Object.values(t.codecs.reduce(((t,r)=>{if(r.name.toLowerCase()==="rtx"){const n=(0,y.codecParametersFromString)(r.parameters??"");const i=t[n["apt"]];if(i&&e.ssrc.length===2){i.rtx=new w.RTCRtpRtxParameters({ssrc:e.ssrc[1].ssrc})}return t}t[r.payloadType]=new w.RTCRtpCodingParameters({ssrc:e.ssrc[0]?.ssrc,payloadType:r.payloadType});return t}),{}))};return r}get remoteIsBundled(){const e=this._remoteDescription;if(!e){return undefined}const t=e.group.find((e=>e.semantic==="BUNDLE"&&this.config.bundlePolicy!=="disable"));return t}async setRemoteDescription(e){if(!e.sdp||!e.type||e.type==="rollback"||e.type==="pranswer"){throw new Error("invalid sessionDescription")}const t=I.SessionDescription.parse(e.sdp);t.type=e.type;this.validateDescription(t,false);if(t.type==="answer"){this.currentRemoteDescription=t;this.pendingRemoteDescription=undefined}else{this.pendingRemoteDescription=t}let r;const matchTransceiverWithMedia=(e,t)=>e.kind===t.kind&&[undefined,t.rtp.muxId].includes(e.mid);let n=t.media.map(((n,i)=>{let s;if(["audio","video"].includes(n.kind)){let o=this.transceivers.find((e=>matchTransceiverWithMedia(e,n)));if(!o){o=this._addTransceiver(n.kind,{direction:"recvonly"});o.mid=n.rtp.muxId;this.onRemoteTransceiverAdded.execute(o)}else{if(o.direction==="inactive"&&o.stopping){o.stopped=true;if(e.type==="answer"){o.setCurrentDirection("inactive")}return}}if(this.remoteIsBundled){if(!r){r=o.dtlsTransport}else{o.setDtlsTransport(r)}}s=o.dtlsTransport;this.setRemoteRTP(o,n,t.type,i)}else if(n.kind==="application"){if(!this.sctpTransport){this.sctpTransport=this.createSctpTransport();this.sctpTransport.mid=n.rtp.muxId}if(this.remoteIsBundled){if(!r){r=this.sctpTransport.dtlsTransport}else{this.sctpTransport.setDtlsTransport(r)}}s=this.sctpTransport.dtlsTransport;this.setRemoteSCTP(n,this.sctpTransport,i)}else{throw new Error("invalid media kind")}const o=s.iceTransport;if(n.iceParams&&n.dtlsParams){o.setRemoteParams(n.iceParams);s.setRemoteParams(n.dtlsParams);if(n.iceParams?.iceLite){o.connection.iceControlling=true}}n.iceCandidates.forEach(o.addRemoteCandidate);if(n.iceCandidatesComplete){o.addRemoteCandidate(undefined)}if(t.type==="answer"&&n.dtlsParams?.role){s.role=n.dtlsParams.role==="client"?"server":"client"}return o}));n=n.filter((e=>!!e));const i=this.transceivers.filter((e=>t.media.find((t=>matchTransceiverWithMedia(e,t)))==undefined));if(e.type==="answer"){for(const e of i){e.stop();e.stopped=true}}if(t.type==="offer"){this.setSignalingState("have-remote-offer")}else if(t.type==="answer"){this.setSignalingState("stable")}if(t.type==="answer"){B("caller start connect");this.connect().catch((e=>{B("connect failed",e);this.setConnectionState("failed")}))}const s=this.iceTransports.find((e=>e.state==="connected"));if(this.remoteIsBundled&&s){await s.iceGather.gather()}else{await Promise.allSettled(n.map((e=>e.iceGather.gather())))}this.negotiationneeded=false;if(this.shouldNegotiationneeded){this.needNegotiation()}}setRemoteRTP(e,r,n,i){if(!e.mid){e.mid=r.rtp.muxId}e.mLineIndex=i;e.codecs=r.rtp.codecs.filter((e=>{const n=this.config.codecs[r.kind]||[];const i=(0,t.findCodecByMimeType)(n,e);if(!i)return false;if(i?.name.toLowerCase()==="rtx"){const e=(0,y.codecParametersFromString)(i.parameters??"");const s=e["apt"];const o=r.rtp.codecs.find((e=>e.payloadType===s));if(!o)return false;return!!(0,t.findCodecByMimeType)(n,o)}return true}));B("negotiated codecs",e.codecs);if(e.codecs.length===0){throw new Error("negotiate codecs failed.")}e.headerExtensions=r.rtp.headerExtensions.filter((e=>(this.config.headerExtensions[r.kind]||[]).find((t=>t.uri===e.uri))));const s=r.direction??"inactive";const o=(0,R.reverseDirection)(s);if(["answer","pranswer"].includes(n)){e.setCurrentDirection(o)}else{e.offerDirection=o}const a=this.getLocalRtpParams(e);e.sender.prepareSend(a);if(["recvonly","sendrecv"].includes(e.direction)){const t=this.getRemoteRtpParams(r,e);r.simulcastParameters.forEach((r=>{this.router.registerRtpReceiverByRid(e,r,t)}));e.receiver.prepareReceive(t);this.router.registerRtpReceiverBySsrc(e,t)}if(["sendonly","sendrecv"].includes(s)){if(r.msid!=undefined){const[t,n]=r.msid.split(" ");e.receiver.remoteStreamId=t;e.receiver.remoteTrackId=n;this.fireOnTrack(e.receiver.track,e,new E.MediaStream({id:t,tracks:[e.receiver.track]}))}}if(r.ssrc[0]?.ssrc){e.receiver.setupTWCC(r.ssrc[0].ssrc)}}setRemoteSCTP(e,t,r){this.sctpRemotePort=e.sctpPort;if(!this.sctpRemotePort){throw new Error("sctpRemotePort not exist")}t.setRemotePort(this.sctpRemotePort);t.mLineIndex=r;if(!t.mid){t.mid=e.rtp.muxId}}validateDescription(e,t){if(t){if(e.type==="offer"){if(!["stable","have-local-offer"].includes(this.signalingState))throw new Error("Cannot handle offer in signaling state")}else if(e.type==="answer"){if(!["have-remote-offer","have-local-pranswer"].includes(this.signalingState)){throw new Error("Cannot handle answer in signaling state")}}}else{if(e.type==="offer"){if(!["stable","have-remote-offer"].includes(this.signalingState)){throw new Error("Cannot handle offer in signaling state")}}else if(e.type==="answer"){if(!["have-local-offer","have-remote-pranswer"].includes(this.signalingState)){throw new Error("Cannot handle answer in signaling state")}}}e.media.forEach((e=>{if(e.direction==="inactive")return;if(!e.iceParams||!e.iceParams.usernameFragment||!e.iceParams.password)throw new Error("ICE username fragment or password is missing")}));if(["answer","pranswer"].includes(e.type||"")){const r=t?this._remoteDescription:this._localDescription;if(!r)throw new Error;const n=e.media.map(((e,t)=>[e.kind,t]));const i=r.media.map(((e,t)=>[e.kind,t]));if(!(0,u.default)(i,n)){throw new Error("Media sections in answer do not match offer")}}}fireOnTrack(e,t,r){const n={track:e,streams:[r],transceiver:t,receiver:t.receiver};this.onTrack.execute(e);this.emit("track",n);if(this.ontrack)this.ontrack(n)}addTransceiver(e,t={}){return this._addTransceiver(e,t)}_addTransceiver(e,t={}){const r=typeof e==="string"?e:e.kind;const n=t.direction||"sendrecv";const i=this.createTransport([g.SRTP_PROFILE.SRTP_AEAD_AES_128_GCM,g.SRTP_PROFILE.SRTP_AES128_CM_HMAC_SHA1_80]);const s=new P.RTCRtpSender(e);const o=new C.RTCRtpReceiver(this.config,r,s.ssrc);const a=new O.RTCRtpTransceiver(r,i,o,s,n);a.options=t;this.router.registerRtpSender(a.sender);const c=this.transceivers.findIndex((e=>e.currentDirection==="inactive"));const u=this.transceivers.find((e=>e.currentDirection==="inactive"));if(c>-1&&u){this.replaceTransceiver(a,c);a.mLineIndex=u.mLineIndex;u.setCurrentDirection(undefined)}else{this.pushTransceiver(a)}this.onTransceiverAdded.execute(a);this.updateIceConnectionState();this.needNegotiation();return a}getTransceivers(){return this.transceivers}getSenders(){return this.getTransceivers().map((e=>e.sender))}getReceivers(){return this.getTransceivers().map((e=>e.receiver))}addTrack(e,t){if(this.isClosed)throw new Error("is closed");if(this.getSenders().find((t=>t.track?.uuid===e.uuid))){throw new Error("track exist")}const r=this.transceivers.find((t=>t.sender.track==undefined&&t.kind===e.kind&&g.SenderDirections.includes(t.direction)===true));if(r){const t=r.sender;t.registerTrack(e);this.needNegotiation();return t}const n=this.transceivers.find((t=>t.sender.track==undefined&&t.kind===e.kind&&g.SenderDirections.includes(t.direction)===false&&!t.usedForSender));if(n){const t=n.sender;t.registerTrack(e);switch(n.direction){case"recvonly":n.setDirection("sendrecv");break;case"inactive":n.setDirection("sendonly");break}this.needNegotiation();return t}else{const t=this._addTransceiver(e,{direction:"sendrecv"});this.needNegotiation();return t.sender}}async ensureCerts(){const ensureCert=async e=>{if(this.certificates.length===0){const t=await e.setupCertificate();this.certificates.push(t)}else{e.localCertificate=this.certificates[0]}};for(const e of this.dtlsTransports){await ensureCert(e)}}async createAnswer(){await this.ensureCerts();const e=this.buildAnswer();return e.toJSON()}buildAnswer(){this.assertNotClosed();if(!["have-remote-offer","have-local-pranswer"].includes(this.signalingState)){throw new Error("createAnswer failed")}if(!this._remoteDescription){throw new Error("wrong state")}const e=new I.SessionDescription;(0,I.addSDPHeader)("answer",e);this._remoteDescription.media.forEach((t=>{let r;let n;if(["audio","video"].includes(t.kind)){const e=this.getTransceiverByMid(t.rtp.muxId);n=createMediaDescriptionForTransceiver(e,this.cname,(0,R.andDirection)(e.direction,e.offerDirection));r=e.dtlsTransport}else if(t.kind==="application"){if(!this.sctpTransport||!this.sctpTransport.mid){throw new Error("sctpTransport not found")}n=createMediaDescriptionForSctp(this.sctpTransport);r=this.sctpTransport.dtlsTransport}else{throw new Error("invalid kind")}if(n.dtlsParams){if(r.role==="auto"){n.dtlsParams.role="client"}else{n.dtlsParams.role=r.role}}n.simulcastParameters=t.simulcastParameters.map((e=>({...e,direction:(0,R.reverseSimulcastDirection)(e.direction)})));e.media.push(n)}));if(this.config.bundlePolicy!=="disable"){const t=new I.GroupDescription("BUNDLE",[]);e.media.forEach((e=>{if(e.direction!=="inactive"){t.items.push(e.rtp.muxId)}}));e.group.push(t)}return e}async close(){if(this.isClosed)return;this.isClosed=true;this.setSignalingState("closed");this.setConnectionState("closed");this.transceivers.forEach((e=>{e.receiver.stop();e.sender.stop()}));if(this.sctpTransport){await this.sctpTransport.stop()}for(const e of this.dtlsTransports){await e.stop();await e.iceTransport.stop()}this.dispose();B("peerConnection closed")}assertNotClosed(){if(this.isClosed){throw new Error("RTCPeerConnection is closed")}}updateIceGatheringState(){const e=this.iceTransports;function allMatch(...t){return e.filter((e=>t.includes(e.iceGather.gatheringState))).length===e.length}let t;if(e.length&&allMatch("complete")){t="complete"}else if(!e.length||allMatch("new","complete")){t="new"}else if(e.map((e=>e.iceGather.gatheringState)).includes("gathering")){t="gathering"}else{t="new"}if(this.iceGatheringState===t){return}B("iceGatheringStateChange",t);this.iceGatheringState=t;this.iceGatheringStateChange.execute(t);this.emit("icegatheringstatechange",t)}updateIceConnectionState(){const e=this.iceTransports;let t;function allMatch(...t){return e.filter((e=>t.includes(e.state))).length===e.length}if(this.connectionState==="closed"){t="closed"}else if(allMatch("failed")){t="failed"}else if(allMatch("disconnected")){t="disconnected"}else if(allMatch("new","closed")){t="new"}else if(allMatch("new","checking")){t="checking"}else if(allMatch("completed","closed")){t="completed"}else if(allMatch("connected","completed","closed")){t="connected"}else{t="new"}if(this.iceConnectionState===t){return}B("iceConnectionStateChange",t);this.iceConnectionState=t;this.iceConnectionStateChange.execute(t);this.emit("iceconnectionstatechange",t)}setSignalingState(e){B("signalingStateChange",e);this.signalingState=e;this.signalingStateChange.execute(e);if(this.onsignalingstatechange)this.onsignalingstatechange({})}setConnectionState(e){B("connectionStateChange",e);this.connectionState=e;this.connectionStateChange.execute(e);if(this.onconnectionstatechange)this.onconnectionstatechange();this.emit("connectionstatechange")}dispose(){this.onDataChannel.allUnsubscribe();this.iceGatheringStateChange.allUnsubscribe();this.iceConnectionStateChange.allUnsubscribe();this.signalingStateChange.allUnsubscribe();this.onTransceiverAdded.allUnsubscribe();this.onRemoteTransceiverAdded.allUnsubscribe();this.onIceCandidate.allUnsubscribe()}}t.RTCPeerConnection=RTCPeerConnection;function createMediaDescriptionForTransceiver(e,t,r){const n=new I.MediaDescription(e.kind,9,"UDP/TLS/RTP/SAVPF",e.codecs.map((e=>e.payloadType)));n.direction=r;n.msid=e.msid;n.rtp={codecs:e.codecs,headerExtensions:e.headerExtensions,muxId:e.mid};n.rtcpHost="0.0.0.0";n.rtcpPort=9;n.rtcpMux=true;n.ssrc=[new I.SsrcDescription({ssrc:e.sender.ssrc,cname:t})];if(e.options.simulcast){n.simulcastParameters=e.options.simulcast.map((e=>new w.RTCRtpSimulcastParameters(e)))}if(n.rtp.codecs.find((e=>e.name.toLowerCase()==="rtx"))){n.ssrc.push(new I.SsrcDescription({ssrc:e.sender.rtxSsrc,cname:t}));n.ssrcGroup=[new I.GroupDescription("FID",[e.sender.ssrc.toString(),e.sender.rtxSsrc.toString()])]}addTransportDescription(n,e.dtlsTransport);return n}t.createMediaDescriptionForTransceiver=createMediaDescriptionForTransceiver;function createMediaDescriptionForSctp(e){const t=new I.MediaDescription("application",g.DISCARD_PORT,"UDP/DTLS/SCTP",["webrtc-datachannel"]);t.sctpPort=e.port;t.rtp.muxId=e.mid;t.sctpCapabilities=x.RTCSctpTransport.getCapabilities();addTransportDescription(t,e.dtlsTransport);return t}t.createMediaDescriptionForSctp=createMediaDescriptionForSctp;function addTransportDescription(e,t){const r=t.iceTransport;const n=r.iceGather;e.iceCandidates=n.localCandidates;e.iceCandidatesComplete=n.gatheringState==="complete";e.iceParams=n.localParameters;e.iceOptions="trickle";e.host=g.DISCARD_HOST;e.port=g.DISCARD_PORT;if(e.direction==="inactive"){e.port=0;e.msid=undefined}if(!e.dtlsParams){e.dtlsParams=t.localParameters;if(!e.dtlsParams.fingerprints){e.dtlsParams.fingerprints=t.localParameters.fingerprints}}}t.addTransportDescription=addTransportDescription;function allocateMid(e,t){let r="";for(let n=0;;){r=(n++).toString()+t;if(!e.has(r))break}e.add(r);return r}t.allocateMid=allocateMid;const findCodecByMimeType=(e,t)=>e.find((e=>e.mimeType.toLowerCase()===t.mimeType.toLowerCase()))?t:undefined;t.findCodecByMimeType=findCodecByMimeType;t.defaultPeerConfig={codecs:{audio:[new w.RTCRtpCodecParameters({mimeType:"audio/opus",clockRate:48e3,channels:2}),new w.RTCRtpCodecParameters({mimeType:"audio/PCMU",clockRate:8e3,channels:1,payloadType:0})],video:[new w.RTCRtpCodecParameters({mimeType:"video/VP8",clockRate:9e4,rtcpFeedback:[(0,y.useNACK)(),(0,y.usePLI)(),(0,y.useREMB)()]})]},headerExtensions:{audio:[],video:[]},iceTransportPolicy:"all",iceServers:[{urls:"stun:stun.l.google.com:19302"}],icePortRange:undefined,iceInterfaceAddresses:undefined,iceAdditionalHostAddresses:undefined,iceUseIpv4:true,iceUseIpv6:true,iceFilterStunResponse:undefined,iceFilterCandidatePair:undefined,dtls:{},bundlePolicy:"max-compat",debug:{},midSuffix:false}},83988:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.SsrcDescription=t.codecParametersToString=t.codecParametersFromString=t.addSDPHeader=t.RTCSessionDescription=t.candidateFromSdp=t.parseGroup=t.candidateToSdp=t.GroupDescription=t.MediaDescription=t.SessionDescription=void 0;const i=r(6113);const s=r(41808);const o=r(13910);const a=n(r(46611));const c=r(74759);const u=r(52814);const d=r(93958);const p=r(35753);const m=r(80989);const y=r(74433);class SessionDescription{constructor(){Object.defineProperty(this,"version",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"origin",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"-"});Object.defineProperty(this,"time",{enumerable:true,configurable:true,writable:true,value:"0 0"});Object.defineProperty(this,"host",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"group",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"extMapAllowMixed",{enumerable:true,configurable:true,writable:true,value:true});Object.defineProperty(this,"msidSemantic",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"media",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"dtlsRole",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"iceOptions",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"iceLite",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"icePassword",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"iceUsernameFragment",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"dtlsFingerprints",{enumerable:true,configurable:true,writable:true,value:[]})}static parse(e){const[t,r]=groupLines(e);const n=new SessionDescription;t.forEach((e=>{if(e.startsWith("v=")){n.version=parseInt(e.slice(2),10)}else if(e.startsWith("o=")){n.origin=e.slice(2)}else if(e.startsWith("s=")){n.name=e.slice(2)}else if(e.startsWith("c=")){n.host=ipAddressFromSdp(e.slice(2))}else if(e.startsWith("t=")){n.time=e.slice(2)}else if(e.startsWith("a=")){const[t,r]=parseAttr(e);switch(t){case"fingerprint":{const[e,t]=r?.split(" ")||[];n.dtlsFingerprints.push(new p.RTCDtlsFingerprint(e,t))}break;case"ice-lite":n.iceLite=true;break;case"ice-options":n.iceOptions=r;break;case"ice-pwd":n.icePassword=r;break;case"ice-ufrag":n.iceUsernameFragment=r;break;case"group":parseGroup(n.group,r);break;case"msid-semantic":parseGroup(n.msidSemantic,r);break;case"setup":n.dtlsRole=c.DTLS_SETUP_ROLE[r];break;case"extmap-allow-mixed":n.extMapAllowMixed=true;break}}}));const i=n.group.find((e=>e.semantic==="BUNDLE"));r.forEach((e=>{const t=e[0];const r=t.match(/^m=([^ ]+) ([0-9]+) ([A-Z/]+) (.+)/);if(!r){throw new Error("m line not found")}const s=r[1];const o=r[4].split(" ");const a=["audio","video"].includes(s)?o.map((e=>Number(e))):undefined;const g=new MediaDescription(s,parseInt(r[2]),r[3],a||o);g.dtlsParams=new p.RTCDtlsParameters([...n.dtlsFingerprints],n.dtlsRole);g.iceParams=new m.RTCIceParameters({iceLite:n.iceLite,usernameFragment:n.iceUsernameFragment,password:n.icePassword});g.iceOptions=n.iceOptions;n.media.push(g);e.slice(1).forEach((e=>{if(e.startsWith("c=")){g.host=ipAddressFromSdp(e.slice(2))}else if(e.startsWith("a=")){const[t,r]=parseAttr(e);switch(t){case"candidate":if(!r)throw new Error;g.iceCandidates.push(candidateFromSdp(r));break;case"end-of-candidates":g.iceCandidatesComplete=true;break;case"extmap":{let[e,t]=r.split(" ");if(e.includes("/")){[e]=e.split("/")}g.rtp.headerExtensions.push(new d.RTCRtpHeaderExtensionParameters({id:parseInt(e),uri:t}))}break;case"fingerprint":{if(!r)throw new Error;const[e,t]=r.split(" ");g.dtlsParams?.fingerprints.push(new p.RTCDtlsFingerprint(e,t))}break;case"ice-options":g.iceOptions=r;break;case"ice-pwd":g.iceParams.password=r;break;case"ice-ufrag":g.iceParams.usernameFragment=r;break;case"ice-lite":g.iceParams.iceLite=true;break;case"max-message-size":g.sctpCapabilities=new y.RTCSctpCapabilities(parseInt(r,10));break;case"mid":g.rtp.muxId=r;break;case"msid":g.msid=r;break;case"rtcp":{const[e,t]=(0,u.divide)(r," ");g.rtcpPort=parseInt(e);g.rtcpHost=ipAddressFromSdp(t)}break;case"rtcp-mux":g.rtcpMux=true;break;case"setup":g.dtlsParams.role=c.DTLS_SETUP_ROLE[r];break;case"recvonly":case"sendonly":case"sendrecv":case"inactive":g.direction=t;break;case"rtpmap":{const[e,t]=(0,u.divide)(r," ");const[n,i,s]=t.split("/");let o;if(g.kind==="audio"){o=s?parseInt(s):1}const a=new d.RTCRtpCodecParameters({mimeType:g.kind+"/"+n,channels:o,clockRate:parseInt(i),payloadType:parseInt(e)});g.rtp.codecs.push(a)}break;case"sctpmap":{if(!r)throw new Error;const[e,t]=(0,u.divide)(r," ");g.sctpMap[parseInt(e)]=t;g.sctpPort=parseInt(e)}break;case"sctp-port":if(!r)throw new Error;g.sctpPort=parseInt(r);break;case"ssrc":{const[e,t]=(0,u.divide)(r," ");const n=parseInt(e);const[i,s]=(0,u.divide)(t,":");let o=g.ssrc.find((e=>e.ssrc===n));if(!o){o=new SsrcDescription({ssrc:n});g.ssrc.push(o)}if(c.SSRC_INFO_ATTRS.includes(i)){o[i]=s}}break;case"ssrc-group":parseGroup(g.ssrcGroup,r);break;case"rid":{const[e,t]=(0,u.divide)(r," ");g.simulcastParameters.push(new d.RTCRtpSimulcastParameters({rid:e,direction:t}))}break}}}));if(!g.iceParams.usernameFragment||!g.iceParams.password){if(g.rtp.muxId&&i&&i.items.includes(g.rtp.muxId)){for(let e=0;e<i.items.length;e++){if(!i.items.includes(e.toString()))continue;const t=n.media[e];if(t.iceParams?.usernameFragment&&t.iceParams.password){g.iceParams={...t.iceParams};break}}}}if(!g.dtlsParams.role){g.dtlsParams=undefined}const findCodec=e=>g.rtp.codecs.find((t=>t.payloadType===e));e.slice(1).forEach((e=>{if(e.startsWith("a=")){const[t,r]=parseAttr(e);if(t==="fmtp"){const[e,t]=(0,u.divide)(r," ");const n=findCodec(Number(e));n.parameters=t}else if(t==="rtcp-fb"){const[e,t,n]=r.split(" ");g.rtp.codecs.forEach((r=>{if(["*",r.payloadType.toString()].includes(e)){r.rtcpFeedback.push(new d.RTCRtcpFeedback({type:t,parameter:n}))}}))}}}))}));return n}webrtcTrackId(e){if(e.msid?.includes(" ")){const t=e.msid.split(" ");for(const e of this.msidSemantic){if(e.semantic==="WMS"&&(e.items.includes(t[0])||e.items.includes("*"))){return t[1]}}}return}get string(){const e=[`v=${this.version}`,`o=${this.origin}`,`s=${this.name}`];if(this.host){e.push(`c=${ipAddressToSdp(this.host)}`)}e.push(`t=${this.time}`);this.group.forEach((t=>e.push(`a=group:${t.str}`)));if(this.extMapAllowMixed){e.push(`a=extmap-allow-mixed`)}this.msidSemantic.forEach((t=>e.push(`a=msid-semantic:${t.str}`)));const t=this.media.map((e=>e.toString())).join("");const r=e.join("\r\n")+"\r\n"+t;return r}toJSON(){return new RTCSessionDescription(this.string,this.type)}}t.SessionDescription=SessionDescription;class MediaDescription{constructor(e,t,r,n){Object.defineProperty(this,"kind",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"port",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"profile",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"fmt",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"host",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"direction",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"msid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtcpPort",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtcpHost",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"rtcpMux",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"ssrcGroup",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"rtp",{enumerable:true,configurable:true,writable:true,value:{codecs:[],headerExtensions:[]}});Object.defineProperty(this,"sctpCapabilities",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sctpMap",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"sctpPort",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"dtlsParams",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"iceParams",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"iceCandidates",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"iceCandidatesComplete",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"iceOptions",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"simulcastParameters",{enumerable:true,configurable:true,writable:true,value:[]})}toString(){const e=[];e.push(`m=${this.kind} ${this.port} ${this.profile} ${this.fmt.map((e=>e.toString())).join(" ")}`);if(this.host){e.push(`c=${ipAddressToSdp(this.host)}`)}this.iceCandidates.forEach((t=>{e.push(`a=candidate:${candidateToSdp(t)}`)}));if(this.iceCandidatesComplete){e.push("a=end-of-candidates")}if(this.iceParams?.usernameFragment){e.push(`a=ice-ufrag:${this.iceParams.usernameFragment}`)}if(this.iceParams?.password){e.push(`a=ice-pwd:${this.iceParams.password}`)}if(this.iceParams?.iceLite){e.push(`a=ice-lite`)}if(this.iceOptions){e.push(`a=ice-options:${this.iceOptions}`)}if(this.dtlsParams){this.dtlsParams.fingerprints.forEach((t=>{e.push(`a=fingerprint:${t.algorithm} ${t.value}`)}));e.push(`a=setup:${c.DTLS_ROLE_SETUP[this.dtlsParams.role]}`)}if(this.direction){e.push(`a=${this.direction}`)}if(this.rtp.muxId){e.push(`a=mid:${this.rtp.muxId}`)}if(this.msid){e.push(`a=msid:${this.msid}`)}if(this.rtcpPort&&this.rtcpHost){e.push(`a=rtcp:${this.rtcpPort} ${ipAddressToSdp(this.rtcpHost)}`);if(this.rtcpMux){e.push("a=rtcp-mux")}}this.ssrcGroup.forEach((t=>{e.push(`a=ssrc-group:${t.str}`)}));this.ssrc.forEach((t=>{c.SSRC_INFO_ATTRS.forEach((r=>{const n=t[r];if(n!==undefined){e.push(`a=ssrc:${t.ssrc} ${r}:${n}`)}}))}));this.rtp.codecs.forEach((t=>{e.push(`a=rtpmap:${t.payloadType} ${t.str}`);t.rtcpFeedback.forEach((r=>{let n=r.type;if(r.parameter)n+=` ${r.parameter}`;e.push(`a=rtcp-fb:${t.payloadType} ${n}`)}));if(t.parameters){e.push(`a=fmtp:${t.payloadType} ${t.parameters}`)}}));Object.keys(this.sctpMap).forEach((t=>{const r=this.sctpMap[Number(t)];e.push(`a=sctpmap:${t} ${r}`)}));if(this.sctpPort){e.push(`a=sctp-port:${this.sctpPort}`)}if(this.sctpCapabilities){e.push(`a=max-message-size:${this.sctpCapabilities.maxMessageSize}`)}this.rtp.headerExtensions.forEach((t=>e.push(`a=extmap:${t.id} ${t.uri}`)));if(this.simulcastParameters.length){this.simulcastParameters.forEach((t=>{e.push(`a=rid:${t.rid} ${t.direction}`)}));let t=`a=simulcast:`;const r=this.simulcastParameters.filter((e=>e.direction==="recv"));if(r.length){t+=`recv ${r.map((e=>e.rid)).join(";")} `}const n=this.simulcastParameters.filter((e=>e.direction==="send"));if(n.length){t+=`send ${n.map((e=>e.rid)).join(";")}`}e.push(t)}return e.join("\r\n")+"\r\n"}}t.MediaDescription=MediaDescription;class GroupDescription{constructor(e,t){Object.defineProperty(this,"semantic",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"items",{enumerable:true,configurable:true,writable:true,value:t})}get str(){return`${this.semantic} ${this.items.join(" ")}`}}t.GroupDescription=GroupDescription;function ipAddressFromSdp(e){const t=e.match(/^IN (IP4|IP6) ([^ ]+)$/);if(!t)throw new Error("exception");return t[2]}function ipAddressToSdp(e){const t=(0,s.isIPv4)(e)?4:6;return`IN IP${t} ${e}`}function candidateToSdp(e){let t=`${e.foundation} ${e.component} ${e.protocol} ${e.priority} ${e.ip} ${e.port} typ ${e.type}`;if(e.relatedAddress){t+=` raddr ${e.relatedAddress}`}if(e.relatedPort){t+=` rport ${e.relatedPort}`}if(e.tcpType){t+=` tcptype ${e.tcpType}`}return t}t.candidateToSdp=candidateToSdp;function groupLines(e){const t=[];const r=[];let n=e.split("\r\n");if(n.length===1){n=e.split("\n")}n.forEach((e=>{if(e.startsWith("m=")){r.push([e])}else if(r.length>0){r[r.length-1].push(e)}else{t.push(e)}}));return[t,r]}function parseAttr(e){if(e.includes(":")){const t=(0,u.divide)(e.slice(2),":");return[t[0],t[1]]}else{return[e.slice(2),undefined]}}function parseGroup(e,t,r=(e=>e.toString())){const n=t.split(" ");if(n.length>0){e.push(new GroupDescription(n[0],n.slice(1).map(r)))}}t.parseGroup=parseGroup;function candidateFromSdp(e){const t=e.split(" ");if(t.length<8){throw new Error}const r=new m.IceCandidate(parseInt(t[1],10),t[0],t[4],parseInt(t[5],10),parseInt(t[3],10),t[2],t[7]);(0,a.default)(8,t.length-1,2).forEach((e=>{switch(t[e]){case"raddr":r.relatedAddress=t[e+1];break;case"rport":r.relatedPort=parseInt(t[e+1]);break;case"tcptype":r.tcpType=t[e+1];break}}));return r}t.candidateFromSdp=candidateFromSdp;class RTCSessionDescription{constructor(e,t){Object.defineProperty(this,"sdp",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:t})}static isThis(e){if(typeof e?.sdp==="string")return true}}t.RTCSessionDescription=RTCSessionDescription;function addSDPHeader(e,t){const r="-";const n=new o.Uint64BE((0,i.randomBytes)(64)).toString().slice(0,8);const s=0;t.origin=`${r} ${n} ${s} IN IP4 0.0.0.0`;t.msidSemantic.push(new GroupDescription("WMS",["*"]));t.type=e}t.addSDPHeader=addSDPHeader;function codecParametersFromString(e){const t={};e.split(";").forEach((e=>{if(e.includes("=")){const[r,n]=(0,u.divide)(e,"=");if(c.FMTP_INT_PARAMETERS.includes(r)){t[r]=Number(n)}else{t[r]=n}}else if(e.includes(":")){const[r,n]=e.split(":");t[r]=Number.isNaN(Number(n))?n:Number(n)}else{t[e]=undefined}}));return t}t.codecParametersFromString=codecParametersFromString;function codecParametersToString(e,t="="){const r=Object.entries(e).map((([e,r])=>{if(r)return`${e}${t}${r}`;else return e}));if(r.length>0){return r.join(";")}return undefined}t.codecParametersToString=codecParametersToString;class SsrcDescription{constructor(e){Object.defineProperty(this,"ssrc",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"cname",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"msid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"msLabel",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"label",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}}t.SsrcDescription=SsrcDescription},35753:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RTCDtlsParameters=t.RTCDtlsFingerprint=t.RTCCertificate=t.DtlsStates=t.RTCDtlsTransport=void 0;const i=r(93208);const s=n(r(69565));const o=n(r(36094));const a=r(68670);const c=r(63578);const u=r(78576);const d=r(47252);const p=r(97346);const m=r(34566);const y=r(99646);const g=r(99921);const b=(0,s.default)("werift:packages/webrtc/src/transport/dtls.ts");class RTCDtlsTransport{constructor(e,t,r,n,i=[]){Object.defineProperty(this,"config",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"iceTransport",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"router",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"certificates",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"srtpProfiles",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:(0,c.v4)()});Object.defineProperty(this,"state",{enumerable:true,configurable:true,writable:true,value:"new"});Object.defineProperty(this,"role",{enumerable:true,configurable:true,writable:true,value:"auto"});Object.defineProperty(this,"srtpStarted",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"transportSequenceNumber",{enumerable:true,configurable:true,writable:true,value:0});Object.defineProperty(this,"dataReceiver",{enumerable:true,configurable:true,writable:true,value:()=>{}});Object.defineProperty(this,"dtls",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"srtcp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onStateChange",{enumerable:true,configurable:true,writable:true,value:new o.default});Object.defineProperty(this,"localCertificate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"remoteParameters",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sendData",{enumerable:true,configurable:true,writable:true,value:async e=>{if(this.config.debug.outboundPacketLoss&&this.config.debug.outboundPacketLoss/100<Math.random()){return}if(!this.dtls){throw new Error("dtls not established")}await this.dtls.send(e)}});this.localCertificate=this.certificates[0]}get localParameters(){return new RTCDtlsParameters(this.localCertificate?this.localCertificate.getFingerprints():[],this.role)}async setupCertificate(){if(!this.localCertificate){const{certPem:e,keyPem:t,signatureHash:r}=await p.CipherContext.createSelfSignedCertificateWithKey({signature:d.SignatureAlgorithm.ecdsa_3,hash:d.HashAlgorithm.sha256_4},d.NamedCurveAlgorithm.secp256r1_23);this.localCertificate=new RTCCertificate(t,e,r)}return this.localCertificate}setRemoteParams(e){this.remoteParameters=e}async start(){if(this.state!=="new")throw new Error;if(this.remoteParameters?.fingerprints.length===0)throw new Error;if(this.role==="auto"){if(this.iceTransport.role==="controlling"){this.role="server"}else{this.role="client"}}this.setState("connecting");await new Promise((async e=>{if(this.role==="server"){this.dtls=new u.DtlsServer({cert:this.localCertificate?.certPem,key:this.localCertificate?.privateKey,signatureHash:this.localCertificate?.signatureHash,transport:createIceTransport(this.iceTransport.connection),srtpProfiles:this.srtpProfiles,extendedMasterSecret:true})}else{this.dtls=new u.DtlsClient({cert:this.localCertificate?.certPem,key:this.localCertificate?.privateKey,signatureHash:this.localCertificate?.signatureHash,transport:createIceTransport(this.iceTransport.connection),srtpProfiles:this.srtpProfiles,extendedMasterSecret:true})}this.dtls.onData.subscribe((e=>{if(this.config.debug.inboundPacketLoss&&this.config.debug.inboundPacketLoss/100<Math.random()){return}this.dataReceiver(e)}));this.dtls.onClose.subscribe((()=>{this.setState("closed")}));this.dtls.onConnect.once(e);this.dtls.onError.subscribe((e=>{this.setState("failed");b("dtls failed",e)}));if(this.dtls instanceof u.DtlsClient){await(0,a.setTimeout)(100);this.dtls.connect().catch((e=>{this.setState("failed");b("dtls connect failed",e)}))}}));if(this.srtpProfiles.length>0){this.startSrtp()}this.dtls.onConnect.subscribe((()=>{this.updateSrtpSession();this.setState("connected")}));this.setState("connected");b("dtls connected")}updateSrtpSession(){if(!this.dtls)throw new Error;const e=this.dtls.srtp.srtpProfile;if(!e){throw new Error("need srtpProfile")}b("selected SRTP Profile",e);const{localKey:t,localSalt:r,remoteKey:n,remoteSalt:i}=this.dtls.extractSessionKeys((0,y.keyLength)(e),(0,y.saltLength)(e));const s={keys:{localMasterKey:t,localMasterSalt:r,remoteMasterKey:n,remoteMasterSalt:i},profile:e};this.srtp=new m.SrtpSession(s);this.srtcp=new m.SrtcpSession(s)}startSrtp(){if(this.srtpStarted)return;this.srtpStarted=true;this.updateSrtpSession();this.iceTransport.connection.onData.subscribe((e=>{if(this.config.debug.inboundPacketLoss&&this.config.debug.inboundPacketLoss/100<Math.random()){return}if(!(0,m.isMedia)(e))return;if((0,m.isRtcp)(e)){const t=this.srtcp.decrypt(e);const r=m.RtcpPacketConverter.deSerialize(t);r.forEach((e=>this.router.routeRtcp(e)))}else{const t=this.srtp.decrypt(e);const r=m.RtpPacket.deSerialize(t);try{this.router.routeRtp(r)}catch(e){b("router error",e)}}}))}async sendRtp(e,t){try{const r=this.srtp.encrypt(e,t);if(this.config.debug.outboundPacketLoss&&this.config.debug.outboundPacketLoss/100<Math.random()){return r.length}await this.iceTransport.connection.send(r).catch((()=>{}));return r.length}catch(e){b("failed to send",e);return 0}}async sendRtcp(e){const t=Buffer.concat(e.map((e=>e.serialize())));const r=this.srtcp.encrypt(t);if(this.config.debug.outboundPacketLoss&&this.config.debug.outboundPacketLoss/100<Math.random()){return r.length}await this.iceTransport.connection.send(r).catch((()=>{}))}setState(e){if(e!=this.state){this.state=e;this.onStateChange.execute(e)}}async stop(){this.setState("closed")}}t.RTCDtlsTransport=RTCDtlsTransport;t.DtlsStates=["new","connecting","connected","closed","failed"];class RTCCertificate{constructor(e,t,r){Object.defineProperty(this,"certPem",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"signatureHash",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"publicKey",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"privateKey",{enumerable:true,configurable:true,writable:true,value:void 0});const n=i.Certificate.fromPEM(Buffer.from(t));this.publicKey=n.publicKey.toPEM();this.privateKey=i.PrivateKey.fromPEM(Buffer.from(e)).toPEM()}getFingerprints(){return[new RTCDtlsFingerprint("sha-256",(0,g.fingerprint)(i.Certificate.fromPEM(Buffer.from(this.certPem)).raw,"sha256"))]}}t.RTCCertificate=RTCCertificate;class RTCDtlsFingerprint{constructor(e,t){Object.defineProperty(this,"algorithm",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"value",{enumerable:true,configurable:true,writable:true,value:t})}}t.RTCDtlsFingerprint=RTCDtlsFingerprint;class RTCDtlsParameters{constructor(e=[],t){Object.defineProperty(this,"fingerprints",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"role",{enumerable:true,configurable:true,writable:true,value:t})}}t.RTCDtlsParameters=RTCDtlsParameters;class IceTransport{constructor(e){Object.defineProperty(this,"ice",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"onData",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"send",{enumerable:true,configurable:true,writable:true,value:e=>this.ice.send(e)});e.onData.subscribe((e=>{if((0,g.isDtls)(e)){if(this.onData)this.onData(e)}}))}close(){this.ice.close()}}const createIceTransport=e=>new IceTransport(e)},80989:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RTCIceParameters=t.IceCandidate=t.RTCIceCandidate=t.candidateToIce=t.candidateFromIce=t.RTCIceGatherer=t.IceGathererStates=t.IceTransportStates=t.RTCIceTransport=void 0;const i=n(r(69565));const s=n(r(36094));const o=r(63578);const a=r(58698);const c=r(83988);const u=(0,i.default)("werift:packages/webrtc/src/transport/ice.ts");class RTCIceTransport{constructor(e){Object.defineProperty(this,"gather",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:(0,o.v4)()});Object.defineProperty(this,"connection",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"state",{enumerable:true,configurable:true,writable:true,value:"new"});Object.defineProperty(this,"onStateChange",{enumerable:true,configurable:true,writable:true,value:new s.default});Object.defineProperty(this,"waitStart",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"addRemoteCandidate",{enumerable:true,configurable:true,writable:true,value:e=>{if(!this.connection.remoteCandidatesEnd){if(!e){return this.connection.addRemoteCandidate(undefined)}else{return this.connection.addRemoteCandidate(candidateToIce(e))}}}});this.connection=this.gather.connection;this.connection.stateChanged.subscribe((e=>{this.setState(e)}))}get iceGather(){return this.gather}get role(){if(this.connection.iceControlling)return"controlling";else return"controlled"}setState(e){if(e!==this.state){this.state=e;if(this.onStateChange.ended)return;if(e==="closed"){this.onStateChange.execute(e);this.onStateChange.complete()}else{this.onStateChange.execute(e)}}}setRemoteParams(e){if(this.connection.remoteUsername&&this.connection.remotePassword&&(this.connection.remoteUsername!==e.usernameFragment||this.connection.remotePassword!==e.password)){u("restartIce",e);this.connection.resetNominatedPair()}this.connection.setRemoteParams(e)}async start(){if(this.state==="closed")throw new Error("RTCIceTransport is closed");if(!this.connection.remotePassword||!this.connection.remoteUsername)throw new Error("remoteParams missing");if(this.waitStart)await this.waitStart.asPromise();this.waitStart=new s.default;this.setState("checking");try{await this.connection.connect()}catch(e){this.setState("failed");throw e}this.waitStart.complete()}async stop(){if(this.state!=="closed"){this.setState("closed");await this.connection.close()}}}t.RTCIceTransport=RTCIceTransport;t.IceTransportStates=["new","checking","connected","completed","disconnected","failed","closed"];t.IceGathererStates=["new","gathering","complete"];class RTCIceGatherer{constructor(e={}){Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"onIceCandidate",{enumerable:true,configurable:true,writable:true,value:()=>{}});Object.defineProperty(this,"gatheringState",{enumerable:true,configurable:true,writable:true,value:"new"});Object.defineProperty(this,"onGatheringStateChange",{enumerable:true,configurable:true,writable:true,value:new s.default});Object.defineProperty(this,"connection",{enumerable:true,configurable:true,writable:true,value:void 0});this.connection=new a.Connection(false,this.options)}async gather(){if(this.gatheringState==="new"){this.setState("gathering");await this.connection.gatherCandidates((e=>this.onIceCandidate(candidateFromIce(e))));this.setState("complete")}}get localCandidates(){return this.connection.localCandidates.map(candidateFromIce)}get localParameters(){const e=new RTCIceParameters({usernameFragment:this.connection.localUserName,password:this.connection.localPassword});return e}setState(e){if(e!==this.gatheringState){this.gatheringState=e;this.onGatheringStateChange.execute(e)}}}t.RTCIceGatherer=RTCIceGatherer;function candidateFromIce(e){const t=new IceCandidate(e.component,e.foundation,e.host,e.port,e.priority,e.transport,e.type);t.relatedAddress=e.relatedAddress;t.relatedPort=e.relatedPort;t.tcpType=e.tcptype;return t}t.candidateFromIce=candidateFromIce;function candidateToIce(e){return new a.Candidate(e.foundation,e.component,e.protocol,e.priority,e.ip,e.port,e.type,e.relatedAddress,e.relatedPort,e.tcpType)}t.candidateToIce=candidateToIce;class RTCIceCandidate{constructor(e){Object.defineProperty(this,"candidate",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sdpMid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sdpMLineIndex",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}static isThis(e){if(typeof e?.candidate==="string")return true}toJSON(){return{candidate:this.candidate,sdpMid:this.sdpMid,sdpMLineIndex:this.sdpMLineIndex}}}t.RTCIceCandidate=RTCIceCandidate;class IceCandidate{constructor(e,t,r,n,i,s,o){Object.defineProperty(this,"component",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"foundation",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"ip",{enumerable:true,configurable:true,writable:true,value:r});Object.defineProperty(this,"port",{enumerable:true,configurable:true,writable:true,value:n});Object.defineProperty(this,"priority",{enumerable:true,configurable:true,writable:true,value:i});Object.defineProperty(this,"protocol",{enumerable:true,configurable:true,writable:true,value:s});Object.defineProperty(this,"type",{enumerable:true,configurable:true,writable:true,value:o});Object.defineProperty(this,"relatedAddress",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"relatedPort",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sdpMid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sdpMLineIndex",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"tcpType",{enumerable:true,configurable:true,writable:true,value:void 0})}toJSON(){return new RTCIceCandidate({candidate:(0,c.candidateToSdp)(this),sdpMLineIndex:this.sdpMLineIndex,sdpMid:this.sdpMid})}static fromJSON(e){try{const t=(0,c.candidateFromSdp)(e.candidate);t.sdpMLineIndex=e.sdpMLineIndex;t.sdpMid=e.sdpMid;return t}catch(e){}}}t.IceCandidate=IceCandidate;class RTCIceParameters{constructor(e={}){Object.defineProperty(this,"iceLite",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"usernameFragment",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"password",{enumerable:true,configurable:true,writable:true,value:void 0});Object.assign(this,e)}}t.RTCIceParameters=RTCIceParameters},74433:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RTCSctpCapabilities=t.RTCSctpTransport=void 0;const a=r(48775);const c=o(r(69565));const u=r(36094);const d=s(r(63578));const p=r(96656);const m=r(74759);const y=r(59921);const g=(0,c.default)("werift:packages/webrtc/src/transport/sctp.ts");class RTCSctpTransport{constructor(e=5e3){Object.defineProperty(this,"port",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"dtlsTransport",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"sctp",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"onDataChannel",{enumerable:true,configurable:true,writable:true,value:new u.Event});Object.defineProperty(this,"id",{enumerable:true,configurable:true,writable:true,value:d.v4()});Object.defineProperty(this,"mid",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"mLineIndex",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"bundled",{enumerable:true,configurable:true,writable:true,value:false});Object.defineProperty(this,"dataChannels",{enumerable:true,configurable:true,writable:true,value:{}});Object.defineProperty(this,"dataChannelQueue",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"dataChannelId",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"eventDisposer",{enumerable:true,configurable:true,writable:true,value:[]});Object.defineProperty(this,"datachannelReceive",{enumerable:true,configurable:true,writable:true,value:async(e,t,r)=>{if(t===m.WEBRTC_DCEP&&r.length>0){g("DCEP",e,t,r);switch(r[0]){case m.DATA_CHANNEL_OPEN:{if(r.length<12){g("DATA_CHANNEL_OPEN data.length not enough");return}if(!Object.keys(this.dataChannels).includes(e.toString())){const[,t,,n,i,s]=a.jspack.Unpack("!BBHLHH",r);let o=12;const c=r.slice(o,o+i).toString("utf8");o+=i;const u=r.slice(o,o+s).toString("utf8");g("DATA_CHANNEL_OPEN",{channelType:t,reliability:n,streamId:e,label:c,protocol:u});const d=(t&3)===1?n:undefined;const p=(t&3)===2?n:undefined;const m=new y.RTCDataChannelParameters({label:c,ordered:(t&128)===0,maxPacketLifeTime:p,maxRetransmits:d,protocol:u,id:e});const b=new y.RTCDataChannel(this,m,false);b.isCreatedByRemote=true;this.dataChannels[e]=b;this.onDataChannel.execute(b);b.setReadyState("open")}else{g("datachannel already opened","retransmit ack")}const t=this.dataChannels[e];this.dataChannelQueue.push([t,m.WEBRTC_DCEP,Buffer.from(a.jspack.Pack("!B",[m.DATA_CHANNEL_ACK]))]);await this.dataChannelFlush()}break;case m.DATA_CHANNEL_ACK:{g("DATA_CHANNEL_ACK",e,t);const r=this.dataChannels[e];if(!r){throw new Error("channel not found")}r.setReadyState("open")}break}}else{const n=this.dataChannels[e];if(n){const e=(()=>{switch(t){case m.WEBRTC_STRING:return r.toString("utf8");case m.WEBRTC_STRING_EMPTY:return"";case m.WEBRTC_BINARY:return r;case m.WEBRTC_BINARY_EMPTY:return Buffer.from([]);default:throw new Error}})();n.onMessage.execute(e);n.emit("message",{data:e});if(n.onmessage){n.onmessage({data:e})}}}}});Object.defineProperty(this,"datachannelSend",{enumerable:true,configurable:true,writable:true,value:(e,t)=>{e.addBufferedAmount(t.length);this.dataChannelQueue.push(typeof t==="string"?[e,m.WEBRTC_STRING,Buffer.from(t)]:[e,m.WEBRTC_BINARY,t]);if(this.sctp.associationState!==p.SCTP_STATE.ESTABLISHED){g("sctp not established",this.sctp.associationState)}this.dataChannelFlush()}})}setDtlsTransport(e){if(this.dtlsTransport&&this.dtlsTransport.id===e.id){return}this.eventDisposer.forEach((e=>e()));this.dtlsTransport=e;this.sctp=new p.SCTP(new BridgeDtls(this.dtlsTransport),this.port);this.eventDisposer=[...[this.sctp.onReceive.subscribe(this.datachannelReceive),this.sctp.onReconfigStreams.subscribe((e=>{e.forEach((e=>{const t=this.dataChannels[e];if(!t)return;t.setReadyState("closing");t.setReadyState("closed");delete this.dataChannels[e]}))})),this.sctp.stateChanged.connected.subscribe((()=>{Object.values(this.dataChannels).forEach((e=>{if(e.negotiated&&e.readyState!=="open"){e.setReadyState("open")}}));this.dataChannelFlush()})),this.sctp.stateChanged.closed.subscribe((()=>{Object.values(this.dataChannels).forEach((e=>{e.setReadyState("closed")}));this.dataChannels={}})),this.dtlsTransport.onStateChange.subscribe((e=>{if(e==="closed"){this.sctp.setState(p.SCTP_STATE.CLOSED)}}))].map((e=>e.unSubscribe)),()=>this.sctp.onSackReceived=async()=>{}];this.sctp.onSackReceived=async()=>{await this.dataChannelFlush()}}get isServer(){return this.dtlsTransport.iceTransport.role!=="controlling"}channelByLabel(e){return Object.values(this.dataChannels).find((t=>t.label===e))}dataChannelAddNegotiated(e){if(e.id==undefined){throw new Error}if(this.dataChannels[e.id]){throw new Error}this.dataChannels[e.id]=e;if(this.sctp.associationState===p.SCTP_STATE.ESTABLISHED){e.setReadyState("open")}}dataChannelOpen(e){if(e.id){if(this.dataChannels[e.id])throw new Error(`Data channel with ID ${e.id} already registered`);this.dataChannels[e.id]=e}let t=m.DATA_CHANNEL_RELIABLE;const r=0;let n=0;if(!e.ordered){t=128}if(e.maxRetransmits){t=1;n=e.maxRetransmits}else if(e.maxPacketLifeTime){t=2;n=e.maxPacketLifeTime}const i=a.jspack.Pack("!BBHLHH",[m.DATA_CHANNEL_OPEN,t,r,n,e.label.length,e.protocol.length]);const s=Buffer.concat([Buffer.from(i),Buffer.from(e.label,"utf8"),Buffer.from(e.protocol,"utf8")]);this.dataChannelQueue.push([e,m.WEBRTC_DCEP,s]);this.dataChannelFlush()}async dataChannelFlush(){if(this.sctp.associationState!=p.SCTP_STATE.ESTABLISHED)return;if(this.sctp.outboundQueue.length>0)return;while(this.dataChannelQueue.length>0){const[e,t,r]=this.dataChannelQueue.shift();let n=e.id;if(n===undefined){n=this.dataChannelId;while(Object.keys(this.dataChannels).includes(n.toString())){n+=2}this.dataChannels[n]=e;e.setId(n)}if(t===m.WEBRTC_DCEP){await this.sctp.send(n,t,r,{ordered:true})}else{const i=e.maxPacketLifeTime?Date.now()+e.maxPacketLifeTime/1e3:undefined;await this.sctp.send(n,t,r,{expiry:i,maxRetransmits:e.maxRetransmits,ordered:e.ordered});e.addBufferedAmount(-r.length)}}}static getCapabilities(){return new RTCSctpCapabilities(65536)}setRemotePort(e){this.sctp.setRemotePort(e)}async start(e){if(this.isServer){this.dataChannelId=0}else{this.dataChannelId=1}this.sctp.isServer=this.isServer;await this.sctp.start(e)}async stop(){this.dtlsTransport.dataReceiver=()=>{};await this.sctp.stop()}dataChannelClose(e){if(!["closing","closed"].includes(e.readyState)){e.setReadyState("closing");if(this.sctp.associationState===p.SCTP_STATE.ESTABLISHED){this.sctp.reconfigQueue.push(e.id);if(this.sctp.reconfigQueue.length===1){this.sctp.transmitReconfigRequest()}}else{this.dataChannelQueue=this.dataChannelQueue.filter((t=>t[0].id!==e.id));if(e.id){delete this.dataChannels[e.id]}e.setReadyState("closed")}}}}t.RTCSctpTransport=RTCSctpTransport;class RTCSctpCapabilities{constructor(e){Object.defineProperty(this,"maxMessageSize",{enumerable:true,configurable:true,writable:true,value:e})}}t.RTCSctpCapabilities=RTCSctpCapabilities;class BridgeDtls{constructor(e){Object.defineProperty(this,"dtls",{enumerable:true,configurable:true,writable:true,value:e});Object.defineProperty(this,"send",{enumerable:true,configurable:true,writable:true,value:e=>this.dtls.sendData(e)})}set onData(e){this.dtls.dataReceiver=e}close(){}}},79481:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ConnectionStates=t.SignalingStates=void 0;t.SignalingStates=["stable","have-local-offer","have-remote-offer","have-local-pranswer","have-remote-pranswer","closed"];t.ConnectionStates=["closed","failed","disconnected","new","connecting","connected"]},99921:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.deepMerge=t.MediaStreamTrackFactory=t.createSelfSignedCertificate=t.parseIceServers=t.compactNtp=t.ntpTime=t.timestampSeconds=t.milliTime=t.microTime=t.reverseDirection=t.andDirection=t.reverseSimulcastDirection=t.isDtls=t.fingerprint=void 0;const i=r(6113);const s=r(71891);const o=n(r(69565));const a=n(r(625));const c=r(4074);const u=r(35437);const d=r(97346);const p=r(86320);const m=r(48741);const y=r(86842);const g=(0,o.default)("werift:packages/webrtc/src/utils.ts");function fingerprint(e,t){const upper=e=>e.toUpperCase();const colon=e=>e.match(/(.{2})/g).join(":");const r=(0,i.createHash)(t).update(e).digest("hex");return colon(upper(r))}t.fingerprint=fingerprint;function isDtls(e){const t=e[0];return t>19&&t<64}t.isDtls=isDtls;function reverseSimulcastDirection(e){if(e==="recv")return"send";return"recv"}t.reverseSimulcastDirection=reverseSimulcastDirection;const andDirection=(e,t)=>p.Directions[p.Directions.indexOf(e)&p.Directions.indexOf(t)];t.andDirection=andDirection;function reverseDirection(e){if(e==="sendonly")return"recvonly";if(e==="recvonly")return"sendonly";return e}t.reverseDirection=reverseDirection;const microTime=()=>y.micro();t.microTime=microTime;const milliTime=()=>(new Date).getTime();t.milliTime=milliTime;const timestampSeconds=()=>Date.now()/1e3;t.timestampSeconds=timestampSeconds;const ntpTime=()=>{const e=c.performance.timeOrigin+c.performance.now()-Date.UTC(1900,0,1);const t=e/1e3;const[r,n]=t.toString().split(".").map(Number);const i=(0,u.bufferWriter)([4,4],[r,n]);return i.readBigUInt64BE()};t.ntpTime=ntpTime;const compactNtp=e=>{const t=(0,u.bufferWriter)([8],[e]);const[,r,n]=(0,u.bufferReader)(t,[2,2,2,2]);return(0,u.bufferWriter)([2,2],[r,n]).readUInt32BE()};t.compactNtp=compactNtp;function parseIceServers(e){const url2Address=e=>{if(!e)return;const[t,r]=e.split(":");return[t,parseInt(r)]};const t=url2Address(e.find((({urls:e})=>e.includes("stun:")))?.urls.slice(5));const r=url2Address(e.find((({urls:e})=>e.includes("turn:")))?.urls.slice(5));const{credential:n,username:i}=e.find((({urls:e})=>e.includes("turn:")))||{};const s={stunServer:t,turnServer:r,turnUsername:i,turnPassword:n};g("iceOptions",s);return s}t.parseIceServers=parseIceServers;t.createSelfSignedCertificate=d.CipherContext.createSelfSignedCertificateWithKey;class MediaStreamTrackFactory{static async rtpSource({port:e,kind:t,cb:r}){e??(e=await(0,u.randomPort)());const n=new m.MediaStreamTrack({kind:t});const i=(0,s.createSocket)("udp4");i.bind(e);const onMessage=e=>{if(r){e=r(e)}n.writeRtp(e)};i.addListener("message",onMessage);const dispose=()=>{i.removeListener("message",onMessage);i.close()};return[n,e,dispose]}}t.MediaStreamTrackFactory=MediaStreamTrackFactory;const deepMerge=(e,t)=>(0,a.default)(e,t,((e,t)=>{if(!(t==undefined)){return t}return e}));t.deepMerge=deepMerge},63578:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"NIL",{enumerable:true,get:function(){return a.default}});Object.defineProperty(t,"parse",{enumerable:true,get:function(){return p.default}});Object.defineProperty(t,"stringify",{enumerable:true,get:function(){return d.default}});Object.defineProperty(t,"v1",{enumerable:true,get:function(){return n.default}});Object.defineProperty(t,"v3",{enumerable:true,get:function(){return i.default}});Object.defineProperty(t,"v4",{enumerable:true,get:function(){return s.default}});Object.defineProperty(t,"v5",{enumerable:true,get:function(){return o.default}});Object.defineProperty(t,"validate",{enumerable:true,get:function(){return u.default}});Object.defineProperty(t,"version",{enumerable:true,get:function(){return c.default}});var n=_interopRequireDefault(r(20391));var i=_interopRequireDefault(r(92271));var s=_interopRequireDefault(r(31402));var o=_interopRequireDefault(r(2640));var a=_interopRequireDefault(r(49069));var c=_interopRequireDefault(r(49164));var u=_interopRequireDefault(r(36359));var d=_interopRequireDefault(r(23399));var p=_interopRequireDefault(r(30941));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},11416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function md5(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("md5").update(e).digest()}var i=md5;t["default"]=i},48579:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var i={randomUUID:n.default.randomUUID};t["default"]=i},49069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r="00000000-0000-0000-0000-000000000000";t["default"]=r},30941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(36359));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parse(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}let t;const r=new Uint8Array(16);r[0]=(t=parseInt(e.slice(0,8),16))>>>24;r[1]=t>>>16&255;r[2]=t>>>8&255;r[3]=t&255;r[4]=(t=parseInt(e.slice(9,13),16))>>>8;r[5]=t&255;r[6]=(t=parseInt(e.slice(14,18),16))>>>8;r[7]=t&255;r[8]=(t=parseInt(e.slice(19,23),16))>>>8;r[9]=t&255;r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255;r[11]=t/4294967296&255;r[12]=t>>>24&255;r[13]=t>>>16&255;r[14]=t>>>8&255;r[15]=t&255;return r}var i=parse;t["default"]=i},96089:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;t["default"]=r},47776:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=rng;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=new Uint8Array(256);let s=i.length;function rng(){if(s>i.length-16){n.default.randomFillSync(i);s=0}return i.slice(s,s+=16)}},2997:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function sha1(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("sha1").update(e).digest()}var i=sha1;t["default"]=i},23399:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;t.unsafeStringify=unsafeStringify;var n=_interopRequireDefault(r(36359));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=[];for(let e=0;e<256;++e){i.push((e+256).toString(16).slice(1))}function unsafeStringify(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}function stringify(e,t=0){const r=unsafeStringify(e,t);if(!(0,n.default)(r)){throw TypeError("Stringified UUID is invalid")}return r}var s=stringify;t["default"]=s},20391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(47776));var i=r(23399);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let s;let o;let a=0;let c=0;function v1(e,t,r){let u=t&&r||0;const d=t||new Array(16);e=e||{};let p=e.node||s;let m=e.clockseq!==undefined?e.clockseq:o;if(p==null||m==null){const t=e.random||(e.rng||n.default)();if(p==null){p=s=[t[0]|1,t[1],t[2],t[3],t[4],t[5]]}if(m==null){m=o=(t[6]<<8|t[7])&16383}}let y=e.msecs!==undefined?e.msecs:Date.now();let g=e.nsecs!==undefined?e.nsecs:c+1;const b=y-a+(g-c)/1e4;if(b<0&&e.clockseq===undefined){m=m+1&16383}if((b<0||y>a)&&e.nsecs===undefined){g=0}if(g>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}a=y;c=g;o=m;y+=122192928e5;const v=((y&268435455)*1e4+g)%4294967296;d[u++]=v>>>24&255;d[u++]=v>>>16&255;d[u++]=v>>>8&255;d[u++]=v&255;const w=y/4294967296*1e4&268435455;d[u++]=w>>>8&255;d[u++]=w&255;d[u++]=w>>>24&15|16;d[u++]=w>>>16&255;d[u++]=m>>>8|128;d[u++]=m&255;for(let e=0;e<6;++e){d[u+e]=p[e]}return t||(0,i.unsafeStringify)(d)}var u=v1;t["default"]=u},92271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(86747));var i=_interopRequireDefault(r(11416));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const s=(0,n.default)("v3",48,i.default);var o=s;t["default"]=o},86747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.URL=t.DNS=void 0;t["default"]=v35;var n=r(23399);var i=_interopRequireDefault(r(30941));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function stringToBytes(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r){t.push(e.charCodeAt(r))}return t}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=o;function v35(e,t,r){function generateUUID(e,s,o,a){var c;if(typeof e==="string"){e=stringToBytes(e)}if(typeof s==="string"){s=(0,i.default)(s)}if(((c=s)===null||c===void 0?void 0:c.length)!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let u=new Uint8Array(16+e.length);u.set(s);u.set(e,s.length);u=r(u);u[6]=u[6]&15|t;u[8]=u[8]&63|128;if(o){a=a||0;for(let e=0;e<16;++e){o[a+e]=u[e]}return o}return(0,n.unsafeStringify)(u)}try{generateUUID.name=e}catch(e){}generateUUID.DNS=s;generateUUID.URL=o;return generateUUID}},31402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(48579));var i=_interopRequireDefault(r(47776));var s=r(23399);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v4(e,t,r){if(n.default.randomUUID&&!t&&!e){return n.default.randomUUID()}e=e||{};const o=e.random||(e.rng||i.default)();o[6]=o[6]&15|64;o[8]=o[8]&63|128;if(t){r=r||0;for(let e=0;e<16;++e){t[r+e]=o[e]}return t}return(0,s.unsafeStringify)(o)}var o=v4;t["default"]=o},2640:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(86747));var i=_interopRequireDefault(r(2997));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const s=(0,n.default)("v5",80,i.default);var o=s;t["default"]=o},36359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(96089));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function validate(e){return typeof e==="string"&&n.default.test(e)}var i=validate;t["default"]=i},49164:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(36359));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function version(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}return parseInt(e.slice(14,15),16)}var i=version;t["default"]=i},8546:(e,t,r)=>{const n=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys";const i=r(71017);const s=n?";":":";const o=r(10307);const getNotFoundError=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"});const getPathInfo=(e,t)=>{const r=t.colon||s;const i=e.match(/\//)||n&&e.match(/\\/)?[""]:[...n?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)];const o=n?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"";const a=n?o.split(r):[""];if(n){if(e.indexOf(".")!==-1&&a[0]!=="")a.unshift("")}return{pathEnv:i,pathExt:a,pathExtExe:o}};const which=(e,t,r)=>{if(typeof t==="function"){r=t;t={}}if(!t)t={};const{pathEnv:n,pathExt:s,pathExtExe:a}=getPathInfo(e,t);const c=[];const step=r=>new Promise(((s,o)=>{if(r===n.length)return t.all&&c.length?s(c):o(getNotFoundError(e));const a=n[r];const u=/^".*"$/.test(a)?a.slice(1,-1):a;const d=i.join(u,e);const p=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;s(subStep(p,r,0))}));const subStep=(e,r,n)=>new Promise(((i,u)=>{if(n===s.length)return i(step(r+1));const d=s[n];o(e+d,{pathExt:a},((s,o)=>{if(!s&&o){if(t.all)c.push(e+d);else return i(e+d)}return i(subStep(e,r,n+1))}))}));return r?step(0).then((e=>r(null,e)),r):step(0)};const whichSync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:n,pathExtExe:s}=getPathInfo(e,t);const a=[];for(let c=0;c<r.length;c++){const u=r[c];const d=/^".*"$/.test(u)?u.slice(1,-1):u;const p=i.join(d,e);const m=!d&&/^\.[\\\/]/.test(e)?e.slice(0,2)+p:p;for(let e=0;e<n.length;e++){const r=m+n[e];try{const e=o.sync(r,{pathExt:s});if(e){if(t.all)a.push(r);else return r}}catch(e){}}}if(t.all&&a.length)return a;if(t.nothrow)return null;throw getNotFoundError(e)};e.exports=which;which.sync=whichSync},97438:(e,t,r)=>{"use strict";const n=r(94726);n.createWebSocketStream=r(14664);n.Server=r(26728);n.Receiver=r(82079);n.Sender=r(22741);n.WebSocket=n;n.WebSocketServer=n.Server;e.exports=n},16408:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(31730);const i=Buffer[Symbol.species];function concat(e,t){if(e.length===0)return n;if(e.length===1)return e[0];const r=Buffer.allocUnsafe(t);let s=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,s);s+=n.length}if(s<t){return new i(r.buffer,r.byteOffset,s)}return r}function _mask(e,t,r,n,i){for(let s=0;s<i;s++){r[n+s]=e[s]^t[s&3]}}function _unmask(e,t){for(let r=0;r<e.length;r++){e[r]^=t[r&3]}}function toArrayBuffer(e){if(e.length===e.buffer.byteLength){return e.buffer}return e.buffer.slice(e.byteOffset,e.byteOffset+e.length)}function toBuffer(e){toBuffer.readOnly=true;if(Buffer.isBuffer(e))return e;let t;if(e instanceof ArrayBuffer){t=new i(e)}else if(ArrayBuffer.isView(e)){t=new i(e.buffer,e.byteOffset,e.byteLength)}else{t=Buffer.from(e);toBuffer.readOnly=false}return t}e.exports={concat:concat,mask:_mask,toArrayBuffer:toArrayBuffer,toBuffer:toBuffer,unmask:_unmask};if(!process.env.WS_NO_BUFFER_UTIL){try{const t=r(40521);e.exports.mask=function(e,r,n,i,s){if(s<48)_mask(e,r,n,i,s);else t.mask(e,r,n,i,s)};e.exports.unmask=function(e,r){if(e.length<32)_unmask(e,r);else t.unmask(e,r)}}catch(e){}}},31730:e=>{"use strict";const t=["nodebuffer","arraybuffer","fragments"];const r=typeof Blob!=="undefined";if(r)t.push("blob");e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:r,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},36881:(e,t,r)=>{"use strict";const{kForOnEventAttribute:n,kListener:i}=r(31730);const s=Symbol("kCode");const o=Symbol("kData");const a=Symbol("kError");const c=Symbol("kMessage");const u=Symbol("kReason");const d=Symbol("kTarget");const p=Symbol("kType");const m=Symbol("kWasClean");class Event{constructor(e){this[d]=null;this[p]=e}get target(){return this[d]}get type(){return this[p]}}Object.defineProperty(Event.prototype,"target",{enumerable:true});Object.defineProperty(Event.prototype,"type",{enumerable:true});class CloseEvent extends Event{constructor(e,t={}){super(e);this[s]=t.code===undefined?0:t.code;this[u]=t.reason===undefined?"":t.reason;this[m]=t.wasClean===undefined?false:t.wasClean}get code(){return this[s]}get reason(){return this[u]}get wasClean(){return this[m]}}Object.defineProperty(CloseEvent.prototype,"code",{enumerable:true});Object.defineProperty(CloseEvent.prototype,"reason",{enumerable:true});Object.defineProperty(CloseEvent.prototype,"wasClean",{enumerable:true});class ErrorEvent extends Event{constructor(e,t={}){super(e);this[a]=t.error===undefined?null:t.error;this[c]=t.message===undefined?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(ErrorEvent.prototype,"error",{enumerable:true});Object.defineProperty(ErrorEvent.prototype,"message",{enumerable:true});class MessageEvent extends Event{constructor(e,t={}){super(e);this[o]=t.data===undefined?null:t.data}get data(){return this[o]}}Object.defineProperty(MessageEvent.prototype,"data",{enumerable:true});const y={addEventListener(e,t,r={}){for(const s of this.listeners(e)){if(!r[n]&&s[i]===t&&!s[n]){return}}let s;if(e==="message"){s=function onMessage(e,r){const n=new MessageEvent("message",{data:r?e:e.toString()});n[d]=this;callListener(t,this,n)}}else if(e==="close"){s=function onClose(e,r){const n=new CloseEvent("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[d]=this;callListener(t,this,n)}}else if(e==="error"){s=function onError(e){const r=new ErrorEvent("error",{error:e,message:e.message});r[d]=this;callListener(t,this,r)}}else if(e==="open"){s=function onOpen(){const e=new Event("open");e[d]=this;callListener(t,this,e)}}else{return}s[n]=!!r[n];s[i]=t;if(r.once){this.once(e,s)}else{this.on(e,s)}},removeEventListener(e,t){for(const r of this.listeners(e)){if(r[i]===t&&!r[n]){this.removeListener(e,r);break}}}};e.exports={CloseEvent:CloseEvent,ErrorEvent:ErrorEvent,Event:Event,EventTarget:y,MessageEvent:MessageEvent};function callListener(e,t,r){if(typeof e==="object"&&e.handleEvent){e.handleEvent.call(e,r)}else{e.call(t,r)}}},36333:(e,t,r)=>{"use strict";const{tokenChars:n}=r(79360);function push(e,t,r){if(e[t]===undefined)e[t]=[r];else e[t].push(r)}function parse(e){const t=Object.create(null);let r=Object.create(null);let i=false;let s=false;let o=false;let a;let c;let u=-1;let d=-1;let p=-1;let m=0;for(;m<e.length;m++){d=e.charCodeAt(m);if(a===undefined){if(p===-1&&n[d]===1){if(u===-1)u=m}else if(m!==0&&(d===32||d===9)){if(p===-1&&u!==-1)p=m}else if(d===59||d===44){if(u===-1){throw new SyntaxError(`Unexpected character at index ${m}`)}if(p===-1)p=m;const n=e.slice(u,p);if(d===44){push(t,n,r);r=Object.create(null)}else{a=n}u=p=-1}else{throw new SyntaxError(`Unexpected character at index ${m}`)}}else if(c===undefined){if(p===-1&&n[d]===1){if(u===-1)u=m}else if(d===32||d===9){if(p===-1&&u!==-1)p=m}else if(d===59||d===44){if(u===-1){throw new SyntaxError(`Unexpected character at index ${m}`)}if(p===-1)p=m;push(r,e.slice(u,p),true);if(d===44){push(t,a,r);r=Object.create(null);a=undefined}u=p=-1}else if(d===61&&u!==-1&&p===-1){c=e.slice(u,m);u=p=-1}else{throw new SyntaxError(`Unexpected character at index ${m}`)}}else{if(s){if(n[d]!==1){throw new SyntaxError(`Unexpected character at index ${m}`)}if(u===-1)u=m;else if(!i)i=true;s=false}else if(o){if(n[d]===1){if(u===-1)u=m}else if(d===34&&u!==-1){o=false;p=m}else if(d===92){s=true}else{throw new SyntaxError(`Unexpected character at index ${m}`)}}else if(d===34&&e.charCodeAt(m-1)===61){o=true}else if(p===-1&&n[d]===1){if(u===-1)u=m}else if(u!==-1&&(d===32||d===9)){if(p===-1)p=m}else if(d===59||d===44){if(u===-1){throw new SyntaxError(`Unexpected character at index ${m}`)}if(p===-1)p=m;let n=e.slice(u,p);if(i){n=n.replace(/\\/g,"");i=false}push(r,c,n);if(d===44){push(t,a,r);r=Object.create(null);a=undefined}c=undefined;u=p=-1}else{throw new SyntaxError(`Unexpected character at index ${m}`)}}}if(u===-1||o||d===32||d===9){throw new SyntaxError("Unexpected end of input")}if(p===-1)p=m;const y=e.slice(u,p);if(a===undefined){push(t,y,r)}else{if(c===undefined){push(r,y,true)}else if(i){push(r,c,y.replace(/\\/g,""))}else{push(r,c,y)}push(t,a,r)}return t}function format(e){return Object.keys(e).map((t=>{let r=e[t];if(!Array.isArray(r))r=[r];return r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];if(!Array.isArray(r))r=[r];return r.map((e=>e===true?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")}e.exports={format:format,parse:parse}},73437:e=>{"use strict";const t=Symbol("kDone");const r=Symbol("kRun");class Limiter{constructor(e){this[t]=()=>{this.pending--;this[r]()};this.concurrency=e||Infinity;this.jobs=[];this.pending=0}add(e){this.jobs.push(e);this[r]()}[r](){if(this.pending===this.concurrency)return;if(this.jobs.length){const e=this.jobs.shift();this.pending++;e(this[t])}}}e.exports=Limiter},45326:(e,t,r)=>{"use strict";const n=r(59796);const i=r(16408);const s=r(73437);const{kStatusCode:o}=r(31730);const a=Buffer[Symbol.species];const c=Buffer.from([0,0,255,255]);const u=Symbol("permessage-deflate");const d=Symbol("total-length");const p=Symbol("callback");const m=Symbol("buffers");const y=Symbol("error");let g;class PerMessageDeflate{constructor(e,t,r){this._maxPayload=r|0;this._options=e||{};this._threshold=this._options.threshold!==undefined?this._options.threshold:1024;this._isServer=!!t;this._deflate=null;this._inflate=null;this.params=null;if(!g){const e=this._options.concurrencyLimit!==undefined?this._options.concurrencyLimit:10;g=new s(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};if(this._options.serverNoContextTakeover){e.server_no_context_takeover=true}if(this._options.clientNoContextTakeover){e.client_no_context_takeover=true}if(this._options.serverMaxWindowBits){e.server_max_window_bits=this._options.serverMaxWindowBits}if(this._options.clientMaxWindowBits){e.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits==null){e.client_max_window_bits=true}return e}accept(e){e=this.normalizeParams(e);this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e);return this.params}cleanup(){if(this._inflate){this._inflate.close();this._inflate=null}if(this._deflate){const e=this._deflate[p];this._deflate.close();this._deflate=null;if(e){e(new Error("The deflate stream was closed while data was being processed"))}}}acceptAsServer(e){const t=this._options;const r=e.find((e=>{if(t.serverNoContextTakeover===false&&e.server_no_context_takeover||e.server_max_window_bits&&(t.serverMaxWindowBits===false||typeof t.serverMaxWindowBits==="number"&&t.serverMaxWindowBits>e.server_max_window_bits)||typeof t.clientMaxWindowBits==="number"&&!e.client_max_window_bits){return false}return true}));if(!r){throw new Error("None of the extension offers can be accepted")}if(t.serverNoContextTakeover){r.server_no_context_takeover=true}if(t.clientNoContextTakeover){r.client_no_context_takeover=true}if(typeof t.serverMaxWindowBits==="number"){r.server_max_window_bits=t.serverMaxWindowBits}if(typeof t.clientMaxWindowBits==="number"){r.client_max_window_bits=t.clientMaxWindowBits}else if(r.client_max_window_bits===true||t.clientMaxWindowBits===false){delete r.client_max_window_bits}return r}acceptAsClient(e){const t=e[0];if(this._options.clientNoContextTakeover===false&&t.client_no_context_takeover){throw new Error('Unexpected parameter "client_no_context_takeover"')}if(!t.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number"){t.client_max_window_bits=this._options.clientMaxWindowBits}}else if(this._options.clientMaxWindowBits===false||typeof this._options.clientMaxWindowBits==="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits){throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}return t}normalizeParams(e){e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1){throw new Error(`Parameter "${t}" must have only a single value`)}r=r[0];if(t==="client_max_window_bits"){if(r!==true){const e=+r;if(!Number.isInteger(e)||e<8||e>15){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}r=e}else if(!this._isServer){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}}else if(t==="server_max_window_bits"){const e=+r;if(!Number.isInteger(e)||e<8||e>15){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}r=e}else if(t==="client_no_context_takeover"||t==="server_no_context_takeover"){if(r!==true){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}}else{throw new Error(`Unknown parameter "${t}"`)}e[t]=r}))}));return e}decompress(e,t,r){g.add((n=>{this._decompress(e,t,((e,t)=>{n();r(e,t)}))}))}compress(e,t,r){g.add((n=>{this._compress(e,t,((e,t)=>{n();r(e,t)}))}))}_decompress(e,t,r){const s=this._isServer?"client":"server";if(!this._inflate){const e=`${s}_max_window_bits`;const t=typeof this.params[e]!=="number"?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t});this._inflate[u]=this;this._inflate[d]=0;this._inflate[m]=[];this._inflate.on("error",inflateOnError);this._inflate.on("data",inflateOnData)}this._inflate[p]=r;this._inflate.write(e);if(t)this._inflate.write(c);this._inflate.flush((()=>{const e=this._inflate[y];if(e){this._inflate.close();this._inflate=null;r(e);return}const n=i.concat(this._inflate[m],this._inflate[d]);if(this._inflate._readableState.endEmitted){this._inflate.close();this._inflate=null}else{this._inflate[d]=0;this._inflate[m]=[];if(t&&this.params[`${s}_no_context_takeover`]){this._inflate.reset()}}r(null,n)}))}_compress(e,t,r){const s=this._isServer?"server":"client";if(!this._deflate){const e=`${s}_max_window_bits`;const t=typeof this.params[e]!=="number"?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t});this._deflate[d]=0;this._deflate[m]=[];this._deflate.on("data",deflateOnData)}this._deflate[p]=r;this._deflate.write(e);this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate){return}let e=i.concat(this._deflate[m],this._deflate[d]);if(t){e=new a(e.buffer,e.byteOffset,e.length-4)}this._deflate[p]=null;this._deflate[d]=0;this._deflate[m]=[];if(t&&this.params[`${s}_no_context_takeover`]){this._deflate.reset()}r(null,e)}))}}e.exports=PerMessageDeflate;function deflateOnData(e){this[m].push(e);this[d]+=e.length}function inflateOnData(e){this[d]+=e.length;if(this[u]._maxPayload<1||this[d]<=this[u]._maxPayload){this[m].push(e);return}this[y]=new RangeError("Max payload size exceeded");this[y].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH";this[y][o]=1009;this.removeListener("data",inflateOnData);this.reset()}function inflateOnError(e){this[u]._inflate=null;e[o]=1007;this[p](e)}},82079:(e,t,r)=>{"use strict";const{Writable:n}=r(68265);const i=r(45326);const{BINARY_TYPES:s,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=r(31730);const{concat:u,toArrayBuffer:d,unmask:p}=r(16408);const{isValidStatusCode:m,isValidUTF8:y}=r(79360);const g=Buffer[Symbol.species];const b=0;const v=1;const w=2;const _=3;const C=4;const P=5;const O=6;class Receiver extends n{constructor(e={}){super();this._allowSynchronousEvents=e.allowSynchronousEvents!==undefined?e.allowSynchronousEvents:true;this._binaryType=e.binaryType||s[0];this._extensions=e.extensions||{};this._isServer=!!e.isServer;this._maxPayload=e.maxPayload|0;this._skipUTF8Validation=!!e.skipUTF8Validation;this[c]=undefined;this._bufferedBytes=0;this._buffers=[];this._compressed=false;this._payloadLength=0;this._mask=undefined;this._fragmented=0;this._masked=false;this._fin=false;this._opcode=0;this._totalPayloadLength=0;this._messageLength=0;this._fragments=[];this._errored=false;this._loop=false;this._state=b}_write(e,t,r){if(this._opcode===8&&this._state==b)return r();this._bufferedBytes+=e.length;this._buffers.push(e);this.startLoop(r)}consume(e){this._bufferedBytes-=e;if(e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];this._buffers[0]=new g(t.buffer,t.byteOffset+e,t.length-e);return new g(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0];const n=t.length-e;if(e>=r.length){t.set(this._buffers.shift(),n)}else{t.set(new Uint8Array(r.buffer,r.byteOffset,e),n);this._buffers[0]=new g(r.buffer,r.byteOffset+e,r.length-e)}e-=r.length}while(e>0);return t}startLoop(e){this._loop=true;do{switch(this._state){case b:this.getInfo(e);break;case v:this.getPayloadLength16(e);break;case w:this.getPayloadLength64(e);break;case _:this.getMask();break;case C:this.getData(e);break;case P:case O:this._loop=false;return}}while(this._loop);if(!this._errored)e()}getInfo(e){if(this._bufferedBytes<2){this._loop=false;return}const t=this.consume(2);if((t[0]&48)!==0){const t=this.createError(RangeError,"RSV2 and RSV3 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(t);return}const r=(t[0]&64)===64;if(r&&!this._extensions[i.extensionName]){const t=this.createError(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1");e(t);return}this._fin=(t[0]&128)===128;this._opcode=t[0]&15;this._payloadLength=t[1]&127;if(this._opcode===0){if(r){const t=this.createError(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1");e(t);return}if(!this._fragmented){const t=this.createError(RangeError,"invalid opcode 0",true,1002,"WS_ERR_INVALID_OPCODE");e(t);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){const t=this.createError(RangeError,`invalid opcode ${this._opcode}`,true,1002,"WS_ERR_INVALID_OPCODE");e(t);return}this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin){const t=this.createError(RangeError,"FIN must be set",true,1002,"WS_ERR_EXPECTED_FIN");e(t);return}if(r){const t=this.createError(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1");e(t);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){const t=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,true,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(t);return}}else{const t=this.createError(RangeError,`invalid opcode ${this._opcode}`,true,1002,"WS_ERR_INVALID_OPCODE");e(t);return}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;this._masked=(t[1]&128)===128;if(this._isServer){if(!this._masked){const t=this.createError(RangeError,"MASK must be set",true,1002,"WS_ERR_EXPECTED_MASK");e(t);return}}else if(this._masked){const t=this.createError(RangeError,"MASK must be clear",true,1002,"WS_ERR_UNEXPECTED_MASK");e(t);return}if(this._payloadLength===126)this._state=v;else if(this._payloadLength===127)this._state=w;else this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=false;return}this._payloadLength=this.consume(2).readUInt16BE(0);this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=false;return}const t=this.consume(8);const r=t.readUInt32BE(0);if(r>Math.pow(2,53-32)-1){const t=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",false,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(t);return}this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4);this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8){this._totalPayloadLength+=this._payloadLength;if(this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){const t=this.createError(RangeError,"Max payload size exceeded",false,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(t);return}}if(this._masked)this._state=_;else this._state=C}getMask(){if(this._bufferedBytes<4){this._loop=false;return}this._mask=this.consume(4);this._state=C}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=false;return}t=this.consume(this._payloadLength);if(this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0){p(t,this._mask)}}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=P;this.decompress(t,e);return}if(t.length){this._messageLength=this._totalPayloadLength;this._fragments.push(t)}this.dataMessage(e)}decompress(e,t){const r=this._extensions[i.extensionName];r.decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){this._messageLength+=r.length;if(this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",false,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(e);return}this._fragments.push(r)}this.dataMessage(t);if(this._state===b)this.startLoop(t)}))}dataMessage(e){if(!this._fin){this._state=b;return}const t=this._messageLength;const r=this._fragments;this._totalPayloadLength=0;this._messageLength=0;this._fragmented=0;this._fragments=[];if(this._opcode===2){let n;if(this._binaryType==="nodebuffer"){n=u(r,t)}else if(this._binaryType==="arraybuffer"){n=d(u(r,t))}else if(this._binaryType==="blob"){n=new Blob(r)}else{n=r}if(this._allowSynchronousEvents){this.emit("message",n,true);this._state=b}else{this._state=O;setImmediate((()=>{this.emit("message",n,true);this._state=b;this.startLoop(e)}))}}else{const n=u(r,t);if(!this._skipUTF8Validation&&!y(n)){const t=this.createError(Error,"invalid UTF-8 sequence",true,1007,"WS_ERR_INVALID_UTF8");e(t);return}if(this._state===P||this._allowSynchronousEvents){this.emit("message",n,false);this._state=b}else{this._state=O;setImmediate((()=>{this.emit("message",n,false);this._state=b;this.startLoop(e)}))}}}controlMessage(e,t){if(this._opcode===8){if(e.length===0){this._loop=false;this.emit("conclude",1005,o);this.end()}else{const r=e.readUInt16BE(0);if(!m(r)){const e=this.createError(RangeError,`invalid status code ${r}`,true,1002,"WS_ERR_INVALID_CLOSE_CODE");t(e);return}const n=new g(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!y(n)){const e=this.createError(Error,"invalid UTF-8 sequence",true,1007,"WS_ERR_INVALID_UTF8");t(e);return}this._loop=false;this.emit("conclude",r,n);this.end()}this._state=b;return}if(this._allowSynchronousEvents){this.emit(this._opcode===9?"ping":"pong",e);this._state=b}else{this._state=O;setImmediate((()=>{this.emit(this._opcode===9?"ping":"pong",e);this._state=b;this.startLoop(t)}))}}createError(e,t,r,n,i){this._loop=false;this._errored=true;const s=new e(r?`Invalid WebSocket frame: ${t}`:t);Error.captureStackTrace(s,this.createError);s.code=i;s[a]=n;return s}}e.exports=Receiver},22741:(e,t,r)=>{"use strict";const{Duplex:n}=r(68265);const{randomFillSync:i}=r(6113);const s=r(45326);const{EMPTY_BUFFER:o,kWebSocket:a,NOOP:c}=r(31730);const{isBlob:u,isValidStatusCode:d}=r(79360);const{mask:p,toBuffer:m}=r(16408);const y=Symbol("kByteLength");const g=Buffer.alloc(4);const b=8*1024;let v;let w=b;const _=0;const C=1;const P=2;class Sender{constructor(e,t,r){this._extensions=t||{};if(r){this._generateMask=r;this._maskBuffer=Buffer.alloc(4)}this._socket=e;this._firstFragment=true;this._compress=false;this._bufferedBytes=0;this._queue=[];this._state=_;this.onerror=c;this[a]=undefined}static frame(e,t){let r;let n=false;let s=2;let o=false;if(t.mask){r=t.maskBuffer||g;if(t.generateMask){t.generateMask(r)}else{if(w===b){if(v===undefined){v=Buffer.alloc(b)}i(v,0,b);w=0}r[0]=v[w++];r[1]=v[w++];r[2]=v[w++];r[3]=v[w++]}o=(r[0]|r[1]|r[2]|r[3])===0;s=6}let a;if(typeof e==="string"){if((!t.mask||o)&&t[y]!==undefined){a=t[y]}else{e=Buffer.from(e);a=e.length}}else{a=e.length;n=t.mask&&t.readOnly&&!o}let c=a;if(a>=65536){s+=8;c=127}else if(a>125){s+=2;c=126}const u=Buffer.allocUnsafe(n?a+s:s);u[0]=t.fin?t.opcode|128:t.opcode;if(t.rsv1)u[0]|=64;u[1]=c;if(c===126){u.writeUInt16BE(a,2)}else if(c===127){u[2]=u[3]=0;u.writeUIntBE(a,4,6)}if(!t.mask)return[u,e];u[1]|=128;u[s-4]=r[0];u[s-3]=r[1];u[s-2]=r[2];u[s-1]=r[3];if(o)return[u,e];if(n){p(e,r,u,s,a);return[u]}p(e,r,e,0,a);return[u,e]}close(e,t,r,n){let i;if(e===undefined){i=o}else if(typeof e!=="number"||!d(e)){throw new TypeError("First argument must be a valid error code number")}else if(t===undefined||!t.length){i=Buffer.allocUnsafe(2);i.writeUInt16BE(e,0)}else{const r=Buffer.byteLength(t);if(r>123){throw new RangeError("The message must not be greater than 123 bytes")}i=Buffer.allocUnsafe(2+r);i.writeUInt16BE(e,0);if(typeof t==="string"){i.write(t,2)}else{i.set(t,2)}}const s={[y]:i.length,fin:true,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:false,rsv1:false};if(this._state!==_){this.enqueue([this.dispatch,i,false,s,n])}else{this.sendFrame(Sender.frame(i,s),n)}}ping(e,t,r){let n;let i;if(typeof e==="string"){n=Buffer.byteLength(e);i=false}else if(u(e)){n=e.size;i=false}else{e=m(e);n=e.length;i=m.readOnly}if(n>125){throw new RangeError("The data size must not be greater than 125 bytes")}const s={[y]:n,fin:true,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:false};if(u(e)){if(this._state!==_){this.enqueue([this.getBlobData,e,false,s,r])}else{this.getBlobData(e,false,s,r)}}else if(this._state!==_){this.enqueue([this.dispatch,e,false,s,r])}else{this.sendFrame(Sender.frame(e,s),r)}}pong(e,t,r){let n;let i;if(typeof e==="string"){n=Buffer.byteLength(e);i=false}else if(u(e)){n=e.size;i=false}else{e=m(e);n=e.length;i=m.readOnly}if(n>125){throw new RangeError("The data size must not be greater than 125 bytes")}const s={[y]:n,fin:true,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:false};if(u(e)){if(this._state!==_){this.enqueue([this.getBlobData,e,false,s,r])}else{this.getBlobData(e,false,s,r)}}else if(this._state!==_){this.enqueue([this.dispatch,e,false,s,r])}else{this.sendFrame(Sender.frame(e,s),r)}}send(e,t,r){const n=this._extensions[s.extensionName];let i=t.binary?2:1;let o=t.compress;let a;let c;if(typeof e==="string"){a=Buffer.byteLength(e);c=false}else if(u(e)){a=e.size;c=false}else{e=m(e);a=e.length;c=m.readOnly}if(this._firstFragment){this._firstFragment=false;if(o&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]){o=a>=n._threshold}this._compress=o}else{o=false;i=0}if(t.fin)this._firstFragment=true;const d={[y]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:c,rsv1:o};if(u(e)){if(this._state!==_){this.enqueue([this.getBlobData,e,this._compress,d,r])}else{this.getBlobData(e,this._compress,d,r)}}else if(this._state!==_){this.enqueue([this.dispatch,e,this._compress,d,r])}else{this.dispatch(e,this._compress,d,r)}}getBlobData(e,t,r,n){this._bufferedBytes+=r[y];this._state=P;e.arrayBuffer().then((e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");process.nextTick(callCallbacks,this,e,n);return}this._bufferedBytes-=r[y];const i=m(e);if(!t){this._state=_;this.sendFrame(Sender.frame(i,r),n);this.dequeue()}else{this.dispatch(i,t,r,n)}})).catch((e=>{process.nextTick(onError,this,e,n)}))}dispatch(e,t,r,n){if(!t){this.sendFrame(Sender.frame(e,r),n);return}const i=this._extensions[s.extensionName];this._bufferedBytes+=r[y];this._state=C;i.compress(e,r.fin,((e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");callCallbacks(this,e,n);return}this._bufferedBytes-=r[y];this._state=_;r.readOnly=false;this.sendFrame(Sender.frame(t,r),n);this.dequeue()}))}dequeue(){while(this._state===_&&this._queue.length){const e=this._queue.shift();this._bufferedBytes-=e[3][y];Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][y];this._queue.push(e)}sendFrame(e,t){if(e.length===2){this._socket.cork();this._socket.write(e[0]);this._socket.write(e[1],t);this._socket.uncork()}else{this._socket.write(e[0],t)}}}e.exports=Sender;function callCallbacks(e,t,r){if(typeof r==="function")r(t);for(let r=0;r<e._queue.length;r++){const n=e._queue[r];const i=n[n.length-1];if(typeof i==="function")i(t)}}function onError(e,t,r){callCallbacks(e,t,r);e.onerror(t)}},14664:(e,t,r)=>{"use strict";const{Duplex:n}=r(68265);function emitClose(e){e.emit("close")}function duplexOnEnd(){if(!this.destroyed&&this._writableState.finished){this.destroy()}}function duplexOnError(e){this.removeListener("error",duplexOnError);this.destroy();if(this.listenerCount("error")===0){this.emit("error",e)}}function createWebSocketStream(e,t){let r=true;const i=new n({...t,autoDestroy:false,emitClose:false,objectMode:false,writableObjectMode:false});e.on("message",(function message(t,r){const n=!r&&i._readableState.objectMode?t.toString():t;if(!i.push(n))e.pause()}));e.once("error",(function error(e){if(i.destroyed)return;r=false;i.destroy(e)}));e.once("close",(function close(){if(i.destroyed)return;i.push(null)}));i._destroy=function(t,n){if(e.readyState===e.CLOSED){n(t);process.nextTick(emitClose,i);return}let s=false;e.once("error",(function error(e){s=true;n(e)}));e.once("close",(function close(){if(!s)n(t);process.nextTick(emitClose,i)}));if(r)e.terminate()};i._final=function(t){if(e.readyState===e.CONNECTING){e.once("open",(function open(){i._final(t)}));return}if(e._socket===null)return;if(e._socket._writableState.finished){t();if(i._readableState.endEmitted)i.destroy()}else{e._socket.once("finish",(function finish(){t()}));e.close()}};i._read=function(){if(e.isPaused)e.resume()};i._write=function(t,r,n){if(e.readyState===e.CONNECTING){e.once("open",(function open(){i._write(t,r,n)}));return}e.send(t,n)};i.on("end",duplexOnEnd);i.on("error",duplexOnError);return i}e.exports=createWebSocketStream},45749:(e,t,r)=>{"use strict";const{tokenChars:n}=r(79360);function parse(e){const t=new Set;let r=-1;let i=-1;let s=0;for(s;s<e.length;s++){const o=e.charCodeAt(s);if(i===-1&&n[o]===1){if(r===-1)r=s}else if(s!==0&&(o===32||o===9)){if(i===-1&&r!==-1)i=s}else if(o===44){if(r===-1){throw new SyntaxError(`Unexpected character at index ${s}`)}if(i===-1)i=s;const n=e.slice(r,i);if(t.has(n)){throw new SyntaxError(`The "${n}" subprotocol is duplicated`)}t.add(n);r=i=-1}else{throw new SyntaxError(`Unexpected character at index ${s}`)}}if(r===-1||i!==-1){throw new SyntaxError("Unexpected end of input")}const o=e.slice(r,s);if(t.has(o)){throw new SyntaxError(`The "${o}" subprotocol is duplicated`)}t.add(o);return t}e.exports={parse:parse}},79360:(e,t,r)=>{"use strict";const{isUtf8:n}=r(14300);const{hasBlob:i}=r(31730);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function isValidStatusCode(e){return e>=1e3&&e<=1014&&e!==1004&&e!==1005&&e!==1006||e>=3e3&&e<=4999}function _isValidUTF8(e){const t=e.length;let r=0;while(r<t){if((e[r]&128)===0){r++}else if((e[r]&224)===192){if(r+1===t||(e[r+1]&192)!==128||(e[r]&254)===192){return false}r+=2}else if((e[r]&240)===224){if(r+2>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||e[r]===224&&(e[r+1]&224)===128||e[r]===237&&(e[r+1]&224)===160){return false}r+=3}else if((e[r]&248)===240){if(r+3>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||(e[r+3]&192)!==128||e[r]===240&&(e[r+1]&240)===128||e[r]===244&&e[r+1]>143||e[r]>244){return false}r+=4}else{return false}}return true}function isBlob(e){return i&&typeof e==="object"&&typeof e.arrayBuffer==="function"&&typeof e.type==="string"&&typeof e.stream==="function"&&(e[Symbol.toStringTag]==="Blob"||e[Symbol.toStringTag]==="File")}e.exports={isBlob:isBlob,isValidStatusCode:isValidStatusCode,isValidUTF8:_isValidUTF8,tokenChars:s};if(n){e.exports.isValidUTF8=function(e){return e.length<24?_isValidUTF8(e):n(e)}}else if(!process.env.WS_NO_UTF_8_VALIDATE){try{const t=r(6313);e.exports.isValidUTF8=function(e){return e.length<32?_isValidUTF8(e):t(e)}}catch(e){}}},26728:(e,t,r)=>{"use strict";const n=r(82361);const i=r(13685);const{Duplex:s}=r(68265);const{createHash:o}=r(6113);const a=r(36333);const c=r(45326);const u=r(45749);const d=r(94726);const{GUID:p,kWebSocket:m}=r(31730);const y=/^[+/0-9A-Za-z]{22}==$/;const g=0;const b=1;const v=2;class WebSocketServer extends n{constructor(e,t){super();e={allowSynchronousEvents:true,autoPong:true,maxPayload:100*1024*1024,skipUTF8Validation:false,perMessageDeflate:false,handleProtocols:null,clientTracking:true,verifyClient:null,noServer:false,backlog:null,server:null,host:null,path:null,port:null,WebSocket:d,...e};if(e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer){throw new TypeError('One and only one of the "port", "server", or "noServer" options '+"must be specified")}if(e.port!=null){this._server=i.createServer(((e,t)=>{const r=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"});t.end(r)}));this._server.listen(e.port,e.host,e.backlog,t)}else if(e.server){this._server=e.server}if(this._server){const e=this.emit.bind(this,"connection");this._removeListeners=addListeners(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}if(e.perMessageDeflate===true)e.perMessageDeflate={};if(e.clientTracking){this.clients=new Set;this._shouldEmitClose=false}this.options=e;this._state=g}address(){if(this.options.noServer){throw new Error('The server is operating in "noServer" mode')}if(!this._server)return null;return this._server.address()}close(e){if(this._state===v){if(e){this.once("close",(()=>{e(new Error("The server is not running"))}))}process.nextTick(emitClose,this);return}if(e)this.once("close",e);if(this._state===b)return;this._state=b;if(this.options.noServer||this.options.server){if(this._server){this._removeListeners();this._removeListeners=this._server=null}if(this.clients){if(!this.clients.size){process.nextTick(emitClose,this)}else{this._shouldEmitClose=true}}else{process.nextTick(emitClose,this)}}else{const e=this._server;this._removeListeners();this._removeListeners=this._server=null;e.close((()=>{emitClose(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");const r=t!==-1?e.url.slice(0,t):e.url;if(r!==this.options.path)return false}return true}handleUpgrade(e,t,r,n){t.on("error",socketOnError);const i=e.headers["sec-websocket-key"];const s=e.headers.upgrade;const o=+e.headers["sec-websocket-version"];if(e.method!=="GET"){const r="Invalid HTTP method";abortHandshakeOrEmitwsClientError(this,e,t,405,r);return}if(s===undefined||s.toLowerCase()!=="websocket"){const r="Invalid Upgrade header";abortHandshakeOrEmitwsClientError(this,e,t,400,r);return}if(i===undefined||!y.test(i)){const r="Missing or invalid Sec-WebSocket-Key header";abortHandshakeOrEmitwsClientError(this,e,t,400,r);return}if(o!==8&&o!==13){const r="Missing or invalid Sec-WebSocket-Version header";abortHandshakeOrEmitwsClientError(this,e,t,400,r);return}if(!this.shouldHandle(e)){abortHandshake(t,400);return}const d=e.headers["sec-websocket-protocol"];let p=new Set;if(d!==undefined){try{p=u.parse(d)}catch(r){const n="Invalid Sec-WebSocket-Protocol header";abortHandshakeOrEmitwsClientError(this,e,t,400,n);return}}const m=e.headers["sec-websocket-extensions"];const g={};if(this.options.perMessageDeflate&&m!==undefined){const r=new c(this.options.perMessageDeflate,true,this.options.maxPayload);try{const e=a.parse(m);if(e[c.extensionName]){r.accept(e[c.extensionName]);g[c.extensionName]=r}}catch(r){const n="Invalid or unacceptable Sec-WebSocket-Extensions header";abortHandshakeOrEmitwsClientError(this,e,t,400,n);return}}if(this.options.verifyClient){const s={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(s,((s,o,a,c)=>{if(!s){return abortHandshake(t,o||401,a,c)}this.completeUpgrade(g,i,p,e,t,r,n)}));return}if(!this.options.verifyClient(s))return abortHandshake(t,401)}this.completeUpgrade(g,i,p,e,t,r,n)}completeUpgrade(e,t,r,n,i,s,u){if(!i.readable||!i.writable)return i.destroy();if(i[m]){throw new Error("server.handleUpgrade() was called more than once with the same "+"socket, possibly due to a misconfiguration")}if(this._state>g)return abortHandshake(i,503);const d=o("sha1").update(t+p).digest("base64");const y=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${d}`];const b=new this.options.WebSocket(null,undefined,this.options);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;if(e){y.push(`Sec-WebSocket-Protocol: ${e}`);b._protocol=e}}if(e[c.extensionName]){const t=e[c.extensionName].params;const r=a.format({[c.extensionName]:[t]});y.push(`Sec-WebSocket-Extensions: ${r}`);b._extensions=e}this.emit("headers",y,n);i.write(y.concat("\r\n").join("\r\n"));i.removeListener("error",socketOnError);b.setSocket(i,s,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation});if(this.clients){this.clients.add(b);b.on("close",(()=>{this.clients.delete(b);if(this._shouldEmitClose&&!this.clients.size){process.nextTick(emitClose,this)}}))}u(b,n)}}e.exports=WebSocketServer;function addListeners(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function removeListeners(){for(const r of Object.keys(t)){e.removeListener(r,t[r])}}}function emitClose(e){e._state=v;e.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(e,t,r,n){r=r||i.STATUS_CODES[t];n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n};e.once("finish",e.destroy);e.end(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function abortHandshakeOrEmitwsClientError(e,t,r,n,i){if(e.listenerCount("wsClientError")){const n=new Error(i);Error.captureStackTrace(n,abortHandshakeOrEmitwsClientError);e.emit("wsClientError",n,r,t)}else{abortHandshake(r,n,i)}}},94726:(e,t,r)=>{"use strict";const n=r(82361);const i=r(95687);const s=r(13685);const o=r(41808);const a=r(24404);const{randomBytes:c,createHash:u}=r(6113);const{Duplex:d,Readable:p}=r(68265);const{URL:m}=r(57310);const y=r(45326);const g=r(82079);const b=r(22741);const{isBlob:v}=r(79360);const{BINARY_TYPES:w,EMPTY_BUFFER:_,GUID:C,kForOnEventAttribute:P,kListener:O,kStatusCode:E,kWebSocket:I,NOOP:k}=r(31730);const{EventTarget:{addEventListener:T,removeEventListener:x}}=r(36881);const{format:R,parse:B}=r(36333);const{toBuffer:N}=r(16408);const j=30*1e3;const L=Symbol("kAborted");const D=[8,13];const U=["CONNECTING","OPEN","CLOSING","CLOSED"];const F=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class WebSocket extends n{constructor(e,t,r){super();this._binaryType=w[0];this._closeCode=1006;this._closeFrameReceived=false;this._closeFrameSent=false;this._closeMessage=_;this._closeTimer=null;this._errorEmitted=false;this._extensions={};this._paused=false;this._protocol="";this._readyState=WebSocket.CONNECTING;this._receiver=null;this._sender=null;this._socket=null;if(e!==null){this._bufferedAmount=0;this._isServer=false;this._redirects=0;if(t===undefined){t=[]}else if(!Array.isArray(t)){if(typeof t==="object"&&t!==null){r=t;t=[]}else{t=[t]}}initAsClient(this,e,t,r)}else{this._autoPong=r.autoPong;this._isServer=true}}get binaryType(){return this._binaryType}set binaryType(e){if(!w.includes(e))return;this._binaryType=e;if(this._receiver)this._receiver._binaryType=e}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new g({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});const i=new b(e,this._extensions,r.generateMask);this._receiver=n;this._sender=i;this._socket=e;n[I]=this;i[I]=this;e[I]=this;n.on("conclude",receiverOnConclude);n.on("drain",receiverOnDrain);n.on("error",receiverOnError);n.on("message",receiverOnMessage);n.on("ping",receiverOnPing);n.on("pong",receiverOnPong);i.onerror=senderOnError;if(e.setTimeout)e.setTimeout(0);if(e.setNoDelay)e.setNoDelay();if(t.length>0)e.unshift(t);e.on("close",socketOnClose);e.on("data",socketOnData);e.on("end",socketOnEnd);e.on("error",socketOnError);this._readyState=WebSocket.OPEN;this.emit("open")}emitClose(){if(!this._socket){this._readyState=WebSocket.CLOSED;this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[y.extensionName]){this._extensions[y.extensionName].cleanup()}this._receiver.removeAllListeners();this._readyState=WebSocket.CLOSED;this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const e="WebSocket was closed before the connection was established";abortHandshake(this,this._req,e);return}if(this.readyState===WebSocket.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)){this._socket.end()}return}this._readyState=WebSocket.CLOSING;this._sender.close(e,t,!this._isServer,(e=>{if(e)return;this._closeFrameSent=true;if(this._closeFrameReceived||this._receiver._writableState.errorEmitted){this._socket.end()}}));setCloseTimer(this)}pause(){if(this.readyState===WebSocket.CONNECTING||this.readyState===WebSocket.CLOSED){return}this._paused=true;this._socket.pause()}ping(e,t,r){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof e==="function"){r=e;e=t=undefined}else if(typeof t==="function"){r=t;t=undefined}if(typeof e==="number")e=e.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}if(t===undefined)t=!this._isServer;this._sender.ping(e||_,t,r)}pong(e,t,r){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof e==="function"){r=e;e=t=undefined}else if(typeof t==="function"){r=t;t=undefined}if(typeof e==="number")e=e.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}if(t===undefined)t=!this._isServer;this._sender.pong(e||_,t,r)}resume(){if(this.readyState===WebSocket.CONNECTING||this.readyState===WebSocket.CLOSED){return}this._paused=false;if(!this._receiver._writableState.needDrain)this._socket.resume()}send(e,t,r){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof t==="function"){r=t;t={}}if(typeof e==="number")e=e.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}const n={binary:typeof e!=="string",mask:!this._isServer,compress:true,fin:true,...t};if(!this._extensions[y.extensionName]){n.compress=false}this._sender.send(e||_,n,r)}terminate(){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const e="WebSocket was closed before the connection was established";abortHandshake(this,this._req,e);return}if(this._socket){this._readyState=WebSocket.CLOSING;this._socket.destroy()}}}Object.defineProperty(WebSocket,"CONNECTING",{enumerable:true,value:U.indexOf("CONNECTING")});Object.defineProperty(WebSocket.prototype,"CONNECTING",{enumerable:true,value:U.indexOf("CONNECTING")});Object.defineProperty(WebSocket,"OPEN",{enumerable:true,value:U.indexOf("OPEN")});Object.defineProperty(WebSocket.prototype,"OPEN",{enumerable:true,value:U.indexOf("OPEN")});Object.defineProperty(WebSocket,"CLOSING",{enumerable:true,value:U.indexOf("CLOSING")});Object.defineProperty(WebSocket.prototype,"CLOSING",{enumerable:true,value:U.indexOf("CLOSING")});Object.defineProperty(WebSocket,"CLOSED",{enumerable:true,value:U.indexOf("CLOSED")});Object.defineProperty(WebSocket.prototype,"CLOSED",{enumerable:true,value:U.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(WebSocket.prototype,e,{enumerable:true})}));["open","error","close","message"].forEach((e=>{Object.defineProperty(WebSocket.prototype,`on${e}`,{enumerable:true,get(){for(const t of this.listeners(e)){if(t[P])return t[O]}return null},set(t){for(const t of this.listeners(e)){if(t[P]){this.removeListener(e,t);break}}if(typeof t!=="function")return;this.addEventListener(e,t,{[P]:true})}})}));WebSocket.prototype.addEventListener=T;WebSocket.prototype.removeEventListener=x;e.exports=WebSocket;function initAsClient(e,t,r,n){const o={allowSynchronousEvents:true,autoPong:true,protocolVersion:D[1],maxPayload:100*1024*1024,skipUTF8Validation:false,perMessageDeflate:true,followRedirects:false,maxRedirects:10,...n,socketPath:undefined,hostname:undefined,protocol:undefined,timeout:undefined,method:"GET",host:undefined,path:undefined,port:undefined};e._autoPong=o.autoPong;if(!D.includes(o.protocolVersion)){throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} `+`(supported versions: ${D.join(", ")})`)}let a;if(t instanceof m){a=t}else{try{a=new m(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}}if(a.protocol==="http:"){a.protocol="ws:"}else if(a.protocol==="https:"){a.protocol="wss:"}e._url=a.href;const d=a.protocol==="wss:";const p=a.protocol==="ws+unix:";let g;if(a.protocol!=="ws:"&&!d&&!p){g='The URL\'s protocol must be one of "ws:", "wss:", '+'"http:", "https", or "ws+unix:"'}else if(p&&!a.pathname){g="The URL's pathname is empty"}else if(a.hash){g="The URL contains a fragment identifier"}if(g){const t=new SyntaxError(g);if(e._redirects===0){throw t}else{emitErrorAndClose(e,t);return}}const b=d?443:80;const v=c(16).toString("base64");const w=d?i.request:s.request;const _=new Set;let P;o.createConnection=o.createConnection||(d?tlsConnect:netConnect);o.defaultPort=o.defaultPort||b;o.port=a.port||b;o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname;o.headers={...o.headers,"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":v,Connection:"Upgrade",Upgrade:"websocket"};o.path=a.pathname+a.search;o.timeout=o.handshakeTimeout;if(o.perMessageDeflate){P=new y(o.perMessageDeflate!==true?o.perMessageDeflate:{},false,o.maxPayload);o.headers["Sec-WebSocket-Extensions"]=R({[y.extensionName]:P.offer()})}if(r.length){for(const e of r){if(typeof e!=="string"||!F.test(e)||_.has(e)){throw new SyntaxError("An invalid or duplicated subprotocol was specified")}_.add(e)}o.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(o.origin){if(o.protocolVersion<13){o.headers["Sec-WebSocket-Origin"]=o.origin}else{o.headers.Origin=o.origin}}if(a.username||a.password){o.auth=`${a.username}:${a.password}`}if(p){const e=o.path.split(":");o.socketPath=e[0];o.path=e[1]}let O;if(o.followRedirects){if(e._redirects===0){e._originalIpc=p;e._originalSecure=d;e._originalHostOrSocketPath=p?o.socketPath:a.host;const t=n&&n.headers;n={...n,headers:{}};if(t){for(const[e,r]of Object.entries(t)){n.headers[e.toLowerCase()]=r}}}else if(e.listenerCount("redirect")===0){const t=p?e._originalIpc?o.socketPath===e._originalHostOrSocketPath:false:e._originalIpc?false:a.host===e._originalHostOrSocketPath;if(!t||e._originalSecure&&!d){delete o.headers.authorization;delete o.headers.cookie;if(!t)delete o.headers.host;o.auth=undefined}}if(o.auth&&!n.headers.authorization){n.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64")}O=e._req=w(o);if(e._redirects){e.emit("redirect",e.url,O)}}else{O=e._req=w(o)}if(o.timeout){O.on("timeout",(()=>{abortHandshake(e,O,"Opening handshake has timed out")}))}O.on("error",(t=>{if(O===null||O[L])return;O=e._req=null;emitErrorAndClose(e,t)}));O.on("response",(i=>{const s=i.headers.location;const a=i.statusCode;if(s&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects){abortHandshake(e,O,"Maximum redirects exceeded");return}O.abort();let i;try{i=new m(s,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${s}`);emitErrorAndClose(e,r);return}initAsClient(e,i,r,n)}else if(!e.emit("unexpected-response",O,i)){abortHandshake(e,O,`Unexpected server response: ${i.statusCode}`)}}));O.on("upgrade",((t,r,n)=>{e.emit("upgrade",t);if(e.readyState!==WebSocket.CONNECTING)return;O=e._req=null;const i=t.headers.upgrade;if(i===undefined||i.toLowerCase()!=="websocket"){abortHandshake(e,r,"Invalid Upgrade header");return}const s=u("sha1").update(v+C).digest("base64");if(t.headers["sec-websocket-accept"]!==s){abortHandshake(e,r,"Invalid Sec-WebSocket-Accept header");return}const a=t.headers["sec-websocket-protocol"];let c;if(a!==undefined){if(!_.size){c="Server sent a subprotocol but none was requested"}else if(!_.has(a)){c="Server sent an invalid subprotocol"}}else if(_.size){c="Server sent no subprotocol"}if(c){abortHandshake(e,r,c);return}if(a)e._protocol=a;const d=t.headers["sec-websocket-extensions"];if(d!==undefined){if(!P){const t="Server sent a Sec-WebSocket-Extensions header but no extension "+"was requested";abortHandshake(e,r,t);return}let t;try{t=B(d)}catch(t){const n="Invalid Sec-WebSocket-Extensions header";abortHandshake(e,r,n);return}const n=Object.keys(t);if(n.length!==1||n[0]!==y.extensionName){const t="Server indicated an extension that was not requested";abortHandshake(e,r,t);return}try{P.accept(t[y.extensionName])}catch(t){const n="Invalid Sec-WebSocket-Extensions header";abortHandshake(e,r,n);return}e._extensions[y.extensionName]=P}e.setSocket(r,n,{allowSynchronousEvents:o.allowSynchronousEvents,generateMask:o.generateMask,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})}));if(o.finishRequest){o.finishRequest(O,e)}else{O.end()}}function emitErrorAndClose(e,t){e._readyState=WebSocket.CLOSING;e._errorEmitted=true;e.emit("error",t);e.emitClose()}function netConnect(e){e.path=e.socketPath;return o.connect(e)}function tlsConnect(e){e.path=undefined;if(!e.servername&&e.servername!==""){e.servername=o.isIP(e.host)?"":e.host}return a.connect(e)}function abortHandshake(e,t,r){e._readyState=WebSocket.CLOSING;const n=new Error(r);Error.captureStackTrace(n,abortHandshake);if(t.setHeader){t[L]=true;t.abort();if(t.socket&&!t.socket.destroyed){t.socket.destroy()}process.nextTick(emitErrorAndClose,e,n)}else{t.destroy(n);t.once("error",e.emit.bind(e,"error"));t.once("close",e.emitClose.bind(e))}}function sendAfterClose(e,t,r){if(t){const r=v(t)?t.size:N(t).length;if(e._socket)e._sender._bufferedBytes+=r;else e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} `+`(${U[e.readyState]})`);process.nextTick(r,t)}}function receiverOnConclude(e,t){const r=this[I];r._closeFrameReceived=true;r._closeMessage=t;r._closeCode=e;if(r._socket[I]===undefined)return;r._socket.removeListener("data",socketOnData);process.nextTick(resume,r._socket);if(e===1005)r.close();else r.close(e,t)}function receiverOnDrain(){const e=this[I];if(!e.isPaused)e._socket.resume()}function receiverOnError(e){const t=this[I];if(t._socket[I]!==undefined){t._socket.removeListener("data",socketOnData);process.nextTick(resume,t._socket);t.close(e[E])}if(!t._errorEmitted){t._errorEmitted=true;t.emit("error",e)}}function receiverOnFinish(){this[I].emitClose()}function receiverOnMessage(e,t){this[I].emit("message",e,t)}function receiverOnPing(e){const t=this[I];if(t._autoPong)t.pong(e,!this._isServer,k);t.emit("ping",e)}function receiverOnPong(e){this[I].emit("pong",e)}function resume(e){e.resume()}function senderOnError(e){const t=this[I];if(t.readyState===WebSocket.CLOSED)return;if(t.readyState===WebSocket.OPEN){t._readyState=WebSocket.CLOSING;setCloseTimer(t)}this._socket.end();if(!t._errorEmitted){t._errorEmitted=true;t.emit("error",e)}}function setCloseTimer(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),j)}function socketOnClose(){const e=this[I];this.removeListener("close",socketOnClose);this.removeListener("data",socketOnData);this.removeListener("end",socketOnEnd);e._readyState=WebSocket.CLOSING;let t;if(!this._readableState.endEmitted&&!e._closeFrameReceived&&!e._receiver._writableState.errorEmitted&&(t=e._socket.read())!==null){e._receiver.write(t)}e._receiver.end();this[I]=undefined;clearTimeout(e._closeTimer);if(e._receiver._writableState.finished||e._receiver._writableState.errorEmitted){e.emitClose()}else{e._receiver.on("error",receiverOnFinish);e._receiver.on("finish",receiverOnFinish)}}function socketOnData(e){if(!this[I]._receiver.write(e)){this.pause()}}function socketOnEnd(){const e=this[I];e._readyState=WebSocket.CLOSING;e._receiver.end();this.end()}function socketOnError(){const e=this[I];this.removeListener("error",socketOnError);this.on("error",k);if(e){e._readyState=WebSocket.CLOSING;this.destroy()}}},66842:(e,t,r)=>{
/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */
var n=r(57147);var i=r(57310);var s=r(32081).spawn;e.exports=XMLHttpRequest;XMLHttpRequest.XMLHttpRequest=XMLHttpRequest;function XMLHttpRequest(e){"use strict";e=e||{};var t=this;var o=r(13685);var a=r(95687);var c;var u;var d={};var p=false;var m={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"};var y=Object.assign({},m);var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];var b=["TRACE","TRACK","CONNECT"];var v=false;var w=false;var _=false;var C={};this.UNSENT=0;this.OPENED=1;this.HEADERS_RECEIVED=2;this.LOADING=3;this.DONE=4;this.readyState=this.UNSENT;this.onreadystatechange=null;this.responseText="";this.responseXML="";this.status=null;this.statusText=null;var isAllowedHttpHeader=function(e){return p||e&&g.indexOf(e.toLowerCase())===-1};var isAllowedHttpMethod=function(e){return e&&b.indexOf(e)===-1};this.open=function(e,t,r,n,i){this.abort();w=false;_=false;if(!isAllowedHttpMethod(e)){throw new Error("SecurityError: Request method not allowed")}d={method:e,url:t.toString(),async:typeof r!=="boolean"?true:r,user:n||null,password:i||null};setState(this.OPENED)};this.setDisableHeaderCheck=function(e){p=e};this.setRequestHeader=function(e,t){if(this.readyState!=this.OPENED){throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN")}if(!isAllowedHttpHeader(e)){console.warn('Refused to set unsafe header "'+e+'"');return false}if(v){throw new Error("INVALID_STATE_ERR: send flag is true")}y[e]=t;return true};this.getResponseHeader=function(e){if(typeof e==="string"&&this.readyState>this.OPENED&&u.headers[e.toLowerCase()]&&!w){return u.headers[e.toLowerCase()]}return null};this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||w){return""}var e="";for(var t in u.headers){if(t!=="set-cookie"&&t!=="set-cookie2"){e+=t+": "+u.headers[t]+"\r\n"}}return e.substr(0,e.length-2)};this.getRequestHeader=function(e){if(typeof e==="string"&&y[e]){return y[e]}return""};this.send=function(r){if(this.readyState!=this.OPENED){throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called")}if(v){throw new Error("INVALID_STATE_ERR: send has already been called")}var p=false,m=false;var g=i.parse(d.url);var b;switch(g.protocol){case"https:":p=true;case"http:":b=g.hostname;break;case"file:":m=true;break;case undefined:case"":b="localhost";break;default:throw new Error("Protocol not supported.")}if(m){if(d.method!=="GET"){throw new Error("XMLHttpRequest: Only GET method is supported")}if(d.async){n.readFile(unescape(g.pathname),"utf8",(function(e,r){if(e){t.handleError(e)}else{t.status=200;t.responseText=r;setState(t.DONE)}}))}else{try{this.responseText=n.readFileSync(unescape(g.pathname),"utf8");this.status=200;setState(t.DONE)}catch(e){this.handleError(e)}}return}var _=g.port||(p?443:80);var C=g.pathname+(g.search?g.search:"");y["Host"]=b;if(!(p&&_===443||_===80)){y["Host"]+=":"+g.port}if(d.user){if(typeof d.password=="undefined"){d.password=""}var P=new Buffer(d.user+":"+d.password);y["Authorization"]="Basic "+P.toString("base64")}if(d.method==="GET"||d.method==="HEAD"){r=null}else if(r){y["Content-Length"]=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r);if(!y["Content-Type"]){y["Content-Type"]="text/plain;charset=UTF-8"}}else if(d.method==="POST"){y["Content-Length"]=0}var O=e.agent||false;var E={host:b,port:_,path:C,method:d.method,headers:y,agent:O};if(p){E.pfx=e.pfx;E.key=e.key;E.passphrase=e.passphrase;E.cert=e.cert;E.ca=e.ca;E.ciphers=e.ciphers;E.rejectUnauthorized=e.rejectUnauthorized===false?false:true}w=false;if(d.async){var I=p?a.request:o.request;v=true;t.dispatchEvent("readystatechange");var responseHandler=function(r){u=r;if(u.statusCode===302||u.statusCode===303||u.statusCode===307){d.url=u.headers.location;var n=i.parse(d.url);b=n.hostname;var s={hostname:n.hostname,port:n.port,path:n.path,method:u.statusCode===303?"GET":d.method,headers:y};if(p){s.pfx=e.pfx;s.key=e.key;s.passphrase=e.passphrase;s.cert=e.cert;s.ca=e.ca;s.ciphers=e.ciphers;s.rejectUnauthorized=e.rejectUnauthorized===false?false:true}c=I(s,responseHandler).on("error",errorHandler);c.end();return}if(u&&u.setEncoding){u.setEncoding("utf8")}setState(t.HEADERS_RECEIVED);t.status=u.statusCode;u.on("data",(function(e){if(e){t.responseText+=e}if(v){setState(t.LOADING)}}));u.on("end",(function(){if(v){v=false;setState(t.DONE)}}));u.on("error",(function(e){t.handleError(e)}))};var errorHandler=function(e){t.handleError(e)};c=I(E,responseHandler).on("error",errorHandler);if(r){c.write(r)}c.end();t.dispatchEvent("loadstart")}else{var k=".node-xmlhttprequest-content-"+process.pid;var T=".node-xmlhttprequest-sync-"+process.pid;n.writeFileSync(T,"","utf8");var x="var http = require('http'), https = require('https'), fs = require('fs');"+"var doRequest = http"+(p?"s":"")+".request;"+"var options = "+JSON.stringify(E)+";"+"var responseText = '';"+"var req = doRequest(options, function(response) {"+"response.setEncoding('utf8');"+"response.on('data', function(chunk) {"+"  responseText += chunk;"+"});"+"response.on('end', function() {"+"fs.writeFileSync('"+k+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');"+"fs.unlinkSync('"+T+"');"+"});"+"response.on('error', function(error) {"+"fs.writeFileSync('"+k+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');"+"fs.unlinkSync('"+T+"');"+"});"+"}).on('error', function(error) {"+"fs.writeFileSync('"+k+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');"+"fs.unlinkSync('"+T+"');"+"});"+(r?"req.write('"+JSON.stringify(r).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();";var R=s(process.argv[0],["-e",x]);var B;while(n.existsSync(T)){}t.responseText=n.readFileSync(k,"utf8");R.stdin.end();n.unlinkSync(k);if(t.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var N=t.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,"");t.handleError(N,503)}else{t.status=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");t.responseText=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1");setState(t.DONE)}}};this.handleError=function(e,t){this.status=t||0;this.statusText=e;this.responseText=e.stack;w=true;setState(this.DONE)};this.abort=function(){if(c){c.abort();c=null}y=Object.assign({},m);this.responseText="";this.responseXML="";w=_=true;if(this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||v)&&this.readyState!==this.DONE){v=false;setState(this.DONE)}this.readyState=this.UNSENT};this.addEventListener=function(e,t){if(!(e in C)){C[e]=[]}C[e].push(t)};this.removeEventListener=function(e,t){if(e in C){C[e]=C[e].filter((function(e){return e!==t}))}};this.dispatchEvent=function(e){if(typeof t["on"+e]==="function"){if(this.readyState===this.DONE)setImmediate((function(){t["on"+e]()}));else t["on"+e]()}if(e in C){for(let r=0,n=C[e].length;r<n;r++){if(this.readyState===this.DONE)setImmediate((function(){C[e][r].call(t)}));else C[e][r].call(t)}}};var setState=function(e){if(t.readyState===e||t.readyState===t.UNSENT&&_)return;t.readyState=e;if(d.async||t.readyState<t.OPENED||t.readyState===t.DONE){t.dispatchEvent("readystatechange")}if(t.readyState===t.DONE){let e;if(_)e="abort";else if(w)e="error";else e="load";t.dispatchEvent(e);t.dispatchEvent("loadend")}}}},73418:e=>{"use strict";var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r=64,n={},i=0,s=0,o;function encode(e){var n="";do{n=t[e%r]+n;e=Math.floor(e/r)}while(e>0);return n}function decode(e){var t=0;for(s=0;s<e.length;s++){t=t*r+n[e.charAt(s)]}return t}function yeast(){var e=encode(+new Date);if(e!==o)return i=0,o=e;return e+"."+encode(i++)}for(;s<r;s++)n[t[s]]=s;yeast.encode=encode;yeast.decode=decode;e.exports=yeast},40521:module=>{module.exports=eval("require")("bufferutil")},26183:module=>{module.exports=eval("require")("osx-temperature-sensor")},68337:module=>{module.exports=eval("require")("supports-color")},6313:module=>{module.exports=eval("require")("utf-8-validate")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},71891:e=>{"use strict";e.exports=require("dgram")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},11215:e=>{"use strict";e.exports=require("node:dgram")},15673:e=>{"use strict";e.exports=require("node:events")},87503:e=>{"use strict";e.exports=require("node:net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},77282:e=>{"use strict";e.exports=require("process")},14521:e=>{"use strict";e.exports=require("readline")},68265:e=>{"use strict";e.exports=require("stream")},68670:e=>{"use strict";e.exports=require("timers/promises")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},80324:e=>{function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=_interopRequireDefault,e.exports.__esModule=true,e.exports["default"]=e.exports},70769:e=>{function _typeof(t){"@babel/helpers - typeof";return e.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=true,e.exports["default"]=e.exports,_typeof(t)}e.exports=_typeof,e.exports.__esModule=true,e.exports["default"]=e.exports},74719:e=>{var t=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;
/**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   */var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(e,t,r){this.low=e|0;this.high=t|0;this.unsigned=!!r}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:true});function isLong(e){return(e&&e["__isLong__"])===true}function ctz32(e){var t=Math.clz32(e&-e);return e?31-t:t}Long.isLong=isLong;var r={};var n={};function fromInt(e,t){var i,s,o;if(t){e>>>=0;if(o=0<=e&&e<256){s=n[e];if(s)return s}i=fromBits(e,0,true);if(o)n[e]=i;return i}else{e|=0;if(o=-128<=e&&e<128){s=r[e];if(s)return s}i=fromBits(e,e<0?-1:0,false);if(o)r[e]=i;return i}}Long.fromInt=fromInt;function fromNumber(e,t){if(isNaN(e))return t?m:p;if(t){if(e<0)return m;if(e>=c)return w}else{if(e<=-u)return _;if(e+1>=u)return v}if(e<0)return fromNumber(-e,t).neg();return fromBits(e%a|0,e/a|0,t)}Long.fromNumber=fromNumber;function fromBits(e,t,r){return new Long(e,t,r)}Long.fromBits=fromBits;var i=Math.pow;function fromString(e,t,r){if(e.length===0)throw Error("empty string");if(typeof t==="number"){r=t;t=false}else{t=!!t}if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t?m:p;r=r||10;if(r<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");else if(n===0){return fromString(e.substring(1),t,r).neg()}var s=fromNumber(i(r,8));var o=p;for(var a=0;a<e.length;a+=8){var c=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+c),r);if(c<8){var d=fromNumber(i(r,c));o=o.mul(d).add(fromNumber(u))}else{o=o.mul(s);o=o.add(fromNumber(u))}}o.unsigned=t;return o}Long.fromString=fromString;function fromValue(e,t){if(typeof e==="number")return fromNumber(e,t);if(typeof e==="string")return fromString(e,t);return fromBits(e.low,e.high,typeof t==="boolean"?t:e.unsigned)}Long.fromValue=fromValue;var s=1<<16;var o=1<<24;var a=s*s;var c=a*a;var u=c/2;var d=fromInt(o);var p=fromInt(0);Long.ZERO=p;var m=fromInt(0,true);Long.UZERO=m;var y=fromInt(1);Long.ONE=y;var g=fromInt(1,true);Long.UONE=g;var b=fromInt(-1);Long.NEG_ONE=b;var v=fromBits(4294967295|0,2147483647|0,false);Long.MAX_VALUE=v;var w=fromBits(4294967295|0,4294967295|0,true);Long.MAX_UNSIGNED_VALUE=w;var _=fromBits(0,2147483648|0,false);Long.MIN_VALUE=_;var C=Long.prototype;C.toInt=function toInt(){return this.unsigned?this.low>>>0:this.low};C.toNumber=function toNumber(){if(this.unsigned)return(this.high>>>0)*a+(this.low>>>0);return this.high*a+(this.low>>>0)};C.toString=function toString(e){e=e||10;if(e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=fromNumber(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}else return"-"+this.neg().toString(e)}var s=fromNumber(i(e,6),this.unsigned),o=this;var a="";while(true){var c=o.div(s),u=o.sub(c.mul(s)).toInt()>>>0,d=u.toString(e);o=c;if(o.isZero())return d+a;else{while(d.length<6)d="0"+d;a=""+d+a}}};C.getHighBits=function getHighBits(){return this.high};C.getHighBitsUnsigned=function getHighBitsUnsigned(){return this.high>>>0};C.getLowBits=function getLowBits(){return this.low};C.getLowBitsUnsigned=function getLowBitsUnsigned(){return this.low>>>0};C.getNumBitsAbs=function getNumBitsAbs(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();var e=this.high!=0?this.high:this.low;for(var t=31;t>0;t--)if((e&1<<t)!=0)break;return this.high!=0?t+33:t+1};C.isZero=function isZero(){return this.high===0&&this.low===0};C.eqz=C.isZero;C.isNegative=function isNegative(){return!this.unsigned&&this.high<0};C.isPositive=function isPositive(){return this.unsigned||this.high>=0};C.isOdd=function isOdd(){return(this.low&1)===1};C.isEven=function isEven(){return(this.low&1)===0};C.equals=function equals(e){if(!isLong(e))e=fromValue(e);if(this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1)return false;return this.high===e.high&&this.low===e.low};C.eq=C.equals;C.notEquals=function notEquals(e){return!this.eq(e)};C.neq=C.notEquals;C.ne=C.notEquals;C.lessThan=function lessThan(e){return this.comp(e)<0};C.lt=C.lessThan;C.lessThanOrEqual=function lessThanOrEqual(e){return this.comp(e)<=0};C.lte=C.lessThanOrEqual;C.le=C.lessThanOrEqual;C.greaterThan=function greaterThan(e){return this.comp(e)>0};C.gt=C.greaterThan;C.greaterThanOrEqual=function greaterThanOrEqual(e){return this.comp(e)>=0};C.gte=C.greaterThanOrEqual;C.ge=C.greaterThanOrEqual;C.compare=function compare(e){if(!isLong(e))e=fromValue(e);if(this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();if(t&&!r)return-1;if(!t&&r)return 1;if(!this.unsigned)return this.sub(e).isNegative()?-1:1;return e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1};C.comp=C.compare;C.negate=function negate(){if(!this.unsigned&&this.eq(_))return _;return this.not().add(y)};C.neg=C.negate;C.add=function add(e){if(!isLong(e))e=fromValue(e);var t=this.high>>>16;var r=this.high&65535;var n=this.low>>>16;var i=this.low&65535;var s=e.high>>>16;var o=e.high&65535;var a=e.low>>>16;var c=e.low&65535;var u=0,d=0,p=0,m=0;m+=i+c;p+=m>>>16;m&=65535;p+=n+a;d+=p>>>16;p&=65535;d+=r+o;u+=d>>>16;d&=65535;u+=t+s;u&=65535;return fromBits(p<<16|m,u<<16|d,this.unsigned)};C.subtract=function subtract(e){if(!isLong(e))e=fromValue(e);return this.add(e.neg())};C.sub=C.subtract;C.multiply=function multiply(e){if(this.isZero())return this;if(!isLong(e))e=fromValue(e);if(t){var r=t["mul"](this.low,this.high,e.low,e.high);return fromBits(r,t["get_high"](),this.unsigned)}if(e.isZero())return this.unsigned?m:p;if(this.eq(_))return e.isOdd()?_:p;if(e.eq(_))return this.isOdd()?_:p;if(this.isNegative()){if(e.isNegative())return this.neg().mul(e.neg());else return this.neg().mul(e).neg()}else if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(d)&&e.lt(d))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16;var i=this.high&65535;var s=this.low>>>16;var o=this.low&65535;var a=e.high>>>16;var c=e.high&65535;var u=e.low>>>16;var y=e.low&65535;var g=0,b=0,v=0,w=0;w+=o*y;v+=w>>>16;w&=65535;v+=s*y;b+=v>>>16;v&=65535;v+=o*u;b+=v>>>16;v&=65535;b+=i*y;g+=b>>>16;b&=65535;b+=s*u;g+=b>>>16;b&=65535;b+=o*c;g+=b>>>16;b&=65535;g+=n*y+i*u+s*c+o*a;g&=65535;return fromBits(v<<16|w,g<<16|b,this.unsigned)};C.mul=C.multiply;C.divide=function divide(e){if(!isLong(e))e=fromValue(e);if(e.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1){return this}var r=(this.unsigned?t["div_u"]:t["div_s"])(this.low,this.high,e.low,e.high);return fromBits(r,t["get_high"](),this.unsigned)}if(this.isZero())return this.unsigned?m:p;var n,s,o;if(!this.unsigned){if(this.eq(_)){if(e.eq(y)||e.eq(b))return _;else if(e.eq(_))return y;else{var a=this.shr(1);n=a.div(e).shl(1);if(n.eq(p)){return e.isNegative()?y:b}else{s=this.sub(e.mul(n));o=n.add(s.div(e));return o}}}else if(e.eq(_))return this.unsigned?m:p;if(this.isNegative()){if(e.isNegative())return this.neg().div(e.neg());return this.neg().div(e).neg()}else if(e.isNegative())return this.div(e.neg()).neg();o=p}else{if(!e.unsigned)e=e.toUnsigned();if(e.gt(this))return m;if(e.gt(this.shru(1)))return g;o=m}s=this;while(s.gte(e)){n=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));var c=Math.ceil(Math.log(n)/Math.LN2),u=c<=48?1:i(2,c-48),d=fromNumber(n),v=d.mul(e);while(v.isNegative()||v.gt(s)){n-=u;d=fromNumber(n,this.unsigned);v=d.mul(e)}if(d.isZero())d=y;o=o.add(d);s=s.sub(v)}return o};C.div=C.divide;C.modulo=function modulo(e){if(!isLong(e))e=fromValue(e);if(t){var r=(this.unsigned?t["rem_u"]:t["rem_s"])(this.low,this.high,e.low,e.high);return fromBits(r,t["get_high"](),this.unsigned)}return this.sub(this.div(e).mul(e))};C.mod=C.modulo;C.rem=C.modulo;C.not=function not(){return fromBits(~this.low,~this.high,this.unsigned)};C.countLeadingZeros=function countLeadingZeros(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};C.clz=C.countLeadingZeros;C.countTrailingZeros=function countTrailingZeros(){return this.low?ctz32(this.low):ctz32(this.high)+32};C.ctz=C.countTrailingZeros;C.and=function and(e){if(!isLong(e))e=fromValue(e);return fromBits(this.low&e.low,this.high&e.high,this.unsigned)};C.or=function or(e){if(!isLong(e))e=fromValue(e);return fromBits(this.low|e.low,this.high|e.high,this.unsigned)};C.xor=function xor(e){if(!isLong(e))e=fromValue(e);return fromBits(this.low^e.low,this.high^e.high,this.unsigned)};C.shiftLeft=function shiftLeft(e){if(isLong(e))e=e.toInt();if((e&=63)===0)return this;else if(e<32)return fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned);else return fromBits(0,this.low<<e-32,this.unsigned)};C.shl=C.shiftLeft;C.shiftRight=function shiftRight(e){if(isLong(e))e=e.toInt();if((e&=63)===0)return this;else if(e<32)return fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned);else return fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};C.shr=C.shiftRight;C.shiftRightUnsigned=function shiftRightUnsigned(e){if(isLong(e))e=e.toInt();if((e&=63)===0)return this;if(e<32)return fromBits(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned);if(e===32)return fromBits(this.high,0,this.unsigned);return fromBits(this.high>>>e-32,0,this.unsigned)};C.shru=C.shiftRightUnsigned;C.shr_u=C.shiftRightUnsigned;C.rotateLeft=function rotateLeft(e){var t;if(isLong(e))e=e.toInt();if((e&=63)===0)return this;if(e===32)return fromBits(this.high,this.low,this.unsigned);if(e<32){t=32-e;return fromBits(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)}e-=32;t=32-e;return fromBits(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)};C.rotl=C.rotateLeft;C.rotateRight=function rotateRight(e){var t;if(isLong(e))e=e.toInt();if((e&=63)===0)return this;if(e===32)return fromBits(this.high,this.low,this.unsigned);if(e<32){t=32-e;return fromBits(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)}e-=32;t=32-e;return fromBits(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)};C.rotr=C.rotateRight;C.toSigned=function toSigned(){if(!this.unsigned)return this;return fromBits(this.low,this.high,false)};C.toUnsigned=function toUnsigned(){if(this.unsigned)return this;return fromBits(this.low,this.high,true)};C.toBytes=function toBytes(e){return e?this.toBytesLE():this.toBytesBE()};C.toBytesLE=function toBytesLE(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};C.toBytesBE=function toBytesBE(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Long.fromBytes=function fromBytes(e,t,r){return r?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)};Long.fromBytesLE=function fromBytesLE(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Long.fromBytesBE=function fromBytesBE(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var P=Long;e.default=P;return"default"in e?e.default:e}({});if(typeof define==="function"&&define.amd)define([],(function(){return t}));else if(true)e.exports=t},67873:()=>{
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var e;(function(e){(function(t){var r=typeof globalThis==="object"?globalThis:typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:sloppyModeThis();var n=makeExporter(e);if(typeof r.Reflect!=="undefined"){n=makeExporter(r.Reflect,n)}t(n,r);if(typeof r.Reflect==="undefined"){r.Reflect=e}function makeExporter(e,t){return function(r,n){Object.defineProperty(e,r,{configurable:true,writable:true,value:n});if(t)t(r,n)}}function functionThis(){try{return Function("return this;")()}catch(e){}}function indirectEvalThis(){try{return(void 0,eval)("(function() { return this; })()")}catch(e){}}function sloppyModeThis(){return functionThis()||indirectEvalThis()}})((function(e,t){var r=Object.prototype.hasOwnProperty;var n=typeof Symbol==="function";var i=n&&typeof Symbol.toPrimitive!=="undefined"?Symbol.toPrimitive:"@@toPrimitive";var s=n&&typeof Symbol.iterator!=="undefined"?Symbol.iterator:"@@iterator";var o=typeof Object.create==="function";var a={__proto__:[]}instanceof Array;var c=!o&&!a;var u={create:o?function(){return MakeDictionary(Object.create(null))}:a?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})},has:c?function(e,t){return r.call(e,t)}:function(e,t){return t in e},get:c?function(e,t){return r.call(e,t)?e[t]:undefined}:function(e,t){return e[t]}};var d=Object.getPrototypeOf(Function);var p=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:CreateMapPolyfill();var m=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:CreateSetPolyfill();var y=typeof WeakMap==="function"?WeakMap:CreateWeakMapPolyfill();var g=n?Symbol.for("@reflect-metadata:registry"):undefined;var b=GetOrCreateMetadataRegistry();var v=CreateMetadataProvider(b);function decorate(e,t,r,n){if(!IsUndefined(r)){if(!IsArray(e))throw new TypeError;if(!IsObject(t))throw new TypeError;if(!IsObject(n)&&!IsUndefined(n)&&!IsNull(n))throw new TypeError;if(IsNull(n))n=undefined;r=ToPropertyKey(r);return DecorateProperty(e,t,r,n)}else{if(!IsArray(e))throw new TypeError;if(!IsConstructor(t))throw new TypeError;return DecorateConstructor(e,t)}}e("decorate",decorate);function metadata(e,t){function decorator(r,n){if(!IsObject(r))throw new TypeError;if(!IsUndefined(n)&&!IsPropertyKey(n))throw new TypeError;OrdinaryDefineOwnMetadata(e,t,r,n)}return decorator}e("metadata",metadata);function defineMetadata(e,t,r,n){if(!IsObject(r))throw new TypeError;if(!IsUndefined(n))n=ToPropertyKey(n);return OrdinaryDefineOwnMetadata(e,t,r,n)}e("defineMetadata",defineMetadata);function hasMetadata(e,t,r){if(!IsObject(t))throw new TypeError;if(!IsUndefined(r))r=ToPropertyKey(r);return OrdinaryHasMetadata(e,t,r)}e("hasMetadata",hasMetadata);function hasOwnMetadata(e,t,r){if(!IsObject(t))throw new TypeError;if(!IsUndefined(r))r=ToPropertyKey(r);return OrdinaryHasOwnMetadata(e,t,r)}e("hasOwnMetadata",hasOwnMetadata);function getMetadata(e,t,r){if(!IsObject(t))throw new TypeError;if(!IsUndefined(r))r=ToPropertyKey(r);return OrdinaryGetMetadata(e,t,r)}e("getMetadata",getMetadata);function getOwnMetadata(e,t,r){if(!IsObject(t))throw new TypeError;if(!IsUndefined(r))r=ToPropertyKey(r);return OrdinaryGetOwnMetadata(e,t,r)}e("getOwnMetadata",getOwnMetadata);function getMetadataKeys(e,t){if(!IsObject(e))throw new TypeError;if(!IsUndefined(t))t=ToPropertyKey(t);return OrdinaryMetadataKeys(e,t)}e("getMetadataKeys",getMetadataKeys);function getOwnMetadataKeys(e,t){if(!IsObject(e))throw new TypeError;if(!IsUndefined(t))t=ToPropertyKey(t);return OrdinaryOwnMetadataKeys(e,t)}e("getOwnMetadataKeys",getOwnMetadataKeys);function deleteMetadata(e,t,r){if(!IsObject(t))throw new TypeError;if(!IsUndefined(r))r=ToPropertyKey(r);if(!IsObject(t))throw new TypeError;if(!IsUndefined(r))r=ToPropertyKey(r);var n=GetMetadataProvider(t,r,false);if(IsUndefined(n))return false;return n.OrdinaryDeleteMetadata(e,t,r)}e("deleteMetadata",deleteMetadata);function DecorateConstructor(e,t){for(var r=e.length-1;r>=0;--r){var n=e[r];var i=n(t);if(!IsUndefined(i)&&!IsNull(i)){if(!IsConstructor(i))throw new TypeError;t=i}}return t}function DecorateProperty(e,t,r,n){for(var i=e.length-1;i>=0;--i){var s=e[i];var o=s(t,r,n);if(!IsUndefined(o)&&!IsNull(o)){if(!IsObject(o))throw new TypeError;n=o}}return n}function OrdinaryHasMetadata(e,t,r){var n=OrdinaryHasOwnMetadata(e,t,r);if(n)return true;var i=OrdinaryGetPrototypeOf(t);if(!IsNull(i))return OrdinaryHasMetadata(e,i,r);return false}function OrdinaryHasOwnMetadata(e,t,r){var n=GetMetadataProvider(t,r,false);if(IsUndefined(n))return false;return ToBoolean(n.OrdinaryHasOwnMetadata(e,t,r))}function OrdinaryGetMetadata(e,t,r){var n=OrdinaryHasOwnMetadata(e,t,r);if(n)return OrdinaryGetOwnMetadata(e,t,r);var i=OrdinaryGetPrototypeOf(t);if(!IsNull(i))return OrdinaryGetMetadata(e,i,r);return undefined}function OrdinaryGetOwnMetadata(e,t,r){var n=GetMetadataProvider(t,r,false);if(IsUndefined(n))return;return n.OrdinaryGetOwnMetadata(e,t,r)}function OrdinaryDefineOwnMetadata(e,t,r,n){var i=GetMetadataProvider(r,n,true);i.OrdinaryDefineOwnMetadata(e,t,r,n)}function OrdinaryMetadataKeys(e,t){var r=OrdinaryOwnMetadataKeys(e,t);var n=OrdinaryGetPrototypeOf(e);if(n===null)return r;var i=OrdinaryMetadataKeys(n,t);if(i.length<=0)return r;if(r.length<=0)return i;var s=new m;var o=[];for(var a=0,c=r;a<c.length;a++){var u=c[a];var d=s.has(u);if(!d){s.add(u);o.push(u)}}for(var p=0,y=i;p<y.length;p++){var u=y[p];var d=s.has(u);if(!d){s.add(u);o.push(u)}}return o}function OrdinaryOwnMetadataKeys(e,t){var r=GetMetadataProvider(e,t,false);if(!r){return[]}return r.OrdinaryOwnMetadataKeys(e,t)}function Type(e){if(e===null)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return e===null?1:6;default:return 6}}function IsUndefined(e){return e===undefined}function IsNull(e){return e===null}function IsSymbol(e){return typeof e==="symbol"}function IsObject(e){return typeof e==="object"?e!==null:typeof e==="function"}function ToPrimitive(e,t){switch(Type(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var r=t===3?"string":t===5?"number":"default";var n=GetMethod(e,i);if(n!==undefined){var s=n.call(e,r);if(IsObject(s))throw new TypeError;return s}return OrdinaryToPrimitive(e,r==="default"?"number":r)}function OrdinaryToPrimitive(e,t){if(t==="string"){var r=e.toString;if(IsCallable(r)){var n=r.call(e);if(!IsObject(n))return n}var i=e.valueOf;if(IsCallable(i)){var n=i.call(e);if(!IsObject(n))return n}}else{var i=e.valueOf;if(IsCallable(i)){var n=i.call(e);if(!IsObject(n))return n}var s=e.toString;if(IsCallable(s)){var n=s.call(e);if(!IsObject(n))return n}}throw new TypeError}function ToBoolean(e){return!!e}function ToString(e){return""+e}function ToPropertyKey(e){var t=ToPrimitive(e,3);if(IsSymbol(t))return t;return ToString(t)}function IsArray(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:Object.prototype.toString.call(e)==="[object Array]"}function IsCallable(e){return typeof e==="function"}function IsConstructor(e){return typeof e==="function"}function IsPropertyKey(e){switch(Type(e)){case 3:return true;case 4:return true;default:return false}}function SameValueZero(e,t){return e===t||e!==e&&t!==t}function GetMethod(e,t){var r=e[t];if(r===undefined||r===null)return undefined;if(!IsCallable(r))throw new TypeError;return r}function GetIterator(e){var t=GetMethod(e,s);if(!IsCallable(t))throw new TypeError;var r=t.call(e);if(!IsObject(r))throw new TypeError;return r}function IteratorValue(e){return e.value}function IteratorStep(e){var t=e.next();return t.done?false:t}function IteratorClose(e){var t=e["return"];if(t)t.call(e)}function OrdinaryGetPrototypeOf(e){var t=Object.getPrototypeOf(e);if(typeof e!=="function"||e===d)return t;if(t!==d)return t;var r=e.prototype;var n=r&&Object.getPrototypeOf(r);if(n==null||n===Object.prototype)return t;var i=n.constructor;if(typeof i!=="function")return t;if(i===e)return t;return i}function CreateMetadataRegistry(){var e;if(!IsUndefined(g)&&typeof t.Reflect!=="undefined"&&!(g in t.Reflect)&&typeof t.Reflect.defineMetadata==="function"){e=CreateFallbackProvider(t.Reflect)}var r;var n;var i;var s=new y;var o={registerProvider:registerProvider,getProvider:getProvider,setProvider:setProvider};return o;function registerProvider(t){if(!Object.isExtensible(o)){throw new Error("Cannot add provider to a frozen registry.")}switch(true){case e===t:break;case IsUndefined(r):r=t;break;case r===t:break;case IsUndefined(n):n=t;break;case n===t:break;default:if(i===undefined)i=new m;i.add(t);break}}function getProviderNoCache(t,s){if(!IsUndefined(r)){if(r.isProviderFor(t,s))return r;if(!IsUndefined(n)){if(n.isProviderFor(t,s))return r;if(!IsUndefined(i)){var o=GetIterator(i);while(true){var a=IteratorStep(o);if(!a){return undefined}var c=IteratorValue(a);if(c.isProviderFor(t,s)){IteratorClose(o);return c}}}}}if(!IsUndefined(e)&&e.isProviderFor(t,s)){return e}return undefined}function getProvider(e,t){var r=s.get(e);var n;if(!IsUndefined(r)){n=r.get(t)}if(!IsUndefined(n)){return n}n=getProviderNoCache(e,t);if(!IsUndefined(n)){if(IsUndefined(r)){r=new p;s.set(e,r)}r.set(t,n)}return n}function hasProvider(e){if(IsUndefined(e))throw new TypeError;return r===e||n===e||!IsUndefined(i)&&i.has(e)}function setProvider(e,t,r){if(!hasProvider(r)){throw new Error("Metadata provider not registered.")}var n=getProvider(e,t);if(n!==r){if(!IsUndefined(n)){return false}var i=s.get(e);if(IsUndefined(i)){i=new p;s.set(e,i)}i.set(t,r)}return true}}function GetOrCreateMetadataRegistry(){var e;if(!IsUndefined(g)&&IsObject(t.Reflect)&&Object.isExtensible(t.Reflect)){e=t.Reflect[g]}if(IsUndefined(e)){e=CreateMetadataRegistry()}if(!IsUndefined(g)&&IsObject(t.Reflect)&&Object.isExtensible(t.Reflect)){Object.defineProperty(t.Reflect,g,{enumerable:false,configurable:false,writable:false,value:e})}return e}function CreateMetadataProvider(e){var t=new y;var r={isProviderFor:function(e,r){var n=t.get(e);if(IsUndefined(n))return false;return n.has(r)},OrdinaryDefineOwnMetadata:OrdinaryDefineOwnMetadata,OrdinaryHasOwnMetadata:OrdinaryHasOwnMetadata,OrdinaryGetOwnMetadata:OrdinaryGetOwnMetadata,OrdinaryOwnMetadataKeys:OrdinaryOwnMetadataKeys,OrdinaryDeleteMetadata:OrdinaryDeleteMetadata};b.registerProvider(r);return r;function GetOrCreateMetadataMap(n,i,s){var o=t.get(n);var a=false;if(IsUndefined(o)){if(!s)return undefined;o=new p;t.set(n,o);a=true}var c=o.get(i);if(IsUndefined(c)){if(!s)return undefined;c=new p;o.set(i,c);if(!e.setProvider(n,i,r)){o.delete(i);if(a){t.delete(n)}throw new Error("Wrong provider for target.")}}return c}function OrdinaryHasOwnMetadata(e,t,r){var n=GetOrCreateMetadataMap(t,r,false);if(IsUndefined(n))return false;return ToBoolean(n.has(e))}function OrdinaryGetOwnMetadata(e,t,r){var n=GetOrCreateMetadataMap(t,r,false);if(IsUndefined(n))return undefined;return n.get(e)}function OrdinaryDefineOwnMetadata(e,t,r,n){var i=GetOrCreateMetadataMap(r,n,true);i.set(e,t)}function OrdinaryOwnMetadataKeys(e,t){var r=[];var n=GetOrCreateMetadataMap(e,t,false);if(IsUndefined(n))return r;var i=n.keys();var s=GetIterator(i);var o=0;while(true){var a=IteratorStep(s);if(!a){r.length=o;return r}var c=IteratorValue(a);try{r[o]=c}catch(e){try{IteratorClose(s)}finally{throw e}}o++}}function OrdinaryDeleteMetadata(e,r,n){var i=GetOrCreateMetadataMap(r,n,false);if(IsUndefined(i))return false;if(!i.delete(e))return false;if(i.size===0){var s=t.get(r);if(!IsUndefined(s)){s.delete(n);if(s.size===0){t.delete(s)}}}return true}}function CreateFallbackProvider(e){var t=e.defineMetadata,r=e.hasOwnMetadata,n=e.getOwnMetadata,i=e.getOwnMetadataKeys,s=e.deleteMetadata;var o=new y;var a={isProviderFor:function(e,t){var r=o.get(e);if(!IsUndefined(r)&&r.has(t)){return true}if(i(e,t).length){if(IsUndefined(r)){r=new m;o.set(e,r)}r.add(t);return true}return false},OrdinaryDefineOwnMetadata:t,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:n,OrdinaryOwnMetadataKeys:i,OrdinaryDeleteMetadata:s};return a}function GetMetadataProvider(e,t,r){var n=b.getProvider(e,t);if(!IsUndefined(n)){return n}if(r){if(b.setProvider(e,t,v)){return v}throw new Error("Illegal state.")}return undefined}function CreateMapPolyfill(){var e={};var t=[];var r=function(){function MapIterator(e,t,r){this._index=0;this._keys=e;this._values=t;this._selector=r}MapIterator.prototype["@@iterator"]=function(){return this};MapIterator.prototype[s]=function(){return this};MapIterator.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);if(e+1>=this._keys.length){this._index=-1;this._keys=t;this._values=t}else{this._index++}return{value:r,done:false}}return{value:undefined,done:true}};MapIterator.prototype.throw=function(e){if(this._index>=0){this._index=-1;this._keys=t;this._values=t}throw e};MapIterator.prototype.return=function(e){if(this._index>=0){this._index=-1;this._keys=t;this._values=t}return{value:e,done:true}};return MapIterator}();var n=function(){function Map(){this._keys=[];this._values=[];this._cacheKey=e;this._cacheIndex=-2}Object.defineProperty(Map.prototype,"size",{get:function(){return this._keys.length},enumerable:true,configurable:true});Map.prototype.has=function(e){return this._find(e,false)>=0};Map.prototype.get=function(e){var t=this._find(e,false);return t>=0?this._values[t]:undefined};Map.prototype.set=function(e,t){var r=this._find(e,true);this._values[r]=t;return this};Map.prototype.delete=function(t){var r=this._find(t,false);if(r>=0){var n=this._keys.length;for(var i=r+1;i<n;i++){this._keys[i-1]=this._keys[i];this._values[i-1]=this._values[i]}this._keys.length--;this._values.length--;if(SameValueZero(t,this._cacheKey)){this._cacheKey=e;this._cacheIndex=-2}return true}return false};Map.prototype.clear=function(){this._keys.length=0;this._values.length=0;this._cacheKey=e;this._cacheIndex=-2};Map.prototype.keys=function(){return new r(this._keys,this._values,getKey)};Map.prototype.values=function(){return new r(this._keys,this._values,getValue)};Map.prototype.entries=function(){return new r(this._keys,this._values,getEntry)};Map.prototype["@@iterator"]=function(){return this.entries()};Map.prototype[s]=function(){return this.entries()};Map.prototype._find=function(e,t){if(!SameValueZero(this._cacheKey,e)){this._cacheIndex=-1;for(var r=0;r<this._keys.length;r++){if(SameValueZero(this._keys[r],e)){this._cacheIndex=r;break}}}if(this._cacheIndex<0&&t){this._cacheIndex=this._keys.length;this._keys.push(e);this._values.push(undefined)}return this._cacheIndex};return Map}();return n;function getKey(e,t){return e}function getValue(e,t){return t}function getEntry(e,t){return[e,t]}}function CreateSetPolyfill(){var e=function(){function Set(){this._map=new p}Object.defineProperty(Set.prototype,"size",{get:function(){return this._map.size},enumerable:true,configurable:true});Set.prototype.has=function(e){return this._map.has(e)};Set.prototype.add=function(e){return this._map.set(e,e),this};Set.prototype.delete=function(e){return this._map.delete(e)};Set.prototype.clear=function(){this._map.clear()};Set.prototype.keys=function(){return this._map.keys()};Set.prototype.values=function(){return this._map.keys()};Set.prototype.entries=function(){return this._map.entries()};Set.prototype["@@iterator"]=function(){return this.keys()};Set.prototype[s]=function(){return this.keys()};return Set}();return e}function CreateWeakMapPolyfill(){var e=16;var t=u.create();var n=CreateUniqueKey();return function(){function WeakMap(){this._key=CreateUniqueKey()}WeakMap.prototype.has=function(e){var t=GetOrCreateWeakMapTable(e,false);return t!==undefined?u.has(t,this._key):false};WeakMap.prototype.get=function(e){var t=GetOrCreateWeakMapTable(e,false);return t!==undefined?u.get(t,this._key):undefined};WeakMap.prototype.set=function(e,t){var r=GetOrCreateWeakMapTable(e,true);r[this._key]=t;return this};WeakMap.prototype.delete=function(e){var t=GetOrCreateWeakMapTable(e,false);return t!==undefined?delete t[this._key]:false};WeakMap.prototype.clear=function(){this._key=CreateUniqueKey()};return WeakMap}();function CreateUniqueKey(){var e;do{e="@@WeakMap@@"+CreateUUID()}while(u.has(t,e));t[e]=true;return e}function GetOrCreateWeakMapTable(e,t){if(!r.call(e,n)){if(!t)return undefined;Object.defineProperty(e,n,{value:u.create()})}return e[n]}function FillRandomBytes(e,t){for(var r=0;r<t;++r)e[r]=Math.random()*255|0;return e}function GenRandomBytes(e){if(typeof Uint8Array==="function"){var t=new Uint8Array(e);if(typeof crypto!=="undefined"){crypto.getRandomValues(t)}else if(typeof msCrypto!=="undefined"){msCrypto.getRandomValues(t)}else{FillRandomBytes(t,e)}return t}return FillRandomBytes(new Array(e),e)}function CreateUUID(){var t=GenRandomBytes(e);t[6]=t[6]&79|64;t[8]=t[8]&191|128;var r="";for(var n=0;n<e;++n){var i=t[n];if(n===4||n===6||n===8)r+="-";if(i<16)r+="0";r+=i.toString(16).toLowerCase()}return r}}function MakeDictionary(e){e.__=undefined;delete e.__;return e}}))})(e||(e={}))},53322:e=>{var t=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.decode=decode;e.encode=encode;e.familyOf=familyOf;e.name=void 0;e.sizeOf=sizeOf;e.v6=e.v4=void 0;const t=/^(\d{1,3}\.){3,3}\d{1,3}$/;const r=4;const n=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;const i=16;const s={name:"v4",size:r,isFormat:e=>t.test(e),encode(e,t,n){n=~~n;t=t||new Uint8Array(n+r);const i=e.length;let s=0;for(let r=0;r<i;){const i=e.charCodeAt(r++);if(i===46){t[n++]=s;s=0}else{s=s*10+(i-48)}}t[n]=s;return t},decode(e,t){t=~~t;return`${e[t++]}.${e[t++]}.${e[t++]}.${e[t]}`}};e.v4=s;const o={name:"v6",size:i,isFormat:e=>e.length>0&&n.test(e),encode(e,t,r){r=~~r;let n=r+i;let s=-1;let o=0;let a=0;let c=true;let u=false;t=t||new Uint8Array(r+i);for(let i=0;i<e.length;i++){let d=e.charCodeAt(i);if(d===58){if(c){if(s!==-1){if(r<n)t[r]=0;if(r<n-1)t[r+1]=0;r+=2}else if(r<n){s=r}}else{if(u===true){if(r<n)t[r]=a;r++}else{if(r<n)t[r]=o>>8;if(r<n-1)t[r+1]=o&255;r+=2}o=0;a=0}c=true;u=false}else if(d===46){if(r<n)t[r]=a;r++;a=0;o=0;c=false;u=true}else{c=false;if(d>=97){d-=87}else if(d>=65){d-=55}else{d-=48;a=a*10+d}o=(o<<4)+d}}if(c===false){if(u===true){if(r<n)t[r]=a;r++}else{if(r<n)t[r]=o>>8;if(r<n-1)t[r+1]=o&255;r+=2}}else if(s===0){if(r<n)t[r]=0;if(r<n-1)t[r+1]=0;r+=2}else if(s!==-1){r+=2;for(let e=Math.min(r-1,n-1);e>=s+2;e--){t[e]=t[e-2]}t[s]=0;t[s+1]=0;s=r}if(s!==r&&s!==-1){if(r>n-2){r=n-2}while(n>s){t[--n]=r<n&&r>s?t[--r]:0}}else{while(r<n){t[r++]=0}}return t},decode(e,t){t=~~t;let r="";for(let n=0;n<i;n+=2){if(n!==0){r+=":"}r+=(e[t+n]<<8|e[t+n+1]).toString(16)}return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};e.v6=o;const a="ip";e.name=a;function sizeOf(e){if(s.isFormat(e))return s.size;if(o.isFormat(e))return o.size;throw Error(`Invalid ip address: ${e}`)}function familyOf(e){return sizeOf(e)===s.size?1:2}function encode(e,t,r){r=~~r;const n=sizeOf(e);if(typeof t==="function"){t=t(r+n)}if(n===s.size){return s.encode(e,t,r)}return o.encode(e,t,r)}function decode(e,t,r){t=~~t;r=r||e.length-t;if(r===s.size){return s.decode(e,t,r)}if(r===o.size){return o.decode(e,t,r)}throw Error(`Invalid buffer size needs to be ${s.size} for v4 or ${o.size} for v6.`)}return"default"in e?e.default:e}({});if(typeof define==="function"&&define.amd)define([],(function(){return t}));else if(true)e.exports=t},22527:e=>{"use strict";function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}const t=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function ensureBuffer(e){if(Buffer.isBuffer(e)){return e}if(typeof e==="number"){return Buffer.alloc(e)}else if(typeof e==="string"){return Buffer.from(e)}else{throw new Error("input must be buffer, number, or string, received "+typeof e)}}function bufferizeInt(e){const t=ensureBuffer(4);t.writeInt32BE(e,0);return t}function _crc32(e,r){e=ensureBuffer(e);if(Buffer.isBuffer(r)){r=r.readUInt32BE(0)}let n=~~r^-1;for(var i=0;i<e.length;i++){n=t[(n^e[i])&255]^n>>>8}return n^-1}function crc32(){return bufferizeInt(_crc32.apply(null,arguments))}crc32.signed=function(){return _crc32.apply(null,arguments)};crc32.unsigned=function(){return _crc32.apply(null,arguments)>>>0};var r=crc32;const n=getDefaultExportFromCjs(r);e.exports=n},83435:e=>{"use strict";e.exports={i8:"5.23.5"}}};var __webpack_module_cache__={};function __nccwpck_require__(e){var t=__webpack_module_cache__[e];if(t!==undefined){return t.exports}var r=__webpack_module_cache__[e]={id:e,loaded:false,exports:{}};var n=true;try{__webpack_modules__[e].call(r.exports,r,r.exports,__nccwpck_require__);n=false}finally{if(n)delete __webpack_module_cache__[e]}r.loaded=true;return r.exports}(()=>{__nccwpck_require__.nmd=e=>{e.paths=[];if(!e.children)e.children=[];return e}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__=__nccwpck_require__(42587);module.exports=__webpack_exports__})();